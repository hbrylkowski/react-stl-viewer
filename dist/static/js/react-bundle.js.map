{"version":3,"sources":["webpack:///react-bundle.js","webpack:///webpack/bootstrap a047fb9ea7f8c963cbdb","webpack:///./react/app.js","webpack:///./~/react/index.js","webpack:///./~/prop-types/index.js","webpack:///./~/domkit/appendVendorPrefix.js","webpack:///./~/domkit/insertKeyframesRule.js","webpack:///./~/fbjs/lib/emptyFunction.js","webpack:///./~/fbjs/lib/emptyObject.js","webpack:///./~/object-assign/index.js","webpack:///./~/react-dom/index.js","webpack:///./react/containers/App.js","webpack:///./src/Paint.js","webpack:///./src/STLViewer.js","webpack:///./src/Three.js","webpack:///./~/domkit/builtinStyle.js","webpack:///./~/domkit/getVendorPrefix.js","webpack:///./~/domkit/getVendorPropertyName.js","webpack:///./~/domkit/insertRule.js","webpack:///./~/fbjs/lib/EventListener.js","webpack:///./~/fbjs/lib/ExecutionEnvironment.js","webpack:///./~/fbjs/lib/containsNode.js","webpack:///./~/fbjs/lib/focusNode.js","webpack:///./~/fbjs/lib/getActiveElement.js","webpack:///./~/fbjs/lib/invariant.js","webpack:///./~/fbjs/lib/isNode.js","webpack:///./~/fbjs/lib/isTextNode.js","webpack:///./~/fbjs/lib/shallowEqual.js","webpack:///./~/halogenium/lib/BeatLoader.js","webpack:///./~/halogenium/lib/BounceLoader.js","webpack:///./~/halogenium/lib/ClipLoader.js","webpack:///./~/halogenium/lib/DotLoader.js","webpack:///./~/halogenium/lib/FadeLoader.js","webpack:///./~/halogenium/lib/GridLoader.js","webpack:///./~/halogenium/lib/Halogenium.js","webpack:///./~/halogenium/lib/MoonLoader.js","webpack:///./~/halogenium/lib/PacmanLoader.js","webpack:///./~/halogenium/lib/PulseLoader.js","webpack:///./~/halogenium/lib/RingLoader.js","webpack:///./~/halogenium/lib/RiseLoader.js","webpack:///./~/halogenium/lib/RotateLoader.js","webpack:///./~/halogenium/lib/ScaleLoader.js","webpack:///./~/halogenium/lib/SkewLoader.js","webpack:///./~/halogenium/lib/SquareLoader.js","webpack:///./~/halogenium/lib/SyncLoader.js","webpack:///./~/prop-types/factoryWithThrowingShims.js","webpack:///./~/prop-types/lib/ReactPropTypesSecret.js","webpack:///./~/react-dom/cjs/react-dom.production.min.js","webpack:///./~/react/cjs/react.production.min.js","webpack:///./~/three-orbit-controls/index.js","webpack:///./~/three/three.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_react","_react2","_reactDom","_reactDom2","_App","_App2","render","createElement","document","getElementById","getVendorPropertyName","target","sources","to","Object","hasOwnProperty","prototype","nextIndex","arguments","length","nextSource","from","key","prefixed","insertRule","vendorPrefix","index","keyframes","name","Date","css","property","part","makeEmptyFunction","arg","emptyFunction","thatReturns","thatReturnsFalse","thatReturnsTrue","thatReturnsNull","thatReturnsThis","this","thatReturnsArgument","emptyObject","toObject","val","undefined","TypeError","shouldUseNative","assign","test1","String","getOwnPropertyNames","test2","i","fromCharCode","order2","map","n","join","test3","split","forEach","letter","keys","err","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","source","symbols","s","checkDCE","__REACT_DEVTOOLS_GLOBAL_HOOK__","console","error","_classCallCheck","instance","Constructor","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","_createClass","defineProperties","props","descriptor","protoProps","staticProps","_STLViewer","_STLViewer2","App","_Component","_this","getPrototypeOf","onChange","_ref","files","reader","FileReader","readAsArrayBuffer","onload","setState","model","result","state","color","clickBlue","bind","clickRed","e","preventDefault","type","modelColor","lights","rotate","onClick","Component","_interopRequireWildcard","newObj","_Three","THREE","OrbitControls","DIRECTIONAL_LIGHT","Paint","loader","STLLoader","scene","Scene","renderer","WebGLRenderer","antialias","reqNumber","context","component","width","height","backgroundColor","orbitControls","cameraX","cameraY","cameraZ","rotationSpeeds","lightColor","mesh","remove","geometry","dispose","material","grid","directionalLightObj","getObjectByName","animationRequestId","cancelAnimationFrame","distance","addSTLToScene","url","reqId","Promise","resolve","crossOrigin","loadFromUrl","file","_this2","loadFromFile","_this3","loadPromise","loadSTLFromUrl","ArrayBuffer","then","computeFaceNormals","computeVertexNormals","center","MeshLambertMaterial","overdraw","hasColors","MeshPhongMaterial","opacity","alpha","vertexColors","VertexColors","Mesh","computeBoundingBox","xDims","boundingBox","max","x","min","yDims","y","zDims","z","rotation","add","addCamera","addInteractionControls","addToReactComponent","animate","camera","PerspectiveCamera","PointLight","Math","position","set","lookAt","setSize","setClearColor","controls","findDOMNode","enableDamping","enableRotate","enableKeys","addEventListener","orbitRender","replaceChild","domElement","firstChild","requestAnimationFrame","update","forceContextLoss","_propTypes","_propTypes2","_halogenium","_Paint","_Paint2","STLViewer","apply","paint","init","nextProps","nextState","JSON","stringify","clean","_props","className","style","overflow","display","justifyContent","alignItems","ScaleLoader","size","propTypes","string","number","bool","array","arrayOf","oneOfType","instanceOf","isRequired","defaultProps","manager","DefaultLoadingManager","onLoad","onProgress","onError","scope","XHRLoader","setCrossOrigin","setResponseType","load","text","parse","buffer","data","isBinary","expect","face_size","n_faces","DataView","binData","getUint32","byteLength","fileLength","getUint8","ensureBinary","parseBinary","parseASCII","ensureString","r","g","b","colors","defaultR","defaultG","defaultB","faces","Float32Array","dataOffset","faceLength","offset","BufferGeometry","vertices","normals","face","start","normalX","getFloat32","normalY","normalZ","packedColor","getUint16","vertexstart","addAttribute","BufferAttribute","normal","patternFace","patternNormal","patternVertex","Geometry","exec","Vector3","parseFloat","push","Face3","computeBoundingSphere","buf","array_buffer","Uint8Array","str","charCodeAt","byteOffset","_isString","_getCharCodes","end","codes","_getBytes","littleEndian","_littleEndian","Error","isString","slice","Array","reverse","getFloat64","sign","exponent","mantissa","pow","NaN","Infinity","getInt32","getInt16","getInt8","cssVendorPrefix","styles","window","getComputedStyle","documentElement","pre","match","OLink","domVendorPrefix","builtinStyle","prefixes","prop","isSupportTest","vendorProp","UpperProp","charAt","toUpperCase","substr","extraSheet","getElementsByTagName","appendChild","sheet","styleSheet","cssRules","rules","EventListener","listen","eventType","callback","removeEventListener","attachEvent","detachEvent","capture","registerDefault","canUseDOM","ExecutionEnvironment","canUseWorkers","Worker","canUseEventListeners","canUseViewport","screen","isInWorker","containsNode","outerNode","innerNode","isTextNode","parentNode","contains","compareDocumentPosition","focusNode","node","focus","getActiveElement","doc","activeElement","body","invariant","condition","format","a","d","f","validateFormat","args","argIndex","replace","framesToPop","isNode","object","ownerDocument","defaultView","Node","nodeType","nodeName","is","shallowEqual","objA","objB","keysA","keysB","_extends","_appendVendorPrefix","_appendVendorPrefix2","_insertKeyframesRule","_insertKeyframesRule2","50%","transform","100%","animationName","loading","margin","verticalAlign","ptKeys","BeatLoader","_temp","_ret","_len","_key","concat","getBallStyle","borderRadius","getAnimationStyle","animation","animationFillMode","getStyle","border","klen","0%, 100%","BounceLoader","top","left","0%","ClipLoader","borderColor","borderBottomColor","background","rotateKeyframes","bounceKeyframes","rotateAnimationName","bounceAnimationName","DotLoader","ballSize","bottom","radius","FadeLoader","getLineStyle","getPosStyle","quarter","lines","l1","l2","l3","l4","l5","l6","l7","l8","fontSize","random","GridLoader","animationDuration","animationDelay","SyncLoader","SquareLoader","SkewLoader","RotateLoader","RiseLoader","RingLoader","PulseLoader","PacmanLoader","MoonLoader","_BeatLoader2","_BeatLoader3","_BounceLoader2","_BounceLoader3","_ClipLoader2","_ClipLoader3","_DotLoader2","_DotLoader3","_FadeLoader2","_FadeLoader3","_GridLoader2","_GridLoader3","_MoonLoader2","_MoonLoader3","_PacmanLoader2","_PacmanLoader3","_PulseLoader2","_PulseLoader3","_RingLoader2","_RingLoader3","_RiseLoader2","_RiseLoader3","_RotateLoader2","_RotateLoader3","_ScaleLoader2","_ScaleLoader3","_SkewLoader2","_SkewLoader3","_SquareLoader2","_SquareLoader3","_SyncLoader2","_SyncLoader3","moonSize","animations","75%","s1","s2","borderRight","borderTop","borderLeft","borderBottom","renderLoader","45%","80%","rightRotateKeyframes","leftRotateKeyframes","rightRotateAnimationName","leftRotateAnimationName","getCircleStyle","perspective","parseInt","riseAmount","keyframesEven","25%","keyframesOdd","25","animationNameEven","animationNameOdd","getSharpStyle","getSquareStyle","33%","66%","ReactPropTypesSecret","shim","propName","componentName","location","propFullName","secret","getShim","ReactPropTypes","func","symbol","any","element","objectOf","oneOf","shape","exact","checkPropTypes","PropTypes","E","encodeURIComponent","pa","va","oa","wa","hasBooleanValue","hasStringBooleanValue","hasOverloadedBooleanValue","toLowerCase","ua","Ia","Ja","h","k","P","_hasCaughtError","_caughtError","q","v","Ka","_hasRethrowError","_rethrowError","Na","La","Ma","indexOf","Oa","extractEvents","eventTypes","Pa","phasedRegistrationNames","Qa","registrationName","Ra","Sa","dependencies","Ta","Ua","Za","currentTarget","Ya","invokeGuardedCallbackAndCatchFirstError","$a","isArray","ab","cb","_dispatchListeners","_dispatchInstances","isPropagationStopped","isPersistent","release","db","gb","ib","stateNode","Wa","disabled","jb","kb","bb","lb","rethrowCaughtError","pb","Q","tag","pop","qb","rb","ob","tb","return","ub","vb","dispatchConfig","wb","_targetInst","xb","yb","zb","Ab","Bb","alternate","Eb","Db","l","Fb","S","_fallbackText","_startText","Gb","_root","T","nativeEvent","Interface","isDefaultPrevented","defaultPrevented","returnValue","C","Kb","eventPool","Lb","destructor","Jb","getPooled","Mb","Nb","dc","Pb","keyCode","ec","detail","gc","which","cc","ac","hc","fc","Vb","ctrlKey","altKey","metaKey","char","$b","mc","Xa","jc","restoreControlledState","oc","kc","lc","pc","rc","tc","sc","vc","uc","wc","srcElement","correspondingUseElement","yc","setAttribute","xc","implementation","hasFeature","zc","Ac","getOwnPropertyDescriptor","get","getValue","setValue","stopTracking","_valueTracker","Bc","Cc","checked","Ec","Dc","change","Hc","Ic","Jc","Lc","Fc","Mc","Gc","propertyName","Nc","Oc","Pc","$c","bd","dd","getModifierState","cd","ed","fd","jd","displayName","kd","effectTag","ld","_reactInternalFiber","md","nd","child","sibling","current","od","pd","rd","targetInst","ancestors","containerInfo","sd","topLevelType","ud","td","U","ba","vd","wd","qd","yd","Cd","Ad","zd","Bd","Hd","Gd","Fd","Ed","Id","Jd","textContent","nextSibling","Kd","contentEditable","Rd","Qd","Nd","da","selectionStart","selectionEnd","getSelection","anchorNode","anchorOffset","focusOffset","Pd","ea","Md","select","Od","Td","Ud","Vd","Wd","charCode","Zd","$d","ae","be","ce","V","he","ge","W","ke","le","je","ie","me","contextTypes","D","__reactInternalMemoizedUnmaskedChildContext","__reactInternalMemoizedMaskedChildContext","childContextTypes","ne","X","oe","cursor","pe","getChildContext","B","qe","__reactInternalMemoizedMergedChildContext","re","Y","memoizedState","updateQueue","memoizedProps","pendingProps","ref","internalContextTag","lastEffect","firstEffect","nextEffect","expirationTime","se","te","isReactComponent","ue","ve","we","handler","xe","ye","children","pendingChildren","Be","Ce","isDisabled","supportsFiber","inject","ze","onCommitFiberRoot","Ae","onCommitFiberUnmount","De","Ee","Fe","baseState","first","last","callbackList","hasForceUpdate","isInitialized","Ge","next","He","Ie","partialState","Je","isReplace","isForced","Ke","Le","updater","isMounted","enqueueSetState","nextCallback","enqueueReplaceState","enqueueForceUpdate","adoptClassInstance","constructClassInstance","mountClassInstance","refs","unstable_isAsyncReactComponent","componentWillMount","componentDidMount","updateClassInstance","u","componentWillReceiveProps","componentDidUpdate","G","I","L","shouldComponentUpdate","isPureReactComponent","componentWillUpdate","Xe","We","Ze","_owner","_stringRef","$e","toString","af","Map","$$typeof","Re","Ve","Se","Te","Ue","Ye","A","w","delete","N","done","J","df","cf","bf","pendingContext","shouldSetTextContent","useSyncScheduling","shouldDeprioritizeSubtree","pushHostContext","pushHostContainer","enterHydrationState","resetHydrationState","tryToClaimNextHydratableInstance","Ob","beginWork","hydrate","beginFailedWork","ef","createInstance","createTextInstance","appendInitialChild","finalizeInitialChildren","prepareUpdate","persistence","getRootHostContainer","popHostContext","getHostContext","popHostContainer","prepareToHydrateHostInstance","prepareToHydrateHostTextInstance","popHydrationState","mutation","completeWork","ff","componentWillUnmount","getPublicInstance","commitMount","commitUpdate","resetTextContent","commitTextUpdate","appendChildToContainer","insertBefore","insertInContainerBefore","removeChild","removeChildFromContainer","commitResetTextContent","commitPlacement","commitDeletion","commitWork","commitLifeCycles","commitAttachRef","commitDetachRef","hf","gf","getChildHostContext","getRootHostContext","resetHostContainer","jf","hydration","canHydrateInstance","canHydrateTextInstance","getNextHydratableSibling","getFirstHydratableChild","hydrateInstance","hydrateTextInstance","kf","Qb","ja","isReadyForCommit","yg","t","zg","Ag","Ne","Oe","Sc","Bg","Tc","Cg","Dg","Eg","R","componentDidCatch","componentStack","ca","Qc","ha","qa","Fg","H","rg","Gg","Uc","F","ra","Rc","eb","qg","has","Set","_debugOwner","_debugSource","fileName","lineNumber","errorBoundary","errorBoundaryFound","errorBoundaryName","willRetry","suppressReactErrorLogging","Vc","ka","Hg","Rb","Ig","nextScheduledRoot","remainingExpirationTime","O","sa","Fa","la","Sb","ma","na","Wc","Pe","Tb","Jg","Xc","Kg","timeout","fb","Yc","Ub","Zc","finishedWork","timeRemaining","Lg","Me","now","scheduleDeferredCallback","cancelDeferredCallback","prepareForCommit","resetAfterCommit","computeAsyncExpiration","computeExpirationForFiber","scheduleWork","batchedUpdates","unbatchedUpdates","flushSync","deferredUpdates","lf","createContainer","updateContainer","getPublicRootInstance","findHostInstance","findHostInstanceWithNoPortals","injectIntoDevTools","findFiberByHostInstance","findHostInstanceByFiber","pf","Hf","Gf","Ff","Ef","test","If","mutationMethod","hasNumericValue","isNaN","hasPositiveNumericValue","Jf","mustUseProperty","attributeName","attributeNamespace","setAttributeNS","Kf","removeAttribute","Lf","step","defaultChecked","defaultValue","_wrapperState","initialValue","initialChecked","Mf","controlled","Nf","Of","Pf","Qf","aa","Children","Rf","Sf","options","selected","defaultSelected","Tf","wasMultiple","multiple","Uf","dangerouslySetInnerHTML","Vf","Wf","Xf","Zf","$f","cg","lastChild","nodeValue","fg","dg","trim","setProperty","hg","gg","ig","lg","topBlur","topFocus","topCancel","topClose","Dd","ng","jg","innerHTML","createElementNS","og","createTextNode","pg","mg","kg","__html","bg","onclick","sg","tg","ug","vg","Ng","Og","hasAttribute","Pg","_reactRootContainer","Z","Qg","Rg","fa","ia","suppressContentEditableWarning","suppressHydrationWarning","ta","MUST_USE_PROPERTY","HAS_BOOLEAN_VALUE","HAS_NUMERIC_VALUE","HAS_POSITIVE_NUMERIC_VALUE","HAS_OVERLOADED_BOOLEAN_VALUE","HAS_STRING_BOOLEAN_VALUE","injectDOMPropertyConfig","Properties","DOMAttributeNamespaces","DOMAttributeNames","DOMMutationMethods","xa","ya","K","za","Aa","Ba","Ca","Da","allowFullScreen","async","autoFocus","autoPlay","cols","defer","download","draggable","formNoValidate","hidden","loop","muted","noValidate","open","playsInline","readOnly","required","reversed","rows","rowSpan","scoped","seamless","span","spellCheck","tabIndex","itemScope","acceptCharset","htmlFor","httpEquiv","validity","badInput","Ea","M","xlink","xml","Ga","autoReverse","externalResourcesRequired","preserveAlpha","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlSpace","Ha","injection","injectErrorUtils","invokeGuardedCallback","hasCaughtError","clearCaughtError","Va","freeze","plugins","eventNameDispatchConfigs","registrationNameModules","registrationNameDependencies","possibleRegistrationNames","injectEventPluginOrder","injectEventPluginsByName","hb","mb","getListener","enqueueEvents","processEventQueue","nb","sb","precacheFiberNode","getClosestInstanceFromNode","getInstanceFromNode","getNodeFromInstance","getFiberCurrentPropsFromNode","updateFiberProps","Cb","accumulateTwoPhaseDispatches","accumulateTwoPhaseDispatchesSkipTarget","accumulateEnterLeaveDispatches","accumulateDirectDispatches","Hb","Ib","eventPhase","bubbles","cancelable","timeStamp","isTrusted","stopPropagation","cancelBubble","persist","augmentClass","Wb","documentMode","Xb","Yb","opera","version","Zb","bc","beforeInput","bubbled","captured","compositionEnd","compositionStart","compositionUpdate","ic","nc","injectFiberControlledHostComponent","qc","enqueueStateRestore","restoreStateIfNeeded","date","datetime","datetime-local","email","month","password","range","search","tel","time","week","Kc","ad","_isInputEventSupported","getAttribute","view","Alt","Control","Meta","Shift","screenX","screenY","clientX","clientY","pageX","pageY","shiftKey","button","buttons","relatedTarget","fromElement","toElement","gd","mouseEnter","mouseLeave","hd","parentWindow","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","xd","_enabled","_handleTopLevel","setHandleTopLevel","setEnabled","isEnabled","trapBubbledEvent","trapCapturedEvent","dispatchEvent","animationend","animationiteration","animationstart","transitionend","transition","topAbort","topAnimationEnd","topAnimationIteration","topAnimationStart","topCanPlay","topCanPlayThrough","topChange","topClick","topCompositionEnd","topCompositionStart","topCompositionUpdate","topContextMenu","topCopy","topCut","topDoubleClick","topDrag","topDragEnd","topDragEnter","topDragExit","topDragLeave","topDragOver","topDragStart","topDrop","topDurationChange","topEmptied","topEncrypted","topEnded","topError","topInput","topKeyDown","topKeyPress","topKeyUp","topLoadedData","topLoad","topLoadedMetadata","topLoadStart","topMouseDown","topMouseMove","topMouseOut","topMouseOver","topMouseUp","topPaste","topPause","topPlay","topPlaying","topProgress","topRateChange","topScroll","topSeeked","topSeeking","topSelectionChange","topStalled","topSuspend","topTextInput","topTimeUpdate","topToggle","topTouchCancel","topTouchEnd","topTouchMove","topTouchStart","topTransitionEnd","topVolumeChange","topWaiting","topWheel","Ld","Sd","onSelect","elapsedTime","pseudoElement","clipboardData","Xd","Esc","Spacebar","Left","Up","Right","Down","Del","Win","Menu","Apps","Scroll","MozPrintableKey","Yd","8","9","12","13","16","17","18","19","20","27","32","33","34","35","36","37","38","39","40","45","46","112","113","114","115","116","117","118","119","120","121","122","123","144","145","224","repeat","locale","dataTransfer","touches","targetTouches","changedTouches","deltaX","wheelDeltaX","deltaY","wheelDeltaY","wheelDelta","deltaZ","deltaMode","de","ee","fe","SimpleEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin","Qe","Symbol","for","iterator","mf","nf","of","qf","performance","rf","sf","tf","requestIdleCallback","cancelIdleCallback","Bf","uf","vf","wf","xf","yf","zf","Af","didTimeout","Cf","Df","postMessage","setTimeout","clearTimeout","Yf","html","mathml","svg","ag","MSApp","execUnsafeLocalFunction","namespaceURI","animationIterationCount","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","order","orphans","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","eg","substring","menuitem","area","base","br","col","embed","hr","img","input","keygen","link","meta","param","track","wbr","wg","setInitialProperties","diffProperties","updateProperties","diffHydratedProperties","diffHydratedText","warnForUnmatchedText","warnForDeletedHydratableElement","warnForDeletedHydratableText","warnForInsertedHydratedElement","warnForInsertedHydratedText","querySelectorAll","form","xg","Mg","tagName","rangeCount","focusedElem","selectionRange","extend","createRange","setStart","removeAllRanges","addRange","setEnd","scrollLeft","scrollTop","didNotMatchHydratedContainerTextInstance","didNotMatchHydratedTextInstance","didNotHydrateContainerInstance","didNotHydrateInstance","didNotFindHydratableContainerInstance","didNotFindHydratableContainerTextInstance","didNotFindHydratableInstance","didNotFindHydratableTextInstance","unmount","Sg","createPortal","unstable_renderSubtreeIntoContainer","unmountComponentAtNode","unstable_createPortal","unstable_batchedUpdates","unstable_deferredUpdates","EventPluginHub","EventPluginRegistry","EventPropagators","ReactControlledComponent","ReactDOMComponentTree","ReactDOMEventListener","bundleType","rendererPackageName","Tg","Ug","escape","=",":","keyPrefix","count","forceUpdate","__self","__source","toArray","only","PureComponent","unstable_AsyncComponent","Fragment","cloneElement","createFactory","isValidElement","OrbitConstraint","minDistance","maxDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","PI","minAzimuthAngle","maxAzimuthAngle","dampingFactor","theta","phi","EPS","phiDelta","thetaDelta","scale","panOffset","zoomChanged","getPolarAngle","getAzimuthalAngle","rotateLeft","angle","rotateUp","panLeft","matrix","elements","multiplyScalar","panUp","pan","screenWidth","screenHeight","clone","sub","targetDistance","tan","fov","OrthographicCamera","right","warn","dollyIn","dollyScale","updateProjectionMatrix","dollyOut","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","copy","applyQuaternion","atan2","sqrt","sin","cos","distanceToSquared","dot","quaternion","constraint","clientWidth","clientHeight","getAutoRotationAngle","autoRotateSpeed","getZoomScale","zoomSpeed","onMouseDown","event","enabled","mouseButtons","ORBIT","STATE","ROTATE","rotateStart","ZOOM","enableZoom","DOLLY","dollyStart","PAN","enablePan","panStart","NONE","onMouseMove","onMouseUp","startEvent","rotateEnd","rotateDelta","subVectors","rotateSpeed","dollyEnd","dollyDelta","panEnd","panDelta","endEvent","onMouseWheel","delta","onKeyDown","UP","keyPanSpeed","BOTTOM","LEFT","RIGHT","touchstart","TOUCH_ROTATE","TOUCH_DOLLY","dx","dy","TOUCH_PAN","touchmove","touchend","contextmenu","autoRotate","MOUSE","MIDDLE","Vector2","target0","position0","zoom0","changeEvent","reset","EventDispatcher","noZoom","noRotate","noPan","noKeys","staticMoving","dynamicDampingFactor","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_RESULT__","REVISION","lastTime","vendors","currTime","timeToCall","Function","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoColors","FaceColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipMapNearestFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipMapNearestFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","Projector","projectVector","vector","project","unprojectVector","unproject","pickingRay","CanvasRenderer","clear","Color","setRGB","setHex","setStyle","hex","floor","setHSL","hue2rgb","euclideanModulo","clamp","parseAlpha","strAlpha","components","ColorKeywords","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","getHex","getHexString","getHSL","optionalTarget","hue","saturation","hsl","lightness","offsetHSL","addColors","color1","color2","addScalar","multiply","lerp","equals","fromArray","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","_x","_y","_z","_w","onChangeCallback","setFromEuler","euler","Euler","c1","c2","c3","s3","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","v1","vFrom","vTo","abs","crossVectors","normalize","conjugate","lengthSq","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","multiplyVector3","slerp","cosHalfTheta","halfTheta","acos","sinHalfTheta","ratioA","ratioB","qm","setX","setY","setComponent","getComponent","addVectors","addScaledVector","subScalar","divide","divideScalar","scalar","invScalar","clampScalar","minVal","maxVal","ceil","round","roundToZero","negate","lengthManhattan","distanceTo","setLength","oldLength","lerpVectors","v2","fromAttribute","attribute","itemSize","setZ","multiplyVectors","applyEuler","applyAxisAngle","applyMatrix3","applyMatrix4","applyProjection","qx","qy","qz","qw","ix","iy","iz","iw","Matrix4","multiplyMatrices","projectionMatrix","getInverse","matrixWorld","transformDirection","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","angleTo","dz","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","setFromMatrixPosition","getScaleFromMatrix","setFromMatrixScale","getColumnFromMatrix","setFromMatrixColumn","sx","sy","sz","Vector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","epsilon","epsilon2","xx","yy","zz","xy","xz","yz","_order","DefaultOrder","RotationOrders","asin","setFromQuaternion","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Line3","line","distanceSq","at","closestPointToPointParameter","startP","startEnd","point","clampToLine","startEnd2","startEnd_startP","closestPointToPoint","Box2","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","halfSize","box","empty","expandByVector","expandByScalar","containsPoint","containsBox","getParameter","isIntersectionBox","clampPoint","distanceToPoint","clampedPoint","intersect","union","translate","Box3","setFromObject","updateMatrixWorld","traverse","attributes","positions","getBoundingSphere","Sphere","Matrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","identity","multiplyVector3Array","applyToVector3Array","j","applyToBuffer","getX","getY","getZ","setXYZ","determinant","throwOnInvertible","det","msg","transpose","tmp","flattenToArrayOffset","getNormalMatrix","transposeIntoArray","n14","n24","n34","n41","n42","n43","n44","extractPosition","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","setRotationFromQuaternion","x2","y2","z2","wx","wy","wz","eye","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyToArray","multiplyVector4","rotateAxis","crossVector","getPosition","setPosition","rotateX","rotateY","rotateZ","rotateByAxis","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","compose","decompose","invSX","invSY","invSZ","makeFrustum","near","far","makePerspective","aspect","ymax","degToRad","ymin","xmin","xmax","makeOrthographic","Ray","origin","direction","ray","recast","directionDistance","distanceSqToPoint","distanceSqToSegment","segCenter","segDir","diff","v0","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","b1","invDet","isIntersectionSphere","sphere","intersectSphere","tca","d2","radius2","thc","t0","t1","isIntersectionPlane","plane","distToPoint","denominator","distanceToPlane","constant","intersectPlane","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","edge1","edge2","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","matrix4","optionalCenter","maxRadiusSq","intersectsSphere","radiusSum","deltaLengthSq","getBoundingBox","Frustum","p0","p1","p2","p3","p4","p5","planes","Plane","frustum","setFromMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","boundingSphere","negRadius","intersectsBox","d1","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","orthoPoint","perpendicularMagnitude","isIntersectionLine","startSign","endSign","intersectLine","coplanarPoint","m1","optionalNormalMatrix","normalMatrix","newNormal","newCoplanarPoint","generateUUID","chars","uuid","rnd","clampBottom","mapLinear","a1","a2","b2","smoothstep","smootherstep","random16","randInt","low","high","randFloat","randFloatSpread","degreeToRadiansFactor","degrees","radToDeg","radianToDegreesFactor","radians","isPowerOfTwo","nextPowerOfTwo","Spline","interpolate","t2","t3","intPoint","weight","w2","w3","v3","initFromArray","getPoint","getControlPointsArray","coords","getLength","nSubDivisions","nSamples","oldIntPoint","oldPosition","tmpVec","chunkLengths","totalLength","chunks","total","reparametrizeByArcLength","samplingCoef","indexCurrent","indexNext","realDistance","sampling","newpoints","sl","Triangle","resultLengthSq","barycoordFromPoint","dot00","dot01","dot02","dot11","dot12","denom","invDenom","setFromPointsAndIndices","i0","i1","i2","triangle","midpoint","Clock","autoStart","startTime","oldTime","running","stop","getElapsedTime","getDelta","newTime","hasEventListener","listener","_listeners","listeners","listenerArray","splice","descSort","Raycaster","params","Line","LOD","Points","threshold","Sprite","PointCloud","intersectObject","raycaster","intersects","recursive","visible","raycast","linePrecision","setFromCamera","sort","intersectObjects","objects","Object3D","Object3DIdCount","parent","DefaultUp","onRotationChange","onQuaternionChange","modelViewMatrix","rotationAutoUpdate","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","castShadow","receiveShadow","frustumCulled","renderOrder","userData","eulerOrder","useQuaternion","renderDepth","applyMatrix","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","rotateOnAxis","q1","translateOnAxis","translateX","translateY","translateZ","localToWorld","worldToLocal","getChildByName","getObjectById","getObjectByProperty","getWorldPosition","getWorldQuaternion","getWorldRotation","getWorldScale","getWorldDirection","traverseVisible","traverseAncestors","updateMatrix","force","toJSON","extractFromCache","cache","values","metadata","isRootObject","geometries","materials","textures","images","generator","output","materialIndex","vertexNormals","Face4","dynamic","updateRange","needsUpdate","setDynamic","copyAt","index1","index2","copyArray","copyColorsArray","copyIndicesArray","indices","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","getW","setXY","setXYZW","Int8Attribute","Int8Array","Uint8Attribute","Uint8ClampedAttribute","Uint8ClampedArray","Int16Attribute","Int16Array","Uint16Attribute","Uint16Array","Int32Attribute","Int32Array","Uint32Attribute","Uint32Array","Float32Attribute","Float64Attribute","Float64Array","DynamicBufferAttribute","InstancedBufferAttribute","meshPerAttribute","InterleavedBuffer","stride","InstancedInterleavedBuffer","InterleavedBufferAttribute","interleavedBuffer","GeometryIdCount","faceVertexUvs","morphTargets","morphColors","morphNormals","skinWeights","skinIndices","lineDistances","verticesNeedUpdate","elementsNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","vertex","jl","fromBufferGeometry","uvs","uv","uvs2","uv2","tempNormals","tempUVs","tempUVs2","addFace","groups","group","fl","vA","vB","vC","areaWeighted","vl","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","faceNormal","dstNormalsFace","dstNormalsVertex","computeTangents","computeLineDistances","merge","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","uvs1","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","uvCopy","mergeMesh","mergeVertices","verticesMap","unique","changes","precisionPoints","precision","faceIndicesToRemove","dupIndex","idx","setBit","getNormalIndex","hash","normalsHash","getColorIndex","colorsHash","getUvIndex","uvsHash","parameters","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","uvsCopy","kl","DirectGeometry","computeGroups","fromGeometry","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","morphAttributes","drawRange","addIndex","setIndex","getIndex","drawcalls","offsets","addDrawCall","indexOffset","addGroup","clearDrawCalls","clearGroups","setDrawRange","updateFromObject","direct","__directGeometry","lineDistance","fromDirectGeometry","TypeArray","pA","pB","pC","normalizeNormals","computeOffsets","attribute1","attributeArray1","attribute2","attributeArray2","attributeSize","MaxIndex","InstancedBufferGeometry","maxInstancedCount","instances","Camera","matrixWorldInverse","CubeCamera","cubeResolution","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderTarget","WebGLRenderTargetCube","magFilter","minFilter","updateCubeMap","generateMipmaps","activeCubeFace","setRenderTarget","cx","cy","setLens","focalLength","frameHeight","atan","setViewOffset","fullWidth","fullHeight","Light","AmbientLight","DirectionalLight","intensity","onlyShadow","shadowCameraNear","shadowCameraFar","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowBias","shadowDarkness","shadowMapWidth","shadowMapHeight","shadowMap","shadowMapSize","shadowCamera","shadowMatrix","HemisphereLight","skyColor","groundColor","decay","SpotLight","shadowCameraFov","Cache","Loader","onLoadStart","onLoadProgress","onLoadComplete","extractUrlBase","parts","initMaterials","texturePath","createMaterial","imageLoader","nearest_pow2","log","LN2","create_texture","where","sourceFile","wrap","anisotropy","texture","fullPath","Handlers","Texture","image","canvas","getContext","drawImage","wrapS","wrapT","wrapMap","mirror","rgb2hex","rgb","ImageLoader","mtype","mpars","shading","blending","transparent","depthTest","depthWrite","flipSided","side","doubleSided","wireframe","colorDiffuse","DbgColor","colorEmissive","emissive","colorSpecular","specular","specularCoef","shininess","transparency","mapDiffuse","mapDiffuseRepeat","mapDiffuseOffset","mapDiffuseWrap","mapDiffuseAnisotropy","mapLight","mapLightRepeat","mapLightOffset","mapLightWrap","mapLightAnisotropy","mapAO","mapAORepeat","mapAOOffset","mapAOWrap","mapAOAnisotropy","mapBump","mapBumpRepeat","mapBumpOffset","mapBumpWrap","mapBumpAnisotropy","mapNormal","mapNormalRepeat","mapNormalOffset","mapNormalWrap","mapNormalAnisotropy","mapSpecular","mapSpecularRepeat","mapSpecularOffset","mapSpecularWrap","mapSpecularAnisotropy","mapAlpha","mapAlphaRepeat","mapAlphaOffset","mapAlphaWrap","mapAlphaAnisotropy","mapBumpScale","bumpScale","mapNormalFactor","normalScale","DbgName","handlers","regex","cached","request","XMLHttpRequest","response","itemEnd","itemError","responseType","withCredentials","send","itemStart","setWithCredentials","src","JSONLoader","statusDomElement","_statusDomElement","json","setTexturePath","parseModel","isBitSet","fi","zLength","colorIndex","normalIndex","uvIndex","isQuad","faceA","faceB","uvLayer","nUvLayers","parseSkin","influencesPerVertex","bones","parseMorphing","dstVertices","srcVertices","cl","dstColors","srcColors","LoadingManager","isLoading","itemsLoaded","itemsTotal","onStart","BufferGeometryLoader","typedArray","MaterialLoader","setTextures","getTexture","uniforms","vertexShader","fragmentShader","alphaTest","wireframeLinewidth","sizeAttenuation","alphaMap","bumpMap","normalMap","displacementMap","displacementScale","displacementBias","specularMap","envMap","combine","reflectivity","lightMap","lightMapIntensity","aoMap","aoMapIntensity","ObjectLoader","lastIndexOf","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","geometryLoader","bufferGeometryLoader","widthSegments","heightSegments","BoxGeometry","depth","depthSegments","CircleBufferGeometry","segments","thetaStart","thetaLength","CircleGeometry","CylinderGeometry","radiusTop","radiusBottom","radialSegments","openEnded","SphereGeometry","phiStart","phiLength","SphereBufferGeometry","DodecahedronGeometry","IcosahedronGeometry","OctahedronGeometry","TetrahedronGeometry","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","TorusGeometry","tube","tubularSegments","arc","TorusKnotGeometry","heightScale","TextGeometry","loadImage","path","parseConstant","mapping","getGeometry","getMaterial","mode","Group","levels","level","addLevel","TextureLoader","DataTextureLoader","BinaryTextureLoader","_parser","DataTexture","texData","mipmaps","mipmapCount","CompressedTextureLoader","CompressedTexture","loadTexture","texDatas","isCubemap","Material","MaterialIdCount","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","colorWrite","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","_needsUpdate","setValues","newValue","currentValue","Number","wrapAround","boolean","wrapRGB","LineBasicMaterial","linewidth","linecap","linejoin","fog","LineDashedMaterial","dashSize","gapSize","MeshBasicMaterial","refractionRatio","wireframeLinecap","wireframeLinejoin","skinning","metal","emissiveMap","MeshDepthMaterial","MeshNormalMaterial","MultiMaterial","MeshFaceMaterial","PointsMaterial","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","ShaderMaterial","defines","derivatives","defaultAttributeValues","index0AttributeName","UniformsUtils","RawShaderMaterial","SpriteMaterial","TextureIdCount","DEFAULT_IMAGE","DEFAULT_MAPPING","premultiplyAlpha","flipY","unpackAlignment","onUpdate","getDataURL","toDataURL","transformUv","CanvasTexture","CubeTexture","VideoTexture","video","readyState","HAVE_ENOUGH_DATA","inverseMatrix","testPoint","rayPointDistanceSq","localThresholdSq","intersectPoint","distanceToRay","localThreshold","ParticleSystem","LineSegments","precisionSq","vStart","vEnd","interSegment","interRay","distSq","faceIndex","nbVertices","LineStrip","LinePieces","updateMorphTargets","morphTargetBase","morphTargetInfluences","morphTargetDictionary","ml","getMorphTargetIndexByName","uvIntersection","uv1","uv3","barycoord","tempA","tempB","tempC","uvA","uvB","uvC","intersectionPoint","intersectionPointWorld","isFaceMaterial","faceMaterial","morphInfluences","tl","influence","targets","Bone","skin","Skeleton","boneInverses","useVertexTexture","identityMatrix","boneTextureWidth","boneTextureHeight","boneMatrices","boneTexture","calculateInverses","bl","pose","bone","offsetMatrix","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","gbone","pos","rotq","scl","normalizeSkinWeights","skeleton","sw","MorphAnimMesh","duration","mirroredLoop","lastKeyframe","currentKeyframe","directionBackwards","setFrameRange","startKeyframe","endKeyframe","setDirectionForward","setDirectionBackward","parseAnimations","firstAnimation","pattern","morph","label","setAnimationLabel","playAnimation","fps","updateAnimation","frameTime","keyframe","influences","mix","interpolateTargets","getObjectForDistance","matrixPosition","guessSizeSq","Particle","LensFlare","lensFlares","positionScreen","customUpdateCallback","updateLensFlares","flare","vecX","vecY","wantedRotation","overrideMaterial","autoUpdate","Fog","FogExp2","density","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bumpmap_pars_fragment","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","defaultnormal_vertex","displacementmap_vertex","displacementmap_pars_vertex","emissivemap_fragment","emissivemap_pars_fragment","envmap_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_fragment","fog_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_pars_vertex","lights_lambert_vertex","lights_phong_fragment","lights_phong_pars_fragment","lights_phong_pars_vertex","lights_phong_vertex","linear_to_gamma_fragment","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normalmap_pars_fragment","project_vertex","shadowmap_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","uv_pars_fragment","uv_pars_vertex","uv_vertex","worldpos_vertex","merged","uniforms_src","uniforms_dst","parameter_src","UniformsLib","diffuse","offsetRepeat","flipEnvMap","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","directionalLightDirection","directionalLightColor","hemisphereLightDirection","hemisphereLightSkyColor","hemisphereLightGroundColor","pointLightColor","pointLightPosition","pointLightDistance","pointLightDecay","spotLightColor","spotLightPosition","spotLightDirection","spotLightDistance","spotLightAngleCos","spotLightExponent","spotLightDecay","psColor","shadowmap","ShaderLib","basic","lambert","phong","dashed","totalSize","mNear","mFar","cube","tCube","tFlip","equirect","tEquirect","depthRGBA","glClearColor","_premultipliedAlpha","_gl","clearColor","setDefaultGLState","viewport","_viewportX","_viewportY","_viewportWidth","_viewportHeight","_clearColor","_clearAlpha","resetGLState","_currentProgram","_currentCamera","_currentGeometryProgram","_currentMaterialId","_lightsNeedUpdate","onContextLost","properties","onTextureDispose","deallocateTexture","_infoMemory","onRenderTargetDispose","deallocateRenderTarget","onMaterialDispose","deallocateMaterial","textureProperties","__image__webglTextureCube","deleteTexture","__webglInit","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","deleteRenderbuffer","__webglRenderbuffer","releaseMaterialProgramReference","programInfo","program","programCache","releaseProgram","setupVertexAttributes","startIndex","extension","extensions","initAttributes","geometryAttributes","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","geometryAttribute","enableAttribute","getAttributeBuffer","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","vertexAttribDivisorANGLE","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","disableUnusedAttributes","numericalSort","painterSortStable","reversePainterSortStable","pushImmediateRenderItem","transparentImmediateObjects","transparentImmediateObjectsLastIndex","opaqueImmediateObjects","opaqueImmediateObjectsLastIndex","pushRenderItem","transparentObjects","transparentObjectsLastIndex","opaqueObjects","opaqueObjectsLastIndex","renderItem","_vector3","projectObject","sprites","ImmediateRenderObject","_frustum","sortObjects","_projScreenMatrix","groupMaterial","renderObjects","renderList","renderBufferDirect","renderObjectsImmediate","setMaterial","setProgram","renderBufferImmediate","initMaterial","materialProperties","getParameters","code","getProgramCode","programChange","shaderID","shader","__webglShader","acquireProgram","numSupportedMorphTargets","maxMorphTargets","numSupportedMorphNormals","maxMorphNormals","uniformsList","uniformLocations","getUniforms","setMaterialFaces","setBlending","setDepthFunc","setDepthTest","setDepthWrite","setColorWrite","setPolygonOffset","enable","CULL_FACE","disable","setFlipSided","_usedTextureUnits","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","useProgram","uniformMatrix4fv","capabilities","logarithmicDepthBuffer","uniform1f","logDepthBufFC","cameraPosition","uniform3f","viewMatrix","floatVertexTextures","textureUnit","getTextureUnit","uniform1i","setTexture","boneGlobalMatrices","refreshUniformsFog","setupLights","refreshUniformsLights","_lights","markUniformsLightsNeedsUpdate","refreshUniformsCommon","refreshUniformsLine","refreshUniformsDash","refreshUniformsParticle","refreshUniformsPhong","_shadowPass","refreshUniformsShadow","loadUniformsGeneric","loadUniformsMatrices","modelMatrix","uvScaleMap","_canvas","ambient","directional","distances","decays","spot","directions","anglesCos","exponents","hemi","skyColors","groundColors","light","uniformMatrix3fv","maxTextures","uniform","uniform2f","uniform4f","uniform1iv","uniform3iv","uniform1fv","uniform2fv","uniform3fv","uniform4fv","_array","i3","i4","setCubeTexture","setCubeTextureDynamic","setColorLinear","ll","zlights","dirColors","dirPositions","pointColors","pointPositions","pointDistances","pointDecays","spotColors","spotPositions","spotDistances","spotDirections","spotAnglesCos","spotExponents","spotDecays","hemiSkyColors","hemiGroundColors","hemiPositions","dirLength","pointLength","spotLength","hemiLength","dirCount","pointCount","spotCount","hemiCount","dirOffset","pointOffset","spotOffset","hemiOffset","_direction","setTextureParameters","textureType","isImagePowerOfTwo","texParameteri","TEXTURE_WRAP_S","paramThreeToGL","TEXTURE_WRAP_T","TEXTURE_MAG_FILTER","TEXTURE_MIN_FILTER","CLAMP_TO_EDGE","filterFallback","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","getMaxAnisotropy","uploadTexture","slot","createTexture","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","clampToMaxSize","maxTextureSize","glFormat","glType","mipmap","texImage2D","getCompressedTextureFormats","compressedTexImage2D","generateMipmap","__version","maxSize","TEXTURE_CUBE_MAP","isCompressed","isDataTexture","cubeImage","autoScaleCubemaps","maxCubemapSize","TEXTURE_CUBE_MAP_POSITIVE_X","setupFrameBuffer","framebuffer","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","setupRenderBuffer","renderbuffer","bindRenderbuffer","RENDERBUFFER","depthBuffer","stencilBuffer","renderbufferStorage","DEPTH_COMPONENT16","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL","DEPTH_STENCIL_ATTACHMENT","RGBA4","updateRenderTargetMipmap","NEAREST","LINEAR","REPEAT","MIRRORED_REPEAT","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","UNSIGNED_BYTE","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","BYTE","SHORT","UNSIGNED_SHORT","INT","UNSIGNED_INT","HALF_FLOAT_OES","ALPHA","RGB","RGBA","LUMINANCE","LUMINANCE_ALPHA","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","ZERO","ONE","SRC_COLOR","ONE_MINUS_SRC_COLOR","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","DST_ALPHA","ONE_MINUS_DST_ALPHA","DST_COLOR","ONE_MINUS_DST_COLOR","SRC_ALPHA_SATURATE","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","MIN_EXT","MAX_EXT","_context","_width","_height","pixelRatio","_alpha","_depth","_stencil","stencil","_antialias","premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","autoClear","autoClearColor","autoClearDepth","autoClearStencil","gammaInput","gammaOutput","_currentFramebuffer","_currentWidth","_currentHeight","_infoRender","calls","info","memory","programs","WebGLExtensions","WebGLCapabilities","WebGLState","WebGLProperties","WebGLObjects","WebGLPrograms","bufferRenderer","WebGLBufferRenderer","indexedBufferRenderer","WebGLIndexedBufferRenderer","WebGLShadowMap","spritePlugin","SpritePlugin","lensFlarePlugin","LensFlarePlugin","getContextAttributes","loseContext","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getPrecision","getPixelRatio","setPixelRatio","getSize","updateStyle","setViewport","setScissor","scissor","enableScissorTest","setScissorTest","getClearColor","getClearAlpha","setClearAlpha","bits","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","clearDepth","clearStencil","clearTarget","buffers","hasPositions","createBuffer","hasNormals","hasUvs","bufferData","positionArray","DYNAMIC_DRAW","normalArray","nx","ny","nz","uvArray","colorArray","drawArrays","TRIANGLES","updateBuffers","geometryProgram","activeInfluences","getWireframeAttribute","ELEMENT_ARRAY_BUFFER","setLineWidth","setMode","LINES","renderInstances","lineWidth","LINE_STRIP","POINTS","forceClear","setFaceCulling","cullFace","frontFaceDirection","frontFace","CW","CCW","BACK","FRONT","FRONT_AND_BACK","complete","isCube","isTargetPowerOfTwo","createFramebuffer","createRenderbuffer","shareDepthFrom","vx","vy","readRenderTargetPixels","WebGLRenderTarget","restore","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsVertexTextures","vertexTextures","supportsInstancedArrays","addPrePlugin","addPostPlugin","updateShadowMap","shadowMapEnabled","shadowMapType","shadowMapCullFace","shadowMapDebug","debug","drawArraysInstancedANGLE","drawElements","drawElementsInstancedANGLE","gl","getExtension","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","floatFragmentTextures","_maxPrecision","WebGLGeometries","onGeometryDispose","buffergeometry","_bufferGeometry","deleteAttributes","deleteAttribute","__webglBuffer","deleteBuffer","removeAttributeBuffer","updateAttribute","bufferType","attributeProperties","updateBuffer","usage","STATIC_DRAW","bufferSubData","subarray","edges","checkEdge","list","WebGLProgram","generateDefines","fetchUniformLocations","identifiers","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","suffixPos","fetchAttributeLocations","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","filterEmptyLine","programIdCount","shadowMapTypeDefine","envMapTypeDefine","envMapModeDefine","envMapBlendingDefine","prefixVertex","prefixFragment","gammaFactorDefine","customDefines","createProgram","maxDirLights","maxPointLights","maxSpotLights","maxHemiLights","maxShadows","maxBones","flatShading","filter","useFog","fogExp","vertexGlsl","fragmentGlsl","glVertexShader","WebGLShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","programLog","getProgramInfoLog","vertexLog","getShaderInfoLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","cachedUniforms","cachedAttributes","destroy","deleteProgram","usedTimes","allocateBones","nVertexUniforms","nVertexMatrices","allocateLights","dirLights","pointLights","spotLights","hemiLights","allocateShadows","shaderIDs","parameterNames","maxLightCount","envMapMode","parameterName","pl","addLineNumbers","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","_renderer","_objects","getDepthMaterial","depthMaterial","useMorphing","useSkinning","customDepthMaterial","_depthMaterialMorphSkin","_depthMaterialSkin","_depthMaterialMorph","_depthMaterial","_renderList","_state","_matrixPosition","depthShader","depthUniforms","BLEND","shadowFilter","pars","cameraHelper","CameraHelper","clearAlpha","newAttributes","enabledAttributes","compressedTextureFormats","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentDepthFunc","currentDepthWrite","currentColorWrite","currentFlipSided","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","currentTextureSlot","currentBoundTextures","DEPTH_TEST","LEQUAL","blendFunc","enableVertexAttribArray","disableVertexAttribArray","formats","COMPRESSED_TEXTURE_FORMATS","blendEquationSeparate","blendFuncSeparate","NEVER","ALWAYS","LESS","EQUAL","GEQUAL","GREATER","NOTEQUAL","depthMask","colorMask","factor","units","POLYGON_OFFSET_FILL","scissorTest","SCISSOR_TEST","webglSlot","webglType","webglTexture","boundTexture","flares","vertexBuffer","elementBuffer","hasVertexTexture","tempTexture","occlusionTexture","renderType","occlusionMap","screenPosition","viewportWidth","viewportHeight","tempPosition","invAspect","halfViewportWidth","halfViewportHeight","screenPositionPixels","TEXTURE1","copyTexImage2D","sprite","spritePosition","spriteRotation","spriteScale","uvOffset","uvScale","fogType","fillStyle","fillRect","oldFogType","sceneFogType","GeometryUtils","geometry1","geometry2","ImageUtils","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","getNormalMap","subtract","getImageData","imageData","createImageData","ly","uy","lx","ux","num_points","putImageData","generateDataTexture","SceneUtils","createMultiMaterialObject","detach","attach","FontUtils","divisions","getFace","loadFace","family","familyName","ThreeFont","cssFontWeight","cssFontStyle","drawText","resolution","fontPaths","Path","ret","extractGlyphPoints","paths","outline","action","cpx","cpy","cpx0","cpy0","cpx1","cpy1","cpx2","cpy2","laste","pts","glyph","glyphs","o","_cachedOutline","moveTo","lineTo","quadraticCurveTo","Shape","Utils","bezierCurveTo","b3","generateShapes","curveSegments","font","shapes","toShapes","namespace","EPSILON","process","contour","verts","vertIndices","nv","snip","px","py","aX","aY","bX","bY","cX","cY","apx","apy","bpx","bpy","cCROSSap","bCROSScp","aCROSSbp","Triangulate","typeface_js","_typeface_js","Audio","createBufferSource","onended","onEnded","gain","createGain","connect","destination","panner","createPanner","autoplay","playbackRate","isPlaying","decodeAudioData","play","pause","currentTime","disconnect","setFilter","getFilter","setPlaybackRate","getPlaybackRate","setLoop","getLoop","setRefDistance","refDistance","getRefDistance","setRolloffFactor","rolloffFactor","getRolloffFactor","setVolume","getVolume","AudioListener","AudioContext","webkitAudioContext","orientation","setOrientation","Curve","getPointAt","getUtoTmapping","getPoints","getSpacedPoints","lengths","getLengths","__arcLengthDivisions","cacheArcLengths","sum","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","pt1","pt2","vec","getTangentAt","tangentQuadraticBezier","tangentCubicBezier","tangentSpline","h00","h10","h01","h11","getPointFunc","CurvePath","curves","bends","autoClose","curve","checkConnection","closePath","startPoint","endPoint","LineCurve","curveLengths","getCurveLengths","lens","cacheLengths","sums","maxX","maxY","maxZ","minX","minY","minZ","NEGATIVE_INFINITY","POSITIVE_INFINITY","createPointsGeometry","createGeometry","createSpacedPointsGeometry","addWrapPath","bendpath","getTransformedPoints","oldPts","getWrapPoints","getTransformedSpacedPoints","oldX","oldY","xNorm","bounds","pathPt","actions","fromPoints","PathActions","MOVE_TO","LINE_TO","QUADRATIC_CURVE_TO","BEZIER_CURVE_TO","CSPLINE_THRU","ARC","ELLIPSE","vlen","lastargs","x0","y0","aCPx","aCPy","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","SplineCurve","aRadius","aStartAngle","aEndAngle","aClockwise","absarc","absellipse","ellipse","xRadius","yRadius","aRotation","EllipseCurve","lastPoint","closedPath","useSpacedPoints","item","spts","spline","deltaAngle","tdivisions","isCCW","noHoles","extractSubpaths","inActions","subPaths","lastPath","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","inside","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","isClockWise","tmpPoints","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","hole","tmpHoles","holes","extrude","extruded","ExtrudeGeometry","makeGeometry","ShapeGeometry","getPointsHoles","holesPts","getSpacedPointsHoles","extractAllPoints","extractPoints","extractAllSpacedPoints","triangulateShape","point_in_segment_2D_colin","inSegPt1","inSegPt2","inOtherPt","intersect_segments_2D","inSeg1Pt1","inSeg1Pt2","inSeg2Pt1","inSeg2Pt2","inExcludeAdjacentSegs","seg1dx","seg1dy","seg2dx","seg2dy","seg1seg2dx","seg1seg2dy","limit","perpSeg1","perpSeg2","factorSeg1","seg1Pt","seg2Pt","seg1min","seg1max","seg1minVal","seg1maxVal","seg2min","seg2max","seg2minVal","seg2maxVal","isPointInsideAngle","inVertex","inLegFromPt","inLegToPt","legFromPtX","legFromPtY","legToPtX","legToPtY","otherPtX","otherPtY","from2toAngle","from2otherAngle","other2toAngle","removeHoles","isCutLineInsideAngles","inShapeIdx","inHoleIdx","lastShapeIdx","prevShapeIdx","nextShapeIdx","insideAngle","lastHoleIdx","prevHoleIdx","nextHoleIdx","intersectsShapeEdge","inShapePt","inHolePt","nextIdx","intersection","intersectsHoleEdge","ihIdx","chkHole","indepHoles","holeIndex","shapeIndex","shapePt","holePt","holeIdx","cutKey","tmpShape1","tmpShape2","tmpHole1","tmpHole2","failedCuts","hl","minShapeIndex","counter","h2","allPointsMap","allpoints","shapeWithoutHoles","triangles","b2p0","b2p1","b2p2","b3p0","b3p1","b3p2","b3p3","tangent","point0","point1","point2","point3","ArcCurve","LineCurve3","QuadraticBezierCurve3","CubicBezierCurve3","SplineCurve3","CatmullRomCurve3","CubicPoly","pz","x1","c0","initNonuniformCatmullRom","x3","dt0","dt1","dt2","initCatmullRom","tension","calc","ClosedSplineCurve3","AnimationHandler","CATMULLROM","CATMULLROM_FORWARD","initialized","hierarchy","rot","usedMorphTargets","morphTargetName","morphTargetsInfluences","root","parseRecurseHierarchy","deltaTimeMS","resetBlendWeights","Animation","timeScale","interpolationType","keyTypes","animationCache","positionWeight","quaternionWeight","scaleWeight","prevKey","nextKey","originalMatrix","getNextKeyWith","newVector","newQuat","interpolateCatmullRom","prevXYZ","nextXYZ","proportionalWeight","getPrevKeyWith","currentPoint","forwardPoint","KeyFrameAnimation","isPaused","sids","sid","endTime","original","hasTarget","MorphAnimation","frames","lastFrame","currentFrame","frame","buildPlane","udir","vdir","gridX","gridY","width_half","height_half","gridX1","gridY1","segment_width","segment_height","uva","uvb","uvc","uvd","depth_half","CubeGeometry","centerUV","segment","ii","heightHalf","verticesRow","uvsRow","tanTheta","v4","n1","n2","n3","n4","uv4","EdgesGeometry","thresholdAngle","thresholdDot","edge","sortFunction","vert1","vert2","face1","face2","addShapeList","addShape","scalePt2","pt","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","v_trans_lensq","direction_eq","buildLidFaces","bevelEnabled","layer","flen","f3","steps","bevelSegments","buildSideFaces","layeroffset","sidewalls","ahole","slen1","slen2","f4","shapesOffset","uvgen","generateTopUV","wallContour","stepIndex","stepsLength","contourIndex1","contourIndex2","generateSideWallUV","extrudePts","splineTube","binormal","position2","amount","bevelThickness","bevelSize","extrudePath","extrudeByPath","UVGenerator","WorldUVGenerator","TubeGeometry","FrenetFrames","shapePoints","bs","vert","contourMovements","oneHoleMovements","holesMovements","verticesMovements","binormals","indexA","indexB","indexC","indexD","LatheGeometry","inversePointLength","inverseSegments","np","u0","u1","PlaneGeometry","PlaneBufferGeometry","offset2","radiusStep","thetaSegment","thetaEnd","vertexCount","textShapes","getPos","in_q","in_p","cu","su","quOverP","cs","tz","tang","bitan","ip","jp","closed","taper","NoTaper","numpoints","pos2","tangents","SinusoidalTaper","initialNormal3","smallest","MAX_VALUE","mat","PolyhedronGeometry","prepare","that","azimuth","inclination","make","centroid","azi","correctUV","subdivide","aj","bj","ParametricGeometry","slices","stacks","sliceCount","WireframeGeometry","numEdges","ol","drawcall","numTris","AxisHelper","ArrowHelper","lineGeometry","coneGeometry","dir","headLength","headWidth","cone","setDirection","setColor","BoxHelper","BoundingBoxHelper","addLine","addPoint","pointMap","hexFrustum","hexCone","hexUp","hexTarget","hexCross","setPoint","DirectionalLightHelper","lightPlane","targetLine","EdgesHelper","FaceNormalsHelper","nNormals","objGeometry","GridHelper","setColors","colorCenterLine","colorGrid","HemisphereLightHelper","sphereSize","lightSphere","PointLightHelper","SkeletonHelper","getBoneList","boneList","matrixWorldInv","boneMatrix","SpotLightHelper","vector2","coneLength","coneWidth","VertexNormalsHelper","objPos","objNorm","WireframeHelper","renderCallback","MorphBlendMesh","animationsMap","animationsList","numFrames","startFrame","endFrame","createAnimation","setAnimationWeight","active","autoCreateAnimations","frameRanges","setAnimationDirectionForward","setAnimationDirectionBackward","setAnimationFPS","setAnimationDuration","setAnimationTime","getAnimationTime","getAnimationDuration","stopAnimation"],"mappings":"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","file":"react-bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _reactDom = __webpack_require__(8);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tvar _App = __webpack_require__(9);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t_reactDom2.default.render(_react2.default.createElement(_App2.default, null), document.getElementById('react-app'));\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tif (true) {\n\t  module.exports = __webpack_require__(46);\n\t} else {\n\t  module.exports = require('./cjs/react.development.js');\n\t}\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\tif (false) {\n\t  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n\t    Symbol.for &&\n\t    Symbol.for('react.element')) ||\n\t    0xeac7;\n\t\n\t  var isValidElement = function(object) {\n\t    return typeof object === 'object' &&\n\t      object !== null &&\n\t      object.$$typeof === REACT_ELEMENT_TYPE;\n\t  };\n\t\n\t  // By explicitly using `prop-types` you are opting into new development behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  var throwOnDirectAccess = true;\n\t  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n\t} else {\n\t  // By explicitly using `prop-types` you are opting into new production behavior.\n\t  // http://fb.me/prop-types-in-prod\n\t  module.exports = __webpack_require__(43)();\n\t}\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar getVendorPropertyName = __webpack_require__(15);\n\t\n\tmodule.exports = function(target, sources) {\n\t  var to = Object(target);\n\t  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\t\n\t  for (var nextIndex = 1; nextIndex < arguments.length; nextIndex++) {\n\t    var nextSource = arguments[nextIndex];\n\t    if (nextSource == null) {\n\t      continue;\n\t    }\n\t\n\t    var from = Object(nextSource);\n\t\n\t    for (var key in from) {\n\t      if (hasOwnProperty.call(from, key)) {\n\t        to[key] = from[key];\n\t      }\n\t    }\n\t  }\n\t\n\t  var prefixed = {};\n\t  for (var key in to) {\n\t    prefixed[getVendorPropertyName(key)] = to[key]\n\t  }\n\t\n\t  return prefixed\n\t}\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar insertRule = __webpack_require__(16);\n\tvar vendorPrefix = __webpack_require__(14)();\n\tvar index = 0;\n\t\n\tmodule.exports = function(keyframes) {\n\t  // random name\n\t  var name = 'anim_' + (++index) + (+new Date);\n\t  var css = \"@\" + vendorPrefix + \"keyframes \" + name + \" {\";\n\t\n\t  for (var key in keyframes) {\n\t    css += key + \" {\";\n\t\n\t    for (var property in keyframes[key]) {\n\t      var part = \":\" + keyframes[key][property] + \";\";\n\t      // We do vendor prefix for every property\n\t      css += vendorPrefix + property + part;\n\t      css += property + part;\n\t    }\n\t\n\t    css += \"}\";\n\t  }\n\t\n\t  css += \"}\";\n\t\n\t  insertRule(css);\n\t\n\t  return name\n\t}\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n\t\"use strict\";\n\t\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * \n\t */\n\t\n\tfunction makeEmptyFunction(arg) {\n\t  return function () {\n\t    return arg;\n\t  };\n\t}\n\t\n\t/**\n\t * This function accepts and discards inputs; it has no side effects. This is\n\t * primarily useful idiomatically for overridable function endpoints which\n\t * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n\t */\n\tvar emptyFunction = function emptyFunction() {};\n\t\n\temptyFunction.thatReturns = makeEmptyFunction;\n\temptyFunction.thatReturnsFalse = makeEmptyFunction(false);\n\temptyFunction.thatReturnsTrue = makeEmptyFunction(true);\n\temptyFunction.thatReturnsNull = makeEmptyFunction(null);\n\temptyFunction.thatReturnsThis = function () {\n\t  return this;\n\t};\n\temptyFunction.thatReturnsArgument = function (arg) {\n\t  return arg;\n\t};\n\t\n\tmodule.exports = emptyFunction;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\t\n\t'use strict';\n\t\n\tvar emptyObject = {};\n\t\n\tif (false) {\n\t  Object.freeze(emptyObject);\n\t}\n\t\n\tmodule.exports = emptyObject;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n\t/*\n\tobject-assign\n\t(c) Sindre Sorhus\n\t@license MIT\n\t*/\n\t\n\t'use strict';\n\t/* eslint-disable no-unused-vars */\n\tvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction toObject(val) {\n\t\tif (val === null || val === undefined) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction shouldUseNative() {\n\t\ttry {\n\t\t\tif (!Object.assign) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// Detect buggy property enumeration order in older V8 versions.\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\t\ttest1[5] = 'de';\n\t\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test2 = {};\n\t\t\tfor (var i = 0; i < 10; i++) {\n\t\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t\t}\n\t\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\t\treturn test2[n];\n\t\t\t});\n\t\t\tif (order2.join('') !== '0123456789') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\t\tvar test3 = {};\n\t\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\t\ttest3[letter] = letter;\n\t\t\t});\n\t\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\t\treturn false;\n\t\t\t}\n\t\n\t\t\treturn true;\n\t\t} catch (err) {\n\t\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\t\tvar from;\n\t\tvar to = toObject(target);\n\t\tvar symbols;\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = Object(arguments[s]);\n\t\n\t\t\tfor (var key in from) {\n\t\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\t\tto[key] = from[key];\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (getOwnPropertySymbols) {\n\t\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tfunction checkDCE() {\n\t  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n\t  if (\n\t    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n\t    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n\t  ) {\n\t    return;\n\t  }\n\t  if (false) {\n\t    // This branch is unreachable because this function is only called\n\t    // in production, but the condition is true only in development.\n\t    // Therefore if the branch is still here, dead code elimination wasn't\n\t    // properly applied.\n\t    // Don't change the message. React DevTools relies on it. Also make sure\n\t    // this message doesn't occur elsewhere in this function, or it will cause\n\t    // a false positive.\n\t    throw new Error('^_^');\n\t  }\n\t  try {\n\t    // Verify that the code above has been dead code eliminated (DCE'd).\n\t    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n\t  } catch (err) {\n\t    // DevTools shouldn't crash React, no matter what.\n\t    // We should still report in case we break this code.\n\t    console.error(err);\n\t  }\n\t}\n\t\n\tif (true) {\n\t  // DCE check should happen before ReactDOM bundle executes so that\n\t  // DevTools can report bad minification during injection.\n\t  checkDCE();\n\t  module.exports = __webpack_require__(45);\n\t} else {\n\t  module.exports = require('./cjs/react-dom.development.js');\n\t}\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _STLViewer = __webpack_require__(11);\n\t\n\tvar _STLViewer2 = _interopRequireDefault(_STLViewer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar App = function (_Component) {\n\t  _inherits(App, _Component);\n\t\n\t  function App(props) {\n\t    _classCallCheck(this, App);\n\t\n\t    var _this = _possibleConstructorReturn(this, (App.__proto__ || Object.getPrototypeOf(App)).call(this, props));\n\t\n\t    _this.onChange = function (_ref) {\n\t      var target = _ref.target;\n\t      var files = target.files;\n\t\n\t      var reader = new FileReader();\n\t      reader.readAsArrayBuffer(files[0]);\n\t      reader.onload = function () {\n\t        _this.setState({ model: reader.result });\n\t      };\n\t    };\n\t\n\t    _this.state = {\n\t      color: '#FF0000',\n\t      model: undefined\n\t    };\n\t\n\t    _this.clickBlue = _this.clickBlue.bind(_this);\n\t    _this.clickRed = _this.clickRed.bind(_this);\n\t    return _this;\n\t  }\n\t\n\t  _createClass(App, [{\n\t    key: 'clickBlue',\n\t    value: function clickBlue(e) {\n\t      e.preventDefault();\n\t      this.setState({ color: '#0000FF' });\n\t    }\n\t  }, {\n\t    key: 'clickRed',\n\t    value: function clickRed(e) {\n\t      e.preventDefault();\n\t      this.setState({ color: '#FF0000' });\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      return _react2.default.createElement(\n\t        'div',\n\t        null,\n\t        _react2.default.createElement('input', { id: 'image-file', type: 'file', onChange: this.onChange }),\n\t        _react2.default.createElement(_STLViewer2.default, {\n\t          modelColor: this.state.color,\n\t          lights: [[0.5, 1, -1], [1, 1, 1]],\n\t          rotate: true,\n\t          model: this.state.model\n\t        }),\n\t        _react2.default.createElement(\n\t          'button',\n\t          { onClick: this.clickRed },\n\t          'red'\n\t        ),\n\t        _react2.default.createElement(\n\t          'button',\n\t          { onClick: this.clickBlue },\n\t          'blue'\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return App;\n\t}(_react.Component);\n\t\n\texports.default = App;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _Three = __webpack_require__(12);\n\t\n\tvar THREE = _interopRequireWildcard(_Three);\n\t\n\tvar _reactDom = __webpack_require__(8);\n\t\n\tvar _reactDom2 = _interopRequireDefault(_reactDom);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar OrbitControls = __webpack_require__(47)(THREE);\n\t\n\tvar DIRECTIONAL_LIGHT = 'directionalLight';\n\t\n\tvar Paint = function () {\n\t  function Paint() {\n\t    _classCallCheck(this, Paint);\n\t\n\t    this.loader = new THREE.STLLoader();\n\t    this.scene = new THREE.Scene();\n\t    this.renderer = new THREE.WebGLRenderer({\n\t      antialias: true\n\t    });\n\t    this.reqNumber = 0;\n\t  }\n\t\n\t  _createClass(Paint, [{\n\t    key: 'init',\n\t    value: function init(context) {\n\t      this.component = context;\n\t      this.width = context.props.width;\n\t      this.height = context.props.height;\n\t      this.modelColor = context.props.modelColor;\n\t      this.backgroundColor = context.props.backgroundColor;\n\t      this.orbitControls = context.props.orbitControls;\n\t      this.rotate = context.props.rotate;\n\t      this.cameraX = context.props.cameraX;\n\t      this.cameraY = context.props.cameraY;\n\t      this.cameraZ = context.props.cameraZ;\n\t      this.rotationSpeeds = context.props.rotationSpeeds;\n\t      this.lights = context.props.lights;\n\t      this.lightColor = context.props.lightColor;\n\t      this.model = context.props.model;\n\t\n\t      if (this.mesh !== undefined) {\n\t        this.scene.remove(this.mesh);\n\t        this.mesh.geometry.dispose();\n\t        this.mesh.material.dispose();\n\t        this.scene.remove(this.grid);\n\t      }\n\t      var directionalLightObj = this.scene.getObjectByName(DIRECTIONAL_LIGHT);\n\t      if (directionalLightObj) {\n\t        this.scene.remove(directionalLightObj);\n\t      }\n\t\n\t      if (this.animationRequestId) {\n\t        cancelAnimationFrame(this.animationRequestId);\n\t      }\n\t\n\t      //Detector.addGetWebGLMessage();\n\t      this.distance = 10000;\n\t\n\t      this.reqNumber += 1;\n\t      this.addSTLToScene(this.reqNumber);\n\t    }\n\t  }, {\n\t    key: 'loadSTLFromUrl',\n\t    value: function loadSTLFromUrl(url, reqId) {\n\t      var _this = this;\n\t\n\t      return new Promise(function (resolve) {\n\t        _this.loader.crossOrigin = '';\n\t        _this.loader.loadFromUrl(url, function (geometry) {\n\t          if (_this.reqNumber !== reqId) {\n\t            return;\n\t          }\n\t          resolve(geometry);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'loadFromFile',\n\t    value: function loadFromFile(file) {\n\t      var _this2 = this;\n\t\n\t      return new Promise(function (resolve) {\n\t        _this2.loader.loadFromFile(file, function (geometry) {\n\t          resolve(geometry);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'addSTLToScene',\n\t    value: function addSTLToScene(reqId) {\n\t      var _this3 = this;\n\t\n\t      var loadPromise = void 0;\n\t      if (typeof this.model === 'string') {\n\t        loadPromise = this.loadSTLFromUrl(this.model, reqId);\n\t      } else if (this.model instanceof ArrayBuffer) {\n\t        loadPromise = this.loadFromFile(this.model);\n\t      } else {\n\t        return Promise.resolve(null);\n\t      }\n\t      return loadPromise.then(function (geometry) {\n\t        // Calculate mesh noramls for MeshLambertMaterial.\n\t        geometry.computeFaceNormals();\n\t        geometry.computeVertexNormals();\n\t\n\t        // Center the object\n\t        geometry.center();\n\t\n\t        var material = new THREE.MeshLambertMaterial({\n\t          overdraw: true,\n\t          color: _this3.modelColor\n\t        });\n\t\n\t        if (geometry.hasColors) {\n\t          material = new THREE.MeshPhongMaterial({\n\t            opacity: geometry.alpha,\n\t            vertexColors: THREE.VertexColors\n\t          });\n\t        }\n\t\n\t        _this3.mesh = new THREE.Mesh(geometry, material);\n\t        // Set the object's dimensions\n\t        geometry.computeBoundingBox();\n\t        _this3.xDims = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n\t        _this3.yDims = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n\t        _this3.zDims = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\t\n\t        if (_this3.rotate) {\n\t          _this3.mesh.rotation.x = _this3.rotationSpeeds[0];\n\t          _this3.mesh.rotation.y = _this3.rotationSpeeds[1];\n\t          _this3.mesh.rotation.z = _this3.rotationSpeeds[2];\n\t        }\n\t\n\t        _this3.scene.add(_this3.mesh);\n\t\n\t        _this3.addCamera();\n\t        _this3.addInteractionControls();\n\t        _this3.addToReactComponent();\n\t\n\t        // Start the animation\n\t        _this3.animate();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'addCamera',\n\t    value: function addCamera() {\n\t      // Add the camera\n\t      this.camera = new THREE.PerspectiveCamera(30, this.width / this.height, 1, this.distance);\n\t      this.camera.add(new THREE.PointLight(0xffffff, 0.8));\n\t\n\t      if (this.cameraZ === null) {\n\t        this.cameraZ = Math.max(this.xDims * 3, this.yDims * 3, this.zDims * 3);\n\t      }\n\t\n\t      this.camera.position.set(this.cameraX, this.cameraY, this.cameraZ);\n\t\n\t      this.scene.add(this.camera);\n\t\n\t      this.camera.lookAt(this.mesh);\n\t\n\t      this.renderer.set;\n\t      this.renderer.setSize(this.width, this.height);\n\t      this.renderer.setClearColor(this.backgroundColor, 1);\n\t    }\n\t  }, {\n\t    key: 'addInteractionControls',\n\t    value: function addInteractionControls() {\n\t      // Add controls for mouse interaction\n\t      if (this.orbitControls) {\n\t        this.controls = new OrbitControls(this.camera, _reactDom2.default.findDOMNode(this.component));\n\t        this.controls.enableDamping = false;\n\t        this.controls.enableRotate;\n\t        this.controls.enableKeys = false;\n\t        this.controls.addEventListener('change', this.orbitRender.bind(this));\n\t      }\n\t    }\n\t  }, {\n\t    key: 'addToReactComponent',\n\t    value: function addToReactComponent() {\n\t      // Add to the React Component\n\t      _reactDom2.default.findDOMNode(this.component).replaceChild(this.renderer.domElement, _reactDom2.default.findDOMNode(this.component).firstChild);\n\t    }\n\t\n\t    /**\n\t     * Animate the scene\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'animate',\n\t    value: function animate() {\n\t      // note: three.js includes requestAnimationFrame shim\n\t      if (this.rotate) {\n\t        this.animationRequestId = requestAnimationFrame(this.animate.bind(this));\n\t      }\n\t\n\t      if (this.orbitControls) {\n\t        this.controls.update();\n\t      }\n\t      this.render();\n\t    }\n\t\n\t    /**\n\t     * Render the scene after turning off the rotation\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'orbitRender',\n\t    value: function orbitRender() {\n\t      if (this.rotate) {\n\t        this.rotate = false;\n\t      }\n\t\n\t      this.render();\n\t    }\n\t\n\t    /**\n\t     * Deallocate Mesh, renderer context.\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'clean',\n\t    value: function clean() {\n\t      if (this.mesh !== undefined) {\n\t        this.mesh.geometry.dispose();\n\t        this.mesh.material.dispose();\n\t        this.scene.remove(this.mesh);\n\t        delete this.mesh;\n\t      }\n\t      var directionalLightObj = this.scene.getObjectByName(DIRECTIONAL_LIGHT);\n\t      if (directionalLightObj) {\n\t        this.scene.remove(directionalLightObj);\n\t      }\n\t\n\t      if (this.animationRequestId) {\n\t        cancelAnimationFrame(this.animationRequestId);\n\t      }\n\t      this.renderer.dispose();\n\t      this.renderer.forceContextLoss();\n\t    }\n\t\n\t    /**\n\t     * Render the scene\n\t     * @returns {void}\n\t     */\n\t\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      if (this.mesh && this.rotate) {\n\t        this.mesh.rotation.x += this.rotationSpeeds[0];\n\t        this.mesh.rotation.y += this.rotationSpeeds[1];\n\t        this.mesh.rotation.z += this.rotationSpeeds[2];\n\t      }\n\t\n\t      this.renderer.render(this.scene, this.camera);\n\t    }\n\t  }]);\n\t\n\t  return Paint;\n\t}();\n\t\n\texports.default = Paint;\n\tmodule.exports = exports['default'];\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _halogenium = __webpack_require__(32);\n\t\n\tvar _Paint = __webpack_require__(10);\n\t\n\tvar _Paint2 = _interopRequireDefault(_Paint);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar STLViewer = function (_Component) {\n\t  _inherits(STLViewer, _Component);\n\t\n\t  function STLViewer() {\n\t    _classCallCheck(this, STLViewer);\n\t\n\t    return _possibleConstructorReturn(this, (STLViewer.__proto__ || Object.getPrototypeOf(STLViewer)).apply(this, arguments));\n\t  }\n\t\n\t  _createClass(STLViewer, [{\n\t    key: 'componentDidMount',\n\t    value: function componentDidMount() {\n\t      this.paint = new _Paint2.default();\n\t      this.paint.init(this);\n\t    }\n\t  }, {\n\t    key: 'shouldComponentUpdate',\n\t    value: function shouldComponentUpdate(nextProps, nextState) {\n\t      return JSON.stringify(nextProps) !== JSON.stringify(this.props);\n\t    }\n\t  }, {\n\t    key: 'componentWillUpdate',\n\t    value: function componentWillUpdate(nextProps, nextState) {\n\t      this.props = nextProps;\n\t      this.paint.init(this);\n\t    }\n\t  }, {\n\t    key: 'componentWillUnmount',\n\t    value: function componentWillUnmount() {\n\t      this.paint.clean();\n\t      delete this.paint;\n\t    }\n\t  }, {\n\t    key: 'render',\n\t    value: function render() {\n\t      var _props = this.props,\n\t          width = _props.width,\n\t          height = _props.height,\n\t          modelColor = _props.modelColor;\n\t\n\t      return _react2.default.createElement(\n\t        'div',\n\t        {\n\t          className: this.props.className,\n\t          style: {\n\t            width: width,\n\t            height: height,\n\t            overflow: 'hidden'\n\t          }\n\t        },\n\t        _react2.default.createElement(\n\t          'div',\n\t          {\n\t            style: {\n\t              height: '100%',\n\t              display: 'flex',\n\t              justifyContent: 'center',\n\t              alignItems: 'center'\n\t            }\n\t          },\n\t          _react2.default.createElement(_halogenium.ScaleLoader, { color: modelColor, size: '16px' })\n\t        )\n\t      );\n\t    }\n\t  }]);\n\t\n\t  return STLViewer;\n\t}(_react.Component);\n\t\n\tSTLViewer.propTypes = {\n\t  className: _propTypes2.default.string,\n\t  url: _propTypes2.default.string,\n\t  width: _propTypes2.default.number,\n\t  height: _propTypes2.default.number,\n\t  backgroundColor: _propTypes2.default.string,\n\t  modelColor: _propTypes2.default.string,\n\t  rotate: _propTypes2.default.bool,\n\t  orbitControls: _propTypes2.default.bool,\n\t  cameraX: _propTypes2.default.number,\n\t  cameraY: _propTypes2.default.number,\n\t  cameraZ: _propTypes2.default.number,\n\t  lights: _propTypes2.default.array,\n\t  lightColor: _propTypes2.default.string,\n\t  rotationSpeeds: _propTypes2.default.arrayOf(_propTypes2.default.number),\n\t  model: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.instanceOf(ArrayBuffer)]).isRequired\n\t};\n\tSTLViewer.defaultProps = {\n\t  backgroundColor: '#EAEAEA',\n\t  modelColor: '#B92C2C',\n\t  height: 400,\n\t  width: 400,\n\t  rotate: true,\n\t  orbitControls: true,\n\t  cameraX: 0,\n\t  cameraY: 0,\n\t  cameraZ: null,\n\t  lights: [0, 0, 1],\n\t  lightColor: '#ffffff',\n\t  rotationSpeeds: [0, 0, 0.02],\n\t  model: undefined\n\t};\n\t\n\t\n\tmodule.exports = STLViewer;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar THREE = __webpack_require__(48);\n\t\n\t//\n\t// STL Loader added\n\t//\n\t/**\n\t * @author aleeper / http://adamleeper.com/\n\t * @author mrdoob / http://mrdoob.com/\n\t * @author gero3 / https://github.com/gero3\n\t *\n\t * Description: A THREE loader for STL ASCII files, as created by Solidworks and other CAD programs.\n\t *\n\t * Supports both binary and ASCII encoded files, with automatic detection of type.\n\t *\n\t * Limitations:\n\t *  Binary decoding supports \"Magics\" color format (http://en.wikipedia.org/wiki/STL_(file_format)#Color_in_binary_STL).\n\t *  There is perhaps some question as to how valid it is to always assume little-endian-ness.\n\t *  ASCII decoding assumes file is UTF-8. Seems to work for the examples...\n\t *\n\t * Usage:\n\t *  var loader = new THREE.STLLoader();\n\t *  loader.load( './models/stl/slotted_disk.stl', function ( geometry ) {\n\t *    scene.add( new THREE.Mesh( geometry ) );\n\t *  });\n\t *\n\t * For binary STLs geometry might contain colors for vertices. To use it:\n\t *  // use the same code to load STL as above\n\t *  if (geometry.hasColors) {\n\t *    material = new THREE.MeshPhongMaterial({ opacity: geometry.alpha, vertexColors: THREE.VertexColors });\n\t *  } else { .... }\n\t *  var mesh = new THREE.Mesh( geometry, material );\n\t */\n\t\n\tTHREE.STLLoader = function (manager) {\n\t  this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n\t};\n\t\n\tTHREE.STLLoader.prototype = {\n\t  constructor: THREE.STLLoader,\n\t\n\t  loadFromUrl: function loadFromUrl(url, onLoad, onProgress, onError) {\n\t    var scope = this;\n\t\n\t    var loader = new THREE.XHRLoader(scope.manager);\n\t    loader.setCrossOrigin(this.crossOrigin);\n\t    loader.setResponseType('arraybuffer');\n\t    loader.load(url, function (text) {\n\t      onLoad(scope.parse(text));\n\t    }, onProgress, onError);\n\t  },\n\t\n\t  loadFromFile: function loadFromFile(buffer, onLoad) {\n\t    var scope = this;\n\t    onLoad(scope.parse(buffer));\n\t  },\n\t\n\t  parse: function parse(data) {\n\t    var isBinary = function isBinary() {\n\t      var expect, face_size, n_faces, reader;\n\t      reader = new DataView(binData);\n\t      face_size = 32 / 8 * 3 + 32 / 8 * 3 * 3 + 16 / 8;\n\t      n_faces = reader.getUint32(80, true);\n\t      expect = 80 + 32 / 8 + n_faces * face_size;\n\t\n\t      if (expect === reader.byteLength) {\n\t        return true;\n\t      }\n\t\n\t      // some binary files will have different size from expected,\n\t      // checking characters higher than ASCII to confirm is binary\n\t      var fileLength = reader.byteLength;\n\t      for (var index = 0; index < fileLength; index++) {\n\t        if (reader.getUint8(index, false) > 127) {\n\t          return true;\n\t        }\n\t      }\n\t\n\t      return false;\n\t    };\n\t\n\t    var binData = this.ensureBinary(data);\n\t\n\t    return isBinary() ? this.parseBinary(binData) : this.parseASCII(this.ensureString(data));\n\t  },\n\t\n\t  parseBinary: function parseBinary(data) {\n\t    var reader = new DataView(data);\n\t    var faces = reader.getUint32(80, true);\n\t\n\t    var r,\n\t        g,\n\t        b,\n\t        hasColors = false,\n\t        colors;\n\t    var defaultR, defaultG, defaultB, alpha;\n\t\n\t    // process STL header\n\t    // check for default color in header (\"COLOR=rgba\" sequence).\n\t\n\t    for (var index = 0; index < 80 - 10; index++) {\n\t      if (reader.getUint32(index, false) == 0x434f4c4f /*COLO*/ && reader.getUint8(index + 4) == 0x52 /*'R'*/ && reader.getUint8(index + 5) == 0x3d /*'='*/\n\t      ) {\n\t          hasColors = true;\n\t          colors = new Float32Array(faces * 3 * 3);\n\t\n\t          defaultR = reader.getUint8(index + 6) / 255;\n\t          defaultG = reader.getUint8(index + 7) / 255;\n\t          defaultB = reader.getUint8(index + 8) / 255;\n\t          alpha = reader.getUint8(index + 9) / 255;\n\t        }\n\t    }\n\t\n\t    var dataOffset = 84;\n\t    var faceLength = 12 * 4 + 2;\n\t\n\t    var offset = 0;\n\t\n\t    var geometry = new THREE.BufferGeometry();\n\t\n\t    var vertices = new Float32Array(faces * 3 * 3);\n\t    var normals = new Float32Array(faces * 3 * 3);\n\t\n\t    for (var face = 0; face < faces; face++) {\n\t      var start = dataOffset + face * faceLength;\n\t      var normalX = reader.getFloat32(start, true);\n\t      var normalY = reader.getFloat32(start + 4, true);\n\t      var normalZ = reader.getFloat32(start + 8, true);\n\t\n\t      if (hasColors) {\n\t        var packedColor = reader.getUint16(start + 48, true);\n\t\n\t        if ((packedColor & 0x8000) === 0) {\n\t          // facet has its own unique color\n\t\n\t          r = (packedColor & 0x1f) / 31;\n\t          g = (packedColor >> 5 & 0x1f) / 31;\n\t          b = (packedColor >> 10 & 0x1f) / 31;\n\t        } else {\n\t          r = defaultR;\n\t          g = defaultG;\n\t          b = defaultB;\n\t        }\n\t      }\n\t\n\t      for (var i = 1; i <= 3; i++) {\n\t        var vertexstart = start + i * 12;\n\t\n\t        vertices[offset] = reader.getFloat32(vertexstart, true);\n\t        vertices[offset + 1] = reader.getFloat32(vertexstart + 4, true);\n\t        vertices[offset + 2] = reader.getFloat32(vertexstart + 8, true);\n\t\n\t        normals[offset] = normalX;\n\t        normals[offset + 1] = normalY;\n\t        normals[offset + 2] = normalZ;\n\t\n\t        if (hasColors) {\n\t          colors[offset] = r;\n\t          colors[offset + 1] = g;\n\t          colors[offset + 2] = b;\n\t        }\n\t\n\t        offset += 3;\n\t      }\n\t    }\n\t\n\t    geometry.addAttribute('position', new THREE.BufferAttribute(vertices, 3));\n\t    geometry.addAttribute('normal', new THREE.BufferAttribute(normals, 3));\n\t\n\t    if (hasColors) {\n\t      geometry.addAttribute('color', new THREE.BufferAttribute(colors, 3));\n\t      geometry.hasColors = true;\n\t      geometry.alpha = alpha;\n\t    }\n\t\n\t    return geometry;\n\t  },\n\t\n\t  parseASCII: function parseASCII(data) {\n\t    var geometry, length, normal, patternFace, patternNormal, patternVertex, result, text;\n\t    geometry = new THREE.Geometry();\n\t    patternFace = /facet([\\s\\S]*?)endfacet/g;\n\t\n\t    while ((result = patternFace.exec(data)) !== null) {\n\t      text = result[0];\n\t      patternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\t\n\t      while ((result = patternNormal.exec(text)) !== null) {\n\t        normal = new THREE.Vector3(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5]));\n\t      }\n\t\n\t      patternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\t\n\t      while ((result = patternVertex.exec(text)) !== null) {\n\t        geometry.vertices.push(new THREE.Vector3(parseFloat(result[1]), parseFloat(result[3]), parseFloat(result[5])));\n\t      }\n\t\n\t      length = geometry.vertices.length;\n\t\n\t      geometry.faces.push(new THREE.Face3(length - 3, length - 2, length - 1, normal));\n\t    }\n\t\n\t    geometry.computeBoundingBox();\n\t    geometry.computeBoundingSphere();\n\t\n\t    return geometry;\n\t  },\n\t\n\t  ensureString: function ensureString(buf) {\n\t    if (typeof buf !== 'string') {\n\t      var array_buffer = new Uint8Array(buf);\n\t      var str = '';\n\t      for (var i = 0; i < buf.byteLength; i++) {\n\t        str += String.fromCharCode(array_buffer[i]); // implicitly assumes little-endian\n\t      }\n\t      return str;\n\t    } else {\n\t      return buf;\n\t    }\n\t  },\n\t\n\t  ensureBinary: function ensureBinary(buf) {\n\t    if (typeof buf === 'string') {\n\t      var array_buffer = new Uint8Array(buf.length);\n\t      for (var i = 0; i < buf.length; i++) {\n\t        array_buffer[i] = buf.charCodeAt(i) & 0xff; // implicitly assumes little-endian\n\t      }\n\t      return array_buffer.buffer || array_buffer;\n\t    } else {\n\t      return buf;\n\t    }\n\t  }\n\t};\n\t\n\tif (typeof DataView === 'undefined') {\n\t  DataView = function DataView(buffer, byteOffset, byteLength) {\n\t    this.buffer = buffer;\n\t    this.byteOffset = byteOffset || 0;\n\t    this.byteLength = byteLength || buffer.byteLength || buffer.length;\n\t    this._isString = typeof buffer === 'string';\n\t  };\n\t\n\t  DataView.prototype = {\n\t    _getCharCodes: function _getCharCodes(buffer, start, length) {\n\t      start = start || 0;\n\t      length = length || buffer.length;\n\t      var end = start + length;\n\t      var codes = [];\n\t      for (var i = start; i < end; i++) {\n\t        codes.push(buffer.charCodeAt(i) & 0xff);\n\t      }\n\t      return codes;\n\t    },\n\t\n\t    _getBytes: function _getBytes(length, byteOffset, littleEndian) {\n\t      var result;\n\t\n\t      // Handle the lack of endianness\n\t      if (littleEndian === undefined) {\n\t        littleEndian = this._littleEndian;\n\t      }\n\t\n\t      // Handle the lack of byteOffset\n\t      if (byteOffset === undefined) {\n\t        byteOffset = this.byteOffset;\n\t      } else {\n\t        byteOffset = this.byteOffset + byteOffset;\n\t      }\n\t\n\t      if (length === undefined) {\n\t        length = this.byteLength - byteOffset;\n\t      }\n\t\n\t      // Error Checking\n\t      if (typeof byteOffset !== 'number') {\n\t        throw new TypeError('DataView byteOffset is not a number');\n\t      }\n\t\n\t      if (length < 0 || byteOffset + length > this.byteLength) {\n\t        throw new Error('DataView length or (byteOffset+length) value is out of bounds');\n\t      }\n\t\n\t      if (this.isString) {\n\t        result = this._getCharCodes(this.buffer, byteOffset, byteOffset + length);\n\t      } else {\n\t        result = this.buffer.slice(byteOffset, byteOffset + length);\n\t      }\n\t\n\t      if (!littleEndian && length > 1) {\n\t        if (!(result instanceof Array)) {\n\t          result = Array.prototype.slice.call(result);\n\t        }\n\t\n\t        result.reverse();\n\t      }\n\t\n\t      return result;\n\t    },\n\t\n\t    // Compatibility functions on a String Buffer\n\t\n\t    getFloat64: function getFloat64(byteOffset, littleEndian) {\n\t      var b = this._getBytes(8, byteOffset, littleEndian),\n\t          sign = 1 - 2 * (b[7] >> 7),\n\t          exponent = ((b[7] << 1 & 0xff) << 3 | b[6] >> 4) - ((1 << 10) - 1),\n\t\n\t      // Binary operators such as | and << operate on 32 bit values, using + and Math.pow(2) instead\n\t      mantissa = (b[6] & 0x0f) * Math.pow(2, 48) + b[5] * Math.pow(2, 40) + b[4] * Math.pow(2, 32) + b[3] * Math.pow(2, 24) + b[2] * Math.pow(2, 16) + b[1] * Math.pow(2, 8) + b[0];\n\t\n\t      if (exponent === 1024) {\n\t        if (mantissa !== 0) {\n\t          return NaN;\n\t        } else {\n\t          return sign * Infinity;\n\t        }\n\t      }\n\t\n\t      if (exponent === -1023) {\n\t        // Denormalized\n\t        return sign * mantissa * Math.pow(2, -1022 - 52);\n\t      }\n\t\n\t      return sign * (1 + mantissa * Math.pow(2, -52)) * Math.pow(2, exponent);\n\t    },\n\t\n\t    getFloat32: function getFloat32(byteOffset, littleEndian) {\n\t      var b = this._getBytes(4, byteOffset, littleEndian),\n\t          sign = 1 - 2 * (b[3] >> 7),\n\t          exponent = (b[3] << 1 & 0xff | b[2] >> 7) - 127,\n\t          mantissa = (b[2] & 0x7f) << 16 | b[1] << 8 | b[0];\n\t\n\t      if (exponent === 128) {\n\t        if (mantissa !== 0) {\n\t          return NaN;\n\t        } else {\n\t          return sign * Infinity;\n\t        }\n\t      }\n\t\n\t      if (exponent === -127) {\n\t        // Denormalized\n\t        return sign * mantissa * Math.pow(2, -126 - 23);\n\t      }\n\t\n\t      return sign * (1 + mantissa * Math.pow(2, -23)) * Math.pow(2, exponent);\n\t    },\n\t\n\t    getInt32: function getInt32(byteOffset, littleEndian) {\n\t      var b = this._getBytes(4, byteOffset, littleEndian);\n\t      return b[3] << 24 | b[2] << 16 | b[1] << 8 | b[0];\n\t    },\n\t\n\t    getUint32: function getUint32(byteOffset, littleEndian) {\n\t      return this.getInt32(byteOffset, littleEndian) >>> 0;\n\t    },\n\t\n\t    getInt16: function getInt16(byteOffset, littleEndian) {\n\t      return this.getUint16(byteOffset, littleEndian) << 16 >> 16;\n\t    },\n\t\n\t    getUint16: function getUint16(byteOffset, littleEndian) {\n\t      var b = this._getBytes(2, byteOffset, littleEndian);\n\t      return b[1] << 8 | b[0];\n\t    },\n\t\n\t    getInt8: function getInt8(byteOffset) {\n\t      return this.getUint8(byteOffset) << 24 >> 24;\n\t    },\n\t\n\t    getUint8: function getUint8(byteOffset) {\n\t      return this._getBytes(1, byteOffset)[0];\n\t    }\n\t  };\n\t}\n\t\n\tmodule.exports = THREE;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = document.createElement('div').style;\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar cssVendorPrefix;\n\t\n\tmodule.exports = function() {\n\t\n\t  if (cssVendorPrefix) return cssVendorPrefix;\n\t\n\t  var styles = window.getComputedStyle(document.documentElement, '');\n\t  var pre = (Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o']))[1];\n\t\n\t  return cssVendorPrefix = '-' + pre + '-';\n\t}\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar builtinStyle = __webpack_require__(13);\n\tvar prefixes = ['Moz', 'Webkit', 'O', 'ms'];\n\tvar domVendorPrefix;\n\t\n\t// Helper function to get the proper vendor property name. (transition => WebkitTransition)\n\tmodule.exports = function(prop, isSupportTest) {\n\t\n\t  var vendorProp;\n\t  if (prop in builtinStyle) return prop;\n\t\n\t  var UpperProp = prop.charAt(0).toUpperCase() + prop.substr(1);\n\t\n\t  if (domVendorPrefix) {\n\t\n\t    vendorProp = domVendorPrefix + UpperProp;\n\t    if (vendorProp in builtinStyle) {\n\t      return vendorProp;\n\t    }\n\t  } else {\n\t\n\t    for (var i = 0; i < prefixes.length; ++i) {\n\t      vendorProp = prefixes[i] + UpperProp;\n\t      if (vendorProp in builtinStyle) {\n\t        domVendorPrefix = prefixes[i];\n\t        return vendorProp;\n\t      }\n\t    }\n\t  }\n\t\n\t  // if support test, not fallback to origin prop name\n\t  if (!isSupportTest) {\n\t    return prop;\n\t  }\n\t\n\t}\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\tvar extraSheet;\n\t\n\tmodule.exports = function(css) {\n\t\n\t  if (!extraSheet) {\n\t    // First time, create an extra stylesheet for adding rules\n\t    extraSheet = document.createElement('style');\n\t    document.getElementsByTagName('head')[0].appendChild(extraSheet);\n\t    // Keep reference to actual StyleSheet object (`styleSheet` for IE < 9)\n\t    extraSheet = extraSheet.sheet || extraSheet.styleSheet;\n\t  }\n\t\n\t  var index = (extraSheet.cssRules || extraSheet.rules).length;\n\t  extraSheet.insertRule(css, index);\n\t\n\t  return extraSheet;\n\t}\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * @typechecks\n\t */\n\t\n\tvar emptyFunction = __webpack_require__(5);\n\t\n\t/**\n\t * Upstream version of event listener. Does not take into account specific\n\t * nature of platform.\n\t */\n\tvar EventListener = {\n\t  /**\n\t   * Listen to DOM events during the bubble phase.\n\t   *\n\t   * @param {DOMEventTarget} target DOM element to register listener on.\n\t   * @param {string} eventType Event type, e.g. 'click' or 'mouseover'.\n\t   * @param {function} callback Callback function.\n\t   * @return {object} Object with a `remove` method.\n\t   */\n\t  listen: function listen(target, eventType, callback) {\n\t    if (target.addEventListener) {\n\t      target.addEventListener(eventType, callback, false);\n\t      return {\n\t        remove: function remove() {\n\t          target.removeEventListener(eventType, callback, false);\n\t        }\n\t      };\n\t    } else if (target.attachEvent) {\n\t      target.attachEvent('on' + eventType, callback);\n\t      return {\n\t        remove: function remove() {\n\t          target.detachEvent('on' + eventType, callback);\n\t        }\n\t      };\n\t    }\n\t  },\n\t\n\t  /**\n\t   * Listen to DOM events during the capture phase.\n\t   *\n\t   * @param {DOMEventTarget} target DOM element to register listener on.\n\t   * @param {string} eventType Event type, e.g. 'click' or 'mouseover'.\n\t   * @param {function} callback Callback function.\n\t   * @return {object} Object with a `remove` method.\n\t   */\n\t  capture: function capture(target, eventType, callback) {\n\t    if (target.addEventListener) {\n\t      target.addEventListener(eventType, callback, true);\n\t      return {\n\t        remove: function remove() {\n\t          target.removeEventListener(eventType, callback, true);\n\t        }\n\t      };\n\t    } else {\n\t      if (false) {\n\t        console.error('Attempted to listen to events during the capture phase on a ' + 'browser that does not support the capture phase. Your application ' + 'will not receive some events.');\n\t      }\n\t      return {\n\t        remove: emptyFunction\n\t      };\n\t    }\n\t  },\n\t\n\t  registerDefault: function registerDefault() {}\n\t};\n\t\n\tmodule.exports = EventListener;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\t\n\t'use strict';\n\t\n\tvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\t\n\t/**\n\t * Simple, lightweight module assisting with the detection and context of\n\t * Worker. Helps avoid circular dependencies and allows code to reason about\n\t * whether or not they are in a Worker, even if they never include the main\n\t * `ReactWorker` dependency.\n\t */\n\tvar ExecutionEnvironment = {\n\t\n\t  canUseDOM: canUseDOM,\n\t\n\t  canUseWorkers: typeof Worker !== 'undefined',\n\t\n\t  canUseEventListeners: canUseDOM && !!(window.addEventListener || window.attachEvent),\n\t\n\t  canUseViewport: canUseDOM && !!window.screen,\n\t\n\t  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\t\n\t};\n\t\n\tmodule.exports = ExecutionEnvironment;\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * \n\t */\n\t\n\tvar isTextNode = __webpack_require__(24);\n\t\n\t/*eslint-disable no-bitwise */\n\t\n\t/**\n\t * Checks if a given DOM node contains or is another DOM node.\n\t */\n\tfunction containsNode(outerNode, innerNode) {\n\t  if (!outerNode || !innerNode) {\n\t    return false;\n\t  } else if (outerNode === innerNode) {\n\t    return true;\n\t  } else if (isTextNode(outerNode)) {\n\t    return false;\n\t  } else if (isTextNode(innerNode)) {\n\t    return containsNode(outerNode, innerNode.parentNode);\n\t  } else if ('contains' in outerNode) {\n\t    return outerNode.contains(innerNode);\n\t  } else if (outerNode.compareDocumentPosition) {\n\t    return !!(outerNode.compareDocumentPosition(innerNode) & 16);\n\t  } else {\n\t    return false;\n\t  }\n\t}\n\t\n\tmodule.exports = containsNode;\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\t\n\t'use strict';\n\t\n\t/**\n\t * @param {DOMElement} node input/textarea to focus\n\t */\n\t\n\tfunction focusNode(node) {\n\t  // IE8 can throw \"Can't move focus to the control because it is invisible,\n\t  // not enabled, or of a type that does not accept the focus.\" for all kinds of\n\t  // reasons that are too expensive and fragile to test.\n\t  try {\n\t    node.focus();\n\t  } catch (e) {}\n\t}\n\t\n\tmodule.exports = focusNode;\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * @typechecks\n\t */\n\t\n\t/* eslint-disable fb-www/typeof-undefined */\n\t\n\t/**\n\t * Same as document.activeElement but wraps in a try-catch block. In IE it is\n\t * not safe to call document.activeElement if there is nothing focused.\n\t *\n\t * The activeElement will be null only if the document or document body is not\n\t * yet defined.\n\t *\n\t * @param {?DOMDocument} doc Defaults to current document.\n\t * @return {?DOMElement}\n\t */\n\tfunction getActiveElement(doc) /*?DOMElement*/{\n\t  doc = doc || (typeof document !== 'undefined' ? document : undefined);\n\t  if (typeof doc === 'undefined') {\n\t    return null;\n\t  }\n\t  try {\n\t    return doc.activeElement || doc.body;\n\t  } catch (e) {\n\t    return doc.body;\n\t  }\n\t}\n\t\n\tmodule.exports = getActiveElement;\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t */\n\t\n\t'use strict';\n\t\n\t/**\n\t * Use invariant() to assert state which your program assumes to be true.\n\t *\n\t * Provide sprintf-style format (only %s is supported) and arguments\n\t * to provide information about what broke and what you were\n\t * expecting.\n\t *\n\t * The invariant message will be stripped in production, but the invariant\n\t * will remain to ensure logic does not differ in production.\n\t */\n\t\n\tvar validateFormat = function validateFormat(format) {};\n\t\n\tif (false) {\n\t  validateFormat = function validateFormat(format) {\n\t    if (format === undefined) {\n\t      throw new Error('invariant requires an error message argument');\n\t    }\n\t  };\n\t}\n\t\n\tfunction invariant(condition, format, a, b, c, d, e, f) {\n\t  validateFormat(format);\n\t\n\t  if (!condition) {\n\t    var error;\n\t    if (format === undefined) {\n\t      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n\t    } else {\n\t      var args = [a, b, c, d, e, f];\n\t      var argIndex = 0;\n\t      error = new Error(format.replace(/%s/g, function () {\n\t        return args[argIndex++];\n\t      }));\n\t      error.name = 'Invariant Violation';\n\t    }\n\t\n\t    error.framesToPop = 1; // we don't care about invariant's own frame\n\t    throw error;\n\t  }\n\t}\n\t\n\tmodule.exports = invariant;\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * @typechecks\n\t */\n\t\n\t/**\n\t * @param {*} object The object to check.\n\t * @return {boolean} Whether or not the object is a DOM node.\n\t */\n\tfunction isNode(object) {\n\t  var doc = object ? object.ownerDocument || object : document;\n\t  var defaultView = doc.defaultView || window;\n\t  return !!(object && (typeof defaultView.Node === 'function' ? object instanceof defaultView.Node : typeof object === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string'));\n\t}\n\t\n\tmodule.exports = isNode;\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * @typechecks\n\t */\n\t\n\tvar isNode = __webpack_require__(23);\n\t\n\t/**\n\t * @param {*} object The object to check.\n\t * @return {boolean} Whether or not the object is a DOM text node.\n\t */\n\tfunction isTextNode(object) {\n\t  return isNode(object) && object.nodeType == 3;\n\t}\n\t\n\tmodule.exports = isTextNode;\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t *\n\t * @typechecks\n\t * \n\t */\n\t\n\t/*eslint-disable no-self-compare */\n\t\n\t'use strict';\n\t\n\tvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\t\n\t/**\n\t * inlined Object.is polyfill to avoid requiring consumers ship their own\n\t * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n\t */\n\tfunction is(x, y) {\n\t  // SameValue algorithm\n\t  if (x === y) {\n\t    // Steps 1-5, 7-10\n\t    // Steps 6.b-6.e: +0 != -0\n\t    // Added the nonzero y check to make Flow happy, but it is redundant\n\t    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n\t  } else {\n\t    // Step 6.a: NaN == NaN\n\t    return x !== x && y !== y;\n\t  }\n\t}\n\t\n\t/**\n\t * Performs equality by iterating through keys on an object and returning false\n\t * when any key has values which are not strictly equal between the arguments.\n\t * Returns true when the values of all keys are strictly equal.\n\t */\n\tfunction shallowEqual(objA, objB) {\n\t  if (is(objA, objB)) {\n\t    return true;\n\t  }\n\t\n\t  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n\t    return false;\n\t  }\n\t\n\t  var keysA = Object.keys(objA);\n\t  var keysB = Object.keys(objB);\n\t\n\t  if (keysA.length !== keysB.length) {\n\t    return false;\n\t  }\n\t\n\t  // Test for A's keys different from B.\n\t  for (var i = 0; i < keysA.length; i++) {\n\t    if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n\t      return false;\n\t    }\n\t  }\n\t\n\t  return true;\n\t}\n\t\n\tmodule.exports = shallowEqual;\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '50%': {\n\t    transform: 'scale(0.75)',\n\t    opacity: 0.2\n\t  },\n\t  '100%': {\n\t    transform: 'scale(1)',\n\t    opacity: 1\n\t  }\n\t};\n\t\n\tvar animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar BeatLoader = function (_Component) {\n\t  _inherits(BeatLoader, _Component);\n\t\n\t  function BeatLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, BeatLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = BeatLoader.__proto__ || Object.getPrototypeOf(BeatLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        margin: _this.props.margin,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var animation = [animationName, '0.7s', (i % 2 ? 0 : 0.35) + 's', 'infinite', 'linear'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n\t        display: 'inline-block',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  _createClass(BeatLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var loading = this.props.loading;\n\t\n\t\n\t      if (loading) {\n\t        var props = _extends({}, this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement('div', { style: this.getStyle(1) }),\n\t          _react2.default.createElement('div', { style: this.getStyle(2) }),\n\t          _react2.default.createElement('div', { style: this.getStyle(3) })\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return BeatLoader;\n\t}(_react.Component);\n\t\n\tBeatLoader.propTypes = propTypes;\n\tBeatLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '15px',\n\t  margin: '2px' };\n\texports.default = BeatLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=BeatLoader.js.map\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar keyframes = {\n\t  '0%, 100%': {\n\t    transform: 'scale(0)'\n\t  },\n\t  '50%': {\n\t    transform: 'scale(1.0)'\n\t  }\n\t};\n\t\n\tvar animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar BounceLoader = function (_Component) {\n\t  _inherits(BounceLoader, _Component);\n\t\n\t  function BounceLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, BounceLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = BounceLoader.__proto__ || Object.getPrototypeOf(BounceLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        borderRadius: '100%',\n\t        opacity: 0.6,\n\t        position: 'absolute',\n\t        top: 0,\n\t        left: 0,\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var animation = [animationName, '2s', i === 1 ? '1s' : '0s', 'infinite', 'ease-in-out'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      if (i) {\n\t        return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n\t          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t        });\n\t      }\n\t\n\t      return (0, _appendVendorPrefix2.default)({\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        position: 'relative',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  _createClass(BounceLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var loading = this.props.loading;\n\t\n\t      if (loading) {\n\t        var props = _extends({}, this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement(\n\t            'div',\n\t            { style: this.getStyle() },\n\t            _react2.default.createElement('div', { style: this.getStyle(1) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(2) })\n\t          )\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return BounceLoader;\n\t}(_react.Component);\n\t\n\tBounceLoader.propTypes = propTypes;\n\tBounceLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '60px'\n\t};\n\texports.default = BounceLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=BounceLoader.js.map\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '0%': {\n\t    transform: 'rotate(0deg) scale(1)'\n\t  },\n\t  '50%': {\n\t    transform: 'rotate(180deg) scale(0.8)'\n\t  },\n\t  '100%': {\n\t    transform: 'rotate(360deg) scale(1)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar ClipLoader = function (_Component) {\n\t  _inherits(ClipLoader, _Component);\n\t\n\t  function ClipLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, ClipLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ClipLoader.__proto__ || Object.getPrototypeOf(ClipLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n\t      return {\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        border: '2px solid',\n\t        borderColor: _this.props.color,\n\t        borderBottomColor: 'transparent',\n\t        borderRadius: '100%',\n\t        background: 'transparent !important',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function () {\n\t      var animation = [animationName, '0.75s', '0s', 'infinite', 'linear'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)({\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      }, _this.getBallStyle(i), _this.getAnimationStyle(), {\n\t        display: 'inline-block'\n\t      });\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  _createClass(ClipLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var loading = this.props.loading;\n\t\n\t\n\t      if (loading) {\n\t        var props = _extends({}, this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement('div', { style: this.getStyle() })\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return ClipLoader;\n\t}(_react.Component);\n\t\n\tClipLoader.propTypes = propTypes;\n\tClipLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '35px'\n\t};\n\texports.default = ClipLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=ClipLoader.js.map\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar rotateKeyframes = {\n\t  '100%': {\n\t    transform: 'rotate(360deg)'\n\t  }\n\t\n\t  /**\n\t   * @type {Object}\n\t   */\n\t};var bounceKeyframes = {\n\t  '0%, 100%': {\n\t    transform: 'scale(0)'\n\t  },\n\t  '50%': {\n\t    transform: 'scale(1.0)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var rotateAnimationName = (0, _insertKeyframesRule2.default)(rotateKeyframes);\n\t\n\t/**\n\t * @type {String}\n\t */\n\tvar bounceAnimationName = (0, _insertKeyframesRule2.default)(bounceKeyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar DotLoader = function (_Component) {\n\t  _inherits(DotLoader, _Component);\n\t\n\t  function DotLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, DotLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = DotLoader.__proto__ || Object.getPrototypeOf(DotLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function (size) {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: size,\n\t        height: size,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var animation = [i === 0 ? rotateAnimationName : bounceAnimationName, '2s', i === 2 ? '-1s' : '0s', 'infinite', 'linear'].join(' ');\n\t      var animationFillMode = 'forwards';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      var size = _this.props.size | 0;\n\t      var ballSize = size / 2;\n\t\n\t      if (i) {\n\t        return (0, _appendVendorPrefix2.default)(_this.getBallStyle(ballSize), _this.getAnimationStyle(i), {\n\t          position: 'absolute',\n\t          top: i % 2 ? 0 : 'auto',\n\t          bottom: i % 2 ? 'auto' : 0,\n\t          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t        });\n\t      }\n\t\n\t      return (0, _appendVendorPrefix2.default)(_this.getAnimationStyle(i), {\n\t        width: size,\n\t        height: size,\n\t        position: 'relative',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  /**\n\t   * @param  {String} size\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  _createClass(DotLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var loading = this.props.loading;\n\t\n\t\n\t      if (loading) {\n\t        var props = _extends({}, this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement(\n\t            'div',\n\t            { style: this.getStyle(0) },\n\t            _react2.default.createElement('div', { style: this.getStyle(1) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(2) })\n\t          )\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return DotLoader;\n\t}(_react.Component);\n\t\n\tDotLoader.propTypes = propTypes;\n\tDotLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '60px' };\n\texports.default = DotLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=DotLoader.js.map\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '50%': {\n\t    opacity: 0.3\n\t  },\n\t  '100%': {\n\t    opacity: 1\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  height: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  width: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  radius: _propTypes2.default.string,\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar FadeLoader = function (_Component) {\n\t  _inherits(FadeLoader, _Component);\n\t\n\t  function FadeLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, FadeLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = FadeLoader.__proto__ || Object.getPrototypeOf(FadeLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getLineStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        height: _this.props.height,\n\t        width: _this.props.width,\n\t        margin: _this.props.margin,\n\t        borderRadius: _this.props.radius,\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var animation = [animationName, '1.2s', i * 0.12 + 's', 'infinite', 'ease-in-out'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getPosStyle = function (i) {\n\t      var radius = 20;\n\t      var quarter = radius / 2 + radius / 5.5;\n\t\n\t      var lines = {\n\t        l1: {\n\t          top: radius,\n\t          left: 0\n\t        },\n\t        l2: {\n\t          top: quarter,\n\t          left: quarter,\n\t          transform: 'rotate(-45deg)'\n\t        },\n\t        l3: {\n\t          top: 0,\n\t          left: radius,\n\t          transform: 'rotate(90deg)'\n\t        },\n\t        l4: {\n\t          top: -quarter,\n\t          left: quarter,\n\t          transform: 'rotate(45deg)'\n\t        },\n\t        l5: {\n\t          top: -radius,\n\t          left: 0\n\t        },\n\t        l6: {\n\t          top: -quarter,\n\t          left: -quarter,\n\t          transform: 'rotate(-45deg)'\n\t        },\n\t        l7: {\n\t          top: 0,\n\t          left: -radius,\n\t          transform: 'rotate(90deg)'\n\t        },\n\t        l8: {\n\t          top: quarter,\n\t          left: -quarter,\n\t          transform: 'rotate(45deg)'\n\t        }\n\t      };\n\t\n\t      return lines['l' + i];\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)(_this.getLineStyle(i), _this.getPosStyle(i), _this.getAnimationStyle(i), {\n\t        position: 'absolute',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  _createClass(FadeLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var loading = this.props.loading;\n\t\n\t\n\t      if (loading) {\n\t        var style = {\n\t          position: 'relative',\n\t          fontSize: 0\n\t        };\n\t\n\t        var props = _extends({}, this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement(\n\t            'div',\n\t            { style: style },\n\t            _react2.default.createElement('div', { style: this.getStyle(1) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(2) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(3) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(4) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(5) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(6) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(7) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(8) })\n\t          )\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return FadeLoader;\n\t}(_react.Component);\n\t\n\tFadeLoader.propTypes = propTypes;\n\tFadeLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  height: '15px',\n\t  width: '5px',\n\t  margin: '2px',\n\t  radius: '2px'\n\t};\n\texports.default = FadeLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=FadeLoader.js.map\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '0%': {\n\t    transform: 'scale(1)'\n\t  },\n\t  '50%': {\n\t    transform: 'scale(0.5)',\n\t    opacity: 0.7\n\t  },\n\t  '100%': {\n\t    transform: 'scale(1)',\n\t    opacity: 1\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\t/**\n\t * @param  {Number} top\n\t * @return {Number}\n\t */\n\tfunction random(top) {\n\t  return Math.random() * top;\n\t}\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar GridLoader = function (_Component) {\n\t  _inherits(GridLoader, _Component);\n\t\n\t  function GridLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, GridLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = GridLoader.__proto__ || Object.getPrototypeOf(GridLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        margin: _this.props.margin,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function () {\n\t      var animationDuration = random(100) / 100 + 0.6 + 's';\n\t      var animationDelay = random(100) / 100 - 0.2 + 's';\n\t\n\t      var animation = [animationName, animationDuration, animationDelay, 'infinite', 'ease'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n\t        display: 'inline-block',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  _createClass(GridLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var loading = this.props.loading;\n\t\n\t\n\t      if (loading) {\n\t        var style = {\n\t          width: parseFloat(this.props.size) * 3 + parseFloat(this.props.margin) * 6,\n\t          fontSize: 0\n\t        };\n\t\n\t        var props = _extends({}, this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement(\n\t            'div',\n\t            { style: style },\n\t            _react2.default.createElement('div', { style: this.getStyle(1) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(2) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(3) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(4) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(5) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(6) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(7) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(8) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(9) })\n\t          )\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return GridLoader;\n\t}(_react.Component);\n\t\n\tGridLoader.propTypes = propTypes;\n\tGridLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '15px',\n\t  margin: '2px'\n\t};\n\texports.default = GridLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=GridLoader.js.map\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.SyncLoader = exports.SquareLoader = exports.SkewLoader = exports.ScaleLoader = exports.RotateLoader = exports.RiseLoader = exports.RingLoader = exports.PulseLoader = exports.PacmanLoader = exports.MoonLoader = exports.GridLoader = exports.FadeLoader = exports.DotLoader = exports.ClipLoader = exports.BounceLoader = exports.BeatLoader = undefined;\n\t\n\tvar _BeatLoader2 = __webpack_require__(26);\n\t\n\tvar _BeatLoader3 = _interopRequireDefault(_BeatLoader2);\n\t\n\tvar _BounceLoader2 = __webpack_require__(27);\n\t\n\tvar _BounceLoader3 = _interopRequireDefault(_BounceLoader2);\n\t\n\tvar _ClipLoader2 = __webpack_require__(28);\n\t\n\tvar _ClipLoader3 = _interopRequireDefault(_ClipLoader2);\n\t\n\tvar _DotLoader2 = __webpack_require__(29);\n\t\n\tvar _DotLoader3 = _interopRequireDefault(_DotLoader2);\n\t\n\tvar _FadeLoader2 = __webpack_require__(30);\n\t\n\tvar _FadeLoader3 = _interopRequireDefault(_FadeLoader2);\n\t\n\tvar _GridLoader2 = __webpack_require__(31);\n\t\n\tvar _GridLoader3 = _interopRequireDefault(_GridLoader2);\n\t\n\tvar _MoonLoader2 = __webpack_require__(33);\n\t\n\tvar _MoonLoader3 = _interopRequireDefault(_MoonLoader2);\n\t\n\tvar _PacmanLoader2 = __webpack_require__(34);\n\t\n\tvar _PacmanLoader3 = _interopRequireDefault(_PacmanLoader2);\n\t\n\tvar _PulseLoader2 = __webpack_require__(35);\n\t\n\tvar _PulseLoader3 = _interopRequireDefault(_PulseLoader2);\n\t\n\tvar _RingLoader2 = __webpack_require__(36);\n\t\n\tvar _RingLoader3 = _interopRequireDefault(_RingLoader2);\n\t\n\tvar _RiseLoader2 = __webpack_require__(37);\n\t\n\tvar _RiseLoader3 = _interopRequireDefault(_RiseLoader2);\n\t\n\tvar _RotateLoader2 = __webpack_require__(38);\n\t\n\tvar _RotateLoader3 = _interopRequireDefault(_RotateLoader2);\n\t\n\tvar _ScaleLoader2 = __webpack_require__(39);\n\t\n\tvar _ScaleLoader3 = _interopRequireDefault(_ScaleLoader2);\n\t\n\tvar _SkewLoader2 = __webpack_require__(40);\n\t\n\tvar _SkewLoader3 = _interopRequireDefault(_SkewLoader2);\n\t\n\tvar _SquareLoader2 = __webpack_require__(41);\n\t\n\tvar _SquareLoader3 = _interopRequireDefault(_SquareLoader2);\n\t\n\tvar _SyncLoader2 = __webpack_require__(42);\n\t\n\tvar _SyncLoader3 = _interopRequireDefault(_SyncLoader2);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.BeatLoader = _BeatLoader3.default;\n\texports.BounceLoader = _BounceLoader3.default;\n\texports.ClipLoader = _ClipLoader3.default;\n\texports.DotLoader = _DotLoader3.default;\n\texports.FadeLoader = _FadeLoader3.default;\n\texports.GridLoader = _GridLoader3.default;\n\texports.MoonLoader = _MoonLoader3.default;\n\texports.PacmanLoader = _PacmanLoader3.default;\n\texports.PulseLoader = _PulseLoader3.default;\n\texports.RingLoader = _RingLoader3.default;\n\texports.RiseLoader = _RiseLoader3.default;\n\texports.RotateLoader = _RotateLoader3.default;\n\texports.ScaleLoader = _ScaleLoader3.default;\n\texports.SkewLoader = _SkewLoader3.default;\n\texports.SquareLoader = _SquareLoader3.default;\n\texports.SyncLoader = _SyncLoader3.default;\n\t//# sourceMappingURL=Halogenium.js.map\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '100%': {\n\t    transform: 'rotate(360deg)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar MoonLoader = function (_Component) {\n\t  _inherits(MoonLoader, _Component);\n\t\n\t  function MoonLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, MoonLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = MoonLoader.__proto__ || Object.getPrototypeOf(MoonLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function (size) {\n\t      return {\n\t        width: size,\n\t        height: size,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function () {\n\t      var animation = [animationName, '0.6s', '0s', 'infinite', 'linear'].join(' ');\n\t      var animationFillMode = 'forwards';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      var size = _this.props.size | 0;\n\t      var moonSize = size / 7;\n\t\n\t      if (i === 1) {\n\t        return (0, _appendVendorPrefix2.default)({\n\t          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t        }, _this.getBallStyle(moonSize), _this.getAnimationStyle(i), {\n\t          backgroundColor: _this.props.color,\n\t          opacity: '0.8',\n\t          position: 'absolute',\n\t          top: size / 2 - moonSize / 2\n\t        });\n\t      } else if (i === 2) {\n\t        return (0, _appendVendorPrefix2.default)({\n\t          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t        }, _this.getBallStyle(size), {\n\t          border: moonSize + 'px solid ' + _this.props.color,\n\t          opacity: 0.1\n\t        });\n\t      }\n\t      return (0, _appendVendorPrefix2.default)({\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      }, _this.getAnimationStyle(i), {\n\t        position: 'relative'\n\t      });\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  /**\n\t   * @param  {String} size\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  _createClass(MoonLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      var loading = this.props.loading;\n\t\n\t\n\t      if (loading) {\n\t        var props = _extends({}, this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement(\n\t            'div',\n\t            { style: this.getStyle(0) },\n\t            _react2.default.createElement('div', { style: this.getStyle(1) }),\n\t            _react2.default.createElement('div', { style: this.getStyle(2) })\n\t          )\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }\n\t  }]);\n\t\n\t  return MoonLoader;\n\t}(_react.Component);\n\t\n\tMoonLoader.propTypes = propTypes;\n\tMoonLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '60px' };\n\texports.default = MoonLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=MoonLoader.js.map\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar animations = {};\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar PacmanLoader = function (_Component) {\n\t  _inherits(PacmanLoader, _Component);\n\t\n\t  function PacmanLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, PacmanLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = PacmanLoader.__proto__ || Object.getPrototypeOf(PacmanLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        margin: _this.props.margin,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign,\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var size = _this.props.size;\n\t      var animationName = animations[size];\n\t\n\t      if (!animationName) {\n\t        var keyframes = {\n\t          '75%': {\n\t            opacity: 0.7\n\t          },\n\t          '100%': {\n\t            transform: 'translate(' + -4 * size + 'px, ' + -size / 4 + 'px)'\n\t          }\n\t        };\n\t        animationName = animations[size] = (0, _insertKeyframesRule2.default)(keyframes);\n\t      }\n\t\n\t      var animation = [animationName, '1s', i * 0.25 + 's', 'infinite', 'linear'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      if (i | 0 === 1) {\n\t        var s1 = _this.props.size + 'px solid transparent';\n\t        var s2 = _this.props.size + 'px solid ' + _this.props.color;\n\t\n\t        return {\n\t          width: 0,\n\t          height: 0,\n\t          borderRight: s1,\n\t          borderTop: s2,\n\t          borderLeft: s2,\n\t          borderBottom: s2,\n\t          borderRadius: _this.props.size\n\t        };\n\t      }\n\t\n\t      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n\t        width: 10,\n\t        height: 10,\n\t        transform: 'translate(0, ' + -_this.props.size / 4 + 'px)',\n\t        position: 'absolute',\n\t        top: 25,\n\t        left: 100\n\t      });\n\t    }, _this.renderLoader = function (loading) {\n\t      if (loading) {\n\t        var style = {\n\t          position: 'relative',\n\t          fontSize: 0\n\t        };\n\t        var props = Object.assign({}, _this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement(\n\t            'div',\n\t            { style: style },\n\t            _react2.default.createElement('div', { style: _this.getStyle(1) }),\n\t            _react2.default.createElement('div', { style: _this.getStyle(2) }),\n\t            _react2.default.createElement('div', { style: _this.getStyle(3) }),\n\t            _react2.default.createElement('div', { style: _this.getStyle(4) }),\n\t            _react2.default.createElement('div', { style: _this.getStyle(5) })\n\t          )\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  _createClass(PacmanLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return this.renderLoader(this.props.loading);\n\t    }\n\t  }]);\n\t\n\t  return PacmanLoader;\n\t}(_react.Component);\n\t\n\tPacmanLoader.propTypes = propTypes;\n\tPacmanLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#fff',\n\t  size: 25,\n\t  margin: 2 };\n\texports.default = PacmanLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=PacmanLoader.js.map\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '0%': {\n\t    transform: 'scale(1)',\n\t    opacity: 1\n\t  },\n\t  '45%': {\n\t    transform: 'scale(0.1)',\n\t    opacity: 0.7\n\t  },\n\t  '80%': {\n\t    transform: 'scale(1)',\n\t    opacity: 1\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar PulseLoader = function (_Component) {\n\t  _inherits(PulseLoader, _Component);\n\t\n\t  function PulseLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, PulseLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = PulseLoader.__proto__ || Object.getPrototypeOf(PulseLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        margin: _this.props.margin,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var animation = [animationName, '0.75s', i * 0.12 + 's', 'infinite', 'cubic-bezier(.2,.68,.18,1.08)'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n\t        display: 'inline-block',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _this.renderLoader = function (loading) {\n\t      if (loading) {\n\t        var props = Object.assign({}, _this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement('div', { style: _this.getStyle(1) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(2) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(3) })\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t  /**\n\t   * @type {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Boolean} loading\n\t   * @return {ReactComponent || null}\n\t   */\n\t\n\t\n\t  _createClass(PulseLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return this.renderLoader(this.props.loading);\n\t    }\n\t  }]);\n\t\n\t  return PulseLoader;\n\t}(_react.Component);\n\t\n\tPulseLoader.propTypes = propTypes;\n\tPulseLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '15px',\n\t  margin: '2px' };\n\texports.default = PulseLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=PulseLoader.js.map\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar rightRotateKeyframes = {\n\t  '0%': {\n\t    transform: 'rotateX(0deg) rotateY(0deg) rotateZ(0deg)'\n\t\n\t  },\n\t  '100%': {\n\t    transform: 'rotateX(180deg) rotateY(360deg) rotateZ(360deg)'\n\t  }\n\t\n\t  /**\n\t   * @type {Object}\n\t   */\n\t};var leftRotateKeyframes = {\n\t  '0%': {\n\t    transform: 'rotateX(0deg) rotateY(0deg) rotateZ(0deg)'\n\t  },\n\t  '100%': {\n\t    transform: 'rotateX(360deg) rotateY(180deg) rotateZ(360deg)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var rightRotateAnimationName = (0, _insertKeyframesRule2.default)(rightRotateKeyframes);\n\t\n\t/**\n\t * @type {String}\n\t */\n\tvar leftRotateAnimationName = (0, _insertKeyframesRule2.default)(leftRotateKeyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar RingLoader = function (_Component) {\n\t  _inherits(RingLoader, _Component);\n\t\n\t  function RingLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, RingLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = RingLoader.__proto__ || Object.getPrototypeOf(RingLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getCircleStyle = function (size) {\n\t      return {\n\t        width: size,\n\t        height: size,\n\t        border: size / 10 + 'px solid ' + _this.props.color,\n\t        opacity: 0.4,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var animation = [i | 0 === 1 ? rightRotateAnimationName : leftRotateAnimationName, '2s', '0s', 'infinite', 'linear'].join(' ');\n\t\n\t      var animationFillMode = 'forwards';\n\t      var perspective = '800px';\n\t\n\t      return {\n\t        perspective: perspective,\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      var size = parseInt(_this.props.size, 10);\n\t\n\t      if (i) {\n\t        return (0, _appendVendorPrefix2.default)({\n\t          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t        }, _this.getCircleStyle(size), _this.getAnimationStyle(i), {\n\t          position: 'absolute',\n\t          top: 0,\n\t          left: 0\n\t        });\n\t      }\n\t\n\t      return {\n\t        width: size,\n\t        height: size,\n\t        position: 'relative',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      };\n\t    }, _this.renderLoader = function (loading) {\n\t      if (loading) {\n\t        var props = Object.assign({}, _this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement(\n\t            'div',\n\t            { style: _this.getStyle(0) },\n\t            _react2.default.createElement('div', { style: _this.getStyle(1) }),\n\t            _react2.default.createElement('div', { style: _this.getStyle(2) })\n\t          )\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t  /**\n\t   * @type {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param {String} size\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Boolean} loading\n\t   * @return {ReactComponent || null}\n\t   */\n\t\n\t\n\t  _createClass(RingLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return this.renderLoader(this.props.loading);\n\t    }\n\t  }]);\n\t\n\t  return RingLoader;\n\t}(_react.Component);\n\t\n\tRingLoader.propTypes = propTypes;\n\tRingLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '60px' };\n\texports.default = RingLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=RingLoader.js.map\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Number}\n\t */\n\tvar riseAmount = 30;\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframesEven = {\n\t  '0%': {\n\t    transform: 'scale(1.1)'\n\t  },\n\t  '25%': {\n\t    transform: 'translateY(-' + riseAmount + 'px)'\n\t  },\n\t  '50%': {\n\t    transform: 'scale(0.4)'\n\t  },\n\t  '75%': {\n\t    transform: 'translateY(' + riseAmount + 'px)'\n\t  },\n\t  '100%': {\n\t    transform: 'translateY(0) scale(1.0)'\n\t  }\n\t\n\t  /**\n\t   * @type {Object}\n\t   */\n\t};var keyframesOdd = {\n\t  '0%': {\n\t    transform: 'scale(0.4)'\n\t  },\n\t  25: {\n\t    transform: 'translateY(' + riseAmount + 'px)'\n\t  },\n\t  '50%': {\n\t    transform: 'scale(1.1)'\n\t  },\n\t  '75%': {\n\t    transform: 'translateY(-' + riseAmount + 'px)'\n\t  },\n\t  '100%': {\n\t    transform: 'translateY(0) scale(0.75)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationNameEven = (0, _insertKeyframesRule2.default)(keyframesEven);\n\t\n\t/**\n\t * @type {String}\n\t */\n\tvar animationNameOdd = (0, _insertKeyframesRule2.default)(keyframesOdd);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar RiseLoader = function (_Component) {\n\t  _inherits(RiseLoader, _Component);\n\t\n\t  function RiseLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, RiseLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = RiseLoader.__proto__ || Object.getPrototypeOf(RiseLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        margin: _this.props.margin,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var animation = [i % 2 === 0 ? animationNameEven : animationNameOdd, '1s', '0s', 'infinite', 'cubic-bezier(.15,.46,.9,.6)'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n\t        display: 'inline-block',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _this.renderLoader = function (loading) {\n\t      if (loading) {\n\t        var props = Object.assign({}, _this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement('div', { style: _this.getStyle(1) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(2) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(3) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(4) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(5) })\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t  /**\n\t   * @type {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Boolean} loading\n\t   * @return {ReactComponent || null}\n\t   */\n\t\n\t\n\t  _createClass(RiseLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return this.renderLoader(this.props.loading);\n\t    }\n\t  }]);\n\t\n\t  return RiseLoader;\n\t}(_react.Component);\n\t\n\tRiseLoader.propTypes = propTypes;\n\tRiseLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '15px',\n\t  margin: '2px' };\n\texports.default = RiseLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=RiseLoader.js.map\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '0%': {\n\t    transform: 'rotate(0deg)'\n\t  },\n\t  '50%': {\n\t    transform: 'rotate(180deg)'\n\t  },\n\t  '100%': {\n\t    transform: 'rotate(360deg)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar RotateLoader = function (_Component) {\n\t  _inherits(RotateLoader, _Component);\n\t\n\t  function RotateLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, RotateLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = RotateLoader.__proto__ || Object.getPrototypeOf(RotateLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        margin: _this.props.margin,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function () {\n\t      var animation = [animationName, '1s', '0s', 'infinite', 'cubic-bezier(.7,-.13,.22,.86)'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      if (i) {\n\t        return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), {\n\t          opacity: '0.8',\n\t          position: 'absolute',\n\t          top: 0,\n\t          left: i % 2 ? -28 : 25,\n\t          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t        });\n\t      }\n\t\n\t      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n\t        display: 'inline-block',\n\t        position: 'relative',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _this.renderLoader = function (loading) {\n\t      if (loading) {\n\t        var props = Object.assign({}, _this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement(\n\t            'div',\n\t            { style: _this.getStyle() },\n\t            _react2.default.createElement('div', { style: _this.getStyle(1) }),\n\t            _react2.default.createElement('div', { style: _this.getStyle(2) })\n\t          )\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Boolean} loading\n\t   * @return {ReactComponent || null}\n\t   */\n\t\n\t\n\t  _createClass(RotateLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return this.renderLoader(this.props.loading);\n\t    }\n\t  }]);\n\t\n\t  return RotateLoader;\n\t}(_react.Component);\n\t\n\tRotateLoader.propTypes = propTypes;\n\tRotateLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '15px',\n\t  margin: '2px' };\n\texports.default = RotateLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=RotateLoader.js.map\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '0%': {\n\t    transform: 'scaley(1.0)'\n\t  },\n\t  '50%': {\n\t    transform: 'scaley(0.4)'\n\t  },\n\t  '100%': {\n\t    transform: 'scaley(1.0)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  height: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  width: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  radius: _propTypes2.default.string,\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar ScaleLoader = function (_Component) {\n\t  _inherits(ScaleLoader, _Component);\n\t\n\t  function ScaleLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, ScaleLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ScaleLoader.__proto__ || Object.getPrototypeOf(ScaleLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getLineStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        height: _this.props.height,\n\t        width: _this.props.width,\n\t        margin: _this.props.margin,\n\t        borderRadius: _this.props.radius,\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var animation = [animationName, '1s', i * 0.1 + 's', 'infinite', 'cubic-bezier(.2,.68,.18,1.08)'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)(_this.getLineStyle(i), _this.getAnimationStyle(i), {\n\t        display: 'inline-block',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _this.renderLoader = function (loading) {\n\t      if (loading) {\n\t        var props = Object.assign({}, _this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement('div', { style: _this.getStyle(1) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(2) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(3) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(4) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(5) })\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t  /**\n\t   * @type {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Boolean} loading\n\t   * @return {ReactComponent || null}\n\t   */\n\t\n\t\n\t  _createClass(ScaleLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return this.renderLoader(this.props.loading);\n\t    }\n\t  }]);\n\t\n\t  return ScaleLoader;\n\t}(_react.Component);\n\t\n\tScaleLoader.propTypes = propTypes;\n\tScaleLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#fff',\n\t  height: '35px',\n\t  width: '4px',\n\t  margin: '2px',\n\t  radius: '2px' };\n\texports.default = ScaleLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=ScaleLoader.js.map\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '25%': {\n\t    transform: 'perspective(100px) rotateX(180deg) rotateY(0)'\n\t  },\n\t  '50%': {\n\t    transform: 'perspective(100px) rotateX(180deg) rotateY(180deg)'\n\t  },\n\t  '75%': {\n\t    transform: 'perspective(100px) rotateX(0) rotateY(180deg)'\n\t  },\n\t  '100%': {\n\t    transform: 'perspective(100px) rotateX(0) rotateY(0)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar SkewLoader = function (_Component) {\n\t  _inherits(SkewLoader, _Component);\n\t\n\t  function SkewLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, SkewLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = SkewLoader.__proto__ || Object.getPrototypeOf(SkewLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getSharpStyle = function () {\n\t      return {\n\t        width: 0,\n\t        height: 0,\n\t        borderLeft: _this.props.size + ' solid transparent',\n\t        borderRight: _this.props.size + ' solid transparent',\n\t        borderBottom: _this.props.size + ' solid ' + _this.props.color,\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function () {\n\t      var animation = [animationName, '3s', '0s', 'infinite', 'cubic-bezier(.09,.57,.49,.9)'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)({\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      }, _this.getSharpStyle(i), _this.getAnimationStyle(i), {\n\t        display: 'inline-block'\n\t      });\n\t    }, _this.renderLoader = function (loading) {\n\t      if (loading) {\n\t        var props = Object.assign({}, _this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement('div', { style: _this.getStyle() })\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t  /**\n\t   * @type {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Boolean} loading\n\t   * @return {ReactComponent || null}\n\t   */\n\t\n\t\n\t  _createClass(SkewLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return this.renderLoader(this.props.loading);\n\t    }\n\t  }]);\n\t\n\t  return SkewLoader;\n\t}(_react.Component);\n\t\n\tSkewLoader.propTypes = propTypes;\n\tSkewLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#fff',\n\t  size: '20px' };\n\texports.default = SkewLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=SkewLoader.js.map\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '25%': {\n\t    transform: 'rotateX(180deg) rotateY(0)'\n\t  },\n\t  '50%': {\n\t    transform: 'rotateX(180deg) rotateY(180deg)'\n\t  },\n\t  '75%': {\n\t    transform: 'rotateX(0) rotateY(180deg)'\n\t  },\n\t  '100%': {\n\t    transform: 'rotateX(0) rotateY(0)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar SquareLoader = function (_Component) {\n\t  _inherits(SquareLoader, _Component);\n\t\n\t  function SquareLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, SquareLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = SquareLoader.__proto__ || Object.getPrototypeOf(SquareLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getSquareStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function () {\n\t      var animation = [animationName, '3s', '0s', 'infinite', 'cubic-bezier(.09,.57,.49,.9)'].join(' ');\n\t      var animationFillMode = 'both';\n\t      var perspective = '100px';\n\t\n\t      return {\n\t        perspective: perspective,\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)(_this.getSquareStyle(i), _this.getAnimationStyle(i), {\n\t        display: 'inline-block',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _this.renderLoader = function (loading) {\n\t      if (loading) {\n\t        var props = Object.assign({}, _this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement('div', { style: _this.getStyle() })\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t  /**\n\t   * @type {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Boolean} loading\n\t   * @return {ReactComponent || null}\n\t   */\n\t\n\t\n\t  _createClass(SquareLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return this.renderLoader(this.props.loading);\n\t    }\n\t  }]);\n\t\n\t  return SquareLoader;\n\t}(_react.Component);\n\t\n\tSquareLoader.propTypes = propTypes;\n\tSquareLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '50px' };\n\texports.default = SquareLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=SquareLoader.js.map\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _react = __webpack_require__(1);\n\t\n\tvar _react2 = _interopRequireDefault(_react);\n\t\n\tvar _propTypes = __webpack_require__(2);\n\t\n\tvar _propTypes2 = _interopRequireDefault(_propTypes);\n\t\n\tvar _appendVendorPrefix = __webpack_require__(3);\n\t\n\tvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\t\n\tvar _insertKeyframesRule = __webpack_require__(4);\n\t\n\tvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\t/**\n\t * @type {Object}\n\t */\n\tvar keyframes = {\n\t  '33%': {\n\t    transform: 'translateY(10px)'\n\t  },\n\t  '66%': {\n\t    transform: 'translateY(-10px)'\n\t  },\n\t  '100%': {\n\t    transform: 'translateY(0)'\n\t  }\n\t\n\t  /**\n\t   * @type {String}\n\t   */\n\t};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\t\n\tvar propTypes = {\n\t  loading: _propTypes2.default.bool,\n\t  color: _propTypes2.default.string,\n\t  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n\t  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n\t};\n\t\n\tvar ptKeys = Object.keys(propTypes);\n\t\n\tvar SyncLoader = function (_Component) {\n\t  _inherits(SyncLoader, _Component);\n\t\n\t  function SyncLoader() {\n\t    var _ref;\n\t\n\t    var _temp, _this, _ret;\n\t\n\t    _classCallCheck(this, SyncLoader);\n\t\n\t    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t      args[_key] = arguments[_key];\n\t    }\n\t\n\t    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = SyncLoader.__proto__ || Object.getPrototypeOf(SyncLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n\t      return {\n\t        backgroundColor: _this.props.color,\n\t        width: _this.props.size,\n\t        height: _this.props.size,\n\t        margin: _this.props.margin,\n\t        borderRadius: '100%',\n\t        verticalAlign: _this.props.verticalAlign\n\t      };\n\t    }, _this.getAnimationStyle = function (i) {\n\t      var animation = [animationName, '0.6s', i * 0.07 + 's', 'infinite', 'ease-in-out'].join(' ');\n\t      var animationFillMode = 'both';\n\t\n\t      return {\n\t        animation: animation,\n\t        animationFillMode: animationFillMode\n\t      };\n\t    }, _this.getStyle = function (i) {\n\t      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n\t        display: 'inline-block',\n\t        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n\t      });\n\t    }, _this.renderLoader = function (loading) {\n\t      if (loading) {\n\t        var props = Object.assign({}, _this.props);\n\t\n\t        if (propTypes && ptKeys) {\n\t          var klen = ptKeys.length;\n\t          for (var i = 0; i < klen; i++) {\n\t            delete props[ptKeys[i]];\n\t          }\n\t        }\n\t\n\t        return _react2.default.createElement(\n\t          'div',\n\t          props,\n\t          _react2.default.createElement('div', { style: _this.getStyle(1) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(2) }),\n\t          _react2.default.createElement('div', { style: _this.getStyle(3) })\n\t        );\n\t      }\n\t\n\t      return null;\n\t    }, _temp), _possibleConstructorReturn(_this, _ret);\n\t  }\n\t  /**\n\t   * @type {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Number} i\n\t   * @return {Object}\n\t   */\n\t\n\t\n\t  /**\n\t   * @param  {Boolean} loading\n\t   * @return {ReactComponent || null}\n\t   */\n\t\n\t\n\t  _createClass(SyncLoader, [{\n\t    key: 'render',\n\t    value: function render() {\n\t      return this.renderLoader(this.props.loading);\n\t    }\n\t  }]);\n\t\n\t  return SyncLoader;\n\t}(_react.Component);\n\t\n\tSyncLoader.propTypes = propTypes;\n\tSyncLoader.defaultProps = {\n\t  loading: true,\n\t  color: '#ffffff',\n\t  size: '15px',\n\t  margin: '2px' };\n\texports.default = SyncLoader;\n\tmodule.exports = exports['default'];\n\t//# sourceMappingURL=SyncLoader.js.map\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar emptyFunction = __webpack_require__(5);\n\tvar invariant = __webpack_require__(22);\n\tvar ReactPropTypesSecret = __webpack_require__(44);\n\t\n\tmodule.exports = function() {\n\t  function shim(props, propName, componentName, location, propFullName, secret) {\n\t    if (secret === ReactPropTypesSecret) {\n\t      // It is still safe when called from React.\n\t      return;\n\t    }\n\t    invariant(\n\t      false,\n\t      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n\t      'Use PropTypes.checkPropTypes() to call them. ' +\n\t      'Read more at http://fb.me/use-check-prop-types'\n\t    );\n\t  };\n\t  shim.isRequired = shim;\n\t  function getShim() {\n\t    return shim;\n\t  };\n\t  // Important!\n\t  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n\t  var ReactPropTypes = {\n\t    array: shim,\n\t    bool: shim,\n\t    func: shim,\n\t    number: shim,\n\t    object: shim,\n\t    string: shim,\n\t    symbol: shim,\n\t\n\t    any: shim,\n\t    arrayOf: getShim,\n\t    element: shim,\n\t    instanceOf: getShim,\n\t    node: shim,\n\t    objectOf: getShim,\n\t    oneOf: getShim,\n\t    oneOfType: getShim,\n\t    shape: getShim,\n\t    exact: getShim\n\t  };\n\t\n\t  ReactPropTypes.checkPropTypes = emptyFunction;\n\t  ReactPropTypes.PropTypes = ReactPropTypes;\n\t\n\t  return ReactPropTypes;\n\t};\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports) {\n\n\t/**\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';\n\t\n\tvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\t\n\tmodule.exports = ReactPropTypesSecret;\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/** @license React v16.2.0\n\t * react-dom.production.min.js\n\t *\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t/*\n\t Modernizr 3.0.0pre (Custom Build) | MIT\n\t*/\n\t'use strict';var aa=__webpack_require__(1),l=__webpack_require__(18),B=__webpack_require__(7),C=__webpack_require__(5),ba=__webpack_require__(17),da=__webpack_require__(21),ea=__webpack_require__(25),fa=__webpack_require__(19),ia=__webpack_require__(20),D=__webpack_require__(6);\n\tfunction E(a){for(var b=arguments.length-1,c=\"Minified React error #\"+a+\"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant\\x3d\"+a,d=0;d<b;d++)c+=\"\\x26args[]\\x3d\"+encodeURIComponent(arguments[d+1]);b=Error(c+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\");b.name=\"Invariant Violation\";b.framesToPop=1;throw b;}aa?void 0:E(\"227\");\n\tvar oa={children:!0,dangerouslySetInnerHTML:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,suppressHydrationWarning:!0,style:!0};function pa(a,b){return(a&b)===b}\n\tvar ta={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(a){var b=ta,c=a.Properties||{},d=a.DOMAttributeNamespaces||{},e=a.DOMAttributeNames||{};a=a.DOMMutationMethods||{};for(var f in c){ua.hasOwnProperty(f)?E(\"48\",f):void 0;var g=f.toLowerCase(),h=c[f];g={attributeName:g,attributeNamespace:null,propertyName:f,mutationMethod:null,mustUseProperty:pa(h,b.MUST_USE_PROPERTY),\n\thasBooleanValue:pa(h,b.HAS_BOOLEAN_VALUE),hasNumericValue:pa(h,b.HAS_NUMERIC_VALUE),hasPositiveNumericValue:pa(h,b.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:pa(h,b.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:pa(h,b.HAS_STRING_BOOLEAN_VALUE)};1>=g.hasBooleanValue+g.hasNumericValue+g.hasOverloadedBooleanValue?void 0:E(\"50\",f);e.hasOwnProperty(f)&&(g.attributeName=e[f]);d.hasOwnProperty(f)&&(g.attributeNamespace=d[f]);a.hasOwnProperty(f)&&(g.mutationMethod=a[f]);ua[f]=g}}},ua={};\n\tfunction va(a,b){if(oa.hasOwnProperty(a)||2<a.length&&(\"o\"===a[0]||\"O\"===a[0])&&(\"n\"===a[1]||\"N\"===a[1]))return!1;if(null===b)return!0;switch(typeof b){case \"boolean\":return oa.hasOwnProperty(a)?a=!0:(b=wa(a))?a=b.hasBooleanValue||b.hasStringBooleanValue||b.hasOverloadedBooleanValue:(a=a.toLowerCase().slice(0,5),a=\"data-\"===a||\"aria-\"===a),a;case \"undefined\":case \"number\":case \"string\":case \"object\":return!0;default:return!1}}function wa(a){return ua.hasOwnProperty(a)?ua[a]:null}\n\tvar xa=ta,ya=xa.MUST_USE_PROPERTY,K=xa.HAS_BOOLEAN_VALUE,za=xa.HAS_NUMERIC_VALUE,Aa=xa.HAS_POSITIVE_NUMERIC_VALUE,Ba=xa.HAS_OVERLOADED_BOOLEAN_VALUE,Ca=xa.HAS_STRING_BOOLEAN_VALUE,Da={Properties:{allowFullScreen:K,async:K,autoFocus:K,autoPlay:K,capture:Ba,checked:ya|K,cols:Aa,contentEditable:Ca,controls:K,\"default\":K,defer:K,disabled:K,download:Ba,draggable:Ca,formNoValidate:K,hidden:K,loop:K,multiple:ya|K,muted:ya|K,noValidate:K,open:K,playsInline:K,readOnly:K,required:K,reversed:K,rows:Aa,rowSpan:za,\n\tscoped:K,seamless:K,selected:ya|K,size:Aa,start:za,span:Aa,spellCheck:Ca,style:0,tabIndex:0,itemScope:K,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:Ca},DOMAttributeNames:{acceptCharset:\"accept-charset\",className:\"class\",htmlFor:\"for\",httpEquiv:\"http-equiv\"},DOMMutationMethods:{value:function(a,b){if(null==b)return a.removeAttribute(\"value\");\"number\"!==a.type||!1===a.hasAttribute(\"value\")?a.setAttribute(\"value\",\"\"+b):a.validity&&!a.validity.badInput&&a.ownerDocument.activeElement!==a&&\n\ta.setAttribute(\"value\",\"\"+b)}}},Ea=xa.HAS_STRING_BOOLEAN_VALUE,M={xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\"},Ga={Properties:{autoReverse:Ea,externalResourcesRequired:Ea,preserveAlpha:Ea},DOMAttributeNames:{autoReverse:\"autoReverse\",externalResourcesRequired:\"externalResourcesRequired\",preserveAlpha:\"preserveAlpha\"},DOMAttributeNamespaces:{xlinkActuate:M.xlink,xlinkArcrole:M.xlink,xlinkHref:M.xlink,xlinkRole:M.xlink,xlinkShow:M.xlink,xlinkTitle:M.xlink,xlinkType:M.xlink,\n\txmlBase:M.xml,xmlLang:M.xml,xmlSpace:M.xml}},Ha=/[\\-\\:]([a-z])/g;function Ia(a){return a[1].toUpperCase()}\n\t\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space\".split(\" \").forEach(function(a){var b=a.replace(Ha,\n\tIa);Ga.Properties[b]=0;Ga.DOMAttributeNames[b]=a});xa.injectDOMPropertyConfig(Da);xa.injectDOMPropertyConfig(Ga);\n\tvar P={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(a){\"function\"!==typeof a.invokeGuardedCallback?E(\"197\"):void 0;Ja=a.invokeGuardedCallback}},invokeGuardedCallback:function(a,b,c,d,e,f,g,h,k){Ja.apply(P,arguments)},invokeGuardedCallbackAndCatchFirstError:function(a,b,c,d,e,f,g,h,k){P.invokeGuardedCallback.apply(this,arguments);if(P.hasCaughtError()){var q=P.clearCaughtError();P._hasRethrowError||(P._hasRethrowError=!0,P._rethrowError=\n\tq)}},rethrowCaughtError:function(){return Ka.apply(P,arguments)},hasCaughtError:function(){return P._hasCaughtError},clearCaughtError:function(){if(P._hasCaughtError){var a=P._caughtError;P._caughtError=null;P._hasCaughtError=!1;return a}E(\"198\")}};function Ja(a,b,c,d,e,f,g,h,k){P._hasCaughtError=!1;P._caughtError=null;var q=Array.prototype.slice.call(arguments,3);try{b.apply(c,q)}catch(v){P._caughtError=v,P._hasCaughtError=!0}}\n\tfunction Ka(){if(P._hasRethrowError){var a=P._rethrowError;P._rethrowError=null;P._hasRethrowError=!1;throw a;}}var La=null,Ma={};\n\tfunction Na(){if(La)for(var a in Ma){var b=Ma[a],c=La.indexOf(a);-1<c?void 0:E(\"96\",a);if(!Oa[c]){b.extractEvents?void 0:E(\"97\",a);Oa[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],g=b,h=d;Pa.hasOwnProperty(h)?E(\"99\",h):void 0;Pa[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&Qa(k[e],g,h);e=!0}else f.registrationName?(Qa(f.registrationName,g,h),e=!0):e=!1;e?void 0:E(\"98\",d,a)}}}}\n\tfunction Qa(a,b,c){Ra[a]?E(\"100\",a):void 0;Ra[a]=b;Sa[a]=b.eventTypes[c].dependencies}var Oa=[],Pa={},Ra={},Sa={};function Ta(a){La?E(\"101\"):void 0;La=Array.prototype.slice.call(a);Na()}function Ua(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];Ma.hasOwnProperty(c)&&Ma[c]===d||(Ma[c]?E(\"102\",c):void 0,Ma[c]=d,b=!0)}b&&Na()}\n\tvar Va=Object.freeze({plugins:Oa,eventNameDispatchConfigs:Pa,registrationNameModules:Ra,registrationNameDependencies:Sa,possibleRegistrationNames:null,injectEventPluginOrder:Ta,injectEventPluginsByName:Ua}),Wa=null,Xa=null,Ya=null;function Za(a,b,c,d){b=a.type||\"unknown-event\";a.currentTarget=Ya(d);P.invokeGuardedCallbackAndCatchFirstError(b,c,void 0,a);a.currentTarget=null}\n\tfunction $a(a,b){null==b?E(\"30\"):void 0;if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function ab(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var bb=null;\n\tfunction cb(a,b){if(a){var c=a._dispatchListeners,d=a._dispatchInstances;if(Array.isArray(c))for(var e=0;e<c.length&&!a.isPropagationStopped();e++)Za(a,b,c[e],d[e]);else c&&Za(a,b,c,d);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}}function db(a){return cb(a,!0)}function gb(a){return cb(a,!1)}var hb={injectEventPluginOrder:Ta,injectEventPluginsByName:Ua};\n\tfunction ib(a,b){var c=a.stateNode;if(!c)return null;var d=Wa(c);if(!d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;c&&\"function\"!==typeof c?E(\"231\",b,typeof c):void 0;\n\treturn c}function jb(a,b,c,d){for(var e,f=0;f<Oa.length;f++){var g=Oa[f];g&&(g=g.extractEvents(a,b,c,d))&&(e=$a(e,g))}return e}function kb(a){a&&(bb=$a(bb,a))}function lb(a){var b=bb;bb=null;b&&(a?ab(b,db):ab(b,gb),bb?E(\"95\"):void 0,P.rethrowCaughtError())}var mb=Object.freeze({injection:hb,getListener:ib,extractEvents:jb,enqueueEvents:kb,processEventQueue:lb}),nb=Math.random().toString(36).slice(2),Q=\"__reactInternalInstance$\"+nb,ob=\"__reactEventHandlers$\"+nb;\n\tfunction pb(a){if(a[Q])return a[Q];for(var b=[];!a[Q];)if(b.push(a),a.parentNode)a=a.parentNode;else return null;var c=void 0,d=a[Q];if(5===d.tag||6===d.tag)return d;for(;a&&(d=a[Q]);a=b.pop())c=d;return c}function qb(a){if(5===a.tag||6===a.tag)return a.stateNode;E(\"33\")}function rb(a){return a[ob]||null}\n\tvar sb=Object.freeze({precacheFiberNode:function(a,b){b[Q]=a},getClosestInstanceFromNode:pb,getInstanceFromNode:function(a){a=a[Q];return!a||5!==a.tag&&6!==a.tag?null:a},getNodeFromInstance:qb,getFiberCurrentPropsFromNode:rb,updateFiberProps:function(a,b){a[ob]=b}});function tb(a){do a=a[\"return\"];while(a&&5!==a.tag);return a?a:null}function ub(a,b,c){for(var d=[];a;)d.push(a),a=tb(a);for(a=d.length;0<a--;)b(d[a],\"captured\",c);for(a=0;a<d.length;a++)b(d[a],\"bubbled\",c)}\n\tfunction vb(a,b,c){if(b=ib(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=$a(c._dispatchListeners,b),c._dispatchInstances=$a(c._dispatchInstances,a)}function wb(a){a&&a.dispatchConfig.phasedRegistrationNames&&ub(a._targetInst,vb,a)}function xb(a){if(a&&a.dispatchConfig.phasedRegistrationNames){var b=a._targetInst;b=b?tb(b):null;ub(b,vb,a)}}\n\tfunction yb(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=ib(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=$a(c._dispatchListeners,b),c._dispatchInstances=$a(c._dispatchInstances,a))}function zb(a){a&&a.dispatchConfig.registrationName&&yb(a._targetInst,null,a)}function Ab(a){ab(a,wb)}\n\tfunction Bb(a,b,c,d){if(c&&d)a:{var e=c;for(var f=d,g=0,h=e;h;h=tb(h))g++;h=0;for(var k=f;k;k=tb(k))h++;for(;0<g-h;)e=tb(e),g--;for(;0<h-g;)f=tb(f),h--;for(;g--;){if(e===f||e===f.alternate)break a;e=tb(e);f=tb(f)}e=null}else e=null;f=e;for(e=[];c&&c!==f;){g=c.alternate;if(null!==g&&g===f)break;e.push(c);c=tb(c)}for(c=[];d&&d!==f;){g=d.alternate;if(null!==g&&g===f)break;c.push(d);d=tb(d)}for(d=0;d<e.length;d++)yb(e[d],\"bubbled\",a);for(a=c.length;0<a--;)yb(c[a],\"captured\",b)}\n\tvar Cb=Object.freeze({accumulateTwoPhaseDispatches:Ab,accumulateTwoPhaseDispatchesSkipTarget:function(a){ab(a,xb)},accumulateEnterLeaveDispatches:Bb,accumulateDirectDispatches:function(a){ab(a,zb)}}),Db=null;function Eb(){!Db&&l.canUseDOM&&(Db=\"textContent\"in document.documentElement?\"textContent\":\"innerText\");return Db}var S={_root:null,_startText:null,_fallbackText:null};\n\tfunction Fb(){if(S._fallbackText)return S._fallbackText;var a,b=S._startText,c=b.length,d,e=Gb(),f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);S._fallbackText=e.slice(a,1<d?1-d:void 0);return S._fallbackText}function Gb(){return\"value\"in S._root?S._root.value:S._root[Eb()]}\n\tvar Hb=\"dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances\".split(\" \"),Ib={type:null,target:null,currentTarget:C.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};\n\tfunction T(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):\"target\"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?C.thatReturnsTrue:C.thatReturnsFalse;this.isPropagationStopped=C.thatReturnsFalse;return this}\n\tB(T.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=C.thatReturnsTrue)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=C.thatReturnsTrue)},persist:function(){this.isPersistent=C.thatReturnsTrue},isPersistent:C.thatReturnsFalse,\n\tdestructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;for(a=0;a<Hb.length;a++)this[Hb[a]]=null}});T.Interface=Ib;T.augmentClass=function(a,b){function c(){}c.prototype=this.prototype;var d=new c;B(d,a.prototype);a.prototype=d;a.prototype.constructor=a;a.Interface=B({},this.Interface,b);a.augmentClass=this.augmentClass;Jb(a)};Jb(T);function Kb(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}\n\tfunction Lb(a){a instanceof this?void 0:E(\"223\");a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function Jb(a){a.eventPool=[];a.getPooled=Kb;a.release=Lb}function Mb(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(Mb,{data:null});function Nb(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(Nb,{data:null});var Pb=[9,13,27,32],Vb=l.canUseDOM&&\"CompositionEvent\"in window,Wb=null;l.canUseDOM&&\"documentMode\"in document&&(Wb=document.documentMode);var Xb;\n\tif(Xb=l.canUseDOM&&\"TextEvent\"in window&&!Wb){var Yb=window.opera;Xb=!(\"object\"===typeof Yb&&\"function\"===typeof Yb.version&&12>=parseInt(Yb.version(),10))}\n\tvar Zb=Xb,$b=l.canUseDOM&&(!Vb||Wb&&8<Wb&&11>=Wb),ac=String.fromCharCode(32),bc={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"topCompositionEnd\",\"topKeyPress\",\"topTextInput\",\"topPaste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",\n\tcaptured:\"onCompositionStartCapture\"},dependencies:\"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown\".split(\" \")}},cc=!1;\n\tfunction dc(a,b){switch(a){case \"topKeyUp\":return-1!==Pb.indexOf(b.keyCode);case \"topKeyDown\":return 229!==b.keyCode;case \"topKeyPress\":case \"topMouseDown\":case \"topBlur\":return!0;default:return!1}}function ec(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var fc=!1;function gc(a,b){switch(a){case \"topCompositionEnd\":return ec(b);case \"topKeyPress\":if(32!==b.which)return null;cc=!0;return ac;case \"topTextInput\":return a=b.data,a===ac&&cc?null:a;default:return null}}\n\tfunction hc(a,b){if(fc)return\"topCompositionEnd\"===a||!Vb&&dc(a,b)?(a=Fb(),S._root=null,S._startText=null,S._fallbackText=null,fc=!1,a):null;switch(a){case \"topPaste\":return null;case \"topKeyPress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"topCompositionEnd\":return $b?null:b.data;default:return null}}\n\tvar ic={eventTypes:bc,extractEvents:function(a,b,c,d){var e;if(Vb)b:{switch(a){case \"topCompositionStart\":var f=bc.compositionStart;break b;case \"topCompositionEnd\":f=bc.compositionEnd;break b;case \"topCompositionUpdate\":f=bc.compositionUpdate;break b}f=void 0}else fc?dc(a,c)&&(f=bc.compositionEnd):\"topKeyDown\"===a&&229===c.keyCode&&(f=bc.compositionStart);f?($b&&(fc||f!==bc.compositionStart?f===bc.compositionEnd&&fc&&(e=Fb()):(S._root=d,S._startText=Gb(),fc=!0)),f=Mb.getPooled(f,b,c,d),e?f.data=\n\te:(e=ec(c),null!==e&&(f.data=e)),Ab(f),e=f):e=null;(a=Zb?gc(a,c):hc(a,c))?(b=Nb.getPooled(bc.beforeInput,b,c,d),b.data=a,Ab(b)):b=null;return[e,b]}},jc=null,kc=null,lc=null;function mc(a){if(a=Xa(a)){jc&&\"function\"===typeof jc.restoreControlledState?void 0:E(\"194\");var b=Wa(a.stateNode);jc.restoreControlledState(a.stateNode,a.type,b)}}var nc={injectFiberControlledHostComponent:function(a){jc=a}};function oc(a){kc?lc?lc.push(a):lc=[a]:kc=a}\n\tfunction pc(){if(kc){var a=kc,b=lc;lc=kc=null;mc(a);if(b)for(a=0;a<b.length;a++)mc(b[a])}}var qc=Object.freeze({injection:nc,enqueueStateRestore:oc,restoreStateIfNeeded:pc});function rc(a,b){return a(b)}var sc=!1;function tc(a,b){if(sc)return rc(a,b);sc=!0;try{return rc(a,b)}finally{sc=!1,pc()}}var uc={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};\n\tfunction vc(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!uc[a.type]:\"textarea\"===b?!0:!1}function wc(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var xc;l.canUseDOM&&(xc=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature(\"\",\"\"));\n\tfunction yc(a,b){if(!l.canUseDOM||b&&!(\"addEventListener\"in document))return!1;b=\"on\"+a;var c=b in document;c||(c=document.createElement(\"div\"),c.setAttribute(b,\"return;\"),c=\"function\"===typeof c[b]);!c&&xc&&\"wheel\"===a&&(c=document.implementation.hasFeature(\"Events.wheel\",\"3.0\"));return c}function zc(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\n\tfunction Ac(a){var b=zc(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"function\"===typeof c.get&&\"function\"===typeof c.set)return Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:!0,get:function(){return c.get.call(this)},set:function(a){d=\"\"+a;c.set.call(this,a)}}),{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}\n\tfunction Bc(a){a._valueTracker||(a._valueTracker=Ac(a))}function Cc(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=zc(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}var Dc={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange\".split(\" \")}};\n\tfunction Ec(a,b,c){a=T.getPooled(Dc.change,a,b,c);a.type=\"change\";oc(c);Ab(a);return a}var Fc=null,Gc=null;function Hc(a){kb(a);lb(!1)}function Ic(a){var b=qb(a);if(Cc(b))return a}function Jc(a,b){if(\"topChange\"===a)return b}var Kc=!1;l.canUseDOM&&(Kc=yc(\"input\")&&(!document.documentMode||9<document.documentMode));function Lc(){Fc&&(Fc.detachEvent(\"onpropertychange\",Mc),Gc=Fc=null)}function Mc(a){\"value\"===a.propertyName&&Ic(Gc)&&(a=Ec(Gc,a,wc(a)),tc(Hc,a))}\n\tfunction Nc(a,b,c){\"topFocus\"===a?(Lc(),Fc=b,Gc=c,Fc.attachEvent(\"onpropertychange\",Mc)):\"topBlur\"===a&&Lc()}function Oc(a){if(\"topSelectionChange\"===a||\"topKeyUp\"===a||\"topKeyDown\"===a)return Ic(Gc)}function Pc(a,b){if(\"topClick\"===a)return Ic(b)}function $c(a,b){if(\"topInput\"===a||\"topChange\"===a)return Ic(b)}\n\tvar ad={eventTypes:Dc,_isInputEventSupported:Kc,extractEvents:function(a,b,c,d){var e=b?qb(b):window,f=e.nodeName&&e.nodeName.toLowerCase();if(\"select\"===f||\"input\"===f&&\"file\"===e.type)var g=Jc;else if(vc(e))if(Kc)g=$c;else{g=Oc;var h=Nc}else f=e.nodeName,!f||\"input\"!==f.toLowerCase()||\"checkbox\"!==e.type&&\"radio\"!==e.type||(g=Pc);if(g&&(g=g(a,b)))return Ec(g,c,d);h&&h(a,e,b);\"topBlur\"===a&&null!=b&&(a=b._wrapperState||e._wrapperState)&&a.controlled&&\"number\"===e.type&&(a=\"\"+e.value,e.getAttribute(\"value\")!==\n\ta&&e.setAttribute(\"value\",a))}};function bd(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(bd,{view:null,detail:null});var cd={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function dd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=cd[a])?!!b[a]:!1}function ed(){return dd}function fd(a,b,c,d){return T.call(this,a,b,c,d)}\n\tbd.augmentClass(fd,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:ed,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)}});\n\tvar gd={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"topMouseOut\",\"topMouseOver\"]},mouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"topMouseOut\",\"topMouseOver\"]}},hd={eventTypes:gd,extractEvents:function(a,b,c,d){if(\"topMouseOver\"===a&&(c.relatedTarget||c.fromElement)||\"topMouseOut\"!==a&&\"topMouseOver\"!==a)return null;var e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window;\"topMouseOut\"===a?(a=b,b=(b=c.relatedTarget||c.toElement)?pb(b):null):a=null;if(a===\n\tb)return null;var f=null==a?e:qb(a);e=null==b?e:qb(b);var g=fd.getPooled(gd.mouseLeave,a,c,d);g.type=\"mouseleave\";g.target=f;g.relatedTarget=e;c=fd.getPooled(gd.mouseEnter,b,c,d);c.type=\"mouseenter\";c.target=e;c.relatedTarget=f;Bb(g,c,a,b);return[g,c]}},id=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner;function jd(a){a=a.type;return\"string\"===typeof a?a:\"function\"===typeof a?a.displayName||a.name:null}\n\tfunction kd(a){var b=a;if(a.alternate)for(;b[\"return\"];)b=b[\"return\"];else{if(0!==(b.effectTag&2))return 1;for(;b[\"return\"];)if(b=b[\"return\"],0!==(b.effectTag&2))return 1}return 3===b.tag?2:3}function ld(a){return(a=a._reactInternalFiber)?2===kd(a):!1}function md(a){2!==kd(a)?E(\"188\"):void 0}\n\tfunction nd(a){var b=a.alternate;if(!b)return b=kd(a),3===b?E(\"188\"):void 0,1===b?null:a;for(var c=a,d=b;;){var e=c[\"return\"],f=e?e.alternate:null;if(!e||!f)break;if(e.child===f.child){for(var g=e.child;g;){if(g===c)return md(e),a;if(g===d)return md(e),b;g=g.sibling}E(\"188\")}if(c[\"return\"]!==d[\"return\"])c=e,d=f;else{g=!1;for(var h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}g?\n\tvoid 0:E(\"189\")}}c.alternate!==d?E(\"190\"):void 0}3!==c.tag?E(\"188\"):void 0;return c.stateNode.current===c?a:b}function od(a){a=nd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child[\"return\"]=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b[\"return\"]||b[\"return\"]===a)return null;b=b[\"return\"]}b.sibling[\"return\"]=b[\"return\"];b=b.sibling}}return null}\n\tfunction pd(a){a=nd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child&&4!==b.tag)b.child[\"return\"]=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b[\"return\"]||b[\"return\"]===a)return null;b=b[\"return\"]}b.sibling[\"return\"]=b[\"return\"];b=b.sibling}}return null}var qd=[];\n\tfunction rd(a){var b=a.targetInst;do{if(!b){a.ancestors.push(b);break}var c;for(c=b;c[\"return\"];)c=c[\"return\"];c=3!==c.tag?null:c.stateNode.containerInfo;if(!c)break;a.ancestors.push(b);b=pb(c)}while(b);for(c=0;c<a.ancestors.length;c++)b=a.ancestors[c],sd(a.topLevelType,b,a.nativeEvent,wc(a.nativeEvent))}var td=!0,sd=void 0;function ud(a){td=!!a}function U(a,b,c){return c?ba.listen(c,b,vd.bind(null,a)):null}function wd(a,b,c){return c?ba.capture(c,b,vd.bind(null,a)):null}\n\tfunction vd(a,b){if(td){var c=wc(b);c=pb(c);null===c||\"number\"!==typeof c.tag||2===kd(c)||(c=null);if(qd.length){var d=qd.pop();d.topLevelType=a;d.nativeEvent=b;d.targetInst=c;a=d}else a={topLevelType:a,nativeEvent:b,targetInst:c,ancestors:[]};try{tc(rd,a)}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>qd.length&&qd.push(a)}}}\n\tvar xd=Object.freeze({get _enabled(){return td},get _handleTopLevel(){return sd},setHandleTopLevel:function(a){sd=a},setEnabled:ud,isEnabled:function(){return td},trapBubbledEvent:U,trapCapturedEvent:wd,dispatchEvent:vd});function yd(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;c[\"ms\"+a]=\"MS\"+b;c[\"O\"+a]=\"o\"+b.toLowerCase();return c}\n\tvar zd={animationend:yd(\"Animation\",\"AnimationEnd\"),animationiteration:yd(\"Animation\",\"AnimationIteration\"),animationstart:yd(\"Animation\",\"AnimationStart\"),transitionend:yd(\"Transition\",\"TransitionEnd\")},Ad={},Bd={};l.canUseDOM&&(Bd=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete zd.animationend.animation,delete zd.animationiteration.animation,delete zd.animationstart.animation),\"TransitionEvent\"in window||delete zd.transitionend.transition);\n\tfunction Cd(a){if(Ad[a])return Ad[a];if(!zd[a])return a;var b=zd[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Bd)return Ad[a]=b[c];return\"\"}\n\tvar Dd={topAbort:\"abort\",topAnimationEnd:Cd(\"animationend\")||\"animationend\",topAnimationIteration:Cd(\"animationiteration\")||\"animationiteration\",topAnimationStart:Cd(\"animationstart\")||\"animationstart\",topBlur:\"blur\",topCancel:\"cancel\",topCanPlay:\"canplay\",topCanPlayThrough:\"canplaythrough\",topChange:\"change\",topClick:\"click\",topClose:\"close\",topCompositionEnd:\"compositionend\",topCompositionStart:\"compositionstart\",topCompositionUpdate:\"compositionupdate\",topContextMenu:\"contextmenu\",topCopy:\"copy\",\n\ttopCut:\"cut\",topDoubleClick:\"dblclick\",topDrag:\"drag\",topDragEnd:\"dragend\",topDragEnter:\"dragenter\",topDragExit:\"dragexit\",topDragLeave:\"dragleave\",topDragOver:\"dragover\",topDragStart:\"dragstart\",topDrop:\"drop\",topDurationChange:\"durationchange\",topEmptied:\"emptied\",topEncrypted:\"encrypted\",topEnded:\"ended\",topError:\"error\",topFocus:\"focus\",topInput:\"input\",topKeyDown:\"keydown\",topKeyPress:\"keypress\",topKeyUp:\"keyup\",topLoadedData:\"loadeddata\",topLoad:\"load\",topLoadedMetadata:\"loadedmetadata\",topLoadStart:\"loadstart\",\n\ttopMouseDown:\"mousedown\",topMouseMove:\"mousemove\",topMouseOut:\"mouseout\",topMouseOver:\"mouseover\",topMouseUp:\"mouseup\",topPaste:\"paste\",topPause:\"pause\",topPlay:\"play\",topPlaying:\"playing\",topProgress:\"progress\",topRateChange:\"ratechange\",topScroll:\"scroll\",topSeeked:\"seeked\",topSeeking:\"seeking\",topSelectionChange:\"selectionchange\",topStalled:\"stalled\",topSuspend:\"suspend\",topTextInput:\"textInput\",topTimeUpdate:\"timeupdate\",topToggle:\"toggle\",topTouchCancel:\"touchcancel\",topTouchEnd:\"touchend\",topTouchMove:\"touchmove\",\n\ttopTouchStart:\"touchstart\",topTransitionEnd:Cd(\"transitionend\")||\"transitionend\",topVolumeChange:\"volumechange\",topWaiting:\"waiting\",topWheel:\"wheel\"},Ed={},Fd=0,Gd=\"_reactListenersID\"+(\"\"+Math.random()).slice(2);function Hd(a){Object.prototype.hasOwnProperty.call(a,Gd)||(a[Gd]=Fd++,Ed[a[Gd]]={});return Ed[a[Gd]]}function Id(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\n\tfunction Jd(a,b){var c=Id(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Id(c)}}function Kd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&\"text\"===a.type||\"textarea\"===b||\"true\"===a.contentEditable)}\n\tvar Ld=l.canUseDOM&&\"documentMode\"in document&&11>=document.documentMode,Md={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange\".split(\" \")}},Nd=null,Od=null,Pd=null,Qd=!1;\n\tfunction Rd(a,b){if(Qd||null==Nd||Nd!==da())return null;var c=Nd;\"selectionStart\"in c&&Kd(c)?c={start:c.selectionStart,end:c.selectionEnd}:window.getSelection?(c=window.getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}):c=void 0;return Pd&&ea(Pd,c)?null:(Pd=c,a=T.getPooled(Md.select,Od,a,b),a.type=\"select\",a.target=Nd,Ab(a),a)}\n\tvar Sd={eventTypes:Md,extractEvents:function(a,b,c,d){var e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument,f;if(!(f=!e)){a:{e=Hd(e);f=Sa.onSelect;for(var g=0;g<f.length;g++){var h=f[g];if(!e.hasOwnProperty(h)||!e[h]){e=!1;break a}}e=!0}f=!e}if(f)return null;e=b?qb(b):window;switch(a){case \"topFocus\":if(vc(e)||\"true\"===e.contentEditable)Nd=e,Od=b,Pd=null;break;case \"topBlur\":Pd=Od=Nd=null;break;case \"topMouseDown\":Qd=!0;break;case \"topContextMenu\":case \"topMouseUp\":return Qd=!1,Rd(c,d);case \"topSelectionChange\":if(Ld)break;\n\tcase \"topKeyDown\":case \"topKeyUp\":return Rd(c,d)}return null}};function Td(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(Td,{animationName:null,elapsedTime:null,pseudoElement:null});function Ud(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(Ud,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}});function Vd(a,b,c,d){return T.call(this,a,b,c,d)}bd.augmentClass(Vd,{relatedTarget:null});\n\tfunction Wd(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;return 32<=a||13===a?a:0}\n\tvar Xd={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Yd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",\n\t116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"};function Zd(a,b,c,d){return T.call(this,a,b,c,d)}\n\tbd.augmentClass(Zd,{key:function(a){if(a.key){var b=Xd[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=Wd(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Yd[a.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:ed,charCode:function(a){return\"keypress\"===a.type?Wd(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\n\ta.type?Wd(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}});function $d(a,b,c,d){return T.call(this,a,b,c,d)}fd.augmentClass($d,{dataTransfer:null});function ae(a,b,c,d){return T.call(this,a,b,c,d)}bd.augmentClass(ae,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:ed});function be(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(be,{propertyName:null,elapsedTime:null,pseudoElement:null});\n\tfunction ce(a,b,c,d){return T.call(this,a,b,c,d)}fd.augmentClass(ce,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},deltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null});var de={},ee={};\n\t\"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel\".split(\" \").forEach(function(a){var b=a[0].toUpperCase()+\n\ta.slice(1),c=\"on\"+b;b=\"top\"+b;c={phasedRegistrationNames:{bubbled:c,captured:c+\"Capture\"},dependencies:[b]};de[a]=c;ee[b]=c});\n\tvar fe={eventTypes:de,extractEvents:function(a,b,c,d){var e=ee[a];if(!e)return null;switch(a){case \"topKeyPress\":if(0===Wd(c))return null;case \"topKeyDown\":case \"topKeyUp\":a=Zd;break;case \"topBlur\":case \"topFocus\":a=Vd;break;case \"topClick\":if(2===c.button)return null;case \"topDoubleClick\":case \"topMouseDown\":case \"topMouseMove\":case \"topMouseUp\":case \"topMouseOut\":case \"topMouseOver\":case \"topContextMenu\":a=fd;break;case \"topDrag\":case \"topDragEnd\":case \"topDragEnter\":case \"topDragExit\":case \"topDragLeave\":case \"topDragOver\":case \"topDragStart\":case \"topDrop\":a=\n\t$d;break;case \"topTouchCancel\":case \"topTouchEnd\":case \"topTouchMove\":case \"topTouchStart\":a=ae;break;case \"topAnimationEnd\":case \"topAnimationIteration\":case \"topAnimationStart\":a=Td;break;case \"topTransitionEnd\":a=be;break;case \"topScroll\":a=bd;break;case \"topWheel\":a=ce;break;case \"topCopy\":case \"topCut\":case \"topPaste\":a=Ud;break;default:a=T}b=a.getPooled(e,b,c,d);Ab(b);return b}};sd=function(a,b,c,d){a=jb(a,b,c,d);kb(a);lb(!1)};hb.injectEventPluginOrder(\"ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \"));\n\tWa=sb.getFiberCurrentPropsFromNode;Xa=sb.getInstanceFromNode;Ya=sb.getNodeFromInstance;hb.injectEventPluginsByName({SimpleEventPlugin:fe,EnterLeaveEventPlugin:hd,ChangeEventPlugin:ad,SelectEventPlugin:Sd,BeforeInputEventPlugin:ic});var ge=[],he=-1;function V(a){0>he||(a.current=ge[he],ge[he]=null,he--)}function W(a,b){he++;ge[he]=a.current;a.current=b}new Set;var ie={current:D},X={current:!1},je=D;function ke(a){return le(a)?je:ie.current}\n\tfunction me(a,b){var c=a.type.contextTypes;if(!c)return D;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function le(a){return 2===a.tag&&null!=a.type.childContextTypes}function ne(a){le(a)&&(V(X,a),V(ie,a))}\n\tfunction oe(a,b,c){null!=ie.cursor?E(\"168\"):void 0;W(ie,b,a);W(X,c,a)}function pe(a,b){var c=a.stateNode,d=a.type.childContextTypes;if(\"function\"!==typeof c.getChildContext)return b;c=c.getChildContext();for(var e in c)e in d?void 0:E(\"108\",jd(a)||\"Unknown\",e);return B({},b,c)}function qe(a){if(!le(a))return!1;var b=a.stateNode;b=b&&b.__reactInternalMemoizedMergedChildContext||D;je=ie.current;W(ie,b,a);W(X,X.current,a);return!0}\n\tfunction re(a,b){var c=a.stateNode;c?void 0:E(\"169\");if(b){var d=pe(a,je);c.__reactInternalMemoizedMergedChildContext=d;V(X,a);V(ie,a);W(ie,d,a)}else V(X,a);W(X,b,a)}\n\tfunction Y(a,b,c){this.tag=a;this.key=b;this.stateNode=this.type=null;this.sibling=this.child=this[\"return\"]=null;this.index=0;this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null;this.internalContextTag=c;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.expirationTime=0;this.alternate=null}\n\tfunction se(a,b,c){var d=a.alternate;null===d?(d=new Y(a.tag,a.key,a.internalContextTag),d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.effectTag=0,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null);d.expirationTime=c;d.pendingProps=b;d.child=a.child;d.memoizedProps=a.memoizedProps;d.memoizedState=a.memoizedState;d.updateQueue=a.updateQueue;d.sibling=a.sibling;d.index=a.index;d.ref=a.ref;return d}\n\tfunction te(a,b,c){var d=void 0,e=a.type,f=a.key;\"function\"===typeof e?(d=e.prototype&&e.prototype.isReactComponent?new Y(2,f,b):new Y(0,f,b),d.type=e,d.pendingProps=a.props):\"string\"===typeof e?(d=new Y(5,f,b),d.type=e,d.pendingProps=a.props):\"object\"===typeof e&&null!==e&&\"number\"===typeof e.tag?(d=e,d.pendingProps=a.props):E(\"130\",null==e?e:typeof e,\"\");d.expirationTime=c;return d}function ue(a,b,c,d){b=new Y(10,d,b);b.pendingProps=a;b.expirationTime=c;return b}\n\tfunction ve(a,b,c){b=new Y(6,null,b);b.pendingProps=a;b.expirationTime=c;return b}function we(a,b,c){b=new Y(7,a.key,b);b.type=a.handler;b.pendingProps=a;b.expirationTime=c;return b}function xe(a,b,c){a=new Y(9,null,b);a.expirationTime=c;return a}function ye(a,b,c){b=new Y(4,a.key,b);b.pendingProps=a.children||[];b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}var ze=null,Ae=null;\n\tfunction Be(a){return function(b){try{return a(b)}catch(c){}}}function Ce(a){if(\"undefined\"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);ze=Be(function(a){return b.onCommitFiberRoot(c,a)});Ae=Be(function(a){return b.onCommitFiberUnmount(c,a)})}catch(d){}return!0}function De(a){\"function\"===typeof ze&&ze(a)}function Ee(a){\"function\"===typeof Ae&&Ae(a)}\n\tfunction Fe(a){return{baseState:a,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1}}function Ge(a,b){null===a.last?a.first=a.last=b:(a.last.next=b,a.last=b);if(0===a.expirationTime||a.expirationTime>b.expirationTime)a.expirationTime=b.expirationTime}\n\tfunction He(a,b){var c=a.alternate,d=a.updateQueue;null===d&&(d=a.updateQueue=Fe(null));null!==c?(a=c.updateQueue,null===a&&(a=c.updateQueue=Fe(null))):a=null;a=a!==d?a:null;null===a?Ge(d,b):null===d.last||null===a.last?(Ge(d,b),Ge(a,b)):(Ge(d,b),a.last=b)}function Ie(a,b,c,d){a=a.partialState;return\"function\"===typeof a?a.call(b,c,d):a}\n\tfunction Je(a,b,c,d,e,f){null!==a&&a.updateQueue===c&&(c=b.updateQueue={baseState:c.baseState,expirationTime:c.expirationTime,first:c.first,last:c.last,isInitialized:c.isInitialized,callbackList:null,hasForceUpdate:!1});c.expirationTime=0;c.isInitialized?a=c.baseState:(a=c.baseState=b.memoizedState,c.isInitialized=!0);for(var g=!0,h=c.first,k=!1;null!==h;){var q=h.expirationTime;if(q>f){var v=c.expirationTime;if(0===v||v>q)c.expirationTime=q;k||(k=!0,c.baseState=a)}else{k||(c.first=h.next,null===\n\tc.first&&(c.last=null));if(h.isReplace)a=Ie(h,d,a,e),g=!0;else if(q=Ie(h,d,a,e))a=g?B({},a,q):B(a,q),g=!1;h.isForced&&(c.hasForceUpdate=!0);null!==h.callback&&(q=c.callbackList,null===q&&(q=c.callbackList=[]),q.push(h))}h=h.next}null!==c.callbackList?b.effectTag|=32:null!==c.first||c.hasForceUpdate||(b.updateQueue=null);k||(c.baseState=a);return a}\n\tfunction Ke(a,b){var c=a.callbackList;if(null!==c)for(a.callbackList=null,a=0;a<c.length;a++){var d=c[a],e=d.callback;d.callback=null;\"function\"!==typeof e?E(\"191\",e):void 0;e.call(b)}}\n\tfunction Le(a,b,c,d){function e(a,b){b.updater=f;a.stateNode=b;b._reactInternalFiber=a}var f={isMounted:ld,enqueueSetState:function(c,d,e){c=c._reactInternalFiber;e=void 0===e?null:e;var g=b(c);He(c,{expirationTime:g,partialState:d,callback:e,isReplace:!1,isForced:!1,nextCallback:null,next:null});a(c,g)},enqueueReplaceState:function(c,d,e){c=c._reactInternalFiber;e=void 0===e?null:e;var g=b(c);He(c,{expirationTime:g,partialState:d,callback:e,isReplace:!0,isForced:!1,nextCallback:null,next:null});\n\ta(c,g)},enqueueForceUpdate:function(c,d){c=c._reactInternalFiber;d=void 0===d?null:d;var e=b(c);He(c,{expirationTime:e,partialState:null,callback:d,isReplace:!1,isForced:!0,nextCallback:null,next:null});a(c,e)}};return{adoptClassInstance:e,constructClassInstance:function(a,b){var c=a.type,d=ke(a),f=2===a.tag&&null!=a.type.contextTypes,g=f?me(a,d):D;b=new c(b,g);e(a,b);f&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=d,a.__reactInternalMemoizedMaskedChildContext=g);return b},mountClassInstance:function(a,\n\tb){var c=a.alternate,d=a.stateNode,e=d.state||null,g=a.pendingProps;g?void 0:E(\"158\");var h=ke(a);d.props=g;d.state=a.memoizedState=e;d.refs=D;d.context=me(a,h);null!=a.type&&null!=a.type.prototype&&!0===a.type.prototype.unstable_isAsyncReactComponent&&(a.internalContextTag|=1);\"function\"===typeof d.componentWillMount&&(e=d.state,d.componentWillMount(),e!==d.state&&f.enqueueReplaceState(d,d.state,null),e=a.updateQueue,null!==e&&(d.state=Je(c,a,e,d,g,b)));\"function\"===typeof d.componentDidMount&&(a.effectTag|=\n\t4)},updateClassInstance:function(a,b,e){var g=b.stateNode;g.props=b.memoizedProps;g.state=b.memoizedState;var h=b.memoizedProps,k=b.pendingProps;k||(k=h,null==k?E(\"159\"):void 0);var u=g.context,z=ke(b);z=me(b,z);\"function\"!==typeof g.componentWillReceiveProps||h===k&&u===z||(u=g.state,g.componentWillReceiveProps(k,z),g.state!==u&&f.enqueueReplaceState(g,g.state,null));u=b.memoizedState;e=null!==b.updateQueue?Je(a,b,b.updateQueue,g,k,e):u;if(!(h!==k||u!==e||X.current||null!==b.updateQueue&&b.updateQueue.hasForceUpdate))return\"function\"!==\n\ttypeof g.componentDidUpdate||h===a.memoizedProps&&u===a.memoizedState||(b.effectTag|=4),!1;var G=k;if(null===h||null!==b.updateQueue&&b.updateQueue.hasForceUpdate)G=!0;else{var I=b.stateNode,L=b.type;G=\"function\"===typeof I.shouldComponentUpdate?I.shouldComponentUpdate(G,e,z):L.prototype&&L.prototype.isPureReactComponent?!ea(h,G)||!ea(u,e):!0}G?(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(k,e,z),\"function\"===typeof g.componentDidUpdate&&(b.effectTag|=4)):(\"function\"!==typeof g.componentDidUpdate||\n\th===a.memoizedProps&&u===a.memoizedState||(b.effectTag|=4),c(b,k),d(b,e));g.props=k;g.state=e;g.context=z;return G}}}var Qe=\"function\"===typeof Symbol&&Symbol[\"for\"],Re=Qe?Symbol[\"for\"](\"react.element\"):60103,Se=Qe?Symbol[\"for\"](\"react.call\"):60104,Te=Qe?Symbol[\"for\"](\"react.return\"):60105,Ue=Qe?Symbol[\"for\"](\"react.portal\"):60106,Ve=Qe?Symbol[\"for\"](\"react.fragment\"):60107,We=\"function\"===typeof Symbol&&Symbol.iterator;\n\tfunction Xe(a){if(null===a||\"undefined\"===typeof a)return null;a=We&&a[We]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ye=Array.isArray;\n\tfunction Ze(a,b){var c=b.ref;if(null!==c&&\"function\"!==typeof c){if(b._owner){b=b._owner;var d=void 0;b&&(2!==b.tag?E(\"110\"):void 0,d=b.stateNode);d?void 0:E(\"147\",c);var e=\"\"+c;if(null!==a&&null!==a.ref&&a.ref._stringRef===e)return a.ref;a=function(a){var b=d.refs===D?d.refs={}:d.refs;null===a?delete b[e]:b[e]=a};a._stringRef=e;return a}\"string\"!==typeof c?E(\"148\"):void 0;b._owner?void 0:E(\"149\",c)}return c}\n\tfunction $e(a,b){\"textarea\"!==a.type&&E(\"31\",\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b,\"\")}\n\tfunction af(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){a=se(a,b,c);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=\n\t2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=ve(c,a.internalContextTag,d),b[\"return\"]=a,b;b=e(b,c,d);b[\"return\"]=a;return b}function k(a,b,c,d){if(null!==b&&b.type===c.type)return d=e(b,c.props,d),d.ref=Ze(b,c),d[\"return\"]=a,d;d=te(c,a.internalContextTag,d);d.ref=Ze(b,c);d[\"return\"]=a;return d}function q(a,b,c,d){if(null===b||7!==b.tag)return b=we(c,a.internalContextTag,d),b[\"return\"]=a,b;b=e(b,c,d);\n\tb[\"return\"]=a;return b}function v(a,b,c,d){if(null===b||9!==b.tag)return b=xe(c,a.internalContextTag,d),b.type=c.value,b[\"return\"]=a,b;b=e(b,null,d);b.type=c.value;b[\"return\"]=a;return b}function y(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=ye(c,a.internalContextTag,d),b[\"return\"]=a,b;b=e(b,c.children||[],d);b[\"return\"]=a;return b}function u(a,b,c,d,f){if(null===b||10!==b.tag)return b=ue(c,a.internalContextTag,\n\td,f),b[\"return\"]=a,b;b=e(b,c,d);b[\"return\"]=a;return b}function z(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=ve(\"\"+b,a.internalContextTag,c),b[\"return\"]=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case Re:if(b.type===Ve)return b=ue(b.props.children,a.internalContextTag,c,b.key),b[\"return\"]=a,b;c=te(b,a.internalContextTag,c);c.ref=Ze(null,b);c[\"return\"]=a;return c;case Se:return b=we(b,a.internalContextTag,c),b[\"return\"]=a,b;case Te:return c=xe(b,a.internalContextTag,\n\tc),c.type=b.value,c[\"return\"]=a,c;case Ue:return b=ye(b,a.internalContextTag,c),b[\"return\"]=a,b}if(Ye(b)||Xe(b))return b=ue(b,a.internalContextTag,c,null),b[\"return\"]=a,b;$e(a,b)}return null}function G(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case Re:return c.key===e?c.type===Ve?u(a,b,c.props.children,d,e):k(a,b,c,d):null;case Se:return c.key===e?q(a,b,c,d):null;case Te:return null===\n\te?v(a,b,c,d):null;case Ue:return c.key===e?y(a,b,c,d):null}if(Ye(c)||Xe(c))return null!==e?null:u(a,b,c,d,null);$e(a,c)}return null}function I(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case Re:return a=a.get(null===d.key?c:d.key)||null,d.type===Ve?u(b,a,d.props.children,e,d.key):k(b,a,d,e);case Se:return a=a.get(null===d.key?c:d.key)||null,q(b,a,d,e);case Te:return a=a.get(c)||null,v(b,a,d,e);case Ue:return a=\n\ta.get(null===d.key?c:d.key)||null,y(b,a,d,e)}if(Ye(d)||Xe(d))return a=a.get(c)||null,u(b,a,d,e,null);$e(b,d)}return null}function L(e,g,m,A){for(var h=null,r=null,n=g,w=g=0,k=null;null!==n&&w<m.length;w++){n.index>w?(k=n,n=null):k=n.sibling;var x=G(e,n,m[w],A);if(null===x){null===n&&(n=k);break}a&&n&&null===x.alternate&&b(e,n);g=f(x,g,w);null===r?h=x:r.sibling=x;r=x;n=k}if(w===m.length)return c(e,n),h;if(null===n){for(;w<m.length;w++)if(n=z(e,m[w],A))g=f(n,g,w),null===r?h=n:r.sibling=n,r=n;return h}for(n=\n\td(e,n);w<m.length;w++)if(k=I(n,e,w,m[w],A)){if(a&&null!==k.alternate)n[\"delete\"](null===k.key?w:k.key);g=f(k,g,w);null===r?h=k:r.sibling=k;r=k}a&&n.forEach(function(a){return b(e,a)});return h}function N(e,g,m,A){var h=Xe(m);\"function\"!==typeof h?E(\"150\"):void 0;m=h.call(m);null==m?E(\"151\"):void 0;for(var r=h=null,n=g,w=g=0,k=null,x=m.next();null!==n&&!x.done;w++,x=m.next()){n.index>w?(k=n,n=null):k=n.sibling;var J=G(e,n,x.value,A);if(null===J){n||(n=k);break}a&&n&&null===J.alternate&&b(e,n);g=f(J,\n\tg,w);null===r?h=J:r.sibling=J;r=J;n=k}if(x.done)return c(e,n),h;if(null===n){for(;!x.done;w++,x=m.next())x=z(e,x.value,A),null!==x&&(g=f(x,g,w),null===r?h=x:r.sibling=x,r=x);return h}for(n=d(e,n);!x.done;w++,x=m.next())if(x=I(n,e,w,x.value,A),null!==x){if(a&&null!==x.alternate)n[\"delete\"](null===x.key?w:x.key);g=f(x,g,w);null===r?h=x:r.sibling=x;r=x}a&&n.forEach(function(a){return b(e,a)});return h}return function(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===Ve&&null===f.key&&(f=f.props.children);\n\tvar m=\"object\"===typeof f&&null!==f;if(m)switch(f.$$typeof){case Re:a:{var r=f.key;for(m=d;null!==m;){if(m.key===r)if(10===m.tag?f.type===Ve:m.type===f.type){c(a,m.sibling);d=e(m,f.type===Ve?f.props.children:f.props,h);d.ref=Ze(m,f);d[\"return\"]=a;a=d;break a}else{c(a,m);break}else b(a,m);m=m.sibling}f.type===Ve?(d=ue(f.props.children,a.internalContextTag,h,f.key),d[\"return\"]=a,a=d):(h=te(f,a.internalContextTag,h),h.ref=Ze(d,f),h[\"return\"]=a,a=h)}return g(a);case Se:a:{for(m=f.key;null!==d;){if(d.key===\n\tm)if(7===d.tag){c(a,d.sibling);d=e(d,f,h);d[\"return\"]=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=we(f,a.internalContextTag,h);d[\"return\"]=a;a=d}return g(a);case Te:a:{if(null!==d)if(9===d.tag){c(a,d.sibling);d=e(d,null,h);d.type=f.value;d[\"return\"]=a;a=d;break a}else c(a,d);d=xe(f,a.internalContextTag,h);d.type=f.value;d[\"return\"]=a;a=d}return g(a);case Ue:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===\n\tf.implementation){c(a,d.sibling);d=e(d,f.children||[],h);d[\"return\"]=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=ye(f,a.internalContextTag,h);d[\"return\"]=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f,h)):(c(a,d),d=ve(f,a.internalContextTag,h)),d[\"return\"]=a,a=d,g(a);if(Ye(f))return L(a,d,f,h);if(Xe(f))return N(a,d,f,h);m&&$e(a,f);if(\"undefined\"===typeof f)switch(a.tag){case 2:case 1:h=a.type,E(\"152\",h.displayName||\n\th.name||\"Component\")}return c(a,d)}}var bf=af(!0),cf=af(!1);\n\tfunction df(a,b,c,d,e){function f(a,b,c){var d=b.expirationTime;b.child=null===a?cf(b,null,c,d):bf(b,a.child,c,d)}function g(a,b){var c=b.ref;null===c||a&&a.ref===c||(b.effectTag|=128)}function h(a,b,c,d){g(a,b);if(!c)return d&&re(b,!1),q(a,b);c=b.stateNode;id.current=b;var e=c.render();b.effectTag|=1;f(a,b,e);b.memoizedState=c.state;b.memoizedProps=c.props;d&&re(b,!0);return b.child}function k(a){var b=a.stateNode;b.pendingContext?oe(a,b.pendingContext,b.pendingContext!==b.context):b.context&&oe(a,\n\tb.context,!1);I(a,b.containerInfo)}function q(a,b){null!==a&&b.child!==a.child?E(\"153\"):void 0;if(null!==b.child){a=b.child;var c=se(a,a.pendingProps,a.expirationTime);b.child=c;for(c[\"return\"]=b;null!==a.sibling;)a=a.sibling,c=c.sibling=se(a,a.pendingProps,a.expirationTime),c[\"return\"]=b;c.sibling=null}return b.child}function v(a,b){switch(b.tag){case 3:k(b);break;case 2:qe(b);break;case 4:I(b,b.stateNode.containerInfo)}return null}var y=a.shouldSetTextContent,u=a.useSyncScheduling,z=a.shouldDeprioritizeSubtree,\n\tG=b.pushHostContext,I=b.pushHostContainer,L=c.enterHydrationState,N=c.resetHydrationState,J=c.tryToClaimNextHydratableInstance;a=Le(d,e,function(a,b){a.memoizedProps=b},function(a,b){a.memoizedState=b});var w=a.adoptClassInstance,m=a.constructClassInstance,A=a.mountClassInstance,Ob=a.updateClassInstance;return{beginWork:function(a,b,c){if(0===b.expirationTime||b.expirationTime>c)return v(a,b);switch(b.tag){case 0:null!==a?E(\"155\"):void 0;var d=b.type,e=b.pendingProps,r=ke(b);r=me(b,r);d=d(e,r);b.effectTag|=\n\t1;\"object\"===typeof d&&null!==d&&\"function\"===typeof d.render?(b.tag=2,e=qe(b),w(b,d),A(b,c),b=h(a,b,!0,e)):(b.tag=1,f(a,b,d),b.memoizedProps=e,b=b.child);return b;case 1:a:{e=b.type;c=b.pendingProps;d=b.memoizedProps;if(X.current)null===c&&(c=d);else if(null===c||d===c){b=q(a,b);break a}d=ke(b);d=me(b,d);e=e(c,d);b.effectTag|=1;f(a,b,e);b.memoizedProps=c;b=b.child}return b;case 2:return e=qe(b),d=void 0,null===a?b.stateNode?E(\"153\"):(m(b,b.pendingProps),A(b,c),d=!0):d=Ob(a,b,c),h(a,b,d,e);case 3:return k(b),\n\te=b.updateQueue,null!==e?(d=b.memoizedState,e=Je(a,b,e,null,null,c),d===e?(N(),b=q(a,b)):(d=e.element,r=b.stateNode,(null===a||null===a.child)&&r.hydrate&&L(b)?(b.effectTag|=2,b.child=cf(b,null,d,c)):(N(),f(a,b,d)),b.memoizedState=e,b=b.child)):(N(),b=q(a,b)),b;case 5:G(b);null===a&&J(b);e=b.type;var n=b.memoizedProps;d=b.pendingProps;null===d&&(d=n,null===d?E(\"154\"):void 0);r=null!==a?a.memoizedProps:null;X.current||null!==d&&n!==d?(n=d.children,y(e,d)?n=null:r&&y(e,r)&&(b.effectTag|=16),g(a,b),\n\t2147483647!==c&&!u&&z(e,d)?(b.expirationTime=2147483647,b=null):(f(a,b,n),b.memoizedProps=d,b=b.child)):b=q(a,b);return b;case 6:return null===a&&J(b),a=b.pendingProps,null===a&&(a=b.memoizedProps),b.memoizedProps=a,null;case 8:b.tag=7;case 7:e=b.pendingProps;if(X.current)null===e&&(e=a&&a.memoizedProps,null===e?E(\"154\"):void 0);else if(null===e||b.memoizedProps===e)e=b.memoizedProps;d=e.children;b.stateNode=null===a?cf(b,b.stateNode,d,c):bf(b,b.stateNode,d,c);b.memoizedProps=e;return b.stateNode;\n\tcase 9:return null;case 4:a:{I(b,b.stateNode.containerInfo);e=b.pendingProps;if(X.current)null===e&&(e=a&&a.memoizedProps,null==e?E(\"154\"):void 0);else if(null===e||b.memoizedProps===e){b=q(a,b);break a}null===a?b.child=bf(b,null,e,c):f(a,b,e);b.memoizedProps=e;b=b.child}return b;case 10:a:{c=b.pendingProps;if(X.current)null===c&&(c=b.memoizedProps);else if(null===c||b.memoizedProps===c){b=q(a,b);break a}f(a,b,c);b.memoizedProps=c;b=b.child}return b;default:E(\"156\")}},beginFailedWork:function(a,b,\n\tc){switch(b.tag){case 2:qe(b);break;case 3:k(b);break;default:E(\"157\")}b.effectTag|=64;null===a?b.child=null:b.child!==a.child&&(b.child=a.child);if(0===b.expirationTime||b.expirationTime>c)return v(a,b);b.firstEffect=null;b.lastEffect=null;b.child=null===a?cf(b,null,null,c):bf(b,a.child,null,c);2===b.tag&&(a=b.stateNode,b.memoizedProps=a.props,b.memoizedState=a.state);return b.child}}}\n\tfunction ef(a,b,c){function d(a){a.effectTag|=4}var e=a.createInstance,f=a.createTextInstance,g=a.appendInitialChild,h=a.finalizeInitialChildren,k=a.prepareUpdate,q=a.persistence,v=b.getRootHostContainer,y=b.popHostContext,u=b.getHostContext,z=b.popHostContainer,G=c.prepareToHydrateHostInstance,I=c.prepareToHydrateHostTextInstance,L=c.popHydrationState,N=void 0,J=void 0,w=void 0;a.mutation?(N=function(){},J=function(a,b,c){(b.updateQueue=c)&&d(b)},w=function(a,b,c,e){c!==e&&d(b)}):q?E(\"235\"):E(\"236\");\n\treturn{completeWork:function(a,b,c){var m=b.pendingProps;if(null===m)m=b.memoizedProps;else if(2147483647!==b.expirationTime||2147483647===c)b.pendingProps=null;switch(b.tag){case 1:return null;case 2:return ne(b),null;case 3:z(b);V(X,b);V(ie,b);m=b.stateNode;m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null);if(null===a||null===a.child)L(b),b.effectTag&=-3;N(b);return null;case 5:y(b);c=v();var A=b.type;if(null!==a&&null!=b.stateNode){var p=a.memoizedProps,q=b.stateNode,x=u();q=\n\tk(q,A,p,m,c,x);J(a,b,q,A,p,m,c);a.ref!==b.ref&&(b.effectTag|=128)}else{if(!m)return null===b.stateNode?E(\"166\"):void 0,null;a=u();if(L(b))G(b,c,a)&&d(b);else{a=e(A,m,c,a,b);a:for(p=b.child;null!==p;){if(5===p.tag||6===p.tag)g(a,p.stateNode);else if(4!==p.tag&&null!==p.child){p.child[\"return\"]=p;p=p.child;continue}if(p===b)break;for(;null===p.sibling;){if(null===p[\"return\"]||p[\"return\"]===b)break a;p=p[\"return\"]}p.sibling[\"return\"]=p[\"return\"];p=p.sibling}h(a,A,m,c)&&d(b);b.stateNode=a}null!==b.ref&&\n\t(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)w(a,b,a.memoizedProps,m);else{if(\"string\"!==typeof m)return null===b.stateNode?E(\"166\"):void 0,null;a=v();c=u();L(b)?I(b)&&d(b):b.stateNode=f(m,a,c,b)}return null;case 7:(m=b.memoizedProps)?void 0:E(\"165\");b.tag=8;A=[];a:for((p=b.stateNode)&&(p[\"return\"]=b);null!==p;){if(5===p.tag||6===p.tag||4===p.tag)E(\"247\");else if(9===p.tag)A.push(p.type);else if(null!==p.child){p.child[\"return\"]=p;p=p.child;continue}for(;null===p.sibling;){if(null===\n\tp[\"return\"]||p[\"return\"]===b)break a;p=p[\"return\"]}p.sibling[\"return\"]=p[\"return\"];p=p.sibling}p=m.handler;m=p(m.props,A);b.child=bf(b,null!==a?a.child:null,m,c);return b.child;case 8:return b.tag=7,null;case 9:return null;case 10:return null;case 4:return z(b),N(b),null;case 0:E(\"167\");default:E(\"156\")}}}}\n\tfunction ff(a,b){function c(a){var c=a.ref;if(null!==c)try{c(null)}catch(A){b(a,A)}}function d(a){\"function\"===typeof Ee&&Ee(a);switch(a.tag){case 2:c(a);var d=a.stateNode;if(\"function\"===typeof d.componentWillUnmount)try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(A){b(a,A)}break;case 5:c(a);break;case 7:e(a.stateNode);break;case 4:k&&g(a)}}function e(a){for(var b=a;;)if(d(b),null===b.child||k&&4===b.tag){if(b===a)break;for(;null===b.sibling;){if(null===b[\"return\"]||\n\tb[\"return\"]===a)return;b=b[\"return\"]}b.sibling[\"return\"]=b[\"return\"];b=b.sibling}else b.child[\"return\"]=b,b=b.child}function f(a){return 5===a.tag||3===a.tag||4===a.tag}function g(a){for(var b=a,c=!1,f=void 0,g=void 0;;){if(!c){c=b[\"return\"];a:for(;;){null===c?E(\"160\"):void 0;switch(c.tag){case 5:f=c.stateNode;g=!1;break a;case 3:f=c.stateNode.containerInfo;g=!0;break a;case 4:f=c.stateNode.containerInfo;g=!0;break a}c=c[\"return\"]}c=!0}if(5===b.tag||6===b.tag)e(b),g?J(f,b.stateNode):N(f,b.stateNode);\n\telse if(4===b.tag?f=b.stateNode.containerInfo:d(b),null!==b.child){b.child[\"return\"]=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b[\"return\"]||b[\"return\"]===a)return;b=b[\"return\"];4===b.tag&&(c=!1)}b.sibling[\"return\"]=b[\"return\"];b=b.sibling}}var h=a.getPublicInstance,k=a.mutation;a=a.persistence;k||(a?E(\"235\"):E(\"236\"));var q=k.commitMount,v=k.commitUpdate,y=k.resetTextContent,u=k.commitTextUpdate,z=k.appendChild,G=k.appendChildToContainer,I=k.insertBefore,L=k.insertInContainerBefore,\n\tN=k.removeChild,J=k.removeChildFromContainer;return{commitResetTextContent:function(a){y(a.stateNode)},commitPlacement:function(a){a:{for(var b=a[\"return\"];null!==b;){if(f(b)){var c=b;break a}b=b[\"return\"]}E(\"160\");c=void 0}var d=b=void 0;switch(c.tag){case 5:b=c.stateNode;d=!1;break;case 3:b=c.stateNode.containerInfo;d=!0;break;case 4:b=c.stateNode.containerInfo;d=!0;break;default:E(\"161\")}c.effectTag&16&&(y(b),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c[\"return\"]||f(c[\"return\"])){c=\n\tnull;break a}c=c[\"return\"]}c.sibling[\"return\"]=c[\"return\"];for(c=c.sibling;5!==c.tag&&6!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;else c.child[\"return\"]=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}for(var e=a;;){if(5===e.tag||6===e.tag)c?d?L(b,e.stateNode,c):I(b,e.stateNode,c):d?G(b,e.stateNode):z(b,e.stateNode);else if(4!==e.tag&&null!==e.child){e.child[\"return\"]=e;e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e[\"return\"]||e[\"return\"]===\n\ta)return;e=e[\"return\"]}e.sibling[\"return\"]=e[\"return\"];e=e.sibling}},commitDeletion:function(a){g(a);a[\"return\"]=null;a.child=null;a.alternate&&(a.alternate.child=null,a.alternate[\"return\"]=null)},commitWork:function(a,b){switch(b.tag){case 2:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps;a=null!==a?a.memoizedProps:d;var e=b.type,f=b.updateQueue;b.updateQueue=null;null!==f&&v(c,f,e,a,d,b)}break;case 6:null===b.stateNode?E(\"162\"):void 0;c=b.memoizedProps;u(b.stateNode,null!==a?a.memoizedProps:\n\tc,c);break;case 3:break;default:E(\"163\")}},commitLifeCycles:function(a,b){switch(b.tag){case 2:var c=b.stateNode;if(b.effectTag&4)if(null===a)c.props=b.memoizedProps,c.state=b.memoizedState,c.componentDidMount();else{var d=a.memoizedProps;a=a.memoizedState;c.props=b.memoizedProps;c.state=b.memoizedState;c.componentDidUpdate(d,a)}b=b.updateQueue;null!==b&&Ke(b,c);break;case 3:c=b.updateQueue;null!==c&&Ke(c,null!==b.child?b.child.stateNode:null);break;case 5:c=b.stateNode;null===a&&b.effectTag&4&&q(c,\n\tb.type,b.memoizedProps,b);break;case 6:break;case 4:break;default:E(\"163\")}},commitAttachRef:function(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:b(h(c));break;default:b(c)}}},commitDetachRef:function(a){a=a.ref;null!==a&&a(null)}}}var gf={};\n\tfunction hf(a){function b(a){a===gf?E(\"174\"):void 0;return a}var c=a.getChildHostContext,d=a.getRootHostContext,e={current:gf},f={current:gf},g={current:gf};return{getHostContext:function(){return b(e.current)},getRootHostContainer:function(){return b(g.current)},popHostContainer:function(a){V(e,a);V(f,a);V(g,a)},popHostContext:function(a){f.current===a&&(V(e,a),V(f,a))},pushHostContainer:function(a,b){W(g,b,a);b=d(b);W(f,a,a);W(e,b,a)},pushHostContext:function(a){var d=b(g.current),h=b(e.current);\n\td=c(h,a.type,d);h!==d&&(W(f,a,a),W(e,d,a))},resetHostContainer:function(){e.current=gf;g.current=gf}}}\n\tfunction jf(a){function b(a,b){var c=new Y(5,null,0);c.type=\"DELETED\";c.stateNode=b;c[\"return\"]=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function c(a,b){switch(a.tag){case 5:return b=f(b,a.type,a.pendingProps),null!==b?(a.stateNode=b,!0):!1;case 6:return b=g(b,a.pendingProps),null!==b?(a.stateNode=b,!0):!1;default:return!1}}function d(a){for(a=a[\"return\"];null!==a&&5!==a.tag&&3!==a.tag;)a=a[\"return\"];y=a}var e=a.shouldSetTextContent;\n\ta=a.hydration;if(!a)return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){E(\"175\")},prepareToHydrateHostTextInstance:function(){E(\"176\")},popHydrationState:function(){return!1}};var f=a.canHydrateInstance,g=a.canHydrateTextInstance,h=a.getNextHydratableSibling,k=a.getFirstHydratableChild,q=a.hydrateInstance,v=a.hydrateTextInstance,y=null,u=null,z=!1;return{enterHydrationState:function(a){u=\n\tk(a.stateNode.containerInfo);y=a;return z=!0},resetHydrationState:function(){u=y=null;z=!1},tryToClaimNextHydratableInstance:function(a){if(z){var d=u;if(d){if(!c(a,d)){d=h(d);if(!d||!c(a,d)){a.effectTag|=2;z=!1;y=a;return}b(y,u)}y=a;u=k(d)}else a.effectTag|=2,z=!1,y=a}},prepareToHydrateHostInstance:function(a,b,c){b=q(a.stateNode,a.type,a.memoizedProps,b,c,a);a.updateQueue=b;return null!==b?!0:!1},prepareToHydrateHostTextInstance:function(a){return v(a.stateNode,a.memoizedProps,a)},popHydrationState:function(a){if(a!==\n\ty)return!1;if(!z)return d(a),z=!0,!1;var c=a.type;if(5!==a.tag||\"head\"!==c&&\"body\"!==c&&!e(c,a.memoizedProps))for(c=u;c;)b(a,c),c=h(c);d(a);u=y?h(a.stateNode):null;return!0}}}\n\tfunction kf(a){function b(a){Qb=ja=!0;var b=a.stateNode;b.current===a?E(\"177\"):void 0;b.isReadyForCommit=!1;id.current=null;if(1<a.effectTag)if(null!==a.lastEffect){a.lastEffect.nextEffect=a;var c=a.firstEffect}else c=a;else c=a.firstEffect;yg();for(t=c;null!==t;){var d=!1,e=void 0;try{for(;null!==t;){var f=t.effectTag;f&16&&zg(t);if(f&128){var g=t.alternate;null!==g&&Ag(g)}switch(f&-242){case 2:Ne(t);t.effectTag&=-3;break;case 6:Ne(t);t.effectTag&=-3;Oe(t.alternate,t);break;case 4:Oe(t.alternate,\n\tt);break;case 8:Sc=!0,Bg(t),Sc=!1}t=t.nextEffect}}catch(Tc){d=!0,e=Tc}d&&(null===t?E(\"178\"):void 0,h(t,e),null!==t&&(t=t.nextEffect))}Cg();b.current=a;for(t=c;null!==t;){c=!1;d=void 0;try{for(;null!==t;){var k=t.effectTag;k&36&&Dg(t.alternate,t);k&128&&Eg(t);if(k&64)switch(e=t,f=void 0,null!==R&&(f=R.get(e),R[\"delete\"](e),null==f&&null!==e.alternate&&(e=e.alternate,f=R.get(e),R[\"delete\"](e))),null==f?E(\"184\"):void 0,e.tag){case 2:e.stateNode.componentDidCatch(f.error,{componentStack:f.componentStack});\n\tbreak;case 3:null===ca&&(ca=f.error);break;default:E(\"157\")}var Qc=t.nextEffect;t.nextEffect=null;t=Qc}}catch(Tc){c=!0,d=Tc}c&&(null===t?E(\"178\"):void 0,h(t,d),null!==t&&(t=t.nextEffect))}ja=Qb=!1;\"function\"===typeof De&&De(a.stateNode);ha&&(ha.forEach(G),ha=null);null!==ca&&(a=ca,ca=null,Ob(a));b=b.current.expirationTime;0===b&&(qa=R=null);return b}function c(a){for(;;){var b=Fg(a.alternate,a,H),c=a[\"return\"],d=a.sibling;var e=a;if(2147483647===H||2147483647!==e.expirationTime){if(2!==e.tag&&3!==\n\te.tag)var f=0;else f=e.updateQueue,f=null===f?0:f.expirationTime;for(var g=e.child;null!==g;)0!==g.expirationTime&&(0===f||f>g.expirationTime)&&(f=g.expirationTime),g=g.sibling;e.expirationTime=f}if(null!==b)return b;null!==c&&(null===c.firstEffect&&(c.firstEffect=a.firstEffect),null!==a.lastEffect&&(null!==c.lastEffect&&(c.lastEffect.nextEffect=a.firstEffect),c.lastEffect=a.lastEffect),1<a.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=a:c.firstEffect=a,c.lastEffect=a));if(null!==d)return d;\n\tif(null!==c)a=c;else{a.stateNode.isReadyForCommit=!0;break}}return null}function d(a){var b=rg(a.alternate,a,H);null===b&&(b=c(a));id.current=null;return b}function e(a){var b=Gg(a.alternate,a,H);null===b&&(b=c(a));id.current=null;return b}function f(a){if(null!==R){if(!(0===H||H>a))if(H<=Uc)for(;null!==F;)F=k(F)?e(F):d(F);else for(;null!==F&&!A();)F=k(F)?e(F):d(F)}else if(!(0===H||H>a))if(H<=Uc)for(;null!==F;)F=d(F);else for(;null!==F&&!A();)F=d(F)}function g(a,b){ja?E(\"243\"):void 0;ja=!0;a.isReadyForCommit=\n\t!1;if(a!==ra||b!==H||null===F){for(;-1<he;)ge[he]=null,he--;je=D;ie.current=D;X.current=!1;x();ra=a;H=b;F=se(ra.current,null,b)}var c=!1,d=null;try{f(b)}catch(Rc){c=!0,d=Rc}for(;c;){if(eb){ca=d;break}var g=F;if(null===g)eb=!0;else{var k=h(g,d);null===k?E(\"183\"):void 0;if(!eb){try{c=k;d=b;for(k=c;null!==g;){switch(g.tag){case 2:ne(g);break;case 5:qg(g);break;case 3:p(g);break;case 4:p(g)}if(g===k||g.alternate===k)break;g=g[\"return\"]}F=e(c);f(d)}catch(Rc){c=!0;d=Rc;continue}break}}}b=ca;eb=ja=!1;ca=\n\tnull;null!==b&&Ob(b);return a.isReadyForCommit?a.current.alternate:null}function h(a,b){var c=id.current=null,d=!1,e=!1,f=null;if(3===a.tag)c=a,q(a)&&(eb=!0);else for(var g=a[\"return\"];null!==g&&null===c;){2===g.tag?\"function\"===typeof g.stateNode.componentDidCatch&&(d=!0,f=jd(g),c=g,e=!0):3===g.tag&&(c=g);if(q(g)){if(Sc||null!==ha&&(ha.has(g)||null!==g.alternate&&ha.has(g.alternate)))return null;c=null;e=!1}g=g[\"return\"]}if(null!==c){null===qa&&(qa=new Set);qa.add(c);var h=\"\";g=a;do{a:switch(g.tag){case 0:case 1:case 2:case 5:var k=\n\tg._debugOwner,Qc=g._debugSource;var m=jd(g);var n=null;k&&(n=jd(k));k=Qc;m=\"\\n    in \"+(m||\"Unknown\")+(k?\" (at \"+k.fileName.replace(/^.*[\\\\\\/]/,\"\")+\":\"+k.lineNumber+\")\":n?\" (created by \"+n+\")\":\"\");break a;default:m=\"\"}h+=m;g=g[\"return\"]}while(g);g=h;a=jd(a);null===R&&(R=new Map);b={componentName:a,componentStack:g,error:b,errorBoundary:d?c.stateNode:null,errorBoundaryFound:d,errorBoundaryName:f,willRetry:e};R.set(c,b);try{var p=b.error;p&&p.suppressReactErrorLogging||console.error(p)}catch(Vc){Vc&&\n\tVc.suppressReactErrorLogging||console.error(Vc)}Qb?(null===ha&&(ha=new Set),ha.add(c)):G(c);return c}null===ca&&(ca=b);return null}function k(a){return null!==R&&(R.has(a)||null!==a.alternate&&R.has(a.alternate))}function q(a){return null!==qa&&(qa.has(a)||null!==a.alternate&&qa.has(a.alternate))}function v(){return 20*(((I()+100)/20|0)+1)}function y(a){return 0!==ka?ka:ja?Qb?1:H:!Hg||a.internalContextTag&1?v():1}function u(a,b){return z(a,b,!1)}function z(a,b){for(;null!==a;){if(0===a.expirationTime||\n\ta.expirationTime>b)a.expirationTime=b;null!==a.alternate&&(0===a.alternate.expirationTime||a.alternate.expirationTime>b)&&(a.alternate.expirationTime=b);if(null===a[\"return\"])if(3===a.tag){var c=a.stateNode;!ja&&c===ra&&b<H&&(F=ra=null,H=0);var d=c,e=b;Rb>Ig&&E(\"185\");if(null===d.nextScheduledRoot)d.remainingExpirationTime=e,null===O?(sa=O=d,d.nextScheduledRoot=d):(O=O.nextScheduledRoot=d,O.nextScheduledRoot=sa);else{var f=d.remainingExpirationTime;if(0===f||e<f)d.remainingExpirationTime=e}Fa||(la?\n\tSb&&(ma=d,na=1,m(ma,na)):1===e?w(1,null):L(e));!ja&&c===ra&&b<H&&(F=ra=null,H=0)}else break;a=a[\"return\"]}}function G(a){z(a,1,!0)}function I(){return Uc=((Wc()-Pe)/10|0)+2}function L(a){if(0!==Tb){if(a>Tb)return;Jg(Xc)}var b=Wc()-Pe;Tb=a;Xc=Kg(J,{timeout:10*(a-2)-b})}function N(){var a=0,b=null;if(null!==O)for(var c=O,d=sa;null!==d;){var e=d.remainingExpirationTime;if(0===e){null===c||null===O?E(\"244\"):void 0;if(d===d.nextScheduledRoot){sa=O=d.nextScheduledRoot=null;break}else if(d===sa)sa=e=d.nextScheduledRoot,\n\tO.nextScheduledRoot=e,d.nextScheduledRoot=null;else if(d===O){O=c;O.nextScheduledRoot=sa;d.nextScheduledRoot=null;break}else c.nextScheduledRoot=d.nextScheduledRoot,d.nextScheduledRoot=null;d=c.nextScheduledRoot}else{if(0===a||e<a)a=e,b=d;if(d===O)break;c=d;d=d.nextScheduledRoot}}c=ma;null!==c&&c===b?Rb++:Rb=0;ma=b;na=a}function J(a){w(0,a)}function w(a,b){fb=b;for(N();null!==ma&&0!==na&&(0===a||na<=a)&&!Yc;)m(ma,na),N();null!==fb&&(Tb=0,Xc=-1);0!==na&&L(na);fb=null;Yc=!1;Rb=0;if(Ub)throw a=Zc,Zc=\n\tnull,Ub=!1,a;}function m(a,c){Fa?E(\"245\"):void 0;Fa=!0;if(c<=I()){var d=a.finishedWork;null!==d?(a.finishedWork=null,a.remainingExpirationTime=b(d)):(a.finishedWork=null,d=g(a,c),null!==d&&(a.remainingExpirationTime=b(d)))}else d=a.finishedWork,null!==d?(a.finishedWork=null,a.remainingExpirationTime=b(d)):(a.finishedWork=null,d=g(a,c),null!==d&&(A()?a.finishedWork=d:a.remainingExpirationTime=b(d)));Fa=!1}function A(){return null===fb||fb.timeRemaining()>Lg?!1:Yc=!0}function Ob(a){null===ma?E(\"246\"):\n\tvoid 0;ma.remainingExpirationTime=0;Ub||(Ub=!0,Zc=a)}var r=hf(a),n=jf(a),p=r.popHostContainer,qg=r.popHostContext,x=r.resetHostContainer,Me=df(a,r,n,u,y),rg=Me.beginWork,Gg=Me.beginFailedWork,Fg=ef(a,r,n).completeWork;r=ff(a,h);var zg=r.commitResetTextContent,Ne=r.commitPlacement,Bg=r.commitDeletion,Oe=r.commitWork,Dg=r.commitLifeCycles,Eg=r.commitAttachRef,Ag=r.commitDetachRef,Wc=a.now,Kg=a.scheduleDeferredCallback,Jg=a.cancelDeferredCallback,Hg=a.useSyncScheduling,yg=a.prepareForCommit,Cg=a.resetAfterCommit,\n\tPe=Wc(),Uc=2,ka=0,ja=!1,F=null,ra=null,H=0,t=null,R=null,qa=null,ha=null,ca=null,eb=!1,Qb=!1,Sc=!1,sa=null,O=null,Tb=0,Xc=-1,Fa=!1,ma=null,na=0,Yc=!1,Ub=!1,Zc=null,fb=null,la=!1,Sb=!1,Ig=1E3,Rb=0,Lg=1;return{computeAsyncExpiration:v,computeExpirationForFiber:y,scheduleWork:u,batchedUpdates:function(a,b){var c=la;la=!0;try{return a(b)}finally{(la=c)||Fa||w(1,null)}},unbatchedUpdates:function(a){if(la&&!Sb){Sb=!0;try{return a()}finally{Sb=!1}}return a()},flushSync:function(a){var b=la;la=!0;try{a:{var c=\n\tka;ka=1;try{var d=a();break a}finally{ka=c}d=void 0}return d}finally{la=b,Fa?E(\"187\"):void 0,w(1,null)}},deferredUpdates:function(a){var b=ka;ka=v();try{return a()}finally{ka=b}}}}\n\tfunction lf(a){function b(a){a=od(a);return null===a?null:a.stateNode}var c=a.getPublicInstance;a=kf(a);var d=a.computeAsyncExpiration,e=a.computeExpirationForFiber,f=a.scheduleWork;return{createContainer:function(a,b){var c=new Y(3,null,0);a={current:c,containerInfo:a,pendingChildren:null,remainingExpirationTime:0,isReadyForCommit:!1,finishedWork:null,context:null,pendingContext:null,hydrate:b,nextScheduledRoot:null};return c.stateNode=a},updateContainer:function(a,b,c,q){var g=b.current;if(c){c=\n\tc._reactInternalFiber;var h;b:{2===kd(c)&&2===c.tag?void 0:E(\"170\");for(h=c;3!==h.tag;){if(le(h)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}(h=h[\"return\"])?void 0:E(\"171\")}h=h.stateNode.context}c=le(c)?pe(c,h):h}else c=D;null===b.context?b.context=c:b.pendingContext=c;b=q;b=void 0===b?null:b;q=null!=a&&null!=a.type&&null!=a.type.prototype&&!0===a.type.prototype.unstable_isAsyncReactComponent?d():e(g);He(g,{expirationTime:q,partialState:{element:a},callback:b,isReplace:!1,isForced:!1,\n\tnextCallback:null,next:null});f(g,q)},batchedUpdates:a.batchedUpdates,unbatchedUpdates:a.unbatchedUpdates,deferredUpdates:a.deferredUpdates,flushSync:a.flushSync,getPublicRootInstance:function(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return c(a.child.stateNode);default:return a.child.stateNode}},findHostInstance:b,findHostInstanceWithNoPortals:function(a){a=pd(a);return null===a?null:a.stateNode},injectIntoDevTools:function(a){var c=a.findFiberByHostInstance;return Ce(B({},\n\ta,{findHostInstanceByFiber:function(a){return b(a)},findFiberByHostInstance:function(a){return c?c(a):null}}))}}}var mf=Object.freeze({default:lf}),nf=mf&&lf||mf,of=nf[\"default\"]?nf[\"default\"]:nf;function pf(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ue,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}var qf=\"object\"===typeof performance&&\"function\"===typeof performance.now,rf=void 0;rf=qf?function(){return performance.now()}:function(){return Date.now()};\n\tvar sf=void 0,tf=void 0;\n\tif(l.canUseDOM)if(\"function\"!==typeof requestIdleCallback||\"function\"!==typeof cancelIdleCallback){var uf=null,vf=!1,wf=-1,xf=!1,yf=0,zf=33,Af=33,Bf;Bf=qf?{didTimeout:!1,timeRemaining:function(){var a=yf-performance.now();return 0<a?a:0}}:{didTimeout:!1,timeRemaining:function(){var a=yf-Date.now();return 0<a?a:0}};var Cf=\"__reactIdleCallback$\"+Math.random().toString(36).slice(2);window.addEventListener(\"message\",function(a){if(a.source===window&&a.data===Cf){vf=!1;a=rf();if(0>=yf-a)if(-1!==wf&&wf<=\n\ta)Bf.didTimeout=!0;else{xf||(xf=!0,requestAnimationFrame(Df));return}else Bf.didTimeout=!1;wf=-1;a=uf;uf=null;null!==a&&a(Bf)}},!1);var Df=function(a){xf=!1;var b=a-yf+Af;b<Af&&zf<Af?(8>b&&(b=8),Af=b<zf?zf:b):zf=b;yf=a+Af;vf||(vf=!0,window.postMessage(Cf,\"*\"))};sf=function(a,b){uf=a;null!=b&&\"number\"===typeof b.timeout&&(wf=rf()+b.timeout);xf||(xf=!0,requestAnimationFrame(Df));return 0};tf=function(){uf=null;vf=!1;wf=-1}}else sf=window.requestIdleCallback,tf=window.cancelIdleCallback;else sf=function(a){return setTimeout(function(){a({timeRemaining:function(){return Infinity}})})},\n\ttf=function(a){clearTimeout(a)};var Ef=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,Ff={},Gf={};\n\tfunction Hf(a){if(Gf.hasOwnProperty(a))return!0;if(Ff.hasOwnProperty(a))return!1;if(Ef.test(a))return Gf[a]=!0;Ff[a]=!0;return!1}\n\tfunction If(a,b,c){var d=wa(b);if(d&&va(b,c)){var e=d.mutationMethod;e?e(a,c):null==c||d.hasBooleanValue&&!c||d.hasNumericValue&&isNaN(c)||d.hasPositiveNumericValue&&1>c||d.hasOverloadedBooleanValue&&!1===c?Jf(a,b):d.mustUseProperty?a[d.propertyName]=c:(b=d.attributeName,(e=d.attributeNamespace)?a.setAttributeNS(e,b,\"\"+c):d.hasBooleanValue||d.hasOverloadedBooleanValue&&!0===c?a.setAttribute(b,\"\"):a.setAttribute(b,\"\"+c))}else Kf(a,b,va(b,c)?c:null)}\n\tfunction Kf(a,b,c){Hf(b)&&(null==c?a.removeAttribute(b):a.setAttribute(b,\"\"+c))}function Jf(a,b){var c=wa(b);c?(b=c.mutationMethod)?b(a,void 0):c.mustUseProperty?a[c.propertyName]=c.hasBooleanValue?!1:\"\":a.removeAttribute(c.attributeName):a.removeAttribute(b)}\n\tfunction Lf(a,b){var c=b.value,d=b.checked;return B({type:void 0,step:void 0,min:void 0,max:void 0},b,{defaultChecked:void 0,defaultValue:void 0,value:null!=c?c:a._wrapperState.initialValue,checked:null!=d?d:a._wrapperState.initialChecked})}function Mf(a,b){var c=b.defaultValue;a._wrapperState={initialChecked:null!=b.checked?b.checked:b.defaultChecked,initialValue:null!=b.value?b.value:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}\n\tfunction Nf(a,b){b=b.checked;null!=b&&If(a,\"checked\",b)}function Of(a,b){Nf(a,b);var c=b.value;if(null!=c)if(0===c&&\"\"===a.value)a.value=\"0\";else if(\"number\"===b.type){if(b=parseFloat(a.value)||0,c!=b||c==b&&a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else null==b.value&&null!=b.defaultValue&&a.defaultValue!==\"\"+b.defaultValue&&(a.defaultValue=\"\"+b.defaultValue),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\n\tfunction Pf(a,b){switch(b.type){case \"submit\":case \"reset\":break;case \"color\":case \"date\":case \"datetime\":case \"datetime-local\":case \"month\":case \"time\":case \"week\":a.value=\"\";a.value=a.defaultValue;break;default:a.value=a.value}b=a.name;\"\"!==b&&(a.name=\"\");a.defaultChecked=!a.defaultChecked;a.defaultChecked=!a.defaultChecked;\"\"!==b&&(a.name=b)}function Qf(a){var b=\"\";aa.Children.forEach(a,function(a){null==a||\"string\"!==typeof a&&\"number\"!==typeof a||(b+=a)});return b}\n\tfunction Rf(a,b){a=B({children:void 0},b);if(b=Qf(b.children))a.children=b;return a}function Sf(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+c;b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\n\tfunction Tf(a,b){var c=b.value;a._wrapperState={initialValue:null!=c?c:b.defaultValue,wasMultiple:!!b.multiple}}function Uf(a,b){null!=b.dangerouslySetInnerHTML?E(\"91\"):void 0;return B({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function Vf(a,b){var c=b.value;null==c&&(c=b.defaultValue,b=b.children,null!=b&&(null!=c?E(\"92\"):void 0,Array.isArray(b)&&(1>=b.length?void 0:E(\"93\"),b=b[0]),c=\"\"+b),null==c&&(c=\"\"));a._wrapperState={initialValue:\"\"+c}}\n\tfunction Wf(a,b){var c=b.value;null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&(a.defaultValue=c));null!=b.defaultValue&&(a.defaultValue=b.defaultValue)}function Xf(a){var b=a.textContent;b===a._wrapperState.initialValue&&(a.value=b)}var Yf={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\n\tfunction Zf(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function $f(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?Zf(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\n\tvar ag=void 0,bg=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==Yf.svg||\"innerHTML\"in a)a.innerHTML=b;else{ag=ag||document.createElement(\"div\");ag.innerHTML=\"\\x3csvg\\x3e\"+b+\"\\x3c/svg\\x3e\";for(b=ag.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\n\tfunction cg(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\n\tvar dg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,\n\tstopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eg=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(dg).forEach(function(a){eg.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);dg[b]=dg[a]})});\n\tfunction fg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\");var e=c;var f=b[c];e=null==f||\"boolean\"===typeof f||\"\"===f?\"\":d||\"number\"!==typeof f||0===f||dg.hasOwnProperty(e)&&dg[e]?(\"\"+f).trim():f+\"px\";\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var gg=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\n\tfunction hg(a,b,c){b&&(gg[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML?E(\"137\",a,c()):void 0),null!=b.dangerouslySetInnerHTML&&(null!=b.children?E(\"60\"):void 0,\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML?void 0:E(\"61\")),null!=b.style&&\"object\"!==typeof b.style?E(\"62\",c()):void 0)}\n\tfunction ig(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var jg=Yf.html,kg=C.thatReturns(\"\");\n\tfunction lg(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Hd(a);b=Sa[b];for(var d=0;d<b.length;d++){var e=b[d];c.hasOwnProperty(e)&&c[e]||(\"topScroll\"===e?wd(\"topScroll\",\"scroll\",a):\"topFocus\"===e||\"topBlur\"===e?(wd(\"topFocus\",\"focus\",a),wd(\"topBlur\",\"blur\",a),c.topBlur=!0,c.topFocus=!0):\"topCancel\"===e?(yc(\"cancel\",!0)&&wd(\"topCancel\",\"cancel\",a),c.topCancel=!0):\"topClose\"===e?(yc(\"close\",!0)&&wd(\"topClose\",\"close\",a),c.topClose=!0):Dd.hasOwnProperty(e)&&U(e,Dd[e],a),c[e]=!0)}}\n\tvar mg={topAbort:\"abort\",topCanPlay:\"canplay\",topCanPlayThrough:\"canplaythrough\",topDurationChange:\"durationchange\",topEmptied:\"emptied\",topEncrypted:\"encrypted\",topEnded:\"ended\",topError:\"error\",topLoadedData:\"loadeddata\",topLoadedMetadata:\"loadedmetadata\",topLoadStart:\"loadstart\",topPause:\"pause\",topPlay:\"play\",topPlaying:\"playing\",topProgress:\"progress\",topRateChange:\"ratechange\",topSeeked:\"seeked\",topSeeking:\"seeking\",topStalled:\"stalled\",topSuspend:\"suspend\",topTimeUpdate:\"timeupdate\",topVolumeChange:\"volumechange\",\n\ttopWaiting:\"waiting\"};function ng(a,b,c,d){c=9===c.nodeType?c:c.ownerDocument;d===jg&&(d=Zf(a));d===jg?\"script\"===a?(a=c.createElement(\"div\"),a.innerHTML=\"\\x3cscript\\x3e\\x3c/script\\x3e\",a=a.removeChild(a.firstChild)):a=\"string\"===typeof b.is?c.createElement(a,{is:b.is}):c.createElement(a):a=c.createElementNS(d,a);return a}function og(a,b){return(9===b.nodeType?b:b.ownerDocument).createTextNode(a)}\n\tfunction pg(a,b,c,d){var e=ig(b,c);switch(b){case \"iframe\":case \"object\":U(\"topLoad\",\"load\",a);var f=c;break;case \"video\":case \"audio\":for(f in mg)mg.hasOwnProperty(f)&&U(f,mg[f],a);f=c;break;case \"source\":U(\"topError\",\"error\",a);f=c;break;case \"img\":case \"image\":U(\"topError\",\"error\",a);U(\"topLoad\",\"load\",a);f=c;break;case \"form\":U(\"topReset\",\"reset\",a);U(\"topSubmit\",\"submit\",a);f=c;break;case \"details\":U(\"topToggle\",\"toggle\",a);f=c;break;case \"input\":Mf(a,c);f=Lf(a,c);U(\"topInvalid\",\"invalid\",a);\n\tlg(d,\"onChange\");break;case \"option\":f=Rf(a,c);break;case \"select\":Tf(a,c);f=B({},c,{value:void 0});U(\"topInvalid\",\"invalid\",a);lg(d,\"onChange\");break;case \"textarea\":Vf(a,c);f=Uf(a,c);U(\"topInvalid\",\"invalid\",a);lg(d,\"onChange\");break;default:f=c}hg(b,f,kg);var g=f,h;for(h in g)if(g.hasOwnProperty(h)){var k=g[h];\"style\"===h?fg(a,k,kg):\"dangerouslySetInnerHTML\"===h?(k=k?k.__html:void 0,null!=k&&bg(a,k)):\"children\"===h?\"string\"===typeof k?(\"textarea\"!==b||\"\"!==k)&&cg(a,k):\"number\"===typeof k&&cg(a,\n\t\"\"+k):\"suppressContentEditableWarning\"!==h&&\"suppressHydrationWarning\"!==h&&\"autoFocus\"!==h&&(Ra.hasOwnProperty(h)?null!=k&&lg(d,h):e?Kf(a,h,k):null!=k&&If(a,h,k))}switch(b){case \"input\":Bc(a);Pf(a,c);break;case \"textarea\":Bc(a);Xf(a,c);break;case \"option\":null!=c.value&&a.setAttribute(\"value\",c.value);break;case \"select\":a.multiple=!!c.multiple;b=c.value;null!=b?Sf(a,!!c.multiple,b,!1):null!=c.defaultValue&&Sf(a,!!c.multiple,c.defaultValue,!0);break;default:\"function\"===typeof f.onClick&&(a.onclick=\n\tC)}}\n\tfunction sg(a,b,c,d,e){var f=null;switch(b){case \"input\":c=Lf(a,c);d=Lf(a,d);f=[];break;case \"option\":c=Rf(a,c);d=Rf(a,d);f=[];break;case \"select\":c=B({},c,{value:void 0});d=B({},d,{value:void 0});f=[];break;case \"textarea\":c=Uf(a,c);d=Uf(a,d);f=[];break;default:\"function\"!==typeof c.onClick&&\"function\"===typeof d.onClick&&(a.onclick=C)}hg(b,d,kg);var g,h;a=null;for(g in c)if(!d.hasOwnProperty(g)&&c.hasOwnProperty(g)&&null!=c[g])if(\"style\"===g)for(h in b=c[g],b)b.hasOwnProperty(h)&&(a||(a={}),a[h]=\n\t\"\");else\"dangerouslySetInnerHTML\"!==g&&\"children\"!==g&&\"suppressContentEditableWarning\"!==g&&\"suppressHydrationWarning\"!==g&&\"autoFocus\"!==g&&(Ra.hasOwnProperty(g)?f||(f=[]):(f=f||[]).push(g,null));for(g in d){var k=d[g];b=null!=c?c[g]:void 0;if(d.hasOwnProperty(g)&&k!==b&&(null!=k||null!=b))if(\"style\"===g)if(b){for(h in b)!b.hasOwnProperty(h)||k&&k.hasOwnProperty(h)||(a||(a={}),a[h]=\"\");for(h in k)k.hasOwnProperty(h)&&b[h]!==k[h]&&(a||(a={}),a[h]=k[h])}else a||(f||(f=[]),f.push(g,a)),a=k;else\"dangerouslySetInnerHTML\"===\n\tg?(k=k?k.__html:void 0,b=b?b.__html:void 0,null!=k&&b!==k&&(f=f||[]).push(g,\"\"+k)):\"children\"===g?b===k||\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(g,\"\"+k):\"suppressContentEditableWarning\"!==g&&\"suppressHydrationWarning\"!==g&&(Ra.hasOwnProperty(g)?(null!=k&&lg(e,g),f||b===k||(f=[])):(f=f||[]).push(g,k))}a&&(f=f||[]).push(\"style\",a);return f}\n\tfunction tg(a,b,c,d,e){\"input\"===c&&\"radio\"===e.type&&null!=e.name&&Nf(a,e);ig(c,d);d=ig(c,e);for(var f=0;f<b.length;f+=2){var g=b[f],h=b[f+1];\"style\"===g?fg(a,h,kg):\"dangerouslySetInnerHTML\"===g?bg(a,h):\"children\"===g?cg(a,h):d?null!=h?Kf(a,g,h):a.removeAttribute(g):null!=h?If(a,g,h):Jf(a,g)}switch(c){case \"input\":Of(a,e);break;case \"textarea\":Wf(a,e);break;case \"select\":a._wrapperState.initialValue=void 0,b=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,c=e.value,null!=c?Sf(a,\n\t!!e.multiple,c,!1):b!==!!e.multiple&&(null!=e.defaultValue?Sf(a,!!e.multiple,e.defaultValue,!0):Sf(a,!!e.multiple,e.multiple?[]:\"\",!1))}}\n\tfunction ug(a,b,c,d,e){switch(b){case \"iframe\":case \"object\":U(\"topLoad\",\"load\",a);break;case \"video\":case \"audio\":for(var f in mg)mg.hasOwnProperty(f)&&U(f,mg[f],a);break;case \"source\":U(\"topError\",\"error\",a);break;case \"img\":case \"image\":U(\"topError\",\"error\",a);U(\"topLoad\",\"load\",a);break;case \"form\":U(\"topReset\",\"reset\",a);U(\"topSubmit\",\"submit\",a);break;case \"details\":U(\"topToggle\",\"toggle\",a);break;case \"input\":Mf(a,c);U(\"topInvalid\",\"invalid\",a);lg(e,\"onChange\");break;case \"select\":Tf(a,c);\n\tU(\"topInvalid\",\"invalid\",a);lg(e,\"onChange\");break;case \"textarea\":Vf(a,c),U(\"topInvalid\",\"invalid\",a),lg(e,\"onChange\")}hg(b,c,kg);d=null;for(var g in c)c.hasOwnProperty(g)&&(f=c[g],\"children\"===g?\"string\"===typeof f?a.textContent!==f&&(d=[\"children\",f]):\"number\"===typeof f&&a.textContent!==\"\"+f&&(d=[\"children\",\"\"+f]):Ra.hasOwnProperty(g)&&null!=f&&lg(e,g));switch(b){case \"input\":Bc(a);Pf(a,c);break;case \"textarea\":Bc(a);Xf(a,c);break;case \"select\":case \"option\":break;default:\"function\"===typeof c.onClick&&\n\t(a.onclick=C)}return d}function vg(a,b){return a.nodeValue!==b}\n\tvar wg=Object.freeze({createElement:ng,createTextNode:og,setInitialProperties:pg,diffProperties:sg,updateProperties:tg,diffHydratedProperties:ug,diffHydratedText:vg,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(a,b,c){switch(b){case \"input\":Of(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=\n\tc.parentNode;c=c.querySelectorAll(\"input[name\\x3d\"+JSON.stringify(\"\"+b)+'][type\\x3d\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=rb(d);e?void 0:E(\"90\");Cc(d);Of(d,e)}}}break;case \"textarea\":Wf(a,c);break;case \"select\":b=c.value,null!=b&&Sf(a,!!c.multiple,b,!1)}}});nc.injectFiberControlledHostComponent(wg);var xg=null,Mg=null;function Ng(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\n\tfunction Og(a){a=a?9===a.nodeType?a.documentElement:a.firstChild:null;return!(!a||1!==a.nodeType||!a.hasAttribute(\"data-reactroot\"))}\n\tvar Z=of({getRootHostContext:function(a){var b=a.nodeType;switch(b){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:$f(null,\"\");break;default:b=8===b?a.parentNode:a,a=b.namespaceURI||null,b=b.tagName,a=$f(a,b)}return a},getChildHostContext:function(a,b){return $f(a,b)},getPublicInstance:function(a){return a},prepareForCommit:function(){xg=td;var a=da();if(Kd(a)){if(\"selectionStart\"in a)var b={start:a.selectionStart,end:a.selectionEnd};else a:{var c=window.getSelection&&window.getSelection();\n\tif(c&&0!==c.rangeCount){b=c.anchorNode;var d=c.anchorOffset,e=c.focusNode;c=c.focusOffset;try{b.nodeType,e.nodeType}catch(z){b=null;break a}var f=0,g=-1,h=-1,k=0,q=0,v=a,y=null;b:for(;;){for(var u;;){v!==b||0!==d&&3!==v.nodeType||(g=f+d);v!==e||0!==c&&3!==v.nodeType||(h=f+c);3===v.nodeType&&(f+=v.nodeValue.length);if(null===(u=v.firstChild))break;y=v;v=u}for(;;){if(v===a)break b;y===b&&++k===d&&(g=f);y===e&&++q===c&&(h=f);if(null!==(u=v.nextSibling))break;v=y;y=v.parentNode}v=u}b=-1===g||-1===h?null:\n\t{start:g,end:h}}else b=null}b=b||{start:0,end:0}}else b=null;Mg={focusedElem:a,selectionRange:b};ud(!1)},resetAfterCommit:function(){var a=Mg,b=da(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&fa(document.documentElement,c)){if(Kd(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(window.getSelection){b=window.getSelection();var e=c[Eb()].length;a=Math.min(d.start,e);d=void 0===d.end?a:Math.min(d.end,e);!b.extend&&a>\n\td&&(e=d,d=a,a=e);e=Jd(c,a);var f=Jd(c,d);if(e&&f&&(1!==b.rangeCount||b.anchorNode!==e.node||b.anchorOffset!==e.offset||b.focusNode!==f.node||b.focusOffset!==f.offset)){var g=document.createRange();g.setStart(e.node,e.offset);b.removeAllRanges();a>d?(b.addRange(g),b.extend(f.node,f.offset)):(g.setEnd(f.node,f.offset),b.addRange(g))}}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});ia(c);for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=\n\ta.top}Mg=null;ud(xg);xg=null},createInstance:function(a,b,c,d,e){a=ng(a,b,c,d);a[Q]=e;a[ob]=b;return a},appendInitialChild:function(a,b){a.appendChild(b)},finalizeInitialChildren:function(a,b,c,d){pg(a,b,c,d);a:{switch(b){case \"button\":case \"input\":case \"select\":case \"textarea\":a=!!c.autoFocus;break a}a=!1}return a},prepareUpdate:function(a,b,c,d,e){return sg(a,b,c,d,e)},shouldSetTextContent:function(a,b){return\"textarea\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===\n\ttypeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&\"string\"===typeof b.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(a,b){return!!b.hidden},createTextInstance:function(a,b,c,d){a=og(a,b);a[Q]=d;return a},now:rf,mutation:{commitMount:function(a){a.focus()},commitUpdate:function(a,b,c,d,e){a[ob]=e;tg(a,b,c,d,e)},resetTextContent:function(a){a.textContent=\"\"},commitTextUpdate:function(a,b,c){a.nodeValue=c},appendChild:function(a,b){a.appendChild(b)},appendChildToContainer:function(a,\n\tb){8===a.nodeType?a.parentNode.insertBefore(b,a):a.appendChild(b)},insertBefore:function(a,b,c){a.insertBefore(b,c)},insertInContainerBefore:function(a,b,c){8===a.nodeType?a.parentNode.insertBefore(b,c):a.insertBefore(b,c)},removeChild:function(a,b){a.removeChild(b)},removeChildFromContainer:function(a,b){8===a.nodeType?a.parentNode.removeChild(b):a.removeChild(b)}},hydration:{canHydrateInstance:function(a,b){return 1!==a.nodeType||b.toLowerCase()!==a.nodeName.toLowerCase()?null:a},canHydrateTextInstance:function(a,\n\tb){return\"\"===b||3!==a.nodeType?null:a},getNextHydratableSibling:function(a){for(a=a.nextSibling;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a},getFirstHydratableChild:function(a){for(a=a.firstChild;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a},hydrateInstance:function(a,b,c,d,e,f){a[Q]=f;a[ob]=c;return ug(a,b,c,e,d)},hydrateTextInstance:function(a,b,c){a[Q]=c;return vg(a,b)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},\n\tdidNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:sf,cancelDeferredCallback:tf,useSyncScheduling:!0});rc=Z.batchedUpdates;\n\tfunction Pg(a,b,c,d,e){Ng(c)?void 0:E(\"200\");var f=c._reactRootContainer;if(f)Z.updateContainer(b,f,a,e);else{d=d||Og(c);if(!d)for(f=void 0;f=c.lastChild;)c.removeChild(f);var g=Z.createContainer(c,d);f=c._reactRootContainer=g;Z.unbatchedUpdates(function(){Z.updateContainer(b,g,a,e)})}return Z.getPublicRootInstance(f)}function Qg(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;Ng(b)?void 0:E(\"200\");return pf(a,b,null,c)}\n\tfunction Rg(a,b){this._reactRootContainer=Z.createContainer(a,b)}Rg.prototype.render=function(a,b){Z.updateContainer(a,this._reactRootContainer,null,b)};Rg.prototype.unmount=function(a){Z.updateContainer(null,this._reactRootContainer,null,a)};\n\tvar Sg={createPortal:Qg,findDOMNode:function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(b)return Z.findHostInstance(b);\"function\"===typeof a.render?E(\"188\"):E(\"213\",Object.keys(a))},hydrate:function(a,b,c){return Pg(null,a,b,!0,c)},render:function(a,b,c){return Pg(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){null==a||void 0===a._reactInternalFiber?E(\"38\"):void 0;return Pg(a,b,c,!1,d)},unmountComponentAtNode:function(a){Ng(a)?void 0:\n\tE(\"40\");return a._reactRootContainer?(Z.unbatchedUpdates(function(){Pg(null,null,a,!1,function(){a._reactRootContainer=null})}),!0):!1},unstable_createPortal:Qg,unstable_batchedUpdates:tc,unstable_deferredUpdates:Z.deferredUpdates,flushSync:Z.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:mb,EventPluginRegistry:Va,EventPropagators:Cb,ReactControlledComponent:qc,ReactDOMComponentTree:sb,ReactDOMEventListener:xd}};\n\tZ.injectIntoDevTools({findFiberByHostInstance:pb,bundleType:0,version:\"16.2.0\",rendererPackageName:\"react-dom\"});var Tg=Object.freeze({default:Sg}),Ug=Tg&&Sg||Tg;module.exports=Ug[\"default\"]?Ug[\"default\"]:Ug;\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\t/** @license React v16.2.0\n\t * react.production.min.js\n\t *\n\t * Copyright (c) 2013-present, Facebook, Inc.\n\t *\n\t * This source code is licensed under the MIT license found in the\n\t * LICENSE file in the root directory of this source tree.\n\t */\n\t\n\t'use strict';var m=__webpack_require__(7),n=__webpack_require__(6),p=__webpack_require__(5),q=\"function\"===typeof Symbol&&Symbol[\"for\"],r=q?Symbol[\"for\"](\"react.element\"):60103,t=q?Symbol[\"for\"](\"react.call\"):60104,u=q?Symbol[\"for\"](\"react.return\"):60105,v=q?Symbol[\"for\"](\"react.portal\"):60106,w=q?Symbol[\"for\"](\"react.fragment\"):60107,x=\"function\"===typeof Symbol&&Symbol.iterator;\n\tfunction y(a){for(var b=arguments.length-1,e=\"Minified React error #\"+a+\"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant\\x3d\"+a,c=0;c<b;c++)e+=\"\\x26args[]\\x3d\"+encodeURIComponent(arguments[c+1]);b=Error(e+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\");b.name=\"Invariant Violation\";b.framesToPop=1;throw b;}\n\tvar z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function A(a,b,e){this.props=a;this.context=b;this.refs=n;this.updater=e||z}A.prototype.isReactComponent={};A.prototype.setState=function(a,b){\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a?y(\"85\"):void 0;this.updater.enqueueSetState(this,a,b,\"setState\")};A.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\n\tfunction B(a,b,e){this.props=a;this.context=b;this.refs=n;this.updater=e||z}function C(){}C.prototype=A.prototype;var D=B.prototype=new C;D.constructor=B;m(D,A.prototype);D.isPureReactComponent=!0;function E(a,b,e){this.props=a;this.context=b;this.refs=n;this.updater=e||z}var F=E.prototype=new C;F.constructor=E;m(F,A.prototype);F.unstable_isAsyncReactComponent=!0;F.render=function(){return this.props.children};var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\n\tfunction J(a,b,e){var c,d={},g=null,k=null;if(null!=b)for(c in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)H.call(b,c)&&!I.hasOwnProperty(c)&&(d[c]=b[c]);var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){for(var h=Array(f),l=0;l<f;l++)h[l]=arguments[l+2];d.children=h}if(a&&a.defaultProps)for(c in f=a.defaultProps,f)void 0===d[c]&&(d[c]=f[c]);return{$$typeof:r,type:a,key:g,ref:k,props:d,_owner:G.current}}function K(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===r}\n\tfunction escape(a){var b={\"\\x3d\":\"\\x3d0\",\":\":\"\\x3d2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var L=/\\/+/g,M=[];function N(a,b,e,c){if(M.length){var d=M.pop();d.result=a;d.keyPrefix=b;d.func=e;d.context=c;d.count=0;return d}return{result:a,keyPrefix:b,func:e,context:c,count:0}}function O(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>M.length&&M.push(a)}\n\tfunction P(a,b,e,c){var d=typeof a;if(\"undefined\"===d||\"boolean\"===d)a=null;var g=!1;if(null===a)g=!0;else switch(d){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case r:case t:case u:case v:g=!0}}if(g)return e(c,a,\"\"===b?\".\"+Q(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var k=0;k<a.length;k++){d=a[k];var f=b+Q(d,k);g+=P(d,f,e,c)}else if(null===a||\"undefined\"===typeof a?f=null:(f=x&&a[x]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=\n\tf.call(a),k=0;!(d=a.next()).done;)d=d.value,f=b+Q(d,k++),g+=P(d,f,e,c);else\"object\"===d&&(e=\"\"+a,y(\"31\",\"[object Object]\"===e?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":e,\"\"));return g}function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function R(a,b){a.func.call(a.context,b,a.count++)}\n\tfunction S(a,b,e){var c=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?T(a,c,e,p.thatReturnsArgument):null!=a&&(K(a)&&(b=d+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(L,\"$\\x26/\")+\"/\")+e,a={$$typeof:r,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}),c.push(a))}function T(a,b,e,c,d){var g=\"\";null!=e&&(g=(\"\"+e).replace(L,\"$\\x26/\")+\"/\");b=N(b,g,c,d);null==a||P(a,\"\",S,b);O(b)}\n\tvar U={Children:{map:function(a,b,e){if(null==a)return a;var c=[];T(a,c,null,b,e);return c},forEach:function(a,b,e){if(null==a)return a;b=N(null,null,b,e);null==a||P(a,\"\",R,b);O(b)},count:function(a){return null==a?0:P(a,\"\",p.thatReturnsNull,null)},toArray:function(a){var b=[];T(a,b,null,p.thatReturnsArgument);return b},only:function(a){K(a)?void 0:y(\"143\");return a}},Component:A,PureComponent:B,unstable_AsyncComponent:E,Fragment:w,createElement:J,cloneElement:function(a,b,e){var c=m({},a.props),\n\td=a.key,g=a.ref,k=a._owner;if(null!=b){void 0!==b.ref&&(g=b.ref,k=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(h in b)H.call(b,h)&&!I.hasOwnProperty(h)&&(c[h]=void 0===b[h]&&void 0!==f?f[h]:b[h])}var h=arguments.length-2;if(1===h)c.children=e;else if(1<h){f=Array(h);for(var l=0;l<h;l++)f[l]=arguments[l+2];c.children=f}return{$$typeof:r,type:a.type,key:d,ref:g,props:c,_owner:k}},createFactory:function(a){var b=J.bind(null,a);b.type=a;return b},\n\tisValidElement:K,version:\"16.2.0\",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:G,assign:m}},V=Object.freeze({default:U}),W=V&&U||V;module.exports=W[\"default\"]?W[\"default\"]:W;\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports) {\n\n\tmodule.exports = function(THREE) {\n\t\tvar MOUSE = THREE.MOUSE\n\t\tif (!MOUSE)\n\t\t\tMOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\t\n\t\t/**\n\t\t * @author qiao / https://github.com/qiao\n\t\t * @author mrdoob / http://mrdoob.com\n\t\t * @author alteredq / http://alteredqualia.com/\n\t\t * @author WestLangley / http://github.com/WestLangley\n\t\t * @author erich666 / http://erichaines.com\n\t\t */\n\t\t/*global THREE, console */\n\t\n\t\tfunction OrbitConstraint ( object ) {\n\t\n\t\t\tthis.object = object;\n\t\n\t\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\t\t// and where it pans with respect to.\n\t\t\tthis.target = new THREE.Vector3();\n\t\n\t\t\t// Limits to how far you can dolly in and out ( PerspectiveCamera only )\n\t\t\tthis.minDistance = 0;\n\t\t\tthis.maxDistance = Infinity;\n\t\n\t\t\t// Limits to how far you can zoom in and out ( OrthographicCamera only )\n\t\t\tthis.minZoom = 0;\n\t\t\tthis.maxZoom = Infinity;\n\t\n\t\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t\t// Range is 0 to Math.PI radians.\n\t\t\tthis.minPolarAngle = 0; // radians\n\t\t\tthis.maxPolarAngle = Math.PI; // radians\n\t\n\t\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\t\tthis.maxAzimuthAngle = Infinity; // radians\n\t\n\t\t\t// Set to true to enable damping (inertia)\n\t\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\t\tthis.enableDamping = false;\n\t\t\tthis.dampingFactor = 0.25;\n\t\n\t\t\t////////////\n\t\t\t// internals\n\t\n\t\t\tvar scope = this;\n\t\n\t\t\tvar EPS = 0.000001;\n\t\n\t\t\t// Current position in spherical coordinate system.\n\t\t\tvar theta;\n\t\t\tvar phi;\n\t\n\t\t\t// Pending changes\n\t\t\tvar phiDelta = 0;\n\t\t\tvar thetaDelta = 0;\n\t\t\tvar scale = 1;\n\t\t\tvar panOffset = new THREE.Vector3();\n\t\t\tvar zoomChanged = false;\n\t\n\t\t\t// API\n\t\n\t\t\tthis.getPolarAngle = function () {\n\t\n\t\t\t\treturn phi;\n\t\n\t\t\t};\n\t\n\t\t\tthis.getAzimuthalAngle = function () {\n\t\n\t\t\t\treturn theta;\n\t\n\t\t\t};\n\t\n\t\t\tthis.rotateLeft = function ( angle ) {\n\t\n\t\t\t\tthetaDelta -= angle;\n\t\n\t\t\t};\n\t\n\t\t\tthis.rotateUp = function ( angle ) {\n\t\n\t\t\t\tphiDelta -= angle;\n\t\n\t\t\t};\n\t\n\t\t\t// pass in distance in world space to move left\n\t\t\tthis.panLeft = function() {\n\t\n\t\t\t\tvar v = new THREE.Vector3();\n\t\n\t\t\t\treturn function panLeft ( distance ) {\n\t\n\t\t\t\t\tvar te = this.object.matrix.elements;\n\t\n\t\t\t\t\t// get X column of matrix\n\t\t\t\t\tv.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t\t\t\t\tv.multiplyScalar( - distance );\n\t\n\t\t\t\t\tpanOffset.add( v );\n\t\n\t\t\t\t};\n\t\n\t\t\t}();\n\t\n\t\t\t// pass in distance in world space to move up\n\t\t\tthis.panUp = function() {\n\t\n\t\t\t\tvar v = new THREE.Vector3();\n\t\n\t\t\t\treturn function panUp ( distance ) {\n\t\n\t\t\t\t\tvar te = this.object.matrix.elements;\n\t\n\t\t\t\t\t// get Y column of matrix\n\t\t\t\t\tv.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t\t\t\t\tv.multiplyScalar( distance );\n\t\n\t\t\t\t\tpanOffset.add( v );\n\t\n\t\t\t\t};\n\t\n\t\t\t}();\n\t\n\t\t\t// pass in x,y of change desired in pixel space,\n\t\t\t// right and down are positive\n\t\t\tthis.pan = function ( deltaX, deltaY, screenWidth, screenHeight ) {\n\t\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\t\n\t\t\t\t\t// perspective\n\t\t\t\t\tvar position = scope.object.position;\n\t\t\t\t\tvar offset = position.clone().sub( scope.target );\n\t\t\t\t\tvar targetDistance = offset.length();\n\t\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\t\n\t\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\t\tscope.panLeft( 2 * deltaX * targetDistance / screenHeight );\n\t\t\t\t\tscope.panUp( 2 * deltaY * targetDistance / screenHeight );\n\t\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\t\n\t\t\t\t\t// orthographic\n\t\t\t\t\tscope.panLeft( deltaX * ( scope.object.right - scope.object.left ) / screenWidth );\n\t\t\t\t\tscope.panUp( deltaY * ( scope.object.top - scope.object.bottom ) / screenHeight );\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\t// camera neither orthographic or perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.dollyIn = function ( dollyScale ) {\n\t\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\t\n\t\t\t\t\tscale /= dollyScale;\n\t\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\t\n\t\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom * dollyScale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.dollyOut = function ( dollyScale ) {\n\t\n\t\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\t\n\t\t\t\t\tscale *= dollyScale;\n\t\n\t\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\t\n\t\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / dollyScale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\t\n\t\t\t\t} else {\n\t\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.update = function() {\n\t\n\t\t\t\tvar offset = new THREE.Vector3();\n\t\n\t\t\t\t// so camera.up is the orbit axis\n\t\t\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\t\t\tvar quatInverse = quat.clone().inverse();\n\t\n\t\t\t\tvar lastPosition = new THREE.Vector3();\n\t\t\t\tvar lastQuaternion = new THREE.Quaternion();\n\t\n\t\t\t\treturn function () {\n\t\n\t\t\t\t\tvar position = this.object.position;\n\t\n\t\t\t\t\toffset.copy( position ).sub( this.target );\n\t\n\t\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\t\toffset.applyQuaternion( quat );\n\t\n\t\t\t\t\t// angle from z-axis around y-axis\n\t\n\t\t\t\t\ttheta = Math.atan2( offset.x, offset.z );\n\t\n\t\t\t\t\t// angle from y-axis\n\t\n\t\t\t\t\tphi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\n\t\n\t\t\t\t\ttheta += thetaDelta;\n\t\t\t\t\tphi += phiDelta;\n\t\n\t\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\t\ttheta = Math.max( this.minAzimuthAngle, Math.min( this.maxAzimuthAngle, theta ) );\n\t\n\t\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\t\tphi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );\n\t\n\t\t\t\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\t\t\t\tphi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\n\t\n\t\t\t\t\tvar radius = offset.length() * scale;\n\t\n\t\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\t\tradius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );\n\t\n\t\t\t\t\t// move target to panned location\n\t\t\t\t\tthis.target.add( panOffset );\n\t\n\t\t\t\t\toffset.x = radius * Math.sin( phi ) * Math.sin( theta );\n\t\t\t\t\toffset.y = radius * Math.cos( phi );\n\t\t\t\t\toffset.z = radius * Math.sin( phi ) * Math.cos( theta );\n\t\n\t\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\t\toffset.applyQuaternion( quatInverse );\n\t\n\t\t\t\t\tposition.copy( this.target ).add( offset );\n\t\n\t\t\t\t\tthis.object.lookAt( this.target );\n\t\n\t\t\t\t\tif ( this.enableDamping === true ) {\n\t\n\t\t\t\t\t\tthetaDelta *= ( 1 - this.dampingFactor );\n\t\t\t\t\t\tphiDelta *= ( 1 - this.dampingFactor );\n\t\n\t\t\t\t\t} else {\n\t\n\t\t\t\t\t\tthetaDelta = 0;\n\t\t\t\t\t\tphiDelta = 0;\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\tscale = 1;\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\t\n\t\t\t\t\t// update condition is:\n\t\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\t\n\t\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\t\t lastPosition.distanceToSquared( this.object.position ) > EPS ||\n\t\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( this.object.quaternion ) ) > EPS ) {\n\t\n\t\t\t\t\t\tlastPosition.copy( this.object.position );\n\t\t\t\t\t\tlastQuaternion.copy( this.object.quaternion );\n\t\t\t\t\t\tzoomChanged = false;\n\t\n\t\t\t\t\t\treturn true;\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\treturn false;\n\t\n\t\t\t\t};\n\t\n\t\t\t}();\n\t\n\t\t};\n\t\n\t\n\t\t// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n\t\t// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n\t\t// supported.\n\t\t//\n\t\t//    Orbit - left mouse / touch: one finger move\n\t\t//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n\t\t//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\t\n\t\tfunction OrbitControls ( object, domElement ) {\n\t\n\t\t\tvar constraint = new OrbitConstraint( object );\n\t\n\t\t\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\t\n\t\t\t// API\n\t\n\t\t\tObject.defineProperty( this, 'constraint', {\n\t\n\t\t\t\tget: function() {\n\t\n\t\t\t\t\treturn constraint;\n\t\n\t\t\t\t}\n\t\n\t\t\t} );\n\t\n\t\t\tthis.getPolarAngle = function () {\n\t\n\t\t\t\treturn constraint.getPolarAngle();\n\t\n\t\t\t};\n\t\n\t\t\tthis.getAzimuthalAngle = function () {\n\t\n\t\t\t\treturn constraint.getAzimuthalAngle();\n\t\n\t\t\t};\n\t\n\t\t\t// Set to false to disable this control\n\t\t\tthis.enabled = true;\n\t\n\t\t\t// center is old, deprecated; use \"target\" instead\n\t\t\tthis.center = this.target;\n\t\n\t\t\t// This option actually enables dollying in and out; left as \"zoom\" for\n\t\t\t// backwards compatibility.\n\t\t\t// Set to false to disable zooming\n\t\t\tthis.enableZoom = true;\n\t\t\tthis.zoomSpeed = 1.0;\n\t\n\t\t\t// Set to false to disable rotating\n\t\t\tthis.enableRotate = true;\n\t\t\tthis.rotateSpeed = 1.0;\n\t\n\t\t\t// Set to false to disable panning\n\t\t\tthis.enablePan = true;\n\t\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\t\n\t\t\t// Set to true to automatically rotate around the target\n\t\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\t\tthis.autoRotate = false;\n\t\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\t\n\t\t\t// Set to false to disable use of the keys\n\t\t\tthis.enableKeys = true;\n\t\n\t\t\t// The four arrow keys\n\t\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\t\n\t\t\t// Mouse buttons\n\t\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\t\n\t\t\t////////////\n\t\t\t// internals\n\t\n\t\t\tvar scope = this;\n\t\n\t\t\tvar rotateStart = new THREE.Vector2();\n\t\t\tvar rotateEnd = new THREE.Vector2();\n\t\t\tvar rotateDelta = new THREE.Vector2();\n\t\n\t\t\tvar panStart = new THREE.Vector2();\n\t\t\tvar panEnd = new THREE.Vector2();\n\t\t\tvar panDelta = new THREE.Vector2();\n\t\n\t\t\tvar dollyStart = new THREE.Vector2();\n\t\t\tvar dollyEnd = new THREE.Vector2();\n\t\t\tvar dollyDelta = new THREE.Vector2();\n\t\n\t\t\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\t\n\t\t\tvar state = STATE.NONE;\n\t\n\t\t\t// for reset\n\t\n\t\t\tthis.target0 = this.target.clone();\n\t\t\tthis.position0 = this.object.position.clone();\n\t\t\tthis.zoom0 = this.object.zoom;\n\t\n\t\t\t// events\n\t\n\t\t\tvar changeEvent = { type: 'change' };\n\t\t\tvar startEvent = { type: 'start' };\n\t\t\tvar endEvent = { type: 'end' };\n\t\n\t\t\t// pass in x,y of change desired in pixel space,\n\t\t\t// right and down are positive\n\t\t\tfunction pan( deltaX, deltaY ) {\n\t\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\tconstraint.pan( deltaX, deltaY, element.clientWidth, element.clientHeight );\n\t\n\t\t\t}\n\t\n\t\t\tthis.update = function () {\n\t\n\t\t\t\tif ( this.autoRotate && state === STATE.NONE ) {\n\t\n\t\t\t\t\tconstraint.rotateLeft( getAutoRotationAngle() );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( constraint.update() === true ) {\n\t\n\t\t\t\t\tthis.dispatchEvent( changeEvent );\n\t\n\t\t\t\t}\n\t\n\t\t\t};\n\t\n\t\t\tthis.reset = function () {\n\t\n\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\tthis.target.copy( this.target0 );\n\t\t\t\tthis.object.position.copy( this.position0 );\n\t\t\t\tthis.object.zoom = this.zoom0;\n\t\n\t\t\t\tthis.object.updateProjectionMatrix();\n\t\t\t\tthis.dispatchEvent( changeEvent );\n\t\n\t\t\t\tthis.update();\n\t\n\t\t\t};\n\t\n\t\t\tfunction getAutoRotationAngle() {\n\t\n\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\t\n\t\t\t}\n\t\n\t\t\tfunction getZoomScale() {\n\t\n\t\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseDown( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\t\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\n\t\t\t\t\tstate = STATE.ROTATE;\n\t\n\t\t\t\t\trotateStart.set( event.clientX, event.clientY );\n\t\n\t\t\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\t\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\n\t\t\t\t\tstate = STATE.DOLLY;\n\t\n\t\t\t\t\tdollyStart.set( event.clientX, event.clientY );\n\t\n\t\t\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\t\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\n\t\t\t\t\tstate = STATE.PAN;\n\t\n\t\t\t\t\tpanStart.set( event.clientX, event.clientY );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( state !== STATE.NONE ) {\n\t\n\t\t\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\t\t\t\t\tscope.dispatchEvent( startEvent );\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseMove( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\tif ( state === STATE.ROTATE ) {\n\t\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\n\t\t\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\t\n\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\n\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\t\n\t\t\t\t\trotateStart.copy( rotateEnd );\n\t\n\t\t\t\t} else if ( state === STATE.DOLLY ) {\n\t\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\n\t\t\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\t\n\t\t\t\t\tif ( dollyDelta.y > 0 ) {\n\t\n\t\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\t\n\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\t\n\t\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\t\n\t\t\t\t\t}\n\t\n\t\t\t\t\tdollyStart.copy( dollyEnd );\n\t\n\t\t\t\t} else if ( state === STATE.PAN ) {\n\t\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\n\t\t\t\t\tpanEnd.set( event.clientX, event.clientY );\n\t\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\t\n\t\t\t\t\tpan( panDelta.x, panDelta.y );\n\t\n\t\t\t\t\tpanStart.copy( panEnd );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( state !== STATE.NONE ) scope.update();\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseUp( /* event */ ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\t\t\tscope.dispatchEvent( endEvent );\n\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t}\n\t\n\t\t\tfunction onMouseWheel( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\n\t\t\t\tvar delta = 0;\n\t\n\t\t\t\tif ( event.wheelDelta !== undefined ) {\n\t\n\t\t\t\t\t// WebKit / Opera / Explorer 9\n\t\n\t\t\t\t\tdelta = event.wheelDelta;\n\t\n\t\t\t\t} else if ( event.detail !== undefined ) {\n\t\n\t\t\t\t\t// Firefox\n\t\n\t\t\t\t\tdelta = - event.detail;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( delta > 0 ) {\n\t\n\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\t\n\t\t\t\t} else if ( delta < 0 ) {\n\t\n\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\t\n\t\t\t\t}\n\t\n\t\t\t\tscope.update();\n\t\t\t\tscope.dispatchEvent( startEvent );\n\t\t\t\tscope.dispatchEvent( endEvent );\n\t\n\t\t\t}\n\t\n\t\t\tfunction onKeyDown( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\t\n\t\t\t\tswitch ( event.keyCode ) {\n\t\n\t\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tfunction touchstart( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tswitch ( event.touches.length ) {\n\t\n\t\t\t\t\tcase 1:\t// one-fingered touch: rotate\n\t\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\t\n\t\t\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 2:\t// two-fingered touch: dolly\n\t\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\t\n\t\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\t\tdollyStart.set( 0, distance );\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 3: // three-fingered touch: pan\n\t\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\t\n\t\t\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tdefault:\n\t\n\t\t\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\t}\n\t\n\t\t\t\tif ( state !== STATE.NONE ) scope.dispatchEvent( startEvent );\n\t\n\t\t\t}\n\t\n\t\t\tfunction touchmove( event ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\n\t\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\t\n\t\t\t\tswitch ( event.touches.length ) {\n\t\n\t\t\t\t\tcase 1: // one-fingered touch: rotate\n\t\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return;\n\t\n\t\t\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\t\n\t\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\t\n\t\t\t\t\t\trotateStart.copy( rotateEnd );\n\t\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 2: // two-fingered touch: dolly\n\t\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return;\n\t\n\t\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\n\t\t\t\t\t\tdollyEnd.set( 0, distance );\n\t\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\t\n\t\t\t\t\t\tif ( dollyDelta.y > 0 ) {\n\t\n\t\t\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\t\n\t\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\t\n\t\t\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\t\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tdollyStart.copy( dollyEnd );\n\t\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tcase 3: // three-fingered touch: pan\n\t\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return;\n\t\n\t\t\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\t\n\t\t\t\t\t\tpan( panDelta.x, panDelta.y );\n\t\n\t\t\t\t\t\tpanStart.copy( panEnd );\n\t\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\t\n\t\t\t\t\tdefault:\n\t\n\t\t\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t\tfunction touchend( /* event */ ) {\n\t\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\n\t\t\t\tscope.dispatchEvent( endEvent );\n\t\t\t\tstate = STATE.NONE;\n\t\n\t\t\t}\n\t\n\t\t\tfunction contextmenu( event ) {\n\t\n\t\t\t\tevent.preventDefault();\n\t\n\t\t\t}\n\t\n\t\t\tthis.dispose = function() {\n\t\n\t\t\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\t\t\tthis.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\t\t\tthis.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\n\t\t\t\tthis.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\t\n\t\t\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\t\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\t\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\t\n\t\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\n\t\t\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\t\n\t\t\t}\n\t\n\t\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\t\n\t\t\tthis.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\t\t\tthis.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n\t\t\tthis.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\t\n\t\t\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\t\t\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\t\t\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\t\n\t\t\twindow.addEventListener( 'keydown', onKeyDown, false );\n\t\n\t\t\t// force an update at start\n\t\t\tthis.update();\n\t\n\t\t};\n\t\n\t\tOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n\t\tOrbitControls.prototype.constructor = OrbitControls;\n\t\n\t\tObject.defineProperties( OrbitControls.prototype, {\n\t\n\t\t\tobject: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.object;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\ttarget: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.target;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: target is now immutable. Use target.set() instead.' );\n\t\t\t\t\tthis.constraint.target.copy( value );\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminDistance : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minDistance;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minDistance = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxDistance : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxDistance;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxDistance = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminZoom : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minZoom;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minZoom = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxZoom : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxZoom;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxZoom = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminPolarAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minPolarAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minPolarAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxPolarAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxPolarAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxPolarAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tminAzimuthAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.minAzimuthAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.minAzimuthAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tmaxAzimuthAngle : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.maxAzimuthAngle;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.maxAzimuthAngle = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tenableDamping : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.enableDamping;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.enableDamping = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tdampingFactor : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\treturn this.constraint.dampingFactor;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tthis.constraint.dampingFactor = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\t// backward compatibility\n\t\n\t\t\tnoZoom: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\t\treturn ! this.enableZoom;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\t\tthis.enableZoom = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoRotate: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\t\treturn ! this.enableRotate;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\t\tthis.enableRotate = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoPan: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\t\treturn ! this.enablePan;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\t\tthis.enablePan = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tnoKeys: {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\t\treturn ! this.enableKeys;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\t\tthis.enableKeys = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tstaticMoving : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\t\treturn ! this.constraint.enableDamping;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\t\tthis.constraint.enableDamping = ! value;\n\t\n\t\t\t\t}\n\t\n\t\t\t},\n\t\n\t\t\tdynamicDampingFactor : {\n\t\n\t\t\t\tget: function () {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\t\treturn this.constraint.dampingFactor;\n\t\n\t\t\t\t},\n\t\n\t\t\t\tset: function ( value ) {\n\t\n\t\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\t\tthis.constraint.dampingFactor = value;\n\t\n\t\t\t\t}\n\t\n\t\t\t}\n\t\n\t\t} );\n\t\n\t\treturn OrbitControls;\n\t}\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;var self = self || {};// File:src/Three.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tvar THREE = { REVISION: '72' };\r\n\t\r\n\t//\r\n\t\r\n\tif ( true ) {\r\n\t\r\n\t\t\t!(__WEBPACK_AMD_DEFINE_FACTORY__ = (THREE), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\t\r\n\t} else if ( 'undefined' !== typeof exports && 'undefined' !== typeof module ) {\r\n\t\r\n\t\t\tmodule.exports = THREE;\r\n\t\r\n\t}\r\n\t\r\n\t\r\n\t// polyfills\r\n\t\r\n\tif ( self.requestAnimationFrame === undefined || self.cancelAnimationFrame === undefined ) {\r\n\t\r\n\t\t// Missing in Android stock browser.\r\n\t\r\n\t\t( function () {\r\n\t\r\n\t\t\tvar lastTime = 0;\r\n\t\t\tvar vendors = [ 'ms', 'moz', 'webkit', 'o' ];\r\n\t\r\n\t\t\tfor ( var x = 0; x < vendors.length && ! self.requestAnimationFrame; ++ x ) {\r\n\t\r\n\t\t\t\tself.requestAnimationFrame = self[ vendors[ x ] + 'RequestAnimationFrame' ];\r\n\t\t\t\tself.cancelAnimationFrame = self[ vendors[ x ] + 'CancelAnimationFrame' ] || self[ vendors[ x ] + 'CancelRequestAnimationFrame' ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( self.requestAnimationFrame === undefined && self.setTimeout !== undefined ) {\r\n\t\r\n\t\t\t\tself.requestAnimationFrame = function ( callback ) {\r\n\t\r\n\t\t\t\t\tvar currTime = Date.now(), timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) );\r\n\t\t\t\t\tvar id = self.setTimeout( function () {\r\n\t\r\n\t\t\t\t\t\tcallback( currTime + timeToCall );\r\n\t\r\n\t\t\t\t\t}, timeToCall );\r\n\t\t\t\t\tlastTime = currTime + timeToCall;\r\n\t\t\t\t\treturn id;\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( self.cancelAnimationFrame === undefined && self.clearTimeout !== undefined ) {\r\n\t\r\n\t\t\t\tself.cancelAnimationFrame = function ( id ) {\r\n\t\r\n\t\t\t\t\tself.clearTimeout( id );\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}() );\r\n\t\r\n\t}\r\n\t\r\n\tif ( Math.sign === undefined ) {\r\n\t\r\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\t\r\n\t\tMath.sign = function ( x ) {\r\n\t\r\n\t\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\t\r\n\t\t};\r\n\t\r\n\t}\r\n\t\r\n\tif ( Function.prototype.name === undefined && Object.defineProperty !== undefined ) {\r\n\t\r\n\t\t// Missing in IE9-11.\r\n\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\t\r\n\t\tObject.defineProperty( Function.prototype, 'name', {\r\n\t\r\n\t\t\tget: function () {\r\n\t\r\n\t\t\t\treturn this.toString().match( /^\\s*function\\s*(\\S*)\\s*\\(/ )[ 1 ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t} );\r\n\t\r\n\t}\r\n\t\r\n\t// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\t\r\n\tTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n\t\r\n\t// GL STATE CONSTANTS\r\n\t\r\n\tTHREE.CullFaceNone = 0;\r\n\tTHREE.CullFaceBack = 1;\r\n\tTHREE.CullFaceFront = 2;\r\n\tTHREE.CullFaceFrontBack = 3;\r\n\t\r\n\tTHREE.FrontFaceDirectionCW = 0;\r\n\tTHREE.FrontFaceDirectionCCW = 1;\r\n\t\r\n\t// SHADOWING TYPES\r\n\t\r\n\tTHREE.BasicShadowMap = 0;\r\n\tTHREE.PCFShadowMap = 1;\r\n\tTHREE.PCFSoftShadowMap = 2;\r\n\t\r\n\t// MATERIAL CONSTANTS\r\n\t\r\n\t// side\r\n\t\r\n\tTHREE.FrontSide = 0;\r\n\tTHREE.BackSide = 1;\r\n\tTHREE.DoubleSide = 2;\r\n\t\r\n\t// shading\r\n\t\r\n\tTHREE.FlatShading = 1;\r\n\tTHREE.SmoothShading = 2;\r\n\t\r\n\t// colors\r\n\t\r\n\tTHREE.NoColors = 0;\r\n\tTHREE.FaceColors = 1;\r\n\tTHREE.VertexColors = 2;\r\n\t\r\n\t// blending modes\r\n\t\r\n\tTHREE.NoBlending = 0;\r\n\tTHREE.NormalBlending = 1;\r\n\tTHREE.AdditiveBlending = 2;\r\n\tTHREE.SubtractiveBlending = 3;\r\n\tTHREE.MultiplyBlending = 4;\r\n\tTHREE.CustomBlending = 5;\r\n\t\r\n\t// custom blending equations\r\n\t// (numbers start from 100 not to clash with other\r\n\t// mappings to OpenGL constants defined in Texture.js)\r\n\t\r\n\tTHREE.AddEquation = 100;\r\n\tTHREE.SubtractEquation = 101;\r\n\tTHREE.ReverseSubtractEquation = 102;\r\n\tTHREE.MinEquation = 103;\r\n\tTHREE.MaxEquation = 104;\r\n\t\r\n\t// custom blending destination factors\r\n\t\r\n\tTHREE.ZeroFactor = 200;\r\n\tTHREE.OneFactor = 201;\r\n\tTHREE.SrcColorFactor = 202;\r\n\tTHREE.OneMinusSrcColorFactor = 203;\r\n\tTHREE.SrcAlphaFactor = 204;\r\n\tTHREE.OneMinusSrcAlphaFactor = 205;\r\n\tTHREE.DstAlphaFactor = 206;\r\n\tTHREE.OneMinusDstAlphaFactor = 207;\r\n\t\r\n\t// custom blending source factors\r\n\t\r\n\t//THREE.ZeroFactor = 200;\r\n\t//THREE.OneFactor = 201;\r\n\t//THREE.SrcAlphaFactor = 204;\r\n\t//THREE.OneMinusSrcAlphaFactor = 205;\r\n\t//THREE.DstAlphaFactor = 206;\r\n\t//THREE.OneMinusDstAlphaFactor = 207;\r\n\tTHREE.DstColorFactor = 208;\r\n\tTHREE.OneMinusDstColorFactor = 209;\r\n\tTHREE.SrcAlphaSaturateFactor = 210;\r\n\t\r\n\t// depth modes\r\n\t\r\n\tTHREE.NeverDepth = 0;\r\n\tTHREE.AlwaysDepth = 1;\r\n\tTHREE.LessDepth = 2;\r\n\tTHREE.LessEqualDepth = 3;\r\n\tTHREE.EqualDepth = 4;\r\n\tTHREE.GreaterEqualDepth = 5;\r\n\tTHREE.GreaterDepth = 6;\r\n\tTHREE.NotEqualDepth = 7;\r\n\t\r\n\t\r\n\t// TEXTURE CONSTANTS\r\n\t\r\n\tTHREE.MultiplyOperation = 0;\r\n\tTHREE.MixOperation = 1;\r\n\tTHREE.AddOperation = 2;\r\n\t\r\n\t// Mapping modes\r\n\t\r\n\tTHREE.UVMapping = 300;\r\n\t\r\n\tTHREE.CubeReflectionMapping = 301;\r\n\tTHREE.CubeRefractionMapping = 302;\r\n\t\r\n\tTHREE.EquirectangularReflectionMapping = 303;\r\n\tTHREE.EquirectangularRefractionMapping = 304;\r\n\t\r\n\tTHREE.SphericalReflectionMapping = 305;\r\n\t\r\n\t// Wrapping modes\r\n\t\r\n\tTHREE.RepeatWrapping = 1000;\r\n\tTHREE.ClampToEdgeWrapping = 1001;\r\n\tTHREE.MirroredRepeatWrapping = 1002;\r\n\t\r\n\t// Filters\r\n\t\r\n\tTHREE.NearestFilter = 1003;\r\n\tTHREE.NearestMipMapNearestFilter = 1004;\r\n\tTHREE.NearestMipMapLinearFilter = 1005;\r\n\tTHREE.LinearFilter = 1006;\r\n\tTHREE.LinearMipMapNearestFilter = 1007;\r\n\tTHREE.LinearMipMapLinearFilter = 1008;\r\n\t\r\n\t// Data types\r\n\t\r\n\tTHREE.UnsignedByteType = 1009;\r\n\tTHREE.ByteType = 1010;\r\n\tTHREE.ShortType = 1011;\r\n\tTHREE.UnsignedShortType = 1012;\r\n\tTHREE.IntType = 1013;\r\n\tTHREE.UnsignedIntType = 1014;\r\n\tTHREE.FloatType = 1015;\r\n\tTHREE.HalfFloatType = 1025;\r\n\t\r\n\t// Pixel types\r\n\t\r\n\t//THREE.UnsignedByteType = 1009;\r\n\tTHREE.UnsignedShort4444Type = 1016;\r\n\tTHREE.UnsignedShort5551Type = 1017;\r\n\tTHREE.UnsignedShort565Type = 1018;\r\n\t\r\n\t// Pixel formats\r\n\t\r\n\tTHREE.AlphaFormat = 1019;\r\n\tTHREE.RGBFormat = 1020;\r\n\tTHREE.RGBAFormat = 1021;\r\n\tTHREE.LuminanceFormat = 1022;\r\n\tTHREE.LuminanceAlphaFormat = 1023;\r\n\t// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\r\n\tTHREE.RGBEFormat = THREE.RGBAFormat; //1024;\r\n\t\r\n\t// DDS / ST3C Compressed texture formats\r\n\t\r\n\tTHREE.RGB_S3TC_DXT1_Format = 2001;\r\n\tTHREE.RGBA_S3TC_DXT1_Format = 2002;\r\n\tTHREE.RGBA_S3TC_DXT3_Format = 2003;\r\n\tTHREE.RGBA_S3TC_DXT5_Format = 2004;\r\n\t\r\n\t\r\n\t// PVRTC compressed texture formats\r\n\t\r\n\tTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\r\n\tTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\r\n\tTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\r\n\tTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\r\n\t\r\n\t\r\n\t// DEPRECATED\r\n\t\r\n\tTHREE.Projector = function () {\r\n\t\r\n\t\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\t\r\n\t\tthis.projectVector = function ( vector, camera ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\t\tvector.project( camera );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.unprojectVector = function ( vector, camera ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\t\tvector.unproject( camera );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.pickingRay = function ( vector, camera ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CanvasRenderer = function () {\r\n\t\r\n\t\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\t\r\n\t\tthis.domElement = document.createElement( 'canvas' );\r\n\t\tthis.clear = function () {};\r\n\t\tthis.render = function () {};\r\n\t\tthis.setClearColor = function () {};\r\n\t\tthis.setSize = function () {};\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Color.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Color = function ( color ) {\r\n\t\r\n\t\tif ( arguments.length === 3 ) {\r\n\t\r\n\t\t\treturn this.setRGB( arguments[ 0 ], arguments[ 1 ], arguments[ 2 ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this.set( color );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Color.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Color,\r\n\t\r\n\t\tr: 1, g: 1, b: 1,\r\n\t\r\n\t\tset: function ( value ) {\r\n\t\r\n\t\t\tif ( value instanceof THREE.Color ) {\r\n\t\r\n\t\t\t\tthis.copy( value );\r\n\t\r\n\t\t\t} else if ( typeof value === 'number' ) {\r\n\t\r\n\t\t\t\tthis.setHex( value );\r\n\t\r\n\t\t\t} else if ( typeof value === 'string' ) {\r\n\t\r\n\t\t\t\tthis.setStyle( value );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetHex: function ( hex ) {\r\n\t\r\n\t\t\thex = Math.floor( hex );\r\n\t\r\n\t\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\t\tthis.b = ( hex & 255 ) / 255;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRGB: function ( r, g, b ) {\r\n\t\r\n\t\t\tthis.r = r;\r\n\t\t\tthis.g = g;\r\n\t\t\tthis.b = b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetHSL: function () {\r\n\t\r\n\t\t\tfunction hue2rgb ( p, q, t ) {\r\n\t\r\n\t\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\t\treturn p;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn function ( h, s, l ) {\r\n\t\r\n\t\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\t\t\th = THREE.Math.euclideanModulo( h, 1 );\r\n\t\t\t\ts = THREE.Math.clamp( s, 0, 1 );\r\n\t\t\t\tl = THREE.Math.clamp( l, 0, 1 );\r\n\t\r\n\t\t\t\tif ( s === 0 ) {\r\n\t\r\n\t\t\t\t\tthis.r = this.g = this.b = l;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\t\t\tvar q = ( 2 * l ) - p;\r\n\t\r\n\t\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tsetStyle: function ( style ) {\r\n\t\r\n\t\t\tvar parseAlpha = function ( strAlpha ) {\r\n\t\r\n\t\t\t\tvar alpha = parseFloat( strAlpha );\r\n\t\r\n\t\t\t\tif ( alpha < 1 ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of color ' + style + ' will be ignored.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn alpha;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\tvar m;\r\n\t\r\n\t\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\t\r\n\t\t\t\t// rgb / hsl\r\n\t\r\n\t\t\t\tvar color;\r\n\t\t\t\tvar name = m[ 1 ];\r\n\t\t\t\tvar components = m[ 2 ];\r\n\t\r\n\t\t\t\tswitch ( name ) {\r\n\t\r\n\t\t\t\t\tcase 'rgb':\r\n\t\r\n\t\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// rgb(255,0,0)\r\n\t\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\t\r\n\t\t\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// rgb(100%,0%,0%)\r\n\t\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\t\r\n\t\t\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'rgba':\r\n\t\r\n\t\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// rgba(255,0,0,0.5)\r\n\t\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\t\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\t\r\n\t\t\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\t\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\t\r\n\t\t\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'hsl':\r\n\t\r\n\t\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// hsl(120,50%,50%)\r\n\t\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] );\r\n\t\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\t\r\n\t\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'hsla':\r\n\t\r\n\t\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] );\r\n\t\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\t\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\t\r\n\t\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\t\r\n\t\t\t\t// hex color\r\n\t\r\n\t\t\t\tvar hex = m[ 1 ];\r\n\t\t\t\tvar size = hex.length;\r\n\t\r\n\t\t\t\tif ( size === 3 ) {\r\n\t\r\n\t\t\t\t\t// #ff0\r\n\t\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\t\r\n\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t} else if ( size === 6 ) {\r\n\t\r\n\t\t\t\t\t// #ff0000\r\n\t\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\t\r\n\t\t\t\t\treturn this;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( style && style.length > 0 ) {\r\n\t\r\n\t\t\t\t// color keywords\r\n\t\t\t\tvar hex = THREE.ColorKeywords[ style ];\r\n\t\r\n\t\t\t\tif ( hex !== undefined ) {\r\n\t\r\n\t\t\t\t\t// red\r\n\t\t\t\t\tthis.setHex( hex );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// unknown color\r\n\t\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( color ) {\r\n\t\r\n\t\t\tthis.r = color.r;\r\n\t\t\tthis.g = color.g;\r\n\t\t\tthis.b = color.b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\t\r\n\t\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\t\r\n\t\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\t\r\n\t\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\t\r\n\t\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\t\r\n\t\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tconvertGammaToLinear: function () {\r\n\t\r\n\t\t\tvar r = this.r, g = this.g, b = this.b;\r\n\t\r\n\t\t\tthis.r = r * r;\r\n\t\t\tthis.g = g * g;\r\n\t\t\tthis.b = b * b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tconvertLinearToGamma: function () {\r\n\t\r\n\t\t\tthis.r = Math.sqrt( this.r );\r\n\t\t\tthis.g = Math.sqrt( this.g );\r\n\t\t\tthis.b = Math.sqrt( this.b );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetHex: function () {\r\n\t\r\n\t\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetHexString: function () {\r\n\t\r\n\t\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetHSL: function ( optionalTarget ) {\r\n\t\r\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\r\n\t\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\t\r\n\t\t\tvar r = this.r, g = this.g, b = this.b;\r\n\t\r\n\t\t\tvar max = Math.max( r, g, b );\r\n\t\t\tvar min = Math.min( r, g, b );\r\n\t\r\n\t\t\tvar hue, saturation;\r\n\t\t\tvar lightness = ( min + max ) / 2.0;\r\n\t\r\n\t\t\tif ( min === max ) {\r\n\t\r\n\t\t\t\thue = 0;\r\n\t\t\t\tsaturation = 0;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tvar delta = max - min;\r\n\t\r\n\t\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\t\r\n\t\t\t\tswitch ( max ) {\r\n\t\r\n\t\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\thue /= 6;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\thsl.h = hue;\r\n\t\t\thsl.s = saturation;\r\n\t\t\thsl.l = lightness;\r\n\t\r\n\t\t\treturn hsl;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetStyle: function () {\r\n\t\r\n\t\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\t\r\n\t\t},\r\n\t\r\n\t\toffsetHSL: function ( h, s, l ) {\r\n\t\r\n\t\t\tvar hsl = this.getHSL();\r\n\t\r\n\t\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\t\r\n\t\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tadd: function ( color ) {\r\n\t\r\n\t\t\tthis.r += color.r;\r\n\t\t\tthis.g += color.g;\r\n\t\t\tthis.b += color.b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddColors: function ( color1, color2 ) {\r\n\t\r\n\t\t\tthis.r = color1.r + color2.r;\r\n\t\t\tthis.g = color1.g + color2.g;\r\n\t\t\tthis.b = color1.b + color2.b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.r += s;\r\n\t\t\tthis.g += s;\r\n\t\t\tthis.b += s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiply: function ( color ) {\r\n\t\r\n\t\t\tthis.r *= color.r;\r\n\t\t\tthis.g *= color.g;\r\n\t\t\tthis.b *= color.b;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.r *= s;\r\n\t\t\tthis.g *= s;\r\n\t\t\tthis.b *= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerp: function ( color, alpha ) {\r\n\t\r\n\t\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( c ) {\r\n\t\r\n\t\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array ) {\r\n\t\r\n\t\t\tthis.r = array[ 0 ];\r\n\t\t\tthis.g = array[ 1 ];\r\n\t\t\tthis.b = array[ 2 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this.r;\r\n\t\t\tarray[ offset + 1 ] = this.g;\r\n\t\t\tarray[ offset + 2 ] = this.b;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\t\r\n\t// File:src/math/Quaternion.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Quaternion = function ( x, y, z, w ) {\r\n\t\r\n\t\tthis._x = x || 0;\r\n\t\tthis._y = y || 0;\r\n\t\tthis._z = z || 0;\r\n\t\tthis._w = ( w !== undefined ) ? w : 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Quaternion.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Quaternion,\r\n\t\r\n\t\tget x () {\r\n\t\r\n\t\t\treturn this._x;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset x ( value ) {\r\n\t\r\n\t\t\tthis._x = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget y () {\r\n\t\r\n\t\t\treturn this._y;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset y ( value ) {\r\n\t\r\n\t\t\tthis._y = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget z () {\r\n\t\r\n\t\t\treturn this._z;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset z ( value ) {\r\n\t\r\n\t\t\tthis._z = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget w () {\r\n\t\r\n\t\t\treturn this._w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset w ( value ) {\r\n\t\r\n\t\t\tthis._w = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset: function ( x, y, z, w ) {\r\n\t\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\t\t\tthis._w = w;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( quaternion ) {\r\n\t\r\n\t\t\tthis._x = quaternion.x;\r\n\t\t\tthis._y = quaternion.y;\r\n\t\t\tthis._z = quaternion.z;\r\n\t\t\tthis._w = quaternion.w;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromEuler: function ( euler, update ) {\r\n\t\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\t\r\n\t\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t\t//\tcontent/SpinCalc.m\r\n\t\r\n\t\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\t\r\n\t\t\tvar order = euler.order;\r\n\t\r\n\t\t\tif ( order === 'XYZ' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'YXZ' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'ZXY' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'ZYX' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'YZX' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\t\r\n\t\t\t} else if ( order === 'XZY' ) {\r\n\t\r\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( update !== false ) this.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromAxisAngle: function ( axis, angle ) {\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\t\r\n\t\t\t// assumes axis is normalized\r\n\t\r\n\t\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\t\r\n\t\t\tthis._x = axis.x * s;\r\n\t\t\tthis._y = axis.y * s;\r\n\t\t\tthis._z = axis.z * s;\r\n\t\t\tthis._w = Math.cos( halfAngle );\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromRotationMatrix: function ( m ) {\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\t\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\t\r\n\t\t\tvar te = m.elements,\r\n\t\r\n\t\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\t\r\n\t\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\t\ts;\r\n\t\r\n\t\t\tif ( trace > 0 ) {\r\n\t\r\n\t\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\t\r\n\t\t\t\tthis._w = 0.25 / s;\r\n\t\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\t\r\n\t\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\t\r\n\t\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\t\r\n\t\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\t\tthis._x = 0.25 * s;\r\n\t\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\t\r\n\t\t\t} else if ( m22 > m33 ) {\r\n\t\r\n\t\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\t\r\n\t\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\t\tthis._y = 0.25 * s;\r\n\t\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\t\r\n\t\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\t\tthis._z = 0.25 * s;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromUnitVectors: function () {\r\n\t\r\n\t\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\t\r\n\t\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\t\r\n\t\t\tvar v1, r;\r\n\t\r\n\t\t\tvar EPS = 0.000001;\r\n\t\r\n\t\t\treturn function ( vFrom, vTo ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\t\r\n\t\t\t\tif ( r < EPS ) {\r\n\t\r\n\t\t\t\t\tr = 0;\r\n\t\r\n\t\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\t\r\n\t\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis._x = v1.x;\r\n\t\t\t\tthis._y = v1.y;\r\n\t\t\t\tthis._z = v1.z;\r\n\t\t\t\tthis._w = r;\r\n\t\r\n\t\t\t\tthis.normalize();\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tinverse: function () {\r\n\t\r\n\t\t\tthis.conjugate().normalize();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tconjugate: function () {\r\n\t\r\n\t\t\tthis._x *= - 1;\r\n\t\t\tthis._y *= - 1;\r\n\t\t\tthis._z *= - 1;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdot: function ( v ) {\r\n\t\r\n\t\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthSq: function () {\r\n\t\r\n\t\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlength: function () {\r\n\t\r\n\t\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\tvar l = this.length();\r\n\t\r\n\t\t\tif ( l === 0 ) {\r\n\t\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = 0;\r\n\t\t\t\tthis._w = 1;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tl = 1 / l;\r\n\t\r\n\t\t\t\tthis._x = this._x * l;\r\n\t\t\t\tthis._y = this._y * l;\r\n\t\t\t\tthis._z = this._z * l;\r\n\t\t\t\tthis._w = this._w * l;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiply: function ( q, p ) {\r\n\t\r\n\t\t\tif ( p !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\t\treturn this.multiplyQuaternions( q, p );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.multiplyQuaternions( this, q );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyQuaternions: function ( a, b ) {\r\n\t\r\n\t\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\t\r\n\t\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\t\r\n\t\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\t\treturn vector.applyQuaternion( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tslerp: function ( qb, t ) {\r\n\t\r\n\t\t\tif ( t === 0 ) return this;\r\n\t\t\tif ( t === 1 ) return this.copy( qb );\r\n\t\r\n\t\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\t\r\n\t\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\t\r\n\t\t\tif ( cosHalfTheta < 0 ) {\r\n\t\r\n\t\t\t\tthis._w = - qb._w;\r\n\t\t\t\tthis._x = - qb._x;\r\n\t\t\t\tthis._y = - qb._y;\r\n\t\t\t\tthis._z = - qb._z;\r\n\t\r\n\t\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.copy( qb );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\t\r\n\t\t\t\tthis._w = w;\r\n\t\t\t\tthis._x = x;\r\n\t\t\t\tthis._y = y;\r\n\t\t\t\tthis._z = z;\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar halfTheta = Math.acos( cosHalfTheta );\r\n\t\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\t\r\n\t\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\t\r\n\t\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\t\r\n\t\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( quaternion ) {\r\n\t\r\n\t\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis._x = array[ offset ];\r\n\t\t\tthis._y = array[ offset + 1 ];\r\n\t\t\tthis._z = array[ offset + 2 ];\r\n\t\t\tthis._w = array[ offset + 3 ];\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this._x;\r\n\t\t\tarray[ offset + 1 ] = this._y;\r\n\t\t\tarray[ offset + 2 ] = this._z;\r\n\t\t\tarray[ offset + 3 ] = this._w;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tonChange: function ( callback ) {\r\n\t\r\n\t\t\tthis.onChangeCallback = callback;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tonChangeCallback: function () {}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Quaternion.slerp = function ( qa, qb, qm, t ) {\r\n\t\r\n\t\treturn qm.copy( qa ).slerp( qb, t );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Vector2.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author philogb / http://blog.thejit.org/\r\n\t * @author egraether / http://egraether.com/\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t */\r\n\t\r\n\tTHREE.Vector2 = function ( x, y ) {\r\n\t\r\n\t\tthis.x = x || 0;\r\n\t\tthis.y = y || 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Vector2.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Vector2,\r\n\t\r\n\t\tset: function ( x, y ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( x ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( y ) {\r\n\t\r\n\t\t\tthis.y = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetComponent: function ( index, value ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: this.x = value; break;\r\n\t\t\t\tcase 1: this.y = value; break;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetComponent: function ( index ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: return this.x;\r\n\t\t\t\tcase 1: return this.y;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this.x, this.y );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( v ) {\r\n\t\r\n\t\t\tthis.x = v.x;\r\n\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tadd: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.addVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x += v.x;\r\n\t\t\tthis.y += v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x += s;\r\n\t\t\tthis.y += s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x + b.x;\r\n\t\t\tthis.y = a.y + b.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScaledVector: function ( v, s ) {\r\n\t\r\n\t\t\tthis.x += v.x * s;\r\n\t\t\tthis.y += v.y * s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsub: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.subVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x -= v.x;\r\n\t\t\tthis.y -= v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x -= s;\r\n\t\t\tthis.y -= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x - b.x;\r\n\t\t\tthis.y = a.y - b.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiply: function ( v ) {\r\n\t\r\n\t\t\tthis.x *= v.x;\r\n\t\t\tthis.y *= v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x *= s;\r\n\t\t\tthis.y *= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivide: function ( v ) {\r\n\t\r\n\t\t\tthis.x /= v.x;\r\n\t\t\tthis.y /= v.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivideScalar: function ( scalar ) {\r\n\t\r\n\t\t\tif ( scalar !== 0 ) {\r\n\t\r\n\t\t\t\tvar invScalar = 1 / scalar;\r\n\t\r\n\t\t\t\tthis.x *= invScalar;\r\n\t\t\t\tthis.y *= invScalar;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.x = 0;\r\n\t\t\t\tthis.y = 0;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmin: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x > v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y > v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmax: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x < v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclamp: function ( min, max ) {\r\n\t\r\n\t\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\t\r\n\t\t\tif ( this.x < min.x ) {\r\n\t\r\n\t\t\t\tthis.x = min.x;\r\n\t\r\n\t\t\t} else if ( this.x > max.x ) {\r\n\t\r\n\t\t\t\tthis.x = max.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < min.y ) {\r\n\t\r\n\t\t\t\tthis.y = min.y;\r\n\t\r\n\t\t\t} else if ( this.y > max.y ) {\r\n\t\r\n\t\t\t\tthis.y = max.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampScalar: function () {\r\n\t\r\n\t\t\tvar min, max;\r\n\t\r\n\t\t\treturn function clampScalar( minVal, maxVal ) {\r\n\t\r\n\t\t\t\tif ( min === undefined ) {\r\n\t\r\n\t\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\t\tmax = new THREE.Vector2();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tmin.set( minVal, minVal );\r\n\t\t\t\tmax.set( maxVal, maxVal );\r\n\t\r\n\t\t\t\treturn this.clamp( min, max );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tfloor: function () {\r\n\t\r\n\t\t\tthis.x = Math.floor( this.x );\r\n\t\t\tthis.y = Math.floor( this.y );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tceil: function () {\r\n\t\r\n\t\t\tthis.x = Math.ceil( this.x );\r\n\t\t\tthis.y = Math.ceil( this.y );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tround: function () {\r\n\t\r\n\t\t\tthis.x = Math.round( this.x );\r\n\t\t\tthis.y = Math.round( this.y );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\troundToZero: function () {\r\n\t\r\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnegate: function () {\r\n\t\r\n\t\t\tthis.x = - this.x;\r\n\t\t\tthis.y = - this.y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdot: function ( v ) {\r\n\t\r\n\t\t\treturn this.x * v.x + this.y * v.y;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthSq: function () {\r\n\t\r\n\t\t\treturn this.x * this.x + this.y * this.y;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlength: function () {\r\n\t\r\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthManhattan: function() {\r\n\t\r\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\treturn this.divideScalar( this.length() );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceTo: function ( v ) {\r\n\t\r\n\t\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToSquared: function ( v ) {\r\n\t\r\n\t\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\t\treturn dx * dx + dy * dy;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetLength: function ( l ) {\r\n\t\r\n\t\t\tvar oldLength = this.length();\r\n\t\r\n\t\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\t\r\n\t\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerp: function ( v, alpha ) {\r\n\t\r\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerpVectors: function ( v1, v2, alpha ) {\r\n\t\r\n\t\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( v ) {\r\n\t\r\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.x = array[ offset ];\r\n\t\t\tthis.y = array[ offset + 1 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this.x;\r\n\t\t\tarray[ offset + 1 ] = this.y;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromAttribute: function ( attribute, index, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tindex = index * attribute.itemSize + offset;\r\n\t\r\n\t\t\tthis.x = attribute.array[ index ];\r\n\t\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Vector3.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author *kile / http://kile.stravaganza.org/\r\n\t * @author philogb / http://blog.thejit.org/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author egraether / http://egraether.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.Vector3 = function ( x, y, z ) {\r\n\t\r\n\t\tthis.x = x || 0;\r\n\t\tthis.y = y || 0;\r\n\t\tthis.z = z || 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Vector3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Vector3,\r\n\t\r\n\t\tset: function ( x, y, z ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.z = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( x ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( y ) {\r\n\t\r\n\t\t\tthis.y = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetZ: function ( z ) {\r\n\t\r\n\t\t\tthis.z = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetComponent: function ( index, value ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: this.x = value; break;\r\n\t\t\t\tcase 1: this.y = value; break;\r\n\t\t\t\tcase 2: this.z = value; break;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetComponent: function ( index ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: return this.x;\r\n\t\t\t\tcase 1: return this.y;\r\n\t\t\t\tcase 2: return this.z;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( v ) {\r\n\t\r\n\t\t\tthis.x = v.x;\r\n\t\t\tthis.y = v.y;\r\n\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tadd: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.addVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x += v.x;\r\n\t\t\tthis.y += v.y;\r\n\t\t\tthis.z += v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x += s;\r\n\t\t\tthis.y += s;\r\n\t\t\tthis.z += s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x + b.x;\r\n\t\t\tthis.y = a.y + b.y;\r\n\t\t\tthis.z = a.z + b.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScaledVector: function ( v, s ) {\r\n\t\r\n\t\t\tthis.x += v.x * s;\r\n\t\t\tthis.y += v.y * s;\r\n\t\t\tthis.z += v.z * s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsub: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.subVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x -= v.x;\r\n\t\t\tthis.y -= v.y;\r\n\t\t\tthis.z -= v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x -= s;\r\n\t\t\tthis.y -= s;\r\n\t\t\tthis.z -= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x - b.x;\r\n\t\t\tthis.y = a.y - b.y;\r\n\t\t\tthis.z = a.z - b.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiply: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.multiplyVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x *= v.x;\r\n\t\t\tthis.y *= v.y;\r\n\t\t\tthis.z *= v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( scalar ) {\r\n\t\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x * b.x;\r\n\t\t\tthis.y = a.y * b.y;\r\n\t\t\tthis.z = a.z * b.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyEuler: function () {\r\n\t\r\n\t\t\tvar quaternion;\r\n\t\r\n\t\t\treturn function applyEuler( euler ) {\r\n\t\r\n\t\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyAxisAngle: function () {\r\n\t\r\n\t\t\tvar quaternion;\r\n\t\r\n\t\t\treturn function applyAxisAngle( axis, angle ) {\r\n\t\r\n\t\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyMatrix3: function ( m ) {\r\n\t\r\n\t\t\tvar x = this.x;\r\n\t\t\tvar y = this.y;\r\n\t\t\tvar z = this.z;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\r\n\t\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function ( m ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4 affine matrix\r\n\t\r\n\t\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\r\n\t\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyProjection: function ( m ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4 projection matrix\r\n\t\r\n\t\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\t\r\n\t\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyQuaternion: function ( q ) {\r\n\t\r\n\t\t\tvar x = this.x;\r\n\t\t\tvar y = this.y;\r\n\t\t\tvar z = this.z;\r\n\t\r\n\t\t\tvar qx = q.x;\r\n\t\t\tvar qy = q.y;\r\n\t\t\tvar qz = q.z;\r\n\t\t\tvar qw = q.w;\r\n\t\r\n\t\t\t// calculate quat * vector\r\n\t\r\n\t\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\t\r\n\t\t\t// calculate result * inverse quat\r\n\t\r\n\t\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tproject: function () {\r\n\t\r\n\t\t\tvar matrix;\r\n\t\r\n\t\t\treturn function project( camera ) {\r\n\t\r\n\t\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\t\treturn this.applyProjection( matrix );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tunproject: function () {\r\n\t\r\n\t\t\tvar matrix;\r\n\t\r\n\t\t\treturn function unproject( camera ) {\r\n\t\r\n\t\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\t\treturn this.applyProjection( matrix );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttransformDirection: function ( m ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t\t// vector interpreted as a direction\r\n\t\r\n\t\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\r\n\t\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\t\r\n\t\t\tthis.normalize();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivide: function ( v ) {\r\n\t\r\n\t\t\tthis.x /= v.x;\r\n\t\t\tthis.y /= v.y;\r\n\t\t\tthis.z /= v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivideScalar: function ( scalar ) {\r\n\t\r\n\t\t\tif ( scalar !== 0 ) {\r\n\t\r\n\t\t\t\tvar invScalar = 1 / scalar;\r\n\t\r\n\t\t\t\tthis.x *= invScalar;\r\n\t\t\t\tthis.y *= invScalar;\r\n\t\t\t\tthis.z *= invScalar;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.x = 0;\r\n\t\t\t\tthis.y = 0;\r\n\t\t\t\tthis.z = 0;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmin: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x > v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y > v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z > v.z ) {\r\n\t\r\n\t\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmax: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x < v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z < v.z ) {\r\n\t\r\n\t\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclamp: function ( min, max ) {\r\n\t\r\n\t\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\t\r\n\t\t\tif ( this.x < min.x ) {\r\n\t\r\n\t\t\t\tthis.x = min.x;\r\n\t\r\n\t\t\t} else if ( this.x > max.x ) {\r\n\t\r\n\t\t\t\tthis.x = max.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < min.y ) {\r\n\t\r\n\t\t\t\tthis.y = min.y;\r\n\t\r\n\t\t\t} else if ( this.y > max.y ) {\r\n\t\r\n\t\t\t\tthis.y = max.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z < min.z ) {\r\n\t\r\n\t\t\t\tthis.z = min.z;\r\n\t\r\n\t\t\t} else if ( this.z > max.z ) {\r\n\t\r\n\t\t\t\tthis.z = max.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampScalar: function () {\r\n\t\r\n\t\t\tvar min, max;\r\n\t\r\n\t\t\treturn function clampScalar( minVal, maxVal ) {\r\n\t\r\n\t\t\t\tif ( min === undefined ) {\r\n\t\r\n\t\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\t\tmax = new THREE.Vector3();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\t\r\n\t\t\t\treturn this.clamp( min, max );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tfloor: function () {\r\n\t\r\n\t\t\tthis.x = Math.floor( this.x );\r\n\t\t\tthis.y = Math.floor( this.y );\r\n\t\t\tthis.z = Math.floor( this.z );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tceil: function () {\r\n\t\r\n\t\t\tthis.x = Math.ceil( this.x );\r\n\t\t\tthis.y = Math.ceil( this.y );\r\n\t\t\tthis.z = Math.ceil( this.z );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tround: function () {\r\n\t\r\n\t\t\tthis.x = Math.round( this.x );\r\n\t\t\tthis.y = Math.round( this.y );\r\n\t\t\tthis.z = Math.round( this.z );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\troundToZero: function () {\r\n\t\r\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnegate: function () {\r\n\t\r\n\t\t\tthis.x = - this.x;\r\n\t\t\tthis.y = - this.y;\r\n\t\t\tthis.z = - this.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdot: function ( v ) {\r\n\t\r\n\t\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthSq: function () {\r\n\t\r\n\t\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlength: function () {\r\n\t\r\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthManhattan: function () {\r\n\t\r\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\treturn this.divideScalar( this.length() );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetLength: function ( l ) {\r\n\t\r\n\t\t\tvar oldLength = this.length();\r\n\t\r\n\t\t\tif ( oldLength !== 0 && l !== oldLength  ) {\r\n\t\r\n\t\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerp: function ( v, alpha ) {\r\n\t\r\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerpVectors: function ( v1, v2, alpha ) {\r\n\t\r\n\t\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcross: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.crossVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar x = this.x, y = this.y, z = this.z;\r\n\t\r\n\t\t\tthis.x = y * v.z - z * v.y;\r\n\t\t\tthis.y = z * v.x - x * v.z;\r\n\t\t\tthis.z = x * v.y - y * v.x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcrossVectors: function ( a, b ) {\r\n\t\r\n\t\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\t\r\n\t\t\tthis.x = ay * bz - az * by;\r\n\t\t\tthis.y = az * bx - ax * bz;\r\n\t\t\tthis.z = ax * by - ay * bx;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tprojectOnVector: function () {\r\n\t\r\n\t\t\tvar v1, dot;\r\n\t\r\n\t\t\treturn function projectOnVector( vector ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\tv1.copy( vector ).normalize();\r\n\t\r\n\t\t\t\tdot = this.dot( v1 );\r\n\t\r\n\t\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tprojectOnPlane: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function projectOnPlane( planeNormal ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\t\r\n\t\t\t\treturn this.sub( v1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\treflect: function () {\r\n\t\r\n\t\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t\t// normal is assumed to have unit length\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function reflect( normal ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tangleTo: function ( v ) {\r\n\t\r\n\t\t\tvar theta = this.dot( v ) / ( this.length() * v.length() );\r\n\t\r\n\t\t\t// clamp, to handle numerical problems\r\n\t\r\n\t\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceTo: function ( v ) {\r\n\t\r\n\t\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToSquared: function ( v ) {\r\n\t\r\n\t\t\tvar dx = this.x - v.x;\r\n\t\t\tvar dy = this.y - v.y;\r\n\t\t\tvar dz = this.z - v.z;\r\n\t\r\n\t\t\treturn dx * dx + dy * dy + dz * dz;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetEulerFromRotationMatrix: function ( m, order ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetEulerFromQuaternion: function ( q, order ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetPositionFromMatrix: function ( m ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\t\r\n\t\t\treturn this.setFromMatrixPosition( m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetScaleFromMatrix: function ( m ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\t\r\n\t\t\treturn this.setFromMatrixScale( m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\t\r\n\t\t\treturn this.setFromMatrixColumn( index, matrix );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromMatrixPosition: function ( m ) {\r\n\t\r\n\t\t\tthis.x = m.elements[ 12 ];\r\n\t\t\tthis.y = m.elements[ 13 ];\r\n\t\t\tthis.z = m.elements[ 14 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromMatrixScale: function ( m ) {\r\n\t\r\n\t\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[ 2 ] ).length();\r\n\t\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[ 6 ] ).length();\r\n\t\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\r\n\t\r\n\t\t\tthis.x = sx;\r\n\t\t\tthis.y = sy;\r\n\t\t\tthis.z = sz;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromMatrixColumn: function ( index, matrix ) {\r\n\t\r\n\t\t\tvar offset = index * 4;\r\n\t\r\n\t\t\tvar me = matrix.elements;\r\n\t\r\n\t\t\tthis.x = me[ offset ];\r\n\t\t\tthis.y = me[ offset + 1 ];\r\n\t\t\tthis.z = me[ offset + 2 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( v ) {\r\n\t\r\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.x = array[ offset ];\r\n\t\t\tthis.y = array[ offset + 1 ];\r\n\t\t\tthis.z = array[ offset + 2 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this.x;\r\n\t\t\tarray[ offset + 1 ] = this.y;\r\n\t\t\tarray[ offset + 2 ] = this.z;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromAttribute: function ( attribute, index, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tindex = index * attribute.itemSize + offset;\r\n\t\r\n\t\t\tthis.x = attribute.array[ index ];\r\n\t\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Vector4.js\r\n\t\r\n\t/**\r\n\t * @author supereggbert / http://www.paulbrunt.co.uk/\r\n\t * @author philogb / http://blog.thejit.org/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author egraether / http://egraether.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.Vector4 = function ( x, y, z, w ) {\r\n\t\r\n\t\tthis.x = x || 0;\r\n\t\tthis.y = y || 0;\r\n\t\tthis.z = z || 0;\r\n\t\tthis.w = ( w !== undefined ) ? w : 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Vector4.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Vector4,\r\n\t\r\n\t\tset: function ( x, y, z, w ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.z = z;\r\n\t\t\tthis.w = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( x ) {\r\n\t\r\n\t\t\tthis.x = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( y ) {\r\n\t\r\n\t\t\tthis.y = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetZ: function ( z ) {\r\n\t\r\n\t\t\tthis.z = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetW: function ( w ) {\r\n\t\r\n\t\t\tthis.w = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetComponent: function ( index, value ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: this.x = value; break;\r\n\t\t\t\tcase 1: this.y = value; break;\r\n\t\t\t\tcase 2: this.z = value; break;\r\n\t\t\t\tcase 3: this.w = value; break;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetComponent: function ( index ) {\r\n\t\r\n\t\t\tswitch ( index ) {\r\n\t\r\n\t\t\t\tcase 0: return this.x;\r\n\t\t\t\tcase 1: return this.y;\r\n\t\t\t\tcase 2: return this.z;\r\n\t\t\t\tcase 3: return this.w;\r\n\t\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( v ) {\r\n\t\r\n\t\t\tthis.x = v.x;\r\n\t\t\tthis.y = v.y;\r\n\t\t\tthis.z = v.z;\r\n\t\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tadd: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.addVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x += v.x;\r\n\t\t\tthis.y += v.y;\r\n\t\t\tthis.z += v.z;\r\n\t\t\tthis.w += v.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x += s;\r\n\t\t\tthis.y += s;\r\n\t\t\tthis.z += s;\r\n\t\t\tthis.w += s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x + b.x;\r\n\t\t\tthis.y = a.y + b.y;\r\n\t\t\tthis.z = a.z + b.z;\r\n\t\t\tthis.w = a.w + b.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddScaledVector: function ( v, s ) {\r\n\t\r\n\t\t\tthis.x += v.x * s;\r\n\t\t\tthis.y += v.y * s;\r\n\t\t\tthis.z += v.z * s;\r\n\t\t\tthis.w += v.w * s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsub: function ( v, w ) {\r\n\t\r\n\t\t\tif ( w !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\t\treturn this.subVectors( v, w );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.x -= v.x;\r\n\t\t\tthis.y -= v.y;\r\n\t\t\tthis.z -= v.z;\r\n\t\t\tthis.w -= v.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubScalar: function ( s ) {\r\n\t\r\n\t\t\tthis.x -= s;\r\n\t\t\tthis.y -= s;\r\n\t\t\tthis.z -= s;\r\n\t\t\tthis.w -= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsubVectors: function ( a, b ) {\r\n\t\r\n\t\t\tthis.x = a.x - b.x;\r\n\t\t\tthis.y = a.y - b.y;\r\n\t\t\tthis.z = a.z - b.z;\r\n\t\t\tthis.w = a.w - b.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( scalar ) {\r\n\t\r\n\t\t\tthis.x *= scalar;\r\n\t\t\tthis.y *= scalar;\r\n\t\t\tthis.z *= scalar;\r\n\t\t\tthis.w *= scalar;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function ( m ) {\r\n\t\r\n\t\t\tvar x = this.x;\r\n\t\t\tvar y = this.y;\r\n\t\t\tvar z = this.z;\r\n\t\t\tvar w = this.w;\r\n\t\r\n\t\t\tvar e = m.elements;\r\n\t\r\n\t\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdivideScalar: function ( scalar ) {\r\n\t\r\n\t\t\tif ( scalar !== 0 ) {\r\n\t\r\n\t\t\t\tvar invScalar = 1 / scalar;\r\n\t\r\n\t\t\t\tthis.x *= invScalar;\r\n\t\t\t\tthis.y *= invScalar;\r\n\t\t\t\tthis.z *= invScalar;\r\n\t\t\t\tthis.w *= invScalar;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.x = 0;\r\n\t\t\t\tthis.y = 0;\r\n\t\t\t\tthis.z = 0;\r\n\t\t\t\tthis.w = 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\t\r\n\t\t\t// q is assumed to be normalized\r\n\t\r\n\t\t\tthis.w = 2 * Math.acos( q.w );\r\n\t\r\n\t\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\t\r\n\t\t\tif ( s < 0.0001 ) {\r\n\t\r\n\t\t\t\t this.x = 1;\r\n\t\t\t\t this.y = 0;\r\n\t\t\t\t this.z = 0;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t this.x = q.x / s;\r\n\t\t\t\t this.y = q.y / s;\r\n\t\t\t\t this.z = q.z / s;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\t\r\n\t\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\t\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\t\r\n\t\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\t\r\n\t\t\t\tte = m.elements,\r\n\t\r\n\t\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\t\r\n\t\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\r\n\t\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\r\n\t\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\t\r\n\t\t\t\t// singularity found\r\n\t\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t\t// in leading diagonal and zero in other terms\r\n\t\r\n\t\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\r\n\t\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\r\n\t\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\r\n\t\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\t\r\n\t\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\t\r\n\t\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\t\r\n\t\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// otherwise this singularity is angle = 180\r\n\t\r\n\t\t\t\tangle = Math.PI;\r\n\t\r\n\t\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\t\r\n\t\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\t\r\n\t\t\t\t\t// m11 is the largest diagonal term\r\n\t\r\n\t\t\t\t\tif ( xx < epsilon ) {\r\n\t\r\n\t\t\t\t\t\tx = 0;\r\n\t\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\t\tz = 0.707106781;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\t\tz = xz / x;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else if ( yy > zz ) {\r\n\t\r\n\t\t\t\t\t// m22 is the largest diagonal term\r\n\t\r\n\t\t\t\t\tif ( yy < epsilon ) {\r\n\t\r\n\t\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\t\ty = 0;\r\n\t\t\t\t\t\tz = 0.707106781;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\t\tz = yz / y;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\t\r\n\t\t\t\t\tif ( zz < epsilon ) {\r\n\t\r\n\t\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\t\tz = 0;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\t\ty = yz / z;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.set( x, y, z, angle );\r\n\t\r\n\t\t\t\treturn this; // return 180 deg rotation\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// as we have reached here there are no singularities so we can handle normally\r\n\t\r\n\t\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\r\n\t\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\r\n\t\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\t\r\n\t\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\t\r\n\t\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t\t// caught by singularity test above, but I've left it in just in case\r\n\t\r\n\t\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmin: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x > v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y > v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z > v.z ) {\r\n\t\r\n\t\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.w > v.w ) {\r\n\t\r\n\t\t\t\tthis.w = v.w;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmax: function ( v ) {\r\n\t\r\n\t\t\tif ( this.x < v.x ) {\r\n\t\r\n\t\t\t\tthis.x = v.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < v.y ) {\r\n\t\r\n\t\t\t\tthis.y = v.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z < v.z ) {\r\n\t\r\n\t\t\t\tthis.z = v.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.w < v.w ) {\r\n\t\r\n\t\t\t\tthis.w = v.w;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclamp: function ( min, max ) {\r\n\t\r\n\t\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\t\r\n\t\t\tif ( this.x < min.x ) {\r\n\t\r\n\t\t\t\tthis.x = min.x;\r\n\t\r\n\t\t\t} else if ( this.x > max.x ) {\r\n\t\r\n\t\t\t\tthis.x = max.x;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.y < min.y ) {\r\n\t\r\n\t\t\t\tthis.y = min.y;\r\n\t\r\n\t\t\t} else if ( this.y > max.y ) {\r\n\t\r\n\t\t\t\tthis.y = max.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.z < min.z ) {\r\n\t\r\n\t\t\t\tthis.z = min.z;\r\n\t\r\n\t\t\t} else if ( this.z > max.z ) {\r\n\t\r\n\t\t\t\tthis.z = max.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.w < min.w ) {\r\n\t\r\n\t\t\t\tthis.w = min.w;\r\n\t\r\n\t\t\t} else if ( this.w > max.w ) {\r\n\t\r\n\t\t\t\tthis.w = max.w;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampScalar: function () {\r\n\t\r\n\t\t\tvar min, max;\r\n\t\r\n\t\t\treturn function clampScalar( minVal, maxVal ) {\r\n\t\r\n\t\t\t\tif ( min === undefined ) {\r\n\t\r\n\t\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\t\tmax = new THREE.Vector4();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\t\r\n\t\t\t\treturn this.clamp( min, max );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tfloor: function () {\r\n\t\r\n\t\t\tthis.x = Math.floor( this.x );\r\n\t\t\tthis.y = Math.floor( this.y );\r\n\t\t\tthis.z = Math.floor( this.z );\r\n\t\t\tthis.w = Math.floor( this.w );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tceil: function () {\r\n\t\r\n\t\t\tthis.x = Math.ceil( this.x );\r\n\t\t\tthis.y = Math.ceil( this.y );\r\n\t\t\tthis.z = Math.ceil( this.z );\r\n\t\t\tthis.w = Math.ceil( this.w );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tround: function () {\r\n\t\r\n\t\t\tthis.x = Math.round( this.x );\r\n\t\t\tthis.y = Math.round( this.y );\r\n\t\t\tthis.z = Math.round( this.z );\r\n\t\t\tthis.w = Math.round( this.w );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\troundToZero: function () {\r\n\t\r\n\t\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnegate: function () {\r\n\t\r\n\t\t\tthis.x = - this.x;\r\n\t\t\tthis.y = - this.y;\r\n\t\t\tthis.z = - this.z;\r\n\t\t\tthis.w = - this.w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdot: function ( v ) {\r\n\t\r\n\t\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthSq: function () {\r\n\t\r\n\t\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlength: function () {\r\n\t\r\n\t\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlengthManhattan: function () {\r\n\t\r\n\t\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\treturn this.divideScalar( this.length() );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetLength: function ( l ) {\r\n\t\r\n\t\t\tvar oldLength = this.length();\r\n\t\r\n\t\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\t\r\n\t\t\t\tthis.multiplyScalar( l / oldLength );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerp: function ( v, alpha ) {\r\n\t\r\n\t\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlerpVectors: function ( v1, v2, alpha ) {\r\n\t\r\n\t\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( v ) {\r\n\t\r\n\t\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.x = array[ offset ];\r\n\t\t\tthis.y = array[ offset + 1 ];\r\n\t\t\tthis.z = array[ offset + 2 ];\r\n\t\t\tthis.w = array[ offset + 3 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this.x;\r\n\t\t\tarray[ offset + 1 ] = this.y;\r\n\t\t\tarray[ offset + 2 ] = this.z;\r\n\t\t\tarray[ offset + 3 ] = this.w;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromAttribute: function ( attribute, index, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tindex = index * attribute.itemSize + offset;\r\n\t\r\n\t\t\tthis.x = attribute.array[ index ];\r\n\t\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\t\tthis.w = attribute.array[ index + 3 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Euler.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Euler = function ( x, y, z, order ) {\r\n\t\r\n\t\tthis._x = x || 0;\r\n\t\tthis._y = y || 0;\r\n\t\tthis._z = z || 0;\r\n\t\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\t\r\n\tTHREE.Euler.DefaultOrder = 'XYZ';\r\n\t\r\n\tTHREE.Euler.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Euler,\r\n\t\r\n\t\tget x () {\r\n\t\r\n\t\t\treturn this._x;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset x ( value ) {\r\n\t\r\n\t\t\tthis._x = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget y () {\r\n\t\r\n\t\t\treturn this._y;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset y ( value ) {\r\n\t\r\n\t\t\tthis._y = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget z () {\r\n\t\r\n\t\t\treturn this._z;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset z ( value ) {\r\n\t\r\n\t\t\tthis._z = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget order () {\r\n\t\r\n\t\t\treturn this._order;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset order ( value ) {\r\n\t\r\n\t\t\tthis._order = value;\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset: function ( x, y, z, order ) {\r\n\t\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\t\t\tthis._order = order || this._order;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor( this._x, this._y, this._z, this._order);\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( euler ) {\r\n\t\r\n\t\t\tthis._x = euler._x;\r\n\t\t\tthis._y = euler._y;\r\n\t\t\tthis._z = euler._z;\r\n\t\t\tthis._order = euler._order;\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\t\r\n\t\t\tvar clamp = THREE.Math.clamp;\r\n\t\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\t\r\n\t\t\tvar te = m.elements;\r\n\t\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\t\r\n\t\t\torder = order || this._order;\r\n\t\r\n\t\t\tif ( order === 'XYZ' ) {\r\n\t\r\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._z = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'YXZ' ) {\r\n\t\r\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\t\tthis._z = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'ZXY' ) {\r\n\t\r\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._y = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'ZYX' ) {\r\n\t\r\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'YZX' ) {\r\n\t\r\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._x = 0;\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( order === 'XZY' ) {\r\n\t\r\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\t\r\n\t\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\t\tthis._y = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis._order = order;\r\n\t\r\n\t\t\tif ( update !== false ) this.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromQuaternion: function () {\r\n\t\r\n\t\t\tvar matrix;\r\n\t\r\n\t\t\treturn function ( q, order, update ) {\r\n\t\r\n\t\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\t\t\t\tthis.setFromRotationMatrix( matrix, order, update );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tsetFromVector3: function ( v, order ) {\r\n\t\r\n\t\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\t\r\n\t\t},\r\n\t\r\n\t\treorder: function () {\r\n\t\r\n\t\t\t// WARNING: this discards revolution information -bhouston\r\n\t\r\n\t\t\tvar q = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( newOrder ) {\r\n\t\r\n\t\t\t\tq.setFromEuler( this );\r\n\t\t\t\tthis.setFromQuaternion( q, newOrder );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tequals: function ( euler ) {\r\n\t\r\n\t\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array ) {\r\n\t\r\n\t\t\tthis._x = array[ 0 ];\r\n\t\t\tthis._y = array[ 1 ];\r\n\t\t\tthis._z = array[ 2 ];\r\n\t\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\t\r\n\t\t\tthis.onChangeCallback();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function ( array, offset ) {\r\n\t\r\n\t\t\tif ( array === undefined ) array = [];\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tarray[ offset ] = this._x;\r\n\t\t\tarray[ offset + 1 ] = this._y;\r\n\t\t\tarray[ offset + 2 ] = this._z;\r\n\t\t\tarray[ offset + 3 ] = this._order;\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoVector3: function ( optionalResult ) {\r\n\t\r\n\t\t\tif ( optionalResult ) {\r\n\t\r\n\t\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tonChange: function ( callback ) {\r\n\t\r\n\t\t\tthis.onChangeCallback = callback;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tonChangeCallback: function () {}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Line3.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Line3 = function ( start, end ) {\r\n\t\r\n\t\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\t\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Line3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Line3,\r\n\t\r\n\t\tset: function ( start, end ) {\r\n\t\r\n\t\t\tthis.start.copy( start );\r\n\t\t\tthis.end.copy( end );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( line ) {\r\n\t\r\n\t\t\tthis.start.copy( line.start );\r\n\t\t\tthis.end.copy( line.end );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdelta: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.subVectors( this.end, this.start );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceSq: function () {\r\n\t\r\n\t\t\treturn this.start.distanceToSquared( this.end );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistance: function () {\r\n\t\r\n\t\t\treturn this.start.distanceTo( this.end );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tat: function ( t, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclosestPointToPointParameter: function () {\r\n\t\r\n\t\t\tvar startP = new THREE.Vector3();\r\n\t\t\tvar startEnd = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( point, clampToLine ) {\r\n\t\r\n\t\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\t\r\n\t\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\t\r\n\t\t\t\tvar t = startEnd_startP / startEnd2;\r\n\t\r\n\t\t\t\tif ( clampToLine ) {\r\n\t\r\n\t\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn t;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\t\r\n\t\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function ( matrix ) {\r\n\t\r\n\t\t\tthis.start.applyMatrix4( matrix );\r\n\t\t\tthis.end.applyMatrix4( matrix );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( line ) {\r\n\t\r\n\t\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Box2.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Box2 = function ( min, max ) {\r\n\t\r\n\t\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( Infinity, Infinity );\r\n\t\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Box2.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Box2,\r\n\t\r\n\t\tset: function ( min, max ) {\r\n\t\r\n\t\t\tthis.min.copy( min );\r\n\t\t\tthis.max.copy( max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromPoints: function ( points ) {\r\n\t\r\n\t\t\tthis.makeEmpty();\r\n\t\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.expandByPoint( points[ i ] )\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromCenterAndSize: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector2();\r\n\t\r\n\t\t\treturn function ( center, size ) {\r\n\t\r\n\t\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\t\tthis.max.copy( center ).add( halfSize );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( box ) {\r\n\t\r\n\t\t\tthis.min.copy( box.min );\r\n\t\t\tthis.max.copy( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeEmpty: function () {\r\n\t\r\n\t\t\tthis.min.x = this.min.y = Infinity;\r\n\t\t\tthis.max.x = this.max.y = - Infinity;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tempty: function () {\r\n\t\r\n\t\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\t\r\n\t\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsize: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\t\treturn result.subVectors( this.max, this.min );\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByPoint: function ( point ) {\r\n\t\r\n\t\t\tthis.min.min( point );\r\n\t\t\tthis.max.max( point );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByVector: function ( vector ) {\r\n\t\r\n\t\t\tthis.min.sub( vector );\r\n\t\t\tthis.max.add( vector );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByScalar: function ( scalar ) {\r\n\t\r\n\t\t\tthis.min.addScalar( - scalar );\r\n\t\t\tthis.max.addScalar( scalar );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\t\r\n\t\t\t\treturn false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsBox: function ( box ) {\r\n\t\r\n\t\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetParameter: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\t// This can potentially have a divide by zero if the box\r\n\t\t\t// has a size dimension of 0.\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\r\n\t\t\treturn result.set(\r\n\t\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t\t);\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisIntersectionBox: function ( box ) {\r\n\t\r\n\t\t\t// using 6 splitting planes to rule out intersections.\r\n\t\r\n\t\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\t\r\n\t\t\t\treturn false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector2();\r\n\t\r\n\t\t\treturn function ( point ) {\r\n\t\r\n\t\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\t\treturn clampedPoint.sub( point ).length();\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tintersect: function ( box ) {\r\n\t\r\n\t\t\tthis.min.max( box.min );\r\n\t\t\tthis.max.min( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tunion: function ( box ) {\r\n\t\r\n\t\t\tthis.min.min( box.min );\r\n\t\t\tthis.max.max( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranslate: function ( offset ) {\r\n\t\r\n\t\t\tthis.min.add( offset );\r\n\t\t\tthis.max.add( offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( box ) {\r\n\t\r\n\t\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Box3.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.Box3 = function ( min, max ) {\r\n\t\r\n\t\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( Infinity, Infinity, Infinity );\r\n\t\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Box3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Box3,\r\n\t\r\n\t\tset: function ( min, max ) {\r\n\t\r\n\t\t\tthis.min.copy( min );\r\n\t\t\tthis.max.copy( max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromPoints: function ( points ) {\r\n\t\r\n\t\t\tthis.makeEmpty();\r\n\t\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.expandByPoint( points[ i ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromCenterAndSize: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( center, size ) {\r\n\t\r\n\t\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\r\n\t\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\t\tthis.max.copy( center ).add( halfSize );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tsetFromObject: function () {\r\n\t\r\n\t\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t\t// accounting for both the object's, and children's, world transforms\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( object ) {\r\n\t\r\n\t\t\t\tvar scope = this;\r\n\t\r\n\t\t\t\tobject.updateMatrixWorld( true );\r\n\t\r\n\t\t\t\tthis.makeEmpty();\r\n\t\r\n\t\t\t\tobject.traverse( function ( node ) {\r\n\t\r\n\t\t\t\t\tvar geometry = node.geometry;\r\n\t\r\n\t\t\t\t\tif ( geometry !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\t\t\t\tvar vertices = geometry.vertices;\r\n\t\r\n\t\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\r\n\t\r\n\t\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\t\r\n\t\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\r\n\t\r\n\t\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\t\tv1.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\t\r\n\t\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\t\r\n\t\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( box ) {\r\n\t\r\n\t\t\tthis.min.copy( box.min );\r\n\t\t\tthis.max.copy( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeEmpty: function () {\r\n\t\r\n\t\t\tthis.min.x = this.min.y = this.min.z = Infinity;\r\n\t\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tempty: function () {\r\n\t\r\n\t\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\t\r\n\t\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsize: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.subVectors( this.max, this.min );\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByPoint: function ( point ) {\r\n\t\r\n\t\t\tthis.min.min( point );\r\n\t\t\tthis.max.max( point );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByVector: function ( vector ) {\r\n\t\r\n\t\t\tthis.min.sub( vector );\r\n\t\t\tthis.max.add( vector );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\texpandByScalar: function ( scalar ) {\r\n\t\r\n\t\t\tthis.min.addScalar( - scalar );\r\n\t\t\tthis.max.addScalar( scalar );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t\t     point.y < this.min.y || point.y > this.max.y ||\r\n\t\t\t     point.z < this.min.z || point.z > this.max.z ) {\r\n\t\r\n\t\t\t\treturn false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsBox: function ( box ) {\r\n\t\r\n\t\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetParameter: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\t// This can potentially have a divide by zero if the box\r\n\t\t\t// has a size dimension of 0.\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\treturn result.set(\r\n\t\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t\t);\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisIntersectionBox: function ( box ) {\r\n\t\r\n\t\t\t// using 6 splitting planes to rule out intersections.\r\n\t\r\n\t\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t\t     box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t\t     box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\t\r\n\t\t\t\treturn false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( point ) {\r\n\t\r\n\t\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\t\treturn clampedPoint.sub( point ).length();\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tgetBoundingSphere: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\t\r\n\t\t\t\tresult.center = this.center();\r\n\t\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\t\r\n\t\t\t\treturn result;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tintersect: function ( box ) {\r\n\t\r\n\t\t\tthis.min.max( box.min );\r\n\t\t\tthis.max.min( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tunion: function ( box ) {\r\n\t\r\n\t\t\tthis.min.min( box.min );\r\n\t\t\tthis.max.max( box.max );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function () {\r\n\t\r\n\t\t\tvar points = [\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3(),\r\n\t\t\t\tnew THREE.Vector3()\r\n\t\t\t];\r\n\t\r\n\t\t\treturn function ( matrix ) {\r\n\t\r\n\t\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );  // 111\r\n\t\r\n\t\t\t\tthis.makeEmpty();\r\n\t\t\t\tthis.setFromPoints( points );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function ( offset ) {\r\n\t\r\n\t\t\tthis.min.add( offset );\r\n\t\t\tthis.max.add( offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( box ) {\r\n\t\r\n\t\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Matrix3.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Matrix3 = function () {\r\n\t\r\n\t\tthis.elements = new Float32Array( [\r\n\t\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\t\r\n\t\t] );\r\n\t\r\n\t\tif ( arguments.length > 0 ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Matrix3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Matrix3,\r\n\t\r\n\t\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\r\n\t\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\r\n\t\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tidentity: function () {\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t1, 0, 0,\r\n\t\t\t\t0, 1, 0,\r\n\t\t\t\t0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().fromArray( this.elements );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( m ) {\r\n\t\r\n\t\t\tvar me = m.elements;\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix3( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3Array: function ( a ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\t\treturn this.applyToVector3Array( a );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyToVector3Array: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function ( array, offset, length ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\t\tif ( length === undefined ) length = array.length;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\t\r\n\t\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\t\tv1.applyMatrix3( this );\r\n\t\t\t\t\tv1.toArray( array, j );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn array;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyToBuffer: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\t\r\n\t\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\t\tv1.z = buffer.getZ( j );\r\n\t\r\n\t\t\t\t\tv1.applyMatrix3( this );\r\n\t\r\n\t\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn buffer;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmultiplyScalar: function ( s ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdeterminant: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\t\r\n\t\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetInverse: function ( matrix, throwOnInvertible ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4\r\n\t\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\r\n\t\r\n\t\t\tvar me = matrix.elements;\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\r\n\t\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\r\n\t\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\r\n\t\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\r\n\t\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\r\n\t\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\r\n\t\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\r\n\t\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\r\n\t\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\r\n\t\r\n\t\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\r\n\t\r\n\t\t\t// no inverse\r\n\t\r\n\t\t\tif ( det === 0 ) {\r\n\t\r\n\t\t\t\tvar msg = \"Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\t\r\n\t\t\t\tif ( throwOnInvertible || false ) {\r\n\t\r\n\t\t\t\t\tthrow new Error( msg );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tconsole.warn( msg );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.identity();\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.multiplyScalar( 1.0 / det );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranspose: function () {\r\n\t\r\n\t\t\tvar tmp, m = this.elements;\r\n\t\r\n\t\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tflattenToArrayOffset: function ( array, offset ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tarray[ offset ] = te[ 0 ];\r\n\t\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\r\n\t\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\r\n\t\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetNormalMatrix: function ( m ) {\r\n\t\r\n\t\t\t// input: THREE.Matrix4\r\n\t\r\n\t\t\tthis.getInverse( m ).transpose();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttransposeIntoArray: function ( r ) {\r\n\t\r\n\t\t\tvar m = this.elements;\r\n\t\r\n\t\t\tr[ 0 ] = m[ 0 ];\r\n\t\t\tr[ 1 ] = m[ 3 ];\r\n\t\t\tr[ 2 ] = m[ 6 ];\r\n\t\t\tr[ 3 ] = m[ 1 ];\r\n\t\t\tr[ 4 ] = m[ 4 ];\r\n\t\t\tr[ 5 ] = m[ 7 ];\r\n\t\t\tr[ 6 ] = m[ 2 ];\r\n\t\t\tr[ 7 ] = m[ 5 ];\r\n\t\t\tr[ 8 ] = m[ 8 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array ) {\r\n\t\r\n\t\t\tthis.elements.set( array );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\treturn [\r\n\t\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\r\n\t\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\r\n\t\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\r\n\t\t\t];\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Matrix4.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author supereggbert / http://www.paulbrunt.co.uk/\r\n\t * @author philogb / http://blog.thejit.org/\r\n\t * @author jordi_ros / http://plattsoft.com\r\n\t * @author D1plo1d / http://github.com/D1plo1d\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author timknip / http://www.floorplanner.com/\r\n\t * @author bhouston / http://exocortex.com\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.Matrix4 = function () {\r\n\t\r\n\t\tthis.elements = new Float32Array( [\r\n\t\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t] );\r\n\t\r\n\t\tif ( arguments.length > 0 ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Matrix4.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Matrix4,\r\n\t\r\n\t\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tidentity: function () {\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t1, 0, 0, 0,\r\n\t\t\t\t0, 1, 0, 0,\r\n\t\t\t\t0, 0, 1, 0,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( m ) {\r\n\t\r\n\t\t\tthis.elements.set( m.elements );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\textractPosition: function ( m ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\t\treturn this.copyPosition( m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyPosition: function ( m ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\t\r\n\t\t\tte[ 12 ] = me[ 12 ];\r\n\t\t\tte[ 13 ] = me[ 13 ];\r\n\t\t\tte[ 14 ] = me[ 14 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\txAxis.set( te[ 0 ], te[ 1 ], te[ 2 ] );\r\n\t\t\tyAxis.set( te[ 4 ], te[ 5 ], te[ 6 ] );\r\n\t\t\tzAxis.set( te[ 8 ], te[ 9 ], te[ 10 ] );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\t\r\n\t\t\tthis.set(\r\n\t\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t\t0,       0,       0,       1\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\textractRotation: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function ( m ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\r\n\t\t\t\tvar te = this.elements;\r\n\t\t\t\tvar me = m.elements;\r\n\t\r\n\t\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\r\n\t\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\r\n\t\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\r\n\t\r\n\t\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\t\r\n\t\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\t\r\n\t\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmakeRotationFromEuler: function ( euler ) {\r\n\t\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\t\r\n\t\t\tif ( euler.order === 'XYZ' ) {\r\n\t\r\n\t\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\t\r\n\t\t\t\tte[ 0 ] = c * e;\r\n\t\t\t\tte[ 4 ] = - c * f;\r\n\t\t\t\tte[ 8 ] = d;\r\n\t\r\n\t\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\t\tte[ 9 ] = - b * c;\r\n\t\r\n\t\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\t\tte[ 10 ] = a * c;\r\n\t\r\n\t\t\t} else if ( euler.order === 'YXZ' ) {\r\n\t\r\n\t\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\t\r\n\t\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\t\tte[ 8 ] = a * d;\r\n\t\r\n\t\t\t\tte[ 1 ] = a * f;\r\n\t\t\t\tte[ 5 ] = a * e;\r\n\t\t\t\tte[ 9 ] = - b;\r\n\t\r\n\t\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\t\tte[ 10 ] = a * c;\r\n\t\r\n\t\t\t} else if ( euler.order === 'ZXY' ) {\r\n\t\r\n\t\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\t\r\n\t\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\t\tte[ 4 ] = - a * f;\r\n\t\t\t\tte[ 8 ] = de + cf * b;\r\n\t\r\n\t\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\t\tte[ 5 ] = a * e;\r\n\t\t\t\tte[ 9 ] = df - ce * b;\r\n\t\r\n\t\t\t\tte[ 2 ] = - a * d;\r\n\t\t\t\tte[ 6 ] = b;\r\n\t\t\t\tte[ 10 ] = a * c;\r\n\t\r\n\t\t\t} else if ( euler.order === 'ZYX' ) {\r\n\t\r\n\t\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\t\r\n\t\t\t\tte[ 0 ] = c * e;\r\n\t\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\t\tte[ 8 ] = ae * d + bf;\r\n\t\r\n\t\t\t\tte[ 1 ] = c * f;\r\n\t\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\t\tte[ 9 ] = af * d - be;\r\n\t\r\n\t\t\t\tte[ 2 ] = - d;\r\n\t\t\t\tte[ 6 ] = b * c;\r\n\t\t\t\tte[ 10 ] = a * c;\r\n\t\r\n\t\t\t} else if ( euler.order === 'YZX' ) {\r\n\t\r\n\t\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\t\r\n\t\t\t\tte[ 0 ] = c * e;\r\n\t\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\t\tte[ 8 ] = bc * f + ad;\r\n\t\r\n\t\t\t\tte[ 1 ] = f;\r\n\t\t\t\tte[ 5 ] = a * e;\r\n\t\t\t\tte[ 9 ] = - b * e;\r\n\t\r\n\t\t\t\tte[ 2 ] = - d * e;\r\n\t\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\t\tte[ 10 ] = ac - bd * f;\r\n\t\r\n\t\t\t} else if ( euler.order === 'XZY' ) {\r\n\t\r\n\t\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\t\r\n\t\t\t\tte[ 0 ] = c * e;\r\n\t\t\t\tte[ 4 ] = - f;\r\n\t\t\t\tte[ 8 ] = d * e;\r\n\t\r\n\t\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\t\tte[ 5 ] = a * e;\r\n\t\t\t\tte[ 9 ] = ad * f - bc;\r\n\t\r\n\t\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\t\tte[ 6 ] = b * e;\r\n\t\t\t\tte[ 10 ] = bd * f + ac;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// last column\r\n\t\t\tte[ 3 ] = 0;\r\n\t\t\tte[ 7 ] = 0;\r\n\t\t\tte[ 11 ] = 0;\r\n\t\r\n\t\t\t// bottom row\r\n\t\t\tte[ 12 ] = 0;\r\n\t\t\tte[ 13 ] = 0;\r\n\t\t\tte[ 14 ] = 0;\r\n\t\t\tte[ 15 ] = 1;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromQuaternion: function ( q ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\t\r\n\t\t\treturn this.makeRotationFromQuaternion( q );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationFromQuaternion: function ( q ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\t\r\n\t\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\t\tte[ 4 ] = xy - wz;\r\n\t\t\tte[ 8 ] = xz + wy;\r\n\t\r\n\t\t\tte[ 1 ] = xy + wz;\r\n\t\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\t\tte[ 9 ] = yz - wx;\r\n\t\r\n\t\t\tte[ 2 ] = xz - wy;\r\n\t\t\tte[ 6 ] = yz + wx;\r\n\t\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\t\r\n\t\t\t// last column\r\n\t\t\tte[ 3 ] = 0;\r\n\t\t\tte[ 7 ] = 0;\r\n\t\t\tte[ 11 ] = 0;\r\n\t\r\n\t\t\t// bottom row\r\n\t\t\tte[ 12 ] = 0;\r\n\t\t\tte[ 13 ] = 0;\r\n\t\t\tte[ 14 ] = 0;\r\n\t\t\tte[ 15 ] = 1;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlookAt: function () {\r\n\t\r\n\t\t\tvar x, y, z;\r\n\t\r\n\t\t\treturn function ( eye, target, up ) {\r\n\t\r\n\t\t\t\tif ( x === undefined ) x = new THREE.Vector3();\r\n\t\t\t\tif ( y === undefined ) y = new THREE.Vector3();\r\n\t\t\t\tif ( z === undefined ) z = new THREE.Vector3();\r\n\t\r\n\t\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\t\tz.subVectors( eye, target ).normalize();\r\n\t\r\n\t\t\t\tif ( z.length() === 0 ) {\r\n\t\r\n\t\t\t\t\tz.z = 1;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\t\r\n\t\t\t\tif ( x.length() === 0 ) {\r\n\t\r\n\t\t\t\t\tz.x += 0.0001;\r\n\t\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\ty.crossVectors( z, x );\r\n\t\r\n\t\r\n\t\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmultiply: function ( m, n ) {\r\n\t\r\n\t\t\tif ( n !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\t\treturn this.multiplyMatrices( m, n );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.multiplyMatrices( this, m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyMatrices: function ( a, b ) {\r\n\t\r\n\t\t\tvar ae = a.elements;\r\n\t\t\tvar be = b.elements;\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\t\r\n\t\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\t\r\n\t\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\t\r\n\t\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\t\r\n\t\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\t\r\n\t\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyToArray: function ( a, b, r ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tthis.multiplyMatrices( a, b );\r\n\t\r\n\t\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyScalar: function ( s ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\t\treturn vector.applyProjection( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector4: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix4( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmultiplyVector3Array: function ( a ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\t\treturn this.applyToVector3Array( a );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyToVector3Array: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function ( array, offset, length ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\t\tif ( length === undefined ) length = array.length;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\t\r\n\t\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\t\tv1.applyMatrix4( this );\r\n\t\t\t\t\tv1.toArray( array, j );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn array;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyToBuffer: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\t\r\n\t\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\t\tv1.z = buffer.getZ( j );\r\n\t\r\n\t\t\t\t\tv1.applyMatrix4( this );\r\n\t\r\n\t\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn buffer;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateAxis: function ( v ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\t\r\n\t\t\tv.transformDirection( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcrossVector: function ( vector ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\t\treturn vector.applyMatrix4( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdeterminant: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\t\r\n\t\t\t//TODO: make this more efficient\r\n\t\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\t\r\n\t\t\treturn (\r\n\t\t\t\tn41 * (\r\n\t\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t\t - n12 * n23 * n34\r\n\t\t\t\t) +\r\n\t\t\t\tn42 * (\r\n\t\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t\t - n14 * n23 * n31\r\n\t\t\t\t) +\r\n\t\t\t\tn43 * (\r\n\t\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t\t - n12 * n24 * n31\r\n\t\t\t\t) +\r\n\t\t\t\tn44 * (\r\n\t\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t\t + n12 * n23 * n31\r\n\t\t\t\t)\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranspose: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar tmp;\r\n\t\r\n\t\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\t\r\n\t\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tflattenToArrayOffset: function ( array, offset ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tarray[ offset ] = te[ 0 ];\r\n\t\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\r\n\t\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\r\n\t\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\t\r\n\t\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetPosition: function () {\r\n\t\r\n\t\t\tvar v1;\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\t\r\n\t\t\t\tvar te = this.elements;\r\n\t\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tsetPosition: function ( v ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tte[ 12 ] = v.x;\r\n\t\t\tte[ 13 ] = v.y;\r\n\t\t\tte[ 14 ] = v.z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetInverse: function ( m, throwOnInvertible ) {\r\n\t\r\n\t\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\t\r\n\t\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\r\n\t\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\r\n\t\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\r\n\t\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\r\n\t\r\n\t\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\r\n\t\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\r\n\t\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\r\n\t\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\t\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n\t\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n\t\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n\t\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n\t\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n\t\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n\t\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n\t\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n\t\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n\t\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n\t\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n\t\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\t\r\n\t\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\r\n\t\r\n\t\t\tif ( det === 0 ) {\r\n\t\r\n\t\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\t\r\n\t\t\t\tif ( throwOnInvertible || false ) {\r\n\t\r\n\t\t\t\t\tthrow new Error( msg );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tconsole.warn( msg );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.identity();\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.multiplyScalar( 1 / det );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranslate: function ( v ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateX: function ( angle ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateY: function ( angle ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateZ: function ( angle ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateByAxis: function ( axis, angle ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tscale: function ( v ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar x = v.x, y = v.y, z = v.z;\r\n\t\r\n\t\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetMaxScaleOnAxis: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\t\r\n\t\t\treturn Math.sqrt( Math.max( scaleXSq, Math.max( scaleYSq, scaleZSq ) ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeTranslation: function ( x, y, z ) {\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t1, 0, 0, x,\r\n\t\t\t\t0, 1, 0, y,\r\n\t\t\t\t0, 0, 1, z,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationX: function ( theta ) {\r\n\t\r\n\t\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t1, 0,  0, 0,\r\n\t\t\t\t0, c, - s, 0,\r\n\t\t\t\t0, s,  c, 0,\r\n\t\t\t\t0, 0,  0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationY: function ( theta ) {\r\n\t\r\n\t\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\t c, 0, s, 0,\r\n\t\t\t\t 0, 1, 0, 0,\r\n\t\t\t\t- s, 0, c, 0,\r\n\t\t\t\t 0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationZ: function ( theta ) {\r\n\t\r\n\t\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\tc, - s, 0, 0,\r\n\t\t\t\ts,  c, 0, 0,\r\n\t\t\t\t0,  0, 1, 0,\r\n\t\t\t\t0,  0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeRotationAxis: function ( axis, angle ) {\r\n\t\r\n\t\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\t\r\n\t\t\tvar c = Math.cos( angle );\r\n\t\t\tvar s = Math.sin( angle );\r\n\t\t\tvar t = 1 - c;\r\n\t\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\t\tvar tx = t * x, ty = t * y;\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\t return this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeScale: function ( x, y, z ) {\r\n\t\r\n\t\t\tthis.set(\r\n\t\r\n\t\t\t\tx, 0, 0, 0,\r\n\t\t\t\t0, y, 0, 0,\r\n\t\t\t\t0, 0, z, 0,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\r\n\t\t\t);\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcompose: function ( position, quaternion, scale ) {\r\n\t\r\n\t\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\t\tthis.scale( scale );\r\n\t\t\tthis.setPosition( position );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdecompose: function () {\r\n\t\r\n\t\t\tvar vector, matrix;\r\n\t\r\n\t\t\treturn function ( position, quaternion, scale ) {\r\n\t\r\n\t\t\t\tif ( vector === undefined ) vector = new THREE.Vector3();\r\n\t\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\t\r\n\t\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\t\tvar det = this.determinant();\r\n\t\t\t\tif ( det < 0 ) {\r\n\t\r\n\t\t\t\t\tsx = - sx;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tposition.x = te[ 12 ];\r\n\t\t\t\tposition.y = te[ 13 ];\r\n\t\t\t\tposition.z = te[ 14 ];\r\n\t\r\n\t\t\t\t// scale the rotation part\r\n\t\r\n\t\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\t\r\n\t\t\t\tvar invSX = 1 / sx;\r\n\t\t\t\tvar invSY = 1 / sy;\r\n\t\t\t\tvar invSZ = 1 / sz;\r\n\t\r\n\t\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\t\r\n\t\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\t\r\n\t\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\t\r\n\t\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\t\r\n\t\t\t\tscale.x = sx;\r\n\t\t\t\tscale.y = sy;\r\n\t\t\t\tscale.z = sz;\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar x = 2 * near / ( right - left );\r\n\t\t\tvar y = 2 * near / ( top - bottom );\r\n\t\r\n\t\t\tvar a = ( right + left ) / ( right - left );\r\n\t\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\t\tvar d = - 2 * far * near / ( far - near );\r\n\t\r\n\t\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\t\r\n\t\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\t\tvar ymin = - ymax;\r\n\t\t\tvar xmin = ymin * aspect;\r\n\t\t\tvar xmax = ymax * aspect;\r\n\t\r\n\t\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar w = right - left;\r\n\t\t\tvar h = top - bottom;\r\n\t\t\tvar p = far - near;\r\n\t\r\n\t\t\tvar x = ( right + left ) / w;\r\n\t\t\tvar y = ( top + bottom ) / h;\r\n\t\t\tvar z = ( far + near ) / p;\r\n\t\r\n\t\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\r\n\t\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( matrix ) {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = matrix.elements;\r\n\t\r\n\t\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\t\r\n\t\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromArray: function ( array ) {\r\n\t\r\n\t\t\tthis.elements.set( array );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoArray: function () {\r\n\t\r\n\t\t\tvar te = this.elements;\r\n\t\r\n\t\t\treturn [\r\n\t\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\r\n\t\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\r\n\t\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\r\n\t\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\r\n\t\t\t];\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Ray.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Ray = function ( origin, direction ) {\r\n\t\r\n\t\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\t\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Ray.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Ray,\r\n\t\r\n\t\tset: function ( origin, direction ) {\r\n\t\r\n\t\t\tthis.origin.copy( origin );\r\n\t\t\tthis.direction.copy( direction );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( ray ) {\r\n\t\r\n\t\t\tthis.origin.copy( ray.origin );\r\n\t\t\tthis.direction.copy( ray.direction );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tat: function ( t, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trecast: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( t ) {\r\n\t\r\n\t\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\tresult.subVectors( point, this.origin );\r\n\t\t\tvar directionDistance = result.dot( this.direction );\r\n\t\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\t\r\n\t\t\t\treturn result.copy( this.origin );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function ( point ) {\r\n\t\r\n\t\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceSqToPoint: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( point ) {\r\n\t\r\n\t\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\t\r\n\t\t\t\t// point behind the ray\r\n\t\r\n\t\t\t\tif ( directionDistance < 0 ) {\r\n\t\r\n\t\t\t\t\treturn this.origin.distanceToSquared( point );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\t\r\n\t\t\t\treturn v1.distanceToSquared( point );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tdistanceSqToSegment: function () {\r\n\t\r\n\t\t\tvar segCenter = new THREE.Vector3();\r\n\t\t\tvar segDir = new THREE.Vector3();\r\n\t\t\tvar diff = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\t\r\n\t\t\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\r\n\t\t\t\t// It returns the min distance between the ray and the segment\r\n\t\t\t\t// defined by v0 and v1\r\n\t\t\t\t// It can also set two optional targets :\r\n\t\t\t\t// - The closest point on the ray\r\n\t\t\t\t// - The closest point on the segment\r\n\t\r\n\t\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t\t\tdiff.copy( this.origin ).sub( segCenter );\r\n\t\r\n\t\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\t\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\t\t\tvar b0 = diff.dot( this.direction );\r\n\t\t\t\tvar b1 = - diff.dot( segDir );\r\n\t\t\t\tvar c = diff.lengthSq();\r\n\t\t\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\t\t\tvar s0, s1, sqrDist, extDet;\r\n\t\r\n\t\t\t\tif ( det > 0 ) {\r\n\t\r\n\t\t\t\t\t// The ray and segment are not parallel.\r\n\t\r\n\t\t\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\t\t\textDet = segExtent * det;\r\n\t\r\n\t\t\t\t\tif ( s0 >= 0 ) {\r\n\t\r\n\t\t\t\t\t\tif ( s1 >= - extDet ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( s1 <= extDet ) {\r\n\t\r\n\t\t\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\t\r\n\t\t\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\t// region 1\r\n\t\r\n\t\t\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t// region 5\r\n\t\r\n\t\t\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( s1 <= - extDet ) {\r\n\t\r\n\t\t\t\t\t\t\t// region 4\r\n\t\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t} else if ( s1 <= extDet ) {\r\n\t\r\n\t\t\t\t\t\t\t// region 3\r\n\t\r\n\t\t\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t// region 2\r\n\t\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// Ray and segment are parallel.\r\n\t\r\n\t\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( optionalPointOnRay ) {\r\n\t\r\n\t\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( optionalPointOnSegment ) {\r\n\t\r\n\t\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn sqrDist;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\r\n\t\tisIntersectionSphere: function ( sphere ) {\r\n\t\r\n\t\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectSphere: function () {\r\n\t\r\n\t\t\t// from http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-sphere-intersection/\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( sphere, optionalTarget ) {\r\n\t\r\n\t\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\t\r\n\t\t\t\tvar tca = v1.dot( this.direction );\r\n\t\r\n\t\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\t\r\n\t\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\t\r\n\t\t\t\tif ( d2 > radius2 ) return null;\r\n\t\r\n\t\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\t\r\n\t\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\t\tvar t0 = tca - thc;\r\n\t\r\n\t\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\t\tvar t1 = tca + thc;\r\n\t\r\n\t\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\t\r\n\t\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\t\r\n\t\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\t\t\treturn this.at( t0, optionalTarget );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tisIntersectionPlane: function ( plane ) {\r\n\t\r\n\t\t\t// check if the ray lies on the plane first\r\n\t\r\n\t\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\t\r\n\t\t\tif ( distToPoint === 0 ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar denominator = plane.normal.dot( this.direction );\r\n\t\r\n\t\t\tif ( denominator * distToPoint < 0 ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPlane: function ( plane ) {\r\n\t\r\n\t\t\tvar denominator = plane.normal.dot( this.direction );\r\n\t\t\tif ( denominator === 0 ) {\r\n\t\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\t\r\n\t\t\t\t\treturn 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\t\r\n\t\t\t\treturn null;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\t\r\n\t\t\t// Return if the ray never intersects the plane\r\n\t\r\n\t\t\treturn t >= 0 ? t :  null;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectPlane: function ( plane, optionalTarget ) {\r\n\t\r\n\t\t\tvar t = this.distanceToPlane( plane );\r\n\t\r\n\t\t\tif ( t === null ) {\r\n\t\r\n\t\t\t\treturn null;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.at( t, optionalTarget );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisIntersectionBox: function () {\r\n\t\r\n\t\t\tvar v = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( box ) {\r\n\t\r\n\t\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tintersectBox: function ( box, optionalTarget ) {\r\n\t\r\n\t\t\t// http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\r\n\t\r\n\t\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\t\r\n\t\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\t\tinvdirz = 1 / this.direction.z;\r\n\t\r\n\t\t\tvar origin = this.origin;\r\n\t\r\n\t\t\tif ( invdirx >= 0 ) {\r\n\t\r\n\t\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( invdiry >= 0 ) {\r\n\t\r\n\t\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\t\r\n\t\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\t\r\n\t\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\t\r\n\t\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\t\r\n\t\t\tif ( invdirz >= 0 ) {\r\n\t\r\n\t\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\t\r\n\t\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\t\r\n\t\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\t\r\n\t\t\t//return point closest to the ray (positive side)\r\n\t\r\n\t\t\tif ( tmax < 0 ) return null;\r\n\t\r\n\t\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectTriangle: function () {\r\n\t\r\n\t\t\t// Compute the offset origin, edges, and normal.\r\n\t\t\tvar diff = new THREE.Vector3();\r\n\t\t\tvar edge1 = new THREE.Vector3();\r\n\t\t\tvar edge2 = new THREE.Vector3();\r\n\t\t\tvar normal = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\t\r\n\t\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\r\n\t\r\n\t\t\t\tedge1.subVectors( b, a );\r\n\t\t\t\tedge2.subVectors( c, a );\r\n\t\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\t\r\n\t\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\t\tvar sign;\r\n\t\r\n\t\t\t\tif ( DdN > 0 ) {\r\n\t\r\n\t\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\t\tsign = 1;\r\n\t\r\n\t\t\t\t} else if ( DdN < 0 ) {\r\n\t\r\n\t\t\t\t\tsign = - 1;\r\n\t\t\t\t\tDdN = - DdN;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\t\r\n\t\t\t\t// b1 < 0, no intersection\r\n\t\t\t\tif ( DdQxE2 < 0 ) {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\t\r\n\t\t\t\t// b2 < 0, no intersection\r\n\t\t\t\tif ( DdE1xQ < 0 ) {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\t\r\n\t\t\t\t// t < 0, no intersection\r\n\t\t\t\tif ( QdN < 0 ) {\r\n\t\r\n\t\t\t\t\treturn null;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Ray intersects triangle.\r\n\t\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tapplyMatrix4: function ( matrix4 ) {\r\n\t\r\n\t\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\t\tthis.direction.sub( this.origin );\r\n\t\t\tthis.direction.normalize();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( ray ) {\r\n\t\r\n\t\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Sphere.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Sphere = function ( center, radius ) {\r\n\t\r\n\t\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\t\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Sphere.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Sphere,\r\n\t\r\n\t\tset: function ( center, radius ) {\r\n\t\r\n\t\t\tthis.center.copy( center );\r\n\t\t\tthis.radius = radius;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromPoints: function () {\r\n\t\r\n\t\t\tvar box = new THREE.Box3();\r\n\t\r\n\t\t\treturn function ( points, optionalCenter ) {\r\n\t\r\n\t\t\t\tvar center = this.center;\r\n\t\r\n\t\t\t\tif ( optionalCenter !== undefined ) {\r\n\t\r\n\t\t\t\t\tcenter.copy( optionalCenter );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( sphere ) {\r\n\t\r\n\t\t\tthis.center.copy( sphere.center );\r\n\t\t\tthis.radius = sphere.radius;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tempty: function () {\r\n\t\r\n\t\t\treturn ( this.radius <= 0 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function ( point ) {\r\n\t\r\n\t\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectsSphere: function ( sphere ) {\r\n\t\r\n\t\t\tvar radiusSum = this.radius + sphere.radius;\r\n\t\r\n\t\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclampPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\tresult.copy( point );\r\n\t\r\n\t\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\t\r\n\t\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn result;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetBoundingBox: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar box = optionalTarget || new THREE.Box3();\r\n\t\r\n\t\t\tbox.set( this.center, this.center );\r\n\t\t\tbox.expandByScalar( this.radius );\r\n\t\r\n\t\t\treturn box;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function ( matrix ) {\r\n\t\r\n\t\t\tthis.center.applyMatrix4( matrix );\r\n\t\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranslate: function ( offset ) {\r\n\t\r\n\t\t\tthis.center.add( offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( sphere ) {\r\n\t\r\n\t\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Frustum.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\t\r\n\t\tthis.planes = [\r\n\t\r\n\t\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\t\r\n\t\t];\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Frustum.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Frustum,\r\n\t\r\n\t\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\r\n\t\t\tplanes[ 0 ].copy( p0 );\r\n\t\t\tplanes[ 1 ].copy( p1 );\r\n\t\t\tplanes[ 2 ].copy( p2 );\r\n\t\t\tplanes[ 3 ].copy( p3 );\r\n\t\t\tplanes[ 4 ].copy( p4 );\r\n\t\t\tplanes[ 5 ].copy( p5 );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( frustum ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromMatrix: function ( m ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\t\tvar me = m.elements;\r\n\t\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\t\r\n\t\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectsObject: function () {\r\n\t\r\n\t\t\tvar sphere = new THREE.Sphere();\r\n\t\r\n\t\t\treturn function ( object ) {\r\n\t\r\n\t\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\t\r\n\t\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\t\tsphere.applyMatrix4( object.matrixWorld );\r\n\t\r\n\t\t\t\treturn this.intersectsSphere( sphere );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tintersectsSphere: function ( sphere ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\t\tvar center = sphere.center;\r\n\t\t\tvar negRadius = - sphere.radius;\r\n\t\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\t\r\n\t\t\t\tif ( distance < negRadius ) {\r\n\t\r\n\t\t\t\t\treturn false;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectsBox: function () {\r\n\t\r\n\t\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\t\tp2 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( box ) {\r\n\t\r\n\t\t\t\tvar planes = this.planes;\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar plane = planes[ i ];\r\n\t\r\n\t\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\t\r\n\t\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\t\r\n\t\t\t\t\t// if both outside plane, no intersection\r\n\t\r\n\t\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\t\r\n\t\t\t\t\t\treturn false;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\tvar planes = this.planes;\r\n\t\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\t\r\n\t\t\t\t\treturn false;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Plane.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Plane = function ( normal, constant ) {\r\n\t\r\n\t\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\t\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Plane.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Plane,\r\n\t\r\n\t\tset: function ( normal, constant ) {\r\n\t\r\n\t\t\tthis.normal.copy( normal );\r\n\t\t\tthis.constant = constant;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetComponents: function ( x, y, z, w ) {\r\n\t\r\n\t\t\tthis.normal.set( x, y, z );\r\n\t\t\tthis.constant = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\t\r\n\t\t\tthis.normal.copy( normal );\r\n\t\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromCoplanarPoints: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\t\tvar v2 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( a, b, c ) {\r\n\t\r\n\t\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\t\r\n\t\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\t\r\n\t\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( plane ) {\r\n\t\r\n\t\t\tthis.normal.copy( plane.normal );\r\n\t\t\tthis.constant = plane.constant;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\t\r\n\t\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\t\tthis.constant *= inverseNormalLength;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnegate: function () {\r\n\t\r\n\t\t\tthis.constant *= - 1;\r\n\t\t\tthis.normal.negate();\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToPoint: function ( point ) {\r\n\t\r\n\t\t\treturn this.normal.dot( point ) + this.constant;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdistanceToSphere: function ( sphere ) {\r\n\t\r\n\t\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tprojectPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\t\r\n\t\t},\r\n\t\r\n\t\torthoPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisIntersectionLine: function ( line ) {\r\n\t\r\n\t\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\t\r\n\t\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\t\tvar endSign = this.distanceToPoint( line.end );\r\n\t\r\n\t\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tintersectLine: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( line, optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\t\tvar direction = line.delta( v1 );\r\n\t\r\n\t\t\t\tvar denominator = this.normal.dot( direction );\r\n\t\r\n\t\t\t\tif ( denominator === 0 ) {\r\n\t\r\n\t\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\t\r\n\t\t\t\t\t\treturn result.copy( line.start );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\t\treturn undefined;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\t\r\n\t\t\t\tif ( t < 0 || t > 1 ) {\r\n\t\r\n\t\t\t\t\treturn undefined;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\r\n\t\tcoplanarPoint: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix4: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\t\tvar v2 = new THREE.Vector3();\r\n\t\t\tvar m1 = new THREE.Matrix3();\r\n\t\r\n\t\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\t\r\n\t\t\t\t// compute new normal based on theory here:\r\n\t\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\r\n\t\r\n\t\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\r\n\t\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\r\n\t\r\n\t\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function ( offset ) {\r\n\t\r\n\t\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( plane ) {\r\n\t\r\n\t\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Math.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Math = {\r\n\t\r\n\t\tgenerateUUID: function () {\r\n\t\r\n\t\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\t\r\n\t\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\t\tvar uuid = new Array( 36 );\r\n\t\t\tvar rnd = 0, r;\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\r\n\t\r\n\t\t\t\t\t\tuuid[ i ] = '-';\r\n\t\r\n\t\t\t\t\t} else if ( i === 14 ) {\r\n\t\r\n\t\t\t\t\t\tuuid[ i ] = '4';\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn uuid.join( '' );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\t// Clamp value to range <a, b>\r\n\t\r\n\t\tclamp: function ( x, a, b ) {\r\n\t\r\n\t\t\treturn ( x < a ) ? a : ( ( x > b ) ? b : x );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Clamp value to range <a, inf)\r\n\t\r\n\t\tclampBottom: function ( x, a ) {\r\n\t\r\n\t\t\treturn x < a ? a : x;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// compute euclidian modulo of m % n\r\n\t\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\t\r\n\t\teuclideanModulo: function ( n, m ) {\r\n\t\r\n\t\t\treturn ( ( n % m ) + m ) % m;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\t\r\n\t\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\t\r\n\t\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\t\r\n\t\tsmoothstep: function ( x, min, max ) {\r\n\t\r\n\t\t\tif ( x <= min ) return 0;\r\n\t\t\tif ( x >= max ) return 1;\r\n\t\r\n\t\t\tx = ( x - min ) / ( max - min );\r\n\t\r\n\t\t\treturn x * x * ( 3 - 2 * x );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsmootherstep: function ( x, min, max ) {\r\n\t\r\n\t\t\tif ( x <= min ) return 0;\r\n\t\t\tif ( x >= max ) return 1;\r\n\t\r\n\t\t\tx = ( x - min ) / ( max - min );\r\n\t\r\n\t\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Random float from <0, 1> with 16 bits of randomness\r\n\t\t// (standard Math.random() creates repetitive patterns when applied over larger space)\r\n\t\r\n\t\trandom16: function () {\r\n\t\r\n\t\t\treturn ( 65280 * Math.random() + 255 * Math.random() ) / 65535;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Random integer from <low, high> interval\r\n\t\r\n\t\trandInt: function ( low, high ) {\r\n\t\r\n\t\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Random float from <low, high> interval\r\n\t\r\n\t\trandFloat: function ( low, high ) {\r\n\t\r\n\t\t\treturn low + Math.random() * ( high - low );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Random float from <-range/2, range/2> interval\r\n\t\r\n\t\trandFloatSpread: function ( range ) {\r\n\t\r\n\t\t\treturn range * ( 0.5 - Math.random() );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdegToRad: function () {\r\n\t\r\n\t\t\tvar degreeToRadiansFactor = Math.PI / 180;\r\n\t\r\n\t\t\treturn function ( degrees ) {\r\n\t\r\n\t\t\t\treturn degrees * degreeToRadiansFactor;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tradToDeg: function () {\r\n\t\r\n\t\t\tvar radianToDegreesFactor = 180 / Math.PI;\r\n\t\r\n\t\t\treturn function ( radians ) {\r\n\t\r\n\t\t\t\treturn radians * radianToDegreesFactor;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tisPowerOfTwo: function ( value ) {\r\n\t\r\n\t\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnextPowerOfTwo: function ( value ) {\r\n\t\r\n\t\t\tvalue --;\r\n\t\t\tvalue |= value >> 1;\r\n\t\t\tvalue |= value >> 2;\r\n\t\t\tvalue |= value >> 4;\r\n\t\t\tvalue |= value >> 8;\r\n\t\t\tvalue |= value >> 16;\r\n\t\t\tvalue ++;\r\n\t\r\n\t\t\treturn value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Spline.js\r\n\t\r\n\t/**\r\n\t * Spline from Tween.js, slightly optimized (and trashed)\r\n\t * http://sole.github.com/tween.js/examples/05_spline.html\r\n\t *\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Spline = function ( points ) {\r\n\t\r\n\t\tthis.points = points;\r\n\t\r\n\t\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\t\tpoint, intPoint, weight, w2, w3,\r\n\t\tpa, pb, pc, pd;\r\n\t\r\n\t\tthis.initFromArray = function ( a ) {\r\n\t\r\n\t\t\tthis.points = [];\r\n\t\r\n\t\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\t\r\n\t\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getPoint = function ( k ) {\r\n\t\r\n\t\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\t\r\n\t\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\t\tc[ 1 ] = intPoint;\r\n\t\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\t\r\n\t\t\tpa = this.points[ c[ 0 ] ];\r\n\t\t\tpb = this.points[ c[ 1 ] ];\r\n\t\t\tpc = this.points[ c[ 2 ] ];\r\n\t\t\tpd = this.points[ c[ 3 ] ];\r\n\t\r\n\t\t\tw2 = weight * weight;\r\n\t\t\tw3 = weight * w2;\r\n\t\r\n\t\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\t\r\n\t\t\treturn v3;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getControlPointsArray = function () {\r\n\t\r\n\t\t\tvar i, p, l = this.points.length,\r\n\t\t\t\tcoords = [];\r\n\t\r\n\t\t\tfor ( i = 0; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tp = this.points[ i ];\r\n\t\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn coords;\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// approximate length by summing linear segments\r\n\t\r\n\t\tthis.getLength = function ( nSubDivisions ) {\r\n\t\r\n\t\t\tvar i, index, nSamples, position,\r\n\t\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\t\tchunkLengths = [],\r\n\t\t\t\ttotalLength = 0;\r\n\t\r\n\t\t\t// first point has 0 length\r\n\t\r\n\t\t\tchunkLengths[ 0 ] = 0;\r\n\t\r\n\t\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\t\r\n\t\t\tnSamples = this.points.length * nSubDivisions;\r\n\t\r\n\t\t\toldPosition.copy( this.points[ 0 ] );\r\n\t\r\n\t\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\t\r\n\t\t\t\tindex = i / nSamples;\r\n\t\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\ttmpVec.copy( position );\r\n\t\r\n\t\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\t\r\n\t\t\t\toldPosition.copy( position );\r\n\t\r\n\t\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\t\tintPoint = Math.floor( point );\r\n\t\r\n\t\t\t\tif ( intPoint !== oldIntPoint ) {\r\n\t\r\n\t\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\t\toldIntPoint = intPoint;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// last point ends with total length\r\n\t\r\n\t\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\t\r\n\t\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\t\r\n\t\t\tvar i, j,\r\n\t\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\t\trealDistance,\r\n\t\t\t\tsampling, position,\r\n\t\t\t\tnewpoints = [],\r\n\t\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\t\tsl = this.getLength();\r\n\t\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\t\r\n\t\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\t\r\n\t\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\t\r\n\t\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\t\r\n\t\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\t\r\n\t\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\t\r\n\t\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\t\r\n\t\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\t\r\n\t\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.points = newpoints;\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Catmull-Rom\r\n\t\r\n\t\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\t\r\n\t\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\t\r\n\t\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/math/Triangle.js\r\n\t\r\n\t/**\r\n\t * @author bhouston / http://exocortex.com\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Triangle = function ( a, b, c ) {\r\n\t\r\n\t\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\t\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\t\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Triangle.normal = function () {\r\n\t\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\r\n\t\treturn function ( a, b, c, optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\tresult.subVectors( c, b );\r\n\t\t\tv0.subVectors( a, b );\r\n\t\t\tresult.cross( v0 );\r\n\t\r\n\t\t\tvar resultLengthSq = result.lengthSq();\r\n\t\t\tif ( resultLengthSq > 0 ) {\r\n\t\r\n\t\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn result.set( 0, 0, 0 );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\t// static/instance method to calculate barycentric coordinates\r\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\n\tTHREE.Triangle.barycoordFromPoint = function () {\r\n\t\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\r\n\t\treturn function ( point, a, b, c, optionalTarget ) {\r\n\t\r\n\t\t\tv0.subVectors( c, a );\r\n\t\t\tv1.subVectors( b, a );\r\n\t\t\tv2.subVectors( point, a );\r\n\t\r\n\t\t\tvar dot00 = v0.dot( v0 );\r\n\t\t\tvar dot01 = v0.dot( v1 );\r\n\t\t\tvar dot02 = v0.dot( v2 );\r\n\t\t\tvar dot11 = v1.dot( v1 );\r\n\t\t\tvar dot12 = v1.dot( v2 );\r\n\t\r\n\t\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\t// collinear or singular triangle\r\n\t\t\tif ( denom === 0 ) {\r\n\t\r\n\t\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar invDenom = 1 / denom;\r\n\t\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\t\r\n\t\t\t// barycentric coordinates must always sum to 1\r\n\t\t\treturn result.set( 1 - u - v, v, u );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.Triangle.containsPoint = function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\treturn function ( point, a, b, c ) {\r\n\t\r\n\t\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\t\r\n\t\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.Triangle.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Triangle,\r\n\t\r\n\t\tset: function ( a, b, c ) {\r\n\t\r\n\t\t\tthis.a.copy( a );\r\n\t\t\tthis.b.copy( b );\r\n\t\t\tthis.c.copy( c );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\t\r\n\t\t\tthis.a.copy( points[ i0 ] );\r\n\t\t\tthis.b.copy( points[ i1 ] );\r\n\t\t\tthis.c.copy( points[ i2 ] );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( triangle ) {\r\n\t\r\n\t\t\tthis.a.copy( triangle.a );\r\n\t\t\tthis.b.copy( triangle.b );\r\n\t\t\tthis.c.copy( triangle.c );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tarea: function () {\r\n\t\r\n\t\t\tvar v0 = new THREE.Vector3();\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\t\tv1.subVectors( this.a, this.b );\r\n\t\r\n\t\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tmidpoint: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormal: function ( optionalTarget ) {\r\n\t\r\n\t\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tplane: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Plane();\r\n\t\r\n\t\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\t\r\n\t\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcontainsPoint: function ( point ) {\r\n\t\r\n\t\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tequals: function ( triangle ) {\r\n\t\r\n\t\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/Clock.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Clock = function ( autoStart ) {\r\n\t\r\n\t\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\t\r\n\t\tthis.startTime = 0;\r\n\t\tthis.oldTime = 0;\r\n\t\tthis.elapsedTime = 0;\r\n\t\r\n\t\tthis.running = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Clock.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Clock,\r\n\t\r\n\t\tstart: function () {\r\n\t\r\n\t\t\tthis.startTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t\t : Date.now();\r\n\t\r\n\t\t\tthis.oldTime = this.startTime;\r\n\t\t\tthis.running = true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tstop: function () {\r\n\t\r\n\t\t\tthis.getElapsedTime();\r\n\t\t\tthis.running = false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetElapsedTime: function () {\r\n\t\r\n\t\t\tthis.getDelta();\r\n\t\t\treturn this.elapsedTime;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetDelta: function () {\r\n\t\r\n\t\t\tvar diff = 0;\r\n\t\r\n\t\t\tif ( this.autoStart && ! this.running ) {\r\n\t\r\n\t\t\t\tthis.start();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.running ) {\r\n\t\r\n\t\t\t\tvar newTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t\t : Date.now();\r\n\t\r\n\t\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\r\n\t\t\t\tthis.oldTime = newTime;\r\n\t\r\n\t\t\t\tthis.elapsedTime += diff;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn diff;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/EventDispatcher.js\r\n\t\r\n\t/**\r\n\t * https://github.com/mrdoob/eventdispatcher.js/\r\n\t */\r\n\t\r\n\tTHREE.EventDispatcher = function () {};\r\n\t\r\n\tTHREE.EventDispatcher.prototype = {\r\n\t\r\n\t\tconstructor: THREE.EventDispatcher,\r\n\t\r\n\t\tapply: function ( object ) {\r\n\t\r\n\t\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\r\n\t\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\r\n\t\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\r\n\t\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddEventListener: function ( type, listener ) {\r\n\t\r\n\t\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\t\r\n\t\t\tvar listeners = this._listeners;\r\n\t\r\n\t\t\tif ( listeners[ type ] === undefined ) {\r\n\t\r\n\t\t\t\tlisteners[ type ] = [];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\t\r\n\t\t\t\tlisteners[ type ].push( listener );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\thasEventListener: function ( type, listener ) {\r\n\t\r\n\t\t\tif ( this._listeners === undefined ) return false;\r\n\t\r\n\t\t\tvar listeners = this._listeners;\r\n\t\r\n\t\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tremoveEventListener: function ( type, listener ) {\r\n\t\r\n\t\t\tif ( this._listeners === undefined ) return;\r\n\t\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tvar listenerArray = listeners[ type ];\r\n\t\r\n\t\t\tif ( listenerArray !== undefined ) {\r\n\t\r\n\t\t\t\tvar index = listenerArray.indexOf( listener );\r\n\t\r\n\t\t\t\tif ( index !== - 1 ) {\r\n\t\r\n\t\t\t\t\tlistenerArray.splice( index, 1 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispatchEvent: function ( event ) {\r\n\t\r\n\t\t\tif ( this._listeners === undefined ) return;\r\n\t\r\n\t\t\tvar listeners = this._listeners;\r\n\t\t\tvar listenerArray = listeners[ event.type ];\r\n\t\r\n\t\t\tif ( listenerArray !== undefined ) {\r\n\t\r\n\t\t\t\tevent.target = this;\r\n\t\r\n\t\t\t\tvar array = [];\r\n\t\t\t\tvar length = listenerArray.length;\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\t\r\n\t\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\t\r\n\t\t\t\t\tarray[ i ].call( this, event );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/Raycaster.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author bhouston / http://exocortex.com/\r\n\t * @author stephomi / http://stephaneginier.com/\r\n\t */\r\n\t\r\n\t( function ( THREE ) {\r\n\t\r\n\t\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\t\r\n\t\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\t\r\n\t\t\tthis.near = near || 0;\r\n\t\t\tthis.far = far || Infinity;\r\n\t\r\n\t\t\tthis.params = {\r\n\t\t\t\tMesh: {},\r\n\t\t\t\tLine: {},\r\n\t\t\t\tLOD: {},\r\n\t\t\t\tPoints: { threshold: 1 },\r\n\t\t\t\tSprite: {}\r\n\t\t\t};\r\n\t\r\n\t\t\tObject.defineProperties( this.params, {\r\n\t\t\t\tPointCloud: {\r\n\t\t\t\t\tget: function () {\r\n\t\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\t\t\treturn this.Points;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction descSort( a, b ) {\r\n\t\r\n\t\t\treturn a.distance - b.distance;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar intersectObject = function ( object, raycaster, intersects, recursive ) {\r\n\t\r\n\t\t\tif ( object.visible === false ) return;\r\n\t\r\n\t\t\tobject.raycast( raycaster, intersects );\r\n\t\r\n\t\t\tif ( recursive === true ) {\r\n\t\r\n\t\t\t\tvar children = object.children;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t//\r\n\t\r\n\t\tTHREE.Raycaster.prototype = {\r\n\t\r\n\t\t\tconstructor: THREE.Raycaster,\r\n\t\r\n\t\t\tlinePrecision: 1,\r\n\t\r\n\t\t\tset: function ( origin, direction ) {\r\n\t\r\n\t\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\t\r\n\t\t\t\tthis.ray.set( origin, direction );\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tsetFromCamera: function ( coords, camera ) {\r\n\t\r\n\t\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\r\n\t\r\n\t\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\t\r\n\t\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\r\n\t\r\n\t\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\r\n\t\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tintersectObject: function ( object, recursive ) {\r\n\t\r\n\t\t\t\tvar intersects = [];\r\n\t\r\n\t\t\t\tintersectObject( object, this, intersects, recursive );\r\n\t\r\n\t\t\t\tintersects.sort( descSort );\r\n\t\r\n\t\t\t\treturn intersects;\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tintersectObjects: function ( objects, recursive ) {\r\n\t\r\n\t\t\t\tvar intersects = [];\r\n\t\r\n\t\t\t\tif ( Array.isArray( objects ) === false ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\t\treturn intersects;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tintersects.sort( descSort );\r\n\t\r\n\t\t\t\treturn intersects;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}( THREE ) );\r\n\t\r\n\t// File:src/core/Object3D.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author elephantatwork / www.elephantatwork.ch\r\n\t */\r\n\t\r\n\tTHREE.Object3D = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'Object3D';\r\n\t\r\n\t\tthis.parent = null;\r\n\t\tthis.children = [];\r\n\t\r\n\t\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\t\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar rotation = new THREE.Euler();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\t\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\t\r\n\t\tvar onRotationChange = function () {\r\n\t\r\n\t\t\tquaternion.setFromEuler( rotation, false );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tvar onQuaternionChange = function () {\r\n\t\r\n\t\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\t\r\n\t\t};\r\n\t\r\n\t\trotation.onChange( onRotationChange );\r\n\t\tquaternion.onChange( onQuaternionChange );\r\n\t\r\n\t\tObject.defineProperties( this, {\r\n\t\t\tposition: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: position\r\n\t\t\t},\r\n\t\t\trotation: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: rotation\r\n\t\t\t},\r\n\t\t\tquaternion: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: quaternion\r\n\t\t\t},\r\n\t\t\tscale: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: scale\r\n\t\t\t},\r\n\t\t\tmodelViewMatrix: {\r\n\t\t\t\tvalue: new THREE.Matrix4()\r\n\t\t\t},\r\n\t\t\tnormalMatrix: {\r\n\t\t\t\tvalue: new THREE.Matrix3()\r\n\t\t\t}\r\n\t\t} );\r\n\t\r\n\t\tthis.rotationAutoUpdate = true;\r\n\t\r\n\t\tthis.matrix = new THREE.Matrix4();\r\n\t\tthis.matrixWorld = new THREE.Matrix4();\r\n\t\r\n\t\tthis.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = false;\r\n\t\r\n\t\tthis.visible = true;\r\n\t\r\n\t\tthis.castShadow = false;\r\n\t\tthis.receiveShadow = false;\r\n\t\r\n\t\tthis.frustumCulled = true;\r\n\t\tthis.renderOrder = 0;\r\n\t\r\n\t\tthis.userData = {};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\n\tTHREE.Object3D.DefaultMatrixAutoUpdate = true;\r\n\t\r\n\tTHREE.Object3D.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Object3D,\r\n\t\r\n\t\tget eulerOrder () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\t\r\n\t\t\treturn this.rotation.order;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset eulerOrder ( value ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\t\r\n\t\t\tthis.rotation.order = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget useQuaternion () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset useQuaternion ( value ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset renderDepth ( value ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix: function ( matrix ) {\r\n\t\r\n\t\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\t\r\n\t\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\t\r\n\t\t\t// assumes axis is normalized\r\n\t\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromEuler: function ( euler ) {\r\n\t\r\n\t\t\tthis.quaternion.setFromEuler( euler, true );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromMatrix: function ( m ) {\r\n\t\r\n\t\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\t\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetRotationFromQuaternion: function ( q ) {\r\n\t\r\n\t\t\t// assumes q is normalized\r\n\t\r\n\t\t\tthis.quaternion.copy( q );\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateOnAxis: function () {\r\n\t\r\n\t\t\t// rotate object on axis in object space\r\n\t\t\t// axis is assumed to be normalized\r\n\t\r\n\t\t\tvar q1 = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( axis, angle ) {\r\n\t\r\n\t\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\t\r\n\t\t\t\tthis.quaternion.multiply( q1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateX: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\t\r\n\t\t\treturn function ( angle ) {\r\n\t\r\n\t\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateY: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\r\n\t\t\treturn function ( angle ) {\r\n\t\r\n\t\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateZ: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\t\r\n\t\t\treturn function ( angle ) {\r\n\t\r\n\t\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslateOnAxis: function () {\r\n\t\r\n\t\t\t// translate object by distance along axis in object space\r\n\t\t\t// axis is assumed to be normalized\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( axis, distance ) {\r\n\t\r\n\t\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\t\r\n\t\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function ( distance, axis ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\t\treturn this.translateOnAxis( axis, distance );\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttranslateX: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\t\r\n\t\t\treturn function ( distance ) {\r\n\t\r\n\t\t\t\treturn this.translateOnAxis( v1, distance );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslateY: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\r\n\t\t\treturn function ( distance ) {\r\n\t\r\n\t\t\t\treturn this.translateOnAxis( v1, distance );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslateZ: function () {\r\n\t\r\n\t\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\t\r\n\t\t\treturn function ( distance ) {\r\n\t\r\n\t\t\t\treturn this.translateOnAxis( v1, distance );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tlocalToWorld: function ( vector ) {\r\n\t\r\n\t\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tworldToLocal: function () {\r\n\t\r\n\t\t\tvar m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\treturn function ( vector ) {\r\n\t\r\n\t\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tlookAt: function () {\r\n\t\r\n\t\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\t\r\n\t\t\tvar m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\treturn function ( vector ) {\r\n\t\r\n\t\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\t\r\n\t\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tadd: function ( object ) {\r\n\t\r\n\t\t\tif ( arguments.length > 1 ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\t\r\n\t\t\t\t\tthis.add( arguments[ i ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object === this ) {\r\n\t\r\n\t\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object instanceof THREE.Object3D ) {\r\n\t\r\n\t\t\t\tif ( object.parent !== null ) {\r\n\t\r\n\t\t\t\t\tobject.parent.remove( object );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tobject.parent = this;\r\n\t\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\t\r\n\t\t\t\tthis.children.push( object );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tremove: function ( object ) {\r\n\t\r\n\t\t\tif ( arguments.length > 1 ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\t\r\n\t\t\t\t\tthis.remove( arguments[ i ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar index = this.children.indexOf( object );\r\n\t\r\n\t\t\tif ( index !== - 1 ) {\r\n\t\r\n\t\t\t\tobject.parent = null;\r\n\t\r\n\t\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\t\r\n\t\t\t\tthis.children.splice( index, 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetChildByName: function ( name ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\t\treturn this.getObjectByName( name );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetObjectById: function ( id ) {\r\n\t\r\n\t\t\treturn this.getObjectByProperty( 'id', id );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetObjectByName: function ( name ) {\r\n\t\r\n\t\t\treturn this.getObjectByProperty( 'name', name );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetObjectByProperty: function ( name, value ) {\r\n\t\r\n\t\t\tif ( this[ name ] === value ) return this;\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar child = this.children[ i ];\r\n\t\t\t\tvar object = child.getObjectByProperty( name, value );\r\n\t\r\n\t\t\t\tif ( object !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn object;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn undefined;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetWorldPosition: function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\t\r\n\t\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetWorldQuaternion: function () {\r\n\t\r\n\t\t\tvar position = new THREE.Vector3();\r\n\t\t\tvar scale = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\t\r\n\t\t\t\tthis.updateMatrixWorld( true );\r\n\t\r\n\t\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\t\r\n\t\t\t\treturn result;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tgetWorldRotation: function () {\r\n\t\r\n\t\t\tvar quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\t\r\n\t\t\t\tthis.getWorldQuaternion( quaternion );\r\n\t\r\n\t\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tgetWorldScale: function () {\r\n\t\r\n\t\t\tvar position = new THREE.Vector3();\r\n\t\t\tvar quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\t\tthis.updateMatrixWorld( true );\r\n\t\r\n\t\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\t\r\n\t\t\t\treturn result;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tgetWorldDirection: function () {\r\n\t\r\n\t\t\tvar quaternion = new THREE.Quaternion();\r\n\t\r\n\t\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\t\tthis.getWorldQuaternion( quaternion );\r\n\t\r\n\t\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\traycast: function () {},\r\n\t\r\n\t\ttraverse: function ( callback ) {\r\n\t\r\n\t\t\tcallback( this );\r\n\t\r\n\t\t\tvar children = this.children;\r\n\t\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tchildren[ i ].traverse( callback );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttraverseVisible: function ( callback ) {\r\n\t\r\n\t\t\tif ( this.visible === false ) return;\r\n\t\r\n\t\t\tcallback( this );\r\n\t\r\n\t\t\tvar children = this.children;\r\n\t\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tchildren[ i ].traverseVisible( callback );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttraverseAncestors: function ( callback ) {\r\n\t\r\n\t\t\tvar parent = this.parent;\r\n\t\r\n\t\t\tif ( parent !== null ) {\r\n\t\r\n\t\t\t\tcallback( parent );\r\n\t\r\n\t\t\t\tparent.traverseAncestors( callback );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdateMatrix: function () {\r\n\t\r\n\t\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\t\r\n\t\t\tthis.matrixWorldNeedsUpdate = true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdateMatrixWorld: function ( force ) {\r\n\t\r\n\t\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\t\r\n\t\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\t\r\n\t\t\t\tif ( this.parent === null ) {\r\n\t\r\n\t\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\t\r\n\t\t\t\tforce = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// update children\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function ( meta ) {\r\n\t\r\n\t\t\tvar isRootObject = ( meta === undefined );\r\n\t\r\n\t\t\tvar data = {};\r\n\t\r\n\t\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t\t// not providing it implies that this is the root object\r\n\t\t\t// being serialized.\r\n\t\t\tif ( isRootObject ) {\r\n\t\r\n\t\t\t\t// initialize meta obj\r\n\t\t\t\tmeta = {\r\n\t\t\t\t\tgeometries: {},\r\n\t\t\t\t\tmaterials: {},\r\n\t\t\t\t\ttextures: {},\r\n\t\t\t\t\timages: {}\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tdata.metadata = {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'Object',\r\n\t\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// standard Object3D serialization\r\n\t\r\n\t\t\tdata.uuid = this.uuid;\r\n\t\t\tdata.type = this.type;\r\n\t\r\n\t\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\r\n\t\t\tif ( this.visible !== true ) data.visible = this.visible;\r\n\t\r\n\t\t\tdata.matrix = this.matrix.toArray();\r\n\t\r\n\t\t\tif ( this.children.length > 0 ) {\r\n\t\r\n\t\t\t\tdata.children = [];\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\t\r\n\t\t\t\t\tdata.children.push( this.children[ i ].toJSON( meta ).object );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar output = {};\r\n\t\r\n\t\t\tif ( isRootObject ) {\r\n\t\r\n\t\t\t\tvar geometries = extractFromCache( meta.geometries );\r\n\t\t\t\tvar materials = extractFromCache( meta.materials );\r\n\t\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\t\tvar images = extractFromCache( meta.images );\r\n\t\r\n\t\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\t\tif ( images.length > 0 ) output.images = images;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\toutput.object = data;\r\n\t\r\n\t\t\treturn output;\r\n\t\r\n\t\t\t// extract data from the cache hash\r\n\t\t\t// remove metadata on each item\r\n\t\t\t// and return as array\r\n\t\t\tfunction extractFromCache ( cache ) {\r\n\t\r\n\t\t\t\tvar values = [];\r\n\t\t\t\tfor ( var key in cache ) {\r\n\t\r\n\t\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\t\tdelete data.metadata;\r\n\t\t\t\t\tvalues.push( data );\r\n\t\r\n\t\t\t\t}\r\n\t\t\t\treturn values;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function ( recursive ) {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this, recursive );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source, recursive ) {\r\n\t\r\n\t\t\tif ( recursive === undefined ) recursive = true;\r\n\t\r\n\t\t\tthis.name = source.name;\r\n\t\r\n\t\t\tthis.up.copy( source.up );\r\n\t\r\n\t\t\tthis.position.copy( source.position );\r\n\t\t\tthis.quaternion.copy( source.quaternion );\r\n\t\t\tthis.scale.copy( source.scale );\r\n\t\r\n\t\t\tthis.rotationAutoUpdate = source.rotationAutoUpdate;\r\n\t\r\n\t\t\tthis.matrix.copy( source.matrix );\r\n\t\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\t\r\n\t\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\t\r\n\t\t\tthis.visible = source.visible;\r\n\t\r\n\t\t\tthis.castShadow = source.castShadow;\r\n\t\t\tthis.receiveShadow = source.receiveShadow;\r\n\t\r\n\t\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\t\tthis.renderOrder = source.renderOrder;\r\n\t\r\n\t\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\t\r\n\t\t\tif ( recursive === true ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar child = source.children[ i ];\r\n\t\t\t\t\tthis.add( child.clone() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\r\n\t\r\n\tTHREE.Object3DIdCount = 0;\r\n\t\r\n\t// File:src/core/Face3.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\t\r\n\t\tthis.a = a;\r\n\t\tthis.b = b;\r\n\t\tthis.c = c;\r\n\t\r\n\t\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\t\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\t\r\n\t\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\t\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\t\r\n\t\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Face3.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Face3,\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.a = source.a;\r\n\t\t\tthis.b = source.b;\r\n\t\t\tthis.c = source.c;\r\n\t\r\n\t\t\tthis.normal.copy( source.normal );\r\n\t\t\tthis.color.copy( source.color );\r\n\t\r\n\t\t\tthis.materialIndex = source.materialIndex;\r\n\t\r\n\t\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/Face4.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\t\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/BufferAttribute.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.BufferAttribute = function ( array, itemSize ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.array = array;\r\n\t\tthis.itemSize = itemSize;\r\n\t\r\n\t\tthis.dynamic = false;\r\n\t\tthis.updateRange = { offset: 0, count: - 1 };\r\n\t\r\n\t\tthis.version = 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BufferAttribute.prototype = {\r\n\t\r\n\t\tconstructor: THREE.BufferAttribute,\r\n\t\r\n\t\tget length() {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\t\treturn this.array.length;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget count() {\r\n\t\r\n\t\t\treturn this.array.length / this.itemSize;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset needsUpdate( value ) {\r\n\t\r\n\t\t\tif ( value === true ) this.version ++;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetDynamic: function ( value ) {\r\n\t\r\n\t\t\tthis.dynamic = value;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.array = new source.array.constructor( source.array );\r\n\t\t\tthis.itemSize = source.itemSize;\r\n\t\r\n\t\t\tthis.dynamic = source.dynamic;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyAt: function ( index1, attribute, index2 ) {\r\n\t\r\n\t\t\tindex1 *= this.itemSize;\r\n\t\t\tindex2 *= attribute.itemSize;\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyArray: function ( array ) {\r\n\t\r\n\t\t\tthis.array.set( array );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyColorsArray: function ( colors ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar color = colors[ i ];\r\n\t\r\n\t\t\t\tif ( color === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\t\tcolor = new THREE.Color();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\t\tarray[ offset ++ ] = color.b;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyIndicesArray: function ( indices ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar index = indices[ i ];\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = index.a;\r\n\t\t\t\tarray[ offset ++ ] = index.b;\r\n\t\t\t\tarray[ offset ++ ] = index.c;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyVector2sArray: function ( vectors ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar vector = vectors[ i ];\r\n\t\r\n\t\t\t\tif ( vector === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\t\tvector = new THREE.Vector2();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyVector3sArray: function ( vectors ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar vector = vectors[ i ];\r\n\t\r\n\t\t\t\tif ( vector === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\t\tvector = new THREE.Vector3();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyVector4sArray: function ( vectors ) {\r\n\t\r\n\t\t\tvar array = this.array, offset = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar vector = vectors[ i ];\r\n\t\r\n\t\t\t\tif ( vector === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\t\tvector = new THREE.Vector4();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\t\tarray[ offset ++ ] = vector.w;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset: function ( value, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.array.set( value, offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetX: function ( index ) {\r\n\t\r\n\t\t\treturn this.array[ index * this.itemSize ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( index, x ) {\r\n\t\r\n\t\t\tthis.array[ index * this.itemSize ] = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetY: function ( index ) {\r\n\t\r\n\t\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( index, y ) {\r\n\t\r\n\t\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetZ: function ( index ) {\r\n\t\r\n\t\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetZ: function ( index, z ) {\r\n\t\r\n\t\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetW: function ( index ) {\r\n\t\r\n\t\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetW: function ( index, w ) {\r\n\t\r\n\t\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXY: function ( index, x, y ) {\r\n\t\r\n\t\t\tindex *= this.itemSize;\r\n\t\r\n\t\t\tthis.array[ index + 0 ] = x;\r\n\t\t\tthis.array[ index + 1 ] = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXYZ: function ( index, x, y, z ) {\r\n\t\r\n\t\t\tindex *= this.itemSize;\r\n\t\r\n\t\t\tthis.array[ index + 0 ] = x;\r\n\t\t\tthis.array[ index + 1 ] = y;\r\n\t\t\tthis.array[ index + 2 ] = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXYZW: function ( index, x, y, z, w ) {\r\n\t\r\n\t\t\tindex *= this.itemSize;\r\n\t\r\n\t\t\tthis.array[ index + 0 ] = x;\r\n\t\t\tthis.array[ index + 1 ] = y;\r\n\t\t\tthis.array[ index + 2 ] = z;\r\n\t\t\tthis.array[ index + 3 ] = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t//\r\n\t\r\n\tTHREE.Int8Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Int8Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Uint8Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Uint8Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Uint8ClampedAttribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Uint8ClampedArray( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Int16Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Int16Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Uint16Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Uint16Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Int32Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Int32Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Uint32Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Uint32Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Float32Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Float32Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Float64Attribute = function ( array, itemSize ) {\r\n\t\r\n\t\treturn new THREE.BufferAttribute( new Float64Array( array ), itemSize );\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t// Deprecated\r\n\t\r\n\tTHREE.DynamicBufferAttribute = function ( array, itemSize ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n\t\treturn new THREE.BufferAttribute( array, itemSize ).setDynamic( true );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/InstancedBufferAttribute.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InstancedBufferAttribute = function ( array, itemSize, meshPerAttribute ) {\r\n\t\r\n\t\tTHREE.BufferAttribute.call( this, array, itemSize );\r\n\t\r\n\t\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InstancedBufferAttribute.prototype = Object.create( THREE.BufferAttribute.prototype );\r\n\tTHREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute;\r\n\t\r\n\tTHREE.InstancedBufferAttribute.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.BufferAttribute.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/InterleavedBuffer.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InterleavedBuffer = function ( array, stride ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.array = array;\r\n\t\tthis.stride = stride;\r\n\t\r\n\t\tthis.dynamic = false;\r\n\t\tthis.updateRange = { offset: 0, count: - 1 };\r\n\t\r\n\t\tthis.version = 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InterleavedBuffer.prototype = {\r\n\t\r\n\t\tconstructor: THREE.InterleavedBuffer,\r\n\t\r\n\t\tget length () {\r\n\t\r\n\t\t\treturn this.array.length;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget count () {\r\n\t\r\n\t\t\treturn this.array.length / this.stride;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset needsUpdate( value ) {\r\n\t\r\n\t\t\tif ( value === true ) this.version ++;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetDynamic: function ( value ) {\r\n\t\r\n\t\t\tthis.dynamic = value;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.array = new source.array.constructor( source.array );\r\n\t\t\tthis.stride = source.stride;\r\n\t\t\tthis.dynamic = source.dynamic;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopyAt: function ( index1, attribute, index2 ) {\r\n\t\r\n\t\t\tindex1 *= this.stride;\r\n\t\t\tindex2 *= attribute.stride;\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset: function ( value, offset ) {\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tthis.array.set( value, offset );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/InstancedInterleavedBuffer.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InstancedInterleavedBuffer = function ( array, stride, meshPerAttribute ) {\r\n\t\r\n\t\tTHREE.InterleavedBuffer.call( this, array, stride );\r\n\t\r\n\t\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InstancedInterleavedBuffer.prototype = Object.create( THREE.InterleavedBuffer.prototype );\r\n\tTHREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer;\r\n\t\r\n\tTHREE.InstancedInterleavedBuffer.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.InterleavedBuffer.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/InterleavedBufferAttribute.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InterleavedBufferAttribute = function ( interleavedBuffer, itemSize, offset ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.data = interleavedBuffer;\r\n\t\tthis.itemSize = itemSize;\r\n\t\tthis.offset = offset;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.InterleavedBufferAttribute.prototype = {\r\n\t\r\n\t\tconstructor: THREE.InterleavedBufferAttribute,\r\n\t\r\n\t\tget length() {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\t\treturn this.array.length;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget count() {\r\n\t\r\n\t\t\treturn this.data.array.length / this.data.stride;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetX: function ( index, x ) {\r\n\t\r\n\t\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetY: function ( index, y ) {\r\n\t\r\n\t\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetZ: function ( index, z ) {\r\n\t\r\n\t\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetW: function ( index, w ) {\r\n\t\r\n\t\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetX: function ( index ) {\r\n\t\r\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetY: function ( index ) {\r\n\t\r\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetZ: function ( index ) {\r\n\t\r\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetW: function ( index ) {\r\n\t\r\n\t\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXY: function ( index, x, y ) {\r\n\t\r\n\t\t\tindex = index * this.data.stride + this.offset;\r\n\t\r\n\t\t\tthis.data.array[ index + 0 ] = x;\r\n\t\t\tthis.data.array[ index + 1 ] = y;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXYZ: function ( index, x, y, z ) {\r\n\t\r\n\t\t\tindex = index * this.data.stride + this.offset;\r\n\t\r\n\t\t\tthis.data.array[ index + 0 ] = x;\r\n\t\t\tthis.data.array[ index + 1 ] = y;\r\n\t\t\tthis.data.array[ index + 2 ] = z;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetXYZW: function ( index, x, y, z, w ) {\r\n\t\r\n\t\t\tindex = index * this.data.stride + this.offset;\r\n\t\r\n\t\t\tthis.data.array[ index + 0 ] = x;\r\n\t\t\tthis.data.array[ index + 1 ] = y;\r\n\t\t\tthis.data.array[ index + 2 ] = z;\r\n\t\t\tthis.data.array[ index + 3 ] = w;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/core/Geometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author kile / http://kile.stravaganza.org/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\tTHREE.Geometry = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'Geometry';\r\n\t\r\n\t\tthis.vertices = [];\r\n\t\tthis.colors = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [ [] ];\r\n\t\r\n\t\tthis.morphTargets = [];\r\n\t\tthis.morphColors = [];\r\n\t\tthis.morphNormals = [];\r\n\t\r\n\t\tthis.skinWeights = [];\r\n\t\tthis.skinIndices = [];\r\n\t\r\n\t\tthis.lineDistances = [];\r\n\t\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\t\r\n\t\t// update flags\r\n\t\r\n\t\tthis.verticesNeedUpdate = false;\r\n\t\tthis.elementsNeedUpdate = false;\r\n\t\tthis.uvsNeedUpdate = false;\r\n\t\tthis.normalsNeedUpdate = false;\r\n\t\tthis.colorsNeedUpdate = false;\r\n\t\tthis.lineDistancesNeedUpdate = false;\r\n\t\tthis.groupsNeedUpdate = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Geometry.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Geometry,\r\n\t\r\n\t\tapplyMatrix: function ( matrix ) {\r\n\t\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\t\r\n\t\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\t\tvertex.applyMatrix4( matrix );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = this.faces[ i ];\r\n\t\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tthis.computeBoundingBox();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tthis.computeBoundingSphere();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.verticesNeedUpdate = true;\r\n\t\t\tthis.normalsNeedUpdate = true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateX: function () {\r\n\t\r\n\t\t\t// rotate geometry around world x-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateX( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationX( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateY: function () {\r\n\t\r\n\t\t\t// rotate geometry around world y-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateY( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationY( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateZ: function () {\r\n\t\r\n\t\t\t// rotate geometry around world z-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateZ( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationZ( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function () {\r\n\t\r\n\t\t\t// translate geometry\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function translate( x, y, z ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeTranslation( x, y, z );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tscale: function () {\r\n\t\r\n\t\t\t// scale geometry\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function scale( x, y, z ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeScale( x, y, z );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tlookAt: function () {\r\n\t\r\n\t\t\tvar obj;\r\n\t\r\n\t\t\treturn function lookAt( vector ) {\r\n\t\r\n\t\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\t\r\n\t\t\t\tobj.lookAt( vector );\r\n\t\r\n\t\t\t\tobj.updateMatrix();\r\n\t\r\n\t\t\t\tthis.applyMatrix( obj.matrix );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tfromBufferGeometry: function ( geometry ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\r\n\t\t\tvar vertices = attributes.position.array;\r\n\t\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\t\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\t\r\n\t\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\t\r\n\t\t\tvar tempNormals = [];\r\n\t\t\tvar tempUVs = [];\r\n\t\t\tvar tempUVs2 = [];\r\n\t\r\n\t\t\tfor ( var i = 0, j = 0, k = 0; i < vertices.length; i += 3, j += 2, k += 4 ) {\r\n\t\r\n\t\t\t\tscope.vertices.push( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\t\r\n\t\t\t\tif ( normals !== undefined ) {\r\n\t\r\n\t\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( colors !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( uvs !== undefined ) {\r\n\t\r\n\t\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( uvs2 !== undefined ) {\r\n\t\r\n\t\t\t\t\ttempUVs2.push( new THREE.Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar addFace = function ( a, b, c ) {\r\n\t\r\n\t\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\t\r\n\t\t\t\tvar face = new THREE.Face3( a, b, c, vertexNormals, vertexColors );\r\n\t\r\n\t\t\t\tscope.faces.push( face );\r\n\t\r\n\t\t\t\tif ( uvs !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( uvs2 !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tif ( indices !== undefined ) {\r\n\t\r\n\t\t\t\tvar groups = geometry.groups;\r\n\t\r\n\t\t\t\tif ( groups.length > 0 ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\r\n\t\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\t\tvar count = group.count;\r\n\t\r\n\t\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ] );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < vertices.length / 3; i += 3 ) {\r\n\t\r\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.computeFaceNormals();\r\n\t\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function () {\r\n\t\r\n\t\t\tthis.computeBoundingBox();\r\n\t\r\n\t\t\tvar offset = this.boundingBox.center().negate();\r\n\t\r\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\t\r\n\t\t\treturn offset;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalize: function () {\r\n\t\r\n\t\t\tthis.computeBoundingSphere();\r\n\t\r\n\t\t\tvar center = this.boundingSphere.center;\r\n\t\t\tvar radius = this.boundingSphere.radius;\r\n\t\r\n\t\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\r\n\t\r\n\t\t\tvar matrix = new THREE.Matrix4();\r\n\t\t\tmatrix.set(\r\n\t\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t\t0, 0, 0, 1\r\n\t\t\t);\r\n\t\r\n\t\t\tthis.applyMatrix( matrix );\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeFaceNormals: function () {\r\n\t\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\t\r\n\t\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\tvar face = this.faces[ f ];\r\n\t\r\n\t\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\t\tvar vC = this.vertices[ face.c ];\r\n\t\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\t\r\n\t\t\t\tcb.normalize();\r\n\t\r\n\t\t\t\tface.normal.copy( cb );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\t\r\n\t\t\tvar v, vl, f, fl, face, vertices;\r\n\t\r\n\t\t\tvertices = new Array( this.vertices.length );\r\n\t\r\n\t\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\t\r\n\t\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( areaWeighted ) {\r\n\t\r\n\t\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\t\r\n\t\t\t\tvar vA, vB, vC;\r\n\t\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\t\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\t\tvC = this.vertices[ face.c ];\r\n\t\r\n\t\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\t\r\n\t\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\t\tvertices[ face.c ].add( cb );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\t\r\n\t\t\t\tvertices[ v ].normalize();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\t\r\n\t\t\t\tif ( vertexNormals.length === 3 ) {\r\n\t\r\n\t\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeMorphNormals: function () {\r\n\t\r\n\t\t\tvar i, il, f, fl, face;\r\n\t\r\n\t\t\t// save original normals\r\n\t\t\t// - create temp variables on first access\r\n\t\t\t//   otherwise just copy (for faster repeated calls)\r\n\t\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\t\r\n\t\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\t\r\n\t\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\t\r\n\t\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\t\r\n\t\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\t\ttmpGeo.faces = this.faces;\r\n\t\r\n\t\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t// create on first access\r\n\t\r\n\t\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\t\r\n\t\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\t\r\n\t\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\t\r\n\t\t\t\t\tvar faceNormal, vertexNormals;\r\n\t\r\n\t\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\t\r\n\t\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\t\r\n\t\t\t\t// set vertices to morph target\r\n\t\r\n\t\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\t\r\n\t\t\t\t// compute morph normals\r\n\t\r\n\t\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\t\ttmpGeo.computeVertexNormals();\r\n\t\r\n\t\t\t\t// store morph normals\r\n\t\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\t\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\t\r\n\t\t\t\t\tfaceNormal.copy( face.normal );\r\n\t\r\n\t\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// restore original normals\r\n\t\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\tface = this.faces[ f ];\r\n\t\r\n\t\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeTangents: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeLineDistances: function () {\r\n\t\r\n\t\t\tvar d = 0;\r\n\t\t\tvar vertices = this.vertices;\r\n\t\r\n\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tif ( i > 0 ) {\r\n\t\r\n\t\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.lineDistances[ i ] = d;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeBoundingBox: function () {\r\n\t\r\n\t\t\tif ( this.boundingBox === null ) {\r\n\t\r\n\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeBoundingSphere: function () {\r\n\t\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\t\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar normalMatrix,\r\n\t\t\tvertexOffset = this.vertices.length,\r\n\t\t\tvertices1 = this.vertices,\r\n\t\t\tvertices2 = geometry.vertices,\r\n\t\t\tfaces1 = this.faces,\r\n\t\t\tfaces2 = geometry.faces,\r\n\t\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\t\r\n\t\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\t\r\n\t\t\tif ( matrix !== undefined ) {\r\n\t\r\n\t\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// vertices\r\n\t\r\n\t\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar vertex = vertices2[ i ];\r\n\t\r\n\t\t\t\tvar vertexCopy = vertex.clone();\r\n\t\r\n\t\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\t\r\n\t\t\t\tvertices1.push( vertexCopy );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// faces\r\n\t\r\n\t\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\t\tfaceVertexColors = face.vertexColors;\r\n\t\r\n\t\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\t\tfaceCopy.normal.copy( face.normal );\r\n\t\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\t\r\n\t\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfaceCopy.color.copy( face.color );\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\t\r\n\t\t\t\tfaces1.push( faceCopy );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// uvs\r\n\t\r\n\t\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\t\r\n\t\t\t\tif ( uv === undefined ) {\r\n\t\r\n\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tuvCopy.push( uv[ j ].clone() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tuvs1.push( uvCopy );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmergeMesh: function ( mesh ) {\r\n\t\r\n\t\t\tif ( mesh instanceof THREE.Mesh === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\r\n\t\r\n\t\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/*\r\n\t\t * Checks for duplicate vertices with hashmap.\r\n\t\t * Duplicated vertices are removed\r\n\t\t * and faces' vertices are updated.\r\n\t\t */\r\n\t\r\n\t\tmergeVertices: function () {\r\n\t\r\n\t\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\t\tvar unique = [], changes = [];\r\n\t\r\n\t\t\tvar v, key;\r\n\t\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\t\tvar i, il, face;\r\n\t\t\tvar indices, j, jl;\r\n\t\r\n\t\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tv = this.vertices[ i ];\r\n\t\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\t\r\n\t\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\t\r\n\t\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t\t// have to remove them from the geometry.\r\n\t\t\tvar faceIndicesToRemove = [];\r\n\t\r\n\t\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tface = this.faces[ i ];\r\n\t\r\n\t\t\t\tface.a = changes[ face.a ];\r\n\t\t\t\tface.b = changes[ face.b ];\r\n\t\t\t\tface.c = changes[ face.c ];\r\n\t\r\n\t\t\t\tindices = [ face.a, face.b, face.c ];\r\n\t\r\n\t\t\t\tvar dupIndex = - 1;\r\n\t\r\n\t\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\t\r\n\t\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\t\r\n\t\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\t\r\n\t\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\t\r\n\t\t\t\tthis.faces.splice( idx, 1 );\r\n\t\r\n\t\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// Use unique set of vertices\r\n\t\r\n\t\t\tvar diff = this.vertices.length - unique.length;\r\n\t\t\tthis.vertices = unique;\r\n\t\t\treturn diff;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function () {\r\n\t\r\n\t\t\tvar data = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'Geometry',\r\n\t\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\t// standard Geometry serialization\r\n\t\r\n\t\t\tdata.uuid = this.uuid;\r\n\t\t\tdata.type = this.type;\r\n\t\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\r\n\t\t\tif ( this.parameters !== undefined ) {\r\n\t\r\n\t\t\t\tvar parameters = this.parameters;\r\n\t\r\n\t\t\t\tfor ( var key in parameters ) {\r\n\t\r\n\t\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn data;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar vertices = [];\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar faces = [];\r\n\t\t\tvar normals = [];\r\n\t\t\tvar normalsHash = {};\r\n\t\t\tvar colors = [];\r\n\t\t\tvar colorsHash = {};\r\n\t\t\tvar uvs = [];\r\n\t\t\tvar uvsHash = {};\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = this.faces[ i ];\r\n\t\r\n\t\t\t\tvar hasMaterial = false; // face.materialIndex !== undefined;\r\n\t\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\t\r\n\t\t\t\tvar faceType = 0;\r\n\t\r\n\t\t\t\tfaceType = setBit( faceType, 0, 0 );\r\n\t\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\t\r\n\t\t\t\tfaces.push( faceType );\r\n\t\t\t\tfaces.push( face.a, face.b, face.c );\r\n\t\r\n\t\t\t\tif ( hasFaceVertexUv ) {\r\n\t\r\n\t\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\t\r\n\t\t\t\t\tfaces.push(\r\n\t\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t\t);\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceNormal ) {\r\n\t\r\n\t\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\t\r\n\t\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\t\r\n\t\t\t\t\tfaces.push(\r\n\t\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t\t);\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceColor ) {\r\n\t\r\n\t\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceVertexColor ) {\r\n\t\r\n\t\t\t\t\tvar vertexColors = face.vertexColors;\r\n\t\r\n\t\t\t\t\tfaces.push(\r\n\t\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t\t);\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction setBit( value, position, enabled ) {\r\n\t\r\n\t\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getNormalIndex( normal ) {\r\n\t\r\n\t\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\t\r\n\t\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn normalsHash[ hash ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\t\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getColorIndex( color ) {\r\n\t\r\n\t\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\t\r\n\t\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn colorsHash[ hash ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\t\tcolors.push( color.getHex() );\r\n\t\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getUvIndex( uv ) {\r\n\t\r\n\t\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\t\r\n\t\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn uvsHash[ hash ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\t\tuvs.push( uv.x, uv.y );\r\n\t\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tdata.data = {};\r\n\t\r\n\t\t\tdata.data.vertices = vertices;\r\n\t\t\tdata.data.normals = normals;\r\n\t\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\t\tdata.data.faces = faces;\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.vertices = [];\r\n\t\t\tthis.faces = [];\r\n\t\t\tthis.faceVertexUvs = [ [] ];\r\n\t\r\n\t\t\tvar vertices = source.vertices;\r\n\t\r\n\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar faces = source.faces;\r\n\t\r\n\t\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\r\n\t\r\n\t\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\t\r\n\t\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\t\r\n\t\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar uv = uvs[ k ];\r\n\t\r\n\t\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\r\n\t\r\n\tTHREE.GeometryIdCount = 0;\r\n\t\r\n\t// File:src/core/DirectGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.DirectGeometry = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'DirectGeometry';\r\n\t\r\n\t\tthis.indices = [];\r\n\t\tthis.vertices = [];\r\n\t\tthis.normals = [];\r\n\t\tthis.colors = [];\r\n\t\tthis.uvs = [];\r\n\t\tthis.uvs2 = [];\r\n\t\r\n\t\tthis.groups = [];\r\n\t\r\n\t\tthis.morphTargets = {};\r\n\t\r\n\t\tthis.skinWeights = [];\r\n\t\tthis.skinIndices = [];\r\n\t\r\n\t\t// this.lineDistances = [];\r\n\t\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\t\r\n\t\t// update flags\r\n\t\r\n\t\tthis.verticesNeedUpdate = false;\r\n\t\tthis.normalsNeedUpdate = false;\r\n\t\tthis.colorsNeedUpdate = false;\r\n\t\tthis.uvsNeedUpdate = false;\r\n\t\tthis.groupsNeedUpdate = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectGeometry.prototype = {\r\n\t\r\n\t\tconstructor: THREE.DirectGeometry,\r\n\t\r\n\t\tcomputeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,\r\n\t\tcomputeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,\r\n\t\r\n\t\tcomputeFaceNormals: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeVertexNormals: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeGroups: function ( geometry ) {\r\n\t\r\n\t\t\tvar group;\r\n\t\t\tvar groups = [];\r\n\t\t\tvar materialIndex;\r\n\t\r\n\t\t\tvar faces = geometry.faces;\r\n\t\r\n\t\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\t// materials\r\n\t\r\n\t\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\t\r\n\t\t\t\t\tmaterialIndex = face.materialIndex;\r\n\t\r\n\t\t\t\t\tif ( group !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\t\tgroups.push( group );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tgroup = {\r\n\t\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( group !== undefined ) {\r\n\t\r\n\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\tgroups.push( group );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.groups = groups;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromGeometry: function ( geometry ) {\r\n\t\r\n\t\t\tvar faces = geometry.faces;\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\t\r\n\t\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\t\r\n\t\t\t// morphs\r\n\t\r\n\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\tvar morphTargetsLength = morphTargets.length;\r\n\t\r\n\t\t\tif ( morphTargetsLength > 0 ) {\r\n\t\r\n\t\t\t\tvar morphTargetsPosition = [];\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\t\r\n\t\t\t\t\tmorphTargetsPosition[ i ] = [];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar morphNormals = geometry.morphNormals;\r\n\t\t\tvar morphNormalsLength = morphNormals.length;\r\n\t\r\n\t\t\tif ( morphNormalsLength > 0 ) {\r\n\t\r\n\t\t\t\tvar morphTargetsNormal = [];\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\t\r\n\t\t\t\t\tmorphTargetsNormal[ i ] = [];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// skins\r\n\t\r\n\t\t\tvar skinIndices = geometry.skinIndices;\r\n\t\t\tvar skinWeights = geometry.skinWeights;\r\n\t\r\n\t\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\t\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\t\r\n\t\t\t\tif ( vertexNormals.length === 3 ) {\r\n\t\r\n\t\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar normal = face.normal;\r\n\t\r\n\t\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\t\r\n\t\t\t\tif ( vertexColors.length === 3 ) {\r\n\t\r\n\t\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar color = face.color;\r\n\t\r\n\t\t\t\t\tthis.colors.push( color, color, color );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceVertexUv === true ) {\r\n\t\r\n\t\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\t\r\n\t\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\t\r\n\t\t\t\t\t\tthis.uvs.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\t\r\n\t\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\t\r\n\t\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\t\r\n\t\t\t\t\t\tthis.uvs2.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// morphs\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\r\n\t\r\n\t\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\t\r\n\t\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// skins\r\n\t\r\n\t\t\t\tif ( hasSkinIndices ) {\r\n\t\r\n\t\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( hasSkinWeights ) {\r\n\t\r\n\t\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.computeGroups( geometry );\r\n\t\r\n\t\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.DirectGeometry.prototype );\r\n\t\r\n\t// File:src/core/BufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.BufferGeometry = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'BufferGeometry';\r\n\t\r\n\t\tthis.index = null;\r\n\t\tthis.attributes = {};\r\n\t\r\n\t\tthis.morphAttributes = {};\r\n\t\r\n\t\tthis.groups = [];\r\n\t\r\n\t\tthis.boundingBox = null;\r\n\t\tthis.boundingSphere = null;\r\n\t\r\n\t\tthis.drawRange = { start: 0, count: Infinity };\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BufferGeometry.prototype = {\r\n\t\r\n\t\tconstructor: THREE.BufferGeometry,\r\n\t\r\n\t\taddIndex: function ( index ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\t\tthis.setIndex( index );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetIndex: function () {\r\n\t\r\n\t\t\treturn this.index;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetIndex: function ( index ) {\r\n\t\r\n\t\t\tthis.index = index;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddAttribute: function ( name, attribute ) {\r\n\t\r\n\t\t\tif ( attribute instanceof THREE.BufferAttribute === false && attribute instanceof THREE.InterleavedBufferAttribute === false ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\t\r\n\t\t\t\tthis.addAttribute( name, new THREE.BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\t\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( name === 'index' ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\t\tthis.setIndex( attribute );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.attributes[ name ] = attribute;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetAttribute: function ( name ) {\r\n\t\r\n\t\t\treturn this.attributes[ name ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tremoveAttribute: function ( name ) {\r\n\t\r\n\t\t\tdelete this.attributes[ name ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget drawcalls() {\r\n\t\r\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget offsets() {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\t\treturn this.groups;\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddDrawCall: function ( start, count, indexOffset ) {\r\n\t\r\n\t\t\tif ( indexOffset !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\t\tthis.addGroup( start, count );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclearDrawCalls: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\t\tthis.clearGroups();\r\n\t\r\n\t\t},\r\n\t\r\n\t\taddGroup: function ( start, count, materialIndex ) {\r\n\t\r\n\t\t\tthis.groups.push( {\r\n\t\r\n\t\t\t\tstart: start,\r\n\t\t\t\tcount: count,\r\n\t\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclearGroups: function () {\r\n\t\r\n\t\t\tthis.groups = [];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetDrawRange: function ( start, count ) {\r\n\t\r\n\t\t\tthis.drawRange.start = start;\r\n\t\t\tthis.drawRange.count = count;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tapplyMatrix: function ( matrix ) {\r\n\t\r\n\t\t\tvar position = this.attributes.position;\r\n\t\r\n\t\t\tif ( position !== undefined ) {\r\n\t\r\n\t\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\t\tposition.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar normal = this.attributes.normal;\r\n\t\r\n\t\t\tif ( normal !== undefined ) {\r\n\t\r\n\t\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\t\r\n\t\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\t\tnormal.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tthis.computeBoundingBox();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tthis.computeBoundingSphere();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\trotateX: function () {\r\n\t\r\n\t\t\t// rotate geometry around world x-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateX( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationX( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateY: function () {\r\n\t\r\n\t\t\t// rotate geometry around world y-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateY( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationY( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\trotateZ: function () {\r\n\t\r\n\t\t\t// rotate geometry around world z-axis\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function rotateZ( angle ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeRotationZ( angle );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\ttranslate: function () {\r\n\t\r\n\t\t\t// translate geometry\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function translate( x, y, z ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeTranslation( x, y, z );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tscale: function () {\r\n\t\r\n\t\t\t// scale geometry\r\n\t\r\n\t\t\tvar m1;\r\n\t\r\n\t\t\treturn function scale( x, y, z ) {\r\n\t\r\n\t\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\t\r\n\t\t\t\tm1.makeScale( x, y, z );\r\n\t\r\n\t\t\t\tthis.applyMatrix( m1 );\r\n\t\r\n\t\t\t\treturn this;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tlookAt: function () {\r\n\t\r\n\t\t\tvar obj;\r\n\t\r\n\t\t\treturn function lookAt( vector ) {\r\n\t\r\n\t\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\t\r\n\t\t\t\tobj.lookAt( vector );\r\n\t\r\n\t\t\t\tobj.updateMatrix();\r\n\t\r\n\t\t\t\tthis.applyMatrix( obj.matrix );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tcenter: function () {\r\n\t\r\n\t\t\tthis.computeBoundingBox();\r\n\t\r\n\t\t\tvar offset = this.boundingBox.center().negate();\r\n\t\r\n\t\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\t\r\n\t\t\treturn offset;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetFromObject: function ( object ) {\r\n\t\r\n\t\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\t\r\n\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\tif ( object instanceof THREE.Points || object instanceof THREE.Line ) {\r\n\t\r\n\t\t\t\tvar positions = new THREE.Float32Attribute( geometry.vertices.length * 3, 3 );\r\n\t\t\t\tvar colors = new THREE.Float32Attribute( geometry.colors.length * 3, 3 );\r\n\t\r\n\t\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\t\r\n\t\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\t\r\n\t\t\t\t\tvar lineDistances = new THREE.Float32Attribute( geometry.lineDistances.length, 1 );\r\n\t\r\n\t\t\t\t\tthis.addAttribute( 'lineDistance',  lineDistances.copyArray( geometry.lineDistances ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\t\r\n\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\t\tthis.fromGeometry( geometry );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdateFromObject: function ( object ) {\r\n\t\r\n\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\tif ( object instanceof THREE.Mesh ) {\r\n\t\r\n\t\t\t\tvar direct = geometry.__directGeometry;\r\n\t\r\n\t\t\t\tif ( direct === undefined ) {\r\n\t\r\n\t\t\t\t\treturn this.fromGeometry( geometry );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\t\r\n\t\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\t\tgeometry.groupsNeedUpdate = false;\r\n\t\r\n\t\t\t\tgeometry = direct;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\t\r\n\t\t\t\tvar attribute = this.attributes.position;\r\n\t\r\n\t\t\t\tif ( attribute !== undefined ) {\r\n\t\r\n\t\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\t\r\n\t\t\t\tvar attribute = this.attributes.normal;\r\n\t\r\n\t\t\t\tif ( attribute !== undefined ) {\r\n\t\r\n\t\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\t\r\n\t\t\t\tvar attribute = this.attributes.color;\r\n\t\r\n\t\t\t\tif ( attribute !== undefined ) {\r\n\t\r\n\t\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\t\r\n\t\t\t\tvar attribute = this.attributes.lineDistance;\r\n\t\r\n\t\t\t\tif ( attribute !== undefined ) {\r\n\t\r\n\t\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\t\tattribute.needsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.groupsNeedUpdate ) {\r\n\t\r\n\t\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\t\tthis.groups = geometry.groups;\r\n\t\r\n\t\t\t\tgeometry.groupsNeedUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromGeometry: function ( geometry ) {\r\n\t\r\n\t\t\tgeometry.__directGeometry = new THREE.DirectGeometry().fromGeometry( geometry );\r\n\t\r\n\t\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfromDirectGeometry: function ( geometry ) {\r\n\t\r\n\t\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\t\r\n\t\t\tif ( geometry.normals.length > 0 ) {\r\n\t\r\n\t\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.colors.length > 0 ) {\r\n\t\r\n\t\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.uvs.length > 0 ) {\r\n\t\r\n\t\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.uvs2.length > 0 ) {\r\n\t\r\n\t\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\t\tthis.addAttribute( 'uv2', new THREE.BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.indices.length > 0 ) {\r\n\t\r\n\t\t\t\tvar TypeArray = geometry.vertices.length > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\r\n\t\t\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// groups\r\n\t\r\n\t\t\tthis.groups = geometry.groups;\r\n\t\r\n\t\t\t// morphs\r\n\t\r\n\t\t\tfor ( var name in geometry.morphTargets ) {\r\n\t\r\n\t\t\t\tvar array = [];\r\n\t\t\t\tvar morphTargets = geometry.morphTargets[ name ];\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar morphTarget = morphTargets[ i ];\r\n\t\r\n\t\t\t\t\tvar attribute = new THREE.Float32Attribute( morphTarget.length * 3, 3 );\r\n\t\r\n\t\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.morphAttributes[ name ] = array;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// skinning\r\n\t\r\n\t\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\t\r\n\t\t\t\tvar skinIndices = new THREE.Float32Attribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\t\r\n\t\t\t\tvar skinWeights = new THREE.Float32Attribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeBoundingBox: function () {\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tif ( this.boundingBox === null ) {\r\n\t\r\n\t\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar positions = this.attributes.position.array;\r\n\t\r\n\t\t\t\tif ( positions ) {\r\n\t\r\n\t\t\t\t\tvar bb = this.boundingBox;\r\n\t\t\t\t\tbb.makeEmpty();\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\t\tbb.expandByPoint( vector );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( positions === undefined || positions.length === 0 ) {\r\n\t\r\n\t\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\r\n\t\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tcomputeBoundingSphere: function () {\r\n\t\r\n\t\t\tvar box = new THREE.Box3();\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\treturn function () {\r\n\t\r\n\t\t\t\tif ( this.boundingSphere === null ) {\r\n\t\r\n\t\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar positions = this.attributes.position.array;\r\n\t\r\n\t\t\t\tif ( positions ) {\r\n\t\r\n\t\t\t\t\tbox.makeEmpty();\r\n\t\r\n\t\t\t\t\tvar center = this.boundingSphere.center;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\t\tbox.expandByPoint( vector );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tbox.center( center );\r\n\t\r\n\t\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\t\r\n\t\t\t\t\tvar maxRadiusSq = 0;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\t\r\n\t\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\t\r\n\t\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t}(),\r\n\t\r\n\t\tcomputeFaceNormals: function () {\r\n\t\r\n\t\t\t// backwards compatibility\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeVertexNormals: function () {\r\n\t\r\n\t\t\tvar index = this.index;\r\n\t\t\tvar attributes = this.attributes;\r\n\t\t\tvar groups = this.groups;\r\n\t\r\n\t\t\tif ( attributes.position ) {\r\n\t\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\tif ( attributes.normal === undefined ) {\r\n\t\r\n\t\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// reset existing normals to zero\r\n\t\r\n\t\t\t\t\tvar normals = attributes.normal.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = normals.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tnormals[ i ] = 0;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar normals = attributes.normal.array;\r\n\t\r\n\t\t\t\tvar vA, vB, vC,\r\n\t\r\n\t\t\t\tpA = new THREE.Vector3(),\r\n\t\t\t\tpB = new THREE.Vector3(),\r\n\t\t\t\tpC = new THREE.Vector3(),\r\n\t\r\n\t\t\t\tcb = new THREE.Vector3(),\r\n\t\t\t\tab = new THREE.Vector3();\r\n\t\r\n\t\t\t\t// indexed elements\r\n\t\r\n\t\t\t\tif ( index ) {\r\n\t\r\n\t\t\t\t\tvar indices = index.array;\r\n\t\r\n\t\t\t\t\tif ( groups.length === 0 ) {\r\n\t\r\n\t\t\t\t\t\tthis.addGroup( 0, indices.length );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\t\r\n\t\t\t\t\t\tvar group = groups[ j ];\r\n\t\r\n\t\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\t\tvar count = group.count;\r\n\t\r\n\t\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\r\n\t\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\r\n\t\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\r\n\t\r\n\t\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\t\r\n\t\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\t\tcb.cross( ab );\r\n\t\r\n\t\t\t\t\t\t\tnormals[ vA ] += cb.x;\r\n\t\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\t\r\n\t\t\t\t\t\t\tnormals[ vB ] += cb.x;\r\n\t\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\t\r\n\t\t\t\t\t\t\tnormals[ vC ] += cb.x;\r\n\t\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\t\r\n\t\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\t\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\t\r\n\t\t\t\t\t\tnormals[ i ] = cb.x;\r\n\t\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\t\r\n\t\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\t\r\n\t\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.normalizeNormals();\r\n\t\r\n\t\t\t\tattributes.normal.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeTangents: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcomputeOffsets: function ( size ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.')\r\n\t\r\n\t\t},\r\n\t\r\n\t\tmerge: function ( geometry, offset ) {\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\r\n\t\t\tvar attributes = this.attributes;\r\n\t\r\n\t\t\tfor ( var key in attributes ) {\r\n\t\r\n\t\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\t\r\n\t\t\t\tvar attribute1 = attributes[ key ];\r\n\t\t\t\tvar attributeArray1 = attribute1.array;\r\n\t\r\n\t\t\t\tvar attribute2 = geometry.attributes[ key ];\r\n\t\t\t\tvar attributeArray2 = attribute2.array;\r\n\t\r\n\t\t\t\tvar attributeSize = attribute2.itemSize;\r\n\t\r\n\t\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\t\r\n\t\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalizeNormals: function () {\r\n\t\r\n\t\t\tvar normals = this.attributes.normal.array;\r\n\t\r\n\t\t\tvar x, y, z, n;\r\n\t\r\n\t\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\tx = normals[ i ];\r\n\t\t\t\ty = normals[ i + 1 ];\r\n\t\t\t\tz = normals[ i + 2 ];\r\n\t\r\n\t\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\t\r\n\t\t\t\tnormals[ i ] *= n;\r\n\t\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\t\tnormals[ i + 2 ] *= n;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function () {\r\n\t\r\n\t\t\tvar data = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\t// standard BufferGeometry serialization\r\n\t\r\n\t\t\tdata.uuid = this.uuid;\r\n\t\t\tdata.type = this.type;\r\n\t\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\r\n\t\t\tif ( this.parameters !== undefined ) {\r\n\t\r\n\t\t\t\tvar parameters = this.parameters;\r\n\t\r\n\t\t\t\tfor ( var key in parameters ) {\r\n\t\r\n\t\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn data;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tdata.data = { attributes: {} };\r\n\t\r\n\t\t\tvar index = this.index;\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\tvar array = Array.prototype.slice.call( index.array );\r\n\t\r\n\t\t\t\tdata.data.index = {\r\n\t\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\t\tarray: array\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar attributes = this.attributes;\r\n\t\r\n\t\t\tfor ( var key in attributes ) {\r\n\t\r\n\t\t\t\tvar attribute = attributes[ key ];\r\n\t\r\n\t\t\t\tvar array = Array.prototype.slice.call( attribute.array );\r\n\t\r\n\t\t\t\tdata.data.attributes[ key ] = {\r\n\t\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\t\tarray: array\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar groups = this.groups;\r\n\t\r\n\t\t\tif ( groups.length > 0 ) {\r\n\t\r\n\t\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar boundingSphere = this.boundingSphere;\r\n\t\r\n\t\t\tif ( boundingSphere !== null ) {\r\n\t\r\n\t\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tvar index = source.index;\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\tthis.setIndex( index.clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar attributes = source.attributes;\r\n\t\r\n\t\t\tfor ( var name in attributes ) {\r\n\t\r\n\t\t\t\tvar attribute = attributes[ name ];\r\n\t\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar groups = source.groups;\r\n\t\r\n\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\tthis.addGroup( group.start, group.count );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\r\n\t\r\n\tTHREE.BufferGeometry.MaxIndex = 65535;\r\n\t\r\n\t// File:src/core/InstancedBufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.InstancedBufferGeometry = function () {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthis.type = 'InstancedBufferGeometry';\r\n\t\tthis.maxInstancedCount = undefined;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InstancedBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry;\r\n\t\r\n\tTHREE.InstancedBufferGeometry.prototype.addGroup = function ( start, count, instances ) {\r\n\t\r\n\t\tthis.groups.push( {\r\n\t\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tinstances: instances\r\n\t\r\n\t\t} );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.InstancedBufferGeometry.prototype.copy = function ( source ) {\r\n\t\r\n\t\tvar index = source.index;\r\n\t\r\n\t\tif ( index !== null ) {\r\n\t\r\n\t\t\tthis.setIndex( index.clone() );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar attributes = source.attributes;\r\n\t\r\n\t\tfor ( var name in attributes ) {\r\n\t\r\n\t\t\tvar attribute = attributes[ name ];\r\n\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar groups = source.groups;\r\n\t\r\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count, group.instances );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.InstancedBufferGeometry.prototype );\r\n\t\r\n\t// File:src/cameras/Camera.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.Camera = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Camera';\r\n\t\r\n\t\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\t\tthis.projectionMatrix = new THREE.Matrix4();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Camera.prototype.constructor = THREE.Camera;\r\n\t\r\n\tTHREE.Camera.prototype.getWorldDirection = function () {\r\n\t\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\t\r\n\t\treturn function ( optionalTarget ) {\r\n\t\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\t\r\n\t\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.Camera.prototype.lookAt = function () {\r\n\t\r\n\t\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\t\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\t\r\n\t\treturn function ( vector ) {\r\n\t\r\n\t\t\tm1.lookAt( this.position, vector, this.up );\r\n\t\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.Camera.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Camera.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/cameras/CubeCamera.js\r\n\t\r\n\t/**\r\n\t * Camera for rendering cube maps\r\n\t *\t- renders scene into axis-aligned cube\r\n\t *\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'CubeCamera';\r\n\t\r\n\t\tvar fov = 90, aspect = 1;\r\n\t\r\n\t\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraPX.up.set( 0, - 1, 0 );\r\n\t\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\t\tthis.add( cameraPX );\r\n\t\r\n\t\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraNX.up.set( 0, - 1, 0 );\r\n\t\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\t\tthis.add( cameraNX );\r\n\t\r\n\t\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraPY.up.set( 0, 0, 1 );\r\n\t\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\t\tthis.add( cameraPY );\r\n\t\r\n\t\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraNY.up.set( 0, 0, - 1 );\r\n\t\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\t\tthis.add( cameraNY );\r\n\t\r\n\t\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraPZ.up.set( 0, - 1, 0 );\r\n\t\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\t\tthis.add( cameraPZ );\r\n\t\r\n\t\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\t\tcameraNZ.up.set( 0, - 1, 0 );\r\n\t\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\t\tthis.add( cameraNZ );\r\n\t\r\n\t\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter } );\r\n\t\r\n\t\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\t\r\n\t\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\t\r\n\t\t\tvar renderTarget = this.renderTarget;\r\n\t\t\tvar generateMipmaps = renderTarget.generateMipmaps;\r\n\t\r\n\t\t\trenderTarget.generateMipmaps = false;\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 0;\r\n\t\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 1;\r\n\t\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 2;\r\n\t\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 3;\r\n\t\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 4;\r\n\t\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\t\r\n\t\t\trenderTarget.generateMipmaps = generateMipmaps;\r\n\t\r\n\t\t\trenderTarget.activeCubeFace = 5;\r\n\t\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\t\r\n\t\t\trenderer.setRenderTarget( null );\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\r\n\t\r\n\t// File:src/cameras/OrthographicCamera.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\t\r\n\t\tTHREE.Camera.call( this );\r\n\t\r\n\t\tthis.type = 'OrthographicCamera';\r\n\t\r\n\t\tthis.zoom = 1;\r\n\t\r\n\t\tthis.left = left;\r\n\t\tthis.right = right;\r\n\t\tthis.top = top;\r\n\t\tthis.bottom = bottom;\r\n\t\r\n\t\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\t\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\t\r\n\t\tthis.updateProjectionMatrix();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\r\n\tTHREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera;\r\n\t\r\n\tTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\r\n\t\r\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\t\tvar cx = ( this.right + this.left ) / 2;\r\n\t\tvar cy = ( this.top + this.bottom ) / 2;\r\n\t\r\n\t\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.OrthographicCamera.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Camera.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.left = source.left;\r\n\t\tthis.right = source.right;\r\n\t\tthis.top = source.top;\r\n\t\tthis.bottom = source.bottom;\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\t\t\r\n\t\tthis.zoom = source.zoom;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\t\r\n\t};\r\n\t\r\n\tTHREE.OrthographicCamera.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.zoom = this.zoom;\r\n\t\tdata.object.left = this.left;\r\n\t\tdata.object.right = this.right;\r\n\t\tdata.object.top = this.top;\r\n\t\tdata.object.bottom = this.bottom;\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/cameras/PerspectiveCamera.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author greggman / http://games.greggman.com/\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t */\r\n\t\r\n\tTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\r\n\t\r\n\t\tTHREE.Camera.call( this );\r\n\t\r\n\t\tthis.type = 'PerspectiveCamera';\r\n\t\r\n\t\tthis.zoom = 1;\r\n\t\r\n\t\tthis.fov = fov !== undefined ? fov : 50;\r\n\t\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\t\tthis.near = near !== undefined ? near : 0.1;\r\n\t\tthis.far = far !== undefined ? far : 2000;\r\n\t\r\n\t\tthis.updateProjectionMatrix();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\r\n\tTHREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera;\r\n\t\r\n\t\r\n\t/**\r\n\t * Uses Focal Length (in mm) to estimate and set FOV\r\n\t * 35mm (full-frame) camera is used if frame size is not specified;\r\n\t * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\r\n\t */\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\r\n\t\r\n\t\tif ( frameHeight === undefined ) frameHeight = 24;\r\n\t\r\n\t\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\r\n\t\tthis.updateProjectionMatrix();\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\r\n\t * multi-monitor/multi-machine setups.\r\n\t *\r\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n\t * the monitors are in grid like this\r\n\t *\r\n\t *   +---+---+---+\r\n\t *   | A | B | C |\r\n\t *   +---+---+---+\r\n\t *   | D | E | F |\r\n\t *   +---+---+---+\r\n\t *\r\n\t * then for each monitor you would call it like this\r\n\t *\r\n\t *   var w = 1920;\r\n\t *   var h = 1080;\r\n\t *   var fullWidth = w * 3;\r\n\t *   var fullHeight = h * 2;\r\n\t *\r\n\t *   --A--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n\t *   --B--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n\t *   --C--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n\t *   --D--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n\t *   --E--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n\t *   --F--\r\n\t *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n\t *\r\n\t *   Note there is no reason monitors have to be the same size or in a grid.\r\n\t */\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\t\r\n\t\tthis.fullWidth = fullWidth;\r\n\t\tthis.fullHeight = fullHeight;\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\r\n\t\tthis.updateProjectionMatrix();\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\r\n\t\r\n\t\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\r\n\t\r\n\t\tif ( this.fullWidth ) {\r\n\t\r\n\t\t\tvar aspect = this.fullWidth / this.fullHeight;\r\n\t\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\r\n\t\t\tvar bottom = - top;\r\n\t\t\tvar left = aspect * bottom;\r\n\t\t\tvar right = aspect * top;\r\n\t\t\tvar width = Math.abs( right - left );\r\n\t\t\tvar height = Math.abs( top - bottom );\r\n\t\r\n\t\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\t\tleft + this.x * width / this.fullWidth,\r\n\t\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\r\n\t\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\r\n\t\t\t\ttop - this.y * height / this.fullHeight,\r\n\t\t\t\tthis.near,\r\n\t\t\t\tthis.far\r\n\t\t\t);\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Camera.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.fov = source.fov;\r\n\t\tthis.aspect = source.aspect;\r\n\t\tthis.near = source.near;\r\n\t\tthis.far = source.far;\r\n\t\t\r\n\t\tthis.zoom = source.zoom;\r\n\t\t\r\n\t\treturn this;\r\n\t\t\t\r\n\t};\r\n\t\r\n\tTHREE.PerspectiveCamera.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.zoom = this.zoom;\r\n\t\tdata.object.fov = this.fov;\r\n\t\tdata.object.aspect = this.aspect;\r\n\t\tdata.object.near = this.near;\r\n\t\tdata.object.far = this.far;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/Light.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Light = function ( color ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Light';\r\n\t\r\n\t\tthis.color = new THREE.Color( color );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Light.prototype.constructor = THREE.Light;\r\n\t\r\n\tTHREE.Light.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.color.copy( source.color );\r\n\t\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t// File:src/lights/AmbientLight.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.AmbientLight = function ( color ) {\r\n\t\r\n\t\tTHREE.Light.call( this, color );\r\n\t\r\n\t\tthis.type = 'AmbientLight';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.AmbientLight.prototype.constructor = THREE.AmbientLight;\r\n\t\r\n\tTHREE.AmbientLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/DirectionalLight.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.DirectionalLight = function ( color, intensity ) {\r\n\t\r\n\t\tTHREE.Light.call( this, color );\r\n\t\r\n\t\tthis.type = 'DirectionalLight';\r\n\t\r\n\t\tthis.position.set( 0, 1, 0 );\r\n\t\tthis.updateMatrix();\r\n\t\r\n\t\tthis.target = new THREE.Object3D();\r\n\t\r\n\t\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\t\r\n\t\tthis.castShadow = false;\r\n\t\tthis.onlyShadow = false;\r\n\t\r\n\t\tthis.shadowCameraNear = 50;\r\n\t\tthis.shadowCameraFar = 5000;\r\n\t\r\n\t\tthis.shadowCameraLeft = - 500;\r\n\t\tthis.shadowCameraRight = 500;\r\n\t\tthis.shadowCameraTop = 500;\r\n\t\tthis.shadowCameraBottom = - 500;\r\n\t\r\n\t\tthis.shadowCameraVisible = false;\r\n\t\r\n\t\tthis.shadowBias = 0;\r\n\t\tthis.shadowDarkness = 0.5;\r\n\t\r\n\t\tthis.shadowMapWidth = 512;\r\n\t\tthis.shadowMapHeight = 512;\r\n\t\r\n\t\tthis.shadowMap = null;\r\n\t\tthis.shadowMapSize = null;\r\n\t\tthis.shadowCamera = null;\r\n\t\tthis.shadowMatrix = null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight;\r\n\t\r\n\tTHREE.DirectionalLight.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.intensity = source.intensity;\r\n\t\tthis.target = source.target.clone();\r\n\t\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.onlyShadow = source.onlyShadow;\r\n\t\r\n\t\tthis.shadowCameraNear = source.shadowCameraNear;\r\n\t\tthis.shadowCameraFar = source.shadowCameraFar;\r\n\t\r\n\t\tthis.shadowCameraLeft = source.shadowCameraLeft;\r\n\t\tthis.shadowCameraRight = source.shadowCameraRight;\r\n\t\tthis.shadowCameraTop = source.shadowCameraTop;\r\n\t\tthis.shadowCameraBottom = source.shadowCameraBottom;\r\n\t\r\n\t\tthis.shadowCameraVisible = source.shadowCameraVisible;\r\n\t\r\n\t\tthis.shadowBias = source.shadowBias;\r\n\t\tthis.shadowDarkness = source.shadowDarkness;\r\n\t\r\n\t\tthis.shadowMapWidth = source.shadowMapWidth;\r\n\t\tthis.shadowMapHeight = source.shadowMapHeight;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectionalLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/HemisphereLight.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\t\r\n\t\tTHREE.Light.call( this, skyColor );\r\n\t\r\n\t\tthis.type = 'HemisphereLight';\r\n\t\r\n\t\tthis.position.set( 0, 1, 0 );\r\n\t\tthis.updateMatrix();\r\n\t\r\n\t\tthis.groundColor = new THREE.Color( groundColor );\r\n\t\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight;\r\n\t\r\n\tTHREE.HemisphereLight.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.groundColor.copy( source.groundColor );\r\n\t\tthis.intensity = source.intensity;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.HemisphereLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.groundColor = this.groundColor.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/PointLight.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.PointLight = function ( color, intensity, distance, decay ) {\r\n\t\r\n\t\tTHREE.Light.call( this, color );\r\n\t\r\n\t\tthis.type = 'PointLight';\r\n\t\r\n\t\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\t\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\t\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.PointLight.prototype.constructor = THREE.PointLight;\r\n\t\r\n\tTHREE.PointLight.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.intensity = source.intensity;\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.decay = source.decay;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\t\tdata.object.distance = this.distance;\r\n\t\tdata.object.decay = this.decay;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/lights/SpotLight.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.SpotLight = function ( color, intensity, distance, angle, exponent, decay ) {\r\n\t\r\n\t\tTHREE.Light.call( this, color );\r\n\t\r\n\t\tthis.type = 'SpotLight';\r\n\t\r\n\t\tthis.position.set( 0, 1, 0 );\r\n\t\tthis.updateMatrix();\r\n\t\r\n\t\tthis.target = new THREE.Object3D();\r\n\t\r\n\t\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\t\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\t\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\t\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\r\n\t\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\t\r\n\t\tthis.castShadow = false;\r\n\t\tthis.onlyShadow = false;\r\n\t\r\n\t\tthis.shadowCameraNear = 50;\r\n\t\tthis.shadowCameraFar = 5000;\r\n\t\tthis.shadowCameraFov = 50;\r\n\t\r\n\t\tthis.shadowCameraVisible = false;\r\n\t\r\n\t\tthis.shadowBias = 0;\r\n\t\tthis.shadowDarkness = 0.5;\r\n\t\r\n\t\tthis.shadowMapWidth = 512;\r\n\t\tthis.shadowMapHeight = 512;\r\n\t\r\n\t\tthis.shadowMap = null;\r\n\t\tthis.shadowMapSize = null;\r\n\t\tthis.shadowCamera = null;\r\n\t\tthis.shadowMatrix = null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\r\n\tTHREE.SpotLight.prototype.constructor = THREE.SpotLight;\r\n\t\r\n\tTHREE.SpotLight.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Light.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.intensity = source.intensity;\r\n\t\tthis.distance = source.distance;\r\n\t\tthis.angle = source.angle;\r\n\t\tthis.exponent = source.exponent;\r\n\t\tthis.decay = source.decay;\r\n\t\r\n\t\tthis.target = source.target.clone();\r\n\t\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.onlyShadow = source.onlyShadow;\r\n\t\r\n\t\tthis.shadowCameraNear = source.shadowCameraNear;\r\n\t\tthis.shadowCameraFar = source.shadowCameraFar;\r\n\t\tthis.shadowCameraFov = source.shadowCameraFov;\r\n\t\r\n\t\tthis.shadowCameraVisible = source.shadowCameraVisible;\r\n\t\r\n\t\tthis.shadowBias = source.shadowBias;\r\n\t\tthis.shadowDarkness = source.shadowDarkness;\r\n\t\r\n\t\tthis.shadowMapWidth = source.shadowMapWidth;\r\n\t\tthis.shadowMapHeight = source.shadowMapHeight;\r\n\t\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tTHREE.SpotLight.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.color = this.color.getHex();\r\n\t\tdata.object.intensity = this.intensity;\r\n\t\tdata.object.distance = this.distance;\r\n\t\tdata.object.angle = this.angle;\r\n\t\tdata.object.exponent = this.exponent;\r\n\t\tdata.object.decay = this.decay;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/Cache.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Cache = {\r\n\t\r\n\t\tenabled: false,\r\n\t\r\n\t\tfiles: {},\r\n\t\r\n\t\tadd: function ( key, file ) {\r\n\t\r\n\t\t\tif ( this.enabled === false ) return;\r\n\t\r\n\t\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\t\r\n\t\t\tthis.files[ key ] = file;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget: function ( key ) {\r\n\t\r\n\t\t\tif ( this.enabled === false ) return;\r\n\t\r\n\t\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\t\r\n\t\t\treturn this.files[ key ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tremove: function ( key ) {\r\n\t\r\n\t\t\tdelete this.files[ key ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclear: function () {\r\n\t\r\n\t\t\tthis.files = {};\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/Loader.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Loader = function () {\r\n\t\r\n\t\tthis.onLoadStart = function () {};\r\n\t\tthis.onLoadProgress = function () {};\r\n\t\tthis.onLoadComplete = function () {};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Loader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Loader,\r\n\t\r\n\t\tcrossOrigin: undefined,\r\n\t\r\n\t\textractUrlBase: function ( url ) {\r\n\t\r\n\t\t\tvar parts = url.split( '/' );\r\n\t\r\n\t\t\tif ( parts.length === 1 ) return './';\r\n\t\r\n\t\t\tparts.pop();\r\n\t\r\n\t\t\treturn parts.join( '/' ) + '/';\r\n\t\r\n\t\t},\r\n\t\r\n\t\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\t\r\n\t\t\tvar array = [];\r\n\t\r\n\t\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\t\r\n\t\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn array;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcreateMaterial: ( function () {\r\n\t\r\n\t\t\tvar imageLoader;\r\n\t\r\n\t\t\treturn function createMaterial( m, texturePath, crossOrigin ) {\r\n\t\r\n\t\t\t\tvar scope = this;\r\n\t\r\n\t\t\t\tif ( crossOrigin === undefined && scope.crossOrigin !== undefined ) crossOrigin = scope.crossOrigin;\r\n\t\r\n\t\t\t\tif ( imageLoader === undefined ) imageLoader = new THREE.ImageLoader();\r\n\t\r\n\t\t\t\tfunction nearest_pow2( n ) {\r\n\t\r\n\t\t\t\t\tvar l = Math.log( n ) / Math.LN2;\r\n\t\t\t\t\treturn Math.pow( 2, Math.round(  l ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfunction create_texture( where, name, sourceFile, repeat, offset, wrap, anisotropy ) {\r\n\t\r\n\t\t\t\t\tvar fullPath = texturePath + sourceFile;\r\n\t\r\n\t\t\t\t\tvar texture;\r\n\t\r\n\t\t\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\t\r\n\t\t\t\t\tif ( loader !== null ) {\r\n\t\r\n\t\t\t\t\t\ttexture = loader.load( fullPath );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\ttexture = new THREE.Texture();\r\n\t\r\n\t\t\t\t\t\tloader = imageLoader;\r\n\t\t\t\t\t\tloader.setCrossOrigin( crossOrigin );\r\n\t\t\t\t\t\tloader.load( fullPath, function ( image ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( THREE.Math.isPowerOfTwo( image.width ) === false ||\r\n\t\t\t\t\t\t\t\tTHREE.Math.isPowerOfTwo( image.height ) === false ) {\r\n\t\r\n\t\t\t\t\t\t\t\tvar width = nearest_pow2( image.width );\r\n\t\t\t\t\t\t\t\tvar height = nearest_pow2( image.height );\r\n\t\r\n\t\t\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\t\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\t\t\t\tcanvas.height = height;\r\n\t\r\n\t\t\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\t\t\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\r\n\t\r\n\t\t\t\t\t\t\t\ttexture.image = canvas;\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\ttexture.image = image;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttexture.sourceFile = sourceFile;\r\n\t\r\n\t\t\t\t\tif ( repeat ) {\r\n\t\r\n\t\t\t\t\t\ttexture.repeat.set( repeat[ 0 ], repeat[ 1 ] );\r\n\t\r\n\t\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( offset ) {\r\n\t\r\n\t\t\t\t\t\ttexture.offset.set( offset[ 0 ], offset[ 1 ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( wrap ) {\r\n\t\r\n\t\t\t\t\t\tvar wrapMap = {\r\n\t\t\t\t\t\t\t'repeat': THREE.RepeatWrapping,\r\n\t\t\t\t\t\t\t'mirror': THREE.MirroredRepeatWrapping\r\n\t\t\t\t\t\t};\r\n\t\r\n\t\t\t\t\t\tif ( wrapMap[ wrap[ 0 ] ] !== undefined ) texture.wrapS = wrapMap[ wrap[ 0 ] ];\r\n\t\t\t\t\t\tif ( wrapMap[ wrap[ 1 ] ] !== undefined ) texture.wrapT = wrapMap[ wrap[ 1 ] ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( anisotropy ) {\r\n\t\r\n\t\t\t\t\t\ttexture.anisotropy = anisotropy;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\twhere[ name ] = texture;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfunction rgb2hex( rgb ) {\r\n\t\r\n\t\t\t\t\treturn ( rgb[ 0 ] * 255 << 16 ) + ( rgb[ 1 ] * 255 << 8 ) + rgb[ 2 ] * 255;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// defaults\r\n\t\r\n\t\t\t\tvar mtype = 'MeshLambertMaterial';\r\n\t\t\t\tvar mpars = {};\r\n\t\r\n\t\t\t\t// parameters from model file\r\n\t\r\n\t\t\t\tif ( m.shading ) {\r\n\t\r\n\t\t\t\t\tvar shading = m.shading.toLowerCase();\r\n\t\r\n\t\t\t\t\tif ( shading === 'phong' ) mtype = 'MeshPhongMaterial';\r\n\t\t\t\t\telse if ( shading === 'basic' ) mtype = 'MeshBasicMaterial';\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.blending !== undefined && THREE[ m.blending ] !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.blending = THREE[ m.blending ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.transparent !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.transparent = m.transparent;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.opacity !== undefined && m.opacity < 1.0 ) {\r\n\t\r\n\t\t\t\t\tmpars.transparent = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.depthTest !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.depthTest = m.depthTest;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.depthWrite !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.depthWrite = m.depthWrite;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.visible !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.visible = m.visible;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.flipSided !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.side = THREE.BackSide;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.doubleSided !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.side = THREE.DoubleSide;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.wireframe !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.wireframe = m.wireframe;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.vertexColors !== undefined ) {\r\n\t\r\n\t\t\t\t\tif ( m.vertexColors === 'face' ) {\r\n\t\r\n\t\t\t\t\t\tmpars.vertexColors = THREE.FaceColors;\r\n\t\r\n\t\t\t\t\t} else if ( m.vertexColors ) {\r\n\t\r\n\t\t\t\t\t\tmpars.vertexColors = THREE.VertexColors;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// colors\r\n\t\r\n\t\t\t\tif ( m.colorDiffuse ) {\r\n\t\r\n\t\t\t\t\tmpars.color = rgb2hex( m.colorDiffuse );\r\n\t\r\n\t\t\t\t} else if ( m.DbgColor ) {\r\n\t\r\n\t\t\t\t\tmpars.color = m.DbgColor;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.colorEmissive ) {\r\n\t\r\n\t\t\t\t\tmpars.emissive = rgb2hex( m.colorEmissive );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( mtype === 'MeshPhongMaterial' ) {\r\n\t\r\n\t\t\t\t\tif ( m.colorSpecular ) {\r\n\t\r\n\t\t\t\t\t\tmpars.specular = rgb2hex( m.colorSpecular );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.specularCoef ) {\r\n\t\r\n\t\t\t\t\t\tmpars.shininess = m.specularCoef;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// modifiers\r\n\t\r\n\t\t\t\tif ( m.transparency !== undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.Loader: transparency has been renamed to opacity' );\r\n\t\t\t\t\tm.opacity = m.transparency;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.opacity !== undefined ) {\r\n\t\r\n\t\t\t\t\tmpars.opacity = m.opacity;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// textures\r\n\t\r\n\t\t\t\tif ( texturePath ) {\r\n\t\r\n\t\t\t\t\tif ( m.mapDiffuse ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'map', m.mapDiffuse, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapLight ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'lightMap', m.mapLight, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapAO ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'aoMap', m.mapAO, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapBump ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'bumpMap', m.mapBump, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapNormal ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'normalMap', m.mapNormal, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapSpecular ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'specularMap', m.mapSpecular, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( m.mapAlpha ) {\r\n\t\r\n\t\t\t\t\t\tcreate_texture( mpars, 'alphaMap', m.mapAlpha, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t//\r\n\t\r\n\t\t\t\tif ( m.mapBumpScale ) {\r\n\t\r\n\t\t\t\t\tmpars.bumpScale = m.mapBumpScale;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( m.mapNormalFactor ) {\r\n\t\r\n\t\t\t\t\tmpars.normalScale = new THREE.Vector2( m.mapNormalFactor, m.mapNormalFactor );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar material = new THREE[ mtype ]( mpars );\r\n\t\r\n\t\t\t\tif ( m.DbgName !== undefined ) material.name = m.DbgName;\r\n\t\r\n\t\t\t\treturn material;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t} )()\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Loader.Handlers = {\r\n\t\r\n\t\thandlers: [],\r\n\t\r\n\t\tadd: function ( regex, loader ) {\r\n\t\r\n\t\t\tthis.handlers.push( regex, loader );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget: function ( file ) {\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.handlers.length; i < l; i += 2 ) {\r\n\t\r\n\t\t\t\tvar regex = this.handlers[ i ];\r\n\t\t\t\tvar loader  = this.handlers[ i + 1 ];\r\n\t\r\n\t\t\t\tif ( regex.test( file ) ) {\r\n\t\r\n\t\t\t\t\treturn loader;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn null;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/XHRLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.XHRLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.XHRLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.XHRLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar cached = THREE.Cache.get( url );\r\n\t\r\n\t\t\tif ( cached !== undefined ) {\r\n\t\r\n\t\t\t\tif ( onLoad ) {\r\n\t\r\n\t\t\t\t\tsetTimeout( function () {\r\n\t\r\n\t\t\t\t\t\tonLoad( cached );\r\n\t\r\n\t\t\t\t\t}, 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn cached;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar request = new XMLHttpRequest();\r\n\t\t\trequest.open( 'GET', url, true );\r\n\t\r\n\t\t\trequest.addEventListener( 'load', function ( event ) {\r\n\t\r\n\t\t\t\tTHREE.Cache.add( url, this.response );\r\n\t\r\n\t\t\t\tif ( onLoad ) onLoad( this.response );\r\n\t\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\t\r\n\t\t\t}, false );\r\n\t\r\n\t\t\tif ( onProgress !== undefined ) {\r\n\t\r\n\t\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\t\r\n\t\t\t\t\tonProgress( event );\r\n\t\r\n\t\t\t\t}, false );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\trequest.addEventListener( 'error', function ( event ) {\r\n\t\r\n\t\t\t\tif ( onError ) onError( event );\r\n\t\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\r\n\t\t\t}, false );\r\n\t\r\n\t\t\tif ( this.crossOrigin !== undefined ) request.crossOrigin = this.crossOrigin;\r\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\t\r\n\t\t\trequest.send( null );\r\n\t\r\n\t\t\tscope.manager.itemStart( url );\r\n\t\r\n\t\t\treturn request;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetResponseType: function ( value ) {\r\n\t\r\n\t\t\tthis.responseType = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetWithCredentials: function ( value ) {\r\n\t\r\n\t\t\tthis.withCredentials = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/ImageLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.ImageLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ImageLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.ImageLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar cached = THREE.Cache.get( url );\r\n\t\r\n\t\t\tif ( cached !== undefined ) {\r\n\t\r\n\t\t\t\tif ( onLoad ) {\r\n\t\r\n\t\t\t\t\tsetTimeout( function () {\r\n\t\r\n\t\t\t\t\t\tonLoad( cached );\r\n\t\r\n\t\t\t\t\t}, 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn cached;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar image = document.createElement( 'img' );\r\n\t\r\n\t\t\timage.addEventListener( 'load', function ( event ) {\r\n\t\r\n\t\t\t\tTHREE.Cache.add( url, this );\r\n\t\r\n\t\t\t\tif ( onLoad ) onLoad( this );\r\n\t\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\t\r\n\t\t\t}, false );\r\n\t\r\n\t\t\tif ( onProgress !== undefined ) {\r\n\t\r\n\t\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\t\r\n\t\t\t\t\tonProgress( event );\r\n\t\r\n\t\t\t\t}, false );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\timage.addEventListener( 'error', function ( event ) {\r\n\t\r\n\t\t\t\tif ( onError ) onError( event );\r\n\t\r\n\t\t\t\tscope.manager.itemError( url );\r\n\t\r\n\t\t\t}, false );\r\n\t\r\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\t\r\n\t\t\tscope.manager.itemStart( url );\r\n\t\r\n\t\t\timage.src = url;\r\n\t\r\n\t\t\treturn image;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/JSONLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.JSONLoader = function ( manager ) {\r\n\t\r\n\t\tif ( typeof manager === 'boolean' ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n\t\t\tmanager = undefined;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t\tthis.withCredentials = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.JSONLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.JSONLoader,\r\n\t\r\n\t\t// Deprecated\r\n\t\t\r\n\t\tget statusDomElement () {\r\n\t\r\n\t\t\tif ( this._statusDomElement === undefined ) {\r\n\t\r\n\t\t\t\tthis._statusDomElement = document.createElement( 'div' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tconsole.warn( 'THREE.JSONLoader: .statusDomElement has been removed.' );\r\n\t\t\treturn this._statusDomElement;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tload: function( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : THREE.Loader.prototype.extractUrlBase( url );\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.setWithCredentials( this.withCredentials );\r\n\t\t\tloader.load( url, function ( text ) {\r\n\t\r\n\t\t\t\tvar json = JSON.parse( text );\r\n\t\t\t\tvar metadata = json.metadata;\r\n\t\r\n\t\t\t\tif ( metadata !== undefined ) {\r\n\t\r\n\t\t\t\t\tif ( metadata.type === 'object' ) {\r\n\t\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( metadata.type === 'scene' ) {\r\n\t\r\n\t\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\r\n\t\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar object = scope.parse( json, texturePath );\r\n\t\t\t\tonLoad( object.geometry, object.materials );\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetTexturePath: function ( value ) {\r\n\t\r\n\t\t\tthis.texturePath = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( json, texturePath ) {\r\n\t\r\n\t\t\tvar geometry = new THREE.Geometry(),\r\n\t\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\t\r\n\t\t\tparseModel( scale );\r\n\t\r\n\t\t\tparseSkin();\r\n\t\t\tparseMorphing( scale );\r\n\t\r\n\t\t\tgeometry.computeFaceNormals();\r\n\t\t\tgeometry.computeBoundingSphere();\r\n\t\r\n\t\t\tfunction parseModel( scale ) {\r\n\t\r\n\t\t\t\tfunction isBitSet( value, position ) {\r\n\t\r\n\t\t\t\t\treturn value & ( 1 << position );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar i, j, fi,\r\n\t\r\n\t\t\t\toffset, zLength,\r\n\t\r\n\t\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\t\r\n\t\t\t\ttype,\r\n\t\t\t\tisQuad,\r\n\t\t\t\thasMaterial,\r\n\t\t\t\thasFaceVertexUv,\r\n\t\t\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\t\t\thasFaceColor, hasFaceVertexColor,\r\n\t\r\n\t\t\tvertex, face, faceA, faceB, hex, normal,\r\n\t\r\n\t\t\t\tuvLayer, uv, u, v,\r\n\t\r\n\t\t\t\tfaces = json.faces,\r\n\t\t\t\tvertices = json.vertices,\r\n\t\t\t\tnormals = json.normals,\r\n\t\t\t\tcolors = json.colors,\r\n\t\r\n\t\t\t\tnUvLayers = 0;\r\n\t\r\n\t\t\t\tif ( json.uvs !== undefined ) {\r\n\t\r\n\t\t\t\t\t// disregard empty arrays\r\n\t\r\n\t\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\toffset = 0;\r\n\t\t\t\tzLength = vertices.length;\r\n\t\r\n\t\t\t\twhile ( offset < zLength ) {\r\n\t\r\n\t\t\t\t\tvertex = new THREE.Vector3();\r\n\t\r\n\t\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\t\r\n\t\t\t\t\tgeometry.vertices.push( vertex );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\toffset = 0;\r\n\t\t\t\tzLength = faces.length;\r\n\t\r\n\t\t\t\twhile ( offset < zLength ) {\r\n\t\r\n\t\t\t\t\ttype = faces[ offset ++ ];\r\n\t\r\n\t\r\n\t\t\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\t\r\n\t\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\t\r\n\t\t\t\t\tif ( isQuad ) {\r\n\t\r\n\t\t\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\t\r\n\t\t\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\t\r\n\t\t\t\t\t\toffset += 4;\r\n\t\r\n\t\t\t\t\t\tif ( hasMaterial ) {\r\n\t\r\n\t\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t// to get face <=> uv index correspondence\r\n\t\r\n\t\t\t\t\t\tfi = geometry.faces.length;\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\t\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\t\r\n\t\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\t\r\n\t\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\t\r\n\t\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\t\r\n\t\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceNormal ) {\r\n\t\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\t\r\n\t\t\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\t\r\n\t\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t\t);\r\n\t\r\n\t\r\n\t\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceColor ) {\r\n\t\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\t\r\n\t\t\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\t\t\tfaceB.color.setHex( hex );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\t\r\n\t\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\t\t\tgeometry.faces.push( faceB );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.c = faces[ offset ++ ];\r\n\t\r\n\t\t\t\t\t\tif ( hasMaterial ) {\r\n\t\r\n\t\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.materialIndex = materialIndex;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t// to get face <=> uv index correspondence\r\n\t\r\n\t\t\t\t\t\tfi = geometry.faces.length;\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\t\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\r\n\t\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\t\r\n\t\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\t\r\n\t\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\t\r\n\t\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceNormal ) {\r\n\t\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\t\r\n\t\t\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\t\r\n\t\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceColor ) {\r\n\t\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tgeometry.faces.push( face );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tfunction parseSkin() {\r\n\t\r\n\t\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\t\r\n\t\t\t\tif ( json.skinWeights ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\t\r\n\t\t\t\t\t\tvar x =                               json.skinWeights[ i ];\r\n\t\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\t\r\n\t\t\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( json.skinIndices ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\t\r\n\t\t\t\t\t\tvar a =                               json.skinIndices[ i ];\r\n\t\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\t\r\n\t\t\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.bones = json.bones;\r\n\t\r\n\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t// could change this to json.animations[0] or remove completely\r\n\t\r\n\t\t\t\tgeometry.animation = json.animation;\r\n\t\t\t\tgeometry.animations = json.animations;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tfunction parseMorphing( scale ) {\r\n\t\r\n\t\t\t\tif ( json.morphTargets !== undefined ) {\r\n\t\r\n\t\t\t\t\tvar i, l, v, vl, dstVertices, srcVertices;\r\n\t\r\n\t\t\t\t\tfor ( i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\t\r\n\t\t\t\t\t\tdstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\t\t\tsrcVertices = json.morphTargets[ i ].vertices;\r\n\t\r\n\t\t\t\t\t\tfor ( v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\t\r\n\t\t\t\t\t\t\tdstVertices.push( vertex );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( json.morphColors !== undefined ) {\r\n\t\r\n\t\t\t\t\tvar i, l, c, cl, dstColors, srcColors, color;\r\n\t\r\n\t\t\t\t\tfor ( i = 0, l = json.morphColors.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tgeometry.morphColors[ i ] = {};\r\n\t\t\t\t\t\tgeometry.morphColors[ i ].name = json.morphColors[ i ].name;\r\n\t\t\t\t\t\tgeometry.morphColors[ i ].colors = [];\r\n\t\r\n\t\t\t\t\t\tdstColors = geometry.morphColors[ i ].colors;\r\n\t\t\t\t\t\tsrcColors = json.morphColors[ i ].colors;\r\n\t\r\n\t\t\t\t\t\tfor ( c = 0, cl = srcColors.length; c < cl; c += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\tcolor = new THREE.Color( 0xffaa00 );\r\n\t\t\t\t\t\t\tcolor.setRGB( srcColors[ c ], srcColors[ c + 1 ], srcColors[ c + 2 ] );\r\n\t\t\t\t\t\t\tdstColors.push( color );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\t\r\n\t\t\t\treturn { geometry: geometry };\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tvar materials = THREE.Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\t\r\n\t\t\t\treturn { geometry: geometry, materials: materials };\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/LoadingManager.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\r\n\t\r\n\t\tthis.onStart = undefined;\r\n\t\tthis.onLoad = onLoad;\r\n\t\tthis.onProgress = onProgress;\r\n\t\tthis.onError = onError;\r\n\t\r\n\t\tthis.itemStart = function ( url ) {\r\n\t\r\n\t\t\titemsTotal ++;\r\n\t\r\n\t\t\tif ( isLoading === false ) {\r\n\t\r\n\t\t\t\tif ( scope.onStart !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tisLoading = true;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.itemEnd = function ( url ) {\r\n\t\r\n\t\t\titemsLoaded ++;\r\n\t\r\n\t\t\tif ( scope.onProgress !== undefined ) {\r\n\t\r\n\t\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( itemsLoaded === itemsTotal ) {\r\n\t\r\n\t\t\t\tisLoading = false;\r\n\t\r\n\t\t\t\tif ( scope.onLoad !== undefined ) {\r\n\t\r\n\t\t\t\t\tscope.onLoad();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.itemError = function ( url ) {\r\n\t\r\n\t\t\tif ( scope.onError !== undefined ) {\r\n\t\r\n\t\t\t\tscope.onError( url );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\t\r\n\t// File:src/loaders/BufferGeometryLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.BufferGeometryLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BufferGeometryLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.BufferGeometryLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.load( url, function ( text ) {\r\n\t\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( json ) {\r\n\t\r\n\t\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\r\n\t\t\tvar index = json.data.index;\r\n\t\r\n\t\t\tif ( index !== undefined ) {\r\n\t\r\n\t\t\t\tvar typedArray = new self[ index.type ]( index.array );\r\n\t\t\t\tgeometry.setIndex( new THREE.BufferAttribute( typedArray, 1 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar attributes = json.data.attributes;\r\n\t\r\n\t\t\tfor ( var key in attributes ) {\r\n\t\r\n\t\t\t\tvar attribute = attributes[ key ];\r\n\t\t\t\tvar typedArray = new self[ attribute.type ]( attribute.array );\r\n\t\r\n\t\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\t\r\n\t\t\tif ( groups !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\t\r\n\t\t\t\t\tvar group = groups[ i ];\r\n\t\r\n\t\t\t\t\tgeometry.addGroup( group.start, group.count );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar boundingSphere = json.data.boundingSphere;\r\n\t\r\n\t\t\tif ( boundingSphere !== undefined ) {\r\n\t\r\n\t\t\t\tvar center = new THREE.Vector3();\r\n\t\r\n\t\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\t\r\n\t\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn geometry;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/MaterialLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.MaterialLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\tthis.textures = {};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MaterialLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.MaterialLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.load( url, function ( text ) {\r\n\t\r\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetTextures: function ( value ) {\r\n\t\r\n\t\t\tthis.textures = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetTexture: function ( name ) {\r\n\t\r\n\t\t\tvar textures = this.textures;\r\n\t\r\n\t\t\tif ( textures[ name ] === undefined ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn textures[ name ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( json ) {\r\n\t\r\n\t\t\tvar material = new THREE[ json.type ];\r\n\t\t\tmaterial.uuid = json.uuid;\r\n\t\r\n\t\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\t\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\t\r\n\t\t\t// for PointsMaterial\r\n\t\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\t\r\n\t\t\t// maps\r\n\t\r\n\t\t\tif ( json.map !== undefined ) material.map = this.getTexture( json.map );\r\n\t\r\n\t\t\tif ( json.alphaMap !== undefined ) {\r\n\t\r\n\t\t\t\tmaterial.alphaMap = this.getTexture( json.alphaMap );\r\n\t\t\t\tmaterial.transparent = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( json.bumpMap !== undefined ) material.bumpMap = this.getTexture( json.bumpMap );\r\n\t\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\t\r\n\t\t\tif ( json.normalMap !== undefined ) material.normalMap = this.getTexture( json.normalMap );\r\n\t\t\tif ( json.normalScale )\tmaterial.normalScale = new THREE.Vector2( json.normalScale, json.normalScale );\r\n\t\r\n\t\t\tif ( json.displacementMap !== undefined ) material.displacementMap = this.getTexture( json.displacementMap );\r\n\t\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\t\r\n\t\t\tif ( json.specularMap !== undefined ) material.specularMap = this.getTexture( json.specularMap );\r\n\t\r\n\t\t\tif ( json.envMap !== undefined ) {\r\n\t\r\n\t\t\t\tmaterial.envMap = this.getTexture( json.envMap );\r\n\t\t\t\tmaterial.combine = THREE.MultiplyOperation;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( json.reflectivity ) material.reflectivity = json.reflectivity;\r\n\t\r\n\t\t\tif ( json.lightMap !== undefined ) material.lightMap = this.getTexture( json.lightMap );\r\n\t\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\t\r\n\t\t\tif ( json.aoMap !== undefined ) material.aoMap = this.getTexture( json.aoMap );\r\n\t\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\t\r\n\t\t\t// MeshFaceMaterial\r\n\t\r\n\t\t\tif ( json.materials !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn material;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/ObjectLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.ObjectLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\tthis.texturePath = '';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ObjectLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.ObjectLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tif ( this.texturePath === '' ) {\r\n\t\r\n\t\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.load( url, function ( text ) {\r\n\t\r\n\t\t\t\tscope.parse( JSON.parse( text ), onLoad );\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetTexturePath: function ( value ) {\r\n\t\r\n\t\t\tthis.texturePath = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( json, onLoad ) {\r\n\t\r\n\t\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\t\r\n\t\t\tvar images = this.parseImages( json.images, function () {\r\n\t\r\n\t\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t\tvar textures  = this.parseTextures( json.textures, images );\r\n\t\t\tvar materials = this.parseMaterials( json.materials, textures );\r\n\t\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\t\r\n\t\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\t\r\n\t\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn object;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseGeometries: function ( json ) {\r\n\t\r\n\t\t\tvar geometries = {};\r\n\t\r\n\t\t\tif ( json !== undefined ) {\r\n\t\r\n\t\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar geometry;\r\n\t\t\t\t\tvar data = json[ i ];\r\n\t\r\n\t\t\t\t\tswitch ( data.type ) {\r\n\t\r\n\t\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\r\n\t\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.CircleBufferGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'CircleGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'CylinderGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\r\n\t\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'SphereGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.SphereBufferGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.DodecahedronGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'OctahedronGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.OctahedronGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.TetrahedronGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'RingGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.RingGeometry(\r\n\t\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'TorusGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\r\n\t\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\t\tdata.q,\r\n\t\t\t\t\t\t\t\tdata.heightScale\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'TextGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = new THREE.TextGeometry(\r\n\t\t\t\t\t\t\t\tdata.text,\r\n\t\t\t\t\t\t\t\tdata.data\r\n\t\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'BufferGeometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase 'Geometry':\r\n\t\r\n\t\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\r\n\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tdefault:\r\n\t\r\n\t\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\t\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tgeometry.uuid = data.uuid;\r\n\t\r\n\t\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\t\r\n\t\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn geometries;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseMaterials: function ( json, textures ) {\r\n\t\r\n\t\t\tvar materials = {};\r\n\t\r\n\t\t\tif ( json !== undefined ) {\r\n\t\r\n\t\t\t\tvar loader = new THREE.MaterialLoader();\r\n\t\t\t\tloader.setTextures( textures );\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar material = loader.parse( json[ i ] );\r\n\t\t\t\t\tmaterials[ material.uuid ] = material;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn materials;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseImages: function ( json, onLoad ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\t\tvar images = {};\r\n\t\r\n\t\t\tfunction loadImage( url ) {\r\n\t\r\n\t\t\t\tscope.manager.itemStart( url );\r\n\t\r\n\t\t\t\treturn loader.load( url, function () {\r\n\t\r\n\t\t\t\t\tscope.manager.itemEnd( url );\r\n\t\r\n\t\t\t\t} );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( json !== undefined && json.length > 0 ) {\r\n\t\r\n\t\t\t\tvar manager = new THREE.LoadingManager( onLoad );\r\n\t\r\n\t\t\t\tvar loader = new THREE.ImageLoader( manager );\r\n\t\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar image = json[ i ];\r\n\t\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\t\r\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn images;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseTextures: function ( json, images ) {\r\n\t\r\n\t\t\tfunction parseConstant( value ) {\r\n\t\r\n\t\t\t\tif ( typeof( value ) === 'number' ) return value;\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\t\r\n\t\t\t\treturn THREE[ value ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar textures = {};\r\n\t\r\n\t\t\tif ( json !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar data = json[ i ];\r\n\t\r\n\t\t\t\t\tif ( data.image === undefined ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar texture = new THREE.Texture( images[ data.image ] );\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\ttexture.uuid = data.uuid;\r\n\t\r\n\t\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\t\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping );\r\n\t\t\t\t\tif ( data.offset !== undefined ) texture.offset = new THREE.Vector2( data.offset[ 0 ], data.offset[ 1 ] );\r\n\t\t\t\t\tif ( data.repeat !== undefined ) texture.repeat = new THREE.Vector2( data.repeat[ 0 ], data.repeat[ 1 ] );\r\n\t\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter );\r\n\t\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter );\r\n\t\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\t\t\t\t\tif ( Array.isArray( data.wrap ) ) {\r\n\t\r\n\t\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ] );\r\n\t\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttextures[ data.uuid ] = texture;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn textures;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparseObject: function () {\r\n\t\r\n\t\t\tvar matrix = new THREE.Matrix4();\r\n\t\r\n\t\t\treturn function ( data, geometries, materials ) {\r\n\t\r\n\t\t\t\tvar object;\r\n\t\r\n\t\t\t\tvar getGeometry = function ( name ) {\r\n\t\r\n\t\t\t\t\tif ( geometries[ name ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\treturn geometries[ name ];\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tvar getMaterial = function ( name ) {\r\n\t\r\n\t\t\t\t\tif ( materials[ name ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\treturn materials[ name ];\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tswitch ( data.type ) {\r\n\t\r\n\t\t\t\t\tcase 'Scene':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Scene();\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'PerspectiveCamera':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'OrthographicCamera':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'AmbientLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.AmbientLight( data.color );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'DirectionalLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'PointLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'SpotLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent, data.decay );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'HemisphereLight':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Mesh':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Mesh( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'LOD':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.LOD();\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Line':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'PointCloud':\r\n\t\t\t\t\tcase 'Points':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Sprite':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Sprite( getMaterial( data.material ) );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Group':\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Group();\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tdefault:\r\n\t\r\n\t\t\t\t\t\tobject = new THREE.Object3D();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tobject.uuid = data.uuid;\r\n\t\r\n\t\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\t\tif ( data.matrix !== undefined ) {\r\n\t\r\n\t\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\t\r\n\t\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\t\r\n\t\t\t\tif ( data.children !== undefined ) {\r\n\t\r\n\t\t\t\t\tfor ( var child in data.children ) {\r\n\t\r\n\t\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( data.type === 'LOD' ) {\r\n\t\r\n\t\t\t\t\tvar levels = data.levels;\r\n\t\r\n\t\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar level = levels[ l ];\r\n\t\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\r\n\t\r\n\t\t\t\t\t\tif ( child !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn object;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}()\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/TextureLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.TextureLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TextureLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.TextureLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar loader = new THREE.ImageLoader( scope.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.load( url, function ( image ) {\r\n\t\r\n\t\t\t\tvar texture = new THREE.Texture( image );\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\tif ( onLoad !== undefined ) {\r\n\t\r\n\t\t\t\t\tonLoad( texture );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/BinaryTextureLoader.js\r\n\t\r\n\t/**\r\n\t * @author Nikos M. / https://github.com/foo123/\r\n\t *\r\n\t * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n\t */\r\n\t\r\n\tTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t\t// override in sub classes\r\n\t\tthis._parser = null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BinaryTextureLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.BinaryTextureLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar texture = new THREE.DataTexture();\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\t\r\n\t\t\t\tvar texData = scope._parser( buffer );\r\n\t\r\n\t\t\t\tif ( ! texData ) return;\r\n\t\r\n\t\t\t\tif ( undefined !== texData.image ) {\r\n\t\r\n\t\t\t\t\ttexture.image = texData.image;\r\n\t\r\n\t\t\t\t} else if ( undefined !== texData.data ) {\r\n\t\r\n\t\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\t\ttexture.image.data = texData.data;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\r\n\t\r\n\t\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\r\n\t\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\r\n\t\r\n\t\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\t\r\n\t\t\t\tif ( undefined !== texData.format ) {\r\n\t\r\n\t\t\t\t\ttexture.format = texData.format;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t\tif ( undefined !== texData.type ) {\r\n\t\r\n\t\t\t\t\ttexture.type = texData.type;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( undefined !== texData.mipmaps ) {\r\n\t\r\n\t\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( 1 === texData.mipmapCount ) {\r\n\t\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\t\r\n\t\t\t}, onProgress, onError );\r\n\t\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/loaders/CompressedTextureLoader.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t *\r\n\t * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n\t */\r\n\t\r\n\tTHREE.CompressedTextureLoader = function ( manager ) {\r\n\t\r\n\t\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\t\r\n\t\t// override in sub classes\r\n\t\tthis._parser = null;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.CompressedTextureLoader.prototype = {\r\n\t\r\n\t\tconstructor: THREE.CompressedTextureLoader,\r\n\t\r\n\t\tload: function ( url, onLoad, onProgress, onError ) {\r\n\t\r\n\t\t\tvar scope = this;\r\n\t\r\n\t\t\tvar images = [];\r\n\t\r\n\t\t\tvar texture = new THREE.CompressedTexture();\r\n\t\t\ttexture.image = images;\r\n\t\r\n\t\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\r\n\t\t\tif ( Array.isArray( url ) ) {\r\n\t\r\n\t\t\t\tvar loaded = 0;\r\n\t\r\n\t\t\t\tvar loadTexture = function ( i ) {\r\n\t\r\n\t\t\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\t\r\n\t\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\t\r\n\t\t\t\t\t\timages[ i ] = {\r\n\t\t\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t\t\t};\r\n\t\r\n\t\t\t\t\t\tloaded += 1;\r\n\t\r\n\t\t\t\t\t\tif ( loaded === 6 ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n\t \t\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\t\r\n\t\t\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\t\r\n\t\t\t\t\tloadTexture( i );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\t\r\n\t\t\t\tloader.load( url, function ( buffer ) {\r\n\t\r\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\t\r\n\t\t\t\t\tif ( texDatas.isCubemap ) {\r\n\t\r\n\t\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\t\r\n\t\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\t\r\n\t\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\t\r\n\t\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\t\r\n\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\t\r\n\t\t\t\t}, onProgress, onError );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetCrossOrigin: function ( value ) {\r\n\t\r\n\t\t\tthis.crossOrigin = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/Material.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Material = function () {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.type = 'Material';\r\n\t\r\n\t\tthis.side = THREE.FrontSide;\r\n\t\r\n\t\tthis.opacity = 1;\r\n\t\tthis.transparent = false;\r\n\t\r\n\t\tthis.blending = THREE.NormalBlending;\r\n\t\r\n\t\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\t\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\t\tthis.blendEquation = THREE.AddEquation;\r\n\t\tthis.blendSrcAlpha = null;\r\n\t\tthis.blendDstAlpha = null;\r\n\t\tthis.blendEquationAlpha = null;\r\n\t\r\n\t\tthis.depthFunc = THREE.LessEqualDepth;\r\n\t\tthis.depthTest = true;\r\n\t\tthis.depthWrite = true;\r\n\t\r\n\t\tthis.colorWrite = true;\r\n\t\r\n\t\tthis.precision = null; // override the renderer's default precision for this material\r\n\t\r\n\t\tthis.polygonOffset = false;\r\n\t\tthis.polygonOffsetFactor = 0;\r\n\t\tthis.polygonOffsetUnits = 0;\r\n\t\r\n\t\tthis.alphaTest = 0;\r\n\t\r\n\t\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\t\r\n\t\tthis.visible = true;\r\n\t\r\n\t\tthis._needsUpdate = true;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Material.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Material,\r\n\t\r\n\t\tget needsUpdate () {\r\n\t\r\n\t\t\treturn this._needsUpdate;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset needsUpdate ( value ) {\r\n\t\r\n\t\t\tif ( value === true ) this.update();\r\n\t\r\n\t\t\tthis._needsUpdate = value;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tsetValues: function ( values ) {\r\n\t\r\n\t\t\tif ( values === undefined ) return;\r\n\t\r\n\t\t\tfor ( var key in values ) {\r\n\t\r\n\t\t\t\tvar newValue = values[ key ];\r\n\t\r\n\t\t\t\tif ( newValue === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar currentValue = this[ key ];\r\n\t\r\n\t\t\t\tif ( currentValue === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\t\r\n\t\t\t\t\tcurrentValue.set( newValue );\r\n\t\r\n\t\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\t\r\n\t\t\t\t\tcurrentValue.copy( newValue );\r\n\t\r\n\t\t\t\t} else if ( key === 'overdraw' ) {\r\n\t\r\n\t\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\r\n\t\t\t\t\tthis[ key ] = Number( newValue );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis[ key ] = newValue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function ( meta ) {\r\n\t\r\n\t\t\tvar data = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'Material',\r\n\t\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\t// standard Material serialization\r\n\t\t\tdata.uuid = this.uuid;\r\n\t\t\tdata.type = this.type;\r\n\t\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\r\n\t\t\tif ( this.color instanceof THREE.Color ) data.color = this.color.getHex();\r\n\t\t\tif ( this.emissive instanceof THREE.Color ) data.emissive = this.emissive.getHex();\r\n\t\t\tif ( this.specular instanceof THREE.Color ) data.specular = this.specular.getHex();\r\n\t\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\t\r\n\t\t\tif ( this.map instanceof THREE.Texture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\t\tif ( this.alphaMap instanceof THREE.Texture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\t\tif ( this.lightMap instanceof THREE.Texture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\t\t\tif ( this.bumpMap instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\t\tdata.bumpScale = this.bumpScale;\r\n\t\r\n\t\t\t}\r\n\t\t\tif ( this.normalMap instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\t\tdata.normalScale = this.normalScale; // Removed for now, causes issue in editor ui.js\r\n\t\r\n\t\t\t}\r\n\t\t\tif ( this.displacementMap instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\t\tdata.displacementBias = this.displacementBias;\r\n\t\r\n\t\t\t}\r\n\t\t\tif ( this.specularMap instanceof THREE.Texture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\t\t\tif ( this.envMap instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\t\r\n\t\t\tif ( this.vertexColors !== undefined && this.vertexColors !== THREE.NoColors ) data.vertexColors = this.vertexColors;\r\n\t\t\tif ( this.shading !== undefined && this.shading !== THREE.SmoothShading ) data.shading = this.shading;\r\n\t\t\tif ( this.blending !== undefined && this.blending !== THREE.NormalBlending ) data.blending = this.blending;\r\n\t\t\tif ( this.side !== undefined && this.side !== THREE.FrontSide ) data.side = this.side;\r\n\t\r\n\t\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\t\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.name = source.name;\r\n\t\r\n\t\t\tthis.side = source.side;\r\n\t\r\n\t\t\tthis.opacity = source.opacity;\r\n\t\t\tthis.transparent = source.transparent;\r\n\t\r\n\t\t\tthis.blending = source.blending;\r\n\t\r\n\t\t\tthis.blendSrc = source.blendSrc;\r\n\t\t\tthis.blendDst = source.blendDst;\r\n\t\t\tthis.blendEquation = source.blendEquation;\r\n\t\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\t\r\n\t\t\tthis.depthFunc = source.depthFunc;\r\n\t\t\tthis.depthTest = source.depthTest;\r\n\t\t\tthis.depthWrite = source.depthWrite;\r\n\t\r\n\t\t\tthis.precision = source.precision;\r\n\t\r\n\t\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\t\r\n\t\t\tthis.alphaTest = source.alphaTest;\r\n\t\r\n\t\t\tthis.overdraw = source.overdraw;\r\n\t\r\n\t\t\tthis.visible = source.visible;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'update' } );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Deprecated\r\n\t\r\n\t\tget wrapAround () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tset wrapAround ( boolean ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tget wrapRGB () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\r\n\t\t\treturn new THREE.Color();\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\r\n\t\r\n\tTHREE.MaterialIdCount = 0;\r\n\t\r\n\t// File:src/materials/LineBasicMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  linewidth: <float>,\r\n\t *  linecap: \"round\",\r\n\t *  linejoin: \"round\",\r\n\t *\r\n\t *  vertexColors: <bool>\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.LineBasicMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'LineBasicMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff );\r\n\t\r\n\t\tthis.linewidth = 1;\r\n\t\tthis.linecap = 'round';\r\n\t\tthis.linejoin = 'round';\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\r\n\t\r\n\tTHREE.LineBasicMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\r\n\t\tthis.linewidth = source.linewidth;\r\n\t\tthis.linecap = source.linecap;\r\n\t\tthis.linejoin = source.linejoin;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/LineDashedMaterial.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  linewidth: <float>,\r\n\t *\r\n\t *  scale: <float>,\r\n\t *  dashSize: <float>,\r\n\t *  gapSize: <float>,\r\n\t *\r\n\t *  vertexColors: <bool>\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.LineDashedMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'LineDashedMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff );\r\n\t\r\n\t\tthis.linewidth = 1;\r\n\t\r\n\t\tthis.scale = 1;\r\n\t\tthis.dashSize = 3;\r\n\t\tthis.gapSize = 1;\r\n\t\r\n\t\tthis.vertexColors = false;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\r\n\t\r\n\tTHREE.LineDashedMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\t\r\n\t\tthis.linewidth = source.linewidth;\r\n\t\r\n\t\tthis.scale = source.scale;\r\n\t\tthis.dashSize = source.dashSize;\r\n\t\tthis.gapSize = source.gapSize;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshBasicMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  shading: THREE.SmoothShading,\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'MeshBasicMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\t\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.aoMap = null;\r\n\t\tthis.aoMapIntensity = 1.0;\r\n\t\r\n\t\tthis.specularMap = null;\r\n\t\r\n\t\tthis.alphaMap = null;\r\n\t\r\n\t\tthis.envMap = null;\r\n\t\tthis.combine = THREE.MultiplyOperation;\r\n\t\tthis.reflectivity = 1;\r\n\t\tthis.refractionRatio = 0.98;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.shading = THREE.SmoothShading;\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\tthis.wireframeLinecap = 'round';\r\n\t\tthis.wireframeLinejoin = 'round';\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.skinning = false;\r\n\t\tthis.morphTargets = false;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\r\n\t\r\n\tTHREE.MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.aoMap = source.aoMap;\r\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\t\r\n\t\tthis.specularMap = source.specularMap;\r\n\t\r\n\t\tthis.alphaMap = source.alphaMap;\r\n\t\r\n\t\tthis.envMap = source.envMap;\r\n\t\tthis.combine = source.combine;\r\n\t\tthis.reflectivity = source.reflectivity;\r\n\t\tthis.refractionRatio = source.refractionRatio;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\tthis.shading = source.shading;\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.skinning = source.skinning;\r\n\t\tthis.morphTargets = source.morphTargets;\r\n\t\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshLambertMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  emissive: <hex>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>,\r\n\t *\r\n\t *\tfog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'MeshLambertMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\t\tthis.emissive = new THREE.Color( 0x000000 );\r\n\t\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.specularMap = null;\r\n\t\r\n\t\tthis.alphaMap = null;\r\n\t\r\n\t\tthis.envMap = null;\r\n\t\tthis.combine = THREE.MultiplyOperation;\r\n\t\tthis.reflectivity = 1;\r\n\t\tthis.refractionRatio = 0.98;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\tthis.wireframeLinecap = 'round';\r\n\t\tthis.wireframeLinejoin = 'round';\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.skinning = false;\r\n\t\tthis.morphTargets = false;\r\n\t\tthis.morphNormals = false;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\r\n\t\r\n\tTHREE.MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.emissive.copy( source.emissive );\r\n\t\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.specularMap = source.specularMap;\r\n\t\r\n\t\tthis.alphaMap = source.alphaMap;\r\n\t\r\n\t\tthis.envMap = source.envMap;\r\n\t\tthis.combine = source.combine;\r\n\t\tthis.reflectivity = source.reflectivity;\r\n\t\tthis.refractionRatio = source.refractionRatio;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.skinning = source.skinning;\r\n\t\tthis.morphTargets = source.morphTargets;\r\n\t\tthis.morphNormals = source.morphNormals;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshPhongMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  emissive: <hex>,\r\n\t *  specular: <hex>,\r\n\t *  shininess: <float>,\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  lightMap: new THREE.Texture( <Image> ),\r\n\t *  lightMapIntensity: <float>\r\n\t *\r\n\t *  aoMap: new THREE.Texture( <Image> ),\r\n\t *  aoMapIntensity: <float>\r\n\t *\r\n\t *  emissiveMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  bumpMap: new THREE.Texture( <Image> ),\r\n\t *  bumpScale: <float>,\r\n\t *\r\n\t *  normalMap: new THREE.Texture( <Image> ),\r\n\t *  normalScale: <Vector2>,\r\n\t *\r\n\t *  displacementMap: new THREE.Texture( <Image> ),\r\n\t *  displacementScale: <float>,\r\n\t *  displacementBias: <float>,\r\n\t *\r\n\t *  specularMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  alphaMap: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n\t *  combine: THREE.Multiply,\r\n\t *  reflectivity: <float>,\r\n\t *  refractionRatio: <float>,\r\n\t *\r\n\t *  shading: THREE.SmoothShading,\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>,\r\n\t *\r\n\t *\tfog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'MeshPhongMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\t\tthis.emissive = new THREE.Color( 0x000000 );\r\n\t\tthis.specular = new THREE.Color( 0x111111 );\r\n\t\tthis.shininess = 30;\r\n\t\r\n\t\tthis.metal = false;\r\n\t\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.lightMap = null;\r\n\t\tthis.lightMapIntensity = 1.0;\r\n\t\r\n\t\tthis.aoMap = null;\r\n\t\tthis.aoMapIntensity = 1.0;\r\n\t\r\n\t\tthis.emissiveMap = null;\r\n\t\r\n\t\tthis.bumpMap = null;\r\n\t\tthis.bumpScale = 1;\r\n\t\r\n\t\tthis.normalMap = null;\r\n\t\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\t\r\n\t\tthis.displacementMap = null;\r\n\t\tthis.displacementScale = 1;\r\n\t\tthis.displacementBias = 0;\r\n\t\r\n\t\tthis.specularMap = null;\r\n\t\r\n\t\tthis.alphaMap = null;\r\n\t\r\n\t\tthis.envMap = null;\r\n\t\tthis.combine = THREE.MultiplyOperation;\r\n\t\tthis.reflectivity = 1;\r\n\t\tthis.refractionRatio = 0.98;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.shading = THREE.SmoothShading;\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\tthis.wireframeLinecap = 'round';\r\n\t\tthis.wireframeLinejoin = 'round';\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.skinning = false;\r\n\t\tthis.morphTargets = false;\r\n\t\tthis.morphNormals = false;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\r\n\t\r\n\tTHREE.MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.emissive.copy( source.emissive );\r\n\t\tthis.specular.copy( source.specular );\r\n\t\tthis.shininess = source.shininess;\r\n\t\r\n\t\tthis.metal = source.metal;\r\n\t\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.lightMap = source.lightMap;\r\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\t\r\n\t\tthis.aoMap = source.aoMap;\r\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\t\r\n\t\tthis.emissiveMap = source.emissiveMap;\r\n\t\r\n\t\tthis.bumpMap = source.bumpMap;\r\n\t\tthis.bumpScale = source.bumpScale;\r\n\t\r\n\t\tthis.normalMap = source.normalMap;\r\n\t\tthis.normalScale.copy( source.normalScale );\r\n\t\r\n\t\tthis.displacementMap = source.displacementMap;\r\n\t\tthis.displacementScale = source.displacementScale;\r\n\t\tthis.displacementBias = source.displacementBias;\r\n\t\r\n\t\tthis.specularMap = source.specularMap;\r\n\t\r\n\t\tthis.alphaMap = source.alphaMap;\r\n\t\r\n\t\tthis.envMap = source.envMap;\r\n\t\tthis.combine = source.combine;\r\n\t\tthis.reflectivity = source.reflectivity;\r\n\t\tthis.refractionRatio = source.refractionRatio;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\tthis.shading = source.shading;\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.skinning = source.skinning;\r\n\t\tthis.morphTargets = source.morphTargets;\r\n\t\tthis.morphNormals = source.morphNormals;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshDepthMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'MeshDepthMaterial';\r\n\t\r\n\t\tthis.morphTargets = false;\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\r\n\t\r\n\tTHREE.MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MeshNormalMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  opacity: <float>,\r\n\t *\r\n\t *  shading: THREE.FlatShading,\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this, parameters );\r\n\t\r\n\t\tthis.type = 'MeshNormalMaterial';\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\r\n\t\tthis.morphTargets = false;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\r\n\t\r\n\tTHREE.MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/MultiMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.MultiMaterial = function ( materials ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.type = 'MultiMaterial';\r\n\t\r\n\t\tthis.materials = materials instanceof Array ? materials : [];\r\n\t\r\n\t\tthis.visible = true;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MultiMaterial.prototype = {\r\n\t\r\n\t\tconstructor: THREE.MultiMaterial,\r\n\t\r\n\t\ttoJSON: function () {\r\n\t\r\n\t\t\tvar output = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.2,\r\n\t\t\t\t\ttype: 'material',\r\n\t\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t\t},\r\n\t\t\t\tuuid: this.uuid,\r\n\t\t\t\ttype: this.type,\r\n\t\t\t\tmaterials: []\r\n\t\t\t};\r\n\t\r\n\t\t\tfor ( var i = 0, l = this.materials.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\toutput.materials.push( this.materials[ i ].toJSON() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\toutput.visible = this.visible;\r\n\t\r\n\t\t\treturn output;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\tvar material = new this.constructor();\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\t\r\n\t\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tmaterial.visible = this.visible;\r\n\t\r\n\t\t\treturn material;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// backwards compatibility\r\n\t\r\n\tTHREE.MeshFaceMaterial = THREE.MultiMaterial;\r\n\t\r\n\t// File:src/materials/PointsMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  size: <float>,\r\n\t *  sizeAttenuation: <bool>,\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  vertexColors: <bool>,\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.PointsMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'PointsMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff );\r\n\t\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.size = 1;\r\n\t\tthis.sizeAttenuation = true;\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors;\r\n\t\r\n\t\tthis.fog = true;\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointsMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial;\r\n\t\r\n\tTHREE.PointsMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.size = source.size;\r\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// backwards compatibility\r\n\t\r\n\tTHREE.PointCloudMaterial = function ( parameters ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ParticleBasicMaterial = function ( parameters ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ParticleSystemMaterial = function ( parameters ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\t\treturn new THREE.PointsMaterial( parameters );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/ShaderMaterial.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  defines: { \"label\" : \"value\" },\r\n\t *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\r\n\t *\r\n\t *  fragmentShader: <string>,\r\n\t *  vertexShader: <string>,\r\n\t *\r\n\t *  shading: THREE.SmoothShading,\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *  wireframe: <boolean>,\r\n\t *  wireframeLinewidth: <float>,\r\n\t *\r\n\t *  lights: <bool>,\r\n\t *\r\n\t *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n\t *\r\n\t *  skinning: <bool>,\r\n\t *  morphTargets: <bool>,\r\n\t *  morphNormals: <bool>,\r\n\t *\r\n\t *\tfog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.ShaderMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'ShaderMaterial';\r\n\t\r\n\t\tthis.defines = {};\r\n\t\tthis.uniforms = {};\r\n\t\r\n\t\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\t\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\t\r\n\t\tthis.shading = THREE.SmoothShading;\r\n\t\r\n\t\tthis.linewidth = 1;\r\n\t\r\n\t\tthis.wireframe = false;\r\n\t\tthis.wireframeLinewidth = 1;\r\n\t\r\n\t\tthis.fog = false; // set to use scene fog\r\n\t\r\n\t\tthis.lights = false; // set to use scene lights\r\n\t\r\n\t\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\r\n\t\r\n\t\tthis.skinning = false; // set to use skinning attribute streams\r\n\t\r\n\t\tthis.morphTargets = false; // set to use morph targets\r\n\t\tthis.morphNormals = false; // set to use morph normals\r\n\t\r\n\t\tthis.derivatives = false; // set to use derivatives\r\n\t\r\n\t\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\t\tthis.defaultAttributeValues = {\r\n\t\t\t'color': [ 1, 1, 1 ],\r\n\t\t\t'uv': [ 0, 0 ],\r\n\t\t\t'uv2': [ 0, 0 ]\r\n\t\t};\r\n\t\r\n\t\tthis.index0AttributeName = undefined;\r\n\t\r\n\t\tif ( parameters !== undefined ) {\r\n\t\r\n\t\t\tif ( parameters.attributes !== undefined ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.setValues( parameters );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\r\n\t\r\n\tTHREE.ShaderMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.fragmentShader = source.fragmentShader;\r\n\t\tthis.vertexShader = source.vertexShader;\r\n\t\r\n\t\tthis.uniforms = THREE.UniformsUtils.clone( source.uniforms );\r\n\t\r\n\t\tthis.attributes = source.attributes;\r\n\t\tthis.defines = source.defines;\r\n\t\r\n\t\tthis.shading = source.shading;\r\n\t\r\n\t\tthis.wireframe = source.wireframe;\r\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\tthis.lights = source.lights;\r\n\t\r\n\t\tthis.vertexColors = source.vertexColors;\r\n\t\r\n\t\tthis.skinning = source.skinning;\r\n\t\r\n\t\tthis.morphTargets = source.morphTargets;\r\n\t\tthis.morphNormals = source.morphNormals;\r\n\t\r\n\t\tthis.derivatives = source.derivatives;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Material.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.uniforms = this.uniforms;\r\n\t\tdata.attributes = this.attributes;\r\n\t\tdata.vertexShader = this.vertexShader;\r\n\t\tdata.fragmentShader = this.fragmentShader;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/materials/RawShaderMaterial.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.RawShaderMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.ShaderMaterial.call( this, parameters );\r\n\t\r\n\t\tthis.type = 'RawShaderMaterial';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\n\tTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\r\n\t// File:src/materials/SpriteMaterial.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * parameters = {\r\n\t *  color: <hex>,\r\n\t *  opacity: <float>,\r\n\t *  map: new THREE.Texture( <Image> ),\r\n\t *\r\n\t *  blending: THREE.NormalBlending,\r\n\t *  depthTest: <bool>,\r\n\t *  depthWrite: <bool>,\r\n\t *\r\n\t *\tuvOffset: new THREE.Vector2(),\r\n\t *\tuvScale: new THREE.Vector2(),\r\n\t *\r\n\t *  fog: <bool>\r\n\t * }\r\n\t */\r\n\t\r\n\tTHREE.SpriteMaterial = function ( parameters ) {\r\n\t\r\n\t\tTHREE.Material.call( this );\r\n\t\r\n\t\tthis.type = 'SpriteMaterial';\r\n\t\r\n\t\tthis.color = new THREE.Color( 0xffffff );\r\n\t\tthis.map = null;\r\n\t\r\n\t\tthis.rotation = 0;\r\n\t\r\n\t\tthis.fog = false;\r\n\t\r\n\t\t// set parameters\r\n\t\r\n\t\tthis.setValues( parameters );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\n\tTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\r\n\t\r\n\tTHREE.SpriteMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Material.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.color.copy( source.color );\r\n\t\tthis.map = source.map;\r\n\t\r\n\t\tthis.rotation = source.rotation;\r\n\t\r\n\t\tthis.fog = source.fog;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/textures/Texture.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author szimek / https://github.com/szimek/\r\n\t */\r\n\t\r\n\tTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\t\r\n\t\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.name = '';\r\n\t\tthis.sourceFile = '';\r\n\t\r\n\t\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\t\tthis.mipmaps = [];\r\n\t\r\n\t\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\t\r\n\t\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\t\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\t\r\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\t\r\n\t\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\t\r\n\t\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\t\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\t\r\n\t\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\t\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\t\r\n\t\tthis.generateMipmaps = true;\r\n\t\tthis.premultiplyAlpha = false;\r\n\t\tthis.flipY = true;\r\n\t\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\t\r\n\t\tthis.version = 0;\r\n\t\tthis.onUpdate = null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Texture.DEFAULT_IMAGE = undefined;\r\n\tTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\r\n\t\r\n\tTHREE.Texture.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Texture,\r\n\t\r\n\t\tset needsUpdate ( value ) {\r\n\t\r\n\t\t\tif ( value === true ) this.version ++;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.image = source.image;\r\n\t\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\t\r\n\t\t\tthis.mapping = source.mapping;\r\n\t\r\n\t\t\tthis.wrapS = source.wrapS;\r\n\t\t\tthis.wrapT = source.wrapT;\r\n\t\r\n\t\t\tthis.magFilter = source.magFilter;\r\n\t\t\tthis.minFilter = source.minFilter;\r\n\t\r\n\t\t\tthis.anisotropy = source.anisotropy;\r\n\t\r\n\t\t\tthis.format = source.format;\r\n\t\t\tthis.type = source.type;\r\n\t\r\n\t\t\tthis.offset.copy( source.offset );\r\n\t\t\tthis.repeat.copy( source.repeat );\r\n\t\r\n\t\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\t\tthis.flipY = source.flipY;\r\n\t\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttoJSON: function ( meta ) {\r\n\t\r\n\t\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\r\n\t\r\n\t\t\t\treturn meta.textures[ this.uuid ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction getDataURL( image ) {\r\n\t\r\n\t\t\t\tvar canvas;\r\n\t\r\n\t\t\t\tif ( image.toDataURL !== undefined ) {\r\n\t\r\n\t\t\t\t\tcanvas = image;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tcanvas = document.createElement( 'canvas' );\r\n\t\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\t\tcanvas.height = image.height;\r\n\t\r\n\t\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\t\r\n\t\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar output = {\r\n\t\t\t\tmetadata: {\r\n\t\t\t\t\tversion: 4.4,\r\n\t\t\t\t\ttype: 'Texture',\r\n\t\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t\t},\r\n\t\r\n\t\t\t\tuuid: this.uuid,\r\n\t\t\t\tname: this.name,\r\n\t\r\n\t\t\t\tmapping: this.mapping,\r\n\t\r\n\t\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\t\r\n\t\t\t\tminFilter: this.minFilter,\r\n\t\t\t\tmagFilter: this.magFilter,\r\n\t\t\t\tanisotropy: this.anisotropy\r\n\t\t\t};\r\n\t\r\n\t\t\tif ( this.image !== undefined ) {\r\n\t\r\n\t\t\t\t// TODO: Move to THREE.Image\r\n\t\r\n\t\t\t\tvar image = this.image;\r\n\t\r\n\t\t\t\tif ( image.uuid === undefined ) {\r\n\t\r\n\t\t\t\t\timage.uuid = THREE.Math.generateUUID(); // UGH\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\r\n\t\r\n\t\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\t\turl: getDataURL( image )\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\toutput.image = image.uuid;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tmeta.textures[ this.uuid ] = output;\r\n\t\r\n\t\t\treturn output;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttransformUv: function ( uv ) {\r\n\t\r\n\t\t\tif ( this.mapping !== THREE.UVMapping )  return;\r\n\t\r\n\t\t\tuv.multiply( this.repeat );\r\n\t\t\tuv.add( this.offset );\r\n\t\r\n\t\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\t\r\n\t\t\t\tswitch ( this.wrapS ) {\r\n\t\r\n\t\t\t\t\tcase THREE.RepeatWrapping:\r\n\t\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\t\r\n\t\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\t\r\n\t\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\t\r\n\t\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\t\r\n\t\t\t\tswitch ( this.wrapT ) {\r\n\t\r\n\t\t\t\t\tcase THREE.RepeatWrapping:\r\n\t\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\t\r\n\t\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\t\r\n\t\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\t\r\n\t\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.flipY ) {\r\n\t\r\n\t\t\t\tuv.y = 1 - uv.y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\r\n\t\r\n\tTHREE.TextureIdCount = 0;\r\n\t\r\n\t// File:src/textures/CanvasTexture.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.CanvasTexture = function ( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\t\r\n\t\tTHREE.Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.needsUpdate = true;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CanvasTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture;\r\n\t\r\n\t// File:src/textures/CubeTexture.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\t\r\n\t\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\r\n\t\r\n\t\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.images = images;\r\n\t\tthis.flipY = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\r\n\t\r\n\tTHREE.CubeTexture.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Texture.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.images = source.images;\r\n\t\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t// File:src/textures/CompressedTexture.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\t\r\n\t\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.image = { width: width, height: height };\r\n\t\tthis.mipmaps = mipmaps;\r\n\t\r\n\t\t// no flipping for cube textures\r\n\t\t// (also flipping doesn't work for compressed textures )\r\n\t\r\n\t\tthis.flipY = false;\r\n\t\r\n\t\t// can't generate mipmaps for compressed textures\r\n\t\t// mips must be embedded in DDS files\r\n\t\r\n\t\tthis.generateMipmaps = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\r\n\t\r\n\t// File:src/textures/DataTexture.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\t\r\n\t\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.image = { data: data, width: width, height: height };\r\n\t\r\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\t\t\r\n\t\tthis.flipY = false;\r\n\t\tthis.generateMipmaps  = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\r\n\t\r\n\t// File:src/textures/VideoTexture.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\t\r\n\t\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\t\r\n\t\tthis.generateMipmaps = false;\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar update = function () {\r\n\t\r\n\t\t\trequestAnimationFrame( update );\r\n\t\r\n\t\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\r\n\t\r\n\t\t\t\tscope.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tupdate();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\n\tTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\r\n\t\r\n\t// File:src/objects/Group.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Group = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Group';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Group.prototype.constructor = THREE.Group;\r\n\t// File:src/objects/Points.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Points = function ( geometry, material ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Points';\r\n\t\r\n\t\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\t\tthis.material = material !== undefined ? material : new THREE.PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Points.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Points.prototype.constructor = THREE.Points;\r\n\t\r\n\tTHREE.Points.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tvar object = this;\r\n\t\t\tvar geometry = object.geometry;\r\n\t\t\tvar threshold = raycaster.params.Points.threshold;\r\n\t\r\n\t\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\t\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\t\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\t\tvar localThresholdSq = localThreshold * localThreshold;\r\n\t\t\tvar position = new THREE.Vector3();\r\n\t\r\n\t\t\tfunction testPoint( point, index ) {\r\n\t\r\n\t\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\t\r\n\t\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\t\r\n\t\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\t\tintersectPoint.applyMatrix4( object.matrixWorld );\r\n\t\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\t\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\t\r\n\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\t\tindex: index,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tobject: object\r\n\t\r\n\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\tvar indices = index.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar a = indices[ i ];\r\n\t\r\n\t\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\t\r\n\t\t\t\t\t\ttestPoint( position, a );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tposition.fromArray( positions, i * 3 );\r\n\t\r\n\t\t\t\t\t\ttestPoint( position, i );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\ttestPoint( vertices[ i ], i );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.Points.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Points.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\t// only serialize if not in meta geometries cache\r\n\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// only serialize if not in meta materials cache\r\n\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdata.object.geometry = this.geometry.uuid;\r\n\t\tdata.object.material = this.material.uuid;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// Backwards compatibility\r\n\t\r\n\tTHREE.PointCloud = function ( geometry, material ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\t\treturn new THREE.Points( geometry, material );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ParticleSystem = function ( geometry, material ) {\r\n\t\r\n\t\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\t\treturn new THREE.Points( geometry, material );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/Line.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Line = function ( geometry, material, mode ) {\r\n\t\r\n\t\tif ( mode === 1 ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n\t\t\treturn new THREE.LineSegments( geometry, material );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Line';\r\n\t\r\n\t\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\t\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Line.prototype.constructor = THREE.Line;\r\n\t\r\n\tTHREE.Line.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tvar precision = raycaster.linePrecision;\r\n\t\t\tvar precisionSq = precision * precision;\r\n\t\r\n\t\t\tvar geometry = this.geometry;\r\n\t\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\t\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\t\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\t\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\t\r\n\t\t\tvar vStart = new THREE.Vector3();\r\n\t\t\tvar vEnd = new THREE.Vector3();\r\n\t\t\tvar interSegment = new THREE.Vector3();\r\n\t\t\tvar interRay = new THREE.Vector3();\r\n\t\t\tvar step = this instanceof THREE.LineSegments ? 2 : 1;\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\tvar indices = index.array;\r\n\t\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\t\r\n\t\t\t\t\t\tvar a = indices[ i ];\r\n\t\t\t\t\t\tvar b = indices[ i + 1 ];\r\n\t\r\n\t\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\t\r\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\t\r\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\t\r\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\t\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\t\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\t\r\n\t\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\t\r\n\t\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\t\r\n\t\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\t\r\n\t\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\t\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\t\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\t\t\tvar nbVertices = vertices.length;\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\t\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\t\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\t\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\t\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\t\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.Line.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Line.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\t// only serialize if not in meta geometries cache\r\n\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// only serialize if not in meta materials cache\r\n\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdata.object.geometry = this.geometry.uuid;\r\n\t\tdata.object.material = this.material.uuid;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// DEPRECATED\r\n\t\r\n\tTHREE.LineStrip = 0;\r\n\tTHREE.LinePieces = 1;\r\n\t\r\n\t// File:src/objects/LineSegments.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.LineSegments = function ( geometry, material ) {\r\n\t\r\n\t\tTHREE.Line.call( this, geometry, material );\r\n\t\r\n\t\tthis.type = 'LineSegments';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineSegments.prototype = Object.create( THREE.Line.prototype );\r\n\tTHREE.LineSegments.prototype.constructor = THREE.LineSegments;\r\n\t\r\n\t// File:src/objects/Mesh.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author jonobr1 / http://jonobr1.com/\r\n\t */\r\n\t\r\n\tTHREE.Mesh = function ( geometry, material ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Mesh';\r\n\t\r\n\t\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\t\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\t\r\n\t\tthis.updateMorphTargets();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Mesh.prototype.constructor = THREE.Mesh;\r\n\t\r\n\tTHREE.Mesh.prototype.updateMorphTargets = function () {\r\n\t\r\n\t\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\t\r\n\t\t\tthis.morphTargetBase = - 1;\r\n\t\t\tthis.morphTargetInfluences = [];\r\n\t\t\tthis.morphTargetDictionary = {};\r\n\t\r\n\t\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\r\n\t\r\n\t\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\t\r\n\t\t\treturn this.morphTargetDictionary[ name ];\r\n\t\r\n\t\t}\r\n\t\r\n\t\tconsole.warn( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\t\r\n\t\treturn 0;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.Mesh.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar inverseMatrix = new THREE.Matrix4();\r\n\t\tvar ray = new THREE.Ray();\r\n\t\tvar sphere = new THREE.Sphere();\r\n\t\r\n\t\tvar vA = new THREE.Vector3();\r\n\t\tvar vB = new THREE.Vector3();\r\n\t\tvar vC = new THREE.Vector3();\r\n\t\r\n\t\tvar tempA = new THREE.Vector3();\r\n\t\tvar tempB = new THREE.Vector3();\r\n\t\tvar tempC = new THREE.Vector3();\r\n\t\r\n\t\tvar uvA = new THREE.Vector2();\r\n\t\tvar uvB = new THREE.Vector2();\r\n\t\tvar uvC = new THREE.Vector2();\r\n\t\r\n\t\tvar barycoord = new THREE.Vector3();\r\n\t\r\n\t\tvar intersectionPoint = new THREE.Vector3();\r\n\t\tvar intersectionPointWorld = new THREE.Vector3();\r\n\t\r\n\t\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\t\r\n\t\t\tTHREE.Triangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\r\n\t\r\n\t\t\tuv1.multiplyScalar( barycoord.x );\r\n\t\t\tuv2.multiplyScalar( barycoord.y );\r\n\t\t\tuv3.multiplyScalar( barycoord.z );\r\n\t\r\n\t\t\tuv1.add( uv2 ).add( uv3 );\r\n\t\r\n\t\t\treturn uv1.clone();\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tvar geometry = this.geometry;\r\n\t\t\tvar material = this.material;\r\n\t\r\n\t\t\tif ( material === undefined ) return;\r\n\t\r\n\t\t\t// Checking boundingSphere distance to ray\r\n\t\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\t\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\t\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// Check boundingBox before continuing\r\n\t\r\n\t\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\t\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\t\r\n\t\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\t\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar a, b, c;\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tvar index = geometry.index;\r\n\t\t\t\tvar attributes = geometry.attributes;\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\tvar indices = index.array;\r\n\t\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\ta = indices[ i ];\r\n\t\t\t\t\t\tb = indices[ i + 1 ];\r\n\t\t\t\t\t\tc = indices[ i + 2 ];\r\n\t\r\n\t\t\t\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\t\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\t\t\t\tvC.fromArray( positions, c * 3 );\r\n\t\r\n\t\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( ray.intersectTriangle( vC, vB, vA, true, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tif ( ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\t\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\t\tvar uv;\r\n\t\r\n\t\t\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tvar uvs = attributes.uv.array;\r\n\t\t\t\t\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\t\t\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\t\t\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\t\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\t\tfaceIndex: Math.floor( i / 3 ), // triangle number in indices buffer semantics\r\n\t\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvar positions = attributes.position.array;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 9 ) {\r\n\t\r\n\t\t\t\t\t\tvA.fromArray( positions, i );\r\n\t\t\t\t\t\tvB.fromArray( positions, i + 3 );\r\n\t\t\t\t\t\tvC.fromArray( positions, i + 6 );\r\n\t\r\n\t\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( ray.intersectTriangle( vC, vB, vA, true, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tif ( ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\t\r\n\t\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\t\tvar uv;\r\n\t\r\n\t\t\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tvar uvs = attributes.uv.array;\r\n\t\t\t\t\t\t\tuvA.fromArray( uvs, i );\r\n\t\t\t\t\t\t\tuvB.fromArray( uvs, i + 2 );\r\n\t\t\t\t\t\t\tuvC.fromArray( uvs, i + 4 );\r\n\t\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\ta = i / 3;\r\n\t\t\t\t\t\tb = a + 1;\r\n\t\t\t\t\t\tc = a + 2;\r\n\t\r\n\t\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\t\tindex: a, // triangle number in positions buffer semantics\r\n\t\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tvar isFaceMaterial = material instanceof THREE.MeshFaceMaterial;\r\n\t\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\r\n\t\r\n\t\t\t\tvar vertices = geometry.vertices;\r\n\t\t\t\tvar faces = geometry.faces;\r\n\t\r\n\t\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\t\r\n\t\t\t\t\tvar face = faces[ f ];\r\n\t\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\r\n\t\r\n\t\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\t\r\n\t\t\t\t\ta = vertices[ face.a ];\r\n\t\t\t\t\tb = vertices[ face.b ];\r\n\t\t\t\t\tc = vertices[ face.c ];\r\n\t\r\n\t\t\t\t\tif ( faceMaterial.morphTargets === true ) {\r\n\t\r\n\t\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\t\r\n\t\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\t\r\n\t\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\t\r\n\t\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\t\r\n\t\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\t\r\n\t\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], a ), influence );\r\n\t\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], b ), influence );\r\n\t\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], c ), influence );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tvA.add( a );\r\n\t\t\t\t\t\tvB.add( b );\r\n\t\t\t\t\t\tvC.add( c );\r\n\t\r\n\t\t\t\t\t\ta = vA;\r\n\t\t\t\t\t\tb = vB;\r\n\t\t\t\t\t\tc = vC;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( faceMaterial.side === THREE.BackSide ) {\r\n\t\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( c, b, a, true, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( a, b, c, faceMaterial.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\t\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\t\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\t\r\n\t\t\t\t\tvar uv;\r\n\t\r\n\t\t\t\t\tif ( geometry.faceVertexUvs[ 0 ].length > 0 ) {\r\n\t\r\n\t\t\t\t\t\tvar uvs = geometry.faceVertexUvs[ 0 ][ f ];\r\n\t\t\t\t\t\tuvA.copy( uvs[ 0 ] );\r\n\t\t\t\t\t\tuvB.copy( uvs[ 1 ] );\r\n\t\t\t\t\t\tuvC.copy( uvs[ 2 ] );\r\n\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, a, b, c, uvA, uvB, uvC );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\tface: face,\r\n\t\t\t\t\t\tfaceIndex: f,\r\n\t\t\t\t\t\tobject: this\r\n\t\r\n\t\t\t\t\t} );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.Mesh.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Mesh.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\t// only serialize if not in meta geometries cache\r\n\t\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// only serialize if not in meta materials cache\r\n\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdata.object.geometry = this.geometry.uuid;\r\n\t\tdata.object.material = this.material.uuid;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/Bone.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author ikerr / http://verold.com\r\n\t */\r\n\t\r\n\tTHREE.Bone = function ( skin ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Bone';\r\n\t\r\n\t\tthis.skin = skin;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Bone.prototype.constructor = THREE.Bone;\r\n\t\r\n\tTHREE.Bone.prototype.copy = function ( source ) {\r\n\t\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\t\r\n\t\tthis.skin = source.skin;\r\n\t\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/Skeleton.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author michael guerrero / http://realitymeltdown.com\r\n\t * @author ikerr / http://verold.com\r\n\t */\r\n\t\r\n\tTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\t\r\n\t\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\t\r\n\t\tthis.identityMatrix = new THREE.Matrix4();\r\n\t\r\n\t\t// copy the bone array\r\n\t\r\n\t\tbones = bones || [];\r\n\t\r\n\t\tthis.bones = bones.slice( 0 );\r\n\t\r\n\t\t// create a bone texture or an array of floats\r\n\t\r\n\t\tif ( this.useVertexTexture ) {\r\n\t\r\n\t\t\t// layout (1 matrix = 4 pixels)\r\n\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\t\r\n\t\t\t\r\n\t\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\t\tsize = THREE.Math.nextPowerOfTwo( Math.ceil( size ) );\r\n\t\t\tsize = Math.max( size, 4 );\r\n\t\r\n\t\t\tthis.boneTextureWidth = size;\r\n\t\t\tthis.boneTextureHeight = size;\r\n\t\r\n\t\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// use the supplied bone inverses or calculate the inverses\r\n\t\r\n\t\tif ( boneInverses === undefined ) {\r\n\t\r\n\t\t\tthis.calculateInverses();\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tif ( this.bones.length === boneInverses.length ) {\r\n\t\r\n\t\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\t\r\n\t\t\t\tthis.boneInverses = [];\r\n\t\r\n\t\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Skeleton.prototype.calculateInverses = function () {\r\n\t\r\n\t\tthis.boneInverses = [];\r\n\t\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\tvar inverse = new THREE.Matrix4();\r\n\t\r\n\t\t\tif ( this.bones[ b ] ) {\r\n\t\r\n\t\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.boneInverses.push( inverse );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Skeleton.prototype.pose = function () {\r\n\t\r\n\t\tvar bone;\r\n\t\r\n\t\t// recover the bind-time world matrices\r\n\t\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\tbone = this.bones[ b ];\r\n\t\r\n\t\t\tif ( bone ) {\r\n\t\r\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// compute the local matrices, positions, rotations and scales\r\n\t\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\tbone = this.bones[ b ];\r\n\t\r\n\t\t\tif ( bone ) {\r\n\t\r\n\t\t\t\tif ( bone.parent ) {\r\n\t\r\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Skeleton.prototype.update = ( function () {\r\n\t\r\n\t\tvar offsetMatrix = new THREE.Matrix4();\r\n\t\r\n\t\treturn function update() {\r\n\t\r\n\t\t\t// flatten bone matrices to array\r\n\t\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\t\r\n\t\t\t\t// compute the offset between the current and the original transform\r\n\t\r\n\t\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\t\r\n\t\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( this.useVertexTexture ) {\r\n\t\r\n\t\t\t\tthis.boneTexture.needsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\tTHREE.Skeleton.prototype.clone = function () {\r\n\t\r\n\t\treturn new THREE.Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/SkinnedMesh.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author ikerr / http://verold.com\r\n\t */\r\n\t\r\n\tTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\t\r\n\t\tTHREE.Mesh.call( this, geometry, material );\r\n\t\r\n\t\tthis.type = 'SkinnedMesh';\r\n\t\r\n\t\tthis.bindMode = \"attached\";\r\n\t\tthis.bindMatrix = new THREE.Matrix4();\r\n\t\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\t\r\n\t\t// init bones\r\n\t\r\n\t\t// TODO: remove bone creation as there is no reason (other than\r\n\t\t// convenience) for THREE.SkinnedMesh to do this.\r\n\t\r\n\t\tvar bones = [];\r\n\t\r\n\t\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\t\r\n\t\t\tvar bone, gbone;\r\n\t\r\n\t\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\t\r\n\t\t\t\tgbone = this.geometry.bones[ b ];\r\n\t\r\n\t\t\t\tbone = new THREE.Bone( this );\r\n\t\t\t\tbones.push( bone );\r\n\t\r\n\t\t\t\tbone.name = gbone.name;\r\n\t\t\t\tbone.position.fromArray( gbone.pos );\r\n\t\t\t\tbone.quaternion.fromArray( gbone.rotq );\r\n\t\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\t\r\n\t\t\t\tgbone = this.geometry.bones[ b ];\r\n\t\r\n\t\t\t\tif ( gbone.parent !== - 1 ) {\r\n\t\r\n\t\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis.add( bones[ b ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.normalizeSkinWeights();\r\n\t\r\n\t\tthis.updateMatrixWorld( true );\r\n\t\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh;\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\r\n\t\r\n\t\tthis.skeleton = skeleton;\r\n\t\r\n\t\tif ( bindMatrix === undefined ) {\r\n\t\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\t\t\t\r\n\t\t\tthis.skeleton.calculateInverses();\r\n\t\r\n\t\t\tbindMatrix = this.matrixWorld;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.bindMatrix.copy( bindMatrix );\r\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.pose = function () {\r\n\t\r\n\t\tthis.skeleton.pose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\r\n\t\r\n\t\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.geometry.skinIndices.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\t\r\n\t\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\t\r\n\t\t\t\tif ( scale !== Infinity ) {\r\n\t\r\n\t\t\t\t\tsw.multiplyScalar( scale );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tsw.set( 1 ); // this will be normalized by the shader anyway\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\t// skinning weights assumed to be normalized for THREE.BufferGeometry\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\r\n\t\r\n\t\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\t\r\n\t\tif ( this.bindMode === \"attached\" ) {\r\n\t\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\t\r\n\t\t} else if ( this.bindMode === \"detached\" ) {\r\n\t\r\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkinnedMesh.prototype.clone = function() {\r\n\t\r\n\t\treturn new this.constructor( this.geometry, this.material, this.useVertexTexture ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/MorphAnimMesh.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.MorphAnimMesh = function ( geometry, material ) {\r\n\t\r\n\t\tTHREE.Mesh.call( this, geometry, material );\r\n\t\r\n\t\tthis.type = 'MorphAnimMesh';\r\n\t\r\n\t\t// API\r\n\t\r\n\t\tthis.duration = 1000; // milliseconds\r\n\t\tthis.mirroredLoop = false;\r\n\t\tthis.time = 0;\r\n\t\r\n\t\t// internals\r\n\t\r\n\t\tthis.lastKeyframe = 0;\r\n\t\tthis.currentKeyframe = 0;\r\n\t\r\n\t\tthis.direction = 1;\r\n\t\tthis.directionBackwards = false;\r\n\t\r\n\t\tthis.setFrameRange( 0, geometry.morphTargets.length - 1 );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.MorphAnimMesh.prototype.constructor = THREE.MorphAnimMesh;\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.setFrameRange = function ( start, end ) {\r\n\t\r\n\t\tthis.startKeyframe = start;\r\n\t\tthis.endKeyframe = end;\r\n\t\r\n\t\tthis.length = this.endKeyframe - this.startKeyframe + 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.setDirectionForward = function () {\r\n\t\r\n\t\tthis.direction = 1;\r\n\t\tthis.directionBackwards = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.setDirectionBackward = function () {\r\n\t\r\n\t\tthis.direction = - 1;\r\n\t\tthis.directionBackwards = true;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.parseAnimations = function () {\r\n\t\r\n\t\tvar geometry = this.geometry;\r\n\t\r\n\t\tif ( ! geometry.animations ) geometry.animations = {};\r\n\t\r\n\t\tvar firstAnimation, animations = geometry.animations;\r\n\t\r\n\t\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\t\r\n\t\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\t\tvar parts = morph.name.match( pattern );\r\n\t\r\n\t\t\tif ( parts && parts.length > 1 ) {\r\n\t\r\n\t\t\t\tvar label = parts[ 1 ];\r\n\t\r\n\t\t\t\tif ( ! animations[ label ] ) animations[ label ] = { start: Infinity, end: - Infinity };\r\n\t\r\n\t\t\t\tvar animation = animations[ label ];\r\n\t\r\n\t\t\t\tif ( i < animation.start ) animation.start = i;\r\n\t\t\t\tif ( i > animation.end ) animation.end = i;\r\n\t\r\n\t\t\t\tif ( ! firstAnimation ) firstAnimation = label;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tgeometry.firstAnimation = firstAnimation;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.setAnimationLabel = function ( label, start, end ) {\r\n\t\r\n\t\tif ( ! this.geometry.animations ) this.geometry.animations = {};\r\n\t\r\n\t\tthis.geometry.animations[ label ] = { start: start, end: end };\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.playAnimation = function ( label, fps ) {\r\n\t\r\n\t\tvar animation = this.geometry.animations[ label ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tthis.setFrameRange( animation.start, animation.end );\r\n\t\t\tthis.duration = 1000 * ( ( animation.end - animation.start ) / fps );\r\n\t\t\tthis.time = 0;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.MorphAnimMesh: animation[' + label + '] undefined in .playAnimation()' );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.updateAnimation = function ( delta ) {\r\n\t\r\n\t\tvar frameTime = this.duration / this.length;\r\n\t\r\n\t\tthis.time += this.direction * delta;\r\n\t\r\n\t\tif ( this.mirroredLoop ) {\r\n\t\r\n\t\t\tif ( this.time > this.duration || this.time < 0 ) {\r\n\t\r\n\t\t\t\tthis.direction *= - 1;\r\n\t\r\n\t\t\t\tif ( this.time > this.duration ) {\r\n\t\r\n\t\t\t\t\tthis.time = this.duration;\r\n\t\t\t\t\tthis.directionBackwards = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( this.time < 0 ) {\r\n\t\r\n\t\t\t\t\tthis.time = 0;\r\n\t\t\t\t\tthis.directionBackwards = false;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.time = this.time % this.duration;\r\n\t\r\n\t\t\tif ( this.time < 0 ) this.time += this.duration;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar keyframe = this.startKeyframe + THREE.Math.clamp( Math.floor( this.time / frameTime ), 0, this.length - 1 );\r\n\t\r\n\t\tvar influences = this.morphTargetInfluences;\r\n\t\r\n\t\tif ( keyframe !== this.currentKeyframe ) {\r\n\t\r\n\t\t\tinfluences[ this.lastKeyframe ] = 0;\r\n\t\t\tinfluences[ this.currentKeyframe ] = 1;\r\n\t\t\tinfluences[ keyframe ] = 0;\r\n\t\r\n\t\t\tthis.lastKeyframe = this.currentKeyframe;\r\n\t\t\tthis.currentKeyframe = keyframe;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar mix = ( this.time % frameTime ) / frameTime;\r\n\t\r\n\t\tif ( this.directionBackwards ) {\r\n\t\r\n\t\t\tmix = 1 - mix;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tinfluences[ this.currentKeyframe ] = mix;\r\n\t\tinfluences[ this.lastKeyframe ] = 1 - mix;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.interpolateTargets = function ( a, b, t ) {\r\n\t\r\n\t\tvar influences = this.morphTargetInfluences;\r\n\t\r\n\t\tfor ( var i = 0, l = influences.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tinfluences[ i ] = 0;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tif ( a > - 1 ) influences[ a ] = 1 - t;\r\n\t\tif ( b > - 1 ) influences[ b ] = t;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimMesh.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Mesh.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.duration = source.duration;\r\n\t\tthis.mirroredLoop = source.mirroredLoop;\r\n\t\tthis.time = source.time;\r\n\t\r\n\t\tthis.lastKeyframe = source.lastKeyframe;\r\n\t\tthis.currentKeyframe = source.currentKeyframe;\r\n\t\r\n\t\tthis.direction = source.direction;\r\n\t\tthis.directionBackwards = source.directionBackwards;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/LOD.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.LOD = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'LOD';\r\n\t\r\n\t\tObject.defineProperties( this, {\r\n\t\t\tlevels: {\r\n\t\t\t\tenumerable: true,\r\n\t\t\t\tvalue: []\r\n\t\t\t},\r\n\t\t\tobjects: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\t\t\treturn this.levels;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.LOD.prototype.constructor = THREE.LOD;\r\n\t\r\n\tTHREE.LOD.prototype.addLevel = function ( object, distance ) {\r\n\t\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\t\r\n\t\tdistance = Math.abs( distance );\r\n\t\r\n\t\tvar levels = this.levels;\r\n\t\r\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\t\r\n\t\t\tif ( distance < levels[ l ].distance ) {\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\t\r\n\t\tthis.add( object );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\r\n\t\r\n\t\tvar levels = this.levels;\r\n\t\r\n\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tif ( distance < levels[ i ].distance ) {\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn levels[ i - 1 ].object;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LOD.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar matrixPosition = new THREE.Vector3();\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\t\r\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.LOD.prototype.update = function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\r\n\t\treturn function update( camera ) {\r\n\t\r\n\t\t\tvar levels = this.levels;\r\n\t\r\n\t\t\tif ( levels.length > 1 ) {\r\n\t\r\n\t\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t\t\tvar distance = v1.distanceTo( v2 );\r\n\t\r\n\t\t\t\tlevels[ 0 ].object.visible = true;\r\n\t\r\n\t\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\t\r\n\t\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( ; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tlevels[ i ].object.visible = false;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\tTHREE.LOD.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source, false );\r\n\t\r\n\t\tvar levels = source.levels;\r\n\t\r\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar level = levels[ i ];\r\n\t\r\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LOD.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\tdata.object.levels = [];\r\n\t\r\n\t\tvar levels = this.levels;\r\n\t\r\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar level = levels[ i ];\r\n\t\r\n\t\t\tdata.object.levels.push( {\r\n\t\t\t\tobject: level.object.uuid,\r\n\t\t\t\tdistance: level.distance\r\n\t\t\t} );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/objects/Sprite.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Sprite = ( function () {\r\n\t\r\n\t\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\r\n\t\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\r\n\t\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\t\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\t\r\n\t\treturn function Sprite( material ) {\r\n\t\r\n\t\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\t\tthis.type = 'Sprite';\r\n\t\r\n\t\t\tthis.geometry = geometry;\r\n\t\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\tTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Sprite.prototype.constructor = THREE.Sprite;\r\n\t\r\n\tTHREE.Sprite.prototype.raycast = ( function () {\r\n\t\r\n\t\tvar matrixPosition = new THREE.Vector3();\r\n\t\r\n\t\treturn function raycast( raycaster, intersects ) {\r\n\t\r\n\t\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\r\n\t\t\tvar guessSizeSq = this.scale.x * this.scale.y;\r\n\t\r\n\t\t\tif ( distanceSq > guessSizeSq ) {\r\n\t\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tintersects.push( {\r\n\t\r\n\t\t\t\tdistance: Math.sqrt( distanceSq ),\r\n\t\t\t\tpoint: this.position,\r\n\t\t\t\tface: null,\r\n\t\t\t\tobject: this\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.Sprite.prototype.clone = function () {\r\n\t\r\n\t\treturn new this.constructor( this.material ).copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Sprite.prototype.toJSON = function ( meta ) {\r\n\t\r\n\t\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\t\r\n\t\t// only serialize if not in meta materials cache\r\n\t\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\t\r\n\t\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdata.object.material = this.material.uuid;\r\n\t\r\n\t\treturn data;\r\n\t\r\n\t};\r\n\t\r\n\t// Backwards compatibility\r\n\t\r\n\tTHREE.Particle = THREE.Sprite;\r\n\t\r\n\t// File:src/objects/LensFlare.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.lensFlares = [];\r\n\t\r\n\t\tthis.positionScreen = new THREE.Vector3();\r\n\t\tthis.customUpdateCallback = undefined;\r\n\t\r\n\t\tif ( texture !== undefined ) {\r\n\t\r\n\t\t\tthis.add( texture, size, distance, blending, color );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.LensFlare.prototype.constructor = THREE.LensFlare;\r\n\t\r\n\t\r\n\t/*\r\n\t * Add: adds another flare\r\n\t */\r\n\t\r\n\tTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\r\n\t\r\n\t\tif ( size === undefined ) size = - 1;\r\n\t\tif ( distance === undefined ) distance = 0;\r\n\t\tif ( opacity === undefined ) opacity = 1;\r\n\t\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\t\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\t\r\n\t\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\t\r\n\t\tthis.lensFlares.push( {\r\n\t\t\ttexture: texture,\t// THREE.Texture\r\n\t\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\r\n\t\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\r\n\t\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\r\n\t\t\tscale: 1, \t\t// scale\r\n\t\t\trotation: 0, \t\t// rotation\r\n\t\t\topacity: opacity,\t// opacity\r\n\t\t\tcolor: color,\t\t// color\r\n\t\t\tblending: blending\t// blending\r\n\t\t} );\r\n\t\r\n\t};\r\n\t\r\n\t/*\r\n\t * Update lens flares update positions on all flares based on the screen position\r\n\t * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n\t */\r\n\t\r\n\tTHREE.LensFlare.prototype.updateLensFlares = function () {\r\n\t\r\n\t\tvar f, fl = this.lensFlares.length;\r\n\t\tvar flare;\r\n\t\tvar vecX = - this.positionScreen.x * 2;\r\n\t\tvar vecY = - this.positionScreen.y * 2;\r\n\t\r\n\t\tfor ( f = 0; f < fl; f ++ ) {\r\n\t\r\n\t\t\tflare = this.lensFlares[ f ];\r\n\t\r\n\t\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\t\r\n\t\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LensFlare.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\t\tthis.positionScreen.copy( source.positionScreen );\r\n\t\tthis.customUpdateCallback = source.customUpdateCallback;\r\n\t\r\n\t\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tthis.lensFlares.push( source.lensFlares[ i ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/scenes/Scene.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Scene = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Scene';\r\n\t\r\n\t\tthis.fog = null;\r\n\t\tthis.overrideMaterial = null;\r\n\t\r\n\t\tthis.autoUpdate = true; // checked by the renderer\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Scene.prototype.constructor = THREE.Scene;\r\n\t\r\n\tTHREE.Scene.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\t\r\n\t\tthis.autoUpdate = source.autoUpdate;\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/scenes/Fog.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Fog = function ( color, near, far ) {\r\n\t\r\n\t\tthis.name = '';\r\n\t\r\n\t\tthis.color = new THREE.Color( color );\r\n\t\r\n\t\tthis.near = ( near !== undefined ) ? near : 1;\r\n\t\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Fog.prototype.clone = function () {\r\n\t\r\n\t\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/scenes/FogExp2.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.FogExp2 = function ( color, density ) {\r\n\t\r\n\t\tthis.name = '';\r\n\t\r\n\t\tthis.color = new THREE.Color( color );\r\n\t\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.FogExp2.prototype.clone = function () {\r\n\t\r\n\t\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk.js\r\n\t\r\n\tTHREE.ShaderChunk = {};\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'alphamap_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'alphamap_pars_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'alphatest_fragment'] = \"#ifdef ALPHATEST\\n\\n\tif ( diffuseColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'aomap_fragment'] = \"#ifdef USE_AOMAP\\n\\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'aomap_pars_fragment'] = \"#ifdef USE_AOMAP\\n\\n\tuniform sampler2D aoMap;\\n\tuniform float aoMapIntensity;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'begin_vertex'] = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'beginnormal_vertex'] = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'bumpmap_pars_fragment'] = \"#ifdef USE_BUMPMAP\\n\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\tvec2 dHdxy_fwd() {\\n\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\t\treturn vec2( dBx, dBy );\\n\\n\t}\\n\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\t\t// normalized\\n\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\t}\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'color_fragment'] = \"#ifdef USE_COLOR\\n\\n\tdiffuseColor.rgb *= vColor;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'color_pars_fragment'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'color_pars_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'color_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvColor.xyz = color.xyz;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/common.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'common'] = \"#define PI 3.14159\\n#define PI2 6.28318\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\n\\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\\n\\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\\n\\n}\\n\\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\\n\\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\\n\\n}\\n\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\n\treturn - distance * planeNormal + point;\\n\\n}\\n\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n\\n}\\n\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n\\n}\\n\\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\\n\\n\tif ( decayExponent > 0.0 ) {\\n\\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\n\t}\\n\\n\treturn 1.0;\\n\\n}\\n\\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\\n\\n\t// Original approximation by Christophe Schlick '94\\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\\n\\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\\n\\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n\\n}\\n\\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\\n\\n\t// geometry term is (nl)(nv) / 4(nl)(nv)\\n\\n\treturn 0.25;\\n\\n}\\n\\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\\n\\n\t// factor of 1/PI in distribution term omitted\\n\\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n\\n}\\n\\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\\n\\n\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\n\t//float dotNL = saturate( dot( normal, lightDir ) );\\n\t//float dotNV = saturate( dot( normal, viewDir ) );\\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\\n\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\\n\\n\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\n\treturn F * G * D;\\n\\n}\\n\\nvec3 inputToLinear( in vec3 a ) {\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\\n\\n\t#else\\n\\n\t\treturn a;\\n\\n\t#endif\\n\\n}\\n\\nvec3 linearToOutput( in vec3 a ) {\\n\\n\t#ifdef GAMMA_OUTPUT\\n\\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\\n\\n\t#else\\n\\n\t\treturn a;\\n\\n\t#endif\\n\\n}\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'defaultnormal_vertex'] = \"#ifdef FLIP_SIDED\\n\\n\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'displacementmap_vertex'] = \"#ifdef USE_DISPLACEMENTMAP\\n\\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'displacementmap_pars_vertex'] = \"#ifdef USE_DISPLACEMENTMAP\\n\\n\tuniform sampler2D displacementMap;\\n\tuniform float displacementScale;\\n\tuniform float displacementBias;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'emissivemap_fragment'] = \"#ifdef USE_EMISSIVEMAP\\n\\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\\n\\n\ttotalEmissiveLight *= emissiveColor.rgb;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'emissivemap_pars_fragment'] = \"#ifdef USE_EMISSIVEMAP\\n\\n\tuniform sampler2D emissiveMap;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'envmap_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\t\t// Transforming Normal Vectors with the Inverse Transformation\\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\t\t#else\\n\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t\t#endif\\n\\n\t#else\\n\\n\t\tvec3 reflectVec = vReflect;\\n\\n\t#endif\\n\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\\n\tenvColor.xyz = inputToLinear( envColor.xyz );\\n\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'envmap_pars_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tuniform float reflectivity;\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tuniform float refractionRatio;\\n\\n\t#else\\n\\n\t\tvarying vec3 vReflect;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'envmap_pars_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvarying vec3 vReflect;\\n\\n\tuniform float refractionRatio;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'envmap_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\\n\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\t#else\\n\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'fog_fragment'] = \"#ifdef USE_FOG\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\t#else\\n\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\t#endif\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\\n\t#else\\n\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\t#endif\\n\t\\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'fog_pars_fragment'] = \"#ifdef USE_FOG\\n\\n\tuniform vec3 fogColor;\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tuniform float fogDensity;\\n\\n\t#else\\n\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lightmap_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lightmap_pars_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tuniform sampler2D lightMap;\\n\tuniform float lightMapIntensity;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_lambert_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_lambert_pars_vertex'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_lambert_vertex'] = \"vLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vec3( 0.0 );\\n\\n#endif\\n\\nvec3 normal = normalize( transformedNormal );\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = pointLightColor[ i ];\\n\\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\t// attenuation\\n\\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = spotLightColor[ i ];\\n\\n\t\tvec3 lightPosition = spotLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\\n\\n\t\t\t// attenuation\\n\\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\\n\\n\t\t\tattenuation *= spotEffect;\\n\\n\t\t\t// diffuse\\n\\n\t\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = directionalLightColor[ i ];\\n\\n\t\tvec3 lightDir = directionalLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tvLightFront += lightColor * saturate( dotProduct );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\\n\\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\nvLightFront += ambientLightColor;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack += ambientLightColor;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_phong_fragment'] = \"#ifndef FLAT_SHADED\\n\\n\tvec3 normal = normalize( vNormal );\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\\n\t#endif\\n\\n#else\\n\\n\tvec3 fdx = dFdx( vViewPosition );\\n\tvec3 fdy = dFdy( vViewPosition );\\n\tvec3 normal = normalize( cross( fdx, fdy ) );\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\\nvec3 viewDir = normalize( vViewPosition );\\n\\nvec3 totalDiffuseLight = vec3( 0.0 );\\nvec3 totalSpecularLight = vec3( 0.0 );\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = pointLightColor[ i ];\\n\\n\t\tvec3 lightPosition = pointLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\t// attenuation\\n\\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\\n\\n\t\t// diffuse\\n\\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\\n\\n\t\t// specular\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\\n\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = spotLightColor[ i ];\\n\\n\t\tvec3 lightPosition = spotLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\\n\\n\t\t\t// attenuation\\n\\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\\n\\n\t\t\tattenuation *= spotEffect;\\n\\n\t\t\t// diffuse\\n\\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\\n\\n\t\t\t// specular\\n\\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = directionalLightColor[ i ];\\n\\n\t\tvec3 lightDir = directionalLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\\n\\n\t\t// specular\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\ttotalDiffuseLight += lightColor;\\n\\n\t\t// specular (sky term only)\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * max( dotProduct, 0.0 );\\n\\n\t}\\n\\n#endif\\n\\n#ifdef METAL\\n\\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\\n\\n#else\\n\\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_phong_pars_fragment'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\tvarying vec3 vNormal;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_phong_pars_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'lights_phong_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvWorldPosition = worldPosition.xyz;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'linear_to_gamma_fragment'] = \"\\n\toutgoingLight = linearToOutput( outgoingLight );\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'logdepthbuf_fragment'] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tuniform float logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n\tuniform float logDepthBufFC;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'logdepthbuf_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\\n#else\\n\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\t#endif\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'map_fragment'] = \"#ifdef USE_MAP\\n\\n\tvec4 texelColor = texture2D( map, vUv );\\n\\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\\n\\n\tdiffuseColor *= texelColor;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'map_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'map_particle_fragment'] = \"#ifdef USE_MAP\\n\\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'map_particle_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform vec4 offsetRepeat;\\n\tuniform sampler2D map;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'morphnormal_vertex'] = \"#ifdef USE_MORPHNORMALS\\n\\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'morphtarget_pars_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tuniform float morphTargetInfluences[ 8 ];\\n\\n\t#else\\n\\n\tuniform float morphTargetInfluences[ 4 ];\\n\\n\t#endif\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'morphtarget_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'normalmap_pars_fragment'] = \"#ifdef USE_NORMALMAP\\n\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\\n\t// Per-Pixel Tangent Space Normal Mapping\\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\\n\t}\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'project_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n\\n#else\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/shadowmap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'shadowmap_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\tvec3 frustumColors[3];\\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\\n\\n\t#endif\\n\\n\tfloat fDepth;\\n\tvec3 shadowColor = vec3( 1.0 );\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\\n\\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\t\t\t\t// if ( all( something, something ) ) using this instead\\n\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\t\tbool frustumTest = all( frustumTestVec );\\n\\n\t\tif ( frustumTest ) {\\n\\n\t\t\tshadowCoord.z += shadowBias[ i ];\\n\\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t/*\\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\\n\t\t\t\t\t\t// must enroll loop manually\\n\\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\\n\\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\\n\\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\\n\\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\\n\t\t\t\t\t\t\tshadow += 1.0;\\n\\n\t\t\t\t}\\n\\n\t\t\t\tshadow /= 9.0;\\n\\n\t\t*/\\n\\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\\n\\n\t\t\t\tmat3 shadowKernel;\\n\t\t\t\tmat3 depthKernel;\\n\\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\\n\\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\\n\\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\\n\\n\t\t\t\tvec4 shadowValues;\\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\\n\\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#else\\n\\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\tif ( fDepth < shadowCoord.z )\\n\\n\t\t// spot with multiple shadows is darker\\n\\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\\n\\n\t\t// spot with multiple shadows has the same color as single shadow spot\\n\\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\\n\t\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\\n\\n\t\t#endif\\n\\n\t}\\n\\n\toutgoingLight = outgoingLight * shadowColor;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'shadowmap_pars_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\\n\\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\\n\tuniform float shadowBias[ MAX_SHADOWS ];\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\tfloat depth = dot( rgba_depth, bit_shift );\\n\t\treturn depth;\\n\\n\t}\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'shadowmap_pars_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'shadowmap_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\\n\\n\t}\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'skinbase_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'skinning_pars_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\\n\t#ifdef BONE_TEXTURE\\n\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\t\t\ty = dy * ( y + 0.5 );\\n\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'skinning_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'skinnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'specularmap_fragment'] = \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\tspecularStrength = 1.0;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'specularmap_pars_fragment'] = \"#ifdef USE_SPECULARMAP\\n\\n\tuniform sampler2D specularMap;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv2_pars_fragment'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv2_pars_vertex'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tattribute vec2 uv2;\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv2_vertex'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tvUv2 = uv2;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv_pars_fragment'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvarying vec2 vUv;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv_pars_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'uv_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\r\n\t\r\n\t// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\t\r\n\tTHREE.ShaderChunk[ 'worldpos_vertex'] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\t#ifdef USE_SKINNING\\n\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\t#else\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\t\r\n\t// File:src/renderers/shaders/UniformsUtils.js\r\n\t\r\n\t/**\r\n\t * Uniform Utilities\r\n\t */\r\n\t\r\n\tTHREE.UniformsUtils = {\r\n\t\r\n\t\tmerge: function ( uniforms ) {\r\n\t\r\n\t\t\tvar merged = {};\r\n\t\r\n\t\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\t\r\n\t\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\t\r\n\t\t\t\tfor ( var p in tmp ) {\r\n\t\r\n\t\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn merged;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function ( uniforms_src ) {\r\n\t\r\n\t\t\tvar uniforms_dst = {};\r\n\t\r\n\t\t\tfor ( var u in uniforms_src ) {\r\n\t\r\n\t\t\t\tuniforms_dst[ u ] = {};\r\n\t\r\n\t\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\t\r\n\t\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\t\r\n\t\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Matrix3 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\t\r\n\t\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\t\r\n\t\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\r\n\t\r\n\t\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn uniforms_dst;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/shaders/UniformsLib.js\r\n\t\r\n\t/**\r\n\t * Uniforms library for shared webgl shaders\r\n\t */\r\n\t\r\n\tTHREE.UniformsLib = {\r\n\t\r\n\t\tcommon: {\r\n\t\r\n\t\t\t\"diffuse\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\t\r\n\t\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\t\r\n\t\t\t\"specularMap\" : { type: \"t\", value: null },\r\n\t\t\t\"alphaMap\" : { type: \"t\", value: null },\r\n\t\r\n\t\t\t\"envMap\" : { type: \"t\", value: null },\r\n\t\t\t\"flipEnvMap\" : { type: \"f\", value: - 1 },\r\n\t\t\t\"reflectivity\" : { type: \"f\", value: 1.0 },\r\n\t\t\t\"refractionRatio\" : { type: \"f\", value: 0.98 }\r\n\t\r\n\t\t},\r\n\t\r\n\t\taomap: {\r\n\t\r\n\t\t\t\"aoMap\" : { type: \"t\", value: null },\r\n\t\t\t\"aoMapIntensity\" : { type: \"f\", value: 1 },\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlightmap: {\r\n\t\r\n\t\t\t\"lightMap\" : { type: \"t\", value: null },\r\n\t\t\t\"lightMapIntensity\" : { type: \"f\", value: 1 },\r\n\t\r\n\t\t},\r\n\t\r\n\t\temissivemap: {\r\n\t\r\n\t\t\t\"emissiveMap\" : { type: \"t\", value: null },\r\n\t\r\n\t\t},\r\n\t\r\n\t\tbumpmap: {\r\n\t\r\n\t\t\t\"bumpMap\" : { type: \"t\", value: null },\r\n\t\t\t\"bumpScale\" : { type: \"f\", value: 1 }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tnormalmap: {\r\n\t\r\n\t\t\t\"normalMap\" : { type: \"t\", value: null },\r\n\t\t\t\"normalScale\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdisplacementmap: {\r\n\t\r\n\t\t\t\"displacementMap\" : { type: \"t\", value: null },\r\n\t\t\t\"displacementScale\" : { type: \"f\", value: 1 },\r\n\t\t\t\"displacementBias\" : { type: \"f\", value: 0 }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfog : {\r\n\t\r\n\t\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tlights: {\r\n\t\r\n\t\t\t\"ambientLightColor\" : { type: \"fv\", value: [] },\r\n\t\r\n\t\t\t\"directionalLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\t\"directionalLightColor\" : { type: \"fv\", value: [] },\r\n\t\r\n\t\t\t\"hemisphereLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\t\"hemisphereLightSkyColor\" : { type: \"fv\", value: [] },\r\n\t\t\t\"hemisphereLightGroundColor\" : { type: \"fv\", value: [] },\r\n\t\r\n\t\t\t\"pointLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\t\"pointLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\t\"pointLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"pointLightDecay\" : { type: \"fv1\", value: [] },\r\n\t\r\n\t\t\t\"spotLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\t\"spotLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\t\"spotLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\t\"spotLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"spotLightAngleCos\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"spotLightExponent\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"spotLightDecay\" : { type: \"fv1\", value: [] }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tpoints: {\r\n\t\r\n\t\t\t\"psColor\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\t\t\t\"size\" : { type: \"f\", value: 1.0 },\r\n\t\t\t\"scale\" : { type: \"f\", value: 1.0 },\r\n\t\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\t\r\n\t\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\t\r\n\t\t},\r\n\t\r\n\t\tshadowmap: {\r\n\t\r\n\t\t\t\"shadowMap\": { type: \"tv\", value: [] },\r\n\t\t\t\"shadowMapSize\": { type: \"v2v\", value: [] },\r\n\t\r\n\t\t\t\"shadowBias\" : { type: \"fv1\", value: [] },\r\n\t\t\t\"shadowDarkness\": { type: \"fv1\", value: [] },\r\n\t\r\n\t\t\t\"shadowMatrix\" : { type: \"m4v\", value: [] }\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/shaders/ShaderLib.js\r\n\t\r\n\t/**\r\n\t * Webgl Shader Library for three.js\r\n\t *\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t */\r\n\t\r\n\t\r\n\tTHREE.ShaderLib = {\r\n\t\r\n\t\t'basic': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\r\n\t\t\t\t\"\t#ifdef USE_ENVMAP\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\t\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\t\"\tvec3 totalAmbientLight = vec3( 1.0 );\", // hardwired\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\t\r\n\t\t\t\t\"\toutgoingLight = diffuseColor.rgb * totalAmbientLight;\", // simple shader\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\t\t// TODO: Shadows on an otherwise unlit surface doesn't make sense.\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'lambert': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\t\r\n\t\t\t\t{\r\n\t\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) }\r\n\t\t\t\t}\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"#define LAMBERT\",\r\n\t\r\n\t\t\t\t\"varying vec3 vLightFront;\",\r\n\t\r\n\t\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\t\r\n\t\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\t\r\n\t\t\t\t\"#endif\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\t\"varying vec3 vLightFront;\",\r\n\t\r\n\t\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\t\r\n\t\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\t\r\n\t\t\t\t\"#endif\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\t// outgoing light does not have an alpha, the surface does\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\r\n\t\t\t\t\"\t#ifdef DOUBLE_SIDED\",\r\n\t\r\n\t\t\t\t\"\t\tif ( gl_FrontFacing )\",\r\n\t\t\t\t\"\t\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\",\r\n\t\t\t\t\"\t\telse\",\r\n\t\t\t\t\"\t\t\toutgoingLight += diffuseColor.rgb * vLightBack + emissive;\",\r\n\t\r\n\t\t\t\t\"\t#else\",\r\n\t\r\n\t\t\t\t\"\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\",\r\n\t\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'phong': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"bumpmap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"displacementmap\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\t\r\n\t\t\t\t{\r\n\t\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\t\"shininess\": { type: \"f\", value: 30 }\r\n\t\t\t\t}\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"#define PHONG\",\r\n\t\r\n\t\t\t\t\"varying vec3 vViewPosition;\",\r\n\t\r\n\t\t\t\t\"#ifndef FLAT_SHADED\",\r\n\t\r\n\t\t\t\t\"\tvarying vec3 vNormal;\",\r\n\t\r\n\t\t\t\t\"#endif\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"displacementmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\t\r\n\t\t\t\t\"#ifndef FLAT_SHADED\", // Normal computed with derivatives when FLAT_SHADED\r\n\t\r\n\t\t\t\t\"\tvNormal = normalize( transformedNormal );\",\r\n\t\r\n\t\t\t\t\"#endif\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"displacementmap_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"\tvViewPosition = - mvPosition.xyz;\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"#define PHONG\",\r\n\t\r\n\t\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\t\"uniform vec3 specular;\",\r\n\t\t\t\t\"uniform float shininess;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"emissivemap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\t\"\tvec3 totalAmbientLight = ambientLightColor;\",\r\n\t\t\t\t\"\tvec3 totalEmissiveLight = emissive;\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"emissivemap_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'points': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"points\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"uniform float size;\",\r\n\t\t\t\t\"uniform float scale;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\r\n\t\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\r\n\t\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\r\n\t\t\t\t\"\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\",\r\n\t\t\t\t\"\t#else\",\r\n\t\t\t\t\"\t\tgl_PointSize = size;\",\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform vec3 psColor;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( psColor, opacity );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\r\n\t\t\t\t\"\toutgoingLight = diffuseColor.rgb;\", // simple shader\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'dashed': {\r\n\t\r\n\t\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\t\r\n\t\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\r\n\t\t\t\t{\r\n\t\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\r\n\t\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\r\n\t\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\r\n\t\t\t\t}\r\n\t\r\n\t\t\t] ),\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"uniform float scale;\",\r\n\t\t\t\t\"attribute float lineDistance;\",\r\n\t\r\n\t\t\t\t\"varying float vLineDistance;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\r\n\t\t\t\t\"\tvLineDistance = scale * lineDistance;\",\r\n\t\r\n\t\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\t\"uniform float dashSize;\",\r\n\t\t\t\t\"uniform float totalSize;\",\r\n\t\r\n\t\t\t\t\"varying float vLineDistance;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\r\n\t\r\n\t\t\t\t\"\t\tdiscard;\",\r\n\t\r\n\t\t\t\t\"\t}\",\r\n\t\r\n\t\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\r\n\t\t\t\t\"\toutgoingLight = diffuseColor.rgb;\", // simple shader\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'depth': {\r\n\t\r\n\t\t\tuniforms: {\r\n\t\r\n\t\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\r\n\t\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\r\n\t\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform float mNear;\",\r\n\t\t\t\t\"uniform float mFar;\",\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\t\r\n\t\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\r\n\t\r\n\t\t\t\t\"\t#else\",\r\n\t\r\n\t\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\r\n\t\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\r\n\t\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t'normal': {\r\n\t\r\n\t\t\tuniforms: {\r\n\t\r\n\t\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"varying vec3 vNormal;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\"varying vec3 vNormal;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/* -------------------------------------------------------------------------\r\n\t\t//\tCube map shader\r\n\t\t ------------------------------------------------------------------------- */\r\n\t\r\n\t\t'cube': {\r\n\t\r\n\t\t\tuniforms: { \"tCube\": { type: \"t\", value: null },\r\n\t\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\t\r\n\t\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform samplerCube tCube;\",\r\n\t\t\t\t\"uniform float tFlip;\",\r\n\t\r\n\t\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/* -------------------------------------------------------------------------\r\n\t\t//\tCube map shader\r\n\t\t ------------------------------------------------------------------------- */\r\n\t\r\n\t\t'equirect': {\r\n\t\r\n\t\t\tuniforms: { \"tEquirect\": { type: \"t\", value: null },\r\n\t\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\t\r\n\t\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\"uniform sampler2D tEquirect;\",\r\n\t\t\t\t\"uniform float tFlip;\",\r\n\t\r\n\t\t\t\t\"varying vec3 vWorldPosition;\",\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t// \"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\t\t\t\t\t\"vec3 direction = normalize( vWorldPosition );\",\r\n\t\t\t\t\t\"vec2 sampleUV;\",\r\n\t\t\t\t\t\"sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\",\r\n\t\t\t\t\t\"sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\",\r\n\t\t\t\t\t\"gl_FragColor = texture2D( tEquirect, sampleUV );\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/* Depth encoding into RGBA texture\r\n\t\t *\r\n\t\t * based on SpiderGL shadow map example\r\n\t\t * http://spidergl.org/example.php?id=6\r\n\t\t *\r\n\t\t * originally from\r\n\t\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\r\n\t\t *\r\n\t\t * see also\r\n\t\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\r\n\t\t */\r\n\t\r\n\t\t'depthRGBA': {\r\n\t\r\n\t\t\tuniforms: {},\r\n\t\r\n\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\t\r\n\t\t\t\t\"vec4 pack_depth( const in float depth ) {\",\r\n\t\r\n\t\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\r\n\t\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\r\n\t\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\", // \"\tvec4 res = fract( depth * bit_shift );\",\r\n\t\t\t\t\"\tres -= res.xxyz * bit_mask;\",\r\n\t\t\t\t\"\treturn res;\",\r\n\t\r\n\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\r\n\t\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\t\r\n\t\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\r\n\t\r\n\t\t\t\t\"\t#else\",\r\n\t\r\n\t\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\r\n\t\r\n\t\t\t\t\"\t#endif\",\r\n\t\r\n\t\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\r\n\t\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\r\n\t\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\r\n\t\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\r\n\t\r\n\t\t\t\t\"}\"\r\n\t\r\n\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/WebGLRenderer.js\r\n\t\r\n\t/**\r\n\t * @author supereggbert / http://www.paulbrunt.co.uk/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author szimek / https://github.com/szimek/\r\n\t */\r\n\t\r\n\tTHREE.WebGLRenderer = function ( parameters ) {\r\n\t\r\n\t\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\t\r\n\t\tparameters = parameters || {};\r\n\t\r\n\t\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\t\r\n\t\t_width = _canvas.width,\r\n\t\t_height = _canvas.height,\r\n\t\r\n\t\tpixelRatio = 1,\r\n\t\r\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n\t\r\n\t\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t\t_clearAlpha = 0;\r\n\t\r\n\t\tvar lights = [];\r\n\t\r\n\t\tvar opaqueObjects = [];\r\n\t\tvar opaqueObjectsLastIndex = -1;\r\n\t\tvar transparentObjects = [];\r\n\t\tvar transparentObjectsLastIndex = -1;\r\n\t\r\n\t\tvar opaqueImmediateObjects = [];\r\n\t\tvar opaqueImmediateObjectsLastIndex = -1;\r\n\t\tvar transparentImmediateObjects = [];\r\n\t\tvar transparentImmediateObjectsLastIndex = -1;\r\n\t\r\n\t\tvar morphInfluences = new Float32Array( 8 );\r\n\t\r\n\t\r\n\t\tvar sprites = [];\r\n\t\tvar lensFlares = [];\r\n\t\r\n\t\t// public properties\r\n\t\r\n\t\tthis.domElement = _canvas;\r\n\t\tthis.context = null;\r\n\t\r\n\t\t// clearing\r\n\t\r\n\t\tthis.autoClear = true;\r\n\t\tthis.autoClearColor = true;\r\n\t\tthis.autoClearDepth = true;\r\n\t\tthis.autoClearStencil = true;\r\n\t\r\n\t\t// scene graph\r\n\t\r\n\t\tthis.sortObjects = true;\r\n\t\r\n\t\t// physically based shading\r\n\t\r\n\t\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\t\tthis.gammaInput = false;\r\n\t\tthis.gammaOutput = false;\r\n\t\r\n\t\t// morphs\r\n\t\r\n\t\tthis.maxMorphTargets = 8;\r\n\t\tthis.maxMorphNormals = 4;\r\n\t\r\n\t\t// flags\r\n\t\r\n\t\tthis.autoScaleCubemaps = true;\r\n\t\r\n\t\t// internal properties\r\n\t\r\n\t\tvar _this = this,\r\n\t\r\n\t\t// internal state cache\r\n\t\r\n\t\t_currentProgram = null,\r\n\t\t_currentFramebuffer = null,\r\n\t\t_currentMaterialId = - 1,\r\n\t\t_currentGeometryProgram = '',\r\n\t\t_currentCamera = null,\r\n\t\r\n\t\t_usedTextureUnits = 0,\r\n\t\r\n\t\t_viewportX = 0,\r\n\t\t_viewportY = 0,\r\n\t\t_viewportWidth = _canvas.width,\r\n\t\t_viewportHeight = _canvas.height,\r\n\t\t_currentWidth = 0,\r\n\t\t_currentHeight = 0,\r\n\t\r\n\t\t// frustum\r\n\t\r\n\t\t_frustum = new THREE.Frustum(),\r\n\t\r\n\t\t // camera matrices cache\r\n\t\r\n\t\t_projScreenMatrix = new THREE.Matrix4(),\r\n\t\r\n\t\t_vector3 = new THREE.Vector3(),\r\n\t\r\n\t\t// light arrays cache\r\n\t\r\n\t\t_direction = new THREE.Vector3(),\r\n\t\r\n\t\t_lightsNeedUpdate = true,\r\n\t\r\n\t\t_lights = {\r\n\t\r\n\t\t\tambient: [ 0, 0, 0 ],\r\n\t\t\tdirectional: { length: 0, colors: [], positions: [] },\r\n\t\t\tpoint: { length: 0, colors: [], positions: [], distances: [], decays: [] },\r\n\t\t\tspot: { length: 0, colors: [], positions: [], distances: [], directions: [], anglesCos: [], exponents: [], decays: [] },\r\n\t\t\themi: { length: 0, skyColors: [], groundColors: [], positions: [] }\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// info\r\n\t\r\n\t\t_infoMemory = {\r\n\t\r\n\t\t\tgeometries: 0,\r\n\t\t\ttextures: 0\r\n\t\r\n\t\t},\r\n\t\r\n\t\t_infoRender = {\r\n\t\r\n\t\t\tcalls: 0,\r\n\t\t\tvertices: 0,\r\n\t\t\tfaces: 0,\r\n\t\t\tpoints: 0\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.info = {\r\n\t\r\n\t\t\trender: _infoRender,\r\n\t\t\tmemory: _infoMemory,\r\n\t\t\tprograms: null\r\n\t\r\n\t\t};\r\n\t\r\n\t\r\n\t\t// initialize\r\n\t\r\n\t\tvar _gl;\r\n\t\r\n\t\ttry {\r\n\t\r\n\t\t\tvar attributes = {\r\n\t\t\t\talpha: _alpha,\r\n\t\t\t\tdepth: _depth,\r\n\t\t\t\tstencil: _stencil,\r\n\t\t\t\tantialias: _antialias,\r\n\t\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t\t};\r\n\t\r\n\t\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\t\r\n\t\t\tif ( _gl === null ) {\r\n\t\r\n\t\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\t\r\n\t\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthrow 'Error creating WebGL context.';\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\r\n\t\t} catch ( error ) {\r\n\t\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\t\r\n\t\textensions.get( 'OES_texture_float' );\r\n\t\textensions.get( 'OES_texture_float_linear' );\r\n\t\textensions.get( 'OES_texture_half_float' );\r\n\t\textensions.get( 'OES_texture_half_float_linear' );\r\n\t\textensions.get( 'OES_standard_derivatives' );\r\n\t\textensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\tif ( extensions.get( 'OES_element_index_uint' ) ) {\r\n\t\r\n\t\t\tTHREE.BufferGeometry.MaxIndex = 4294967296;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar capabilities = new THREE.WebGLCapabilities( _gl, extensions, parameters );\r\n\t\r\n\t\tvar state = new THREE.WebGLState( _gl, extensions, paramThreeToGL );\r\n\t\tvar properties = new THREE.WebGLProperties();\r\n\t\tvar objects = new THREE.WebGLObjects( _gl, properties, this.info );\r\n\t\tvar programCache = new THREE.WebGLPrograms( this, capabilities );\r\n\t\r\n\t\tthis.info.programs = programCache.programs;\r\n\t\r\n\t\tvar bufferRenderer = new THREE.WebGLBufferRenderer( _gl, extensions, _infoRender );\r\n\t\tvar indexedBufferRenderer = new THREE.WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\r\n\t\r\n\t\t//\r\n\t\r\n\t\tfunction glClearColor( r, g, b, a ) {\r\n\t\r\n\t\t\tif ( _premultipliedAlpha === true ) {\r\n\t\r\n\t\t\t\tr *= a; g *= a; b *= a;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_gl.clearColor( r, g, b, a );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setDefaultGLState() {\r\n\t\r\n\t\t\tstate.init();\r\n\t\r\n\t\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\t\r\n\t\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction resetGLState() {\r\n\t\r\n\t\t\t_currentProgram = null;\r\n\t\t\t_currentCamera = null;\r\n\t\r\n\t\t\t_currentGeometryProgram = '';\r\n\t\t\t_currentMaterialId = - 1;\r\n\t\r\n\t\t\t_lightsNeedUpdate = true;\r\n\t\r\n\t\t\tstate.reset();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tsetDefaultGLState();\r\n\t\r\n\t\tthis.context = _gl;\r\n\t\tthis.capabilities = capabilities;\r\n\t\tthis.extensions = extensions;\r\n\t\tthis.state = state;\r\n\t\r\n\t\t// shadow map\r\n\t\r\n\t\tvar shadowMap = new THREE.WebGLShadowMap( this, lights, objects );\r\n\t\r\n\t\tthis.shadowMap = shadowMap;\r\n\t\r\n\t\r\n\t\t// Plugins\r\n\t\r\n\t\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\t\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\t\r\n\t\t// API\r\n\t\r\n\t\tthis.getContext = function () {\r\n\t\r\n\t\t\treturn _gl;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getContextAttributes = function () {\r\n\t\r\n\t\t\treturn _gl.getContextAttributes();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.forceContextLoss = function () {\r\n\t\r\n\t\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getMaxAnisotropy = ( function () {\r\n\t\r\n\t\t\tvar value;\r\n\t\r\n\t\t\treturn function getMaxAnisotropy() {\r\n\t\r\n\t\t\t\tif ( value !== undefined ) return value;\r\n\t\r\n\t\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\t\r\n\t\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\t\tvalue = _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tvalue = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn value;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t} )();\r\n\t\r\n\t\tthis.getPrecision = function () {\r\n\t\r\n\t\t\treturn capabilities.precision;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getPixelRatio = function () {\r\n\t\r\n\t\t\treturn pixelRatio;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setPixelRatio = function ( value ) {\r\n\t\r\n\t\t\tif ( value !== undefined ) pixelRatio = value;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getSize = function () {\r\n\t\r\n\t\t\treturn {\r\n\t\t\t\twidth: _width,\r\n\t\t\t\theight: _height\r\n\t\t\t};\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setSize = function ( width, height, updateStyle ) {\r\n\t\r\n\t\t\t_width = width;\r\n\t\t\t_height = height;\r\n\t\r\n\t\t\t_canvas.width = width * pixelRatio;\r\n\t\t\t_canvas.height = height * pixelRatio;\r\n\t\r\n\t\t\tif ( updateStyle !== false ) {\r\n\t\r\n\t\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t\t_canvas.style.height = height + 'px';\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.setViewport( 0, 0, width, height );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setViewport = function ( x, y, width, height ) {\r\n\t\r\n\t\t\t_viewportX = x * pixelRatio;\r\n\t\t\t_viewportY = y * pixelRatio;\r\n\t\r\n\t\t\t_viewportWidth = width * pixelRatio;\r\n\t\t\t_viewportHeight = height * pixelRatio;\r\n\t\r\n\t\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setScissor = function ( x, y, width, height ) {\r\n\t\r\n\t\t\t_gl.scissor(\r\n\t\t\t\tx * pixelRatio,\r\n\t\t\t\ty * pixelRatio,\r\n\t\t\t\twidth * pixelRatio,\r\n\t\t\t\theight * pixelRatio\r\n\t\t\t);\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.enableScissorTest = function ( boolean ) {\r\n\t\r\n\t\t\tstate.setScissorTest( boolean );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Clearing\r\n\t\r\n\t\tthis.getClearColor = function () {\r\n\t\r\n\t\t\treturn _clearColor;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setClearColor = function ( color, alpha ) {\r\n\t\r\n\t\t\t_clearColor.set( color );\r\n\t\r\n\t\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\t\r\n\t\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getClearAlpha = function () {\r\n\t\r\n\t\t\treturn _clearAlpha;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setClearAlpha = function ( alpha ) {\r\n\t\r\n\t\t\t_clearAlpha = alpha;\r\n\t\r\n\t\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clear = function ( color, depth, stencil ) {\r\n\t\r\n\t\t\tvar bits = 0;\r\n\t\r\n\t\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\t\r\n\t\t\t_gl.clear( bits );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clearColor = function () {\r\n\t\r\n\t\t\t_gl.clear( _gl.COLOR_BUFFER_BIT );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clearDepth = function () {\r\n\t\r\n\t\t\t_gl.clear( _gl.DEPTH_BUFFER_BIT );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clearStencil = function () {\r\n\t\r\n\t\t\t_gl.clear( _gl.STENCIL_BUFFER_BIT );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\t\r\n\t\t\tthis.setRenderTarget( renderTarget );\r\n\t\t\tthis.clear( color, depth, stencil );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Reset\r\n\t\r\n\t\tthis.resetGLState = resetGLState;\r\n\t\r\n\t\tthis.dispose = function() {\r\n\t\r\n\t\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Events\r\n\t\r\n\t\tfunction onContextLost( event ) {\r\n\t\r\n\t\t\tevent.preventDefault();\r\n\t\r\n\t\t\tresetGLState();\r\n\t\t\tsetDefaultGLState();\r\n\t\r\n\t\t\tproperties.clear();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction onTextureDispose( event ) {\r\n\t\r\n\t\t\tvar texture = event.target;\r\n\t\r\n\t\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\t\r\n\t\t\tdeallocateTexture( texture );\r\n\t\r\n\t\t\t_infoMemory.textures --;\r\n\t\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction onRenderTargetDispose( event ) {\r\n\t\r\n\t\t\tvar renderTarget = event.target;\r\n\t\r\n\t\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\t\r\n\t\t\tdeallocateRenderTarget( renderTarget );\r\n\t\r\n\t\t\t_infoMemory.textures --;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction onMaterialDispose( event ) {\r\n\t\r\n\t\t\tvar material = event.target;\r\n\t\r\n\t\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\t\r\n\t\t\tdeallocateMaterial( material );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Buffer deallocation\r\n\t\r\n\t\tfunction deallocateTexture( texture ) {\r\n\t\r\n\t\t\tvar textureProperties = properties.get( texture );\r\n\t\r\n\t\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\t\r\n\t\t\t\t// cube texture\r\n\t\r\n\t\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// 2D texture\r\n\t\r\n\t\t\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\t\r\n\t\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// remove all webgl properties\r\n\t\t\tproperties.delete( texture );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction deallocateRenderTarget( renderTarget ) {\r\n\t\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\r\n\t\t\tif ( ! renderTarget || renderTargetProperties.__webglTexture === undefined ) return;\r\n\t\r\n\t\t\t_gl.deleteTexture( renderTargetProperties.__webglTexture );\r\n\t\r\n\t\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglRenderbuffer[ i ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglRenderbuffer );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tproperties.delete( renderTarget );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction deallocateMaterial( material ) {\r\n\t\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\t\r\n\t\t\tproperties.delete( material );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tfunction releaseMaterialProgramReference( material ) {\r\n\t\r\n\t\t\tvar programInfo = properties.get( material ).program;\r\n\t\r\n\t\t\tmaterial.program = undefined;\r\n\t\r\n\t\t\tif ( programInfo !== undefined ) {\r\n\t\r\n\t\t\t\tprogramCache.releaseProgram( programInfo );\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Buffer rendering\r\n\t\r\n\t\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\t\r\n\t\t\tstate.initAttributes();\r\n\t\r\n\t\t\tvar buffers = properties.get( object );\r\n\t\r\n\t\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\t\r\n\t\t\tvar attributes = program.getAttributes();\r\n\t\r\n\t\t\tif ( object.hasPositions ) {\r\n\t\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\t\r\n\t\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object.hasNormals ) {\r\n\t\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\t\r\n\t\t\t\tif ( material.type !== 'MeshPhongMaterial' && material.shading === THREE.FlatShading ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\t\r\n\t\t\t\t\t\tvar array = object.normalArray;\r\n\t\r\n\t\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n\t\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n\t\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\t\r\n\t\t\t\t\t\tarray[ i + 0 ] = nx;\r\n\t\t\t\t\t\tarray[ i + 1 ] = ny;\r\n\t\t\t\t\t\tarray[ i + 2 ] = nz;\r\n\t\r\n\t\t\t\t\t\tarray[ i + 3 ] = nx;\r\n\t\t\t\t\t\tarray[ i + 4 ] = ny;\r\n\t\t\t\t\t\tarray[ i + 5 ] = nz;\r\n\t\r\n\t\t\t\t\t\tarray[ i + 6 ] = nx;\r\n\t\t\t\t\t\tarray[ i + 7 ] = ny;\r\n\t\t\t\t\t\tarray[ i + 8 ] = nz;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\t\r\n\t\t\t\tstate.enableAttribute( attributes.normal );\r\n\t\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object.hasUvs && material.map ) {\r\n\t\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\t\r\n\t\t\t\tstate.enableAttribute( attributes.uv );\r\n\t\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\t\r\n\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n\t\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\t\r\n\t\t\t\tstate.enableAttribute( attributes.color );\r\n\t\r\n\t\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.disableUnusedAttributes();\r\n\t\r\n\t\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\t\r\n\t\t\tobject.count = 0;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.renderBufferDirect = function ( camera, lights, fog, geometry, material, object, group ) {\r\n\t\r\n\t\t\tsetMaterial( material );\r\n\t\r\n\t\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\t\r\n\t\t\tvar updateBuffers = false;\r\n\t\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\r\n\t\r\n\t\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\t\r\n\t\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\t\tupdateBuffers = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// morph targets\r\n\t\r\n\t\t\tvar morphTargetInfluences = object.morphTargetInfluences;\r\n\t\r\n\t\t\tif ( morphTargetInfluences !== undefined ) {\r\n\t\r\n\t\t\t\tvar activeInfluences = [];\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar influence = morphTargetInfluences[ i ];\r\n\t\t\t\t\tactiveInfluences.push( [ influence, i ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tactiveInfluences.sort( numericalSort );\r\n\t\r\n\t\t\t\tif ( activeInfluences.length > 8 ) {\r\n\t\r\n\t\t\t\t\tactiveInfluences.length = 8;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar influence = activeInfluences[ i ];\r\n\t\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\r\n\t\r\n\t\t\t\t\tif ( influence[ 0 ] !== 0 ) {\r\n\t\r\n\t\t\t\t\t\tvar index = influence[ 1 ];\r\n\t\r\n\t\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\r\n\t\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\r\n\t\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar uniforms = program.getUniforms();\r\n\t\r\n\t\t\t\tif ( uniforms.morphTargetInfluences !== null ) {\r\n\t\r\n\t\t\t\t\t_gl.uniform1fv( uniforms.morphTargetInfluences, morphInfluences );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tupdateBuffers = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar position = geometry.attributes.position;\r\n\t\r\n\t\t\tif ( material.wireframe === true ) {\r\n\t\r\n\t\t\t\tindex = objects.getWireframeAttribute( geometry );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar renderer;\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\t\trenderer.setIndex( index );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\trenderer = bufferRenderer;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( updateBuffers ) {\r\n\t\r\n\t\t\t\tsetupVertexAttributes( material, program, geometry );\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( group === undefined ) {\r\n\t\r\n\t\t\t\tvar count;\r\n\t\r\n\t\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\t\tcount = index.count;\r\n\t\r\n\t\t\t\t} else if ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\t\tcount = position.data.array.length / 3;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tcount = position.count;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar drawRange = geometry.drawRange;\r\n\t\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: drawRange.start,\r\n\t\t\t\t\tcount: Math.min( drawRange.count, count )\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( object instanceof THREE.Mesh ) {\r\n\t\r\n\t\t\t\tif ( material.wireframe === true ) {\r\n\t\r\n\t\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * pixelRatio );\r\n\t\t\t\t\trenderer.setMode( _gl.LINES );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( geometry instanceof THREE.InstancedBufferGeometry && geometry.maxInstancedCount > 0 ) {\r\n\t\r\n\t\t\t\t\trenderer.renderInstances( geometry );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderer.render( group.start, group.count );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Line ) {\r\n\t\r\n\t\t\t\tvar lineWidth = material.linewidth;\r\n\t\r\n\t\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\t\r\n\t\t\t\tstate.setLineWidth( lineWidth * pixelRatio );\r\n\t\r\n\t\t\t\tif ( object instanceof THREE.LineSegments ) {\r\n\t\r\n\t\t\t\t\trenderer.setMode( _gl.LINES );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\trenderer.render( group.start, group.count );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Points ) {\r\n\t\r\n\t\t\t\trenderer.setMode( _gl.POINTS );\r\n\t\t\t\trenderer.render( group.start, group.count );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\t\r\n\t\t\tvar extension;\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\t\r\n\t\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( startIndex === undefined ) startIndex = 0;\r\n\t\r\n\t\t\tstate.initAttributes();\r\n\t\r\n\t\t\tvar geometryAttributes = geometry.attributes;\r\n\t\r\n\t\t\tvar programAttributes = program.getAttributes();\r\n\t\r\n\t\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\t\r\n\t\t\tfor ( var name in programAttributes ) {\r\n\t\r\n\t\t\t\tvar programAttribute = programAttributes[ name ];\r\n\t\r\n\t\t\t\tif ( programAttribute >= 0 ) {\r\n\t\r\n\t\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\r\n\t\r\n\t\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\t\r\n\t\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\t\t\t\t\t\tvar buffer = objects.getAttributeBuffer( geometryAttribute );\r\n\t\r\n\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\t\t\t\tvar data = geometryAttribute.data;\r\n\t\t\t\t\t\t\tvar stride = data.stride;\r\n\t\t\t\t\t\t\tvar offset = geometryAttribute.offset;\r\n\t\r\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, stride * data.array.BYTES_PER_ELEMENT, ( startIndex * stride + offset ) * data.array.BYTES_PER_ELEMENT );\r\n\t\r\n\t\t\t\t\t\t\tif ( data instanceof THREE.InstancedInterleavedBuffer ) {\r\n\t\r\n\t\t\t\t\t\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t\textension.vertexAttribDivisorANGLE( programAttribute, data.meshPerAttribute );\r\n\t\r\n\t\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\r\n\t\r\n\t\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InstancedBufferAttribute ) {\r\n\t\r\n\t\t\t\t\t\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t\textension.vertexAttribDivisorANGLE( programAttribute, geometryAttribute.meshPerAttribute );\r\n\t\r\n\t\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\r\n\t\r\n\t\t\t\t\t\tif ( value !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tswitch ( value.length ) {\r\n\t\r\n\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.disableUnusedAttributes();\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Sorting\r\n\t\r\n\t\tfunction numericalSort ( a, b ) {\r\n\t\r\n\t\t\treturn b[ 0 ] - a[ 0 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction painterSortStable ( a, b ) {\r\n\t\r\n\t\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\t\r\n\t\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\t\r\n\t\t\t} else if ( a.material.id !== b.material.id ) {\r\n\t\r\n\t\t\t\treturn a.material.id - b.material.id;\r\n\t\r\n\t\t\t} else if ( a.z !== b.z ) {\r\n\t\r\n\t\t\t\treturn a.z - b.z;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn a.id - b.id;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction reversePainterSortStable ( a, b ) {\r\n\t\r\n\t\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\t\r\n\t\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\t\r\n\t\t\t} if ( a.z !== b.z ) {\r\n\t\r\n\t\t\t\treturn b.z - a.z;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn a.id - b.id;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Rendering\r\n\t\r\n\t\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\t\r\n\t\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar fog = scene.fog;\r\n\t\r\n\t\t\t// reset caching for this frame\r\n\t\r\n\t\t\t_currentGeometryProgram = '';\r\n\t\t\t_currentMaterialId = - 1;\r\n\t\t\t_currentCamera = null;\r\n\t\t\t_lightsNeedUpdate = true;\r\n\t\r\n\t\t\t// update scene graph\r\n\t\r\n\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\t\r\n\t\t\t// update camera matrices and frustum\r\n\t\r\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\t\r\n\t\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\t\r\n\t\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\t\r\n\t\t\tlights.length = 0;\r\n\t\r\n\t\t\topaqueObjectsLastIndex = -1;\r\n\t\t\ttransparentObjectsLastIndex = -1;\r\n\t\r\n\t\t\topaqueImmediateObjectsLastIndex = -1;\r\n\t\t\ttransparentImmediateObjectsLastIndex = -1;\r\n\t\r\n\t\t\tsprites.length = 0;\r\n\t\t\tlensFlares.length = 0;\r\n\t\r\n\t\t\tprojectObject( scene );\r\n\t\r\n\t\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\r\n\t\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\r\n\t\r\n\t\t\topaqueImmediateObjects.length = opaqueImmediateObjectsLastIndex + 1;\r\n\t\t\ttransparentImmediateObjects.length = transparentImmediateObjectsLastIndex + 1;\r\n\t\r\n\t\t\tif ( _this.sortObjects === true ) {\r\n\t\r\n\t\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tshadowMap.render( scene, camera );\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\t_infoRender.calls = 0;\r\n\t\t\t_infoRender.vertices = 0;\r\n\t\t\t_infoRender.faces = 0;\r\n\t\t\t_infoRender.points = 0;\r\n\t\r\n\t\t\tthis.setRenderTarget( renderTarget );\r\n\t\r\n\t\t\tif ( this.autoClear || forceClear ) {\r\n\t\r\n\t\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tif ( scene.overrideMaterial ) {\r\n\t\r\n\t\t\t\tvar overrideMaterial = scene.overrideMaterial;\r\n\t\r\n\t\t\t\trenderObjects( opaqueObjects, camera, lights, fog, overrideMaterial );\r\n\t\t\t\trenderObjects( transparentObjects, camera, lights, fog, overrideMaterial );\r\n\t\r\n\t\t\t\trenderObjectsImmediate( opaqueImmediateObjects, camera, lights, fog, overrideMaterial );\r\n\t\t\t\trenderObjectsImmediate( transparentImmediateObjects, camera, lights, fog, overrideMaterial );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// opaque pass (front-to-back order)\r\n\t\r\n\t\t\t\tstate.setBlending( THREE.NoBlending );\r\n\t\r\n\t\t\t\trenderObjects( opaqueObjects, camera, lights, fog );\r\n\t\t\t\trenderObjectsImmediate( opaqueImmediateObjects, camera, lights, fog );\r\n\t\r\n\t\t\t\t// transparent pass (back-to-front order)\r\n\t\r\n\t\t\t\trenderObjects( transparentObjects, camera, lights, fog );\r\n\t\t\t\trenderObjectsImmediate( transparentImmediateObjects, camera, lights, fog );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// custom render plugins (post pass)\r\n\t\r\n\t\t\tspritePlugin.render( scene, camera );\r\n\t\t\tlensFlarePlugin.render( scene, camera, _currentWidth, _currentHeight );\r\n\t\r\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\t\r\n\t\t\tif ( renderTarget && renderTarget.generateMipmaps && renderTarget.minFilter !== THREE.NearestFilter && renderTarget.minFilter !== THREE.LinearFilter ) {\r\n\t\r\n\t\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\t\r\n\t\t\tstate.setDepthTest( true );\r\n\t\t\tstate.setDepthWrite( true );\r\n\t\t\tstate.setColorWrite( true );\r\n\t\r\n\t\t\t// _gl.finish();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction pushImmediateRenderItem( object ) {\r\n\t\r\n\t\t\tvar array, index;\r\n\t\r\n\t\t\t// allocate the next position in the appropriate array\r\n\t\r\n\t\t\tif ( object.material.transparent ) {\r\n\t\r\n\t\t\t\tarray = transparentImmediateObjects;\r\n\t\t\t\tindex = ++ transparentImmediateObjectsLastIndex;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tarray = opaqueImmediateObjects;\r\n\t\t\t\tindex = ++ opaqueImmediateObjectsLastIndex;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// recycle existing position or grow the array\r\n\t\r\n\t\t\tif ( index < array.length ) {\r\n\t\r\n\t\t\t\tarray[ index ] = object;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// assert( index === array.length );\r\n\t\t\t\tarray.push( object );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction pushRenderItem( object, geometry, material, z, group ) {\r\n\t\r\n\t\t\tvar array, index;\r\n\t\r\n\t\t\t// allocate the next position in the appropriate array\r\n\t\r\n\t\t\tif ( material.transparent ) {\r\n\t\r\n\t\t\t\tarray = transparentObjects;\r\n\t\t\t\tindex = ++ transparentObjectsLastIndex;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tarray = opaqueObjects;\r\n\t\t\t\tindex = ++ opaqueObjectsLastIndex;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// recycle existing render item or grow the array\r\n\t\r\n\t\t\tvar renderItem = array[ index ];\r\n\t\r\n\t\t\tif ( renderItem !== undefined ) {\r\n\t\r\n\t\t\t\trenderItem.id = object.id;\r\n\t\t\t\trenderItem.object = object;\r\n\t\t\t\trenderItem.geometry = geometry;\r\n\t\t\t\trenderItem.material = material;\r\n\t\t\t\trenderItem.z = _vector3.z;\r\n\t\t\t\trenderItem.group = group;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\trenderItem = {\r\n\t\t\t\t\tid: object.id,\r\n\t\t\t\t\tobject: object,\r\n\t\t\t\t\tgeometry: geometry,\r\n\t\t\t\t\tmaterial: material,\r\n\t\t\t\t\tz: _vector3.z,\r\n\t\t\t\t\tgroup: group\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\t// assert( index === array.length );\r\n\t\t\t\tarray.push( renderItem );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction projectObject( object ) {\r\n\t\r\n\t\t\tif ( object.visible === false ) return;\r\n\t\r\n\t\t\tif ( object instanceof THREE.Light ) {\r\n\t\r\n\t\t\t\tlights.push( object );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\t\r\n\t\t\t\tsprites.push( object );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\t\r\n\t\t\t\tlensFlares.push( object );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.ImmediateRenderObject ) {\r\n\t\r\n\t\t\t\tpushImmediateRenderItem( object );\r\n\t\r\n\t\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\t\r\n\t\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\t\r\n\t\t\t\t\tobject.skeleton.update();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) {\r\n\t\r\n\t\t\t\t\tvar material = object.material;\r\n\t\r\n\t\t\t\t\tif ( material.visible === true ) {\r\n\t\r\n\t\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\t\r\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tvar geometry = objects.update( object );\r\n\t\r\n\t\t\t\t\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\t\r\n\t\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\t\tvar materials = material.materials;\r\n\t\r\n\t\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\t\r\n\t\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar children = object.children;\r\n\t\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tprojectObject( children[ i ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction renderObjects( renderList, camera, lights, fog, overrideMaterial ) {\r\n\t\r\n\t\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar renderItem = renderList[ i ];\r\n\t\r\n\t\t\t\tvar object = renderItem.object;\r\n\t\t\t\tvar geometry = renderItem.geometry;\r\n\t\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n\t\t\t\tvar group = renderItem.group;\r\n\t\r\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\t\r\n\t\t\t\t_this.renderBufferDirect( camera, lights, fog, geometry, material, object, group );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction renderObjectsImmediate( renderList, camera, lights, fog, overrideMaterial ) {\r\n\t\r\n\t\t\tvar material = overrideMaterial;\r\n\t\r\n\t\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar object = renderList[ i ];\r\n\t\r\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\t\r\n\t\t\t\tif ( overrideMaterial === undefined ) material = object.material;\r\n\t\r\n\t\t\t\tsetMaterial( material );\r\n\t\r\n\t\t\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\t\r\n\t\t\t\t_currentGeometryProgram = '';\r\n\t\r\n\t\t\t\tobject.render( function ( object ) {\r\n\t\r\n\t\t\t\t\t_this.renderBufferImmediate( object, program, material );\r\n\t\r\n\t\t\t\t} );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction initMaterial( material, lights, fog, object ) {\r\n\t\r\n\t\t\tvar materialProperties = properties.get( material );\r\n\t\r\n\t\t\tvar parameters = programCache.getParameters( material, lights, fog, object );\r\n\t\t\tvar code = programCache.getProgramCode( material, parameters );\r\n\t\r\n\t\t\tvar program = materialProperties.program;\r\n\t\t\tvar programChange = true;\r\n\t\r\n\t\t\tif ( program === undefined ) {\r\n\t\r\n\t\t\t\t// new material\r\n\t\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\t\r\n\t\t\t} else if ( program.code !== code ) {\r\n\t\r\n\t\t\t\t// changed glsl or parameters\r\n\t\t\t\treleaseMaterialProgramReference( material );\r\n\t\r\n\t\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\t\r\n\t\t\t\t// same glsl and uniform list\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// only rebuild uniform list\r\n\t\t\t\tprogramChange = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( programChange ) {\r\n\t\r\n\t\t\t\tif ( parameters.shaderID ) {\r\n\t\r\n\t\t\t\t\tvar shader = THREE.ShaderLib[ parameters.shaderID ];\r\n\t\r\n\t\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\t\tname: material.type,\r\n\t\t\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\t\tname: material.type,\r\n\t\t\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\r\n\t\r\n\t\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\r\n\t\r\n\t\t\t\tmaterialProperties.program = program;\r\n\t\t\t\tmaterial.program = program;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar attributes = program.getAttributes();\r\n\t\r\n\t\t\tif ( material.morphTargets ) {\r\n\t\r\n\t\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\t\r\n\t\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\r\n\t\r\n\t\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.morphNormals ) {\r\n\t\r\n\t\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\t\r\n\t\t\t\tfor ( i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\t\r\n\t\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\r\n\t\r\n\t\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tmaterialProperties.uniformsList = [];\r\n\t\r\n\t\t\tvar uniformLocations = materialProperties.program.getUniforms();\r\n\t\r\n\t\t\tfor ( var u in materialProperties.__webglShader.uniforms ) {\r\n\t\r\n\t\t\t\tvar location = uniformLocations[ u ];\r\n\t\r\n\t\t\t\tif ( location ) {\r\n\t\r\n\t\t\t\t\tmaterialProperties.uniformsList.push( [ materialProperties.__webglShader.uniforms[ u ], location ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setMaterial( material ) {\r\n\t\r\n\t\t\tsetMaterialFaces( material );\r\n\t\r\n\t\t\tif ( material.transparent === true ) {\r\n\t\r\n\t\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tstate.setBlending( THREE.NoBlending );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.setDepthFunc( material.depthFunc );\r\n\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\t\tstate.setColorWrite( material.colorWrite );\r\n\t\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setMaterialFaces( material ) {\r\n\t\r\n\t\t\tmaterial.side !== THREE.DoubleSide ? state.enable( _gl.CULL_FACE ) : state.disable( _gl.CULL_FACE );\r\n\t\t\tstate.setFlipSided( material.side === THREE.BackSide );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setProgram( camera, lights, fog, material, object ) {\r\n\t\r\n\t\t\t_usedTextureUnits = 0;\r\n\t\r\n\t\t\tvar materialProperties = properties.get( material );\r\n\t\r\n\t\t\tif ( material.needsUpdate || ! materialProperties.program ) {\r\n\t\r\n\t\t\t\tinitMaterial( material, lights, fog, object );\r\n\t\t\t\tmaterial.needsUpdate = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar refreshProgram = false;\r\n\t\t\tvar refreshMaterial = false;\r\n\t\t\tvar refreshLights = false;\r\n\t\r\n\t\t\tvar program = materialProperties.program,\r\n\t\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\r\n\t\r\n\t\t\tif ( program.id !== _currentProgram ) {\r\n\t\r\n\t\t\t\t_gl.useProgram( program.program );\r\n\t\t\t\t_currentProgram = program.id;\r\n\t\r\n\t\t\t\trefreshProgram = true;\r\n\t\t\t\trefreshMaterial = true;\r\n\t\t\t\trefreshLights = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.id !== _currentMaterialId ) {\r\n\t\r\n\t\t\t\tif ( _currentMaterialId === - 1 ) refreshLights = true;\r\n\t\t\t\t_currentMaterialId = material.id;\r\n\t\r\n\t\t\t\trefreshMaterial = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\t\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\t\r\n\t\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\t\r\n\t\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\tif ( camera !== _currentCamera ) _currentCamera = camera;\r\n\t\r\n\t\t\t\t// load material specific uniforms\r\n\t\t\t\t// (shader material also gets them for the sake of genericity)\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t\t material.envMap ) {\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.cameraPosition !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t\t material.skinning ) {\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.viewMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t\t// not sure why, but otherwise weird things happen\r\n\t\r\n\t\t\tif ( material.skinning ) {\r\n\t\r\n\t\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== undefined ) {\r\n\t\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( capabilities.floatVertexTextures && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.boneTexture !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tvar textureUnit = getTextureUnit();\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\r\n\t\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.boneTextureWidth !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.boneTextureHeight !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\r\n\t\r\n\t\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== undefined ) {\r\n\t\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( refreshMaterial ) {\r\n\t\r\n\t\t\t\t// refresh uniforms common to several materials\r\n\t\r\n\t\t\t\tif ( fog && material.fog ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t\t material.lights ) {\r\n\t\r\n\t\t\t\t\tif ( _lightsNeedUpdate ) {\r\n\t\r\n\t\t\t\t\t\trefreshLights = true;\r\n\t\t\t\t\t\tsetupLights( lights, camera );\r\n\t\t\t\t\t\t_lightsNeedUpdate = false;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( refreshLights ) {\r\n\t\r\n\t\t\t\t\t\trefreshUniformsLights( m_uniforms, _lights );\r\n\t\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, true );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, false );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t\t material instanceof THREE.MeshPhongMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// refresh single material specific uniforms\r\n\t\r\n\t\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.PointsMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsParticle( m_uniforms, material );\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\t\r\n\t\t\t\t\tm_uniforms.mNear.value = camera.near;\r\n\t\t\t\t\tm_uniforms.mFar.value = camera.far;\r\n\t\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\t\r\n\t\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\t\r\n\t\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( object.receiveShadow && ! material._shadowPass ) {\r\n\t\r\n\t\t\t\t\trefreshUniformsShadow( m_uniforms, lights );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// load common uniforms\r\n\t\r\n\t\t\t\tloadUniformsGeneric( materialProperties.uniformsList );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tloadUniformsMatrices( p_uniforms, object );\r\n\t\r\n\t\t\tif ( p_uniforms.modelMatrix !== undefined ) {\r\n\t\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn program;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Uniforms (refresh uniforms objects)\r\n\t\r\n\t\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.opacity.value = material.opacity;\r\n\t\r\n\t\t\tuniforms.diffuse.value = material.color;\r\n\t\r\n\t\t\tif ( material.emissive ) {\r\n\t\r\n\t\t\t\tuniforms.emissive.value = material.emissive;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tuniforms.map.value = material.map;\r\n\t\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\t\r\n\t\t\tif ( material.aoMap ) {\r\n\t\r\n\t\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// uv repeat and offset setting priorities\r\n\t\t\t// 1. color map\r\n\t\t\t// 2. specular map\r\n\t\t\t// 3. normal map\r\n\t\t\t// 4. bump map\r\n\t\t\t// 5. alpha map\r\n\t\t\t// 6. emissive map\r\n\t\r\n\t\t\tvar uvScaleMap;\r\n\t\r\n\t\t\tif ( material.map ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.map;\r\n\t\r\n\t\t\t} else if ( material.specularMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.specularMap;\r\n\t\r\n\t\t\t} else if ( material.displacementMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.displacementMap;\r\n\t\r\n\t\t\t} else if ( material.normalMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.normalMap;\r\n\t\r\n\t\t\t} else if ( material.bumpMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.bumpMap;\r\n\t\r\n\t\t\t} else if ( material.alphaMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.alphaMap;\r\n\t\r\n\t\t\t} else if ( material.emissiveMap ) {\r\n\t\r\n\t\t\t\tuvScaleMap = material.emissiveMap;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( uvScaleMap !== undefined ) {\r\n\t\r\n\t\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\t\tvar repeat = uvScaleMap.repeat;\r\n\t\r\n\t\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tuniforms.envMap.value = material.envMap;\r\n\t\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\r\n\t\r\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.diffuse.value = material.color;\r\n\t\t\tuniforms.opacity.value = material.opacity;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\t\tuniforms.scale.value = material.scale;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsParticle ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.psColor.value = material.color;\r\n\t\t\tuniforms.opacity.value = material.opacity;\r\n\t\t\tuniforms.size.value = material.size;\r\n\t\t\tuniforms.scale.value = _canvas.height / 2.0; // TODO: Cache this.\r\n\t\r\n\t\t\tuniforms.map.value = material.map;\r\n\t\r\n\t\t\tif ( material.map !== null ) {\r\n\t\r\n\t\t\t\tvar offset = material.map.offset;\r\n\t\t\t\tvar repeat = material.map.repeat;\r\n\t\r\n\t\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\t\r\n\t\t\tuniforms.fogColor.value = fog.color;\r\n\t\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\t\r\n\t\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\t\tuniforms.fogFar.value = fog.far;\r\n\t\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\t\r\n\t\t\t\tuniforms.fogDensity.value = fog.density;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\t\r\n\t\t\tuniforms.specular.value = material.specular;\r\n\t\t\tuniforms.shininess.value = material.shininess;\r\n\t\r\n\t\t\tif ( material.lightMap ) {\r\n\t\r\n\t\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.emissiveMap ) {\r\n\t\r\n\t\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.bumpMap ) {\r\n\t\r\n\t\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.normalMap ) {\r\n\t\r\n\t\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.displacementMap ) {\r\n\t\r\n\t\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsLights ( uniforms, lights ) {\r\n\t\r\n\t\t\tuniforms.ambientLightColor.value = lights.ambient;\r\n\t\r\n\t\t\tuniforms.directionalLightColor.value = lights.directional.colors;\r\n\t\t\tuniforms.directionalLightDirection.value = lights.directional.positions;\r\n\t\r\n\t\t\tuniforms.pointLightColor.value = lights.point.colors;\r\n\t\t\tuniforms.pointLightPosition.value = lights.point.positions;\r\n\t\t\tuniforms.pointLightDistance.value = lights.point.distances;\r\n\t\t\tuniforms.pointLightDecay.value = lights.point.decays;\r\n\t\r\n\t\t\tuniforms.spotLightColor.value = lights.spot.colors;\r\n\t\t\tuniforms.spotLightPosition.value = lights.spot.positions;\r\n\t\t\tuniforms.spotLightDistance.value = lights.spot.distances;\r\n\t\t\tuniforms.spotLightDirection.value = lights.spot.directions;\r\n\t\t\tuniforms.spotLightAngleCos.value = lights.spot.anglesCos;\r\n\t\t\tuniforms.spotLightExponent.value = lights.spot.exponents;\r\n\t\t\tuniforms.spotLightDecay.value = lights.spot.decays;\r\n\t\r\n\t\t\tuniforms.hemisphereLightSkyColor.value = lights.hemi.skyColors;\r\n\t\t\tuniforms.hemisphereLightGroundColor.value = lights.hemi.groundColors;\r\n\t\t\tuniforms.hemisphereLightDirection.value = lights.hemi.positions;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\t\r\n\t\tfunction markUniformsLightsNeedsUpdate ( uniforms, value ) {\r\n\t\r\n\t\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\t\r\n\t\t\tuniforms.directionalLightColor.needsUpdate = value;\r\n\t\t\tuniforms.directionalLightDirection.needsUpdate = value;\r\n\t\r\n\t\t\tuniforms.pointLightColor.needsUpdate = value;\r\n\t\t\tuniforms.pointLightPosition.needsUpdate = value;\r\n\t\t\tuniforms.pointLightDistance.needsUpdate = value;\r\n\t\t\tuniforms.pointLightDecay.needsUpdate = value;\r\n\t\r\n\t\t\tuniforms.spotLightColor.needsUpdate = value;\r\n\t\t\tuniforms.spotLightPosition.needsUpdate = value;\r\n\t\t\tuniforms.spotLightDistance.needsUpdate = value;\r\n\t\t\tuniforms.spotLightDirection.needsUpdate = value;\r\n\t\t\tuniforms.spotLightAngleCos.needsUpdate = value;\r\n\t\t\tuniforms.spotLightExponent.needsUpdate = value;\r\n\t\t\tuniforms.spotLightDecay.needsUpdate = value;\r\n\t\r\n\t\t\tuniforms.hemisphereLightSkyColor.needsUpdate = value;\r\n\t\t\tuniforms.hemisphereLightGroundColor.needsUpdate = value;\r\n\t\t\tuniforms.hemisphereLightDirection.needsUpdate = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction refreshUniformsShadow ( uniforms, lights ) {\r\n\t\r\n\t\t\tif ( uniforms.shadowMatrix ) {\r\n\t\r\n\t\t\t\tvar j = 0;\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar light = lights[ i ];\r\n\t\r\n\t\t\t\t\tif ( ! light.castShadow ) continue;\r\n\t\r\n\t\t\t\t\tif ( light instanceof THREE.SpotLight || ( light instanceof THREE.DirectionalLight ) ) {\r\n\t\r\n\t\t\t\t\t\tuniforms.shadowMap.value[ j ] = light.shadowMap;\r\n\t\t\t\t\t\tuniforms.shadowMapSize.value[ j ] = light.shadowMapSize;\r\n\t\r\n\t\t\t\t\t\tuniforms.shadowMatrix.value[ j ] = light.shadowMatrix;\r\n\t\r\n\t\t\t\t\t\tuniforms.shadowDarkness.value[ j ] = light.shadowDarkness;\r\n\t\t\t\t\t\tuniforms.shadowBias.value[ j ] = light.shadowBias;\r\n\t\r\n\t\t\t\t\t\tj ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Uniforms (load to GPU)\r\n\t\r\n\t\tfunction loadUniformsMatrices ( uniforms, object ) {\r\n\t\r\n\t\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object.modelViewMatrix.elements );\r\n\t\r\n\t\t\tif ( uniforms.normalMatrix ) {\r\n\t\r\n\t\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object.normalMatrix.elements );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction getTextureUnit() {\r\n\t\r\n\t\t\tvar textureUnit = _usedTextureUnits;\r\n\t\r\n\t\t\tif ( textureUnit >= capabilities.maxTextures ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_usedTextureUnits += 1;\r\n\t\r\n\t\t\treturn textureUnit;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction loadUniformsGeneric ( uniforms ) {\r\n\t\r\n\t\t\tvar texture, textureUnit;\r\n\t\r\n\t\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\tvar uniform = uniforms[ j ][ 0 ];\r\n\t\r\n\t\t\t\t// needsUpdate property is not added to all uniforms.\r\n\t\t\t\tif ( uniform.needsUpdate === false ) continue;\r\n\t\r\n\t\t\t\tvar type = uniform.type;\r\n\t\t\t\tvar value = uniform.value;\r\n\t\t\t\tvar location = uniforms[ j ][ 1 ];\r\n\t\r\n\t\t\t\tswitch ( type ) {\r\n\t\r\n\t\t\t\t\tcase '1i':\r\n\t\t\t\t\t\t_gl.uniform1i( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '1f':\r\n\t\t\t\t\t\t_gl.uniform1f( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '2f':\r\n\t\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '3f':\r\n\t\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '4f':\r\n\t\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '1iv':\r\n\t\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '3iv':\r\n\t\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '1fv':\r\n\t\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '2fv':\r\n\t\t\t\t\t\t_gl.uniform2fv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '3fv':\r\n\t\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase '4fv':\r\n\t\t\t\t\t\t_gl.uniform4fv( location, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Matrix3fv':\r\n\t\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'Matrix4fv':\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t//\r\n\t\r\n\t\t\t\t\tcase 'i':\r\n\t\r\n\t\t\t\t\t\t// single integer\r\n\t\t\t\t\t\t_gl.uniform1i( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'f':\r\n\t\r\n\t\t\t\t\t\t// single float\r\n\t\t\t\t\t\t_gl.uniform1f( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v2':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Vector2\r\n\t\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v3':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Vector3\r\n\t\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v4':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Vector4\r\n\t\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'c':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Color\r\n\t\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'iv1':\r\n\t\r\n\t\t\t\t\t\t// flat array of integers (JS or typed array)\r\n\t\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'iv':\r\n\t\r\n\t\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\r\n\t\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'fv1':\r\n\t\r\n\t\t\t\t\t\t// flat array of floats (JS or typed array)\r\n\t\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'fv':\r\n\t\r\n\t\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\r\n\t\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v2v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Vector2\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, i2 = 0, il = value.length; i < il; i ++, i2 += 2 ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array[ i2 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\t\tuniform._array[ i2 + 1 ] = value[ i ].y;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v3v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Vector3\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, i3 = 0, il = value.length; i < il; i ++, i3 += 3 ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array[ i3 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\t\tuniform._array[ i3 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\t\tuniform._array[ i3 + 2 ] = value[ i ].z;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'v4v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Vector4\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, i4 = 0, il = value.length; i < il; i ++, i4 += 4 ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array[ i4 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\t\tuniform._array[ i4 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\t\tuniform._array[ i4 + 2 ] = value[ i ].z;\r\n\t\t\t\t\t\t\tuniform._array[ i4 + 3 ] = value[ i ].w;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'm3':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Matrix3\r\n\t\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'm3v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Matrix3\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'm4':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Matrix4\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'm4v':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Matrix4\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 't':\r\n\t\r\n\t\t\t\t\t\t// single THREE.Texture (2d or cube)\r\n\t\r\n\t\t\t\t\t\ttexture = value;\r\n\t\t\t\t\t\ttextureUnit = getTextureUnit();\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1i( location, textureUnit );\r\n\t\r\n\t\t\t\t\t\tif ( ! texture ) continue;\r\n\t\r\n\t\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t\t\t\t ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\t\r\n\t\t\t\t\t\t\t// CompressedTexture can have Array in image :/\r\n\t\r\n\t\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\t\r\n\t\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\t\r\n\t\t\t\t\t\t\tsetCubeTextureDynamic( texture, textureUnit );\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'tv':\r\n\t\r\n\t\t\t\t\t\t// array of THREE.Texture (2d)\r\n\t\r\n\t\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array = [];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\r\n\t\r\n\t\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\t\ttexture = uniform.value[ i ];\r\n\t\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\r\n\t\r\n\t\t\t\t\t\t\tif ( ! texture ) continue;\r\n\t\r\n\t\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tdefault:\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setColorLinear( array, offset, color, intensity ) {\r\n\t\r\n\t\t\tarray[ offset + 0 ] = color.r * intensity;\r\n\t\t\tarray[ offset + 1 ] = color.g * intensity;\r\n\t\t\tarray[ offset + 2 ] = color.b * intensity;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setupLights ( lights, camera ) {\r\n\t\r\n\t\t\tvar l, ll, light,\r\n\t\t\tr = 0, g = 0, b = 0,\r\n\t\t\tcolor, skyColor, groundColor,\r\n\t\t\tintensity,\r\n\t\t\tdistance,\r\n\t\r\n\t\t\tzlights = _lights,\r\n\t\r\n\t\t\tviewMatrix = camera.matrixWorldInverse,\r\n\t\r\n\t\t\tdirColors = zlights.directional.colors,\r\n\t\t\tdirPositions = zlights.directional.positions,\r\n\t\r\n\t\t\tpointColors = zlights.point.colors,\r\n\t\t\tpointPositions = zlights.point.positions,\r\n\t\t\tpointDistances = zlights.point.distances,\r\n\t\t\tpointDecays = zlights.point.decays,\r\n\t\r\n\t\t\tspotColors = zlights.spot.colors,\r\n\t\t\tspotPositions = zlights.spot.positions,\r\n\t\t\tspotDistances = zlights.spot.distances,\r\n\t\t\tspotDirections = zlights.spot.directions,\r\n\t\t\tspotAnglesCos = zlights.spot.anglesCos,\r\n\t\t\tspotExponents = zlights.spot.exponents,\r\n\t\t\tspotDecays = zlights.spot.decays,\r\n\t\r\n\t\t\themiSkyColors = zlights.hemi.skyColors,\r\n\t\t\themiGroundColors = zlights.hemi.groundColors,\r\n\t\t\themiPositions = zlights.hemi.positions,\r\n\t\r\n\t\t\tdirLength = 0,\r\n\t\t\tpointLength = 0,\r\n\t\t\tspotLength = 0,\r\n\t\t\themiLength = 0,\r\n\t\r\n\t\t\tdirCount = 0,\r\n\t\t\tpointCount = 0,\r\n\t\t\tspotCount = 0,\r\n\t\t\themiCount = 0,\r\n\t\r\n\t\t\tdirOffset = 0,\r\n\t\t\tpointOffset = 0,\r\n\t\t\tspotOffset = 0,\r\n\t\t\themiOffset = 0;\r\n\t\r\n\t\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\t\r\n\t\t\t\tlight = lights[ l ];\r\n\t\r\n\t\t\t\tif ( light.onlyShadow ) continue;\r\n\t\r\n\t\t\t\tcolor = light.color;\r\n\t\t\t\tintensity = light.intensity;\r\n\t\t\t\tdistance = light.distance;\r\n\t\r\n\t\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\tr += color.r;\r\n\t\t\t\t\tg += color.g;\r\n\t\t\t\t\tb += color.b;\r\n\t\r\n\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\t\r\n\t\t\t\t\tdirCount += 1;\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\t\r\n\t\t\t\t\tdirOffset = dirLength * 3;\r\n\t\r\n\t\t\t\t\tdirPositions[ dirOffset + 0 ] = _direction.x;\r\n\t\t\t\t\tdirPositions[ dirOffset + 1 ] = _direction.y;\r\n\t\t\t\t\tdirPositions[ dirOffset + 2 ] = _direction.z;\r\n\t\r\n\t\t\t\t\tsetColorLinear( dirColors, dirOffset, color, intensity );\r\n\t\r\n\t\t\t\t\tdirLength += 1;\r\n\t\r\n\t\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\t\r\n\t\t\t\t\tpointCount += 1;\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\tpointOffset = pointLength * 3;\r\n\t\r\n\t\t\t\t\tsetColorLinear( pointColors, pointOffset, color, intensity );\r\n\t\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t\t_vector3.applyMatrix4( viewMatrix );\r\n\t\r\n\t\t\t\t\tpointPositions[ pointOffset + 0 ] = _vector3.x;\r\n\t\t\t\t\tpointPositions[ pointOffset + 1 ] = _vector3.y;\r\n\t\t\t\t\tpointPositions[ pointOffset + 2 ] = _vector3.z;\r\n\t\r\n\t\t\t\t\t// distance is 0 if decay is 0, because there is no attenuation at all.\r\n\t\t\t\t\tpointDistances[ pointLength ] = distance;\r\n\t\t\t\t\tpointDecays[ pointLength ] = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\t\r\n\t\t\t\t\tpointLength += 1;\r\n\t\r\n\t\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\t\r\n\t\t\t\t\tspotCount += 1;\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\tspotOffset = spotLength * 3;\r\n\t\r\n\t\t\t\t\tsetColorLinear( spotColors, spotOffset, color, intensity );\r\n\t\r\n\t\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t\t_vector3.copy( _direction ).applyMatrix4( viewMatrix );\r\n\t\r\n\t\t\t\t\tspotPositions[ spotOffset + 0 ] = _vector3.x;\r\n\t\t\t\t\tspotPositions[ spotOffset + 1 ] = _vector3.y;\r\n\t\t\t\t\tspotPositions[ spotOffset + 2 ] = _vector3.z;\r\n\t\r\n\t\t\t\t\tspotDistances[ spotLength ] = distance;\r\n\t\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\t\r\n\t\t\t\t\tspotDirections[ spotOffset + 0 ] = _direction.x;\r\n\t\t\t\t\tspotDirections[ spotOffset + 1 ] = _direction.y;\r\n\t\t\t\t\tspotDirections[ spotOffset + 2 ] = _direction.z;\r\n\t\r\n\t\t\t\t\tspotAnglesCos[ spotLength ] = Math.cos( light.angle );\r\n\t\t\t\t\tspotExponents[ spotLength ] = light.exponent;\r\n\t\t\t\t\tspotDecays[ spotLength ] = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\t\r\n\t\t\t\t\tspotLength += 1;\r\n\t\r\n\t\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\t\r\n\t\t\t\t\themiCount += 1;\r\n\t\r\n\t\t\t\t\tif ( ! light.visible ) continue;\r\n\t\r\n\t\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\t\r\n\t\t\t\t\themiOffset = hemiLength * 3;\r\n\t\r\n\t\t\t\t\themiPositions[ hemiOffset + 0 ] = _direction.x;\r\n\t\t\t\t\themiPositions[ hemiOffset + 1 ] = _direction.y;\r\n\t\t\t\t\themiPositions[ hemiOffset + 2 ] = _direction.z;\r\n\t\r\n\t\t\t\t\tskyColor = light.color;\r\n\t\t\t\t\tgroundColor = light.groundColor;\r\n\t\r\n\t\t\t\t\tsetColorLinear( hemiSkyColors, hemiOffset, skyColor, intensity );\r\n\t\t\t\t\tsetColorLinear( hemiGroundColors, hemiOffset, groundColor, intensity );\r\n\t\r\n\t\t\t\t\themiLength += 1;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// null eventual remains from removed lights\r\n\t\t\t// (this is to avoid if in shader)\r\n\t\r\n\t\t\tfor ( l = dirLength * 3, ll = Math.max( dirColors.length, dirCount * 3 ); l < ll; l ++ ) dirColors[ l ] = 0.0;\r\n\t\t\tfor ( l = pointLength * 3, ll = Math.max( pointColors.length, pointCount * 3 ); l < ll; l ++ ) pointColors[ l ] = 0.0;\r\n\t\t\tfor ( l = spotLength * 3, ll = Math.max( spotColors.length, spotCount * 3 ); l < ll; l ++ ) spotColors[ l ] = 0.0;\r\n\t\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiSkyColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiSkyColors[ l ] = 0.0;\r\n\t\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiGroundColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiGroundColors[ l ] = 0.0;\r\n\t\r\n\t\t\tzlights.directional.length = dirLength;\r\n\t\t\tzlights.point.length = pointLength;\r\n\t\t\tzlights.spot.length = spotLength;\r\n\t\t\tzlights.hemi.length = hemiLength;\r\n\t\r\n\t\t\tzlights.ambient[ 0 ] = r;\r\n\t\t\tzlights.ambient[ 1 ] = g;\r\n\t\t\tzlights.ambient[ 2 ] = b;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// GL state setting\r\n\t\r\n\t\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\t\r\n\t\t\tif ( cullFace === THREE.CullFaceNone ) {\r\n\t\r\n\t\t\t\tstate.disable( _gl.CULL_FACE );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\r\n\t\r\n\t\t\t\t\t_gl.frontFace( _gl.CW );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\t\r\n\t\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\t\r\n\t\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\t\r\n\t\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tstate.enable( _gl.CULL_FACE );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Textures\r\n\t\r\n\t\tfunction setTextureParameters ( textureType, texture, isImagePowerOfTwo ) {\r\n\t\r\n\t\t\tvar extension;\r\n\t\r\n\t\t\tif ( isImagePowerOfTwo ) {\r\n\t\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\t\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\t\r\n\t\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( ' + texture.sourceFile + ' )' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\t\r\n\t\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( ' + texture.sourceFile + ' )' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\t\r\n\t\t\tif ( extension ) {\r\n\t\r\n\t\t\t\tif ( texture.type === THREE.FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\t\tif ( texture.type === THREE.HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\t\r\n\t\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\t\r\n\t\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\t\r\n\t\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\t\r\n\t\t\t\ttextureProperties.__webglInit = true;\r\n\t\r\n\t\t\t\ttexture.__webglInit = true;\r\n\t\r\n\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\t\r\n\t\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\t\r\n\t\t\t\t_infoMemory.textures ++;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\t\r\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\t\r\n\t\t\ttexture.image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\t\r\n\t\t\tvar image = texture.image,\r\n\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\tglType = paramThreeToGL( texture.type );\r\n\t\r\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isImagePowerOfTwo );\r\n\t\r\n\t\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\t\r\n\t\t\tif ( texture instanceof THREE.DataTexture ) {\r\n\t\r\n\t\t\t\t// use manually created mipmaps if available\r\n\t\t\t\t// if there are no manual mipmaps\r\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\t\r\n\t\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttexture.generateMipmaps = false;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\r\n\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\t\r\n\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\t\r\n\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// regular Texture (image, video, canvas)\r\n\t\r\n\t\t\t\t// use manually created mipmaps if available\r\n\t\t\t\t// if there are no manual mipmaps\r\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\t\r\n\t\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\t\r\n\t\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttexture.generateMipmaps = false;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\r\n\t\t\ttextureProperties.__version = texture.version;\r\n\t\r\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setTexture = function ( texture, slot ) {\r\n\t\r\n\t\t\tvar textureProperties = properties.get( texture );\r\n\t\r\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\t\r\n\t\t\t\tvar image = texture.image;\r\n\t\r\n\t\t\t\tif ( image === undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( image.complete === false ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction clampToMaxSize ( image, maxSize ) {\r\n\t\r\n\t\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\t\r\n\t\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t\t// premultiplied alpha.\r\n\t\r\n\t\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\t\r\n\t\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\t\r\n\t\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\t\r\n\t\t\t\treturn canvas;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn image;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setCubeTexture ( texture, slot ) {\r\n\t\r\n\t\t\tvar textureProperties = properties.get( texture );\r\n\t\r\n\t\t\tif ( texture.image.length === 6 ) {\r\n\t\r\n\t\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\t\r\n\t\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\r\n\t\r\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\t\r\n\t\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\t\r\n\t\t\t\t\t\t_infoMemory.textures ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\t\r\n\t\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\r\n\t\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\t\r\n\t\t\t\t\tvar cubeImage = [];\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\t\r\n\t\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\t\r\n\t\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isImagePowerOfTwo );\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tif ( ! isCompressed ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( isDataTexture ) {\r\n\t\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\t\r\n\t\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\t\r\n\t\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\t\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()\" );\r\n\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) {\r\n\t\r\n\t\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\ttextureProperties.__version = texture.version;\r\n\t\r\n\t\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setCubeTextureDynamic ( texture, slot ) {\r\n\t\r\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Render targets\r\n\t\r\n\t\tfunction setupFrameBuffer ( framebuffer, renderTarget, textureTarget ) {\r\n\t\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureTarget, properties.get( renderTarget ).__webglTexture, 0 );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction setupRenderBuffer ( renderbuffer, renderTarget ) {\r\n\t\r\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\t\r\n\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\r\n\t\t\t/* For some reason this is not working. Defaulting to RGBA4.\r\n\t\t\t} else if ( ! renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.STENCIL_INDEX8, renderTarget.width, renderTarget.height );\r\n\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\t\t*/\r\n\t\r\n\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setRenderTarget = function ( renderTarget ) {\r\n\t\r\n\t\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\t\r\n\t\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\t\r\n\t\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\r\n\t\t\t\tif ( renderTarget.depthBuffer === undefined ) renderTarget.depthBuffer = true;\r\n\t\t\t\tif ( renderTarget.stencilBuffer === undefined ) renderTarget.stencilBuffer = true;\r\n\t\r\n\t\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\t\r\n\t\t\t\trenderTargetProperties.__webglTexture = _gl.createTexture();\r\n\t\r\n\t\t\t\t_infoMemory.textures ++;\r\n\t\r\n\t\t\t\t// Setup texture, create render and frame buffers\r\n\t\r\n\t\t\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height ),\r\n\t\t\t\t\tglFormat = paramThreeToGL( renderTarget.format ),\r\n\t\t\t\t\tglType = paramThreeToGL( renderTarget.type );\r\n\t\r\n\t\t\t\tif ( isCube ) {\r\n\t\r\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = [];\r\n\t\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTargetProperties.__webglTexture );\r\n\t\r\n\t\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget, isTargetPowerOfTwo );\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\t\r\n\t\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\t\t\t\t\t\trenderTargetProperties.__webglRenderbuffer[ i ] = _gl.createRenderbuffer();\r\n\t\r\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\r\n\t\t\t\t\t\tsetupFrameBuffer( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\t\t\t\t\t\tsetupRenderBuffer( renderTargetProperties.__webglRenderbuffer[ i ], renderTarget );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( renderTarget.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\t\r\n\t\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\t\r\n\t\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = renderTarget.shareDepthFrom.__webglRenderbuffer;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = _gl.createRenderbuffer();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, renderTargetProperties.__webglTexture );\r\n\t\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget, isTargetPowerOfTwo );\r\n\t\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\t\r\n\t\t\t\t\tsetupFrameBuffer( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.TEXTURE_2D );\r\n\t\r\n\t\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\t\r\n\t\t\t\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderTargetProperties.__webglRenderbuffer );\r\n\t\r\n\t\t\t\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\t\r\n\t\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderTargetProperties.__webglRenderbuffer );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tsetupRenderBuffer( renderTargetProperties.__webglRenderbuffer, renderTarget );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( renderTarget.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Release everything\r\n\t\r\n\t\t\t\tif ( isCube ) {\r\n\t\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar framebuffer, width, height, vx, vy;\r\n\t\r\n\t\t\tif ( renderTarget ) {\r\n\t\r\n\t\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\t\r\n\t\t\t\tif ( isCube ) {\r\n\t\r\n\t\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\twidth = renderTarget.width;\r\n\t\t\t\theight = renderTarget.height;\r\n\t\r\n\t\t\t\tvx = 0;\r\n\t\t\t\tvy = 0;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tframebuffer = null;\r\n\t\r\n\t\t\t\twidth = _viewportWidth;\r\n\t\t\t\theight = _viewportHeight;\r\n\t\r\n\t\t\t\tvx = _viewportX;\r\n\t\t\t\tvy = _viewportY;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\t\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t\t_gl.viewport( vx, vy, width, height );\r\n\t\r\n\t\t\t\t_currentFramebuffer = framebuffer;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_currentWidth = width;\r\n\t\t\t_currentHeight = height;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.readRenderTargetPixels = function( renderTarget, x, y, width, height, buffer ) {\r\n\t\r\n\t\t\tif ( ! ( renderTarget instanceof THREE.WebGLRenderTarget ) ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( properties.get( renderTarget ).__webglFramebuffer ) {\r\n\t\r\n\t\t\t\tif ( renderTarget.format !== THREE.RGBAFormat ) {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.' );\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar restore = false;\r\n\t\r\n\t\t\t\tif ( properties.get( renderTarget ).__webglFramebuffer !== _currentFramebuffer ) {\r\n\t\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, properties.get( renderTarget ).__webglFramebuffer );\r\n\t\r\n\t\t\t\t\trestore = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\t\r\n\t\t\t\t\t_gl.readPixels( x, y, width, height, _gl.RGBA, _gl.UNSIGNED_BYTE, buffer );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( restore ) {\r\n\t\r\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction updateRenderTargetMipmap ( renderTarget ) {\r\n\t\r\n\t\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\t\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( renderTarget ).__webglTexture );\r\n\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, properties.get( renderTarget ).__webglTexture );\r\n\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Fallback filters for non-power-of-2 textures\r\n\t\r\n\t\tfunction filterFallback ( f ) {\r\n\t\r\n\t\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\t\r\n\t\t\t\treturn _gl.NEAREST;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn _gl.LINEAR;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Map three.js constants to WebGL constants\r\n\t\r\n\t\tfunction paramThreeToGL ( p ) {\r\n\t\r\n\t\t\tvar extension;\r\n\t\r\n\t\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\t\r\n\t\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\t\r\n\t\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\t\r\n\t\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\t\r\n\t\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\t\r\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\t\r\n\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\tif ( p === THREE.HalfFloatType ) return extension.HALF_FLOAT_OES;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\t\r\n\t\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\t\r\n\t\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\t\r\n\t\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\t\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\t\r\n\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\t\r\n\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\t\r\n\t\t\tif ( extension !== null ) {\r\n\t\r\n\t\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn 0;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// DEPRECATED\r\n\t\r\n\t\tthis.supportsFloatTextures = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\t\treturn extensions.get( 'OES_texture_float' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsHalfFloatTextures = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\t\treturn extensions.get( 'OES_texture_half_float' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsStandardDerivatives = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\t\treturn extensions.get( 'OES_standard_derivatives' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsCompressedTextureS3TC = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\t\treturn extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsCompressedTexturePVRTC = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\t\treturn extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsBlendMinMax = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\t\treturn extensions.get( 'EXT_blend_minmax' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsVertexTextures = function () {\r\n\t\r\n\t\t\treturn capabilities.vertexTextures;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.supportsInstancedArrays = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\t\treturn extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t//\r\n\t\r\n\t\tthis.initMaterial = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.addPrePlugin = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.addPostPlugin = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.updateShadowMap = function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tObject.defineProperties( this, {\r\n\t\t\tshadowMapEnabled: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\treturn shadowMap.enabled;\r\n\t\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( value ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\t\t\tshadowMap.enabled = value;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshadowMapType: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\treturn shadowMap.type;\r\n\t\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( value ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\t\t\tshadowMap.type = value;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshadowMapCullFace: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\treturn shadowMap.cullFace;\r\n\t\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( value ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\r\n\t\t\t\t\tshadowMap.cullFace = value;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshadowMapDebug: {\r\n\t\t\t\tget: function () {\r\n\t\r\n\t\t\t\t\treturn shadowMap.debug;\r\n\t\r\n\t\t\t\t},\r\n\t\t\t\tset: function ( value ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug.' );\r\n\t\t\t\t\tshadowMap.debug = value;\r\n\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/WebGLRenderTarget.js\r\n\t\r\n\t/**\r\n\t * @author szimek / https://github.com/szimek/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\t\r\n\t\tthis.uuid = THREE.Math.generateUUID();\r\n\t\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\r\n\t\toptions = options || {};\r\n\t\r\n\t\tthis.wrapS = options.wrapS !== undefined ? options.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\tthis.wrapT = options.wrapT !== undefined ? options.wrapT : THREE.ClampToEdgeWrapping;\r\n\t\r\n\t\tthis.magFilter = options.magFilter !== undefined ? options.magFilter : THREE.LinearFilter;\r\n\t\tthis.minFilter = options.minFilter !== undefined ? options.minFilter : THREE.LinearMipMapLinearFilter;\r\n\t\r\n\t\tthis.anisotropy = options.anisotropy !== undefined ? options.anisotropy : 1;\r\n\t\r\n\t\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\t\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\t\r\n\t\tthis.format = options.format !== undefined ? options.format : THREE.RGBAFormat;\r\n\t\tthis.type = options.type !== undefined ? options.type : THREE.UnsignedByteType;\r\n\t\r\n\t\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\t\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\t\r\n\t\tthis.generateMipmaps = true;\r\n\t\r\n\t\tthis.shareDepthFrom = options.shareDepthFrom !== undefined ? options.shareDepthFrom : null;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.WebGLRenderTarget.prototype = {\r\n\t\r\n\t\tconstructor: THREE.WebGLRenderTarget,\r\n\t\r\n\t\tsetSize: function ( width, height ) {\r\n\t\r\n\t\t\tif ( this.width !== width || this.height !== height ) {\r\n\t\r\n\t\t\t\tthis.width = width;\r\n\t\t\t\tthis.height = height;\r\n\t\r\n\t\t\t\tthis.dispose();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tclone: function () {\r\n\t\r\n\t\t\treturn new this.constructor().copy( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcopy: function ( source ) {\r\n\t\r\n\t\t\tthis.width = source.width;\r\n\t\t\tthis.height = source.height;\r\n\t\r\n\t\t\tthis.wrapS = source.wrapS;\r\n\t\t\tthis.wrapT = source.wrapT;\r\n\t\r\n\t\t\tthis.magFilter = source.magFilter;\r\n\t\t\tthis.minFilter = source.minFilter;\r\n\t\r\n\t\t\tthis.anisotropy = source.anisotropy;\r\n\t\r\n\t\t\tthis.offset.copy( source.offset );\r\n\t\t\tthis.repeat.copy( source.repeat );\r\n\t\r\n\t\t\tthis.format = source.format;\r\n\t\t\tthis.type = source.type;\r\n\t\r\n\t\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\t\r\n\t\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\r\n\t\t\tthis.shareDepthFrom = source.shareDepthFrom;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdispose: function () {\r\n\t\r\n\t\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\r\n\t\r\n\t// File:src/renderers/WebGLRenderTargetCube.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com\r\n\t */\r\n\t\r\n\tTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\t\r\n\t\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\t\r\n\t\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\n\tTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\r\n\t\r\n\t// File:src/renderers/webgl/WebGLBufferRenderer.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\t\r\n\t\tvar mode;\r\n\t\r\n\t\tfunction setMode( value ) {\r\n\t\r\n\t\t\tmode = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction render( start, count ) {\r\n\t\r\n\t\t\t_gl.drawArrays( mode, start, count );\r\n\t\r\n\t\t\t_infoRender.calls ++;\r\n\t\t\t_infoRender.vertices += count;\r\n\t\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction renderInstances( geometry ) {\r\n\t\r\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar position = geometry.attributes.position;\r\n\t\r\n\t\t\tif ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\textension.drawArraysInstancedANGLE( mode, 0, position.data.count, geometry.maxInstancedCount );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\textension.drawArraysInstancedANGLE( mode, 0, position.count, geometry.maxInstancedCount );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setMode = setMode;\r\n\t\tthis.render = render;\r\n\t\tthis.renderInstances = renderInstances;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLIndexedBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\t\r\n\t\tvar mode;\r\n\t\r\n\t\tfunction setMode( value ) {\r\n\t\r\n\t\t\tmode = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar type, size;\r\n\t\r\n\t\tfunction setIndex( index ) {\r\n\t\r\n\t\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\t\r\n\t\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\t\tsize = 4;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\t\tsize = 2;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction render( start, count ) {\r\n\t\r\n\t\t\t_gl.drawElements( mode, count, type, start * size );\r\n\t\r\n\t\t\t_infoRender.calls ++;\r\n\t\t\t_infoRender.vertices += count;\r\n\t\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction renderInstances( geometry ) {\r\n\t\r\n\t\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\t\r\n\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar index = geometry.index;\r\n\t\r\n\t\t\textension.drawElementsInstancedANGLE( mode, index.array.length, type, 0, geometry.maxInstancedCount );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setMode = setMode;\r\n\t\tthis.setIndex = setIndex;\r\n\t\tthis.render = render;\r\n\t\tthis.renderInstances = renderInstances;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLExtensions.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLExtensions = function ( gl ) {\r\n\t\r\n\t\tvar extensions = {};\r\n\t\r\n\t\tthis.get = function ( name ) {\r\n\t\r\n\t\t\tif ( extensions[ name ] !== undefined ) {\r\n\t\r\n\t\t\t\treturn extensions[ name ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar extension;\r\n\t\r\n\t\t\tswitch ( name ) {\r\n\t\r\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\tdefault:\r\n\t\t\t\t\textension = gl.getExtension( name );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( extension === null ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\textensions[ name ] = extension;\r\n\t\r\n\t\t\treturn extension;\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLCapabilities.js\r\n\t\r\n\tTHREE.WebGLCapabilities = function ( gl, extensions, parameters ) {\r\n\t\r\n\t\tfunction getMaxPrecision( precision ) {\r\n\t\r\n\t\t\tif ( precision === 'highp' ) {\r\n\t\r\n\t\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n\t\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\t\r\n\t\t\t\t\treturn 'highp';\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tprecision = 'mediump';\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( precision === 'mediump' ) {\r\n\t\r\n\t\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n\t\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\t\r\n\t\t\t\t\treturn 'mediump';\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn 'lowp';\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.getMaxPrecision = getMaxPrecision;\r\n\t\r\n\t\tthis.precision = parameters.precision !== undefined ? parameters.precision : 'highp',\r\n\t\tthis.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false;\r\n\t\r\n\t\tthis.maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\t\tthis.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\t\tthis.maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n\t\tthis.maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\t\r\n\t\tthis.maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\t\tthis.maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\t\tthis.maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n\t\tthis.maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\t\r\n\t\tthis.vertexTextures = this.maxVertexTextures > 0;\r\n\t\tthis.floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n\t\tthis.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\r\n\t\r\n\t\tvar _maxPrecision = getMaxPrecision( this.precision );\r\n\t\r\n\t\tif ( _maxPrecision !== this.precision ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer:', this.precision, 'not supported, using', _maxPrecision, 'instead.' );\r\n\t\t\tthis.precision = _maxPrecision;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tif ( this.logarithmicDepthBuffer ) {\r\n\t\r\n\t\t\tthis.logarithmicDepthBuffer = !! extensions.get( 'EXT_frag_depth' );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLGeometries.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLGeometries = function ( gl, properties, info ) {\r\n\t\r\n\t\tvar geometries = {};\r\n\t\r\n\t\tfunction get( object ) {\r\n\t\r\n\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\tif ( geometries[ geometry.id ] !== undefined ) {\r\n\t\r\n\t\t\t\treturn geometries[ geometry.id ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\t\r\n\t\t\tvar buffergeometry;\r\n\t\r\n\t\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tbuffergeometry = geometry;\r\n\t\r\n\t\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\t\r\n\t\t\t\t\tgeometry._bufferGeometry = new THREE.BufferGeometry().setFromObject( object );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgeometries[ geometry.id ] = buffergeometry;\r\n\t\r\n\t\t\tinfo.memory.geometries ++;\r\n\t\r\n\t\t\treturn buffergeometry;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction onGeometryDispose( event ) {\r\n\t\r\n\t\t\tvar geometry = event.target;\r\n\t\t\tvar buffergeometry = geometries[ geometry.id ];\r\n\t\r\n\t\t\tdeleteAttributes( buffergeometry.attributes );\r\n\t\r\n\t\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\t\r\n\t\t\tdelete geometries[ geometry.id ];\r\n\t\r\n\t\t\tvar property = properties.get( geometry );\r\n\t\t\tif ( property.wireframe ) deleteAttribute( property.wireframe );\r\n\t\r\n\t\t\tinfo.memory.geometries --;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction getAttributeBuffer( attribute ) {\r\n\t\r\n\t\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn properties.get( attribute ).__webglBuffer;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction deleteAttribute( attribute ) {\r\n\t\r\n\t\t\tvar buffer = getAttributeBuffer( attribute );\r\n\t\r\n\t\t\tif ( buffer !== undefined ) {\r\n\t\r\n\t\t\t\tgl.deleteBuffer( buffer );\r\n\t\t\t\tremoveAttributeBuffer( attribute );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction deleteAttributes( attributes ) {\r\n\t\r\n\t\t\tfor ( var name in attributes ) {\r\n\t\r\n\t\t\t\tdeleteAttribute( attributes[ name ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction removeAttributeBuffer( attribute ) {\r\n\t\r\n\t\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\tproperties.delete( attribute.data );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tproperties.delete( attribute );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.get = get;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLObjects.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLObjects = function ( gl, properties, info ) {\r\n\t\r\n\t\tvar geometries = new THREE.WebGLGeometries( gl, properties, info );\r\n\t\r\n\t\t//\r\n\t\r\n\t\tfunction update( object ) {\r\n\t\r\n\t\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\r\n\t\r\n\t\t\tvar geometry = geometries.get( object );\r\n\t\r\n\t\t\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tgeometry.updateFromObject( object );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var name in attributes ) {\r\n\t\r\n\t\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// morph targets\r\n\t\r\n\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\t\r\n\t\t\tfor ( var name in morphAttributes ) {\r\n\t\r\n\t\t\t\tvar array = morphAttributes[ name ];\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn geometry;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction updateAttribute( attribute, bufferType ) {\r\n\t\r\n\t\t\tvar data = ( attribute instanceof THREE.InterleavedBufferAttribute ) ? attribute.data : attribute;\r\n\t\r\n\t\t\tvar attributeProperties = properties.get( data );\r\n\t\r\n\t\t\tif ( attributeProperties.__webglBuffer === undefined ) {\r\n\t\r\n\t\t\t\tcreateBuffer( attributeProperties, data, bufferType );\r\n\t\r\n\t\t\t} else if ( attributeProperties.version !== data.version ) {\r\n\t\r\n\t\t\t\tupdateBuffer( attributeProperties, data, bufferType );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction createBuffer( attributeProperties, data, bufferType ) {\r\n\t\r\n\t\t\tattributeProperties.__webglBuffer = gl.createBuffer();\r\n\t\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\t\r\n\t\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\t\r\n\t\t\tgl.bufferData( bufferType, data.array, usage );\r\n\t\r\n\t\t\tattributeProperties.version = data.version;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction updateBuffer( attributeProperties, data, bufferType ) {\r\n\t\r\n\t\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\t\r\n\t\t\tif ( data.dynamic === false || data.updateRange.count === - 1 ) {\r\n\t\r\n\t\t\t\t// Not using update ranges\r\n\t\r\n\t\t\t\tgl.bufferSubData( bufferType, 0, data.array );\r\n\t\r\n\t\t\t} else if ( data.updateRange.count === 0 ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\r\n\t\r\n\t\t\t\tdata.updateRange.count = 0; // reset range\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tattributeProperties.version = data.version;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction getAttributeBuffer( attribute ) {\r\n\t\r\n\t\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\t\r\n\t\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn properties.get( attribute ).__webglBuffer;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction getWireframeAttribute( geometry ) {\r\n\t\r\n\t\t\tvar property = properties.get( geometry );\r\n\t\r\n\t\t\tif ( property.wireframe !== undefined ) {\r\n\t\r\n\t\t\t\treturn property.wireframe;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar indices = [];\r\n\t\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar position = attributes.position;\r\n\t\r\n\t\t\t// console.time( 'wireframe' );\r\n\t\r\n\t\t\tif ( index !== null ) {\r\n\t\r\n\t\t\t\tvar edges = {};\r\n\t\t\t\tvar array = index.array;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\t\r\n\t\t\t\t\tvar a = array[ i + 0 ];\r\n\t\t\t\t\tvar b = array[ i + 1 ];\r\n\t\t\t\t\tvar c = array[ i + 2 ];\r\n\t\r\n\t\t\t\t\tif ( checkEdge( edges, a, b ) ) indices.push( a, b );\r\n\t\t\t\t\tif ( checkEdge( edges, b, c ) ) indices.push( b, c );\r\n\t\t\t\t\tif ( checkEdge( edges, c, a ) ) indices.push( c, a );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tvar array = attributes.position.array;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\t\r\n\t\t\t\t\tvar a = i + 0;\r\n\t\t\t\t\tvar b = i + 1;\r\n\t\t\t\t\tvar c = i + 2;\r\n\t\r\n\t\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// console.timeEnd( 'wireframe' );\r\n\t\r\n\t\t\tvar TypeArray = position.count > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\tvar attribute = new THREE.BufferAttribute( new TypeArray( indices ), 1 );\r\n\t\r\n\t\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\t\r\n\t\t\tproperty.wireframe = attribute;\r\n\t\r\n\t\t\treturn attribute;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction checkEdge( edges, a, b ) {\r\n\t\r\n\t\t\tif ( a > b ) {\r\n\t\r\n\t\t\t\tvar tmp = a;\r\n\t\t\t\ta = b;\r\n\t\t\t\tb = tmp;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar list = edges[ a ];\r\n\t\r\n\t\t\tif ( list === undefined ) {\r\n\t\r\n\t\t\t\tedges[ a ] = [ b ];\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t} else if ( list.indexOf( b ) === -1 ) {\r\n\t\r\n\t\t\t\tlist.push( b );\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn false;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.getAttributeBuffer = getAttributeBuffer;\r\n\t\tthis.getWireframeAttribute = getWireframeAttribute;\r\n\t\r\n\t\tthis.update = update;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLProgram.js\r\n\t\r\n\tTHREE.WebGLProgram = ( function () {\r\n\t\r\n\t\tvar programIdCount = 0;\r\n\t\r\n\t\tfunction generateDefines( defines ) {\r\n\t\r\n\t\t\tvar chunks = [];\r\n\t\r\n\t\t\tfor ( var name in defines ) {\r\n\t\r\n\t\t\t\tvar value = defines[ name ];\r\n\t\r\n\t\t\t\tif ( value === false ) continue;\r\n\t\r\n\t\t\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn chunks.join( '\\n' );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction fetchUniformLocations( gl, program, identifiers ) {\r\n\t\r\n\t\t\tvar uniforms = {};\r\n\t\r\n\t\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\t\r\n\t\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\t\r\n\t\t\t\tvar info = gl.getActiveUniform( program, i );\r\n\t\t\t\tvar name = info.name;\r\n\t\t\t\tvar location = gl.getUniformLocation( program, name );\r\n\t\r\n\t\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE UNIFORM:\", name);\r\n\t\r\n\t\t\t\tvar suffixPos = name.lastIndexOf( '[0]' );\r\n\t\t\t\tif ( suffixPos !== - 1 && suffixPos === name.length - 3 ) {\r\n\t\r\n\t\t\t\t\tuniforms[ name.substr( 0, suffixPos ) ] = location;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tuniforms[ name ] = location;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn uniforms;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction fetchAttributeLocations( gl, program, identifiers ) {\r\n\t\r\n\t\t\tvar attributes = {};\r\n\t\r\n\t\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\t\r\n\t\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\t\r\n\t\t\t\tvar info = gl.getActiveAttrib( program, i );\r\n\t\t\t\tvar name = info.name;\r\n\t\r\n\t\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\r\n\t\r\n\t\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn attributes;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction filterEmptyLine( string ) {\r\n\t\r\n\t\t\treturn string !== '';\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn function WebGLProgram( renderer, code, material, parameters ) {\r\n\t\r\n\t\t\tvar gl = renderer.context;\r\n\t\r\n\t\t\tvar defines = material.defines;\r\n\t\r\n\t\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\t\r\n\t\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\t\r\n\t\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\t\r\n\t\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\t\r\n\t\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\t\r\n\t\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\t\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\r\n\t\t\tif ( parameters.envMap ) {\r\n\t\r\n\t\t\t\tswitch ( material.envMap.mapping ) {\r\n\t\r\n\t\t\t\t\tcase THREE.CubeReflectionMapping:\r\n\t\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.EquirectangularReflectionMapping:\r\n\t\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.SphericalReflectionMapping:\r\n\t\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tswitch ( material.envMap.mapping ) {\r\n\t\r\n\t\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tswitch ( material.combine ) {\r\n\t\r\n\t\t\t\t\tcase THREE.MultiplyOperation:\r\n\t\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.MixOperation:\r\n\t\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase THREE.AddOperation:\r\n\t\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\t\r\n\t\t\t// console.log( 'building new program ' );\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar customDefines = generateDefines( defines );\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar program = gl.createProgram();\r\n\t\r\n\t\t\tvar prefixVertex, prefixFragment;\r\n\t\r\n\t\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\t\r\n\t\t\t\tprefixVertex = '';\r\n\t\t\t\tprefixFragment = '';\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tprefixVertex = [\r\n\t\r\n\t\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\t\r\n\t\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\t\r\n\t\t\t\t\tcustomDefines,\r\n\t\r\n\t\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\t\r\n\t\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\t\r\n\t\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\t\r\n\t\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\t\r\n\t\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\t\r\n\t\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\r\n\t\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\t\r\n\t\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\t\r\n\t\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\t\r\n\t\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\t\r\n\t\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\t\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\t\r\n\t\r\n\t\t\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t\t\t'uniform vec3 cameraPosition;',\r\n\t\r\n\t\t\t\t\t'attribute vec3 position;',\r\n\t\t\t\t\t'attribute vec3 normal;',\r\n\t\t\t\t\t'attribute vec2 uv;',\r\n\t\r\n\t\t\t\t\t'#ifdef USE_COLOR',\r\n\t\r\n\t\t\t\t\t'\tattribute vec3 color;',\r\n\t\r\n\t\t\t\t\t'#endif',\r\n\t\r\n\t\t\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\t\r\n\t\t\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t\t\t'\tattribute vec3 morphTarget3;',\r\n\t\r\n\t\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\t\r\n\t\t\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\t\r\n\t\t\t\t\t'\t#else',\r\n\t\r\n\t\t\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\t\r\n\t\t\t\t\t'\t#endif',\r\n\t\r\n\t\t\t\t\t'#endif',\r\n\t\r\n\t\t\t\t\t'#ifdef USE_SKINNING',\r\n\t\r\n\t\t\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t\t\t'\tattribute vec4 skinWeight;',\r\n\t\r\n\t\t\t\t\t'#endif',\r\n\t\r\n\t\t\t\t\t'\\n'\r\n\t\r\n\t\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\t\r\n\t\t\t\tprefixFragment = [\r\n\t\r\n\t\t\t\t\tparameters.bumpMap || parameters.normalMap || parameters.flatShading || material.derivatives ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\t\r\n\t\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\t\r\n\t\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\t\r\n\t\t\t\t\tcustomDefines,\r\n\t\r\n\t\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\t\r\n\t\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\t\r\n\t\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\r\n\t\r\n\t\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\t\r\n\t\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\t\r\n\t\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\t\r\n\t\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\t\r\n\t\t\t\t\tparameters.metal ? '#define METAL' : '',\r\n\t\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\t\r\n\t\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\t\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\t\r\n\t\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t\t'uniform vec3 cameraPosition;',\r\n\t\r\n\t\t\t\t\t'\\n'\r\n\t\r\n\t\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar vertexGlsl = prefixVertex + vertexShader;\r\n\t\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\r\n\t\r\n\t\t\tvar glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n\t\t\tvar glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\t\r\n\t\t\tgl.attachShader( program, glVertexShader );\r\n\t\t\tgl.attachShader( program, glFragmentShader );\r\n\t\r\n\t\t\t// Force a particular attribute to index 0.\r\n\t\r\n\t\t\tif ( material.index0AttributeName !== undefined ) {\r\n\t\r\n\t\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\t\r\n\t\t\t} else if ( parameters.morphTargets === true ) {\r\n\t\r\n\t\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\t\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgl.linkProgram( program );\r\n\t\r\n\t\t\tvar programLog = gl.getProgramInfoLog( program );\r\n\t\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\r\n\t\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\r\n\t\r\n\t\t\tvar runnable = true;\r\n\t\t\tvar haveDiagnostics = true;\r\n\t\r\n\t\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\t\r\n\t\t\t\trunnable = false;\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\t\r\n\t\t\t} else if ( programLog !== '' ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\t\r\n\t\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\t\r\n\t\t\t\thaveDiagnostics = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( haveDiagnostics ) {\r\n\t\r\n\t\t\t\tthis.diagnostics = {\r\n\t\r\n\t\t\t\t\trunnable: runnable,\r\n\t\t\t\t\tmaterial: material,\r\n\t\r\n\t\t\t\t\tprogramLog: programLog,\r\n\t\r\n\t\t\t\t\tvertexShader: {\r\n\t\r\n\t\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\t\tprefix: prefixVertex\r\n\t\r\n\t\t\t\t\t},\r\n\t\r\n\t\t\t\t\tfragmentShader: {\r\n\t\r\n\t\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\t\tprefix: prefixFragment\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// clean up\r\n\t\r\n\t\t\tgl.deleteShader( glVertexShader );\r\n\t\t\tgl.deleteShader( glFragmentShader );\r\n\t\r\n\t\t\t// set up caching for uniform locations\r\n\t\r\n\t\t\tvar cachedUniforms;\r\n\t\r\n\t\t\tthis.getUniforms = function() {\r\n\t\r\n\t\t\t\tif ( cachedUniforms === undefined ) {\r\n\t\r\n\t\t\t\t\tcachedUniforms = fetchUniformLocations( gl, program );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn cachedUniforms;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\t// set up caching for attribute locations\r\n\t\r\n\t\t\tvar cachedAttributes;\r\n\t\r\n\t\t\tthis.getAttributes = function() {\r\n\t\r\n\t\t\t\tif ( cachedAttributes === undefined ) {\r\n\t\r\n\t\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn cachedAttributes;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\t// free resource\r\n\t\r\n\t\t\tthis.destroy = function() {\r\n\t\r\n\t\t\t\tgl.deleteProgram( program );\r\n\t\t\t\tthis.program = undefined;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\t// DEPRECATED\r\n\t\r\n\t\t\tObject.defineProperties( this, {\r\n\t\r\n\t\t\t\tuniforms: {\r\n\t\t\t\t\tget: function() {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n\t\t\t\t\t\treturn this.getUniforms();\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\r\n\t\t\t\tattributes: {\r\n\t\t\t\t\tget: function() {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n\t\t\t\t\t\treturn this.getAttributes();\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tthis.id = programIdCount ++;\r\n\t\t\tthis.code = code;\r\n\t\t\tthis.usedTimes = 1;\r\n\t\t\tthis.program = program;\r\n\t\t\tthis.vertexShader = glVertexShader;\r\n\t\t\tthis.fragmentShader = glFragmentShader;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/renderers/webgl/WebGLPrograms.js\r\n\t\r\n\tTHREE.WebGLPrograms = function ( renderer, capabilities ) {\r\n\t\r\n\t\tvar programs = [];\r\n\t\r\n\t\tvar shaderIDs = {\r\n\t\t\tMeshDepthMaterial: 'depth',\r\n\t\t\tMeshNormalMaterial: 'normal',\r\n\t\t\tMeshBasicMaterial: 'basic',\r\n\t\t\tMeshLambertMaterial: 'lambert',\r\n\t\t\tMeshPhongMaterial: 'phong',\r\n\t\t\tLineBasicMaterial: 'basic',\r\n\t\t\tLineDashedMaterial: 'dashed',\r\n\t\t\tPointsMaterial: 'points'\r\n\t\t};\r\n\t\r\n\t\tvar parameterNames = [\r\n\t\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"envMap\", \"envMapMode\",\r\n\t\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"bumpMap\", \"normalMap\", \"specularMap\",\r\n\t\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n\t\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"maxDirLights\", \"maxPointLights\",\r\n\t\t\t\"maxSpotLights\", \"maxHemiLights\", \"maxShadows\", \"shadowMapEnabled\",\r\n\t\t\t\"shadowMapType\", \"shadowMapDebug\", \"alphaTest\", \"metal\", \"doubleSided\",\r\n\t\t\t\"flipSided\"\r\n\t\t];\r\n\t\r\n\t\r\n\t\tfunction allocateBones ( object ) {\r\n\t\r\n\t\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\t\r\n\t\t\t\treturn 1024;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// default for when object is not specified\r\n\t\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t\t//\r\n\t\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t\t//    (up to 54 should be safe)\r\n\t\r\n\t\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\r\n\t\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\t\r\n\t\t\t\tvar maxBones = nVertexMatrices;\r\n\t\r\n\t\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\t\r\n\t\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\t\r\n\t\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\t\r\n\t\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn maxBones;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction allocateLights( lights ) {\r\n\t\r\n\t\t\tvar dirLights = 0;\r\n\t\t\tvar pointLights = 0;\r\n\t\t\tvar spotLights = 0;\r\n\t\t\tvar hemiLights = 0;\r\n\t\r\n\t\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\t\r\n\t\t\t\tvar light = lights[ l ];\r\n\t\r\n\t\t\t\tif ( light.onlyShadow || light.visible === false ) continue;\r\n\t\r\n\t\t\t\tif ( light instanceof THREE.DirectionalLight ) dirLights ++;\r\n\t\t\t\tif ( light instanceof THREE.PointLight ) pointLights ++;\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) spotLights ++;\r\n\t\t\t\tif ( light instanceof THREE.HemisphereLight ) hemiLights ++;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn { 'directional': dirLights, 'point': pointLights, 'spot': spotLights, 'hemi': hemiLights };\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction allocateShadows( lights ) {\r\n\t\r\n\t\t\tvar maxShadows = 0;\r\n\t\r\n\t\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\t\r\n\t\t\t\tvar light = lights[ l ];\r\n\t\r\n\t\t\t\tif ( ! light.castShadow ) continue;\r\n\t\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) maxShadows ++;\r\n\t\t\t\tif ( light instanceof THREE.DirectionalLight ) maxShadows ++;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn maxShadows;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.getParameters = function ( material, lights, fog, object ) {\r\n\t\r\n\t\t\tvar shaderID = shaderIDs[ material.type ];\r\n\t\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t\t// (not to blow over maxLights budget)\r\n\t\r\n\t\t\tvar maxLightCount = allocateLights( lights );\r\n\t\t\tvar maxShadows = allocateShadows( lights );\r\n\t\t\tvar maxBones = allocateBones( object );\r\n\t\t\tvar precision = renderer.getPrecision();\r\n\t\r\n\t\t\tif ( material.precision !== null ) {\r\n\t\r\n\t\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\t\r\n\t\t\t\tif ( precision !== material.precision ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.initMaterial:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar parameters = {\r\n\t\r\n\t\t\t\tshaderID: shaderID,\r\n\t\r\n\t\t\t\tprecision: precision,\r\n\t\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\r\n\t\r\n\t\t\t\tmap: !! material.map,\r\n\t\t\t\tenvMap: !! material.envMap,\r\n\t\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\r\n\t\t\t\tlightMap: !! material.lightMap,\r\n\t\t\t\taoMap: !! material.aoMap,\r\n\t\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\t\talphaMap: !! material.alphaMap,\r\n\t\r\n\t\t\t\tcombine: material.combine,\r\n\t\r\n\t\t\t\tvertexColors: material.vertexColors,\r\n\t\r\n\t\t\t\tfog: fog,\r\n\t\t\t\tuseFog: material.fog,\r\n\t\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\t\r\n\t\t\t\tflatShading: material.shading === THREE.FlatShading,\r\n\t\r\n\t\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\t\r\n\t\t\t\tskinning: material.skinning,\r\n\t\t\t\tmaxBones: maxBones,\r\n\t\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\t\r\n\t\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\t\r\n\t\t\t\tmaxDirLights: maxLightCount.directional,\r\n\t\t\t\tmaxPointLights: maxLightCount.point,\r\n\t\t\t\tmaxSpotLights: maxLightCount.spot,\r\n\t\t\t\tmaxHemiLights: maxLightCount.hemi,\r\n\t\r\n\t\t\t\tmaxShadows: maxShadows,\r\n\t\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && maxShadows > 0,\r\n\t\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\t\t\t\tshadowMapDebug: renderer.shadowMap.debug,\r\n\t\r\n\t\t\t\talphaTest: material.alphaTest,\r\n\t\t\t\tmetal: material.metal,\r\n\t\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\t\tflipSided: material.side === THREE.BackSide\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\treturn parameters;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getProgramCode = function ( material, parameters ) {\r\n\t\r\n\t\t\tvar chunks = [];\r\n\t\r\n\t\t\tif ( parameters.shaderID ) {\r\n\t\r\n\t\t\t\tchunks.push( parameters.shaderID );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tchunks.push( material.fragmentShader );\r\n\t\t\t\tchunks.push( material.vertexShader );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( material.defines !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var name in material.defines ) {\r\n\t\r\n\t\t\t\t\tchunks.push( name );\r\n\t\t\t\t\tchunks.push( material.defines[ name ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\t\r\n\t\t\t\tvar parameterName = parameterNames[ i ];\r\n\t\t\t\tchunks.push( parameterName );\r\n\t\t\t\tchunks.push( parameters[ parameterName ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn chunks.join();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.acquireProgram = function ( material, parameters, code ) {\r\n\t\r\n\t\t\tvar program;\r\n\t\r\n\t\t\t// Check if code has been already compiled\r\n\t\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\t\r\n\t\t\t\tvar programInfo = programs[ p ];\r\n\t\r\n\t\t\t\tif ( programInfo.code === code ) {\r\n\t\r\n\t\t\t\t\tprogram = programInfo;\r\n\t\t\t\t\t++ program.usedTimes;\r\n\t\r\n\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( program === undefined ) {\r\n\t\r\n\t\t\t\tprogram = new THREE.WebGLProgram( renderer, code, material, parameters );\r\n\t\t\t\tprograms.push( program );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn program;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.releaseProgram = function( program ) {\r\n\t\r\n\t\t\tif ( -- program.usedTimes === 0 ) {\r\n\t\r\n\t\t\t\t// Remove from unordered set\r\n\t\t\t\tvar i = programs.indexOf( program );\r\n\t\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\t\tprograms.pop();\r\n\t\r\n\t\t\t\t// Free WebGL resources\r\n\t\t\t\tprogram.destroy();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\t\tthis.programs = programs;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLProperties.js\r\n\t\r\n\t/**\r\n\t* @author fordacious / fordacious.github.io\r\n\t*/\r\n\t\r\n\tTHREE.WebGLProperties = function () {\r\n\t\r\n\t\tvar properties = {};\r\n\t\r\n\t\tthis.get = function ( object ) {\r\n\t\r\n\t\t\tvar uuid = object.uuid;\r\n\t\t\tvar map = properties[ uuid ];\r\n\t\r\n\t\t\tif ( map === undefined ) {\r\n\t\r\n\t\t\t\tmap = {};\r\n\t\t\t\tproperties[ uuid ] = map;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn map;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.delete = function ( object ) {\r\n\t\r\n\t\t\tdelete properties[ object.uuid ];\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.clear = function () {\r\n\t\r\n\t\t\tproperties = {};\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLShader.js\r\n\t\r\n\tTHREE.WebGLShader = ( function () {\r\n\t\r\n\t\tvar addLineNumbers = function ( string ) {\r\n\t\r\n\t\t\tvar lines = string.split( '\\n' );\r\n\t\r\n\t\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\t\r\n\t\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn lines.join( '\\n' );\r\n\t\r\n\t\t};\r\n\t\r\n\t\treturn function WebGLShader( gl, type, string ) {\r\n\t\r\n\t\t\tvar shader = gl.createShader( type );\r\n\t\r\n\t\t\tgl.shaderSource( shader, string );\r\n\t\t\tgl.compileShader( shader );\r\n\t\r\n\t\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\t\r\n\t\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\t\r\n\t\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// --enable-privileged-webgl-extension\r\n\t\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\t\r\n\t\t\treturn shader;\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/renderers/webgl/WebGLShadowMap.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.WebGLShadowMap = function ( _renderer, _lights, _objects ) {\r\n\t\r\n\t\tvar _gl = _renderer.context,\r\n\t\t_state = _renderer.state,\r\n\t\t_frustum = new THREE.Frustum(),\r\n\t\t_projScreenMatrix = new THREE.Matrix4(),\r\n\t\r\n\t\t_min = new THREE.Vector3(),\r\n\t\t_max = new THREE.Vector3(),\r\n\t\r\n\t\t_matrixPosition = new THREE.Vector3(),\r\n\t\r\n\t\t_renderList = [];\r\n\t\r\n\t\t// init\r\n\t\r\n\t\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\r\n\t\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\r\n\t\r\n\t\tvar _depthMaterial = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader\r\n\t\t } );\r\n\t\r\n\t\tvar _depthMaterialMorph = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\t\tmorphTargets: true\r\n\t\t} );\r\n\t\r\n\t\tvar _depthMaterialSkin = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\t\tskinning: true\r\n\t\t} );\r\n\t\r\n\t\tvar _depthMaterialMorphSkin = new THREE.ShaderMaterial( {\r\n\t\t\tuniforms: depthUniforms,\r\n\t\t\tvertexShader: depthShader.vertexShader,\r\n\t\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\t\tmorphTargets: true,\r\n\t\t\tskinning: true\r\n\t\t} );\r\n\t\r\n\t\t_depthMaterial._shadowPass = true;\r\n\t\t_depthMaterialMorph._shadowPass = true;\r\n\t\t_depthMaterialSkin._shadowPass = true;\r\n\t\t_depthMaterialMorphSkin._shadowPass = true;\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tthis.enabled = false;\r\n\t\r\n\t\tthis.autoUpdate = true;\r\n\t\tthis.needsUpdate = false;\r\n\t\r\n\t\tthis.type = THREE.PCFShadowMap;\r\n\t\tthis.cullFace = THREE.CullFaceFront;\r\n\t\r\n\t\tthis.render = function ( scene, camera ) {\r\n\t\r\n\t\t\tif ( scope.enabled === false ) return;\r\n\t\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\t\r\n\t\t\t// set GL state for depth map\r\n\t\r\n\t\t\t_gl.clearColor( 1, 1, 1, 1 );\r\n\t\t\t_state.disable( _gl.BLEND );\r\n\t\r\n\t\t\t_state.enable( _gl.CULL_FACE );\r\n\t\t\t_gl.frontFace( _gl.CCW );\r\n\t\r\n\t\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\t\r\n\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_state.setDepthTest( true );\r\n\t\r\n\t\t\t// render depth map\r\n\t\r\n\t\t\tfor ( var i = 0, il = _lights.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar light = _lights[ i ];\r\n\t\r\n\t\t\t\tif ( ! light.castShadow ) continue;\r\n\t\r\n\t\t\t\tif ( ! light.shadowMap ) {\r\n\t\r\n\t\t\t\t\tvar shadowFilter = THREE.LinearFilter;\r\n\t\r\n\t\t\t\t\tif ( scope.type === THREE.PCFSoftShadowMap ) {\r\n\t\r\n\t\t\t\t\t\tshadowFilter = THREE.NearestFilter;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar pars = { minFilter: shadowFilter, magFilter: shadowFilter, format: THREE.RGBAFormat };\r\n\t\r\n\t\t\t\t\tlight.shadowMap = new THREE.WebGLRenderTarget( light.shadowMapWidth, light.shadowMapHeight, pars );\r\n\t\t\t\t\tlight.shadowMapSize = new THREE.Vector2( light.shadowMapWidth, light.shadowMapHeight );\r\n\t\r\n\t\t\t\t\tlight.shadowMatrix = new THREE.Matrix4();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( ! light.shadowCamera ) {\r\n\t\r\n\t\t\t\t\tif ( light instanceof THREE.SpotLight ) {\r\n\t\r\n\t\t\t\t\t\tlight.shadowCamera = new THREE.PerspectiveCamera( light.shadowCameraFov, light.shadowMapWidth / light.shadowMapHeight, light.shadowCameraNear, light.shadowCameraFar );\r\n\t\r\n\t\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\t\r\n\t\t\t\t\t\tlight.shadowCamera = new THREE.OrthographicCamera( light.shadowCameraLeft, light.shadowCameraRight, light.shadowCameraTop, light.shadowCameraBottom, light.shadowCameraNear, light.shadowCameraFar );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tconsole.error( \"THREE.ShadowMapPlugin: Unsupported light type for shadow\", light );\r\n\t\t\t\t\t\tcontinue;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tscene.add( light.shadowCamera );\r\n\t\r\n\t\t\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( light.shadowCameraVisible && ! light.cameraHelper ) {\r\n\t\r\n\t\t\t\t\tlight.cameraHelper = new THREE.CameraHelper( light.shadowCamera );\r\n\t\t\t\t\tscene.add( light.cameraHelper );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar shadowMap = light.shadowMap;\r\n\t\t\t\tvar shadowMatrix = light.shadowMatrix;\r\n\t\t\t\tvar shadowCamera = light.shadowCamera;\r\n\t\r\n\t\t\t\t//\r\n\t\r\n\t\t\t\tshadowCamera.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_matrixPosition.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\tshadowCamera.lookAt( _matrixPosition );\r\n\t\t\t\tshadowCamera.updateMatrixWorld();\r\n\t\r\n\t\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\t\r\n\t\t\t\t//\r\n\t\r\n\t\t\t\tif ( light.cameraHelper ) light.cameraHelper.visible = light.shadowCameraVisible;\r\n\t\t\t\tif ( light.shadowCameraVisible ) light.cameraHelper.update();\r\n\t\r\n\t\t\t\t// compute shadow matrix\r\n\t\r\n\t\t\t\tshadowMatrix.set(\r\n\t\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t\t);\r\n\t\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\t\r\n\t\t\t\t// update camera matrices and frustum\r\n\t\r\n\t\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\t\r\n\t\t\t\t// render shadow map\r\n\t\r\n\t\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t\t_renderer.clear();\r\n\t\r\n\t\t\t\t// set object matrices & frustum culling\r\n\t\r\n\t\t\t\t_renderList.length = 0;\r\n\t\r\n\t\t\t\tprojectObject( scene, shadowCamera );\r\n\t\r\n\t\r\n\t\t\t\t// render regular objects\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar object = _renderList[ j ];\r\n\t\t\t\t\tvar geometry = _objects.update( object );\r\n\t\t\t\t\tvar material = object.material;\r\n\t\r\n\t\t\t\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\t\r\n\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\tvar materials = material.materials;\r\n\t\r\n\t\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvar group = groups[ k ];\r\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\t\r\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\t\r\n\t\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, null, geometry, getDepthMaterial( object, groupMaterial ), object, group );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, null, geometry, getDepthMaterial( object, material ), object );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// restore GL state\r\n\t\r\n\t\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\t\tclearAlpha = _renderer.getClearAlpha();\r\n\t\r\n\t\t\t_renderer.setClearColor( clearColor, clearAlpha );\r\n\t\t\t_state.enable( _gl.BLEND );\r\n\t\r\n\t\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\t\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t_renderer.resetGLState();\r\n\t\r\n\t\t\tscope.needsUpdate = false;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction getDepthMaterial( object, material ) {\r\n\t\r\n\t\t\tvar geometry = object.geometry;\r\n\t\r\n\t\t\tvar useMorphing = geometry.morphTargets !== undefined && geometry.morphTargets.length > 0 && material.morphTargets;\r\n\t\t\tvar useSkinning = object instanceof THREE.SkinnedMesh && material.skinning;\r\n\t\r\n\t\t\tvar depthMaterial;\r\n\t\r\n\t\t\tif ( object.customDepthMaterial ) {\r\n\t\r\n\t\t\t\tdepthMaterial = object.customDepthMaterial;\r\n\t\r\n\t\t\t} else if ( useSkinning ) {\r\n\t\r\n\t\t\t\tdepthMaterial = useMorphing ? _depthMaterialMorphSkin : _depthMaterialSkin;\r\n\t\r\n\t\t\t} else if ( useMorphing ) {\r\n\t\r\n\t\t\t\tdepthMaterial = _depthMaterialMorph;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tdepthMaterial = _depthMaterial;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tdepthMaterial.visible = material.visible;\r\n\t\t\tdepthMaterial.wireframe = material.wireframe;\r\n\t\t\tdepthMaterial.wireframeLinewidth = material.wireframeLinewidth;\r\n\t\r\n\t\t\treturn depthMaterial;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction projectObject( object, camera ) {\r\n\t\r\n\t\t\tif ( object.visible === false ) return;\r\n\t\r\n\t\t\tif ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\t\r\n\t\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\t\r\n\t\t\t\t\tvar material = object.material;\r\n\t\r\n\t\t\t\t\tif ( material.visible === true ) {\r\n\t\r\n\t\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t\t_renderList.push( object );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar children = object.children;\r\n\t\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tprojectObject( children[ i ], camera );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/WebGLState.js\r\n\t\r\n\t/**\r\n\t* @author mrdoob / http://mrdoob.com/\r\n\t*/\r\n\t\r\n\tTHREE.WebGLState = function ( gl, extensions, paramThreeToGL ) {\r\n\t\r\n\t\tvar _this = this;\r\n\t\r\n\t\tvar newAttributes = new Uint8Array( 16 );\r\n\t\tvar enabledAttributes = new Uint8Array( 16 );\r\n\t\r\n\t\tvar capabilities = {};\r\n\t\r\n\t\tvar compressedTextureFormats = null;\r\n\t\r\n\t\tvar currentBlending = null;\r\n\t\tvar currentBlendEquation = null;\r\n\t\tvar currentBlendSrc = null;\r\n\t\tvar currentBlendDst = null;\r\n\t\tvar currentBlendEquationAlpha = null;\r\n\t\tvar currentBlendSrcAlpha = null;\r\n\t\tvar currentBlendDstAlpha = null;\r\n\t\r\n\t\tvar currentDepthFunc = null;\r\n\t\tvar currentDepthWrite = null;\r\n\t\r\n\t\tvar currentColorWrite = null;\r\n\t\r\n\t\tvar currentFlipSided = null;\r\n\t\r\n\t\tvar currentLineWidth = null;\r\n\t\r\n\t\tvar currentPolygonOffsetFactor = null;\r\n\t\tvar currentPolygonOffsetUnits = null;\r\n\t\r\n\t\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\t\r\n\t\tvar currentTextureSlot = undefined;\r\n\t\tvar currentBoundTextures = {};\r\n\t\r\n\t\tthis.init = function () {\r\n\t\r\n\t\t\tgl.clearColor( 0, 0, 0, 1 );\r\n\t\t\tgl.clearDepth( 1 );\r\n\t\t\tgl.clearStencil( 0 );\r\n\t\r\n\t\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\r\n\t\t\tgl.frontFace( gl.CCW );\r\n\t\t\tgl.cullFace( gl.BACK );\r\n\t\t\tthis.enable( gl.CULL_FACE );\r\n\t\r\n\t\t\tthis.enable( gl.BLEND );\r\n\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.initAttributes = function () {\r\n\t\r\n\t\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tnewAttributes[ i ] = 0;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.enableAttribute = function ( attribute ) {\r\n\t\r\n\t\t\tnewAttributes[ attribute ] = 1;\r\n\t\r\n\t\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\t\r\n\t\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\t\tenabledAttributes[ attribute ] = 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.disableUnusedAttributes = function () {\r\n\t\r\n\t\t\tfor ( var i = 0, l = enabledAttributes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\t\r\n\t\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\t\tenabledAttributes[ i ] = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.enable = function ( id ) {\r\n\t\r\n\t\t\tif ( capabilities[ id ] !== true ) {\r\n\t\r\n\t\t\t\tgl.enable( id );\r\n\t\t\t\tcapabilities[ id ] = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.disable = function ( id ) {\r\n\t\r\n\t\t\tif ( capabilities[ id ] !== false ) {\r\n\t\r\n\t\t\t\tgl.disable( id );\r\n\t\t\t\tcapabilities[ id ] = false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.getCompressedTextureFormats = function () {\r\n\t\r\n\t\t\tif ( compressedTextureFormats === null ) {\r\n\t\r\n\t\t\t\tcompressedTextureFormats = [];\r\n\t\r\n\t\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n\t\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ) {\r\n\t\r\n\t\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn compressedTextureFormats;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha ) {\r\n\t\r\n\t\t\tif ( blending !== currentBlending ) {\r\n\t\r\n\t\t\t\tif ( blending === THREE.NoBlending ) {\r\n\t\r\n\t\t\t\t\tthis.disable( gl.BLEND );\r\n\t\r\n\t\t\t\t} else if ( blending === THREE.AdditiveBlending ) {\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\t\r\n\t\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\t\r\n\t\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\t\r\n\t\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\t\r\n\t\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\t\r\n\t\t\t\t} else if ( blending === THREE.CustomBlending ) {\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcurrentBlending = blending;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( blending === THREE.CustomBlending ) {\r\n\t\r\n\t\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\t\r\n\t\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\t\r\n\t\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\r\n\t\r\n\t\t\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\t\r\n\t\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\r\n\t\r\n\t\t\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tcurrentBlendEquation = null;\r\n\t\t\t\tcurrentBlendSrc = null;\r\n\t\t\t\tcurrentBlendDst = null;\r\n\t\t\t\tcurrentBlendEquationAlpha = null;\r\n\t\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\t\tcurrentBlendDstAlpha = null;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setDepthFunc = function ( depthFunc ) {\r\n\t\r\n\t\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\t\r\n\t\t\t\tif ( depthFunc ) {\r\n\t\r\n\t\t\t\t\tswitch ( depthFunc ) {\r\n\t\r\n\t\t\t\t\t\tcase THREE.NeverDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.AlwaysDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.LessDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.LessEqualDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.EqualDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.GreaterEqualDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.GreaterDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tcase THREE.NotEqualDepth:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\r\n\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\tdefault:\r\n\t\r\n\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcurrentDepthFunc = depthFunc;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setDepthTest = function ( depthTest ) {\r\n\t\r\n\t\t\tif ( depthTest ) {\r\n\t\r\n\t\t\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.disable( gl.DEPTH_TEST );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setDepthWrite = function ( depthWrite ) {\r\n\t\r\n\t\t\tif ( currentDepthWrite !== depthWrite ) {\r\n\t\r\n\t\t\t\tgl.depthMask( depthWrite );\r\n\t\t\t\tcurrentDepthWrite = depthWrite;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setColorWrite = function ( colorWrite ) {\r\n\t\r\n\t\t\tif ( currentColorWrite !== colorWrite ) {\r\n\t\r\n\t\t\t\tgl.colorMask( colorWrite, colorWrite, colorWrite, colorWrite );\r\n\t\t\t\tcurrentColorWrite = colorWrite;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setFlipSided = function ( flipSided ) {\r\n\t\r\n\t\t\tif ( currentFlipSided !== flipSided ) {\r\n\t\r\n\t\t\t\tif ( flipSided ) {\r\n\t\r\n\t\t\t\t\tgl.frontFace( gl.CW );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tgl.frontFace( gl.CCW );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tcurrentFlipSided = flipSided;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setLineWidth = function ( width ) {\r\n\t\r\n\t\t\tif ( width !== currentLineWidth ) {\r\n\t\r\n\t\t\t\tgl.lineWidth( width );\r\n\t\r\n\t\t\t\tcurrentLineWidth = width;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setPolygonOffset = function ( polygonOffset, factor, units ) {\r\n\t\r\n\t\t\tif ( polygonOffset ) {\r\n\t\r\n\t\t\t\tthis.enable( gl.POLYGON_OFFSET_FILL );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.disable( gl.POLYGON_OFFSET_FILL );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( polygonOffset && ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) ) {\r\n\t\r\n\t\t\t\tgl.polygonOffset( factor, units );\r\n\t\r\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\t\tcurrentPolygonOffsetUnits = units;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.setScissorTest = function ( scissorTest ) {\r\n\t\r\n\t\t\tif ( scissorTest ) {\r\n\t\r\n\t\t\t\tthis.enable( gl.SCISSOR_TEST );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.disable( gl.SCISSOR_TEST );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// texture\r\n\t\r\n\t\tthis.activeTexture = function ( webglSlot ) {\r\n\t\r\n\t\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\t\r\n\t\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\t\r\n\t\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\t\tcurrentTextureSlot = webglSlot;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.bindTexture = function ( webglType, webglTexture ) {\r\n\t\r\n\t\t\tif ( currentTextureSlot === undefined ) {\r\n\t\r\n\t\t\t\t_this.activeTexture();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\t\r\n\t\t\tif ( boundTexture === undefined ) {\r\n\t\r\n\t\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\t\r\n\t\t\t\tgl.bindTexture( webglType, webglTexture );\r\n\t\r\n\t\t\t\tboundTexture.type = webglType;\r\n\t\t\t\tboundTexture.texture = webglTexture;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.compressedTexImage2D = function () {\r\n\t\r\n\t\t\ttry {\r\n\t\r\n\t\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\t\r\n\t\t\t} catch ( error ) {\r\n\t\r\n\t\t\t\tconsole.error( error );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.texImage2D = function () {\r\n\t\r\n\t\t\ttry {\r\n\t\r\n\t\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\t\r\n\t\t\t} catch ( error ) {\r\n\t\r\n\t\t\t\tconsole.error( error );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\t//\r\n\t\r\n\t\tthis.reset = function () {\r\n\t\r\n\t\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\t\r\n\t\t\t\tif ( enabledAttributes[ i ] === 1 ) {\r\n\t\r\n\t\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\t\tenabledAttributes[ i ] = 0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tcapabilities = {};\r\n\t\r\n\t\t\tcompressedTextureFormats = null;\r\n\t\r\n\t\t\tcurrentBlending = null;\r\n\t\r\n\t\t\tcurrentDepthWrite = null;\r\n\t\t\tcurrentColorWrite = null;\r\n\t\r\n\t\t\tcurrentFlipSided = null;\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\t\r\n\t\tvar gl = renderer.context;\r\n\t\tvar state = renderer.state;\r\n\t\r\n\t\tvar vertexBuffer, elementBuffer;\r\n\t\tvar program, attributes, uniforms;\r\n\t\tvar hasVertexTexture;\r\n\t\r\n\t\tvar tempTexture, occlusionTexture;\r\n\t\r\n\t\tvar init = function () {\r\n\t\r\n\t\t\tvar vertices = new Float32Array( [\r\n\t\t\t\t- 1, - 1,  0, 0,\r\n\t\t\t\t 1, - 1,  1, 0,\r\n\t\t\t\t 1,  1,  1, 1,\r\n\t\t\t\t- 1,  1,  0, 1\r\n\t\t\t] );\r\n\t\r\n\t\t\tvar faces = new Uint16Array( [\r\n\t\t\t\t0, 1, 2,\r\n\t\t\t\t0, 2, 3\r\n\t\t\t] );\r\n\t\r\n\t\t\t// buffers\r\n\t\r\n\t\t\tvertexBuffer     = gl.createBuffer();\r\n\t\t\telementBuffer    = gl.createBuffer();\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\t\r\n\t\t\t// textures\r\n\t\r\n\t\t\ttempTexture      = gl.createTexture();\r\n\t\t\tocclusionTexture = gl.createTexture();\r\n\t\r\n\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\t\r\n\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\t\r\n\t\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\r\n\t\r\n\t\t\tvar shader;\r\n\t\r\n\t\t\tif ( hasVertexTexture ) {\r\n\t\r\n\t\t\t\tshader = {\r\n\t\r\n\t\t\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\t\"uniform float rotation;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\r\n\t\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\t\"attribute vec2 uv;\",\r\n\t\r\n\t\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\t\"varying float vVisibility;\",\r\n\t\r\n\t\t\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t\t\t\"vUV = uv;\",\r\n\t\r\n\t\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\t\r\n\t\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\t\r\n\t\t\t\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\t\r\n\t\t\t\t\t\t\"}\"\r\n\t\r\n\t\t\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\t\"uniform vec3 color;\",\r\n\t\r\n\t\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\t\"varying float vVisibility;\",\r\n\t\r\n\t\t\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t\t\t// pink square\r\n\t\r\n\t\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\t\r\n\t\t\t\t\t\t\t// restore\r\n\t\r\n\t\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\t\r\n\t\t\t\t\t\t\t// flare\r\n\t\r\n\t\t\t\t\t\t\t\"} else {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\t\r\n\t\t\t\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\t\t\"}\"\r\n\t\r\n\t\t\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tshader = {\r\n\t\r\n\t\t\t\t\tvertexShader: [\r\n\t\r\n\t\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\t\"uniform float rotation;\",\r\n\t\r\n\t\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\t\"attribute vec2 uv;\",\r\n\t\r\n\t\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\r\n\t\t\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t\t\t\"vUV = uv;\",\r\n\t\r\n\t\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\t\r\n\t\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\t\r\n\t\t\t\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\t\r\n\t\t\t\t\t\t\"}\"\r\n\t\r\n\t\t\t\t\t].join( \"\\n\" ),\r\n\t\r\n\t\t\t\t\tfragmentShader: [\r\n\t\r\n\t\t\t\t\t\t\"precision mediump float;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\t\r\n\t\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\t\"uniform vec3 color;\",\r\n\t\r\n\t\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\r\n\t\t\t\t\t\t\"void main() {\",\r\n\t\r\n\t\t\t\t\t\t\t// pink square\r\n\t\r\n\t\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\r\n\t\r\n\t\t\t\t\t\t\t// restore\r\n\t\r\n\t\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\t\r\n\t\t\t\t\t\t\t// flare\r\n\t\r\n\t\t\t\t\t\t\t\"} else {\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\r\n\t\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\r\n\t\r\n\t\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\r\n\t\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\t\r\n\t\t\t\t\t\t\t\"}\",\r\n\t\r\n\t\t\t\t\t\t\"}\"\r\n\t\r\n\t\t\t\t\t].join( \"\\n\" )\r\n\t\r\n\t\t\t\t};\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tprogram = createProgram( shader );\r\n\t\r\n\t\t\tattributes = {\r\n\t\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t\t};\r\n\t\r\n\t\t\tuniforms = {\r\n\t\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t\t};\r\n\t\r\n\t\t};\r\n\t\r\n\t\t/*\r\n\t\t * Render lens flares\r\n\t\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t\t *         reads these back and calculates occlusion.\r\n\t\t */\r\n\t\r\n\t\tthis.render = function ( scene, camera, viewportWidth, viewportHeight ) {\r\n\t\r\n\t\t\tif ( flares.length === 0 ) return;\r\n\t\r\n\t\t\tvar tempPosition = new THREE.Vector3();\r\n\t\r\n\t\t\tvar invAspect = viewportHeight / viewportWidth,\r\n\t\t\t\thalfViewportWidth = viewportWidth * 0.5,\r\n\t\t\t\thalfViewportHeight = viewportHeight * 0.5;\r\n\t\r\n\t\t\tvar size = 16 / viewportHeight,\r\n\t\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\t\r\n\t\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\t\r\n\t\t\tif ( program === undefined ) {\r\n\t\r\n\t\t\t\tinit();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgl.useProgram( program );\r\n\t\r\n\t\t\tstate.initAttributes();\r\n\t\t\tstate.enableAttribute( attributes.vertex );\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\t\t\tstate.disableUnusedAttributes();\r\n\t\r\n\t\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t\t// setup gl and common used attribs/uniforms\r\n\t\r\n\t\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\t\tgl.uniform1i( uniforms.map, 1 );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\r\n\t\t\tstate.disable( gl.CULL_FACE );\r\n\t\t\tgl.depthMask( false );\r\n\t\r\n\t\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tsize = 16 / viewportHeight;\r\n\t\t\t\tscale.set( size * invAspect, size );\r\n\t\r\n\t\t\t\t// calc object screen position\r\n\t\r\n\t\t\t\tvar flare = flares[ i ];\r\n\t\r\n\t\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\r\n\t\r\n\t\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\t\r\n\t\t\t\t// setup arrays for gl programs\r\n\t\r\n\t\t\t\tscreenPosition.copy( tempPosition );\r\n\t\r\n\t\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\r\n\t\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\r\n\t\r\n\t\t\t\t// screen cull\r\n\t\r\n\t\t\t\tif ( hasVertexTexture || (\r\n\t\t\t\t\tscreenPositionPixels.x > 0 &&\r\n\t\t\t\t\tscreenPositionPixels.x < viewportWidth &&\r\n\t\t\t\t\tscreenPositionPixels.y > 0 &&\r\n\t\t\t\t\tscreenPositionPixels.y < viewportHeight ) ) {\r\n\t\r\n\t\t\t\t\t// save current RGB to temp texture\r\n\t\r\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\r\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\t\r\n\t\r\n\t\t\t\t\t// render pink quad\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\r\n\t\t\t\t\tstate.disable( gl.BLEND );\r\n\t\t\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\r\n\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\t\r\n\t\r\n\t\t\t\t\t// copy result to occlusionMap\r\n\t\r\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\t\r\n\t\r\n\t\t\t\t\t// restore graphics\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\t\r\n\t\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\t\r\n\t\r\n\t\t\t\t\t// update object positions\r\n\t\r\n\t\t\t\t\tflare.positionScreen.copy( screenPosition );\r\n\t\r\n\t\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\t\r\n\t\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tflare.updateLensFlares();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// render flares\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\t\tstate.enable( gl.BLEND );\r\n\t\r\n\t\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\t\r\n\t\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\t\r\n\t\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\t\r\n\t\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewportHeight;\r\n\t\r\n\t\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\t\tscale.y = size;\r\n\t\r\n\t\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\t\r\n\t\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\t\r\n\t\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\r\n\t\r\n\t\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// restore gl\r\n\t\r\n\t\t\tstate.enable( gl.CULL_FACE );\r\n\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\t\tgl.depthMask( true );\r\n\t\r\n\t\t\trenderer.resetGLState();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction createProgram ( shader ) {\r\n\t\r\n\t\t\tvar program = gl.createProgram();\r\n\t\r\n\t\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\r\n\t\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\t\r\n\t\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\t\r\n\t\t\tgl.compileShader( fragmentShader );\r\n\t\t\tgl.compileShader( vertexShader );\r\n\t\r\n\t\t\tgl.attachShader( program, fragmentShader );\r\n\t\t\tgl.attachShader( program, vertexShader );\r\n\t\r\n\t\t\tgl.linkProgram( program );\r\n\t\r\n\t\t\treturn program;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\t\r\n\t\tvar gl = renderer.context;\r\n\t\tvar state = renderer.state;\r\n\t\r\n\t\tvar vertexBuffer, elementBuffer;\r\n\t\tvar program, attributes, uniforms;\r\n\t\r\n\t\tvar texture;\r\n\t\r\n\t\t// decompose matrixWorld\r\n\t\r\n\t\tvar spritePosition = new THREE.Vector3();\r\n\t\tvar spriteRotation = new THREE.Quaternion();\r\n\t\tvar spriteScale = new THREE.Vector3();\r\n\t\r\n\t\tvar init = function () {\r\n\t\r\n\t\t\tvar vertices = new Float32Array( [\r\n\t\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t\t] );\r\n\t\r\n\t\t\tvar faces = new Uint16Array( [\r\n\t\t\t\t0, 1, 2,\r\n\t\t\t\t0, 2, 3\r\n\t\t\t] );\r\n\t\r\n\t\t\tvertexBuffer  = gl.createBuffer();\r\n\t\t\telementBuffer = gl.createBuffer();\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\t\r\n\t\t\tprogram = createProgram();\r\n\t\r\n\t\t\tattributes = {\r\n\t\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t\t};\r\n\t\r\n\t\t\tuniforms = {\r\n\t\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\t\r\n\t\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\t\r\n\t\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\t\r\n\t\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\t\r\n\t\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\t\r\n\t\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t\t};\r\n\t\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = 8;\r\n\t\t\tcanvas.height = 8;\r\n\t\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.fillStyle = 'white';\r\n\t\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\t\r\n\t\t\ttexture = new THREE.Texture( canvas );\r\n\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.render = function ( scene, camera ) {\r\n\t\r\n\t\t\tif ( sprites.length === 0 ) return;\r\n\t\r\n\t\t\t// setup gl\r\n\t\r\n\t\t\tif ( program === undefined ) {\r\n\t\r\n\t\t\t\tinit();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgl.useProgram( program );\r\n\t\r\n\t\t\tstate.initAttributes();\r\n\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\t\t\tstate.disableUnusedAttributes();\r\n\t\r\n\t\t\tstate.disable( gl.CULL_FACE );\r\n\t\t\tstate.enable( gl.BLEND );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\t\r\n\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\r\n\t\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\t\r\n\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\tgl.uniform1i( uniforms.map, 0 );\r\n\t\r\n\t\t\tvar oldFogType = 0;\r\n\t\t\tvar sceneFogType = 0;\r\n\t\t\tvar fog = scene.fog;\r\n\t\r\n\t\t\tif ( fog ) {\r\n\t\r\n\t\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\t\r\n\t\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\t\r\n\t\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\t\toldFogType = 1;\r\n\t\t\t\t\tsceneFogType = 1;\r\n\t\r\n\t\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\t\r\n\t\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\t\toldFogType = 2;\r\n\t\t\t\t\tsceneFogType = 2;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\t\toldFogType = 0;\r\n\t\t\t\tsceneFogType = 0;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\t// update positions and sort\r\n\t\r\n\t\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar sprite = sprites[ i ];\r\n\t\r\n\t\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\t\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tsprites.sort( painterSortStable );\r\n\t\r\n\t\t\t// render all sprites\r\n\t\r\n\t\t\tvar scale = [];\r\n\t\r\n\t\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar sprite = sprites[ i ];\r\n\t\t\t\tvar material = sprite.material;\r\n\t\r\n\t\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\t\r\n\t\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\t\r\n\t\t\t\tscale[ 0 ] = spriteScale.x;\r\n\t\t\t\tscale[ 1 ] = spriteScale.y;\r\n\t\r\n\t\t\t\tvar fogType = 0;\r\n\t\r\n\t\t\t\tif ( scene.fog && material.fog ) {\r\n\t\r\n\t\t\t\t\tfogType = sceneFogType;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( oldFogType !== fogType ) {\r\n\t\r\n\t\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\t\toldFogType = fogType;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( material.map !== null ) {\r\n\t\r\n\t\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\t\r\n\t\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\t\r\n\t\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\r\n\t\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\r\n\t\r\n\t\t\t\t\trenderer.setTexture( material.map, 0 );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\trenderer.setTexture( texture, 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// restore gl\r\n\t\r\n\t\t\tstate.enable( gl.CULL_FACE );\r\n\t\r\n\t\t\trenderer.resetGLState();\r\n\t\r\n\t\t};\r\n\t\r\n\t\tfunction createProgram () {\r\n\t\r\n\t\t\tvar program = gl.createProgram();\r\n\t\r\n\t\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\r\n\t\t\tgl.shaderSource( vertexShader, [\r\n\t\r\n\t\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\t\r\n\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t'uniform float rotation;',\r\n\t\t\t\t'uniform vec2 scale;',\r\n\t\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t\t'uniform vec2 uvScale;',\r\n\t\r\n\t\t\t\t'attribute vec2 position;',\r\n\t\t\t\t'attribute vec2 uv;',\r\n\t\r\n\t\t\t\t'varying vec2 vUV;',\r\n\t\r\n\t\t\t\t'void main() {',\r\n\t\r\n\t\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\t\r\n\t\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\t\r\n\t\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\t\r\n\t\t\t\t\t'vec4 finalPosition;',\r\n\t\r\n\t\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\t\r\n\t\t\t\t\t'gl_Position = finalPosition;',\r\n\t\r\n\t\t\t\t'}'\r\n\t\r\n\t\t\t].join( '\\n' ) );\r\n\t\r\n\t\t\tgl.shaderSource( fragmentShader, [\r\n\t\r\n\t\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\t\r\n\t\t\t\t'uniform vec3 color;',\r\n\t\t\t\t'uniform sampler2D map;',\r\n\t\t\t\t'uniform float opacity;',\r\n\t\r\n\t\t\t\t'uniform int fogType;',\r\n\t\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t\t'uniform float fogDensity;',\r\n\t\t\t\t'uniform float fogNear;',\r\n\t\t\t\t'uniform float fogFar;',\r\n\t\t\t\t'uniform float alphaTest;',\r\n\t\r\n\t\t\t\t'varying vec2 vUV;',\r\n\t\r\n\t\t\t\t'void main() {',\r\n\t\r\n\t\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\t\r\n\t\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\t\r\n\t\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\t\r\n\t\t\t\t\t'if ( fogType > 0 ) {',\r\n\t\r\n\t\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t\t'float fogFactor = 0.0;',\r\n\t\r\n\t\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\t\r\n\t\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\t\r\n\t\t\t\t\t\t'} else {',\r\n\t\r\n\t\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\t\r\n\t\t\t\t\t\t'}',\r\n\t\r\n\t\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\t\r\n\t\t\t\t\t'}',\r\n\t\r\n\t\t\t\t'}'\r\n\t\r\n\t\t\t].join( '\\n' ) );\r\n\t\r\n\t\t\tgl.compileShader( vertexShader );\r\n\t\t\tgl.compileShader( fragmentShader );\r\n\t\r\n\t\t\tgl.attachShader( program, vertexShader );\r\n\t\t\tgl.attachShader( program, fragmentShader );\r\n\t\r\n\t\t\tgl.linkProgram( program );\r\n\t\r\n\t\t\treturn program;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction painterSortStable ( a, b ) {\r\n\t\r\n\t\t\tif ( a.z !== b.z ) {\r\n\t\r\n\t\t\t\treturn b.z - a.z;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn b.id - a.id;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/GeometryUtils.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.GeometryUtils = {\r\n\t\r\n\t\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\t\r\n\t\t\tvar matrix;\r\n\t\r\n\t\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\t\r\n\t\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\t\r\n\t\t\t\tmatrix = geometry2.matrix;\r\n\t\t\t\tgeometry2 = geometry2.geometry;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tcenter: function ( geometry ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\t\treturn geometry.center();\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/ImageUtils.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author Daosheng Mu / https://github.com/DaoshengMu/\r\n\t */\r\n\t\r\n\tTHREE.ImageUtils = {\r\n\t\r\n\t\tcrossOrigin: undefined,\r\n\t\r\n\t\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\t\r\n\t\t\tvar loader = new THREE.ImageLoader();\r\n\t\t\tloader.crossOrigin = this.crossOrigin;\r\n\t\r\n\t\t\tvar texture = new THREE.Texture( undefined, mapping );\r\n\t\r\n\t\t\tloader.load( url, function ( image ) {\r\n\t\r\n\t\t\t\ttexture.image = image;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\t\r\n\t\t\t}, undefined, function ( event ) {\r\n\t\r\n\t\t\t\tif ( onError ) onError( event );\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t\ttexture.sourceFile = url;\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tloadTextureCube: function ( array, mapping, onLoad, onError ) {\r\n\t\r\n\t\t\tvar images = [];\r\n\t\r\n\t\t\tvar loader = new THREE.ImageLoader();\r\n\t\t\tloader.crossOrigin = this.crossOrigin;\r\n\t\r\n\t\t\tvar texture = new THREE.CubeTexture( images, mapping );\r\n\t\r\n\t\t\tvar loaded = 0;\r\n\t\r\n\t\t\tvar loadTexture = function ( i ) {\r\n\t\r\n\t\t\t\tloader.load( array[ i ], function ( image ) {\r\n\t\r\n\t\t\t\t\ttexture.images[ i ] = image;\r\n\t\r\n\t\t\t\t\tloaded += 1;\r\n\t\r\n\t\t\t\t\tif ( loaded === 6 ) {\r\n\t\r\n\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}, undefined, onError );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tfor ( var i = 0, il = array.length; i < il; ++ i ) {\r\n\t\r\n\t\t\t\tloadTexture( i );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tloadCompressedTexture: function () {\r\n\t\r\n\t\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' )\r\n\t\r\n\t\t},\r\n\t\r\n\t\tloadCompressedTextureCube: function () {\r\n\t\r\n\t\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' )\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetNormalMap: function ( image, depth ) {\r\n\t\r\n\t\t\t// Adapted from http://www.paulbrunt.co.uk/lab/heightnormal/\r\n\t\r\n\t\t\tvar cross = function ( a, b ) {\r\n\t\r\n\t\t\t\treturn [ a[ 1 ] * b[ 2 ] - a[ 2 ] * b[ 1 ], a[ 2 ] * b[ 0 ] - a[ 0 ] * b[ 2 ], a[ 0 ] * b[ 1 ] - a[ 1 ] * b[ 0 ] ];\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tvar subtract = function ( a, b ) {\r\n\t\r\n\t\t\t\treturn [ a[ 0 ] - b[ 0 ], a[ 1 ] - b[ 1 ], a[ 2 ] - b[ 2 ] ];\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tvar normalize = function ( a ) {\r\n\t\r\n\t\t\t\tvar l = Math.sqrt( a[ 0 ] * a[ 0 ] + a[ 1 ] * a[ 1 ] + a[ 2 ] * a[ 2 ] );\r\n\t\t\t\treturn [ a[ 0 ] / l, a[ 1 ] / l, a[ 2 ] / l ];\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tdepth = depth | 1;\r\n\t\r\n\t\t\tvar width = image.width;\r\n\t\t\tvar height = image.height;\r\n\t\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = width;\r\n\t\t\tcanvas.height = height;\r\n\t\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0 );\r\n\t\r\n\t\t\tvar data = context.getImageData( 0, 0, width, height ).data;\r\n\t\t\tvar imageData = context.createImageData( width, height );\r\n\t\t\tvar output = imageData.data;\r\n\t\r\n\t\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\t\r\n\t\t\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\t\r\n\t\t\t\t\tvar ly = y - 1 < 0 ? 0 : y - 1;\r\n\t\t\t\t\tvar uy = y + 1 > height - 1 ? height - 1 : y + 1;\r\n\t\t\t\t\tvar lx = x - 1 < 0 ? 0 : x - 1;\r\n\t\t\t\t\tvar ux = x + 1 > width - 1 ? width - 1 : x + 1;\r\n\t\r\n\t\t\t\t\tvar points = [];\r\n\t\t\t\t\tvar origin = [ 0, 0, data[ ( y * width + x ) * 4 ] / 255 * depth ];\r\n\t\t\t\t\tpoints.push( [ - 1, 0, data[ ( y * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ - 1, - 1, data[ ( ly * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 0, - 1, data[ ( ly * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 1, - 1, data[ ( ly * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 1, 0, data[ ( y * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 1, 1, data[ ( uy * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ 0, 1, data[ ( uy * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\t\tpoints.push( [ - 1, 1, data[ ( uy * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\r\n\t\t\t\t\tvar normals = [];\r\n\t\t\t\t\tvar num_points = points.length;\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < num_points; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar v1 = points[ i ];\r\n\t\t\t\t\t\tvar v2 = points[ ( i + 1 ) % num_points ];\r\n\t\t\t\t\t\tv1 = subtract( v1, origin );\r\n\t\t\t\t\t\tv2 = subtract( v2, origin );\r\n\t\t\t\t\t\tnormals.push( normalize( cross( v1, v2 ) ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar normal = [ 0, 0, 0 ];\r\n\t\r\n\t\t\t\t\tfor ( var i = 0; i < normals.length; i ++ ) {\r\n\t\r\n\t\t\t\t\t\tnormal[ 0 ] += normals[ i ][ 0 ];\r\n\t\t\t\t\t\tnormal[ 1 ] += normals[ i ][ 1 ];\r\n\t\t\t\t\t\tnormal[ 2 ] += normals[ i ][ 2 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tnormal[ 0 ] /= normals.length;\r\n\t\t\t\t\tnormal[ 1 ] /= normals.length;\r\n\t\t\t\t\tnormal[ 2 ] /= normals.length;\r\n\t\r\n\t\t\t\t\tvar idx = ( y * width + x ) * 4;\r\n\t\r\n\t\t\t\t\toutput[ idx ] = ( ( normal[ 0 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\t\toutput[ idx + 1 ] = ( ( normal[ 1 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\t\toutput[ idx + 2 ] = ( normal[ 2 ] * 255 ) | 0;\r\n\t\t\t\t\toutput[ idx + 3 ] = 255;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tcontext.putImageData( imageData, 0, 0 );\r\n\t\r\n\t\t\treturn canvas;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgenerateDataTexture: function ( width, height, color ) {\r\n\t\r\n\t\t\tvar size = width * height;\r\n\t\t\tvar data = new Uint8Array( 3 * size );\r\n\t\r\n\t\t\tvar r = Math.floor( color.r * 255 );\r\n\t\t\tvar g = Math.floor( color.g * 255 );\r\n\t\t\tvar b = Math.floor( color.b * 255 );\r\n\t\r\n\t\t\tfor ( var i = 0; i < size; i ++ ) {\r\n\t\r\n\t\t\t\tdata[ i * 3 ] \t   = r;\r\n\t\t\t\tdata[ i * 3 + 1 ] = g;\r\n\t\t\t\tdata[ i * 3 + 2 ] = b;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat );\r\n\t\t\ttexture.needsUpdate = true;\r\n\t\r\n\t\t\treturn texture;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/SceneUtils.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.SceneUtils = {\r\n\t\r\n\t\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\t\r\n\t\t\tvar group = new THREE.Group();\r\n\t\r\n\t\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn group;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdetach: function ( child, parent, scene ) {\r\n\t\r\n\t\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\t\tparent.remove( child );\r\n\t\t\tscene.add( child );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tattach: function ( child, scene, parent ) {\r\n\t\r\n\t\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\t\tchild.applyMatrix( matrixWorldInverse );\r\n\t\r\n\t\t\tscene.remove( child );\r\n\t\t\tparent.add( child );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/FontUtils.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * For Text operations in three.js (See TextGeometry)\r\n\t *\r\n\t * It uses techniques used in:\r\n\t *\r\n\t *\tTriangulation ported from AS3\r\n\t *\t\tSimple Polygon Triangulation\r\n\t *\t\thttp://actionsnippet.com/?p=1462\r\n\t *\r\n\t * \tA Method to triangulate shapes with holes\r\n\t *\t\thttp://www.sakri.net/blog/2009/06/12/an-approach-to-triangulating-polygons-with-holes/\r\n\t *\r\n\t */\r\n\t\r\n\tTHREE.FontUtils = {\r\n\t\r\n\t\tfaces: {},\r\n\t\r\n\t\t// Just for now. face[weight][style]\r\n\t\r\n\t\tface: 'helvetiker',\r\n\t\tweight: 'normal',\r\n\t\tstyle: 'normal',\r\n\t\tsize: 150,\r\n\t\tdivisions: 10,\r\n\t\r\n\t\tgetFace: function () {\r\n\t\r\n\t\t\ttry {\r\n\t\r\n\t\t\t\treturn this.faces[ this.face.toLowerCase() ][ this.weight ][ this.style ];\r\n\t\r\n\t\t\t} catch ( e ) {\r\n\t\r\n\t\t\t\tthrow \"The font \" + this.face + \" with \" + this.weight + \" weight and \" + this.style + \" style is missing.\"\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tloadFace: function ( data ) {\r\n\t\r\n\t\t\tvar family = data.familyName.toLowerCase();\r\n\t\r\n\t\t\tvar ThreeFont = this;\r\n\t\r\n\t\t\tThreeFont.faces[ family ] = ThreeFont.faces[ family ] || {};\r\n\t\r\n\t\t\tThreeFont.faces[ family ][ data.cssFontWeight ] = ThreeFont.faces[ family ][ data.cssFontWeight ] || {};\r\n\t\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\t\r\n\t\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tdrawText: function ( text ) {\r\n\t\r\n\t\t\t// RenderText\r\n\t\r\n\t\t\tvar i,\r\n\t\t\t\tface = this.getFace(),\r\n\t\t\t\tscale = this.size / face.resolution,\r\n\t\t\t\toffset = 0,\r\n\t\t\t\tchars = String( text ).split( '' ),\r\n\t\t\t\tlength = chars.length;\r\n\t\r\n\t\t\tvar fontPaths = [];\r\n\t\r\n\t\t\tfor ( i = 0; i < length; i ++ ) {\r\n\t\r\n\t\t\t\tvar path = new THREE.Path();\r\n\t\r\n\t\t\t\tvar ret = this.extractGlyphPoints( chars[ i ], face, scale, offset, path );\r\n\t\t\t\toffset += ret.offset;\r\n\t\r\n\t\t\t\tfontPaths.push( ret.path );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// get the width\r\n\t\r\n\t\t\tvar width = offset / 2;\r\n\t\t\t//\r\n\t\t\t// for ( p = 0; p < allPts.length; p++ ) {\r\n\t\t\t//\r\n\t\t\t// \tallPts[ p ].x -= width;\r\n\t\t\t//\r\n\t\t\t// }\r\n\t\r\n\t\t\t//var extract = this.extractPoints( allPts, characterPts );\r\n\t\t\t//extract.contour = allPts;\r\n\t\r\n\t\t\t//extract.paths = fontPaths;\r\n\t\t\t//extract.offset = width;\r\n\t\r\n\t\t\treturn { paths: fontPaths, offset: width };\r\n\t\r\n\t\t},\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\textractGlyphPoints: function ( c, face, scale, offset, path ) {\r\n\t\r\n\t\t\tvar pts = [];\r\n\t\r\n\t\t\tvar i, i2, divisions,\r\n\t\t\t\toutline, action, length,\r\n\t\t\t\tscaleX, scaleY,\r\n\t\t\t\tx, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2,\r\n\t\t\t\tlaste,\r\n\t\t\t\tglyph = face.glyphs[ c ] || face.glyphs[ '?' ];\r\n\t\r\n\t\t\tif ( ! glyph ) return;\r\n\t\r\n\t\t\tif ( glyph.o ) {\r\n\t\r\n\t\t\t\toutline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\t\t\t\tlength = outline.length;\r\n\t\r\n\t\t\t\tscaleX = scale;\r\n\t\t\t\tscaleY = scale;\r\n\t\r\n\t\t\t\tfor ( i = 0; i < length; ) {\r\n\t\r\n\t\t\t\t\taction = outline[ i ++ ];\r\n\t\r\n\t\t\t\t\t//console.log( action );\r\n\t\r\n\t\t\t\t\tswitch ( action ) {\r\n\t\r\n\t\t\t\t\tcase 'm':\r\n\t\r\n\t\t\t\t\t\t// Move To\r\n\t\r\n\t\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\t\r\n\t\t\t\t\t\tpath.moveTo( x, y );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'l':\r\n\t\r\n\t\t\t\t\t\t// Line To\r\n\t\r\n\t\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\t\tpath.lineTo( x, y );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'q':\r\n\t\r\n\t\t\t\t\t\t// QuadraticCurveTo\r\n\t\r\n\t\t\t\t\t\tcpx  = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\t\tcpy  = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\t\tcpx1 = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\t\tcpy1 = outline[ i ++ ] * scaleY;\r\n\t\r\n\t\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\t\r\n\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\t\r\n\t\t\t\t\t\tif ( laste ) {\r\n\t\r\n\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\t\r\n\t\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\tTHREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\t\tTHREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\tcase 'b':\r\n\t\r\n\t\t\t\t\t\t// Cubic Bezier Curve\r\n\t\r\n\t\t\t\t\t\tcpx  = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\t\tcpy  = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\t\tcpx1 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\t\tcpy1 = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\t\tcpx2 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\t\tcpy2 = outline[ i ++ ] *  scaleY;\r\n\t\r\n\t\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\t\r\n\t\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\t\r\n\t\t\t\t\t\tif ( laste ) {\r\n\t\r\n\t\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\t\tcpy0 = laste.y;\r\n\t\r\n\t\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\t\tTHREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\t\tTHREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\r\n\t\t\treturn { offset: glyph.ha * scale, path: path };\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.FontUtils.generateShapes = function ( text, parameters ) {\r\n\t\r\n\t\t// Parameters\r\n\t\r\n\t\tparameters = parameters || {};\r\n\t\r\n\t\tvar size = parameters.size !== undefined ? parameters.size : 100;\r\n\t\tvar curveSegments = parameters.curveSegments !== undefined ? parameters.curveSegments : 4;\r\n\t\r\n\t\tvar font = parameters.font !== undefined ? parameters.font : 'helvetiker';\r\n\t\tvar weight = parameters.weight !== undefined ? parameters.weight : 'normal';\r\n\t\tvar style = parameters.style !== undefined ? parameters.style : 'normal';\r\n\t\r\n\t\tTHREE.FontUtils.size = size;\r\n\t\tTHREE.FontUtils.divisions = curveSegments;\r\n\t\r\n\t\tTHREE.FontUtils.face = font;\r\n\t\tTHREE.FontUtils.weight = weight;\r\n\t\tTHREE.FontUtils.style = style;\r\n\t\r\n\t\t// Get a Font data json object\r\n\t\r\n\t\tvar data = THREE.FontUtils.drawText( text );\r\n\t\r\n\t\tvar paths = data.paths;\r\n\t\tvar shapes = [];\r\n\t\r\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\t\r\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn shapes;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t/**\r\n\t * This code is a quick port of code written in C++ which was submitted to\r\n\t * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n\t * See original code and more information here:\r\n\t * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n\t *\r\n\t * ported to actionscript by Zevan Rosser\r\n\t * www.actionsnippet.com\r\n\t *\r\n\t * ported to javascript by Joshua Koo\r\n\t * http://www.lab4games.net/zz85/blog\r\n\t *\r\n\t */\r\n\t\r\n\t\r\n\t( function ( namespace ) {\r\n\t\r\n\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t// takes in an contour array and returns\r\n\t\r\n\t\tvar process = function ( contour, indices ) {\r\n\t\r\n\t\t\tvar n = contour.length;\r\n\t\r\n\t\t\tif ( n < 3 ) return null;\r\n\t\r\n\t\t\tvar result = [],\r\n\t\t\t\tverts = [],\r\n\t\t\t\tvertIndices = [];\r\n\t\r\n\t\t\t/* we want a counter-clockwise polygon in verts */\r\n\t\r\n\t\t\tvar u, v, w;\r\n\t\r\n\t\t\tif ( area( contour ) > 0.0 ) {\r\n\t\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar nv = n;\r\n\t\r\n\t\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\t\r\n\t\t\tvar count = 2 * nv;   /* error detection */\r\n\t\r\n\t\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\t\r\n\t\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\t\r\n\t\t\t\tif ( ( count -- ) <= 0 ) {\r\n\t\r\n\t\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\t\r\n\t\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t\t//return null;\r\n\t\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\t\tconsole.warn( 'THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()' );\r\n\t\r\n\t\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\t\treturn result;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\t\r\n\t\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\t\r\n\t\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\t\r\n\t\t\t\t\tvar a, b, c, s, t;\r\n\t\r\n\t\t\t\t\t/* true names of the vertices */\r\n\t\r\n\t\t\t\t\ta = verts[ u ];\r\n\t\t\t\t\tb = verts[ v ];\r\n\t\t\t\t\tc = verts[ w ];\r\n\t\r\n\t\t\t\t\t/* output Triangle */\r\n\t\r\n\t\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\t\tcontour[ c ] ] );\r\n\t\r\n\t\r\n\t\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\t\r\n\t\t\t\t\t/* remove v from the remaining polygon */\r\n\t\r\n\t\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\r\n\t\r\n\t\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tnv --;\r\n\t\r\n\t\t\t\t\t/* reset error detection counter */\r\n\t\r\n\t\t\t\t\tcount = 2 * nv;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( indices ) return vertIndices;\r\n\t\t\treturn result;\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// calculate area of the contour polygon\r\n\t\r\n\t\tvar area = function ( contour ) {\r\n\t\r\n\t\t\tvar n = contour.length;\r\n\t\t\tvar a = 0.0;\r\n\t\r\n\t\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\t\r\n\t\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn a * 0.5;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tvar snip = function ( contour, u, v, w, n, verts ) {\r\n\t\r\n\t\t\tvar p;\r\n\t\t\tvar ax, ay, bx, by;\r\n\t\t\tvar cx, cy, px, py;\r\n\t\r\n\t\t\tax = contour[ verts[ u ] ].x;\r\n\t\t\tay = contour[ verts[ u ] ].y;\r\n\t\r\n\t\t\tbx = contour[ verts[ v ] ].x;\r\n\t\t\tby = contour[ verts[ v ] ].y;\r\n\t\r\n\t\t\tcx = contour[ verts[ w ] ].x;\r\n\t\t\tcy = contour[ verts[ w ] ].y;\r\n\t\r\n\t\t\tif ( EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\t\r\n\t\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\t\r\n\t\t\taX = cx - bx;  aY = cy - by;\r\n\t\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\t\tcX = bx - ax;  cY = by - ay;\r\n\t\r\n\t\t\tfor ( p = 0; p < n; p ++ ) {\r\n\t\r\n\t\t\t\tpx = contour[ verts[ p ] ].x;\r\n\t\t\t\tpy = contour[ verts[ p ] ].y;\r\n\t\r\n\t\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\t\r\n\t\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\t\r\n\t\t\t\t// see if p is inside triangle abc\r\n\t\r\n\t\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\t\r\n\t\t\t\tif ( ( aCROSSbp >= - EPSILON ) && ( bCROSScp >= - EPSILON ) && ( cCROSSap >= - EPSILON ) ) return false;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\r\n\t\t};\r\n\t\r\n\t\r\n\t\tnamespace.Triangulate = process;\r\n\t\tnamespace.Triangulate.area = area;\r\n\t\r\n\t\treturn namespace;\r\n\t\r\n\t} )( THREE.FontUtils );\r\n\t\r\n\t// To use the typeface.js face files, hook up the API\r\n\t\r\n\tTHREE.typeface_js = { faces: THREE.FontUtils.faces, loadFace: THREE.FontUtils.loadFace };\r\n\tif ( typeof self !== 'undefined' ) self._typeface_js = THREE.typeface_js;\r\n\t\r\n\t// File:src/extras/audio/Audio.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.Audio = function ( listener ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'Audio';\r\n\t\r\n\t\tthis.context = listener.context;\r\n\t\tthis.source = this.context.createBufferSource();\r\n\t\tthis.source.onended = this.onEnded.bind( this );\r\n\t\r\n\t\tthis.gain = this.context.createGain();\r\n\t\tthis.gain.connect( this.context.destination );\r\n\t\r\n\t\tthis.panner = this.context.createPanner();\r\n\t\tthis.panner.connect( this.gain );\r\n\t\r\n\t\tthis.autoplay = false;\r\n\t\r\n\t\tthis.startTime = 0;\r\n\t\tthis.playbackRate = 1;\r\n\t\tthis.isPlaying = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.Audio.prototype.constructor = THREE.Audio;\r\n\t\r\n\tTHREE.Audio.prototype.load = function ( file ) {\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.open( 'GET', file, true );\r\n\t\trequest.responseType = 'arraybuffer';\r\n\t\trequest.onload = function ( e ) {\r\n\t\r\n\t\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\r\n\t\r\n\t\t\t\tscope.source.buffer = buffer;\r\n\t\r\n\t\t\t\tif ( scope.autoplay ) scope.play();\r\n\t\r\n\t\t\t} );\r\n\t\r\n\t\t};\r\n\t\trequest.send();\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.play = function () {\r\n\t\r\n\t\tif ( this.isPlaying === true ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\t\treturn;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar source = this.context.createBufferSource();\r\n\t\r\n\t\tsource.buffer = this.source.buffer;\r\n\t\tsource.loop = this.source.loop;\r\n\t\tsource.onended = this.source.onended;\r\n\t\tsource.start( 0, this.startTime );\r\n\t\tsource.playbackRate.value = this.playbackRate;\r\n\t\r\n\t\tthis.isPlaying = true;\r\n\t\r\n\t\tthis.source = source;\r\n\t\r\n\t\tthis.connect();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.pause = function () {\r\n\t\r\n\t\tthis.source.stop();\r\n\t\tthis.startTime = this.context.currentTime;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.stop = function () {\r\n\t\r\n\t\tthis.source.stop();\r\n\t\tthis.startTime = 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.connect = function () {\r\n\t\r\n\t\tif ( this.filter !== undefined ) {\r\n\t\r\n\t\t\tthis.source.connect( this.filter );\r\n\t\t\tthis.filter.connect( this.panner );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.source.connect( this.panner );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.disconnect = function () {\r\n\t\r\n\t\tif ( this.filter !== undefined ) {\r\n\t\r\n\t\t\tthis.source.disconnect( this.filter );\r\n\t\t\tthis.filter.disconnect( this.panner );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.source.disconnect( this.panner );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setFilter = function ( value ) {\r\n\t\r\n\t\tif ( this.isPlaying === true ) {\r\n\t\r\n\t\t\tthis.disconnect();\r\n\t\t\tthis.filter = value;\r\n\t\t\tthis.connect();\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.filter = value;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getFilter = function () {\r\n\t\r\n\t\treturn this.filter;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setPlaybackRate = function ( value ) {\r\n\t\r\n\t\tthis.playbackRate = value;\r\n\t\r\n\t\tif ( this.isPlaying === true ) {\r\n\t\r\n\t\t\tthis.source.playbackRate.value = this.playbackRate;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getPlaybackRate = function () {\r\n\t\r\n\t\treturn this.playbackRate;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.onEnded = function() {\r\n\t\r\n\t\tthis.isPlaying = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setLoop = function ( value ) {\r\n\t\r\n\t\tthis.source.loop = value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getLoop = function () {\r\n\t\r\n\t\treturn this.source.loop;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setRefDistance = function ( value ) {\r\n\t\r\n\t\tthis.panner.refDistance = value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getRefDistance = function () {\r\n\t\r\n\t\treturn this.panner.refDistance;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setRolloffFactor = function ( value ) {\r\n\t\r\n\t\tthis.panner.rolloffFactor = value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getRolloffFactor = function () {\r\n\t\r\n\t\treturn this.panner.rolloffFactor;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.setVolume = function ( value ) {\r\n\t\r\n\t\tthis.gain.gain.value = value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.getVolume = function () {\r\n\t\r\n\t\treturn this.gain.gain.value;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Audio.prototype.updateMatrixWorld = ( function () {\r\n\t\r\n\t\tvar position = new THREE.Vector3();\r\n\t\r\n\t\treturn function updateMatrixWorld( force ) {\r\n\t\r\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\t\r\n\t\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\t\r\n\t\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/extras/audio/AudioListener.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.AudioListener = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.type = 'AudioListener';\r\n\t\r\n\t\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.AudioListener.prototype.constructor = THREE.AudioListener;\r\n\t\r\n\tTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\r\n\t\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\t\tvar scale = new THREE.Vector3();\r\n\t\r\n\t\tvar orientation = new THREE.Vector3();\r\n\t\r\n\t\treturn function updateMatrixWorld( force ) {\r\n\t\r\n\t\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\t\r\n\t\t\tvar listener = this.context.listener;\r\n\t\t\tvar up = this.up;\r\n\t\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\t\r\n\t\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\t\r\n\t\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\t\r\n\t\t};\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/extras/core/Curve.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * Extensible curve object\r\n\t *\r\n\t * Some common of Curve methods\r\n\t * .getPoint(t), getTangent(t)\r\n\t * .getPointAt(u), getTagentAt(u)\r\n\t * .getPoints(), .getSpacedPoints()\r\n\t * .getLength()\r\n\t * .updateArcLengths()\r\n\t *\r\n\t * This following classes subclasses THREE.Curve:\r\n\t *\r\n\t * -- 2d classes --\r\n\t * THREE.LineCurve\r\n\t * THREE.QuadraticBezierCurve\r\n\t * THREE.CubicBezierCurve\r\n\t * THREE.SplineCurve\r\n\t * THREE.ArcCurve\r\n\t * THREE.EllipseCurve\r\n\t *\r\n\t * -- 3d classes --\r\n\t * THREE.LineCurve3\r\n\t * THREE.QuadraticBezierCurve3\r\n\t * THREE.CubicBezierCurve3\r\n\t * THREE.SplineCurve3\r\n\t * THREE.ClosedSplineCurve3\r\n\t *\r\n\t * A series of curves can be represented as a THREE.CurvePath\r\n\t *\r\n\t **/\r\n\t\r\n\t/**************************************************************\r\n\t *\tAbstract Curve base class\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.Curve = function () {\r\n\t\r\n\t};\r\n\t\r\n\t// Virtual base class method to overwrite and implement in subclasses\r\n\t//\t- t [0 .. 1]\r\n\t\r\n\tTHREE.Curve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\r\n\t\treturn null;\r\n\t\r\n\t};\r\n\t\r\n\t// Get point at relative position in curve according to arc length\r\n\t// - u [0 .. 1]\r\n\t\r\n\tTHREE.Curve.prototype.getPointAt = function ( u ) {\r\n\t\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getPoint( t );\r\n\t\r\n\t};\r\n\t\r\n\t// Get sequence of points using getPoint( t )\r\n\t\r\n\tTHREE.Curve.prototype.getPoints = function ( divisions ) {\r\n\t\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\t\r\n\t\tvar d, pts = [];\r\n\t\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\t\r\n\t\t\tpts.push( this.getPoint( d / divisions ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn pts;\r\n\t\r\n\t};\r\n\t\r\n\t// Get sequence of points using getPointAt( u )\r\n\t\r\n\tTHREE.Curve.prototype.getSpacedPoints = function ( divisions ) {\r\n\t\r\n\t\tif ( ! divisions ) divisions = 5;\r\n\t\r\n\t\tvar d, pts = [];\r\n\t\r\n\t\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\t\r\n\t\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn pts;\r\n\t\r\n\t};\r\n\t\r\n\t// Get total curve arc length\r\n\t\r\n\tTHREE.Curve.prototype.getLength = function () {\r\n\t\r\n\t\tvar lengths = this.getLengths();\r\n\t\treturn lengths[ lengths.length - 1 ];\r\n\t\r\n\t};\r\n\t\r\n\t// Get list of cumulative segment lengths\r\n\t\r\n\tTHREE.Curve.prototype.getLengths = function ( divisions ) {\r\n\t\r\n\t\tif ( ! divisions ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\r\n\t\r\n\t\tif ( this.cacheArcLengths\r\n\t\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\r\n\t\t\t&& ! this.needsUpdate ) {\r\n\t\r\n\t\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\t\treturn this.cacheArcLengths;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.needsUpdate = false;\r\n\t\r\n\t\tvar cache = [];\r\n\t\tvar current, last = this.getPoint( 0 );\r\n\t\tvar p, sum = 0;\r\n\t\r\n\t\tcache.push( 0 );\r\n\t\r\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\t\r\n\t\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\t\tsum += current.distanceTo( last );\r\n\t\t\tcache.push( sum );\r\n\t\t\tlast = current;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.cacheArcLengths = cache;\r\n\t\r\n\t\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.Curve.prototype.updateArcLengths = function() {\r\n\t\r\n\t\tthis.needsUpdate = true;\r\n\t\tthis.getLengths();\r\n\t\r\n\t};\r\n\t\r\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\t\r\n\tTHREE.Curve.prototype.getUtoTmapping = function ( u, distance ) {\r\n\t\r\n\t\tvar arcLengths = this.getLengths();\r\n\t\r\n\t\tvar i = 0, il = arcLengths.length;\r\n\t\r\n\t\tvar targetArcLength; // The targeted u distance value to get\r\n\t\r\n\t\tif ( distance ) {\r\n\t\r\n\t\t\ttargetArcLength = distance;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//var time = Date.now();\r\n\t\r\n\t\t// binary search for the index with largest value smaller than target u distance\r\n\t\r\n\t\tvar low = 0, high = il - 1, comparison;\r\n\t\r\n\t\twhile ( low <= high ) {\r\n\t\r\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\t\r\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\t\r\n\t\t\tif ( comparison < 0 ) {\r\n\t\r\n\t\t\t\tlow = i + 1;\r\n\t\r\n\t\t\t} else if ( comparison > 0 ) {\r\n\t\r\n\t\t\t\thigh = i - 1;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\thigh = i;\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t// DONE\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\ti = high;\r\n\t\r\n\t\t//console.log('b' , i, low, high, Date.now()- time);\r\n\t\r\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\t\r\n\t\t\tvar t = i / ( il - 1 );\r\n\t\t\treturn t;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\t\r\n\t\tvar lengthBefore = arcLengths[ i ];\r\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\r\n\t\r\n\t\tvar segmentLength = lengthAfter - lengthBefore;\r\n\t\r\n\t\t// determine where we are between the 'before' and 'after' points\r\n\t\r\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\t\r\n\t\t// add that fractional amount to t\r\n\t\r\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\r\n\t\r\n\t\treturn t;\r\n\t\r\n\t};\r\n\t\r\n\t// Returns a unit vector tangent at t\r\n\t// In case any sub curve does not implement its tangent derivation,\r\n\t// 2 points a small delta apart will be used to find its gradient\r\n\t// which seems to give a reasonable approximation\r\n\t\r\n\tTHREE.Curve.prototype.getTangent = function( t ) {\r\n\t\r\n\t\tvar delta = 0.0001;\r\n\t\tvar t1 = t - delta;\r\n\t\tvar t2 = t + delta;\r\n\t\r\n\t\t// Capping in case of danger\r\n\t\r\n\t\tif ( t1 < 0 ) t1 = 0;\r\n\t\tif ( t2 > 1 ) t2 = 1;\r\n\t\r\n\t\tvar pt1 = this.getPoint( t1 );\r\n\t\tvar pt2 = this.getPoint( t2 );\r\n\t\r\n\t\tvar vec = pt2.clone().sub( pt1 );\r\n\t\treturn vec.normalize();\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.Curve.prototype.getTangentAt = function ( u ) {\r\n\t\r\n\t\tvar t = this.getUtoTmapping( u );\r\n\t\treturn this.getTangent( t );\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t\r\n\t/**************************************************************\r\n\t *\tUtils\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.Curve.Utils = {\r\n\t\r\n\t\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\t\r\n\t\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Puay Bing, thanks for helping with this derivative!\r\n\t\r\n\t\ttangentCubicBezier: function ( t, p0, p1, p2, p3 ) {\r\n\t\r\n\t\t\treturn - 3 * p0 * ( 1 - t ) * ( 1 - t )  +\r\n\t\t\t\t3 * p1 * ( 1 - t ) * ( 1 - t ) - 6 * t * p1 * ( 1 - t ) +\r\n\t\t\t\t6 * t *  p2 * ( 1 - t ) - 3 * t * t * p2 +\r\n\t\t\t\t3 * t * t * p3;\r\n\t\r\n\t\t},\r\n\t\r\n\t\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\t\r\n\t\t\t// To check if my formulas are correct\r\n\t\r\n\t\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3  3t^2 + 1\r\n\t\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3  2t^2 + t\r\n\t\t\tvar h01 = - 6 * t * t + 6 * t; \t//  2t3 + 3t2\r\n\t\t\tvar h11 = 3 * t * t - 2 * t;\t// t3  t2\r\n\t\r\n\t\t\treturn h00 + h10 + h01 + h11;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Catmull-Rom\r\n\t\r\n\t\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\t\r\n\t\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\t\tvar t2 = t * t;\r\n\t\t\tvar t3 = t * t2;\r\n\t\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t// TODO: Transformation for Curves?\r\n\t\r\n\t/**************************************************************\r\n\t *\t3D Curves\r\n\t **************************************************************/\r\n\t\r\n\t// A Factory method for creating new curve subclasses\r\n\t\r\n\tTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\t\r\n\t\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\t\tconstructor.prototype.constructor = constructor;\r\n\t\tconstructor.prototype.getPoint = getPointFunc;\r\n\t\r\n\t\treturn constructor;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/core/CurvePath.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t *\r\n\t **/\r\n\t\r\n\t/**************************************************************\r\n\t *\tCurved Path - a curve path is simply a array of connected\r\n\t *  curves, but retains the api of a curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.CurvePath = function () {\r\n\t\r\n\t\tthis.curves = [];\r\n\t\tthis.bends = [];\r\n\t\r\n\t\tthis.autoClose = false; // Automatically closes the path\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.CurvePath.prototype.constructor = THREE.CurvePath;\r\n\t\r\n\tTHREE.CurvePath.prototype.add = function ( curve ) {\r\n\t\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.checkConnection = function() {\r\n\t\t// TODO\r\n\t\t// If the ending of curve is not connected to the starting\r\n\t\t// or the next curve, then, this is not a real path\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.closePath = function() {\r\n\t\r\n\t\t// TODO Test\r\n\t\t// and verify for vector3 (needs to implement equals)\r\n\t\t// Add a line curve if start and end of lines are not connected\r\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\t\r\n\t\tif ( ! startPoint.equals( endPoint ) ) {\r\n\t\r\n\t\t\tthis.curves.push( new THREE.LineCurve( endPoint, startPoint ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// To get accurate point with reference to\r\n\t// entire path distance at time t,\r\n\t// following has to be done:\r\n\t\r\n\t// 1. Length of each sub path have to be known\r\n\t// 2. Locate and identify type of curve\r\n\t// 3. Get t for the curve\r\n\t// 4. Return curve.getPointAt(t')\r\n\t\r\n\tTHREE.CurvePath.prototype.getPoint = function( t ) {\r\n\t\r\n\t\tvar d = t * this.getLength();\r\n\t\tvar curveLengths = this.getCurveLengths();\r\n\t\tvar i = 0, diff, curve;\r\n\t\r\n\t\t// To think about boundaries points.\r\n\t\r\n\t\twhile ( i < curveLengths.length ) {\r\n\t\r\n\t\t\tif ( curveLengths[ i ] >= d ) {\r\n\t\r\n\t\t\t\tdiff = curveLengths[ i ] - d;\r\n\t\t\t\tcurve = this.curves[ i ];\r\n\t\r\n\t\t\t\tvar u = 1 - diff / curve.getLength();\r\n\t\r\n\t\t\t\treturn curve.getPointAt( u );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\ti ++;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn null;\r\n\t\r\n\t\t// loop where sum != 0, sum > d , sum+1 <d\r\n\t\r\n\t};\r\n\t\r\n\t/*\r\n\tTHREE.CurvePath.prototype.getTangent = function( t ) {\r\n\t};*/\r\n\t\r\n\t\r\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n\t// getPoint() depends on getLength\r\n\t\r\n\tTHREE.CurvePath.prototype.getLength = function() {\r\n\t\r\n\t\tvar lens = this.getCurveLengths();\r\n\t\treturn lens[ lens.length - 1 ];\r\n\t\r\n\t};\r\n\t\r\n\t// Compute lengths and cache them\r\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\t\r\n\tTHREE.CurvePath.prototype.getCurveLengths = function() {\r\n\t\r\n\t\t// We use cache values if curves and cache array are same length\r\n\t\r\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\t\r\n\t\t\treturn this.cacheLengths;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Get length of sub-curve\r\n\t\t// Push sums into cached array\r\n\t\r\n\t\tvar lengths = [], sums = 0;\r\n\t\tvar i, il = this.curves.length;\r\n\t\r\n\t\tfor ( i = 0; i < il; i ++ ) {\r\n\t\r\n\t\t\tsums += this.curves[ i ].getLength();\r\n\t\t\tlengths.push( sums );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.cacheLengths = lengths;\r\n\t\r\n\t\treturn lengths;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t\r\n\t// Returns min and max coordinates\r\n\t\r\n\tTHREE.CurvePath.prototype.getBoundingBox = function () {\r\n\t\r\n\t\tvar points = this.getPoints();\r\n\t\r\n\t\tvar maxX, maxY, maxZ;\r\n\t\tvar minX, minY, minZ;\r\n\t\r\n\t\tmaxX = maxY = Number.NEGATIVE_INFINITY;\r\n\t\tminX = minY = Number.POSITIVE_INFINITY;\r\n\t\r\n\t\tvar p, i, il, sum;\r\n\t\r\n\t\tvar v3 = points[ 0 ] instanceof THREE.Vector3;\r\n\t\r\n\t\tsum = v3 ? new THREE.Vector3() : new THREE.Vector2();\r\n\t\r\n\t\tfor ( i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tp = points[ i ];\r\n\t\r\n\t\t\tif ( p.x > maxX ) maxX = p.x;\r\n\t\t\telse if ( p.x < minX ) minX = p.x;\r\n\t\r\n\t\t\tif ( p.y > maxY ) maxY = p.y;\r\n\t\t\telse if ( p.y < minY ) minY = p.y;\r\n\t\r\n\t\t\tif ( v3 ) {\r\n\t\r\n\t\t\t\tif ( p.z > maxZ ) maxZ = p.z;\r\n\t\t\t\telse if ( p.z < minZ ) minZ = p.z;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tsum.add( p );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar ret = {\r\n\t\r\n\t\t\tminX: minX,\r\n\t\t\tminY: minY,\r\n\t\t\tmaxX: maxX,\r\n\t\t\tmaxY: maxY\r\n\t\r\n\t\t};\r\n\t\r\n\t\tif ( v3 ) {\r\n\t\r\n\t\t\tret.maxZ = maxZ;\r\n\t\t\tret.minZ = minZ;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn ret;\r\n\t\r\n\t};\r\n\t\r\n\t/**************************************************************\r\n\t *\tCreate Geometries Helpers\r\n\t **************************************************************/\r\n\t\r\n\t/// Generate geometry from path points (for Line or Points objects)\r\n\t\r\n\tTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\r\n\t\r\n\t\tvar pts = this.getPoints( divisions, true );\r\n\t\treturn this.createGeometry( pts );\r\n\t\r\n\t};\r\n\t\r\n\t// Generate geometry from equidistant sampling along the path\r\n\t\r\n\tTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\r\n\t\r\n\t\tvar pts = this.getSpacedPoints( divisions, true );\r\n\t\treturn this.createGeometry( pts );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.createGeometry = function( points ) {\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\r\n\t\tfor ( var i = 0; i < points.length; i ++ ) {\r\n\t\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3( points[ i ].x, points[ i ].y, points[ i ].z || 0 ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t/**************************************************************\r\n\t *\tBend / Wrap Helper Methods\r\n\t **************************************************************/\r\n\t\r\n\t// Wrap path / Bend modifiers?\r\n\t\r\n\tTHREE.CurvePath.prototype.addWrapPath = function ( bendpath ) {\r\n\t\r\n\t\tthis.bends.push( bendpath );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.getTransformedPoints = function( segments, bends ) {\r\n\t\r\n\t\tvar oldPts = this.getPoints( segments ); // getPoints getSpacedPoints\r\n\t\tvar i, il;\r\n\t\r\n\t\tif ( ! bends ) {\r\n\t\r\n\t\t\tbends = this.bends;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\t\r\n\t\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn oldPts;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CurvePath.prototype.getTransformedSpacedPoints = function( segments, bends ) {\r\n\t\r\n\t\tvar oldPts = this.getSpacedPoints( segments );\r\n\t\r\n\t\tvar i, il;\r\n\t\r\n\t\tif ( ! bends ) {\r\n\t\r\n\t\t\tbends = this.bends;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\t\r\n\t\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn oldPts;\r\n\t\r\n\t};\r\n\t\r\n\t// This returns getPoints() bend/wrapped around the contour of a path.\r\n\t// Read http://www.planetclegg.com/projects/WarpingTextToSplines.html\r\n\t\r\n\tTHREE.CurvePath.prototype.getWrapPoints = function ( oldPts, path ) {\r\n\t\r\n\t\tvar bounds = this.getBoundingBox();\r\n\t\r\n\t\tvar i, il, p, oldX, oldY, xNorm;\r\n\t\r\n\t\tfor ( i = 0, il = oldPts.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tp = oldPts[ i ];\r\n\t\r\n\t\t\toldX = p.x;\r\n\t\t\toldY = p.y;\r\n\t\r\n\t\t\txNorm = oldX / bounds.maxX;\r\n\t\r\n\t\t\t// If using actual distance, for length > path, requires line extrusions\r\n\t\t\t//xNorm = path.getUtoTmapping(xNorm, oldX); // 3 styles. 1) wrap stretched. 2) wrap stretch by arc length 3) warp by actual distance\r\n\t\r\n\t\t\txNorm = path.getUtoTmapping( xNorm, oldX );\r\n\t\r\n\t\t\t// check for out of bounds?\r\n\t\r\n\t\t\tvar pathPt = path.getPoint( xNorm );\r\n\t\t\tvar normal = path.getTangent( xNorm );\r\n\t\t\tnormal.set( - normal.y, normal.x ).multiplyScalar( oldY );\r\n\t\r\n\t\t\tp.x = pathPt.x + normal.x;\r\n\t\t\tp.y = pathPt.y + normal.y;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn oldPts;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/core/Path.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * Creates free form 2d path using series of points, lines or curves.\r\n\t *\r\n\t **/\r\n\t\r\n\tTHREE.Path = function ( points ) {\r\n\t\r\n\t\tTHREE.CurvePath.call( this );\r\n\t\r\n\t\tthis.actions = [];\r\n\t\r\n\t\tif ( points ) {\r\n\t\r\n\t\t\tthis.fromPoints( points );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\r\n\tTHREE.Path.prototype.constructor = THREE.Path;\r\n\t\r\n\tTHREE.PathActions = {\r\n\t\r\n\t\tMOVE_TO: 'moveTo',\r\n\t\tLINE_TO: 'lineTo',\r\n\t\tQUADRATIC_CURVE_TO: 'quadraticCurveTo', // Bezier quadratic curve\r\n\t\tBEZIER_CURVE_TO: 'bezierCurveTo', \t\t// Bezier cubic curve\r\n\t\tCSPLINE_THRU: 'splineThru',\t\t\t\t// Catmull-Rom spline\r\n\t\tARC: 'arc',\t\t\t\t\t\t\t\t// Circle\r\n\t\tELLIPSE: 'ellipse'\r\n\t};\r\n\t\r\n\t// TODO Clean up PATH API\r\n\t\r\n\t// Create path using straight lines to connect all points\r\n\t// - vectors: array of Vector2\r\n\t\r\n\tTHREE.Path.prototype.fromPoints = function ( vectors ) {\r\n\t\r\n\t\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\t\r\n\t\tfor ( var v = 1, vlen = vectors.length; v < vlen; v ++ ) {\r\n\t\r\n\t\t\tthis.lineTo( vectors[ v ].x, vectors[ v ].y );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// startPath() endPath()?\r\n\t\r\n\tTHREE.Path.prototype.moveTo = function ( x, y ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\tthis.actions.push( { action: THREE.PathActions.MOVE_TO, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype.lineTo = function ( x, y ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.LINE_TO, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tvar curve = new THREE.QuadraticBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.QUADRATIC_CURVE_TO, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y,\r\n\t\t\t\t\t\t\t\t\t\t\t\t   aCP2x, aCP2y,\r\n\t\t\t\t\t\t\t\t\t\t\t\t   aX, aY ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tvar curve = new THREE.CubicBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.BEZIER_CURVE_TO, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\r\n\t\r\n\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\t//---\r\n\t\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\t\tArray.prototype.push.apply( npts, pts );\r\n\t\r\n\t\tvar curve = new THREE.SplineCurve( npts );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.CSPLINE_THRU, args: args } );\r\n\t\r\n\t};\r\n\t\r\n\t// FUTURE: Change the API or follow canvas API?\r\n\t\r\n\tTHREE.Path.prototype.arc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\t\taStartAngle, aEndAngle, aClockwise );\r\n\t\r\n\t };\r\n\t\r\n\t THREE.Path.prototype.absarc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\t\r\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\t\r\n\t };\r\n\t\r\n\tTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\t\r\n\t\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\t\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\t\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t\r\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius,\r\n\t\t\taStartAngle, aEndAngle, aClockwise, aRotation );\r\n\t\r\n\t };\r\n\t\r\n\t\r\n\tTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\t\r\n\t\tvar args = [\r\n\t\t\taX, aY,\r\n\t\t\txRadius, yRadius,\r\n\t\t\taStartAngle, aEndAngle,\r\n\t\t\taClockwise,\r\n\t\t\taRotation || 0 // aRotation is optional.\r\n\t\t];\r\n\t\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t\taStartAngle, aEndAngle, aClockwise, aRotation );\r\n\t\tthis.curves.push( curve );\r\n\t\r\n\t\tvar lastPoint = curve.getPoint( 1 );\r\n\t\targs.push( lastPoint.x );\r\n\t\targs.push( lastPoint.y );\r\n\t\r\n\t\tthis.actions.push( { action: THREE.PathActions.ELLIPSE, args: args } );\r\n\t\r\n\t };\r\n\t\r\n\tTHREE.Path.prototype.getSpacedPoints = function ( divisions, closedPath ) {\r\n\t\r\n\t\tif ( ! divisions ) divisions = 40;\r\n\t\r\n\t\tvar points = [];\r\n\t\r\n\t\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\t\r\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\t\r\n\t\t\t//if( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// if ( closedPath ) {\r\n\t\t//\r\n\t\t// \tpoints.push( points[ 0 ] );\r\n\t\t//\r\n\t\t// }\r\n\t\r\n\t\treturn points;\r\n\t\r\n\t};\r\n\t\r\n\t/* Return an array of vectors based on contour of the path */\r\n\t\r\n\tTHREE.Path.prototype.getPoints = function( divisions, closedPath ) {\r\n\t\r\n\t\tif ( this.useSpacedPoints ) {\r\n\t\r\n\t\t\treturn this.getSpacedPoints( divisions, closedPath );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tdivisions = divisions || 12;\r\n\t\r\n\t\tvar points = [];\r\n\t\r\n\t\tvar i, il, item, action, args;\r\n\t\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\t\tlaste, j,\r\n\t\t\tt, tx, ty;\r\n\t\r\n\t\tfor ( i = 0, il = this.actions.length; i < il; i ++ ) {\r\n\t\r\n\t\t\titem = this.actions[ i ];\r\n\t\r\n\t\t\taction = item.action;\r\n\t\t\targs = item.args;\r\n\t\r\n\t\t\tswitch ( action ) {\r\n\t\r\n\t\t\tcase THREE.PathActions.MOVE_TO:\r\n\t\r\n\t\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.LINE_TO:\r\n\t\r\n\t\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.QUADRATIC_CURVE_TO:\r\n\t\r\n\t\t\t\tcpx  = args[ 2 ];\r\n\t\t\t\tcpy  = args[ 3 ];\r\n\t\r\n\t\t\t\tcpx1 = args[ 0 ];\r\n\t\t\t\tcpy1 = args[ 1 ];\r\n\t\r\n\t\t\t\tif ( points.length > 0 ) {\r\n\t\r\n\t\t\t\t\tlaste = points[ points.length - 1 ];\r\n\t\r\n\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\tcpy0 = laste.y;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\t\r\n\t\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\t\r\n\t\t\t\t\tt = j / divisions;\r\n\t\r\n\t\t\t\t\ttx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\tty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\t\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.BEZIER_CURVE_TO:\r\n\t\r\n\t\t\t\tcpx  = args[ 4 ];\r\n\t\t\t\tcpy  = args[ 5 ];\r\n\t\r\n\t\t\t\tcpx1 = args[ 0 ];\r\n\t\t\t\tcpy1 = args[ 1 ];\r\n\t\r\n\t\t\t\tcpx2 = args[ 2 ];\r\n\t\t\t\tcpy2 = args[ 3 ];\r\n\t\r\n\t\t\t\tif ( points.length > 0 ) {\r\n\t\r\n\t\t\t\t\tlaste = points[ points.length - 1 ];\r\n\t\r\n\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\tcpy0 = laste.y;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\t\r\n\t\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\t\r\n\t\t\t\t\tt = j / divisions;\r\n\t\r\n\t\t\t\t\ttx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\tty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\t\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.CSPLINE_THRU:\r\n\t\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\t\r\n\t\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\t\tvar spts = [ last ];\r\n\t\r\n\t\t\t\tvar n = divisions * args[ 0 ].length;\r\n\t\r\n\t\t\t\tspts = spts.concat( args[ 0 ] );\r\n\t\r\n\t\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= n; j ++ ) {\r\n\t\r\n\t\t\t\t\tpoints.push( spline.getPointAt( j / n ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.ARC:\r\n\t\r\n\t\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\t\taClockwise = !! args[ 5 ];\r\n\t\r\n\t\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\t\tvar angle;\r\n\t\t\t\tvar tdivisions = divisions * 2;\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\t\r\n\t\t\t\t\tt = j / tdivisions;\r\n\t\r\n\t\t\t\t\tif ( ! aClockwise ) {\r\n\t\r\n\t\t\t\t\t\tt = 1 - t;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\t\r\n\t\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\t\r\n\t\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\t\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t//console.log(points);\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\tcase THREE.PathActions.ELLIPSE:\r\n\t\r\n\t\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\t\taClockwise = !! args[ 6 ],\r\n\t\t\t\t\taRotation = args[ 7 ];\r\n\t\r\n\t\r\n\t\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\t\tvar angle;\r\n\t\t\t\tvar tdivisions = divisions * 2;\r\n\t\r\n\t\t\t\tvar cos, sin;\r\n\t\t\t\tif ( aRotation !== 0 ) {\r\n\t\t\t\r\n\t\t\t\t\tcos = Math.cos( aRotation );\r\n\t\t\t\t\tsin = Math.sin( aRotation );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\t\r\n\t\t\t\t\tt = j / tdivisions;\r\n\t\r\n\t\t\t\t\tif ( ! aClockwise ) {\r\n\t\r\n\t\t\t\t\t\tt = 1 - t;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\t\r\n\t\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\t\r\n\t\t\t\t\tif ( aRotation !== 0 ) {\r\n\t\r\n\t\t\t\t\t\tvar x = tx, y = ty;\r\n\t\r\n\t\t\t\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\t\t\t\ttx = ( x - aX ) * cos - ( y - aY ) * sin + aX;\r\n\t\t\t\t\t\tty = ( x - aX ) * sin + ( y - aY ) * cos + aY;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\t\r\n\t\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t//console.log(points);\r\n\t\r\n\t\t\t\tbreak;\r\n\t\r\n\t\t\t} // end switch\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\r\n\t\t// Normalize to remove the closing point by default.\r\n\t\tvar lastPoint = points[ points.length - 1 ];\r\n\t\tvar EPSILON = 0.0000000001;\r\n\t\tif ( Math.abs( lastPoint.x - points[ 0 ].x ) < EPSILON &&\r\n\t\t\t\t Math.abs( lastPoint.y - points[ 0 ].y ) < EPSILON )\r\n\t\t\tpoints.splice( points.length - 1, 1 );\r\n\t\tif ( closedPath ) {\r\n\t\r\n\t\t\tpoints.push( points[ 0 ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn points;\r\n\t\r\n\t};\r\n\t\r\n\t//\r\n\t// Breaks path into shapes\r\n\t//\r\n\t//\tAssumptions (if parameter isCCW==true the opposite holds):\r\n\t//\t- solid shapes are defined clockwise (CW)\r\n\t//\t- holes are defined counterclockwise (CCW)\r\n\t//\r\n\t//\tIf parameter noHoles==true:\r\n\t//  - all subPaths are regarded as solid shapes\r\n\t//  - definition order CW/CCW has no relevance\r\n\t//\r\n\t\r\n\tTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\r\n\t\r\n\t\tfunction extractSubpaths( inActions ) {\r\n\t\r\n\t\t\tvar i, il, item, action, args;\r\n\t\r\n\t\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\t\r\n\t\t\tfor ( i = 0, il = inActions.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\titem = inActions[ i ];\r\n\t\r\n\t\t\t\targs = item.args;\r\n\t\t\t\taction = item.action;\r\n\t\r\n\t\t\t\tif ( action === THREE.PathActions.MOVE_TO ) {\r\n\t\r\n\t\t\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\t\r\n\t\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\t\tlastPath = new THREE.Path();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\t\r\n\t\t\t\tsubPaths.push( lastPath );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// console.log(subPaths);\r\n\t\r\n\t\t\treturn\tsubPaths;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction toShapesNoHoles( inSubpaths ) {\r\n\t\r\n\t\t\tvar shapes = [];\r\n\t\r\n\t\t\tfor ( var i = 0, il = inSubpaths.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\t\r\n\t\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\t\ttmpShape.curves = tmpPath.curves;\r\n\t\r\n\t\t\t\tshapes.push( tmpShape );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//console.log(\"shape\", shapes);\r\n\t\r\n\t\t\treturn shapes;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\t\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t\tvar polyLen = inPolygon.length;\r\n\t\r\n\t\t\t// inPt on polygon contour => immediate success    or\r\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\t\tvar inside = false;\r\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\t\r\n\t\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\t\r\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\t\r\n\t\t\t\tif ( Math.abs( edgeDy ) > EPSILON ) {\r\n\t\r\n\t\t\t\t\t// not parallel\r\n\t\t\t\t\tif ( edgeDy < 0 ) {\r\n\t\r\n\t\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\t\r\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\t\r\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// parallel or collinear\r\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t\t// continue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn\tinside;\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tvar subPaths = extractSubpaths( this.actions );\r\n\t\tif ( subPaths.length === 0 ) return [];\r\n\t\r\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\t\r\n\t\r\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\t\r\n\t\tif ( subPaths.length === 1 ) {\r\n\t\r\n\t\t\ttmpPath = subPaths[ 0 ];\r\n\t\t\ttmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\treturn shapes;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar holesFirst = ! THREE.Shape.Utils.isClockWise( subPaths[ 0 ].getPoints() );\r\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\t\r\n\t\t// console.log(\"Holes first\", holesFirst);\r\n\t\r\n\t\tvar betterShapeHoles = [];\r\n\t\tvar newShapes = [];\r\n\t\tvar newShapeHoles = [];\r\n\t\tvar mainIdx = 0;\r\n\t\tvar tmpPoints;\r\n\t\r\n\t\tnewShapes[ mainIdx ] = undefined;\r\n\t\tnewShapeHoles[ mainIdx ] = [];\r\n\t\r\n\t\tvar i, il;\r\n\t\r\n\t\tfor ( i = 0, il = subPaths.length; i < il; i ++ ) {\r\n\t\r\n\t\t\ttmpPath = subPaths[ i ];\r\n\t\t\ttmpPoints = tmpPath.getPoints();\r\n\t\t\tsolid = THREE.Shape.Utils.isClockWise( tmpPoints );\r\n\t\t\tsolid = isCCW ? ! solid : solid;\r\n\t\r\n\t\t\tif ( solid ) {\r\n\t\r\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\t\r\n\t\t\t\tnewShapes[ mainIdx ] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\t\tnewShapes[ mainIdx ].s.actions = tmpPath.actions;\r\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\t\r\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\t\r\n\t\t\t\t//console.log('cw', i);\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\t\r\n\t\t\t\t//console.log('ccw', i);\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// only Holes? -> probably all Shapes with wrong orientation\r\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\t\r\n\t\r\n\t\tif ( newShapes.length > 1 ) {\r\n\t\r\n\t\t\tvar ambiguous = false;\r\n\t\t\tvar toChange = [];\r\n\t\r\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\t\r\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\t\r\n\t\t\t}\r\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\t\r\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\r\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\t\r\n\t\t\t\t\tvar ho = sho[ hIdx ];\r\n\t\t\t\t\tvar hole_unassigned = true;\r\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\t\r\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\t\r\n\t\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\tambiguous = true;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( hole_unassigned ) {\r\n\t\r\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\t\t\tif ( toChange.length > 0 ) {\r\n\t\r\n\t\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar tmpHoles, j, jl;\r\n\t\tfor ( i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\t\r\n\t\t\ttmpShape = newShapes[ i ].s;\r\n\t\t\tshapes.push( tmpShape );\r\n\t\t\ttmpHoles = newShapeHoles[ i ];\r\n\t\t\tfor ( j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//console.log(\"shape\", shapes);\r\n\t\r\n\t\treturn shapes;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/core/Shape.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * Defines a 2d shape plane using paths.\r\n\t **/\r\n\t\r\n\t// STEP 1 Create a path.\r\n\t// STEP 2 Turn path into shape.\r\n\t// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n\t// STEP 3a - Extract points from each shape, turn to vertices\r\n\t// STEP 3b - Triangulate each shape, add faces.\r\n\t\r\n\tTHREE.Shape = function () {\r\n\t\r\n\t\tTHREE.Path.apply( this, arguments );\r\n\t\tthis.holes = [];\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\r\n\tTHREE.Shape.prototype.constructor = THREE.Shape;\r\n\t\r\n\t// Convenience method to return ExtrudeGeometry\r\n\t\r\n\tTHREE.Shape.prototype.extrude = function ( options ) {\r\n\t\r\n\t\tvar extruded = new THREE.ExtrudeGeometry( this, options );\r\n\t\treturn extruded;\r\n\t\r\n\t};\r\n\t\r\n\t// Convenience method to return ShapeGeometry\r\n\t\r\n\tTHREE.Shape.prototype.makeGeometry = function ( options ) {\r\n\t\r\n\t\tvar geometry = new THREE.ShapeGeometry( this, options );\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// Get points of holes\r\n\t\r\n\tTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\r\n\t\r\n\t\tvar i, il = this.holes.length, holesPts = [];\r\n\t\r\n\t\tfor ( i = 0; i < il; i ++ ) {\r\n\t\r\n\t\t\tholesPts[ i ] = this.holes[ i ].getTransformedPoints( divisions, this.bends );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn holesPts;\r\n\t\r\n\t};\r\n\t\r\n\t// Get points of holes (spaced by regular distance)\r\n\t\r\n\tTHREE.Shape.prototype.getSpacedPointsHoles = function ( divisions ) {\r\n\t\r\n\t\tvar i, il = this.holes.length, holesPts = [];\r\n\t\r\n\t\tfor ( i = 0; i < il; i ++ ) {\r\n\t\r\n\t\t\tholesPts[ i ] = this.holes[ i ].getTransformedSpacedPoints( divisions, this.bends );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn holesPts;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t// Get points of shape and holes (keypoints based on segments parameter)\r\n\t\r\n\tTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\r\n\t\r\n\t\treturn {\r\n\t\r\n\t\t\tshape: this.getTransformedPoints( divisions ),\r\n\t\t\tholes: this.getPointsHoles( divisions )\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Shape.prototype.extractPoints = function ( divisions ) {\r\n\t\r\n\t\tif ( this.useSpacedPoints ) {\r\n\t\r\n\t\t\treturn this.extractAllSpacedPoints( divisions );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this.extractAllPoints( divisions );\r\n\t\r\n\t};\r\n\t\r\n\t//\r\n\t// THREE.Shape.prototype.extractAllPointsWithBend = function ( divisions, bend ) {\r\n\t//\r\n\t// \treturn {\r\n\t//\r\n\t// \t\tshape: this.transform( bend, divisions ),\r\n\t// \t\tholes: this.getPointsHoles( divisions, bend )\r\n\t//\r\n\t// \t};\r\n\t//\r\n\t// };\r\n\t\r\n\t// Get points of shape and holes (spaced by regular distance)\r\n\t\r\n\tTHREE.Shape.prototype.extractAllSpacedPoints = function ( divisions ) {\r\n\t\r\n\t\treturn {\r\n\t\r\n\t\t\tshape: this.getTransformedSpacedPoints( divisions ),\r\n\t\t\tholes: this.getSpacedPointsHoles( divisions )\r\n\t\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\t/**************************************************************\r\n\t *\tUtils\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.Shape.Utils = {\r\n\t\r\n\t\ttriangulateShape: function ( contour, holes ) {\r\n\t\r\n\t\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\t\r\n\t\t\t\t// inOtherPt needs to be collinear to the inSegment\r\n\t\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\r\n\t\r\n\t\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\t\r\n\t\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\t\r\n\t\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\t\r\n\t\t\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\t\r\n\t\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\t\r\n\t\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\t\r\n\t\t\t\tif ( Math.abs( limit ) > EPSILON ) {\r\n\t\r\n\t\t\t\t\t// not parallel\r\n\t\r\n\t\t\t\t\tvar perpSeg2;\r\n\t\t\t\t\tif ( limit > 0 ) {\r\n\t\r\n\t\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\t\tif ( perpSeg2 === 0 ) {\r\n\t\r\n\t\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( perpSeg2 === limit ) {\r\n\t\r\n\t\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\t\treturn [ inSeg1Pt2 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\r\n\t\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\r\n\t\r\n\t\t\t\t\t// return real intersection point\r\n\t\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// parallel or collinear\r\n\t\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\r\n\t\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\t\r\n\t\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\r\n\t\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\r\n\t\t\t\t\t// both segments are points\r\n\t\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\t\r\n\t\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\r\n\t\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\r\n\t\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// segment#1  is a single point\r\n\t\t\t\t\tif ( seg1Pt ) {\r\n\t\r\n\t\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// segment#2  is a single point\r\n\t\t\t\t\tif ( seg2Pt ) {\r\n\t\r\n\t\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\t\treturn [ inSeg2Pt1 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\t\tif ( seg1dx !== 0 ) {\r\n\t\r\n\t\t\t\t\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\t\r\n\t\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\t\r\n\t\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\t\r\n\t\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\t\r\n\t\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\t\r\n\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\t\r\n\t\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\r\n\t\r\n\t\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\t\treturn [ seg2min ];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\r\n\t\r\n\t\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\t\treturn [ seg1min ];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\t\r\n\t\t\t\t// The order of legs is important\r\n\t\r\n\t\t\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\t\r\n\t\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\t\r\n\t\t\t\tif ( Math.abs( from2toAngle ) > EPSILON ) {\r\n\t\r\n\t\t\t\t\t// angle != 180 deg.\r\n\t\r\n\t\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\t\r\n\t\t\t\t\tif ( from2toAngle > 0 ) {\r\n\t\r\n\t\t\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\tfunction removeHoles( contour, holes ) {\r\n\t\r\n\t\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\t\tvar hole;\r\n\t\r\n\t\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\t\r\n\t\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\t\r\n\t\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\t\r\n\t\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\t\r\n\t\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\r\n\t\t\t\t\tif ( ! insideAngle ) {\r\n\t\r\n\t\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\t\treturn\tfalse;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\t\r\n\t\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\t\r\n\t\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\t\r\n\t\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\r\n\t\t\t\t\tif ( ! insideAngle ) {\r\n\t\r\n\t\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\t\treturn\tfalse;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\treturn\ttrue;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\t\r\n\t\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\t\r\n\t\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\treturn\tfalse;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar indepHoles = [];\r\n\t\r\n\t\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\t\r\n\t\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\t\r\n\t\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\r\n\t\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\r\n\t\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn\tfalse;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\t\tshapePt, holePt,\r\n\t\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\t\ttmpHole1, tmpHole2;\r\n\t\r\n\t\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\t\tindepHoles.push( h );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar minShapeIndex = 0;\r\n\t\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\t\twhile ( indepHoles.length > 0 ) {\r\n\t\r\n\t\t\t\t\tcounter --;\r\n\t\t\t\t\tif ( counter < 0 ) {\r\n\t\r\n\t\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t\t// which can be connected without intersections\r\n\t\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\t\r\n\t\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\t\tholeIndex\t= - 1;\r\n\t\r\n\t\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tholeIdx = indepHoles[ h ];\r\n\t\r\n\t\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\r\n\t\r\n\t\t\t\t\t\t\thole = holes[ holeIdx ];\r\n\t\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\r\n\t\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\r\n\t\r\n\t\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\r\n\t\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\r\n\t\r\n\t\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\t\r\n\t\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\t\r\n\t\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\t\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\t\r\n\t\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\tvar i, il, f, face,\r\n\t\t\t\tkey, index,\r\n\t\t\t\tallPointsMap = {};\r\n\t\r\n\t\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\t\r\n\t\t\tvar allpoints = contour.concat();\r\n\t\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\t\r\n\t\t\t// prepare all points map\r\n\t\r\n\t\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\t\r\n\t\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\t\r\n\t\t\t\t\tconsole.warn( \"THREE.Shape: Duplicate point\", key );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tallPointsMap[ key ] = i;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\t\r\n\t\t\tvar triangles = THREE.FontUtils.Triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\t\r\n\t\t\t// check all face vertices against all points map\r\n\t\r\n\t\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tface = triangles[ i ];\r\n\t\r\n\t\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\t\r\n\t\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\t\r\n\t\t\t\t\tindex = allPointsMap[ key ];\r\n\t\r\n\t\t\t\t\tif ( index !== undefined ) {\r\n\t\r\n\t\t\t\t\t\tface[ f ] = index;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn triangles.concat();\r\n\t\r\n\t\t},\r\n\t\r\n\t\tisClockWise: function ( pts ) {\r\n\t\r\n\t\t\treturn THREE.FontUtils.Triangulate.area( pts ) < 0;\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Bezier Curves formulas obtained from\r\n\t\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\t\r\n\t\t// Quad Bezier Functions\r\n\t\r\n\t\tb2p0: function ( t, p ) {\r\n\t\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb2p1: function ( t, p ) {\r\n\t\r\n\t\t\treturn 2 * ( 1 - t ) * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb2p2: function ( t, p ) {\r\n\t\r\n\t\t\treturn t * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb2: function ( t, p0, p1, p2 ) {\r\n\t\r\n\t\t\treturn this.b2p0( t, p0 ) + this.b2p1( t, p1 ) + this.b2p2( t, p2 );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t// Cubic Bezier Functions\r\n\t\r\n\t\tb3p0: function ( t, p ) {\r\n\t\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn k * k * k * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb3p1: function ( t, p ) {\r\n\t\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * k * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb3p2: function ( t, p ) {\r\n\t\r\n\t\t\tvar k = 1 - t;\r\n\t\t\treturn 3 * k * t * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb3p3: function ( t, p ) {\r\n\t\r\n\t\t\treturn t * t * t * p;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tb3: function ( t, p0, p1, p2, p3 ) {\r\n\t\r\n\t\t\treturn this.b3p0( t, p0 ) + this.b3p1( t, p1 ) + this.b3p2( t, p2 ) +  this.b3p3( t, p3 );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/LineCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tLine\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.LineCurve = function ( v1, v2 ) {\r\n\t\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\r\n\t\r\n\tTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar point = this.v2.clone().sub( this.v1 );\r\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\t\r\n\t\treturn point;\r\n\t\r\n\t};\r\n\t\r\n\t// Line curve is linear, so we can overwrite default getPointAt\r\n\t\r\n\tTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\t\r\n\t\treturn this.getPoint( u );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\t\r\n\t\tvar tangent = this.v2.clone().sub( this.v1 );\r\n\t\r\n\t\treturn tangent.normalize();\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/QuadraticBezierCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tQuadratic Bezier curve\r\n\t **************************************************************/\r\n\t\r\n\t\r\n\tTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\t\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\r\n\t\r\n\t\r\n\tTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar vector = new THREE.Vector2();\r\n\t\r\n\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\r\n\t\treturn vector;\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\t\r\n\t\tvar vector = new THREE.Vector2();\r\n\t\r\n\t\tvector.x = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\tvector.y = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\r\n\t\t// returns unit vector\r\n\t\r\n\t\treturn vector.normalize();\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/CubicBezierCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tCubic Bezier curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\t\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\r\n\t\r\n\tTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar tx, ty;\r\n\t\r\n\t\ttx = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\tty = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\r\n\t\treturn new THREE.Vector2( tx, ty );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\t\r\n\t\tvar tx, ty;\r\n\t\r\n\t\ttx = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\tty = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\r\n\t\tvar tangent = new THREE.Vector2( tx, ty );\r\n\t\ttangent.normalize();\r\n\t\r\n\t\treturn tangent;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/SplineCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tSpline curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\t\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\r\n\t\r\n\tTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\t\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\t\r\n\t\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\t\r\n\t\tvar vector = new THREE.Vector2();\r\n\t\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\r\n\t\treturn vector;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/EllipseCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tEllipse curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\t\r\n\t\tthis.aX = aX;\r\n\t\tthis.aY = aY;\r\n\t\r\n\t\tthis.xRadius = xRadius;\r\n\t\tthis.yRadius = yRadius;\r\n\t\r\n\t\tthis.aStartAngle = aStartAngle;\r\n\t\tthis.aEndAngle = aEndAngle;\r\n\t\r\n\t\tthis.aClockwise = aClockwise;\r\n\t\t\r\n\t\tthis.aRotation = aRotation || 0;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\n\tTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\r\n\t\r\n\tTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\t\r\n\t\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\t\r\n\t\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\t\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\t\r\n\t\tvar angle;\r\n\t\r\n\t\tif ( this.aClockwise === true ) {\r\n\t\r\n\t\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\t\r\n\t\t}\r\n\t\t\r\n\t\tvar x = this.aX + this.xRadius * Math.cos( angle );\r\n\t\tvar y = this.aY + this.yRadius * Math.sin( angle );\r\n\t\r\n\t\tif ( this.aRotation !== 0 ) {\r\n\t\r\n\t\t\tvar cos = Math.cos( this.aRotation );\r\n\t\t\tvar sin = Math.sin( this.aRotation );\r\n\t\r\n\t\t\tvar tx = x, ty = y;\r\n\t\r\n\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\tx = ( tx - this.aX ) * cos - ( ty - this.aY ) * sin + this.aX;\r\n\t\t\ty = ( tx - this.aX ) * sin + ( ty - this.aY ) * cos + this.aY;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn new THREE.Vector2( x, y );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/curves/ArcCurve.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tArc curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\t\r\n\t\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\n\tTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\r\n\t\r\n\t// File:src/extras/curves/LineCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tLine3D\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.LineCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( v1, v2 ) {\r\n\t\r\n\t\t\tthis.v1 = v1;\r\n\t\t\tthis.v2 = v2;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\t\tvector.multiplyScalar( t );\r\n\t\t\tvector.add( this.v1 );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tQuadratic Bezier 3D curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( v0, v1, v2 ) {\r\n\t\r\n\t\t\tthis.v0 = v0;\r\n\t\t\tthis.v1 = v1;\r\n\t\t\tthis.v2 = v2;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\t\tvector.z = THREE.Shape.Utils.b2( t, this.v0.z, this.v1.z, this.v2.z );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/curves/CubicBezierCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tCubic Bezier 3D curve\r\n\t **************************************************************/\r\n\t\r\n\tTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( v0, v1, v2, v3 ) {\r\n\t\r\n\t\t\tthis.v0 = v0;\r\n\t\t\tthis.v1 = v1;\r\n\t\t\tthis.v2 = v2;\r\n\t\t\tthis.v3 = v3;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.x = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\t\tvector.y = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\t\tvector.z = THREE.Shape.Utils.b3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/curves/SplineCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tSpline 3D curve\r\n\t **************************************************************/\r\n\t\r\n\t\r\n\tTHREE.SplineCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( points /* array of Vector3 */ ) {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3' );\r\n\t\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar points = this.points;\r\n\t\t\tvar point = ( points.length - 1 ) * t;\r\n\t\r\n\t\t\tvar intPoint = Math.floor( point );\r\n\t\t\tvar weight = point - intPoint;\r\n\t\r\n\t\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\t\tvar point1 = points[ intPoint ];\r\n\t\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/curves/CatmullRomCurve3.js\r\n\t\r\n\t/**\r\n\t * @author zz85 https://github.com/zz85\r\n\t *\r\n\t * Centripetal CatmullRom Curve - which is useful for avoiding\r\n\t * cusps and self-intersections in non-uniform catmull rom curves.\r\n\t * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n\t *\r\n\t * curve.type accepts centripetal(default), chordal and catmullrom\r\n\t * curve.tension is used for catmullrom which defaults to 0.5\r\n\t */\r\n\t\r\n\tTHREE.CatmullRomCurve3 = ( function() {\r\n\t\r\n\t\tvar\r\n\t\t\ttmp = new THREE.Vector3(),\r\n\t\t\tpx = new CubicPoly(),\r\n\t\t\tpy = new CubicPoly(),\r\n\t\t\tpz = new CubicPoly();\r\n\t\r\n\t\t/*\r\n\t\tBased on an optimized c++ solution in\r\n\t\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t\t - http://ideone.com/NoEbVM\r\n\t\r\n\t\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\t\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\t\twhich can be placed in CurveUtils.\r\n\t\t*/\r\n\t\r\n\t\tfunction CubicPoly() {\r\n\t\r\n\t\t}\r\n\t\r\n\t\t/*\r\n\t\t * Compute coefficients for a cubic polynomial\r\n\t\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t\t * such that\r\n\t\t *   p(0) = x0, p(1) = x1\r\n\t\t *  and\r\n\t\t *   p'(0) = t0, p'(1) = t1.\r\n\t\t */\r\n\t\tCubicPoly.prototype.init = function( x0, x1, t0, t1 ) {\r\n\t\r\n\t\t\tthis.c0 = x0;\r\n\t\t\tthis.c1 = t0;\r\n\t\t\tthis.c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\t\tthis.c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tCubicPoly.prototype.initNonuniformCatmullRom = function( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\t\r\n\t\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\t\r\n\t\t\t// rescale tangents for parametrization in [0,1]\r\n\t\t\tt1 *= dt1;\r\n\t\t\tt2 *= dt1;\r\n\t\r\n\t\t\t// initCubicPoly\r\n\t\t\tthis.init( x1, x2, t1, t2 );\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\r\n\t\tCubicPoly.prototype.initCatmullRom = function( x0, x1, x2, x3, tension ) {\r\n\t\r\n\t\t\tthis.init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\t\r\n\t\t};\r\n\t\r\n\t\tCubicPoly.prototype.calc = function( t ) {\r\n\t\r\n\t\t\tvar t2 = t * t;\r\n\t\t\tvar t3 = t2 * t;\r\n\t\t\treturn this.c0 + this.c1 * t + this.c2 * t2 + this.c3 * t3;\r\n\t\r\n\t\t};\r\n\t\r\n\t\t// Subclass Three.js curve\r\n\t\treturn THREE.Curve.create(\r\n\t\r\n\t\t\tfunction ( p /* array of Vector3 */ ) {\r\n\t\r\n\t\t\t\tthis.points = p || [];\r\n\t\r\n\t\t\t},\r\n\t\r\n\t\t\tfunction ( t ) {\r\n\t\r\n\t\t\t\tvar points = this.points,\r\n\t\t\t\t\tpoint, intPoint, weight, l;\r\n\t\r\n\t\t\t\tl = points.length;\r\n\t\r\n\t\t\t\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\r\n\t\r\n\t\t\t\tpoint = ( l - 1 ) * t;\r\n\t\t\t\tintPoint = Math.floor( point );\r\n\t\t\t\tweight = point - intPoint;\r\n\t\r\n\t\t\t\tif ( weight === 0 && intPoint === l - 1 ) {\r\n\t\r\n\t\t\t\t\tintPoint = l - 2;\r\n\t\t\t\t\tweight = 1;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar p0, p1, p2, p3;\r\n\t\r\n\t\t\t\tif ( intPoint === 0 ) {\r\n\t\r\n\t\t\t\t\t// extrapolate first point\r\n\t\t\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\t\t\t\tp0 = tmp;\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tp0 = points[ intPoint - 1 ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tp1 = points[ intPoint ];\r\n\t\t\t\tp2 = points[ intPoint + 1 ];\r\n\t\r\n\t\t\t\tif ( intPoint + 2 < l ) {\r\n\t\r\n\t\t\t\t\tp3 = points[ intPoint + 2 ]\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// extrapolate last point\r\n\t\t\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 2 ] );\r\n\t\t\t\t\tp3 = tmp;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\r\n\t\r\n\t\t\t\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\t\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\r\n\t\t\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\t\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\t\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\t\r\n\t\t\t\t\t// safety check for repeated points\r\n\t\t\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\t\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\t\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\t\r\n\t\t\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\t\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\t\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\t\r\n\t\t\t\t} else if ( this.type === 'catmullrom' ) {\r\n\t\r\n\t\t\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\r\n\t\t\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\r\n\t\t\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\r\n\t\t\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar v = new THREE.Vector3(\r\n\t\t\t\t\tpx.calc( weight ),\r\n\t\t\t\t\tpy.calc( weight ),\r\n\t\t\t\t\tpz.calc( weight )\r\n\t\t\t\t);\r\n\t\r\n\t\t\t\treturn v;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t);\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/extras/curves/ClosedSplineCurve3.js\r\n\t\r\n\t/**************************************************************\r\n\t *\tClosed Spline 3D curve\r\n\t **************************************************************/\r\n\t\r\n\t\r\n\tTHREE.ClosedSplineCurve3 = THREE.Curve.create(\r\n\t\r\n\t\tfunction ( points /* array of Vector3 */ ) {\r\n\t\r\n\t\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tfunction ( t ) {\r\n\t\r\n\t\t\tvar points = this.points;\r\n\t\t\tvar point = ( points.length - 0 ) * t; // This needs to be from 0-length +1\r\n\t\r\n\t\t\tvar intPoint = Math.floor( point );\r\n\t\t\tvar weight = point - intPoint;\r\n\t\r\n\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\t\r\n\t\t\tvar point0 = points[ ( intPoint - 1 ) % points.length ];\r\n\t\t\tvar point1 = points[ ( intPoint     ) % points.length ];\r\n\t\t\tvar point2 = points[ ( intPoint + 1 ) % points.length ];\r\n\t\t\tvar point3 = points[ ( intPoint + 2 ) % points.length ];\r\n\t\r\n\t\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\t\r\n\t\t\treturn vector;\r\n\t\r\n\t\t}\r\n\t\r\n\t);\r\n\t\r\n\t// File:src/extras/animation/AnimationHandler.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t */\r\n\t\r\n\tTHREE.AnimationHandler = {\r\n\t\r\n\t\tLINEAR: 0,\r\n\t\tCATMULLROM: 1,\r\n\t\tCATMULLROM_FORWARD: 2,\r\n\t\r\n\t\t//\r\n\t\r\n\t\tadd: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.AnimationHandler.add() has been deprecated.' );\r\n\t\r\n\t\t},\r\n\t\tget: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.AnimationHandler.get() has been deprecated.' );\r\n\t\r\n\t\t},\r\n\t\tremove: function () {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.AnimationHandler.remove() has been deprecated.' );\r\n\t\r\n\t\t},\r\n\t\r\n\t\t//\r\n\t\r\n\t\tanimations: [],\r\n\t\r\n\t\tinit: function ( data ) {\r\n\t\r\n\t\t\tif ( data.initialized === true ) return data;\r\n\t\r\n\t\t\t// loop through all keys\r\n\t\r\n\t\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\r\n\t\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\t// remove minus times\r\n\t\r\n\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\r\n\t\r\n\t\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// create quaternions\r\n\t\r\n\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\r\n\t\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\r\n\t\r\n\t\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\r\n\t\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// prepare morph target keys\r\n\t\r\n\t\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\r\n\t\r\n\t\t\t\t\t// get all used\r\n\t\r\n\t\t\t\t\tvar usedMorphTargets = {};\r\n\t\r\n\t\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\r\n\t\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\r\n\t\r\n\t\r\n\t\t\t\t\t// set all used on all frames\r\n\t\r\n\t\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar influences = {};\r\n\t\r\n\t\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\r\n\t\r\n\t\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\t\r\n\t\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\r\n\t\r\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t// remove all keys that are on the same time\r\n\t\r\n\t\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\r\n\t\r\n\t\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\r\n\t\t\t\t\t\tk --;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\r\n\t\t\t\t// set index\r\n\t\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\t\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tdata.initialized = true;\r\n\t\r\n\t\t\treturn data;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tparse: function ( root ) {\r\n\t\r\n\t\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\r\n\t\r\n\t\t\t\thierarchy.push( root );\r\n\t\r\n\t\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\r\n\t\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\t// setup hierarchy\r\n\t\r\n\t\t\tvar hierarchy = [];\r\n\t\r\n\t\t\tif ( root instanceof THREE.SkinnedMesh ) {\r\n\t\r\n\t\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\r\n\t\r\n\t\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tparseRecurseHierarchy( root, hierarchy );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn hierarchy;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tplay: function ( animation ) {\r\n\t\r\n\t\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\r\n\t\r\n\t\t\t\tthis.animations.push( animation );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tstop: function ( animation ) {\r\n\t\r\n\t\t\tvar index = this.animations.indexOf( animation );\r\n\t\r\n\t\t\tif ( index !== - 1 ) {\r\n\t\r\n\t\t\t\tthis.animations.splice( index, 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: function ( deltaTimeMS ) {\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\t\r\n\t\t\t\tthis.animations[ i ].resetBlendWeights();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\t\r\n\t\t\t\tthis.animations[ i ].update( deltaTimeMS );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/animation/Animation.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.Animation = function ( root, data ) {\r\n\t\r\n\t\tthis.root = root;\r\n\t\tthis.data = THREE.AnimationHandler.init( data );\r\n\t\tthis.hierarchy = THREE.AnimationHandler.parse( root );\r\n\t\r\n\t\tthis.currentTime = 0;\r\n\t\tthis.timeScale = 1;\r\n\t\r\n\t\tthis.isPlaying = false;\r\n\t\tthis.loop = true;\r\n\t\tthis.weight = 0;\r\n\t\r\n\t\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.Animation.prototype = {\r\n\t\r\n\t\tconstructor: THREE.Animation,\r\n\t\r\n\t\tkeyTypes:  [ \"pos\", \"rot\", \"scl\" ],\r\n\t\r\n\t\tplay: function ( startTime, weight ) {\r\n\t\r\n\t\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\t\t\tthis.weight = weight !== undefined ? weight : 1;\r\n\t\r\n\t\t\tthis.isPlaying = true;\r\n\t\r\n\t\t\tthis.reset();\r\n\t\r\n\t\t\tTHREE.AnimationHandler.play( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tstop: function() {\r\n\t\r\n\t\t\tthis.isPlaying = false;\r\n\t\r\n\t\t\tTHREE.AnimationHandler.stop( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\treset: function () {\r\n\t\r\n\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\r\n\t\t\t\tif ( object.animationCache === undefined ) {\r\n\t\r\n\t\t\t\t\tobject.animationCache = {\r\n\t\t\t\t\t\tanimations: {},\r\n\t\t\t\t\t\tblending: {\r\n\t\t\t\t\t\t\tpositionWeight: 0.0,\r\n\t\t\t\t\t\t\tquaternionWeight: 0.0,\r\n\t\t\t\t\t\t\tscaleWeight: 0.0\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar name = this.data.name;\r\n\t\t\t\tvar animations = object.animationCache.animations;\r\n\t\t\t\tvar animationCache = animations[ name ];\r\n\t\r\n\t\t\t\tif ( animationCache === undefined ) {\r\n\t\r\n\t\t\t\t\tanimationCache = {\r\n\t\t\t\t\t\tprevKey: { pos: 0, rot: 0, scl: 0 },\r\n\t\t\t\t\t\tnextKey: { pos: 0, rot: 0, scl: 0 },\r\n\t\t\t\t\t\toriginalMatrix: object.matrix\r\n\t\t\t\t\t};\r\n\t\r\n\t\t\t\t\tanimations[ name ] = animationCache;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Get keys to match our current time\r\n\t\r\n\t\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\t\r\n\t\t\t\t\tvar type = this.keyTypes[ t ];\r\n\t\r\n\t\t\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\r\n\t\r\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\t\r\n\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tresetBlendWeights: function () {\r\n\t\r\n\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\t\tvar animationCache = object.animationCache;\r\n\t\r\n\t\t\t\tif ( animationCache !== undefined ) {\r\n\t\r\n\t\t\t\t\tvar blending = animationCache.blending;\r\n\t\r\n\t\t\t\t\tblending.positionWeight = 0.0;\r\n\t\t\t\t\tblending.quaternionWeight = 0.0;\r\n\t\t\t\t\tblending.scaleWeight = 0.0;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: ( function() {\r\n\t\r\n\t\t\tvar points = [];\r\n\t\t\tvar target = new THREE.Vector3();\r\n\t\t\tvar newVector = new THREE.Vector3();\r\n\t\t\tvar newQuat = new THREE.Quaternion();\r\n\t\r\n\t\t\t// Catmull-Rom spline\r\n\t\r\n\t\t\tvar interpolateCatmullRom = function ( points, scale ) {\r\n\t\r\n\t\t\t\tvar c = [], v3 = [],\r\n\t\t\t\tpoint, intPoint, weight, w2, w3,\r\n\t\t\t\tpa, pb, pc, pd;\r\n\t\r\n\t\t\t\tpoint = ( points.length - 1 ) * scale;\r\n\t\t\t\tintPoint = Math.floor( point );\r\n\t\t\t\tweight = point - intPoint;\r\n\t\r\n\t\t\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\t\t\tc[ 1 ] = intPoint;\r\n\t\t\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\r\n\t\t\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\r\n\t\r\n\t\t\t\tpa = points[ c[ 0 ] ];\r\n\t\t\t\tpb = points[ c[ 1 ] ];\r\n\t\t\t\tpc = points[ c[ 2 ] ];\r\n\t\t\t\tpd = points[ c[ 3 ] ];\r\n\t\r\n\t\t\t\tw2 = weight * weight;\r\n\t\t\t\tw3 = weight * w2;\r\n\t\r\n\t\t\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\r\n\t\t\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\r\n\t\t\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\r\n\t\r\n\t\t\t\treturn v3;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\r\n\t\r\n\t\t\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\t\r\n\t\t\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t\treturn function ( delta ) {\r\n\t\r\n\t\t\t\tif ( this.isPlaying === false ) return;\r\n\t\r\n\t\t\t\tthis.currentTime += delta * this.timeScale;\r\n\t\r\n\t\t\t\tif ( this.weight === 0 )\r\n\t\t\t\t\treturn;\r\n\t\r\n\t\t\t\t//\r\n\t\r\n\t\t\t\tvar duration = this.data.length;\r\n\t\r\n\t\t\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\r\n\t\r\n\t\t\t\t\tif ( this.loop ) {\r\n\t\r\n\t\t\t\t\t\tthis.currentTime %= duration;\r\n\t\r\n\t\t\t\t\t\tif ( this.currentTime < 0 )\r\n\t\t\t\t\t\t\tthis.currentTime += duration;\r\n\t\r\n\t\t\t\t\t\tthis.reset();\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tthis.stop();\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\t\t\tvar animationCache = object.animationCache.animations[ this.data.name ];\r\n\t\t\t\t\tvar blending = object.animationCache.blending;\r\n\t\r\n\t\t\t\t\t// loop through pos/rot/scl\r\n\t\r\n\t\t\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\t\r\n\t\t\t\t\t\t// get keys\r\n\t\r\n\t\t\t\t\t\tvar type    = this.keyTypes[ t ];\r\n\t\t\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\r\n\t\t\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\r\n\t\r\n\t\t\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\r\n\t\t\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\r\n\t\r\n\t\t\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\r\n\t\r\n\t\t\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\t\r\n\t\t\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\r\n\t\r\n\t\t\t\t\t\tvar prevXYZ = prevKey[ type ];\r\n\t\t\t\t\t\tvar nextXYZ = nextKey[ type ];\r\n\t\r\n\t\t\t\t\t\tif ( scale < 0 ) scale = 0;\r\n\t\t\t\t\t\tif ( scale > 1 ) scale = 1;\r\n\t\r\n\t\t\t\t\t\t// interpolate\r\n\t\r\n\t\t\t\t\t\tif ( type === \"pos\" ) {\r\n\t\r\n\t\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\r\n\t\r\n\t\t\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\t\r\n\t\t\t\t\t\t\t\t// blend\r\n\t\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\t\r\n\t\t\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\t\r\n\t\t\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\r\n\t\t\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\r\n\t\t\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\r\n\t\t\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\r\n\t\r\n\t\t\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\r\n\t\r\n\t\t\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\r\n\t\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\t\r\n\t\t\t\t\t\t\t\t// blend\r\n\t\r\n\t\t\t\t\t\t\t\tvar vector = object.position;\r\n\t\r\n\t\t\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\r\n\t\t\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\r\n\t\t\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\r\n\t\r\n\t\t\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\t\r\n\t\t\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\r\n\t\r\n\t\t\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\r\n\t\t\t\t\t\t\t\t\ttarget.sub( vector );\r\n\t\t\t\t\t\t\t\t\ttarget.y = 0;\r\n\t\t\t\t\t\t\t\t\ttarget.normalize();\r\n\t\r\n\t\t\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\r\n\t\t\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\r\n\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else if ( type === \"rot\" ) {\r\n\t\r\n\t\t\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\r\n\t\r\n\t\t\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\r\n\t\t\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\r\n\t\r\n\t\t\t\t\t\t\t\tobject.quaternion.copy( newQuat );\r\n\t\t\t\t\t\t\t\tblending.quaternionWeight = this.weight;\r\n\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\r\n\t\t\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\r\n\t\t\t\t\t\t\t\tblending.quaternionWeight += this.weight;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t} else if ( type === \"scl\" ) {\r\n\t\r\n\t\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\t\r\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\r\n\t\t\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\t\tblending.scaleWeight += this.weight;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn true;\r\n\t\r\n\t\t\t};\r\n\t\r\n\t\t} )(),\r\n\t\r\n\t\tgetNextKeyWith: function ( type, h, key ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\r\n\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\t\r\n\t\t\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tkey = key % keys.length;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( ; key < keys.length; key ++ ) {\r\n\t\r\n\t\t\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn keys[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetPrevKeyWith: function ( type, h, key ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\r\n\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\t\r\n\t\t\t\tkey = key > 0 ? key : 0;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tkey = key >= 0 ? key : key + keys.length;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\r\n\t\t\tfor ( ; key >= 0; key -- ) {\r\n\t\r\n\t\t\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\t\r\n\t\t\t\t\treturn keys[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/animation/KeyFrameAnimation.js\r\n\t\r\n\t/**\r\n\t * @author mikael emtinger / http://gomo.se/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author khang duong\r\n\t * @author erik kitson\r\n\t */\r\n\t\r\n\tTHREE.KeyFrameAnimation = function ( data ) {\r\n\t\r\n\t\tthis.root = data.node;\r\n\t\tthis.data = THREE.AnimationHandler.init( data );\r\n\t\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\r\n\t\tthis.currentTime = 0;\r\n\t\tthis.timeScale = 0.001;\r\n\t\tthis.isPlaying = false;\r\n\t\tthis.isPaused = true;\r\n\t\tthis.loop = true;\r\n\t\r\n\t\t// initialize to first keyframes\r\n\t\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys,\r\n\t\t\t\tsids = this.data.hierarchy[ h ].sids,\r\n\t\t\t\tobj = this.hierarchy[ h ];\r\n\t\r\n\t\t\tif ( keys.length && sids ) {\r\n\t\r\n\t\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\r\n\t\r\n\t\t\t\t\tvar sid = sids[ s ],\r\n\t\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\r\n\t\r\n\t\t\t\t\tif ( next ) {\r\n\t\r\n\t\t\t\t\t\tnext.apply( sid );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tobj.matrixAutoUpdate = false;\r\n\t\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\t\tobj.matrixWorldNeedsUpdate = true;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.KeyFrameAnimation.prototype = {\r\n\t\r\n\t\tconstructor: THREE.KeyFrameAnimation,\r\n\t\r\n\t\tplay: function ( startTime ) {\r\n\t\r\n\t\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\t\r\n\t\t\tif ( this.isPlaying === false ) {\r\n\t\r\n\t\t\t\tthis.isPlaying = true;\r\n\t\r\n\t\t\t\t// reset key cache\r\n\t\r\n\t\t\t\tvar h, hl = this.hierarchy.length,\r\n\t\t\t\t\tobject,\r\n\t\t\t\t\tnode;\r\n\t\r\n\t\t\t\tfor ( h = 0; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\t\tobject = this.hierarchy[ h ];\r\n\t\t\t\t\tnode = this.data.hierarchy[ h ];\r\n\t\r\n\t\t\t\t\tif ( node.animationCache === undefined ) {\r\n\t\r\n\t\t\t\t\t\tnode.animationCache = {};\r\n\t\t\t\t\t\tnode.animationCache.prevKey = null;\r\n\t\t\t\t\t\tnode.animationCache.nextKey = null;\r\n\t\t\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\r\n\t\t\t\t\tif ( keys.length ) {\r\n\t\r\n\t\t\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\r\n\t\t\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\r\n\t\r\n\t\t\t\t\t\tthis.startTime = Math.min( keys[ 0 ].time, this.startTime );\r\n\t\t\t\t\t\tthis.endTime = Math.max( keys[ keys.length - 1 ].time, this.endTime );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.update( 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.isPaused = false;\r\n\t\r\n\t\t\tTHREE.AnimationHandler.play( this );\r\n\t\r\n\t\t},\r\n\t\r\n\t\tstop: function () {\r\n\t\r\n\t\t\tthis.isPlaying = false;\r\n\t\t\tthis.isPaused  = false;\r\n\t\r\n\t\t\tTHREE.AnimationHandler.stop( this );\r\n\t\r\n\t\t\t// reset JIT matrix and remove cache\r\n\t\r\n\t\t\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\r\n\t\r\n\t\t\t\tvar obj = this.hierarchy[ h ];\r\n\t\t\t\tvar node = this.data.hierarchy[ h ];\r\n\t\r\n\t\t\t\tif ( node.animationCache !== undefined ) {\r\n\t\r\n\t\t\t\t\tvar original = node.animationCache.originalMatrix;\r\n\t\r\n\t\t\t\t\toriginal.copy( obj.matrix );\r\n\t\t\t\t\tobj.matrix = original;\r\n\t\r\n\t\t\t\t\tdelete node.animationCache;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: function ( delta ) {\r\n\t\r\n\t\t\tif ( this.isPlaying === false ) return;\r\n\t\r\n\t\t\tthis.currentTime += delta * this.timeScale;\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar duration = this.data.length;\r\n\t\r\n\t\t\tif ( this.loop === true && this.currentTime > duration ) {\r\n\t\r\n\t\t\t\tthis.currentTime %= duration;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.currentTime = Math.min( this.currentTime, duration );\r\n\t\r\n\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\t\tvar node = this.data.hierarchy[ h ];\r\n\t\r\n\t\t\t\tvar keys = node.keys,\r\n\t\t\t\t\tanimationCache = node.animationCache;\r\n\t\r\n\t\r\n\t\t\t\tif ( keys.length ) {\r\n\t\r\n\t\t\t\t\tvar prevKey = animationCache.prevKey;\r\n\t\t\t\t\tvar nextKey = animationCache.nextKey;\r\n\t\r\n\t\t\t\t\tif ( nextKey.time <= this.currentTime ) {\r\n\t\r\n\t\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\t\r\n\t\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tanimationCache.prevKey = prevKey;\r\n\t\t\t\t\t\tanimationCache.nextKey = nextKey;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( nextKey.time >= this.currentTime ) {\r\n\t\r\n\t\t\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\t\t\tobject.matrixWorldNeedsUpdate = true;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetNextKeyWith: function ( sid, h, key ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\t\tkey = key % keys.length;\r\n\t\r\n\t\t\tfor ( ; key < keys.length; key ++ ) {\r\n\t\r\n\t\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\t\r\n\t\t\t\t\treturn keys[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn keys[ 0 ];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgetPrevKeyWith: function ( sid, h, key ) {\r\n\t\r\n\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\t\tkey = key >= 0 ? key : key + keys.length;\r\n\t\r\n\t\t\tfor ( ; key >= 0; key -- ) {\r\n\t\r\n\t\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\t\r\n\t\t\t\t\treturn keys[ key ];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn keys[ keys.length - 1 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/animation/MorphAnimation.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com\r\n\t * @author willy-vvu / http://willy-vvu.github.io\r\n\t */\r\n\t\r\n\tTHREE.MorphAnimation = function ( mesh ) {\r\n\t\r\n\t\tthis.mesh = mesh;\r\n\t\tthis.frames = mesh.morphTargetInfluences.length;\r\n\t\tthis.currentTime = 0;\r\n\t\tthis.duration = 1000;\r\n\t\tthis.loop = true;\r\n\t\tthis.lastFrame = 0;\r\n\t\tthis.currentFrame = 0;\r\n\t\r\n\t\tthis.isPlaying = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphAnimation.prototype = {\r\n\t\r\n\t\tconstructor: THREE.MorphAnimation,\r\n\t\r\n\t\tplay: function () {\r\n\t\r\n\t\t\tthis.isPlaying = true;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tpause: function () {\r\n\t\r\n\t\t\tthis.isPlaying = false;\r\n\t\r\n\t\t},\r\n\t\r\n\t\tupdate: function ( delta ) {\r\n\t\r\n\t\t\tif ( this.isPlaying === false ) return;\r\n\t\r\n\t\t\tthis.currentTime += delta;\r\n\t\r\n\t\t\tif ( this.loop === true && this.currentTime > this.duration ) {\r\n\t\r\n\t\t\t\tthis.currentTime %= this.duration;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\r\n\t\r\n\t\t\tvar frameTime = this.duration / this.frames;\r\n\t\t\tvar frame = Math.floor( this.currentTime / frameTime );\r\n\t\r\n\t\t\tvar influences = this.mesh.morphTargetInfluences;\r\n\t\r\n\t\t\tif ( frame !== this.currentFrame ) {\r\n\t\r\n\t\t\t\tinfluences[ this.lastFrame ] = 0;\r\n\t\t\t\tinfluences[ this.currentFrame ] = 1;\r\n\t\t\t\tinfluences[ frame ] = 0;\r\n\t\r\n\t\t\t\tthis.lastFrame = this.currentFrame;\r\n\t\t\t\tthis.currentFrame = frame;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar mix = ( this.currentTime % frameTime ) / frameTime;\r\n\t\r\n\t\t\tinfluences[ frame ] = mix;\r\n\t\t\tinfluences[ this.lastFrame ] = 1 - mix;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/BoxGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n\t */\r\n\t\r\n\tTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'BoxGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\tdepth: depth,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tdepthSegments: depthSegments\r\n\t\t};\r\n\t\r\n\t\tthis.widthSegments = widthSegments || 1;\r\n\t\tthis.heightSegments = heightSegments || 1;\r\n\t\tthis.depthSegments = depthSegments || 1;\r\n\t\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar width_half = width / 2;\r\n\t\tvar height_half = height / 2;\r\n\t\tvar depth_half = depth / 2;\r\n\t\r\n\t\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\r\n\t\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\r\n\t\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\r\n\t\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\r\n\t\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\r\n\t\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\r\n\t\r\n\t\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\r\n\t\r\n\t\t\tvar w, ix, iy,\r\n\t\t\tgridX = scope.widthSegments,\r\n\t\t\tgridY = scope.heightSegments,\r\n\t\t\twidth_half = width / 2,\r\n\t\t\theight_half = height / 2,\r\n\t\t\toffset = scope.vertices.length;\r\n\t\r\n\t\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\r\n\t\r\n\t\t\t\tw = 'z';\r\n\t\r\n\t\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\r\n\t\r\n\t\t\t\tw = 'y';\r\n\t\t\t\tgridY = scope.depthSegments;\r\n\t\r\n\t\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\r\n\t\r\n\t\t\t\tw = 'x';\r\n\t\t\t\tgridX = scope.depthSegments;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar gridX1 = gridX + 1,\r\n\t\t\tgridY1 = gridY + 1,\r\n\t\t\tsegment_width = width / gridX,\r\n\t\t\tsegment_height = height / gridY,\r\n\t\t\tnormal = new THREE.Vector3();\r\n\t\r\n\t\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\r\n\t\r\n\t\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\r\n\t\r\n\t\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\r\n\t\r\n\t\t\t\t\tvar vector = new THREE.Vector3();\r\n\t\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\r\n\t\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\r\n\t\t\t\t\tvector[ w ] = depth;\r\n\t\r\n\t\t\t\t\tscope.vertices.push( vector );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\t\r\n\t\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\t\r\n\t\t\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\t\r\n\t\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\r\n\t\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\r\n\t\r\n\t\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\r\n\t\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\t\tface.materialIndex = materialIndex;\r\n\t\r\n\t\t\t\t\tscope.faces.push( face );\r\n\t\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\t\r\n\t\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\r\n\t\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\t\tface.materialIndex = materialIndex;\r\n\t\r\n\t\t\t\t\tscope.faces.push( face );\r\n\t\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.mergeVertices();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\r\n\t\r\n\tTHREE.BoxGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.BoxGeometry(\r\n\t\t\tthis.parameters.width,\r\n\t\t\tthis.parameters.height,\r\n\t\t\tthis.parameters.depth,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments,\r\n\t\t\tthis.parameters.depthSegments\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CubeGeometry = THREE.BoxGeometry; // backwards compatibility\r\n\t\r\n\t// File:src/extras/geometries/CircleGeometry.js\r\n\t\r\n\t/**\r\n\t * @author hughes\r\n\t */\r\n\t\r\n\tTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'CircleGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tsegments: segments,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 50;\r\n\t\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\t\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\t\r\n\t\tvar i, uvs = [],\r\n\t\tcenter = new THREE.Vector3(), centerUV = new THREE.Vector2( 0.5, 0.5 );\r\n\t\r\n\t\tthis.vertices.push( center );\r\n\t\tuvs.push( centerUV );\r\n\t\r\n\t\tfor ( i = 0; i <= segments; i ++ ) {\r\n\t\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvar segment = thetaStart + i / segments * thetaLength;\r\n\t\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\t\r\n\t\t\tthis.vertices.push( vertex );\r\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / radius + 1 ) / 2, ( vertex.y / radius + 1 ) / 2 ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\t\r\n\t\tfor ( i = 1; i <= segments; i ++ ) {\r\n\t\r\n\t\t\tthis.faces.push( new THREE.Face3( i, i + 1, 0, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ i ].clone(), uvs[ i + 1 ].clone(), centerUV.clone() ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\r\n\t\r\n\tTHREE.CircleGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.CircleGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.segments,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/CircleBufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t */\r\n\t\r\n\tTHREE.CircleBufferGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthis.type = 'CircleBufferGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tsegments: segments,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 50;\r\n\t\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\t\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\t\r\n\t\tvar vertices = segments + 2;\r\n\t\r\n\t\tvar positions = new Float32Array( vertices * 3 );\r\n\t\tvar normals = new Float32Array( vertices * 3 );\r\n\t\tvar uvs = new Float32Array( vertices * 2 );\r\n\t\r\n\t\t// center data is already zero, but need to set a few extras\r\n\t\tnormals[ 3 ] = 1.0;\r\n\t\tuvs[ 0 ] = 0.5;\r\n\t\tuvs[ 1 ] = 0.5;\r\n\t\r\n\t\tfor ( var s = 0, i = 3, ii = 2 ; s <= segments; s ++, i += 3, ii += 2 ) {\r\n\t\r\n\t\t\tvar segment = thetaStart + s / segments * thetaLength;\r\n\t\r\n\t\t\tpositions[ i ] = radius * Math.cos( segment );\r\n\t\t\tpositions[ i + 1 ] = radius * Math.sin( segment );\r\n\t\r\n\t\t\tnormals[ i + 2 ] = 1; // normal z\r\n\t\r\n\t\t\tuvs[ ii ] = ( positions[ i ] / radius + 1 ) / 2;\r\n\t\t\tuvs[ ii + 1 ] = ( positions[ i + 1 ] / radius + 1 ) / 2;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar indices = [];\r\n\t\r\n\t\tfor ( var i = 1; i <= segments; i ++ ) {\r\n\t\r\n\t\t\tindices.push( i );\r\n\t\t\tindices.push( i + 1 );\r\n\t\t\tindices.push( 0 );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CircleBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry;\r\n\t\r\n\tTHREE.CircleBufferGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.CircleBufferGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.segments,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/CylinderGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'CylinderGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradiusTop: radiusTop,\r\n\t\t\tradiusBottom: radiusBottom,\r\n\t\t\theight: height,\r\n\t\t\tradialSegments: radialSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\topenEnded: openEnded,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\t\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\t\theight = height !== undefined ? height : 100;\r\n\t\r\n\t\tradialSegments = radialSegments || 8;\r\n\t\theightSegments = heightSegments || 1;\r\n\t\r\n\t\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : 2 * Math.PI;\r\n\t\r\n\t\tvar heightHalf = height / 2;\r\n\t\r\n\t\tvar x, y, vertices = [], uvs = [];\r\n\t\r\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\t\r\n\t\t\tvar verticesRow = [];\r\n\t\t\tvar uvsRow = [];\r\n\t\r\n\t\t\tvar v = y / heightSegments;\r\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\t\r\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar u = x / radialSegments;\r\n\t\r\n\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\t\tvertex.y = - v * height + heightHalf;\r\n\t\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\t\r\n\t\t\t\tthis.vertices.push( vertex );\r\n\t\r\n\t\t\t\tverticesRow.push( this.vertices.length - 1 );\r\n\t\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvertices.push( verticesRow );\r\n\t\t\tuvs.push( uvsRow );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\t\tvar na, nb;\r\n\t\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\t\r\n\t\t\tif ( radiusTop !== 0 ) {\r\n\t\r\n\t\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\r\n\t\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\r\n\t\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\r\n\t\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\r\n\t\r\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\t\r\n\t\t\t\tvar v1 = vertices[ y ][ x ];\r\n\t\t\t\tvar v2 = vertices[ y + 1 ][ x ];\r\n\t\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\r\n\t\t\t\tvar v4 = vertices[ y ][ x + 1 ];\r\n\t\r\n\t\t\t\tvar n1 = na.clone();\r\n\t\t\t\tvar n2 = na.clone();\r\n\t\t\t\tvar n3 = nb.clone();\r\n\t\t\t\tvar n4 = nb.clone();\r\n\t\r\n\t\t\t\tvar uv1 = uvs[ y ][ x ].clone();\r\n\t\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\r\n\t\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\r\n\t\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// top cap\r\n\t\r\n\t\tif ( openEnded === false && radiusTop > 0 ) {\r\n\t\r\n\t\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\r\n\t\r\n\t\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar v1 = vertices[ 0 ][ x ];\r\n\t\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\r\n\t\t\t\tvar v3 = this.vertices.length - 1;\r\n\t\r\n\t\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\r\n\t\r\n\t\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\r\n\t\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\r\n\t\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 1 ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// bottom cap\r\n\t\r\n\t\tif ( openEnded === false && radiusBottom > 0 ) {\r\n\t\r\n\t\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\r\n\t\r\n\t\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar v1 = vertices[ heightSegments ][ x + 1 ];\r\n\t\t\t\tvar v2 = vertices[ heightSegments ][ x ];\r\n\t\t\t\tvar v3 = this.vertices.length - 1;\r\n\t\r\n\t\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\r\n\t\t\t\tvar uv1 = uvs[ heightSegments ][ x + 1 ].clone();\r\n\t\t\t\tvar uv2 = uvs[ heightSegments ][ x ].clone();\r\n\t\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 2 ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\r\n\t\r\n\tTHREE.CylinderGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.CylinderGeometry(\r\n\t\t\tthis.parameters.radiusTop,\r\n\t\t\tthis.parameters.radiusBottom,\r\n\t\t\tthis.parameters.height,\r\n\t\t\tthis.parameters.radialSegments,\r\n\t\t\tthis.parameters.heightSegments,\r\n\t\t\tthis.parameters.openEnded,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/EdgesGeometry.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.EdgesGeometry = function ( geometry, thresholdAngle ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\t\r\n\t\tvar thresholdDot = Math.cos( THREE.Math.degToRad( thresholdAngle ) );\r\n\t\r\n\t\tvar edge = [ 0, 0 ], hash = {};\r\n\t\tvar sortFunction = function ( a, b ) {\r\n\t\r\n\t\t\treturn a - b;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\t\r\n\t\tvar geometry2;\r\n\t\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\tgeometry2 = new THREE.Geometry();\r\n\t\t\tgeometry2.fromBufferGeometry( geometry );\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tgeometry2 = geometry.clone();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tgeometry2.mergeVertices();\r\n\t\tgeometry2.computeFaceNormals();\r\n\t\r\n\t\tvar vertices = geometry2.vertices;\r\n\t\tvar faces = geometry2.faces;\r\n\t\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\t\r\n\t\t\t\tvar key = edge.toString();\r\n\t\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\t\r\n\t\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\thash[ key ].face2 = i;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar coords = [];\r\n\t\r\n\t\tfor ( var key in hash ) {\r\n\t\r\n\t\t\tvar h = hash[ key ];\r\n\t\r\n\t\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot ) {\r\n\t\r\n\t\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\t\tcoords.push( vertex.x );\r\n\t\t\t\tcoords.push( vertex.y );\r\n\t\t\t\tcoords.push( vertex.z );\r\n\t\r\n\t\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\t\tcoords.push( vertex.x );\r\n\t\t\t\tcoords.push( vertex.y );\r\n\t\t\t\tcoords.push( vertex.z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( coords ), 3 ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EdgesGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry;\r\n\t\r\n\t// File:src/extras/geometries/ExtrudeGeometry.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t *\r\n\t * Creates extruded geometry from a path shape.\r\n\t *\r\n\t * parameters = {\r\n\t *\r\n\t *  curveSegments: <int>, // number of points on the curves\r\n\t *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n\t *  amount: <int>, // Depth to extrude the shape\r\n\t *\r\n\t *  bevelEnabled: <bool>, // turn on bevel\r\n\t *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n\t *  bevelSize: <float>, // how far from shape outline is bevel\r\n\t *  bevelSegments: <int>, // number of bevel layers\r\n\t *\r\n\t *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n\t *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n\t *\r\n\t *  uvGenerator: <Object> // object that provides UV generator functions\r\n\t *\r\n\t * }\r\n\t **/\r\n\t\r\n\tTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\t\r\n\t\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\t\r\n\t\t\tshapes = [];\r\n\t\t\treturn;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'ExtrudeGeometry';\r\n\t\r\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\t\r\n\t\tthis.addShapeList( shapes, options );\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t\t// can't really use automatic vertex normals\r\n\t\t// as then front and back sides get smoothed too\r\n\t\t// should do separate smoothing just for sides\r\n\t\r\n\t\t//this.computeVertexNormals();\r\n\t\r\n\t\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\r\n\t\r\n\tTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\t\r\n\t\tvar sl = shapes.length;\r\n\t\r\n\t\tfor ( var s = 0; s < sl; s ++ ) {\r\n\t\r\n\t\t\tvar shape = shapes[ s ];\r\n\t\t\tthis.addShape( shape, options );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\t\r\n\t\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\t\r\n\t\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\t\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\t\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\t\r\n\t\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\t\r\n\t\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\t\r\n\t\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\t\r\n\t\tvar extrudePath = options.extrudePath;\r\n\t\tvar extrudePts, extrudeByPath = false;\r\n\t\r\n\t\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\t\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\t\r\n\t\tvar splineTube, binormal, normal, position2;\r\n\t\tif ( extrudePath ) {\r\n\t\r\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\t\r\n\t\t\textrudeByPath = true;\r\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\t\r\n\t\t\t// SETUP TNB variables\r\n\t\r\n\t\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t\t// TODO1 - have a .isClosed in spline?\r\n\t\r\n\t\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames( extrudePath, steps, false );\r\n\t\r\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\t\r\n\t\t\tbinormal = new THREE.Vector3();\r\n\t\t\tnormal = new THREE.Vector3();\r\n\t\t\tposition2 = new THREE.Vector3();\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Safeguards if bevels are not enabled\r\n\t\r\n\t\tif ( ! bevelEnabled ) {\r\n\t\r\n\t\t\tbevelSegments = 0;\r\n\t\t\tbevelThickness = 0;\r\n\t\t\tbevelSize = 0;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Variables initialization\r\n\t\r\n\t\tvar ahole, h, hl; // looping of holes\r\n\t\tvar scope = this;\r\n\t\r\n\t\tvar shapesOffset = this.vertices.length;\r\n\t\r\n\t\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\t\r\n\t\tvar vertices = shapePoints.shape;\r\n\t\tvar holes = shapePoints.holes;\r\n\t\r\n\t\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\t\r\n\t\tif ( reverse ) {\r\n\t\r\n\t\t\tvertices = vertices.reverse();\r\n\t\r\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\t\r\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tahole = holes[ h ];\r\n\t\r\n\t\t\t\tif ( THREE.Shape.Utils.isClockWise( ahole ) ) {\r\n\t\r\n\t\t\t\t\tholes[ h ] = ahole.reverse();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tvar faces = THREE.Shape.Utils.triangulateShape ( vertices, holes );\r\n\t\r\n\t\t/* Vertices */\r\n\t\r\n\t\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\t\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\tahole = holes[ h ];\r\n\t\r\n\t\t\tvertices = vertices.concat( ahole );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tfunction scalePt2 ( pt, vec, size ) {\r\n\t\r\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\t\r\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar b, bs, t, z,\r\n\t\t\tvert, vlen = vertices.length,\r\n\t\t\tface, flen = faces.length;\r\n\t\r\n\t\r\n\t\t// Find directions for point movement\r\n\t\r\n\t\r\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\t\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\t\r\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t\t//\r\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\t\r\n\t\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\t\r\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\t\r\n\t\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\t\r\n\t\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\t\r\n\t\t\t// check for collinear edges\r\n\t\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\t\r\n\t\t\tif ( Math.abs( collinear0 ) > EPSILON ) {\r\n\t\r\n\t\t\t\t// not collinear\r\n\t\r\n\t\t\t\t// length of vectors for normalizing\r\n\t\r\n\t\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\t\r\n\t\t\t\t// shift adjacent points by unit vectors to the left\r\n\t\r\n\t\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\t\r\n\t\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\t\r\n\t\t\t\t// scaling factor for v_prev to intersection point\r\n\t\r\n\t\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\t\r\n\t\t\t\t// vector from inPt to intersection point\r\n\t\r\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\t\r\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t\t//  but prevent crazy spikes\r\n\t\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\t\r\n\t\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// handle special case of collinear edges\r\n\t\r\n\t\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\t\tif ( v_prev_x > EPSILON ) {\r\n\t\r\n\t\t\t\t\tif ( v_next_x > EPSILON ) {\r\n\t\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tif ( v_prev_x < - EPSILON ) {\r\n\t\r\n\t\t\t\t\t\tif ( v_next_x < - EPSILON ) {\r\n\t\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\t\r\n\t\t\t\t\t\t\tdirection_eq = true;\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif ( direction_eq ) {\r\n\t\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tvar contourMovements = [];\r\n\t\r\n\t\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\t\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\t\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\t// console.log('i,j,k', i, j , k)\r\n\t\r\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\t\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\tahole = holes[ h ];\r\n\t\r\n\t\t\toneHoleMovements = [];\r\n\t\r\n\t\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\t\r\n\t\t\t\tif ( j === il ) j = 0;\r\n\t\t\t\tif ( k === il ) k = 0;\r\n\t\r\n\t\t\t\t//  (j)---(i)---(k)\r\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tholesMovements.push( oneHoleMovements );\r\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\t\r\n\t\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\t\r\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\t\r\n\t\t\tt = b / bevelSegments;\r\n\t\t\tz = bevelThickness * ( 1 - t );\r\n\t\r\n\t\t\t//z = bevelThickness * t;\r\n\t\t\tbs = bevelSize * ( Math.sin ( t * Math.PI / 2 ) ); // curved\r\n\t\t\t//bs = bevelSize * t; // linear\r\n\t\r\n\t\t\t// contract shape\r\n\t\r\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// expand holes\r\n\t\r\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\t\r\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\t\r\n\t\t\t\t\tv( vert.x, vert.y,  - z );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tbs = bevelSize;\r\n\t\r\n\t\t// Back facing vertices\r\n\t\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\t\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\t\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\t\r\n\t\t\t\tv( vert.x, vert.y, 0 );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\t\r\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\t\r\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\t\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Add stepped vertices...\r\n\t\t// Including front facing vertices\r\n\t\r\n\t\tvar s;\r\n\t\r\n\t\tfor ( s = 1; s <= steps; s ++ ) {\r\n\t\r\n\t\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\t\r\n\t\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\t\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\t\r\n\t\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\t\r\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\t\r\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\t\r\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Add bevel segments planes\r\n\t\r\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\t\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\t\r\n\t\t\tt = b / bevelSegments;\r\n\t\t\tz = bevelThickness * ( 1 - t );\r\n\t\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\t\tbs = bevelSize * Math.sin ( t * Math.PI / 2 );\r\n\t\r\n\t\t\t// contract shape\r\n\t\r\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// expand holes\r\n\t\r\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tahole = holes[ h ];\r\n\t\t\t\toneHoleMovements = holesMovements[ h ];\r\n\t\r\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\t\r\n\t\t\t\t\tif ( ! extrudeByPath ) {\r\n\t\r\n\t\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t/* Faces */\r\n\t\r\n\t\t// Top and bottom faces\r\n\t\r\n\t\tbuildLidFaces();\r\n\t\r\n\t\t// Sides faces\r\n\t\r\n\t\tbuildSideFaces();\r\n\t\r\n\t\r\n\t\t/////  Internal functions\r\n\t\r\n\t\tfunction buildLidFaces() {\r\n\t\r\n\t\t\tif ( bevelEnabled ) {\r\n\t\r\n\t\t\t\tvar layer = 0; // steps + 1\r\n\t\t\t\tvar offset = vlen * layer;\r\n\t\r\n\t\t\t\t// Bottom faces\r\n\t\r\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\t\t\tface = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\t\toffset = vlen * layer;\r\n\t\r\n\t\t\t\t// Top faces\r\n\t\r\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\t\t\tface = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// Bottom faces\r\n\t\r\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\t\t\tface = faces[ i ];\r\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// Top faces\r\n\t\r\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\t\t\tface = faces[ i ];\r\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// Create faces for the z-sides of the shape\r\n\t\r\n\t\tfunction buildSideFaces() {\r\n\t\r\n\t\t\tvar layeroffset = 0;\r\n\t\t\tsidewalls( contour, layeroffset );\r\n\t\t\tlayeroffset += contour.length;\r\n\t\r\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\t\r\n\t\t\t\tahole = holes[ h ];\r\n\t\t\t\tsidewalls( ahole, layeroffset );\r\n\t\r\n\t\t\t\t//, true\r\n\t\t\t\tlayeroffset += ahole.length;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction sidewalls( contour, layeroffset ) {\r\n\t\r\n\t\t\tvar j, k;\r\n\t\t\ti = contour.length;\r\n\t\r\n\t\t\twhile ( -- i >= 0 ) {\r\n\t\r\n\t\t\t\tj = i;\r\n\t\t\t\tk = i - 1;\r\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\t\r\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\t\r\n\t\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\t\r\n\t\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\t\r\n\t\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\t\r\n\t\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\t\td = layeroffset + j + slen2;\r\n\t\r\n\t\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\tfunction v( x, y, z ) {\r\n\t\r\n\t\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction f3( a, b, c ) {\r\n\t\r\n\t\t\ta += shapesOffset;\r\n\t\t\tb += shapesOffset;\r\n\t\t\tc += shapesOffset;\r\n\t\r\n\t\t\tscope.faces.push( new THREE.Face3( a, b, c ) );\r\n\t\r\n\t\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\t\r\n\t\t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\t\r\n\t\t\ta += shapesOffset;\r\n\t\t\tb += shapesOffset;\r\n\t\t\tc += shapesOffset;\r\n\t\t\td += shapesOffset;\r\n\t\r\n\t\t\tscope.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tscope.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\r\n\t\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\t\r\n\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\t\r\n\t\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\t\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\r\n\t\t\tvar a = vertices[ indexA ];\r\n\t\t\tvar b = vertices[ indexB ];\r\n\t\t\tvar c = vertices[ indexC ];\r\n\t\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t\t];\r\n\t\r\n\t\t},\r\n\t\r\n\t\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\t\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\r\n\t\t\tvar a = vertices[ indexA ];\r\n\t\t\tvar b = vertices[ indexB ];\r\n\t\t\tvar c = vertices[ indexC ];\r\n\t\t\tvar d = vertices[ indexD ];\r\n\t\r\n\t\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\t\r\n\t\t\t\treturn [\r\n\t\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t\t];\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\treturn [\r\n\t\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t\t];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/ShapeGeometry.js\r\n\t\r\n\t/**\r\n\t * @author jonobr1 / http://jonobr1.com\r\n\t *\r\n\t * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n\t * ExtrudeGeometry.\r\n\t *\r\n\t * parameters = {\r\n\t *\r\n\t *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n\t *\r\n\t *\tmaterial: <int> // material index for front and back faces\r\n\t *\tuvGenerator: <Object> // object that provides UV generator functions\r\n\t *\r\n\t * }\r\n\t **/\r\n\t\r\n\tTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'ShapeGeometry';\r\n\t\r\n\t\tif ( Array.isArray( shapes ) === false ) shapes = [ shapes ];\r\n\t\r\n\t\tthis.addShapeList( shapes, options );\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\r\n\t\r\n\t/**\r\n\t * Add an array of shapes to THREE.ShapeGeometry.\r\n\t */\r\n\tTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\t\r\n\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tthis.addShape( shapes[ i ], options );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t/**\r\n\t * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n\t */\r\n\tTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\t\r\n\t\tif ( options === undefined ) options = {};\r\n\t\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\t\r\n\t\tvar material = options.material;\r\n\t\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar i, l, hole;\r\n\t\r\n\t\tvar shapesOffset = this.vertices.length;\r\n\t\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\t\r\n\t\tvar vertices = shapePoints.shape;\r\n\t\tvar holes = shapePoints.holes;\r\n\t\r\n\t\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\t\r\n\t\tif ( reverse ) {\r\n\t\r\n\t\t\tvertices = vertices.reverse();\r\n\t\r\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\t\r\n\t\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\thole = holes[ i ];\r\n\t\r\n\t\t\t\tif ( THREE.Shape.Utils.isClockWise( hole ) ) {\r\n\t\r\n\t\t\t\t\tholes[ i ] = hole.reverse();\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treverse = false;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar faces = THREE.Shape.Utils.triangulateShape( vertices, holes );\r\n\t\r\n\t\t// Vertices\r\n\t\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\t\r\n\t\t\thole = holes[ i ];\r\n\t\t\tvertices = vertices.concat( hole );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar vert, vlen = vertices.length;\r\n\t\tvar face, flen = faces.length;\r\n\t\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\t\r\n\t\t\tvert = vertices[ i ];\r\n\t\r\n\t\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\t\r\n\t\t\tface = faces[ i ];\r\n\t\r\n\t\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\t\tvar c = face[ 2 ] + shapesOffset;\r\n\t\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/LatheGeometry.js\r\n\t\r\n\t/**\r\n\t * @author astrodud / http://astrodud.isgreat.org/\r\n\t * @author zz85 / https://github.com/zz85\r\n\t * @author bhouston / http://exocortex.com\r\n\t */\r\n\t\r\n\t// points - to create a closed torus, one must use a set of points \r\n\t//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n\t// segments - the number of circumference segments to create\r\n\t// phiStart - the starting radian\r\n\t// phiLength - the radian (0 to 2*PI) range of the lathed section\r\n\t//    2*pi is a closed lathe, less than 2PI is a portion.\r\n\t\r\n\tTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'LatheGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tpoints: points,\r\n\t\t\tsegments: segments,\r\n\t\t\tphiStart: phiStart,\r\n\t\t\tphiLength: phiLength\r\n\t\t};\r\n\t\r\n\t\tsegments = segments || 12;\r\n\t\tphiStart = phiStart || 0;\r\n\t\tphiLength = phiLength || 2 * Math.PI;\r\n\t\r\n\t\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\t\tvar inverseSegments = 1.0 / segments;\r\n\t\r\n\t\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\r\n\t\r\n\t\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\t\r\n\t\t\tvar c = Math.cos( phi ),\r\n\t\t\t\ts = Math.sin( phi );\r\n\t\r\n\t\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\tvar pt = points[ j ];\r\n\t\r\n\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\r\n\t\t\t\tvertex.x = c * pt.x - s * pt.y;\r\n\t\t\t\tvertex.y = s * pt.x + c * pt.y;\r\n\t\t\t\tvertex.z = pt.z;\r\n\t\r\n\t\t\t\tthis.vertices.push( vertex );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar np = points.length;\r\n\t\r\n\t\tfor ( var i = 0, il = segments; i < il; i ++ ) {\r\n\t\r\n\t\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\tvar base = j + np * i;\r\n\t\t\t\tvar a = base;\r\n\t\t\t\tvar b = base + np;\r\n\t\t\t\tvar c = base + 1 + np;\r\n\t\t\t\tvar d = base + 1;\r\n\t\r\n\t\t\t\tvar u0 = i * inverseSegments;\r\n\t\t\t\tvar v0 = j * inversePointLength;\r\n\t\t\t\tvar u1 = u0 + inverseSegments;\r\n\t\t\t\tvar v1 = v0 + inversePointLength;\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\t\r\n\t\t\t\t\tnew THREE.Vector2( u0, v0 ),\r\n\t\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\t\r\n\t\t\t\t] );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\t\r\n\t\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\t\tnew THREE.Vector2( u1, v1 ),\r\n\t\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\t\r\n\t\t\t\t] );\r\n\t\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.mergeVertices();\r\n\t\tthis.computeFaceNormals();\r\n\t\tthis.computeVertexNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\r\n\t\r\n\t// File:src/extras/geometries/PlaneGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n\t */\r\n\t\r\n\tTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'PlaneGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments\r\n\t\t};\r\n\t\r\n\t\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\r\n\t\r\n\tTHREE.PlaneGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.PlaneGeometry(\r\n\t\t\tthis.parameters.width,\r\n\t\t\tthis.parameters.height,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n\t */\r\n\t\r\n\tTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthis.type = 'PlaneBufferGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\twidth: width,\r\n\t\t\theight: height,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments\r\n\t\t};\r\n\t\r\n\t\tvar width_half = width / 2;\r\n\t\tvar height_half = height / 2;\r\n\t\r\n\t\tvar gridX = Math.floor( widthSegments ) || 1;\r\n\t\tvar gridY = Math.floor( heightSegments ) || 1;\r\n\t\r\n\t\tvar gridX1 = gridX + 1;\r\n\t\tvar gridY1 = gridY + 1;\r\n\t\r\n\t\tvar segment_width = width / gridX;\r\n\t\tvar segment_height = height / gridY;\r\n\t\r\n\t\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\t\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\t\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\t\r\n\t\tvar offset = 0;\r\n\t\tvar offset2 = 0;\r\n\t\r\n\t\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\t\r\n\t\t\tvar y = iy * segment_height - height_half;\r\n\t\r\n\t\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\t\r\n\t\t\t\tvar x = ix * segment_width - width_half;\r\n\t\r\n\t\t\t\tvertices[ offset ] = x;\r\n\t\t\t\tvertices[ offset + 1 ] = - y;\r\n\t\r\n\t\t\t\tnormals[ offset + 2 ] = 1;\r\n\t\r\n\t\t\t\tuvs[ offset2 ] = ix / gridX;\r\n\t\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\t\r\n\t\t\t\toffset += 3;\r\n\t\t\t\toffset2 += 2;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\toffset = 0;\r\n\t\r\n\t\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\t\r\n\t\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\t\r\n\t\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\t\r\n\t\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\t\r\n\t\t\t\tindices[ offset ] = a;\r\n\t\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\t\tindices[ offset + 2 ] = d;\r\n\t\r\n\t\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\t\tindices[ offset + 5 ] = d;\r\n\t\r\n\t\t\t\toffset += 6;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\r\n\t\r\n\tTHREE.PlaneBufferGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.PlaneBufferGeometry(\r\n\t\t\tthis.parameters.width,\r\n\t\t\tthis.parameters.height,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/RingGeometry.js\r\n\t\r\n\t/**\r\n\t * @author Kaleb Murphy\r\n\t */\r\n\t\r\n\tTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'RingGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tinnerRadius: innerRadius,\r\n\t\t\touterRadius: outerRadius,\r\n\t\t\tthetaSegments: thetaSegments,\r\n\t\t\tphiSegments: phiSegments,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tinnerRadius = innerRadius || 0;\r\n\t\touterRadius = outerRadius || 50;\r\n\t\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\t\r\n\t\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\t\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\r\n\t\r\n\t\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\t\r\n\t\tfor ( i = 0; i < phiSegments + 1; i ++ ) {\r\n\t\r\n\t\t\t// concentric circles inside ring\r\n\t\r\n\t\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) {\r\n\t\r\n\t\t\t\t// number of segments per circle\r\n\t\r\n\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\r\n\t\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\t\tvertex.y = radius * Math.sin( segment );\r\n\t\r\n\t\t\t\tthis.vertices.push( vertex );\r\n\t\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tradius += radiusStep;\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\t\r\n\t\tfor ( i = 0; i < phiSegments; i ++ ) {\r\n\t\r\n\t\t\t// concentric circles inside ring\r\n\t\r\n\t\t\tvar thetaSegment = i * ( thetaSegments + 1 );\r\n\t\r\n\t\t\tfor ( o = 0; o < thetaSegments ; o ++ ) {\r\n\t\r\n\t\t\t\t// number of segments per circle\r\n\t\r\n\t\t\t\tvar segment = o + thetaSegment;\r\n\t\r\n\t\t\t\tvar v1 = segment;\r\n\t\t\t\tvar v2 = segment + thetaSegments + 1;\r\n\t\t\t\tvar v3 = segment + thetaSegments + 2;\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\t\r\n\t\t\t\tv1 = segment;\r\n\t\t\t\tv2 = segment + thetaSegments + 2;\r\n\t\t\t\tv3 = segment + 1;\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\r\n\t\r\n\tTHREE.RingGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.RingGeometry(\r\n\t\t\tthis.parameters.innerRadius,\r\n\t\t\tthis.parameters.outerRadius,\r\n\t\t\tthis.parameters.thetaSegments,\r\n\t\t\tthis.parameters.phiSegments,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/SphereGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'SphereGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tphiStart: phiStart,\r\n\t\t\tphiLength: phiLength,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tthis.fromBufferGeometry( new THREE.SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\r\n\t\r\n\tTHREE.SphereGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.SphereGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments,\r\n\t\t\tthis.parameters.phiStart,\r\n\t\t\tthis.parameters.phiLength,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/SphereBufferGeometry.js\r\n\t\r\n\t/**\r\n\t * @author benaadams / https://twitter.com/ben_a_adams\r\n\t * based on THREE.SphereGeometry\r\n\t */\r\n\t\r\n\tTHREE.SphereBufferGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tthis.type = 'SphereBufferGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\twidthSegments: widthSegments,\r\n\t\t\theightSegments: heightSegments,\r\n\t\t\tphiStart: phiStart,\r\n\t\t\tphiLength: phiLength,\r\n\t\t\tthetaStart: thetaStart,\r\n\t\t\tthetaLength: thetaLength\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 50;\r\n\t\r\n\t\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\t\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\t\r\n\t\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\t\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\t\r\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\t\r\n\t\tvar thetaEnd = thetaStart + thetaLength;\r\n\t\r\n\t\tvar vertexCount = ( ( widthSegments + 1 ) * ( heightSegments + 1 ) );\r\n\t\r\n\t\tvar positions = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\t\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\t\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\t\r\n\t\tvar index = 0, vertices = [], normal = new THREE.Vector3();\r\n\t\r\n\t\tfor ( var y = 0; y <= heightSegments; y ++ ) {\r\n\t\r\n\t\t\tvar verticesRow = [];\r\n\t\r\n\t\t\tvar v = y / heightSegments;\r\n\t\r\n\t\t\tfor ( var x = 0; x <= widthSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar u = x / widthSegments;\r\n\t\r\n\t\t\t\tvar px = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\t\tvar py = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\t\tvar pz = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\r\n\t\t\t\tnormal.set( px, py, pz ).normalize();\r\n\t\r\n\t\t\t\tpositions.setXYZ( index, px, py, pz );\r\n\t\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\t\t\t\tuvs.setXY( index, u, 1 - v );\r\n\t\r\n\t\t\t\tverticesRow.push( index );\r\n\t\r\n\t\t\t\tindex ++;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvertices.push( verticesRow );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar indices = [];\r\n\t\r\n\t\tfor ( var y = 0; y < heightSegments; y ++ ) {\r\n\t\r\n\t\t\tfor ( var x = 0; x < widthSegments; x ++ ) {\r\n\t\r\n\t\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\t\r\n\t\t\t\tif ( y !== 0 || thetaStart > 0 ) indices.push( v1, v2, v4 );\r\n\t\t\t\tif ( y !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( v2, v3, v4 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\t\tthis.addAttribute( 'position', positions );\r\n\t\tthis.addAttribute( 'normal', normals );\r\n\t\tthis.addAttribute( 'uv', uvs );\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SphereBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry;\r\n\t\r\n\tTHREE.SphereBufferGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.SphereBufferGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.widthSegments,\r\n\t\t\tthis.parameters.heightSegments,\r\n\t\t\tthis.parameters.phiStart,\r\n\t\t\tthis.parameters.phiLength,\r\n\t\t\tthis.parameters.thetaStart,\r\n\t\t\tthis.parameters.thetaLength\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/TextGeometry.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / http://www.lab4games.net/zz85/blog\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t * For creating 3D text geometry in three.js\r\n\t *\r\n\t * Text = 3D Text\r\n\t *\r\n\t * parameters = {\r\n\t *  size: \t\t\t<float>, \t// size of the text\r\n\t *  height: \t\t<float>, \t// thickness to extrude text\r\n\t *  curveSegments: \t<int>,\t\t// number of points on the curves\r\n\t *\r\n\t *  font: \t\t\t<string>,\t\t// font name\r\n\t *  weight: \t\t<string>,\t\t// font weight (normal, bold)\r\n\t *  style: \t\t\t<string>,\t\t// font style  (normal, italics)\r\n\t *\r\n\t *  bevelEnabled:\t<bool>,\t\t\t// turn on bevel\r\n\t *  bevelThickness: <float>, \t\t// how deep into text bevel goes\r\n\t *  bevelSize:\t\t<float>, \t\t// how far from text outline is bevel\r\n\t *  }\r\n\t *\r\n\t */\r\n\t\r\n\t/*\tUsage Examples\r\n\t\r\n\t\t// TextGeometry wrapper\r\n\t\r\n\t\tvar text3d = new TextGeometry( text, options );\r\n\t\r\n\t\t// Complete manner\r\n\t\r\n\t\tvar textShapes = THREE.FontUtils.generateShapes( text, options );\r\n\t\tvar text3d = new ExtrudeGeometry( textShapes, options );\r\n\t\r\n\t*/\r\n\t\r\n\t\r\n\tTHREE.TextGeometry = function ( text, parameters ) {\r\n\t\r\n\t\tparameters = parameters || {};\r\n\t\r\n\t\tvar textShapes = THREE.FontUtils.generateShapes( text, parameters );\r\n\t\r\n\t\t// translate parameters to ExtrudeGeometry API\r\n\t\r\n\t\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\t\r\n\t\t// defaults\r\n\t\r\n\t\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\t\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\t\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\t\r\n\t\tTHREE.ExtrudeGeometry.call( this, textShapes, parameters );\r\n\t\r\n\t\tthis.type = 'TextGeometry';\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\n\tTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\r\n\t\r\n\t// File:src/extras/geometries/TorusGeometry.js\r\n\t\r\n\t/**\r\n\t * @author oosmoxiecode\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n\t */\r\n\t\r\n\tTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'TorusGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\ttube: tube,\r\n\t\t\tradialSegments: radialSegments,\r\n\t\t\ttubularSegments: tubularSegments,\r\n\t\t\tarc: arc\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 100;\r\n\t\ttube = tube || 40;\r\n\t\tradialSegments = radialSegments || 8;\r\n\t\ttubularSegments = tubularSegments || 6;\r\n\t\tarc = arc || Math.PI * 2;\r\n\t\r\n\t\tvar center = new THREE.Vector3(), uvs = [], normals = [];\r\n\t\r\n\t\tfor ( var j = 0; j <= radialSegments; j ++ ) {\r\n\t\r\n\t\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\r\n\t\r\n\t\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\t\r\n\t\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\t\tcenter.y = radius * Math.sin( u );\r\n\t\r\n\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\t\tvertex.z = tube * Math.sin( v );\r\n\t\r\n\t\t\t\tthis.vertices.push( vertex );\r\n\t\r\n\t\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\r\n\t\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( var j = 1; j <= radialSegments; j ++ ) {\r\n\t\r\n\t\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\r\n\t\r\n\t\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\t\r\n\t\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\r\n\t\t\t\tthis.faces.push( face );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\r\n\t\r\n\t\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\r\n\t\t\t\tthis.faces.push( face );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\r\n\t\r\n\tTHREE.TorusGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.TorusGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.tube,\r\n\t\t\tthis.parameters.radialSegments,\r\n\t\t\tthis.parameters.tubularSegments,\r\n\t\t\tthis.parameters.arc\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/TorusKnotGeometry.js\r\n\t\r\n\t/**\r\n\t * @author oosmoxiecode\r\n\t * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\r\n\t */\r\n\t\r\n\tTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'TorusKnotGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\ttube: tube,\r\n\t\t\tradialSegments: radialSegments,\r\n\t\t\ttubularSegments: tubularSegments,\r\n\t\t\tp: p,\r\n\t\t\tq: q,\r\n\t\t\theightScale: heightScale\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 100;\r\n\t\ttube = tube || 40;\r\n\t\tradialSegments = radialSegments || 64;\r\n\t\ttubularSegments = tubularSegments || 8;\r\n\t\tp = p || 2;\r\n\t\tq = q || 3;\r\n\t\theightScale = heightScale || 1;\r\n\t\r\n\t\tvar grid = new Array( radialSegments );\r\n\t\tvar tang = new THREE.Vector3();\r\n\t\tvar n = new THREE.Vector3();\r\n\t\tvar bitan = new THREE.Vector3();\r\n\t\r\n\t\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\t\r\n\t\t\tgrid[ i ] = new Array( tubularSegments );\r\n\t\t\tvar u = i / radialSegments * 2 * p * Math.PI;\r\n\t\t\tvar p1 = getPos( u, q, p, radius, heightScale );\r\n\t\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\r\n\t\t\ttang.subVectors( p2, p1 );\r\n\t\t\tn.addVectors( p2, p1 );\r\n\t\r\n\t\t\tbitan.crossVectors( tang, n );\r\n\t\t\tn.crossVectors( bitan, tang );\r\n\t\t\tbitan.normalize();\r\n\t\t\tn.normalize();\r\n\t\r\n\t\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\t\r\n\t\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\r\n\t\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\t\tvar cy = tube * Math.sin( v );\r\n\t\r\n\t\t\t\tvar pos = new THREE.Vector3();\r\n\t\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\r\n\t\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\r\n\t\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\r\n\t\r\n\t\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\t\r\n\t\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\t\r\n\t\t\t\tvar ip = ( i + 1 ) % radialSegments;\r\n\t\t\t\tvar jp = ( j + 1 ) % tubularSegments;\r\n\t\r\n\t\t\t\tvar a = grid[ i ][ j ];\r\n\t\t\t\tvar b = grid[ ip ][ j ];\r\n\t\t\t\tvar c = grid[ ip ][ jp ];\r\n\t\t\t\tvar d = grid[ i ][ jp ];\r\n\t\r\n\t\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\r\n\t\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\r\n\t\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\r\n\t\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\tthis.computeVertexNormals();\r\n\t\r\n\t\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\r\n\t\r\n\t\t\tvar cu = Math.cos( u );\r\n\t\t\tvar su = Math.sin( u );\r\n\t\t\tvar quOverP = in_q / in_p * u;\r\n\t\t\tvar cs = Math.cos( quOverP );\r\n\t\r\n\t\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\r\n\t\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\r\n\t\r\n\t\t\treturn new THREE.Vector3( tx, ty, tz );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\r\n\t\r\n\tTHREE.TorusKnotGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.TorusKnotGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.tube,\r\n\t\t\tthis.parameters.radialSegments,\r\n\t\t\tthis.parameters.tubularSegments,\r\n\t\t\tthis.parameters.p,\r\n\t\t\tthis.parameters.q,\r\n\t\t\tthis.parameters.heightScale\r\n\t\t);\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/TubeGeometry.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / https://github.com/WestLangley\r\n\t * @author zz85 / https://github.com/zz85\r\n\t * @author miningold / https://github.com/miningold\r\n\t * @author jonobr1 / https://github.com/jonobr1\r\n\t *\r\n\t * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n\t *\r\n\t * Creates a tube which extrudes along a 3d spline\r\n\t *\r\n\t * Uses parallel transport frames as described in\r\n\t * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n\t */\r\n\t\r\n\tTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'TubeGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tpath: path,\r\n\t\t\tsegments: segments,\r\n\t\t\tradius: radius,\r\n\t\t\tradialSegments: radialSegments,\r\n\t\t\tclosed: closed\r\n\t\t};\r\n\t\r\n\t\tsegments = segments || 64;\r\n\t\tradius = radius || 1;\r\n\t\tradialSegments = radialSegments || 8;\r\n\t\tclosed = closed || false;\r\n\t\ttaper = taper || THREE.TubeGeometry.NoTaper;\r\n\t\r\n\t\tvar grid = [];\r\n\t\r\n\t\tvar scope = this,\r\n\t\r\n\t\t\ttangent,\r\n\t\t\tnormal,\r\n\t\t\tbinormal,\r\n\t\r\n\t\t\tnumpoints = segments + 1,\r\n\t\r\n\t\t\tu, v, r,\r\n\t\r\n\t\t\tcx, cy,\r\n\t\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\t\ti, j,\r\n\t\t\tip, jp,\r\n\t\t\ta, b, c, d,\r\n\t\t\tuva, uvb, uvc, uvd;\r\n\t\r\n\t\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\t\ttangents = frames.tangents,\r\n\t\t\tnormals = frames.normals,\r\n\t\t\tbinormals = frames.binormals;\r\n\t\r\n\t\t// proxy internals\r\n\t\tthis.tangents = tangents;\r\n\t\tthis.normals = normals;\r\n\t\tthis.binormals = binormals;\r\n\t\r\n\t\tfunction vert( x, y, z ) {\r\n\t\r\n\t\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// construct the grid\r\n\t\r\n\t\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\t\r\n\t\t\tgrid[ i ] = [];\r\n\t\r\n\t\t\tu = i / ( numpoints - 1 );\r\n\t\r\n\t\t\tpos = path.getPointAt( u );\r\n\t\r\n\t\t\ttangent = tangents[ i ];\r\n\t\t\tnormal = normals[ i ];\r\n\t\t\tbinormal = binormals[ i ];\r\n\t\r\n\t\t\tr = radius * taper( u );\r\n\t\r\n\t\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\t\r\n\t\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\t\r\n\t\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\t\tcy = r * Math.sin( v );\r\n\t\r\n\t\t\t\tpos2.copy( pos );\r\n\t\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\t\r\n\t\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// construct the mesh\r\n\t\r\n\t\tfor ( i = 0; i < segments; i ++ ) {\r\n\t\r\n\t\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\t\r\n\t\t\t\tip = ( closed ) ? ( i + 1 ) % segments : i + 1;\r\n\t\t\t\tjp = ( j + 1 ) % radialSegments;\r\n\t\r\n\t\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\t\tb = grid[ ip ][ j ];\r\n\t\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\t\td = grid[ i ][ jp ];\r\n\t\r\n\t\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\t\r\n\t\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\tthis.computeVertexNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\r\n\t\r\n\tTHREE.TubeGeometry.NoTaper = function ( u ) {\r\n\t\r\n\t\treturn 1;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\r\n\t\r\n\t\treturn Math.sin( Math.PI * u );\r\n\t\r\n\t};\r\n\t\r\n\t// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\n\tTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\t\r\n\t\tvar\tnormal = new THREE.Vector3(),\r\n\t\r\n\t\t\ttangents = [],\r\n\t\t\tnormals = [],\r\n\t\t\tbinormals = [],\r\n\t\r\n\t\t\tvec = new THREE.Vector3(),\r\n\t\t\tmat = new THREE.Matrix4(),\r\n\t\r\n\t\t\tnumpoints = segments + 1,\r\n\t\t\ttheta,\r\n\t\t\tepsilon = 0.0001,\r\n\t\t\tsmallest,\r\n\t\r\n\t\t\ttx, ty, tz,\r\n\t\t\ti, u;\r\n\t\r\n\t\r\n\t\t// expose internals\r\n\t\tthis.tangents = tangents;\r\n\t\tthis.normals = normals;\r\n\t\tthis.binormals = binormals;\r\n\t\r\n\t\t// compute the tangent vectors for each segment on the path\r\n\t\r\n\t\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\t\r\n\t\t\tu = i / ( numpoints - 1 );\r\n\t\r\n\t\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\t\ttangents[ i ].normalize();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tinitialNormal3();\r\n\t\r\n\t\t/*\r\n\t\tfunction initialNormal1(lastBinormal) {\r\n\t\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t\t}\r\n\t\r\n\t\tfunction initialNormal2() {\r\n\t\r\n\t\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\t\tvar t2 = path.getTangentAt( epsilon );\r\n\t\r\n\t\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\t\r\n\t\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t\r\n\t\t}\r\n\t\t*/\r\n\t\r\n\t\tfunction initialNormal3() {\r\n\t\r\n\t\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t\t// and in the direction of the smallest tangent xyz component\r\n\t\r\n\t\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\t\tsmallest = Number.MAX_VALUE;\r\n\t\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\t\r\n\t\t\tif ( tx <= smallest ) {\r\n\t\r\n\t\t\t\tsmallest = tx;\r\n\t\t\t\tnormal.set( 1, 0, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( ty <= smallest ) {\r\n\t\r\n\t\t\t\tsmallest = ty;\r\n\t\t\t\tnormal.set( 0, 1, 0 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tif ( tz <= smallest ) {\r\n\t\r\n\t\t\t\tnormal.set( 0, 0, 1 );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\t\r\n\t\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\t\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\t\r\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\t\r\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\t\r\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\t\r\n\t\t\tif ( vec.length() > epsilon ) {\r\n\t\r\n\t\t\t\tvec.normalize();\r\n\t\r\n\t\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\t\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\t\r\n\t\tif ( closed ) {\r\n\t\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints - 1 ] ), - 1, 1 ) );\r\n\t\t\ttheta /= ( numpoints - 1 );\r\n\t\r\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints - 1 ] ) ) > 0 ) {\r\n\t\r\n\t\t\t\ttheta = - theta;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\t\r\n\t\t\t\t// twist a little...\r\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/PolyhedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author clockworkgeek / https://github.com/clockworkgeek\r\n\t * @author timothypratley / https://github.com/timothypratley\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'PolyhedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tvertices: vertices,\r\n\t\t\tindices: indices,\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t\tradius = radius || 1;\r\n\t\tdetail = detail || 0;\r\n\t\r\n\t\tvar that = this;\r\n\t\r\n\t\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\t\r\n\t\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar p = this.vertices;\r\n\t\r\n\t\tvar faces = [];\r\n\t\r\n\t\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\t\r\n\t\t\tvar v1 = p[ indices[ i ] ];\r\n\t\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\t\r\n\t\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, j );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar centroid = new THREE.Vector3();\r\n\t\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tsubdivide( faces[ i ], detail );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Handle case when face straddles the seam\r\n\t\r\n\t\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\t\r\n\t\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\t\r\n\t\t\tvar x0 = uvs[ 0 ].x;\r\n\t\t\tvar x1 = uvs[ 1 ].x;\r\n\t\t\tvar x2 = uvs[ 2 ].x;\r\n\t\r\n\t\t\tvar max = Math.max( x0, Math.max( x1, x2 ) );\r\n\t\t\tvar min = Math.min( x0, Math.min( x1, x2 ) );\r\n\t\r\n\t\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\t\r\n\t\t\t\t// 0.9 is somewhat arbitrary\r\n\t\r\n\t\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Apply radius\r\n\t\r\n\t\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\t\r\n\t\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Merge vertices\r\n\t\r\n\t\tthis.mergeVertices();\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\r\n\t\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\t\r\n\t\r\n\t\t// Project vector onto sphere's surface\r\n\t\r\n\t\tfunction prepare( vector ) {\r\n\t\r\n\t\t\tvar vertex = vector.normalize().clone();\r\n\t\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\t\r\n\t\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\t\r\n\t\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\t\r\n\t\t\treturn vertex;\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Approximate a curved face with recursively sub-divided triangles.\r\n\t\r\n\t\tfunction make( v1, v2, v3, materialIndex ) {\r\n\t\r\n\t\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, materialIndex );\r\n\t\t\tthat.faces.push( face );\r\n\t\r\n\t\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\t\r\n\t\t\tvar azi = azimuth( centroid );\r\n\t\r\n\t\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t\t] );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Analytically subdivide a face to the required detail level.\r\n\t\r\n\t\tfunction subdivide( face, detail ) {\r\n\t\r\n\t\t\tvar cols = Math.pow( 2, detail );\r\n\t\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\t\tvar v = [];\r\n\t\r\n\t\t\tvar materialIndex = face.materialIndex;\r\n\t\r\n\t\t\t// Construct all of the vertices for this subdivision.\r\n\t\r\n\t\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\t\r\n\t\t\t\tv[ i ] = [];\r\n\t\r\n\t\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\t\tvar rows = cols - i;\r\n\t\r\n\t\t\t\tfor ( var j = 0; j <= rows; j ++ ) {\r\n\t\r\n\t\t\t\t\tif ( j === 0 && i === cols ) {\r\n\t\r\n\t\t\t\t\t\tv[ i ][ j ] = aj;\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\t// Construct all of the faces.\r\n\t\r\n\t\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar k = Math.floor( j / 2 );\r\n\t\r\n\t\t\t\t\tif ( j % 2 === 0 ) {\r\n\t\r\n\t\t\t\t\t\tmake(\r\n\t\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\t\tv[ i ][ k ],\r\n\t\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tmake(\r\n\t\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\t\tv[ i + 1 ][ k + 1 ],\r\n\t\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t\t);\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\t\r\n\t\tfunction azimuth( vector ) {\r\n\t\r\n\t\t\treturn Math.atan2( vector.z, - vector.x );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Angle above the XZ plane.\r\n\t\r\n\t\tfunction inclination( vector ) {\r\n\t\r\n\t\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\t\r\n\t\tfunction correctUV( uv, vector, azimuth ) {\r\n\t\r\n\t\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\t\treturn uv.clone();\r\n\t\r\n\t\t}\r\n\t\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\r\n\t\r\n\tTHREE.PolyhedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.PolyhedronGeometry(\r\n\t\t\tthis.parameters.vertices,\r\n\t\t\tthis.parameters.indices,\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\treturn geometry.copy( this );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PolyhedronGeometry.prototype.copy = function ( source ) {\r\n\t\r\n\t\tTHREE.Geometry.prototype.copy.call( this, source );\r\n\t\treturn this;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/DodecahedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author Abe Pazos / https://hamoid.com\r\n\t */\r\n\t\r\n\tTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\t\r\n\t\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\t\tvar r = 1 / t;\r\n\t\r\n\t\tvar vertices = [\r\n\t\r\n\t\t\t// (1, 1, 1)\r\n\t\t\t- 1, - 1, - 1,    - 1, - 1,  1,\r\n\t\t\t- 1,  1, - 1,    - 1,  1,  1,\r\n\t\t\t 1, - 1, - 1,     1, - 1,  1,\r\n\t\t\t 1,  1, - 1,     1,  1,  1,\r\n\t\r\n\t\t\t// (0, 1/, )\r\n\t\t\t 0, - r, - t,     0, - r,  t,\r\n\t\t\t 0,  r, - t,     0,  r,  t,\r\n\t\r\n\t\t\t// (1/, , 0)\r\n\t\t\t- r, - t,  0,    - r,  t,  0,\r\n\t\t\t r, - t,  0,     r,  t,  0,\r\n\t\r\n\t\t\t// (, 0, 1/)\r\n\t\t\t- t,  0, - r,     t,  0, - r,\r\n\t\t\t- t,  0,  r,     t,  0,  r\r\n\t\t];\r\n\t\r\n\t\tvar indices = [\r\n\t\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t\t];\r\n\t\r\n\t\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\t\r\n\t\tthis.type = 'DodecahedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DodecahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\n\tTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\r\n\t\r\n\tTHREE.DodecahedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.DodecahedronGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/IcosahedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author timothypratley / https://github.com/timothypratley\r\n\t */\r\n\t\r\n\tTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\t\r\n\t\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\t\r\n\t\tvar vertices = [\r\n\t\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t\t];\r\n\t\r\n\t\tvar indices = [\r\n\t\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t\t];\r\n\t\r\n\t\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\t\r\n\t\tthis.type = 'IcosahedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.IcosahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\n\tTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\r\n\t\r\n\tTHREE.IcosahedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.IcosahedronGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/OctahedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author timothypratley / https://github.com/timothypratley\r\n\t */\r\n\t\r\n\tTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\t\r\n\t\tvar vertices = [\r\n\t\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\r\n\t\t];\r\n\t\r\n\t\tvar indices = [\r\n\t\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t\t];\r\n\t\r\n\t\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\t\r\n\t\tthis.type = 'OctahedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.OctahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\n\tTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\r\n\t\r\n\tTHREE.OctahedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.OctahedronGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/TetrahedronGeometry.js\r\n\t\r\n\t/**\r\n\t * @author timothypratley / https://github.com/timothypratley\r\n\t */\r\n\t\r\n\tTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\t\r\n\t\tvar vertices = [\r\n\t\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t\t];\r\n\t\r\n\t\tvar indices = [\r\n\t\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t\t];\r\n\t\r\n\t\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\t\r\n\t\tthis.type = 'TetrahedronGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tradius: radius,\r\n\t\t\tdetail: detail\r\n\t\t};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.TetrahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\n\tTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\r\n\t\r\n\tTHREE.TetrahedronGeometry.prototype.clone = function () {\r\n\t\r\n\t\tvar geometry = new THREE.TetrahedronGeometry(\r\n\t\t\tthis.parameters.radius,\r\n\t\t\tthis.parameters.detail\r\n\t\t);\r\n\t\r\n\t\tgeometry.copy( this );\r\n\t\r\n\t\treturn geometry;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/geometries/ParametricGeometry.js\r\n\t\r\n\t/**\r\n\t * @author zz85 / https://github.com/zz85\r\n\t * Parametric Surfaces Geometry\r\n\t * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n\t *\r\n\t * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n\t *\r\n\t */\r\n\t\r\n\tTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\t\r\n\t\tTHREE.Geometry.call( this );\r\n\t\r\n\t\tthis.type = 'ParametricGeometry';\r\n\t\r\n\t\tthis.parameters = {\r\n\t\t\tfunc: func,\r\n\t\t\tslices: slices,\r\n\t\t\tstacks: stacks\r\n\t\t};\r\n\t\r\n\t\tvar verts = this.vertices;\r\n\t\tvar faces = this.faces;\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\t\r\n\t\tvar i, j, p;\r\n\t\tvar u, v;\r\n\t\r\n\t\tvar sliceCount = slices + 1;\r\n\t\r\n\t\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\t\r\n\t\t\tv = i / stacks;\r\n\t\r\n\t\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\t\r\n\t\t\t\tu = j / slices;\r\n\t\r\n\t\t\t\tp = func( u, v );\r\n\t\t\t\tverts.push( p );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar a, b, c, d;\r\n\t\tvar uva, uvb, uvc, uvd;\r\n\t\r\n\t\tfor ( i = 0; i < stacks; i ++ ) {\r\n\t\r\n\t\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\t\r\n\t\t\t\ta = i * sliceCount + j;\r\n\t\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\t\tc = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\t\td = ( i + 1 ) * sliceCount + j;\r\n\t\r\n\t\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\t\r\n\t\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\t\r\n\t\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\t// console.log(this);\r\n\t\r\n\t\t// magic bullet\r\n\t\t// var diff = this.mergeVertices();\r\n\t\t// console.log('removed ', diff, ' vertices by merging');\r\n\t\r\n\t\tthis.computeFaceNormals();\r\n\t\tthis.computeVertexNormals();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\n\tTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\r\n\t\r\n\t// File:src/extras/geometries/WireframeGeometry.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.WireframeGeometry = function ( geometry ) {\r\n\t\r\n\t\tTHREE.BufferGeometry.call( this );\r\n\t\r\n\t\tvar edge = [ 0, 0 ], hash = {};\r\n\t\tvar sortFunction = function ( a, b ) {\r\n\t\r\n\t\t\treturn a - b;\r\n\t\r\n\t\t};\r\n\t\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\t\r\n\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar faces = geometry.faces;\r\n\t\t\tvar numEdges = 0;\r\n\t\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\t\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\t\tedge.sort( sortFunction );\r\n\t\r\n\t\t\t\t\tvar key = edge.toString();\r\n\t\r\n\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\tnumEdges ++;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\t\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\t\r\n\t\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j ] ];\r\n\t\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\t\r\n\t\t} else if ( geometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\tif ( geometry.index !== null ) {\r\n\t\r\n\t\t\t\t// Indexed BufferGeometry\r\n\t\r\n\t\t\t\tvar indices = geometry.index.array;\r\n\t\t\t\tvar vertices = geometry.attributes.position;\r\n\t\t\t\tvar drawcalls = geometry.drawcalls;\r\n\t\t\t\tvar numEdges = 0;\r\n\t\r\n\t\t\t\tif ( drawcalls.length === 0 ) {\r\n\t\r\n\t\t\t\t\tgeometry.addDrawCall( 0, indices.length );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t// allocate maximal size\r\n\t\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\t\r\n\t\t\t\tfor ( var o = 0, ol = drawcalls.length; o < ol; ++ o ) {\r\n\t\r\n\t\t\t\t\tvar drawcall = drawcalls[ o ];\r\n\t\r\n\t\t\t\t\tvar start = drawcall.start;\r\n\t\t\t\t\tvar count = drawcall.count;\r\n\t\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\t\r\n\t\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\t\t\t\tedge[ 0 ] = indices[ i + j ];\r\n\t\t\t\t\t\t\tedge[ 1 ] = indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\t\tedge.sort( sortFunction );\r\n\t\r\n\t\t\t\t\t\t\tvar key = edge.toString();\r\n\t\r\n\t\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\t\r\n\t\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\t\tnumEdges ++;\r\n\t\r\n\t\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\t\tvar index2 = edges[ 2 * i + j ];\r\n\t\r\n\t\t\t\t\t\tcoords[ index + 0 ] = vertices.getX( index2 );\r\n\t\t\t\t\t\tcoords[ index + 1 ] = vertices.getY( index2 );\r\n\t\t\t\t\t\tcoords[ index + 2 ] = vertices.getZ( index2 );\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\t// non-indexed BufferGeometry\r\n\t\r\n\t\t\t\tvar vertices = geometry.attributes.position.array;\r\n\t\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\t\tvar numTris = numEdges / 3;\r\n\t\r\n\t\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\t\r\n\t\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\t\r\n\t\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.WireframeGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\n\tTHREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry;\r\n\t\r\n\t// File:src/extras/helpers/AxisHelper.js\r\n\t\r\n\t/**\r\n\t * @author sroucheray / http://sroucheray.org/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.AxisHelper = function ( size ) {\r\n\t\r\n\t\tsize = size || 1;\r\n\t\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t0, 0, 0,  size, 0, 0,\r\n\t\t\t0, 0, 0,  0, size, 0,\r\n\t\t\t0, 0, 0,  0, 0, size\r\n\t\t] );\r\n\t\r\n\t\tvar colors = new Float32Array( [\r\n\t\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t\t0, 0, 1,  0, 0.6, 1\r\n\t\t] );\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\t\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\t\r\n\t\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, material );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.AxisHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\r\n\t\r\n\t// File:src/extras/helpers/ArrowHelper.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @author zz85 / http://github.com/zz85\r\n\t * @author bhouston / http://exocortex.com\r\n\t *\r\n\t * Creates an arrow for visualizing directions\r\n\t *\r\n\t * Parameters:\r\n\t *  dir - Vector3\r\n\t *  origin - Vector3\r\n\t *  length - Number\r\n\t *  color - color in hex value\r\n\t *  headLength - Number\r\n\t *  headWidth - Number\r\n\t */\r\n\t\r\n\tTHREE.ArrowHelper = ( function () {\r\n\t\r\n\t\tvar lineGeometry = new THREE.Geometry();\r\n\t\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\r\n\t\r\n\t\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\r\n\t\tconeGeometry.translate( 0, - 0.5, 0 );\r\n\t\r\n\t\treturn function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\t\r\n\t\t\t// dir is assumed to be normalized\r\n\t\r\n\t\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\t\tif ( length === undefined ) length = 1;\r\n\t\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\t\r\n\t\t\tthis.position.copy( origin );\r\n\t\t\t\r\n\t\t\tif ( headLength < length ) {\r\n\t\t\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\t\t\tthis.line.matrixAutoUpdate = false;\r\n\t\t\t\tthis.add( this.line );\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\t\tthis.add( this.cone );\r\n\t\r\n\t\t\tthis.setDirection( dir );\r\n\t\t\tthis.setLength( length, headLength, headWidth );\r\n\t\r\n\t\t}\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\r\n\t\r\n\tTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\t\r\n\t\tvar axis = new THREE.Vector3();\r\n\t\tvar radians;\r\n\t\r\n\t\treturn function setDirection( dir ) {\r\n\t\r\n\t\t\t// dir is assumed to be normalized\r\n\t\r\n\t\t\tif ( dir.y > 0.99999 ) {\r\n\t\r\n\t\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\t\r\n\t\t\t} else if ( dir.y < - 0.99999 ) {\r\n\t\r\n\t\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\t\r\n\t\t\t\tradians = Math.acos( dir.y );\r\n\t\r\n\t\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t}() );\r\n\t\r\n\tTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\t\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\t\r\n\t\tif ( headLength < length ){\r\n\t\t\tthis.line.scale.set( 1, length - headLength, 1 );\r\n\t\t\tthis.line.updateMatrix();\r\n\t\t}\r\n\t\r\n\t\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\t\tthis.cone.position.y = length;\r\n\t\tthis.cone.updateMatrix();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\t\r\n\t\tif ( this.line !== undefined ) this.line.material.color.set( color );\r\n\t\tthis.cone.material.color.set( color );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/BoxHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.BoxHelper = function ( object ) {\r\n\t\r\n\t\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\t\tvar positions = new Float32Array( 8 * 3 );\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\t\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ) );\r\n\t\r\n\t\tif ( object !== undefined ) {\r\n\t\r\n\t\t\tthis.update( object );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\r\n\t\r\n\tTHREE.BoxHelper.prototype.update = ( function () {\r\n\t\r\n\t\tvar box = new THREE.Box3();\r\n\t\r\n\t\treturn function ( object ) {\r\n\t\r\n\t\t\tbox.setFromObject( object );\r\n\t\r\n\t\t\tif ( box.empty() ) return;\r\n\t\r\n\t\t\tvar min = box.min;\r\n\t\t\tvar max = box.max;\r\n\t\r\n\t\t\t/*\r\n\t\t\t  5____4\r\n\t\t\t1/___0/|\r\n\t\t\t| 6__|_7\r\n\t\t\t2/___3/\r\n\t\r\n\t\t\t0: max.x, max.y, max.z\r\n\t\t\t1: min.x, max.y, max.z\r\n\t\t\t2: min.x, min.y, max.z\r\n\t\t\t3: max.x, min.y, max.z\r\n\t\t\t4: max.x, max.y, min.z\r\n\t\t\t5: min.x, max.y, min.z\r\n\t\t\t6: min.x, min.y, min.z\r\n\t\t\t7: max.x, min.y, min.z\r\n\t\t\t*/\r\n\t\r\n\t\t\tvar position = this.geometry.attributes.position;\r\n\t\t\tvar array = position.array;\r\n\t\r\n\t\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\r\n\t\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\r\n\t\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\r\n\t\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\t\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\t\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\t\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\t\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\t\r\n\t\t\tposition.needsUpdate = true;\r\n\t\r\n\t\t\tthis.geometry.computeBoundingSphere();\r\n\t\r\n\t\t}\r\n\t\r\n\t} )();\r\n\t\r\n\t// File:src/extras/helpers/BoundingBoxHelper.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\t// a helper to show the world-axis-aligned bounding box for an object\r\n\t\r\n\tTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\t\r\n\t\tthis.object = object;\r\n\t\r\n\t\tthis.box = new THREE.Box3();\r\n\t\r\n\t\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\r\n\t\r\n\tTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\t\r\n\t\tthis.box.setFromObject( this.object );\r\n\t\r\n\t\tthis.box.size( this.scale );\r\n\t\r\n\t\tthis.box.center( this.position );\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/CameraHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t *\r\n\t *\t- shows frustum, line of sight and up of the camera\r\n\t *\t- suitable for fast updates\r\n\t * \t- based on frustum visualization in lightgl.js shadowmap example\r\n\t *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n\t */\r\n\t\r\n\tTHREE.CameraHelper = function ( camera ) {\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\t\r\n\t\tvar pointMap = {};\r\n\t\r\n\t\t// colors\r\n\t\r\n\t\tvar hexFrustum = 0xffaa00;\r\n\t\tvar hexCone = 0xff0000;\r\n\t\tvar hexUp = 0x00aaff;\r\n\t\tvar hexTarget = 0xffffff;\r\n\t\tvar hexCross = 0x333333;\r\n\t\r\n\t\t// near\r\n\t\r\n\t\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\t\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\t\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\t\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\t\r\n\t\t// far\r\n\t\r\n\t\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\t\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\t\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\t\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\t\r\n\t\t// sides\r\n\t\r\n\t\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\t\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\t\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\t\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\t\r\n\t\t// cone\r\n\t\r\n\t\taddLine( \"p\", \"n1\", hexCone );\r\n\t\taddLine( \"p\", \"n2\", hexCone );\r\n\t\taddLine( \"p\", \"n3\", hexCone );\r\n\t\taddLine( \"p\", \"n4\", hexCone );\r\n\t\r\n\t\t// up\r\n\t\r\n\t\taddLine( \"u1\", \"u2\", hexUp );\r\n\t\taddLine( \"u2\", \"u3\", hexUp );\r\n\t\taddLine( \"u3\", \"u1\", hexUp );\r\n\t\r\n\t\t// target\r\n\t\r\n\t\taddLine( \"c\", \"t\", hexTarget );\r\n\t\taddLine( \"p\", \"c\", hexCross );\r\n\t\r\n\t\t// cross\r\n\t\r\n\t\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\t\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\t\r\n\t\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\t\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\t\r\n\t\tfunction addLine( a, b, hex ) {\r\n\t\r\n\t\t\taddPoint( a, hex );\r\n\t\t\taddPoint( b, hex );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfunction addPoint( id, hex ) {\r\n\t\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\t\r\n\t\t\tif ( pointMap[ id ] === undefined ) {\r\n\t\r\n\t\t\t\tpointMap[ id ] = [];\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, material );\r\n\t\r\n\t\tthis.camera = camera;\r\n\t\tthis.matrix = camera.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tthis.pointMap = pointMap;\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.CameraHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\r\n\t\r\n\tTHREE.CameraHelper.prototype.update = function () {\r\n\t\r\n\t\tvar geometry, pointMap;\r\n\t\r\n\t\tvar vector = new THREE.Vector3();\r\n\t\tvar camera = new THREE.Camera();\r\n\t\r\n\t\tvar setPoint = function ( point, x, y, z ) {\r\n\t\r\n\t\t\tvector.set( x, y, z ).unproject( camera );\r\n\t\r\n\t\t\tvar points = pointMap[ point ];\r\n\t\r\n\t\t\tif ( points !== undefined ) {\r\n\t\r\n\t\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\t\r\n\t\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t};\r\n\t\r\n\t\treturn function () {\r\n\t\r\n\t\t\tgeometry = this.geometry;\r\n\t\t\tpointMap = this.pointMap;\r\n\t\r\n\t\t\tvar w = 1, h = 1;\r\n\t\r\n\t\t\t// we need just camera projection matrix\r\n\t\t\t// world matrix must be identity\r\n\t\r\n\t\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\t\r\n\t\t\t// center / target\r\n\t\r\n\t\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\t\r\n\t\t\t// near\r\n\t\r\n\t\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\t\r\n\t\t\t// far\r\n\t\r\n\t\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\t\r\n\t\t\t// up\r\n\t\r\n\t\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\t\r\n\t\t\t// cross\r\n\t\r\n\t\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\t\r\n\t\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\t\r\n\t\t\tgeometry.verticesNeedUpdate = true;\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\t// File:src/extras/helpers/DirectionalLightHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t */\r\n\t\r\n\tTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.light = light;\r\n\t\tthis.light.updateMatrixWorld();\r\n\t\r\n\t\tthis.matrix = light.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tsize = size || 1;\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3( - size,   size, 0 ),\r\n\t\t\tnew THREE.Vector3(   size,   size, 0 ),\r\n\t\t\tnew THREE.Vector3(   size, - size, 0 ),\r\n\t\t\tnew THREE.Vector3( - size, - size, 0 ),\r\n\t\t\tnew THREE.Vector3( - size,   size, 0 )\r\n\t\t);\r\n\t\r\n\t\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\t\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\tthis.lightPlane = new THREE.Line( geometry, material );\r\n\t\tthis.add( this.lightPlane );\r\n\t\r\n\t\tgeometry = new THREE.Geometry();\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t);\r\n\t\r\n\t\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\r\n\t\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\tthis.targetLine = new THREE.Line( geometry, material );\r\n\t\tthis.add( this.targetLine );\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\r\n\t\r\n\tTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\t\r\n\t\tthis.lightPlane.geometry.dispose();\r\n\t\tthis.lightPlane.material.dispose();\r\n\t\tthis.targetLine.geometry.dispose();\r\n\t\tthis.targetLine.material.dispose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar v3 = new THREE.Vector3();\r\n\t\r\n\t\treturn function () {\r\n\t\r\n\t\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\t\tv3.subVectors( v2, v1 );\r\n\t\r\n\t\t\tthis.lightPlane.lookAt( v3 );\r\n\t\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\r\n\t\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\r\n\t\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\t// File:src/extras/helpers/EdgesHelper.js\r\n\t\r\n\t/**\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t * @param object THREE.Mesh whose geometry will be used\r\n\t * @param hex line color\r\n\t * @param thresholdAngle the minimum angle (in degrees),\r\n\t * between the face normals of adjacent faces,\r\n\t * that is required to render an edge. A value of 10 means\r\n\t * an edge is only rendered if the angle is at least 10 degrees.\r\n\t */\r\n\t\r\n\tTHREE.EdgesHelper = function ( object, hex, thresholdAngle ) {\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\t\r\n\t\tTHREE.LineSegments.call( this, new THREE.EdgesGeometry( object.geometry, thresholdAngle ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\r\n\t\tthis.matrix = object.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.EdgesHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\r\n\t\r\n\t// File:src/extras/helpers/FaceNormalsHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\t\r\n\t\t// FaceNormalsHelper only supports THREE.Geometry\r\n\t\r\n\t\tthis.object = object;\r\n\t\r\n\t\tthis.size = ( size !== undefined ) ? size : 1;\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\t\r\n\t\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar nNormals = 0;\r\n\t\r\n\t\tvar objGeometry = this.object.geometry;\r\n\t\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\tnNormals = objGeometry.faces.length;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\r\n\t\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\t\r\n\t\tgeometry.addAttribute( 'position', positions );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\t\r\n\t\t//\r\n\t\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.FaceNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\r\n\t\r\n\tTHREE.FaceNormalsHelper.prototype.update = ( function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar normalMatrix = new THREE.Matrix3();\r\n\t\r\n\t\treturn function update() {\r\n\t\r\n\t\t\tthis.object.updateMatrixWorld( true );\r\n\t\r\n\t\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\t\r\n\t\t\tvar matrixWorld = this.object.matrixWorld;\r\n\t\r\n\t\t\tvar position = this.geometry.attributes.position;\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar objGeometry = this.object.geometry;\r\n\t\r\n\t\t\tvar vertices = objGeometry.vertices;\r\n\t\r\n\t\t\tvar faces = objGeometry.faces;\r\n\t\r\n\t\t\tvar idx = 0;\r\n\t\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\tvar normal = face.normal;\r\n\t\r\n\t\t\t\tv1.copy( vertices[ face.a ] )\r\n\t\t\t\t\t.add( vertices[ face.b ] )\r\n\t\t\t\t\t.add( vertices[ face.c ] )\r\n\t\t\t\t\t.divideScalar( 3 )\r\n\t\t\t\t\t.applyMatrix4( matrixWorld );\r\n\t\r\n\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\t\r\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\t\r\n\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tposition.needsUpdate = true;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t}() );\r\n\t\r\n\t// File:src/extras/helpers/GridHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.GridHelper = function ( size, step ) {\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\t\r\n\t\tthis.color1 = new THREE.Color( 0x444444 );\r\n\t\tthis.color2 = new THREE.Color( 0x888888 );\r\n\t\r\n\t\tfor ( var i = - size; i <= size; i += step ) {\r\n\t\r\n\t\t\tgeometry.vertices.push(\r\n\t\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\r\n\t\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\r\n\t\t\t);\r\n\t\r\n\t\t\tvar color = i === 0 ? this.color1 : this.color2;\r\n\t\r\n\t\t\tgeometry.colors.push( color, color, color, color );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, material );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.GridHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\r\n\t\r\n\tTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\r\n\t\r\n\t\tthis.color1.set( colorCenterLine );\r\n\t\tthis.color2.set( colorGrid );\r\n\t\r\n\t\tthis.geometry.colorsNeedUpdate = true;\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/HemisphereLightHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.HemisphereLightHelper = function ( light, sphereSize ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.light = light;\r\n\t\tthis.light.updateMatrixWorld();\r\n\t\r\n\t\tthis.matrix = light.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\t\r\n\t\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\t\tgeometry.rotateX( - Math.PI / 2 );\r\n\t\r\n\t\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\t\r\n\t\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\t\r\n\t\t}\r\n\t\r\n\t\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\t\r\n\t\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\t\tthis.add( this.lightSphere );\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\r\n\t\r\n\tTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\t\r\n\t\tthis.lightSphere.geometry.dispose();\r\n\t\tthis.lightSphere.material.dispose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\t\r\n\t\tvar vector = new THREE.Vector3();\r\n\t\r\n\t\treturn function () {\r\n\t\r\n\t\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\t\r\n\t\t}\r\n\t\r\n\t}();\r\n\t\r\n\t// File:src/extras/helpers/PointLightHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\t\r\n\t\tthis.light = light;\r\n\t\tthis.light.updateMatrixWorld();\r\n\t\r\n\t\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\t\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\t\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\tTHREE.Mesh.call( this, geometry, material );\r\n\t\r\n\t\tthis.matrix = this.light.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\t/*\r\n\t\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\t\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\t\r\n\t\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\t\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\t\r\n\t\tvar d = light.distance;\r\n\t\r\n\t\tif ( d === 0.0 ) {\r\n\t\r\n\t\t\tthis.lightDistance.visible = false;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.lightDistance.scale.set( d, d, d );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.add( this.lightDistance );\r\n\t\t*/\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\r\n\t\r\n\tTHREE.PointLightHelper.prototype.dispose = function () {\r\n\t\r\n\t\tthis.geometry.dispose();\r\n\t\tthis.material.dispose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.PointLightHelper.prototype.update = function () {\r\n\t\r\n\t\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\t/*\r\n\t\tvar d = this.light.distance;\r\n\t\r\n\t\tif ( d === 0.0 ) {\r\n\t\r\n\t\t\tthis.lightDistance.visible = false;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tthis.lightDistance.visible = true;\r\n\t\t\tthis.lightDistance.scale.set( d, d, d );\r\n\t\r\n\t\t}\r\n\t\t*/\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/SkeletonHelper.js\r\n\t\r\n\t/**\r\n\t * @author Sean Griffin / http://twitter.com/sgrif\r\n\t * @author Michael Guerrero / http://realitymeltdown.com\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author ikerr / http://verold.com\r\n\t */\r\n\t\r\n\tTHREE.SkeletonHelper = function ( object ) {\r\n\t\r\n\t\tthis.bones = this.getBoneList( object );\r\n\t\r\n\t\tvar geometry = new THREE.Geometry();\r\n\t\r\n\t\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\t\r\n\t\t\tvar bone = this.bones[ i ];\r\n\t\r\n\t\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\t\r\n\t\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tgeometry.dynamic = true;\r\n\t\r\n\t\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, material );\r\n\t\r\n\t\tthis.root = object;\r\n\t\r\n\t\tthis.matrix = object.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\tTHREE.SkeletonHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\r\n\t\r\n\tTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\t\r\n\t\tvar boneList = [];\r\n\t\r\n\t\tif ( object instanceof THREE.Bone ) {\r\n\t\r\n\t\t\tboneList.push( object );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\t\r\n\t\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn boneList;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SkeletonHelper.prototype.update = function () {\r\n\t\r\n\t\tvar geometry = this.geometry;\r\n\t\r\n\t\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\t\r\n\t\tvar boneMatrix = new THREE.Matrix4();\r\n\t\r\n\t\tvar j = 0;\r\n\t\r\n\t\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\t\r\n\t\t\tvar bone = this.bones[ i ];\r\n\t\r\n\t\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\t\r\n\t\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\t\r\n\t\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\t\r\n\t\t\t\tj += 2;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\t\r\n\t\tgeometry.computeBoundingSphere();\r\n\t\r\n\t};\r\n\t\r\n\t// File:src/extras/helpers/SpotLightHelper.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.SpotLightHelper = function ( light ) {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.light = light;\r\n\t\tthis.light.updateMatrixWorld();\r\n\t\r\n\t\tthis.matrix = light.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\r\n\t\r\n\t\tgeometry.translate( 0, - 0.5, 0 );\r\n\t\tgeometry.rotateX( - Math.PI / 2 );\r\n\t\r\n\t\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\t\r\n\t\tthis.cone = new THREE.Mesh( geometry, material );\r\n\t\tthis.add( this.cone );\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\r\n\t\r\n\tTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\t\r\n\t\tthis.cone.geometry.dispose();\r\n\t\tthis.cone.material.dispose();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.SpotLightHelper.prototype.update = function () {\r\n\t\r\n\t\tvar vector = new THREE.Vector3();\r\n\t\tvar vector2 = new THREE.Vector3();\r\n\t\r\n\t\treturn function () {\r\n\t\r\n\t\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\r\n\t\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\t\r\n\t\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\t\r\n\t\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\r\n\t\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\t\r\n\t\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\r\n\t\t};\r\n\t\r\n\t}();\r\n\t\r\n\t// File:src/extras/helpers/VertexNormalsHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t * @author WestLangley / http://github.com/WestLangley\r\n\t*/\r\n\t\r\n\tTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\t\r\n\t\tthis.object = object;\r\n\t\r\n\t\tthis.size = ( size !== undefined ) ? size : 1;\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\t\r\n\t\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar nNormals = 0;\r\n\t\r\n\t\tvar objGeometry = this.object.geometry;\r\n\t\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\tnNormals = objGeometry.faces.length * 3;\r\n\t\r\n\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\tnNormals = objGeometry.attributes.normal.count\r\n\t\r\n\t\t}\r\n\t\r\n\t\t//\r\n\t\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\t\r\n\t\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\t\r\n\t\tgeometry.addAttribute( 'position', positions );\r\n\t\r\n\t\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\t\r\n\t\t//\r\n\t\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t\tthis.update();\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.VertexNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\r\n\t\r\n\tTHREE.VertexNormalsHelper.prototype.update = ( function () {\r\n\t\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar normalMatrix = new THREE.Matrix3();\r\n\t\r\n\t\treturn function update() {\r\n\t\r\n\t\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\t\r\n\t\t\tthis.object.updateMatrixWorld( true );\r\n\t\r\n\t\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\t\r\n\t\t\tvar matrixWorld = this.object.matrixWorld;\r\n\t\r\n\t\t\tvar position = this.geometry.attributes.position;\r\n\t\r\n\t\t\t//\r\n\t\r\n\t\t\tvar objGeometry = this.object.geometry;\r\n\t\r\n\t\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\t\r\n\t\t\t\tvar vertices = objGeometry.vertices;\r\n\t\r\n\t\t\t\tvar faces = objGeometry.faces;\r\n\t\r\n\t\t\t\tvar idx = 0;\r\n\t\r\n\t\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\t\r\n\t\t\t\t\tvar face = faces[ i ];\r\n\t\r\n\t\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\r\n\t\r\n\t\t\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\t\r\n\t\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\t\r\n\t\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\t\r\n\t\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\t\r\n\t\t\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\t\r\n\t\t\t\tvar objPos = objGeometry.attributes.position;\r\n\t\r\n\t\t\t\tvar objNorm = objGeometry.attributes.normal;\r\n\t\r\n\t\t\t\tvar idx = 0;\r\n\t\r\n\t\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\r\n\t\r\n\t\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\t\r\n\t\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\t\r\n\t\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\t\r\n\t\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\t\r\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\t\r\n\t\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\t\r\n\t\t\t\t\tidx = idx + 1;\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tposition.needsUpdate = true;\r\n\t\r\n\t\t\treturn this;\r\n\t\r\n\t\t}\r\n\t\r\n\t}() );\r\n\t\r\n\t// File:src/extras/helpers/WireframeHelper.js\r\n\t\r\n\t/**\r\n\t * @author mrdoob / http://mrdoob.com/\r\n\t */\r\n\t\r\n\tTHREE.WireframeHelper = function ( object, hex ) {\r\n\t\r\n\t\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\t\r\n\t\tTHREE.LineSegments.call( this, new THREE.WireframeGeometry( object.geometry ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\r\n\t\tthis.matrix = object.matrixWorld;\r\n\t\tthis.matrixAutoUpdate = false;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.WireframeHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\n\tTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\r\n\t\r\n\t// File:src/extras/objects/ImmediateRenderObject.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.ImmediateRenderObject = function () {\r\n\t\r\n\t\tTHREE.Object3D.call( this );\r\n\t\r\n\t\tthis.render = function ( renderCallback ) {};\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\n\tTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\r\n\t\r\n\t// File:src/extras/objects/MorphBlendMesh.js\r\n\t\r\n\t/**\r\n\t * @author alteredq / http://alteredqualia.com/\r\n\t */\r\n\t\r\n\tTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\t\r\n\t\tTHREE.Mesh.call( this, geometry, material );\r\n\t\r\n\t\tthis.animationsMap = {};\r\n\t\tthis.animationsList = [];\r\n\t\r\n\t\t// prepare default animation\r\n\t\t// (all frames played together in 1 second)\r\n\t\r\n\t\tvar numFrames = this.geometry.morphTargets.length;\r\n\t\r\n\t\tvar name = \"__default\";\r\n\t\r\n\t\tvar startFrame = 0;\r\n\t\tvar endFrame = numFrames - 1;\r\n\t\r\n\t\tvar fps = numFrames / 1;\r\n\t\r\n\t\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\t\tthis.setAnimationWeight( name, 1 );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\n\tTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\t\r\n\t\tvar animation = {\r\n\t\r\n\t\t\tstart: start,\r\n\t\t\tend: end,\r\n\t\r\n\t\t\tlength: end - start + 1,\r\n\t\r\n\t\t\tfps: fps,\r\n\t\t\tduration: ( end - start ) / fps,\r\n\t\r\n\t\t\tlastFrame: 0,\r\n\t\t\tcurrentFrame: 0,\r\n\t\r\n\t\t\tactive: false,\r\n\t\r\n\t\t\ttime: 0,\r\n\t\t\tdirection: 1,\r\n\t\t\tweight: 1,\r\n\t\r\n\t\t\tdirectionBackwards: false,\r\n\t\t\tmirroredLoop: false\r\n\t\r\n\t\t};\r\n\t\r\n\t\tthis.animationsMap[ name ] = animation;\r\n\t\tthis.animationsList.push( animation );\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\t\r\n\t\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\t\r\n\t\tvar firstAnimation, frameRanges = {};\r\n\t\r\n\t\tvar geometry = this.geometry;\r\n\t\r\n\t\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\t\tvar chunks = morph.name.match( pattern );\r\n\t\r\n\t\t\tif ( chunks && chunks.length > 1 ) {\r\n\t\r\n\t\t\t\tvar name = chunks[ 1 ];\r\n\t\r\n\t\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\t\r\n\t\t\t\tvar range = frameRanges[ name ];\r\n\t\r\n\t\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\t\tif ( i > range.end ) range.end = i;\r\n\t\r\n\t\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tfor ( var name in frameRanges ) {\r\n\t\r\n\t\t\tvar range = frameRanges[ name ];\r\n\t\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\t\r\n\t\t}\r\n\t\r\n\t\tthis.firstAnimation = firstAnimation;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.direction = 1;\r\n\t\t\tanimation.directionBackwards = false;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.direction = - 1;\r\n\t\t\tanimation.directionBackwards = true;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.fps = fps;\r\n\t\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.duration = duration;\r\n\t\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.weight = weight;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.time = time;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\t\r\n\t\tvar time = 0;\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\ttime = animation.time;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn time;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\t\r\n\t\tvar duration = - 1;\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tduration = animation.duration;\r\n\t\r\n\t\t}\r\n\t\r\n\t\treturn duration;\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.time = 0;\r\n\t\t\tanimation.active = true;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\t\r\n\t\tvar animation = this.animationsMap[ name ];\r\n\t\r\n\t\tif ( animation ) {\r\n\t\r\n\t\t\tanimation.active = false;\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\tTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\t\r\n\t\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\t\r\n\t\t\tvar animation = this.animationsList[ i ];\r\n\t\r\n\t\t\tif ( ! animation.active ) continue;\r\n\t\r\n\t\t\tvar frameTime = animation.duration / animation.length;\r\n\t\r\n\t\t\tanimation.time += animation.direction * delta;\r\n\t\r\n\t\t\tif ( animation.mirroredLoop ) {\r\n\t\r\n\t\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\t\r\n\t\t\t\t\tanimation.direction *= - 1;\r\n\t\r\n\t\t\t\t\tif ( animation.time > animation.duration ) {\r\n\t\r\n\t\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\t\tanimation.directionBackwards = true;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif ( animation.time < 0 ) {\r\n\t\r\n\t\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\t\tanimation.directionBackwards = false;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tanimation.time = animation.time % animation.duration;\r\n\t\r\n\t\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar keyframe = animation.start + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\t\tvar weight = animation.weight;\r\n\t\r\n\t\t\tif ( keyframe !== animation.currentFrame ) {\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\t\r\n\t\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\t\tanimation.currentFrame = keyframe;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\t\r\n\t\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\t\r\n\t\t\tif ( animation.currentFrame !== animation.lastFrame ) {\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\t\r\n\t\t\t} else {\r\n\t\r\n\t\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t};\r\n\t\r\n\t\r\n\t// Export the THREE object for **Node.js**, with\r\n\t// backwards-compatibility for the old `require()` API. If we're in\r\n\t// the browser, add `_` as a global object via a string identifier,\r\n\t// for Closure Compiler \"advanced\" mode.\r\n\tif (true) {\r\n\t  if (typeof module !== 'undefined' && module.exports) {\r\n\t    exports = module.exports = THREE;\r\n\t  }\r\n\t  exports.THREE = THREE;\r\n\t} else {\r\n\t  this['THREE'] = THREE;\r\n\t}\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// react-bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a047fb9ea7f8c963cbdb","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './containers/App';\n\nReactDOM.render(\n  <App />\n, document.getElementById('react-app'));\n\n\n\n// WEBPACK FOOTER //\n// ./react/app.js","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react.production.min.js');\n} else {\n  module.exports = require('./cjs/react.development.js');\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react/index.js\n// module id = 1\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var REACT_ELEMENT_TYPE = (typeof Symbol === 'function' &&\n    Symbol.for &&\n    Symbol.for('react.element')) ||\n    0xeac7;\n\n  var isValidElement = function(object) {\n    return typeof object === 'object' &&\n      object !== null &&\n      object.$$typeof === REACT_ELEMENT_TYPE;\n  };\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(isValidElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/prop-types/index.js\n// module id = 2\n// module chunks = 0","'use strict';\n\nvar getVendorPropertyName = require('./getVendorPropertyName');\n\nmodule.exports = function(target, sources) {\n  var to = Object(target);\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  for (var nextIndex = 1; nextIndex < arguments.length; nextIndex++) {\n    var nextSource = arguments[nextIndex];\n    if (nextSource == null) {\n      continue;\n    }\n\n    var from = Object(nextSource);\n\n    for (var key in from) {\n      if (hasOwnProperty.call(from, key)) {\n        to[key] = from[key];\n      }\n    }\n  }\n\n  var prefixed = {};\n  for (var key in to) {\n    prefixed[getVendorPropertyName(key)] = to[key]\n  }\n\n  return prefixed\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/domkit/appendVendorPrefix.js\n// module id = 3\n// module chunks = 0","'use strict';\n\nvar insertRule = require('./insertRule');\nvar vendorPrefix = require('./getVendorPrefix')();\nvar index = 0;\n\nmodule.exports = function(keyframes) {\n  // random name\n  var name = 'anim_' + (++index) + (+new Date);\n  var css = \"@\" + vendorPrefix + \"keyframes \" + name + \" {\";\n\n  for (var key in keyframes) {\n    css += key + \" {\";\n\n    for (var property in keyframes[key]) {\n      var part = \":\" + keyframes[key][property] + \";\";\n      // We do vendor prefix for every property\n      css += vendorPrefix + property + part;\n      css += property + part;\n    }\n\n    css += \"}\";\n  }\n\n  css += \"}\";\n\n  insertRule(css);\n\n  return name\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/domkit/insertKeyframesRule.js\n// module id = 4\n// module chunks = 0","\"use strict\";\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nfunction makeEmptyFunction(arg) {\n  return function () {\n    return arg;\n  };\n}\n\n/**\n * This function accepts and discards inputs; it has no side effects. This is\n * primarily useful idiomatically for overridable function endpoints which\n * always need to be callable, since JS lacks a null-call idiom ala Cocoa.\n */\nvar emptyFunction = function emptyFunction() {};\n\nemptyFunction.thatReturns = makeEmptyFunction;\nemptyFunction.thatReturnsFalse = makeEmptyFunction(false);\nemptyFunction.thatReturnsTrue = makeEmptyFunction(true);\nemptyFunction.thatReturnsNull = makeEmptyFunction(null);\nemptyFunction.thatReturnsThis = function () {\n  return this;\n};\nemptyFunction.thatReturnsArgument = function (arg) {\n  return arg;\n};\n\nmodule.exports = emptyFunction;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/emptyFunction.js\n// module id = 5\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\nvar emptyObject = {};\n\nif (process.env.NODE_ENV !== 'production') {\n  Object.freeze(emptyObject);\n}\n\nmodule.exports = emptyObject;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/emptyObject.js\n// module id = 6\n// module chunks = 0","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/object-assign/index.js\n// module id = 7\n// module chunks = 0","'use strict';\n\nfunction checkDCE() {\n  /* global __REACT_DEVTOOLS_GLOBAL_HOOK__ */\n  if (\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ === 'undefined' ||\n    typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE !== 'function'\n  ) {\n    return;\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    // This branch is unreachable because this function is only called\n    // in production, but the condition is true only in development.\n    // Therefore if the branch is still here, dead code elimination wasn't\n    // properly applied.\n    // Don't change the message. React DevTools relies on it. Also make sure\n    // this message doesn't occur elsewhere in this function, or it will cause\n    // a false positive.\n    throw new Error('^_^');\n  }\n  try {\n    // Verify that the code above has been dead code eliminated (DCE'd).\n    __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE);\n  } catch (err) {\n    // DevTools shouldn't crash React, no matter what.\n    // We should still report in case we break this code.\n    console.error(err);\n  }\n}\n\nif (process.env.NODE_ENV === 'production') {\n  // DCE check should happen before ReactDOM bundle executes so that\n  // DevTools can report bad minification during injection.\n  checkDCE();\n  module.exports = require('./cjs/react-dom.production.min.js');\n} else {\n  module.exports = require('./cjs/react-dom.development.js');\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-dom/index.js\n// module id = 8\n// module chunks = 0","import React, { Component } from 'react';\nimport STLViewer from '../../src/STLViewer';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      color: '#FF0000',\n      model: undefined\n    };\n\n    this.clickBlue = this.clickBlue.bind(this);\n    this.clickRed = this.clickRed.bind(this);\n  }\n\n  clickBlue(e) {\n    e.preventDefault();\n    this.setState({ color: '#0000FF' });\n  }\n\n  clickRed(e) {\n    e.preventDefault();\n    this.setState({ color: '#FF0000' });\n  }\n\n  onChange = ({ target }) => {\n    const { files } = target;\n    const reader = new FileReader();\n    reader.readAsArrayBuffer(files[0]);\n    reader.onload = () => {\n      this.setState({ model: reader.result });\n    };\n  };\n\n  render() {\n    return (\n      <div>\n        <input id=\"image-file\" type=\"file\" onChange={this.onChange} />\n        <STLViewer\n          modelColor={this.state.color}\n          lights={[[0.5, 1, -1], [1, 1, 1]]}\n          rotate={true}\n          model={this.state.model}\n        />\n        <button onClick={this.clickRed}>red</button>\n        <button onClick={this.clickBlue}>blue</button>\n      </div>\n    );\n  }\n}\nexport default App;\n\n\n\n// WEBPACK FOOTER //\n// ./react/containers/App.js","\nimport * as THREE from './Three';\nimport ReactDOM from 'react-dom';\nlet OrbitControls = require('three-orbit-controls')(THREE);\n\nconst DIRECTIONAL_LIGHT = 'directionalLight';\n\nclass Paint {\n  constructor() {\n    this.loader = new THREE.STLLoader();\n    this.scene = new THREE.Scene();\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: true\n    });\n    this.reqNumber = 0;\n  }\n\n  init(context) {\n    this.component = context;\n    this.width = context.props.width;\n    this.height = context.props.height;\n    this.modelColor = context.props.modelColor;\n    this.backgroundColor = context.props.backgroundColor;\n    this.orbitControls = context.props.orbitControls;\n    this.rotate = context.props.rotate;\n    this.cameraX = context.props.cameraX;\n    this.cameraY = context.props.cameraY;\n    this.cameraZ = context.props.cameraZ;\n    this.rotationSpeeds = context.props.rotationSpeeds;\n    this.lights = context.props.lights;\n    this.lightColor = context.props.lightColor;\n    this.model = context.props.model;\n\n    if (this.mesh !== undefined) {\n      this.scene.remove(this.mesh);\n      this.mesh.geometry.dispose();\n      this.mesh.material.dispose();\n      this.scene.remove(this.grid);\n    }\n    const directionalLightObj = this.scene.getObjectByName(DIRECTIONAL_LIGHT);\n    if (directionalLightObj) {\n      this.scene.remove(directionalLightObj);\n    }\n\n    if (this.animationRequestId) {\n      cancelAnimationFrame(this.animationRequestId);\n    }\n\n    //Detector.addGetWebGLMessage();\n    this.distance = 10000;\n\n    this.reqNumber += 1;\n    this.addSTLToScene(this.reqNumber);\n  }\n\n\n  loadSTLFromUrl(url, reqId) {\n    return new Promise(resolve => {\n      this.loader.crossOrigin = '';\n      this.loader.loadFromUrl(url, geometry => {\n        if (this.reqNumber !== reqId) {\n          return;\n        }\n        resolve(geometry);\n      });\n    });\n  }\n\n  loadFromFile(file) {\n    return new Promise(resolve => {\n      this.loader.loadFromFile(file, geometry => {\n        resolve(geometry);\n      });\n    });\n  }\n\n  addSTLToScene(reqId) {\n    let loadPromise;\n    if (typeof this.model === 'string') {\n      loadPromise = this.loadSTLFromUrl(this.model, reqId);\n    } else if (this.model instanceof ArrayBuffer) {\n      loadPromise = this.loadFromFile(this.model);\n    } else {\n      return Promise.resolve(null);\n    }\n    return loadPromise.then(geometry => {\n      // Calculate mesh noramls for MeshLambertMaterial.\n      geometry.computeFaceNormals();\n      geometry.computeVertexNormals();\n\n      // Center the object\n      geometry.center();\n\n      let material = new THREE.MeshLambertMaterial({\n        overdraw: true,\n        color: this.modelColor\n      });\n\n      if (geometry.hasColors) {\n        material = new THREE.MeshPhongMaterial({\n          opacity: geometry.alpha,\n          vertexColors: THREE.VertexColors\n        });\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      // Set the object's dimensions\n      geometry.computeBoundingBox();\n      this.xDims = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n      this.yDims = geometry.boundingBox.max.y - geometry.boundingBox.min.y;\n      this.zDims = geometry.boundingBox.max.z - geometry.boundingBox.min.z;\n\n      if (this.rotate) {\n        this.mesh.rotation.x = this.rotationSpeeds[0];\n        this.mesh.rotation.y = this.rotationSpeeds[1];\n        this.mesh.rotation.z = this.rotationSpeeds[2];\n      }\n\n      this.scene.add(this.mesh);\n\n      this.addCamera();\n      this.addInteractionControls();\n      this.addToReactComponent();\n\n      // Start the animation\n      this.animate();\n    });\n  }\n\n  addCamera() {\n    // Add the camera\n    this.camera = new THREE.PerspectiveCamera(\n      30,\n      this.width / this.height,\n      1,\n      this.distance\n    );\n    this.camera.add( new THREE.PointLight( 0xffffff, 0.8 ) );\n\n    if (this.cameraZ === null) {\n      this.cameraZ = Math.max(this.xDims * 3, this.yDims * 3, this.zDims * 3);\n    }\n\n    this.camera.position.set(this.cameraX, this.cameraY, this.cameraZ);\n\n    this.scene.add(this.camera);\n\n    this.camera.lookAt(this.mesh);\n\n    this.renderer.set;\n    this.renderer.setSize(this.width, this.height);\n    this.renderer.setClearColor(this.backgroundColor, 1);\n  }\n\n  addInteractionControls() {\n    // Add controls for mouse interaction\n    if (this.orbitControls) {\n      this.controls = new OrbitControls(\n        this.camera,\n        ReactDOM.findDOMNode(this.component)\n      );\n      this.controls.enableDamping = false;\n      this.controls.enableRotate\n      this.controls.enableKeys = false;\n      this.controls.addEventListener('change', this.orbitRender.bind(this));\n    }\n  }\n\n  addToReactComponent() {\n    // Add to the React Component\n    ReactDOM.findDOMNode(this.component).replaceChild(\n      this.renderer.domElement,\n      ReactDOM.findDOMNode(this.component).firstChild\n    );\n  }\n\n  /**\n   * Animate the scene\n   * @returns {void}\n   */\n  animate() {\n    // note: three.js includes requestAnimationFrame shim\n    if (this.rotate) {\n      this.animationRequestId = requestAnimationFrame(this.animate.bind(this));\n    }\n\n    if (this.orbitControls) {\n      this.controls.update();\n    }\n    this.render();\n  }\n\n  /**\n   * Render the scene after turning off the rotation\n   * @returns {void}\n   */\n  orbitRender() {\n    if (this.rotate) {\n      this.rotate = false;\n    }\n\n    this.render();\n  }\n\n  /**\n   * Deallocate Mesh, renderer context.\n   * @returns {void}\n   */\n  clean() {\n    if (this.mesh !== undefined) {\n      this.mesh.geometry.dispose();\n      this.mesh.material.dispose();\n      this.scene.remove(this.mesh);\n      delete this.mesh;\n    }\n    const directionalLightObj = this.scene.getObjectByName(DIRECTIONAL_LIGHT);\n    if (directionalLightObj) {\n      this.scene.remove(directionalLightObj);\n    }\n\n    if (this.animationRequestId) {\n      cancelAnimationFrame(this.animationRequestId);\n    }\n    this.renderer.dispose();\n    this.renderer.forceContextLoss();\n  }\n\n  /**\n   * Render the scene\n   * @returns {void}\n   */\n  render() {\n    if (this.mesh && this.rotate) {\n      this.mesh.rotation.x += this.rotationSpeeds[0];\n      this.mesh.rotation.y += this.rotationSpeeds[1];\n      this.mesh.rotation.z += this.rotationSpeeds[2];\n    }\n\n    this.renderer.render(this.scene, this.camera);\n  }\n}\n\nexport default Paint;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Paint.js","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { ScaleLoader } from 'halogenium';\nimport Paint from './Paint';\n\nclass STLViewer extends Component {\n  static propTypes = {\n    className: PropTypes.string,\n    url: PropTypes.string,\n    width: PropTypes.number,\n    height: PropTypes.number,\n    backgroundColor: PropTypes.string,\n    modelColor: PropTypes.string,\n    rotate: PropTypes.bool,\n    orbitControls: PropTypes.bool,\n    cameraX: PropTypes.number,\n    cameraY: PropTypes.number,\n    cameraZ: PropTypes.number,\n    lights: PropTypes.array,\n    lightColor: PropTypes.string,\n    rotationSpeeds: PropTypes.arrayOf(PropTypes.number),\n    model: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.instanceOf(ArrayBuffer)\n    ]).isRequired\n  };\n\n  static defaultProps = {\n    backgroundColor: '#EAEAEA',\n    modelColor: '#B92C2C',\n    height: 400,\n    width: 400,\n    rotate: true,\n    orbitControls: true,\n    cameraX: 0,\n    cameraY: 0,\n    cameraZ: null,\n    lights: [0, 0, 1],\n    lightColor: '#ffffff',\n    rotationSpeeds: [0, 0, 0.02],\n    model: undefined\n  };\n\n  componentDidMount() {\n    this.paint = new Paint();\n    this.paint.init(this);\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return JSON.stringify(nextProps) !== JSON.stringify(this.props);\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    this.props = nextProps;\n    this.paint.init(this);\n  }\n\n  componentWillUnmount() {\n    this.paint.clean();\n    delete this.paint;\n  }\n\n  render() {\n    const { width, height, modelColor } = this.props;\n    return (\n      <div\n        className={this.props.className}\n        style={{\n          width: width,\n          height: height,\n          overflow: 'hidden'\n        }}\n      >\n        <div\n          style={{\n            height: '100%',\n            display: 'flex',\n            justifyContent: 'center',\n            alignItems: 'center'\n          }}\n        >\n          <ScaleLoader color={modelColor} size=\"16px\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nmodule.exports = STLViewer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/STLViewer.js","var THREE = require('three');\n\n//\n// STL Loader added\n//\n/**\n * @author aleeper / http://adamleeper.com/\n * @author mrdoob / http://mrdoob.com/\n * @author gero3 / https://github.com/gero3\n *\n * Description: A THREE loader for STL ASCII files, as created by Solidworks and other CAD programs.\n *\n * Supports both binary and ASCII encoded files, with automatic detection of type.\n *\n * Limitations:\n *  Binary decoding supports \"Magics\" color format (http://en.wikipedia.org/wiki/STL_(file_format)#Color_in_binary_STL).\n *  There is perhaps some question as to how valid it is to always assume little-endian-ness.\n *  ASCII decoding assumes file is UTF-8. Seems to work for the examples...\n *\n * Usage:\n *  var loader = new THREE.STLLoader();\n *  loader.load( './models/stl/slotted_disk.stl', function ( geometry ) {\n *    scene.add( new THREE.Mesh( geometry ) );\n *  });\n *\n * For binary STLs geometry might contain colors for vertices. To use it:\n *  // use the same code to load STL as above\n *  if (geometry.hasColors) {\n *    material = new THREE.MeshPhongMaterial({ opacity: geometry.alpha, vertexColors: THREE.VertexColors });\n *  } else { .... }\n *  var mesh = new THREE.Mesh( geometry, material );\n */\n\nTHREE.STLLoader = function(manager) {\n  this.manager = manager !== undefined ? manager : THREE.DefaultLoadingManager;\n};\n\nTHREE.STLLoader.prototype = {\n  constructor: THREE.STLLoader,\n\n  loadFromUrl: function(url, onLoad, onProgress, onError) {\n    var scope = this;\n\n    var loader = new THREE.XHRLoader(scope.manager);\n    loader.setCrossOrigin(this.crossOrigin);\n    loader.setResponseType('arraybuffer');\n    loader.load(\n      url,\n      function(text) {\n        onLoad(scope.parse(text));\n      },\n      onProgress,\n      onError\n    );\n  },\n\n  loadFromFile: function(buffer, onLoad) {\n    var scope = this;\n    onLoad(scope.parse(buffer));\n  },\n\n  parse: function(data) {\n    var isBinary = function() {\n      var expect, face_size, n_faces, reader;\n      reader = new DataView(binData);\n      face_size = (32 / 8) * 3 + (32 / 8) * 3 * 3 + 16 / 8;\n      n_faces = reader.getUint32(80, true);\n      expect = 80 + 32 / 8 + n_faces * face_size;\n\n      if (expect === reader.byteLength) {\n        return true;\n      }\n\n      // some binary files will have different size from expected,\n      // checking characters higher than ASCII to confirm is binary\n      var fileLength = reader.byteLength;\n      for (var index = 0; index < fileLength; index++) {\n        if (reader.getUint8(index, false) > 127) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    var binData = this.ensureBinary(data);\n\n    return isBinary()\n      ? this.parseBinary(binData)\n      : this.parseASCII(this.ensureString(data));\n  },\n\n  parseBinary: function(data) {\n    var reader = new DataView(data);\n    var faces = reader.getUint32(80, true);\n\n    var r,\n      g,\n      b,\n      hasColors = false,\n      colors;\n    var defaultR, defaultG, defaultB, alpha;\n\n    // process STL header\n    // check for default color in header (\"COLOR=rgba\" sequence).\n\n    for (var index = 0; index < 80 - 10; index++) {\n      if (\n        reader.getUint32(index, false) == 0x434f4c4f /*COLO*/ &&\n        reader.getUint8(index + 4) == 0x52 /*'R'*/ &&\n        reader.getUint8(index + 5) == 0x3d /*'='*/\n      ) {\n        hasColors = true;\n        colors = new Float32Array(faces * 3 * 3);\n\n        defaultR = reader.getUint8(index + 6) / 255;\n        defaultG = reader.getUint8(index + 7) / 255;\n        defaultB = reader.getUint8(index + 8) / 255;\n        alpha = reader.getUint8(index + 9) / 255;\n      }\n    }\n\n    var dataOffset = 84;\n    var faceLength = 12 * 4 + 2;\n\n    var offset = 0;\n\n    var geometry = new THREE.BufferGeometry();\n\n    var vertices = new Float32Array(faces * 3 * 3);\n    var normals = new Float32Array(faces * 3 * 3);\n\n    for (var face = 0; face < faces; face++) {\n      var start = dataOffset + face * faceLength;\n      var normalX = reader.getFloat32(start, true);\n      var normalY = reader.getFloat32(start + 4, true);\n      var normalZ = reader.getFloat32(start + 8, true);\n\n      if (hasColors) {\n        var packedColor = reader.getUint16(start + 48, true);\n\n        if ((packedColor & 0x8000) === 0) {\n          // facet has its own unique color\n\n          r = (packedColor & 0x1f) / 31;\n          g = ((packedColor >> 5) & 0x1f) / 31;\n          b = ((packedColor >> 10) & 0x1f) / 31;\n        } else {\n          r = defaultR;\n          g = defaultG;\n          b = defaultB;\n        }\n      }\n\n      for (var i = 1; i <= 3; i++) {\n        var vertexstart = start + i * 12;\n\n        vertices[offset] = reader.getFloat32(vertexstart, true);\n        vertices[offset + 1] = reader.getFloat32(vertexstart + 4, true);\n        vertices[offset + 2] = reader.getFloat32(vertexstart + 8, true);\n\n        normals[offset] = normalX;\n        normals[offset + 1] = normalY;\n        normals[offset + 2] = normalZ;\n\n        if (hasColors) {\n          colors[offset] = r;\n          colors[offset + 1] = g;\n          colors[offset + 2] = b;\n        }\n\n        offset += 3;\n      }\n    }\n\n    geometry.addAttribute('position', new THREE.BufferAttribute(vertices, 3));\n    geometry.addAttribute('normal', new THREE.BufferAttribute(normals, 3));\n\n    if (hasColors) {\n      geometry.addAttribute('color', new THREE.BufferAttribute(colors, 3));\n      geometry.hasColors = true;\n      geometry.alpha = alpha;\n    }\n\n    return geometry;\n  },\n\n  parseASCII: function(data) {\n    var geometry,\n      length,\n      normal,\n      patternFace,\n      patternNormal,\n      patternVertex,\n      result,\n      text;\n    geometry = new THREE.Geometry();\n    patternFace = /facet([\\s\\S]*?)endfacet/g;\n\n    while ((result = patternFace.exec(data)) !== null) {\n      text = result[0];\n      patternNormal = /normal[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n      while ((result = patternNormal.exec(text)) !== null) {\n        normal = new THREE.Vector3(\n          parseFloat(result[1]),\n          parseFloat(result[3]),\n          parseFloat(result[5])\n        );\n      }\n\n      patternVertex = /vertex[\\s]+([\\-+]?[0-9]+\\.?[0-9]*([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+[\\s]+([\\-+]?[0-9]*\\.?[0-9]+([eE][\\-+]?[0-9]+)?)+/g;\n\n      while ((result = patternVertex.exec(text)) !== null) {\n        geometry.vertices.push(\n          new THREE.Vector3(\n            parseFloat(result[1]),\n            parseFloat(result[3]),\n            parseFloat(result[5])\n          )\n        );\n      }\n\n      length = geometry.vertices.length;\n\n      geometry.faces.push(\n        new THREE.Face3(length - 3, length - 2, length - 1, normal)\n      );\n    }\n\n    geometry.computeBoundingBox();\n    geometry.computeBoundingSphere();\n\n    return geometry;\n  },\n\n  ensureString: function(buf) {\n    if (typeof buf !== 'string') {\n      var array_buffer = new Uint8Array(buf);\n      var str = '';\n      for (var i = 0; i < buf.byteLength; i++) {\n        str += String.fromCharCode(array_buffer[i]); // implicitly assumes little-endian\n      }\n      return str;\n    } else {\n      return buf;\n    }\n  },\n\n  ensureBinary: function(buf) {\n    if (typeof buf === 'string') {\n      var array_buffer = new Uint8Array(buf.length);\n      for (var i = 0; i < buf.length; i++) {\n        array_buffer[i] = buf.charCodeAt(i) & 0xff; // implicitly assumes little-endian\n      }\n      return array_buffer.buffer || array_buffer;\n    } else {\n      return buf;\n    }\n  }\n};\n\nif (typeof DataView === 'undefined') {\n  DataView = function(buffer, byteOffset, byteLength) {\n    this.buffer = buffer;\n    this.byteOffset = byteOffset || 0;\n    this.byteLength = byteLength || buffer.byteLength || buffer.length;\n    this._isString = typeof buffer === 'string';\n  };\n\n  DataView.prototype = {\n    _getCharCodes: function(buffer, start, length) {\n      start = start || 0;\n      length = length || buffer.length;\n      var end = start + length;\n      var codes = [];\n      for (var i = start; i < end; i++) {\n        codes.push(buffer.charCodeAt(i) & 0xff);\n      }\n      return codes;\n    },\n\n    _getBytes: function(length, byteOffset, littleEndian) {\n      var result;\n\n      // Handle the lack of endianness\n      if (littleEndian === undefined) {\n        littleEndian = this._littleEndian;\n      }\n\n      // Handle the lack of byteOffset\n      if (byteOffset === undefined) {\n        byteOffset = this.byteOffset;\n      } else {\n        byteOffset = this.byteOffset + byteOffset;\n      }\n\n      if (length === undefined) {\n        length = this.byteLength - byteOffset;\n      }\n\n      // Error Checking\n      if (typeof byteOffset !== 'number') {\n        throw new TypeError('DataView byteOffset is not a number');\n      }\n\n      if (length < 0 || byteOffset + length > this.byteLength) {\n        throw new Error(\n          'DataView length or (byteOffset+length) value is out of bounds'\n        );\n      }\n\n      if (this.isString) {\n        result = this._getCharCodes(\n          this.buffer,\n          byteOffset,\n          byteOffset + length\n        );\n      } else {\n        result = this.buffer.slice(byteOffset, byteOffset + length);\n      }\n\n      if (!littleEndian && length > 1) {\n        if (!(result instanceof Array)) {\n          result = Array.prototype.slice.call(result);\n        }\n\n        result.reverse();\n      }\n\n      return result;\n    },\n\n    // Compatibility functions on a String Buffer\n\n    getFloat64: function(byteOffset, littleEndian) {\n      var b = this._getBytes(8, byteOffset, littleEndian),\n        sign = 1 - 2 * (b[7] >> 7),\n        exponent =\n          ((((b[7] << 1) & 0xff) << 3) | (b[6] >> 4)) - ((1 << 10) - 1),\n        // Binary operators such as | and << operate on 32 bit values, using + and Math.pow(2) instead\n        mantissa =\n          (b[6] & 0x0f) * Math.pow(2, 48) +\n          b[5] * Math.pow(2, 40) +\n          b[4] * Math.pow(2, 32) +\n          b[3] * Math.pow(2, 24) +\n          b[2] * Math.pow(2, 16) +\n          b[1] * Math.pow(2, 8) +\n          b[0];\n\n      if (exponent === 1024) {\n        if (mantissa !== 0) {\n          return NaN;\n        } else {\n          return sign * Infinity;\n        }\n      }\n\n      if (exponent === -1023) {\n        // Denormalized\n        return sign * mantissa * Math.pow(2, -1022 - 52);\n      }\n\n      return sign * (1 + mantissa * Math.pow(2, -52)) * Math.pow(2, exponent);\n    },\n\n    getFloat32: function(byteOffset, littleEndian) {\n      var b = this._getBytes(4, byteOffset, littleEndian),\n        sign = 1 - 2 * (b[3] >> 7),\n        exponent = (((b[3] << 1) & 0xff) | (b[2] >> 7)) - 127,\n        mantissa = ((b[2] & 0x7f) << 16) | (b[1] << 8) | b[0];\n\n      if (exponent === 128) {\n        if (mantissa !== 0) {\n          return NaN;\n        } else {\n          return sign * Infinity;\n        }\n      }\n\n      if (exponent === -127) {\n        // Denormalized\n        return sign * mantissa * Math.pow(2, -126 - 23);\n      }\n\n      return sign * (1 + mantissa * Math.pow(2, -23)) * Math.pow(2, exponent);\n    },\n\n    getInt32: function(byteOffset, littleEndian) {\n      var b = this._getBytes(4, byteOffset, littleEndian);\n      return (b[3] << 24) | (b[2] << 16) | (b[1] << 8) | b[0];\n    },\n\n    getUint32: function(byteOffset, littleEndian) {\n      return this.getInt32(byteOffset, littleEndian) >>> 0;\n    },\n\n    getInt16: function(byteOffset, littleEndian) {\n      return (this.getUint16(byteOffset, littleEndian) << 16) >> 16;\n    },\n\n    getUint16: function(byteOffset, littleEndian) {\n      var b = this._getBytes(2, byteOffset, littleEndian);\n      return (b[1] << 8) | b[0];\n    },\n\n    getInt8: function(byteOffset) {\n      return (this.getUint8(byteOffset) << 24) >> 24;\n    },\n\n    getUint8: function(byteOffset) {\n      return this._getBytes(1, byteOffset)[0];\n    }\n  };\n}\n\nmodule.exports = THREE;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Three.js","'use strict';\n\nmodule.exports = document.createElement('div').style;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/domkit/builtinStyle.js\n// module id = 13\n// module chunks = 0","'use strict';\n\nvar cssVendorPrefix;\n\nmodule.exports = function() {\n\n  if (cssVendorPrefix) return cssVendorPrefix;\n\n  var styles = window.getComputedStyle(document.documentElement, '');\n  var pre = (Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o']))[1];\n\n  return cssVendorPrefix = '-' + pre + '-';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/domkit/getVendorPrefix.js\n// module id = 14\n// module chunks = 0","'use strict';\n\nvar builtinStyle = require('./builtinStyle');\nvar prefixes = ['Moz', 'Webkit', 'O', 'ms'];\nvar domVendorPrefix;\n\n// Helper function to get the proper vendor property name. (transition => WebkitTransition)\nmodule.exports = function(prop, isSupportTest) {\n\n  var vendorProp;\n  if (prop in builtinStyle) return prop;\n\n  var UpperProp = prop.charAt(0).toUpperCase() + prop.substr(1);\n\n  if (domVendorPrefix) {\n\n    vendorProp = domVendorPrefix + UpperProp;\n    if (vendorProp in builtinStyle) {\n      return vendorProp;\n    }\n  } else {\n\n    for (var i = 0; i < prefixes.length; ++i) {\n      vendorProp = prefixes[i] + UpperProp;\n      if (vendorProp in builtinStyle) {\n        domVendorPrefix = prefixes[i];\n        return vendorProp;\n      }\n    }\n  }\n\n  // if support test, not fallback to origin prop name\n  if (!isSupportTest) {\n    return prop;\n  }\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/domkit/getVendorPropertyName.js\n// module id = 15\n// module chunks = 0","'use strict';\n\nvar extraSheet;\n\nmodule.exports = function(css) {\n\n  if (!extraSheet) {\n    // First time, create an extra stylesheet for adding rules\n    extraSheet = document.createElement('style');\n    document.getElementsByTagName('head')[0].appendChild(extraSheet);\n    // Keep reference to actual StyleSheet object (`styleSheet` for IE < 9)\n    extraSheet = extraSheet.sheet || extraSheet.styleSheet;\n  }\n\n  var index = (extraSheet.cssRules || extraSheet.rules).length;\n  extraSheet.insertRule(css, index);\n\n  return extraSheet;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/domkit/insertRule.js\n// module id = 16\n// module chunks = 0","'use strict';\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\nvar emptyFunction = require('./emptyFunction');\n\n/**\n * Upstream version of event listener. Does not take into account specific\n * nature of platform.\n */\nvar EventListener = {\n  /**\n   * Listen to DOM events during the bubble phase.\n   *\n   * @param {DOMEventTarget} target DOM element to register listener on.\n   * @param {string} eventType Event type, e.g. 'click' or 'mouseover'.\n   * @param {function} callback Callback function.\n   * @return {object} Object with a `remove` method.\n   */\n  listen: function listen(target, eventType, callback) {\n    if (target.addEventListener) {\n      target.addEventListener(eventType, callback, false);\n      return {\n        remove: function remove() {\n          target.removeEventListener(eventType, callback, false);\n        }\n      };\n    } else if (target.attachEvent) {\n      target.attachEvent('on' + eventType, callback);\n      return {\n        remove: function remove() {\n          target.detachEvent('on' + eventType, callback);\n        }\n      };\n    }\n  },\n\n  /**\n   * Listen to DOM events during the capture phase.\n   *\n   * @param {DOMEventTarget} target DOM element to register listener on.\n   * @param {string} eventType Event type, e.g. 'click' or 'mouseover'.\n   * @param {function} callback Callback function.\n   * @return {object} Object with a `remove` method.\n   */\n  capture: function capture(target, eventType, callback) {\n    if (target.addEventListener) {\n      target.addEventListener(eventType, callback, true);\n      return {\n        remove: function remove() {\n          target.removeEventListener(eventType, callback, true);\n        }\n      };\n    } else {\n      if (process.env.NODE_ENV !== 'production') {\n        console.error('Attempted to listen to events during the capture phase on a ' + 'browser that does not support the capture phase. Your application ' + 'will not receive some events.');\n      }\n      return {\n        remove: emptyFunction\n      };\n    }\n  },\n\n  registerDefault: function registerDefault() {}\n};\n\nmodule.exports = EventListener;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/EventListener.js\n// module id = 17\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\nvar canUseDOM = !!(typeof window !== 'undefined' && window.document && window.document.createElement);\n\n/**\n * Simple, lightweight module assisting with the detection and context of\n * Worker. Helps avoid circular dependencies and allows code to reason about\n * whether or not they are in a Worker, even if they never include the main\n * `ReactWorker` dependency.\n */\nvar ExecutionEnvironment = {\n\n  canUseDOM: canUseDOM,\n\n  canUseWorkers: typeof Worker !== 'undefined',\n\n  canUseEventListeners: canUseDOM && !!(window.addEventListener || window.attachEvent),\n\n  canUseViewport: canUseDOM && !!window.screen,\n\n  isInWorker: !canUseDOM // For now, this is true - might change in the future.\n\n};\n\nmodule.exports = ExecutionEnvironment;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/ExecutionEnvironment.js\n// module id = 18\n// module chunks = 0","'use strict';\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n */\n\nvar isTextNode = require('./isTextNode');\n\n/*eslint-disable no-bitwise */\n\n/**\n * Checks if a given DOM node contains or is another DOM node.\n */\nfunction containsNode(outerNode, innerNode) {\n  if (!outerNode || !innerNode) {\n    return false;\n  } else if (outerNode === innerNode) {\n    return true;\n  } else if (isTextNode(outerNode)) {\n    return false;\n  } else if (isTextNode(innerNode)) {\n    return containsNode(outerNode, innerNode.parentNode);\n  } else if ('contains' in outerNode) {\n    return outerNode.contains(innerNode);\n  } else if (outerNode.compareDocumentPosition) {\n    return !!(outerNode.compareDocumentPosition(innerNode) & 16);\n  } else {\n    return false;\n  }\n}\n\nmodule.exports = containsNode;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/containsNode.js\n// module id = 19\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * @param {DOMElement} node input/textarea to focus\n */\n\nfunction focusNode(node) {\n  // IE8 can throw \"Can't move focus to the control because it is invisible,\n  // not enabled, or of a type that does not accept the focus.\" for all kinds of\n  // reasons that are too expensive and fragile to test.\n  try {\n    node.focus();\n  } catch (e) {}\n}\n\nmodule.exports = focusNode;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/focusNode.js\n// module id = 20\n// module chunks = 0","'use strict';\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\n/* eslint-disable fb-www/typeof-undefined */\n\n/**\n * Same as document.activeElement but wraps in a try-catch block. In IE it is\n * not safe to call document.activeElement if there is nothing focused.\n *\n * The activeElement will be null only if the document or document body is not\n * yet defined.\n *\n * @param {?DOMDocument} doc Defaults to current document.\n * @return {?DOMElement}\n */\nfunction getActiveElement(doc) /*?DOMElement*/{\n  doc = doc || (typeof document !== 'undefined' ? document : undefined);\n  if (typeof doc === 'undefined') {\n    return null;\n  }\n  try {\n    return doc.activeElement || doc.body;\n  } catch (e) {\n    return doc.body;\n  }\n}\n\nmodule.exports = getActiveElement;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/getActiveElement.js\n// module id = 21\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n'use strict';\n\n/**\n * Use invariant() to assert state which your program assumes to be true.\n *\n * Provide sprintf-style format (only %s is supported) and arguments\n * to provide information about what broke and what you were\n * expecting.\n *\n * The invariant message will be stripped in production, but the invariant\n * will remain to ensure logic does not differ in production.\n */\n\nvar validateFormat = function validateFormat(format) {};\n\nif (process.env.NODE_ENV !== 'production') {\n  validateFormat = function validateFormat(format) {\n    if (format === undefined) {\n      throw new Error('invariant requires an error message argument');\n    }\n  };\n}\n\nfunction invariant(condition, format, a, b, c, d, e, f) {\n  validateFormat(format);\n\n  if (!condition) {\n    var error;\n    if (format === undefined) {\n      error = new Error('Minified exception occurred; use the non-minified dev environment ' + 'for the full error message and additional helpful warnings.');\n    } else {\n      var args = [a, b, c, d, e, f];\n      var argIndex = 0;\n      error = new Error(format.replace(/%s/g, function () {\n        return args[argIndex++];\n      }));\n      error.name = 'Invariant Violation';\n    }\n\n    error.framesToPop = 1; // we don't care about invariant's own frame\n    throw error;\n  }\n}\n\nmodule.exports = invariant;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/invariant.js\n// module id = 22\n// module chunks = 0","'use strict';\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\n/**\n * @param {*} object The object to check.\n * @return {boolean} Whether or not the object is a DOM node.\n */\nfunction isNode(object) {\n  var doc = object ? object.ownerDocument || object : document;\n  var defaultView = doc.defaultView || window;\n  return !!(object && (typeof defaultView.Node === 'function' ? object instanceof defaultView.Node : typeof object === 'object' && typeof object.nodeType === 'number' && typeof object.nodeName === 'string'));\n}\n\nmodule.exports = isNode;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/isNode.js\n// module id = 23\n// module chunks = 0","'use strict';\n\n/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n */\n\nvar isNode = require('./isNode');\n\n/**\n * @param {*} object The object to check.\n * @return {boolean} Whether or not the object is a DOM text node.\n */\nfunction isTextNode(object) {\n  return isNode(object) && object.nodeType == 3;\n}\n\nmodule.exports = isTextNode;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/isTextNode.js\n// module id = 24\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @typechecks\n * \n */\n\n/*eslint-disable no-self-compare */\n\n'use strict';\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  // SameValue algorithm\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Added the nonzero y check to make Flow happy, but it is redundant\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n  }\n}\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = shallowEqual;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/fbjs/lib/shallowEqual.js\n// module id = 25\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '50%': {\n    transform: 'scale(0.75)',\n    opacity: 0.2\n  },\n  '100%': {\n    transform: 'scale(1)',\n    opacity: 1\n  }\n};\n\nvar animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar BeatLoader = function (_Component) {\n  _inherits(BeatLoader, _Component);\n\n  function BeatLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, BeatLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = BeatLoader.__proto__ || Object.getPrototypeOf(BeatLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        width: _this.props.size,\n        height: _this.props.size,\n        margin: _this.props.margin,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var animation = [animationName, '0.7s', (i % 2 ? 0 : 0.35) + 's', 'infinite', 'linear'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n        display: 'inline-block',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  _createClass(BeatLoader, [{\n    key: 'render',\n    value: function render() {\n      var loading = this.props.loading;\n\n\n      if (loading) {\n        var props = _extends({}, this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement('div', { style: this.getStyle(1) }),\n          _react2.default.createElement('div', { style: this.getStyle(2) }),\n          _react2.default.createElement('div', { style: this.getStyle(3) })\n        );\n      }\n\n      return null;\n    }\n  }]);\n\n  return BeatLoader;\n}(_react.Component);\n\nBeatLoader.propTypes = propTypes;\nBeatLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '15px',\n  margin: '2px' };\nexports.default = BeatLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=BeatLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/BeatLoader.js\n// module id = 26\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar keyframes = {\n  '0%, 100%': {\n    transform: 'scale(0)'\n  },\n  '50%': {\n    transform: 'scale(1.0)'\n  }\n};\n\nvar animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar BounceLoader = function (_Component) {\n  _inherits(BounceLoader, _Component);\n\n  function BounceLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, BounceLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = BounceLoader.__proto__ || Object.getPrototypeOf(BounceLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        width: _this.props.size,\n        height: _this.props.size,\n        borderRadius: '100%',\n        opacity: 0.6,\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var animation = [animationName, '2s', i === 1 ? '1s' : '0s', 'infinite', 'ease-in-out'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      if (i) {\n        return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n        });\n      }\n\n      return (0, _appendVendorPrefix2.default)({\n        width: _this.props.size,\n        height: _this.props.size,\n        position: 'relative',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  _createClass(BounceLoader, [{\n    key: 'render',\n    value: function render() {\n      var loading = this.props.loading;\n\n      if (loading) {\n        var props = _extends({}, this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement(\n            'div',\n            { style: this.getStyle() },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) })\n          )\n        );\n      }\n\n      return null;\n    }\n  }]);\n\n  return BounceLoader;\n}(_react.Component);\n\nBounceLoader.propTypes = propTypes;\nBounceLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '60px'\n};\nexports.default = BounceLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=BounceLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/BounceLoader.js\n// module id = 27\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '0%': {\n    transform: 'rotate(0deg) scale(1)'\n  },\n  '50%': {\n    transform: 'rotate(180deg) scale(0.8)'\n  },\n  '100%': {\n    transform: 'rotate(360deg) scale(1)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar ClipLoader = function (_Component) {\n  _inherits(ClipLoader, _Component);\n\n  function ClipLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, ClipLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ClipLoader.__proto__ || Object.getPrototypeOf(ClipLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n      return {\n        width: _this.props.size,\n        height: _this.props.size,\n        border: '2px solid',\n        borderColor: _this.props.color,\n        borderBottomColor: 'transparent',\n        borderRadius: '100%',\n        background: 'transparent !important',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function () {\n      var animation = [animationName, '0.75s', '0s', 'infinite', 'linear'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)({\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      }, _this.getBallStyle(i), _this.getAnimationStyle(), {\n        display: 'inline-block'\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  _createClass(ClipLoader, [{\n    key: 'render',\n    value: function render() {\n      var loading = this.props.loading;\n\n\n      if (loading) {\n        var props = _extends({}, this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement('div', { style: this.getStyle() })\n        );\n      }\n\n      return null;\n    }\n  }]);\n\n  return ClipLoader;\n}(_react.Component);\n\nClipLoader.propTypes = propTypes;\nClipLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '35px'\n};\nexports.default = ClipLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=ClipLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/ClipLoader.js\n// module id = 28\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar rotateKeyframes = {\n  '100%': {\n    transform: 'rotate(360deg)'\n  }\n\n  /**\n   * @type {Object}\n   */\n};var bounceKeyframes = {\n  '0%, 100%': {\n    transform: 'scale(0)'\n  },\n  '50%': {\n    transform: 'scale(1.0)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var rotateAnimationName = (0, _insertKeyframesRule2.default)(rotateKeyframes);\n\n/**\n * @type {String}\n */\nvar bounceAnimationName = (0, _insertKeyframesRule2.default)(bounceKeyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar DotLoader = function (_Component) {\n  _inherits(DotLoader, _Component);\n\n  function DotLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, DotLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = DotLoader.__proto__ || Object.getPrototypeOf(DotLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function (size) {\n      return {\n        backgroundColor: _this.props.color,\n        width: size,\n        height: size,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var animation = [i === 0 ? rotateAnimationName : bounceAnimationName, '2s', i === 2 ? '-1s' : '0s', 'infinite', 'linear'].join(' ');\n      var animationFillMode = 'forwards';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      var size = _this.props.size | 0;\n      var ballSize = size / 2;\n\n      if (i) {\n        return (0, _appendVendorPrefix2.default)(_this.getBallStyle(ballSize), _this.getAnimationStyle(i), {\n          position: 'absolute',\n          top: i % 2 ? 0 : 'auto',\n          bottom: i % 2 ? 'auto' : 0,\n          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n        });\n      }\n\n      return (0, _appendVendorPrefix2.default)(_this.getAnimationStyle(i), {\n        width: size,\n        height: size,\n        position: 'relative',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * @param  {String} size\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  _createClass(DotLoader, [{\n    key: 'render',\n    value: function render() {\n      var loading = this.props.loading;\n\n\n      if (loading) {\n        var props = _extends({}, this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement(\n            'div',\n            { style: this.getStyle(0) },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) })\n          )\n        );\n      }\n\n      return null;\n    }\n  }]);\n\n  return DotLoader;\n}(_react.Component);\n\nDotLoader.propTypes = propTypes;\nDotLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '60px' };\nexports.default = DotLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=DotLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/DotLoader.js\n// module id = 29\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '50%': {\n    opacity: 0.3\n  },\n  '100%': {\n    opacity: 1\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  height: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  width: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  radius: _propTypes2.default.string,\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar FadeLoader = function (_Component) {\n  _inherits(FadeLoader, _Component);\n\n  function FadeLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, FadeLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = FadeLoader.__proto__ || Object.getPrototypeOf(FadeLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getLineStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        height: _this.props.height,\n        width: _this.props.width,\n        margin: _this.props.margin,\n        borderRadius: _this.props.radius,\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var animation = [animationName, '1.2s', i * 0.12 + 's', 'infinite', 'ease-in-out'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getPosStyle = function (i) {\n      var radius = 20;\n      var quarter = radius / 2 + radius / 5.5;\n\n      var lines = {\n        l1: {\n          top: radius,\n          left: 0\n        },\n        l2: {\n          top: quarter,\n          left: quarter,\n          transform: 'rotate(-45deg)'\n        },\n        l3: {\n          top: 0,\n          left: radius,\n          transform: 'rotate(90deg)'\n        },\n        l4: {\n          top: -quarter,\n          left: quarter,\n          transform: 'rotate(45deg)'\n        },\n        l5: {\n          top: -radius,\n          left: 0\n        },\n        l6: {\n          top: -quarter,\n          left: -quarter,\n          transform: 'rotate(-45deg)'\n        },\n        l7: {\n          top: 0,\n          left: -radius,\n          transform: 'rotate(90deg)'\n        },\n        l8: {\n          top: quarter,\n          left: -quarter,\n          transform: 'rotate(45deg)'\n        }\n      };\n\n      return lines['l' + i];\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)(_this.getLineStyle(i), _this.getPosStyle(i), _this.getAnimationStyle(i), {\n        position: 'absolute',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  _createClass(FadeLoader, [{\n    key: 'render',\n    value: function render() {\n      var loading = this.props.loading;\n\n\n      if (loading) {\n        var style = {\n          position: 'relative',\n          fontSize: 0\n        };\n\n        var props = _extends({}, this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement(\n            'div',\n            { style: style },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) }),\n            _react2.default.createElement('div', { style: this.getStyle(3) }),\n            _react2.default.createElement('div', { style: this.getStyle(4) }),\n            _react2.default.createElement('div', { style: this.getStyle(5) }),\n            _react2.default.createElement('div', { style: this.getStyle(6) }),\n            _react2.default.createElement('div', { style: this.getStyle(7) }),\n            _react2.default.createElement('div', { style: this.getStyle(8) })\n          )\n        );\n      }\n\n      return null;\n    }\n  }]);\n\n  return FadeLoader;\n}(_react.Component);\n\nFadeLoader.propTypes = propTypes;\nFadeLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  height: '15px',\n  width: '5px',\n  margin: '2px',\n  radius: '2px'\n};\nexports.default = FadeLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=FadeLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/FadeLoader.js\n// module id = 30\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '0%': {\n    transform: 'scale(1)'\n  },\n  '50%': {\n    transform: 'scale(0.5)',\n    opacity: 0.7\n  },\n  '100%': {\n    transform: 'scale(1)',\n    opacity: 1\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\n/**\n * @param  {Number} top\n * @return {Number}\n */\nfunction random(top) {\n  return Math.random() * top;\n}\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar GridLoader = function (_Component) {\n  _inherits(GridLoader, _Component);\n\n  function GridLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, GridLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = GridLoader.__proto__ || Object.getPrototypeOf(GridLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        width: _this.props.size,\n        height: _this.props.size,\n        margin: _this.props.margin,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function () {\n      var animationDuration = random(100) / 100 + 0.6 + 's';\n      var animationDelay = random(100) / 100 - 0.2 + 's';\n\n      var animation = [animationName, animationDuration, animationDelay, 'infinite', 'ease'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n        display: 'inline-block',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  _createClass(GridLoader, [{\n    key: 'render',\n    value: function render() {\n      var loading = this.props.loading;\n\n\n      if (loading) {\n        var style = {\n          width: parseFloat(this.props.size) * 3 + parseFloat(this.props.margin) * 6,\n          fontSize: 0\n        };\n\n        var props = _extends({}, this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement(\n            'div',\n            { style: style },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) }),\n            _react2.default.createElement('div', { style: this.getStyle(3) }),\n            _react2.default.createElement('div', { style: this.getStyle(4) }),\n            _react2.default.createElement('div', { style: this.getStyle(5) }),\n            _react2.default.createElement('div', { style: this.getStyle(6) }),\n            _react2.default.createElement('div', { style: this.getStyle(7) }),\n            _react2.default.createElement('div', { style: this.getStyle(8) }),\n            _react2.default.createElement('div', { style: this.getStyle(9) })\n          )\n        );\n      }\n\n      return null;\n    }\n  }]);\n\n  return GridLoader;\n}(_react.Component);\n\nGridLoader.propTypes = propTypes;\nGridLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '15px',\n  margin: '2px'\n};\nexports.default = GridLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=GridLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/GridLoader.js\n// module id = 31\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SyncLoader = exports.SquareLoader = exports.SkewLoader = exports.ScaleLoader = exports.RotateLoader = exports.RiseLoader = exports.RingLoader = exports.PulseLoader = exports.PacmanLoader = exports.MoonLoader = exports.GridLoader = exports.FadeLoader = exports.DotLoader = exports.ClipLoader = exports.BounceLoader = exports.BeatLoader = undefined;\n\nvar _BeatLoader2 = require('./BeatLoader');\n\nvar _BeatLoader3 = _interopRequireDefault(_BeatLoader2);\n\nvar _BounceLoader2 = require('./BounceLoader');\n\nvar _BounceLoader3 = _interopRequireDefault(_BounceLoader2);\n\nvar _ClipLoader2 = require('./ClipLoader');\n\nvar _ClipLoader3 = _interopRequireDefault(_ClipLoader2);\n\nvar _DotLoader2 = require('./DotLoader');\n\nvar _DotLoader3 = _interopRequireDefault(_DotLoader2);\n\nvar _FadeLoader2 = require('./FadeLoader');\n\nvar _FadeLoader3 = _interopRequireDefault(_FadeLoader2);\n\nvar _GridLoader2 = require('./GridLoader');\n\nvar _GridLoader3 = _interopRequireDefault(_GridLoader2);\n\nvar _MoonLoader2 = require('./MoonLoader');\n\nvar _MoonLoader3 = _interopRequireDefault(_MoonLoader2);\n\nvar _PacmanLoader2 = require('./PacmanLoader');\n\nvar _PacmanLoader3 = _interopRequireDefault(_PacmanLoader2);\n\nvar _PulseLoader2 = require('./PulseLoader');\n\nvar _PulseLoader3 = _interopRequireDefault(_PulseLoader2);\n\nvar _RingLoader2 = require('./RingLoader');\n\nvar _RingLoader3 = _interopRequireDefault(_RingLoader2);\n\nvar _RiseLoader2 = require('./RiseLoader');\n\nvar _RiseLoader3 = _interopRequireDefault(_RiseLoader2);\n\nvar _RotateLoader2 = require('./RotateLoader');\n\nvar _RotateLoader3 = _interopRequireDefault(_RotateLoader2);\n\nvar _ScaleLoader2 = require('./ScaleLoader');\n\nvar _ScaleLoader3 = _interopRequireDefault(_ScaleLoader2);\n\nvar _SkewLoader2 = require('./SkewLoader');\n\nvar _SkewLoader3 = _interopRequireDefault(_SkewLoader2);\n\nvar _SquareLoader2 = require('./SquareLoader');\n\nvar _SquareLoader3 = _interopRequireDefault(_SquareLoader2);\n\nvar _SyncLoader2 = require('./SyncLoader');\n\nvar _SyncLoader3 = _interopRequireDefault(_SyncLoader2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.BeatLoader = _BeatLoader3.default;\nexports.BounceLoader = _BounceLoader3.default;\nexports.ClipLoader = _ClipLoader3.default;\nexports.DotLoader = _DotLoader3.default;\nexports.FadeLoader = _FadeLoader3.default;\nexports.GridLoader = _GridLoader3.default;\nexports.MoonLoader = _MoonLoader3.default;\nexports.PacmanLoader = _PacmanLoader3.default;\nexports.PulseLoader = _PulseLoader3.default;\nexports.RingLoader = _RingLoader3.default;\nexports.RiseLoader = _RiseLoader3.default;\nexports.RotateLoader = _RotateLoader3.default;\nexports.ScaleLoader = _ScaleLoader3.default;\nexports.SkewLoader = _SkewLoader3.default;\nexports.SquareLoader = _SquareLoader3.default;\nexports.SyncLoader = _SyncLoader3.default;\n//# sourceMappingURL=Halogenium.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/Halogenium.js\n// module id = 32\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '100%': {\n    transform: 'rotate(360deg)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar MoonLoader = function (_Component) {\n  _inherits(MoonLoader, _Component);\n\n  function MoonLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, MoonLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = MoonLoader.__proto__ || Object.getPrototypeOf(MoonLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function (size) {\n      return {\n        width: size,\n        height: size,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function () {\n      var animation = [animationName, '0.6s', '0s', 'infinite', 'linear'].join(' ');\n      var animationFillMode = 'forwards';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      var size = _this.props.size | 0;\n      var moonSize = size / 7;\n\n      if (i === 1) {\n        return (0, _appendVendorPrefix2.default)({\n          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n        }, _this.getBallStyle(moonSize), _this.getAnimationStyle(i), {\n          backgroundColor: _this.props.color,\n          opacity: '0.8',\n          position: 'absolute',\n          top: size / 2 - moonSize / 2\n        });\n      } else if (i === 2) {\n        return (0, _appendVendorPrefix2.default)({\n          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n        }, _this.getBallStyle(size), {\n          border: moonSize + 'px solid ' + _this.props.color,\n          opacity: 0.1\n        });\n      }\n      return (0, _appendVendorPrefix2.default)({\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      }, _this.getAnimationStyle(i), {\n        position: 'relative'\n      });\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * @param  {String} size\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  _createClass(MoonLoader, [{\n    key: 'render',\n    value: function render() {\n      var loading = this.props.loading;\n\n\n      if (loading) {\n        var props = _extends({}, this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement(\n            'div',\n            { style: this.getStyle(0) },\n            _react2.default.createElement('div', { style: this.getStyle(1) }),\n            _react2.default.createElement('div', { style: this.getStyle(2) })\n          )\n        );\n      }\n\n      return null;\n    }\n  }]);\n\n  return MoonLoader;\n}(_react.Component);\n\nMoonLoader.propTypes = propTypes;\nMoonLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '60px' };\nexports.default = MoonLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=MoonLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/MoonLoader.js\n// module id = 33\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar animations = {};\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar PacmanLoader = function (_Component) {\n  _inherits(PacmanLoader, _Component);\n\n  function PacmanLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PacmanLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = PacmanLoader.__proto__ || Object.getPrototypeOf(PacmanLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        width: _this.props.size,\n        height: _this.props.size,\n        margin: _this.props.margin,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign,\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var size = _this.props.size;\n      var animationName = animations[size];\n\n      if (!animationName) {\n        var keyframes = {\n          '75%': {\n            opacity: 0.7\n          },\n          '100%': {\n            transform: 'translate(' + -4 * size + 'px, ' + -size / 4 + 'px)'\n          }\n        };\n        animationName = animations[size] = (0, _insertKeyframesRule2.default)(keyframes);\n      }\n\n      var animation = [animationName, '1s', i * 0.25 + 's', 'infinite', 'linear'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      if (i | 0 === 1) {\n        var s1 = _this.props.size + 'px solid transparent';\n        var s2 = _this.props.size + 'px solid ' + _this.props.color;\n\n        return {\n          width: 0,\n          height: 0,\n          borderRight: s1,\n          borderTop: s2,\n          borderLeft: s2,\n          borderBottom: s2,\n          borderRadius: _this.props.size\n        };\n      }\n\n      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n        width: 10,\n        height: 10,\n        transform: 'translate(0, ' + -_this.props.size / 4 + 'px)',\n        position: 'absolute',\n        top: 25,\n        left: 100\n      });\n    }, _this.renderLoader = function (loading) {\n      if (loading) {\n        var style = {\n          position: 'relative',\n          fontSize: 0\n        };\n        var props = Object.assign({}, _this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement(\n            'div',\n            { style: style },\n            _react2.default.createElement('div', { style: _this.getStyle(1) }),\n            _react2.default.createElement('div', { style: _this.getStyle(2) }),\n            _react2.default.createElement('div', { style: _this.getStyle(3) }),\n            _react2.default.createElement('div', { style: _this.getStyle(4) }),\n            _react2.default.createElement('div', { style: _this.getStyle(5) })\n          )\n        );\n      }\n\n      return null;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  _createClass(PacmanLoader, [{\n    key: 'render',\n    value: function render() {\n      return this.renderLoader(this.props.loading);\n    }\n  }]);\n\n  return PacmanLoader;\n}(_react.Component);\n\nPacmanLoader.propTypes = propTypes;\nPacmanLoader.defaultProps = {\n  loading: true,\n  color: '#fff',\n  size: 25,\n  margin: 2 };\nexports.default = PacmanLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=PacmanLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/PacmanLoader.js\n// module id = 34\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '0%': {\n    transform: 'scale(1)',\n    opacity: 1\n  },\n  '45%': {\n    transform: 'scale(0.1)',\n    opacity: 0.7\n  },\n  '80%': {\n    transform: 'scale(1)',\n    opacity: 1\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar PulseLoader = function (_Component) {\n  _inherits(PulseLoader, _Component);\n\n  function PulseLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, PulseLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = PulseLoader.__proto__ || Object.getPrototypeOf(PulseLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        width: _this.props.size,\n        height: _this.props.size,\n        margin: _this.props.margin,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var animation = [animationName, '0.75s', i * 0.12 + 's', 'infinite', 'cubic-bezier(.2,.68,.18,1.08)'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n        display: 'inline-block',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _this.renderLoader = function (loading) {\n      if (loading) {\n        var props = Object.assign({}, _this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement('div', { style: _this.getStyle(1) }),\n          _react2.default.createElement('div', { style: _this.getStyle(2) }),\n          _react2.default.createElement('div', { style: _this.getStyle(3) })\n        );\n      }\n\n      return null;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * @type {Object}\n   */\n\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Boolean} loading\n   * @return {ReactComponent || null}\n   */\n\n\n  _createClass(PulseLoader, [{\n    key: 'render',\n    value: function render() {\n      return this.renderLoader(this.props.loading);\n    }\n  }]);\n\n  return PulseLoader;\n}(_react.Component);\n\nPulseLoader.propTypes = propTypes;\nPulseLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '15px',\n  margin: '2px' };\nexports.default = PulseLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=PulseLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/PulseLoader.js\n// module id = 35\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar rightRotateKeyframes = {\n  '0%': {\n    transform: 'rotateX(0deg) rotateY(0deg) rotateZ(0deg)'\n\n  },\n  '100%': {\n    transform: 'rotateX(180deg) rotateY(360deg) rotateZ(360deg)'\n  }\n\n  /**\n   * @type {Object}\n   */\n};var leftRotateKeyframes = {\n  '0%': {\n    transform: 'rotateX(0deg) rotateY(0deg) rotateZ(0deg)'\n  },\n  '100%': {\n    transform: 'rotateX(360deg) rotateY(180deg) rotateZ(360deg)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var rightRotateAnimationName = (0, _insertKeyframesRule2.default)(rightRotateKeyframes);\n\n/**\n * @type {String}\n */\nvar leftRotateAnimationName = (0, _insertKeyframesRule2.default)(leftRotateKeyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar RingLoader = function (_Component) {\n  _inherits(RingLoader, _Component);\n\n  function RingLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, RingLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = RingLoader.__proto__ || Object.getPrototypeOf(RingLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getCircleStyle = function (size) {\n      return {\n        width: size,\n        height: size,\n        border: size / 10 + 'px solid ' + _this.props.color,\n        opacity: 0.4,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var animation = [i | 0 === 1 ? rightRotateAnimationName : leftRotateAnimationName, '2s', '0s', 'infinite', 'linear'].join(' ');\n\n      var animationFillMode = 'forwards';\n      var perspective = '800px';\n\n      return {\n        perspective: perspective,\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      var size = parseInt(_this.props.size, 10);\n\n      if (i) {\n        return (0, _appendVendorPrefix2.default)({\n          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n        }, _this.getCircleStyle(size), _this.getAnimationStyle(i), {\n          position: 'absolute',\n          top: 0,\n          left: 0\n        });\n      }\n\n      return {\n        width: size,\n        height: size,\n        position: 'relative',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      };\n    }, _this.renderLoader = function (loading) {\n      if (loading) {\n        var props = Object.assign({}, _this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement(\n            'div',\n            { style: _this.getStyle(0) },\n            _react2.default.createElement('div', { style: _this.getStyle(1) }),\n            _react2.default.createElement('div', { style: _this.getStyle(2) })\n          )\n        );\n      }\n\n      return null;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * @type {Object}\n   */\n\n\n  /**\n   * @param {String} size\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Boolean} loading\n   * @return {ReactComponent || null}\n   */\n\n\n  _createClass(RingLoader, [{\n    key: 'render',\n    value: function render() {\n      return this.renderLoader(this.props.loading);\n    }\n  }]);\n\n  return RingLoader;\n}(_react.Component);\n\nRingLoader.propTypes = propTypes;\nRingLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '60px' };\nexports.default = RingLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=RingLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/RingLoader.js\n// module id = 36\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Number}\n */\nvar riseAmount = 30;\n\n/**\n * @type {Object}\n */\nvar keyframesEven = {\n  '0%': {\n    transform: 'scale(1.1)'\n  },\n  '25%': {\n    transform: 'translateY(-' + riseAmount + 'px)'\n  },\n  '50%': {\n    transform: 'scale(0.4)'\n  },\n  '75%': {\n    transform: 'translateY(' + riseAmount + 'px)'\n  },\n  '100%': {\n    transform: 'translateY(0) scale(1.0)'\n  }\n\n  /**\n   * @type {Object}\n   */\n};var keyframesOdd = {\n  '0%': {\n    transform: 'scale(0.4)'\n  },\n  25: {\n    transform: 'translateY(' + riseAmount + 'px)'\n  },\n  '50%': {\n    transform: 'scale(1.1)'\n  },\n  '75%': {\n    transform: 'translateY(-' + riseAmount + 'px)'\n  },\n  '100%': {\n    transform: 'translateY(0) scale(0.75)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationNameEven = (0, _insertKeyframesRule2.default)(keyframesEven);\n\n/**\n * @type {String}\n */\nvar animationNameOdd = (0, _insertKeyframesRule2.default)(keyframesOdd);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar RiseLoader = function (_Component) {\n  _inherits(RiseLoader, _Component);\n\n  function RiseLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, RiseLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = RiseLoader.__proto__ || Object.getPrototypeOf(RiseLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        width: _this.props.size,\n        height: _this.props.size,\n        margin: _this.props.margin,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var animation = [i % 2 === 0 ? animationNameEven : animationNameOdd, '1s', '0s', 'infinite', 'cubic-bezier(.15,.46,.9,.6)'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n        display: 'inline-block',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _this.renderLoader = function (loading) {\n      if (loading) {\n        var props = Object.assign({}, _this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement('div', { style: _this.getStyle(1) }),\n          _react2.default.createElement('div', { style: _this.getStyle(2) }),\n          _react2.default.createElement('div', { style: _this.getStyle(3) }),\n          _react2.default.createElement('div', { style: _this.getStyle(4) }),\n          _react2.default.createElement('div', { style: _this.getStyle(5) })\n        );\n      }\n\n      return null;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * @type {Object}\n   */\n\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Boolean} loading\n   * @return {ReactComponent || null}\n   */\n\n\n  _createClass(RiseLoader, [{\n    key: 'render',\n    value: function render() {\n      return this.renderLoader(this.props.loading);\n    }\n  }]);\n\n  return RiseLoader;\n}(_react.Component);\n\nRiseLoader.propTypes = propTypes;\nRiseLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '15px',\n  margin: '2px' };\nexports.default = RiseLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=RiseLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/RiseLoader.js\n// module id = 37\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '0%': {\n    transform: 'rotate(0deg)'\n  },\n  '50%': {\n    transform: 'rotate(180deg)'\n  },\n  '100%': {\n    transform: 'rotate(360deg)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar RotateLoader = function (_Component) {\n  _inherits(RotateLoader, _Component);\n\n  function RotateLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, RotateLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = RotateLoader.__proto__ || Object.getPrototypeOf(RotateLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        width: _this.props.size,\n        height: _this.props.size,\n        margin: _this.props.margin,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function () {\n      var animation = [animationName, '1s', '0s', 'infinite', 'cubic-bezier(.7,-.13,.22,.86)'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      if (i) {\n        return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), {\n          opacity: '0.8',\n          position: 'absolute',\n          top: 0,\n          left: i % 2 ? -28 : 25,\n          border: '0px solid transparent' // fix firefox/chrome/opera rendering\n        });\n      }\n\n      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n        display: 'inline-block',\n        position: 'relative',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _this.renderLoader = function (loading) {\n      if (loading) {\n        var props = Object.assign({}, _this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement(\n            'div',\n            { style: _this.getStyle() },\n            _react2.default.createElement('div', { style: _this.getStyle(1) }),\n            _react2.default.createElement('div', { style: _this.getStyle(2) })\n          )\n        );\n      }\n\n      return null;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Boolean} loading\n   * @return {ReactComponent || null}\n   */\n\n\n  _createClass(RotateLoader, [{\n    key: 'render',\n    value: function render() {\n      return this.renderLoader(this.props.loading);\n    }\n  }]);\n\n  return RotateLoader;\n}(_react.Component);\n\nRotateLoader.propTypes = propTypes;\nRotateLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '15px',\n  margin: '2px' };\nexports.default = RotateLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=RotateLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/RotateLoader.js\n// module id = 38\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '0%': {\n    transform: 'scaley(1.0)'\n  },\n  '50%': {\n    transform: 'scaley(0.4)'\n  },\n  '100%': {\n    transform: 'scaley(1.0)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  height: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  width: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  radius: _propTypes2.default.string,\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar ScaleLoader = function (_Component) {\n  _inherits(ScaleLoader, _Component);\n\n  function ScaleLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, ScaleLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = ScaleLoader.__proto__ || Object.getPrototypeOf(ScaleLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getLineStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        height: _this.props.height,\n        width: _this.props.width,\n        margin: _this.props.margin,\n        borderRadius: _this.props.radius,\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var animation = [animationName, '1s', i * 0.1 + 's', 'infinite', 'cubic-bezier(.2,.68,.18,1.08)'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)(_this.getLineStyle(i), _this.getAnimationStyle(i), {\n        display: 'inline-block',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _this.renderLoader = function (loading) {\n      if (loading) {\n        var props = Object.assign({}, _this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement('div', { style: _this.getStyle(1) }),\n          _react2.default.createElement('div', { style: _this.getStyle(2) }),\n          _react2.default.createElement('div', { style: _this.getStyle(3) }),\n          _react2.default.createElement('div', { style: _this.getStyle(4) }),\n          _react2.default.createElement('div', { style: _this.getStyle(5) })\n        );\n      }\n\n      return null;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * @type {Object}\n   */\n\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Boolean} loading\n   * @return {ReactComponent || null}\n   */\n\n\n  _createClass(ScaleLoader, [{\n    key: 'render',\n    value: function render() {\n      return this.renderLoader(this.props.loading);\n    }\n  }]);\n\n  return ScaleLoader;\n}(_react.Component);\n\nScaleLoader.propTypes = propTypes;\nScaleLoader.defaultProps = {\n  loading: true,\n  color: '#fff',\n  height: '35px',\n  width: '4px',\n  margin: '2px',\n  radius: '2px' };\nexports.default = ScaleLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=ScaleLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/ScaleLoader.js\n// module id = 39\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '25%': {\n    transform: 'perspective(100px) rotateX(180deg) rotateY(0)'\n  },\n  '50%': {\n    transform: 'perspective(100px) rotateX(180deg) rotateY(180deg)'\n  },\n  '75%': {\n    transform: 'perspective(100px) rotateX(0) rotateY(180deg)'\n  },\n  '100%': {\n    transform: 'perspective(100px) rotateX(0) rotateY(0)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar SkewLoader = function (_Component) {\n  _inherits(SkewLoader, _Component);\n\n  function SkewLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, SkewLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = SkewLoader.__proto__ || Object.getPrototypeOf(SkewLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getSharpStyle = function () {\n      return {\n        width: 0,\n        height: 0,\n        borderLeft: _this.props.size + ' solid transparent',\n        borderRight: _this.props.size + ' solid transparent',\n        borderBottom: _this.props.size + ' solid ' + _this.props.color,\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function () {\n      var animation = [animationName, '3s', '0s', 'infinite', 'cubic-bezier(.09,.57,.49,.9)'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)({\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      }, _this.getSharpStyle(i), _this.getAnimationStyle(i), {\n        display: 'inline-block'\n      });\n    }, _this.renderLoader = function (loading) {\n      if (loading) {\n        var props = Object.assign({}, _this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement('div', { style: _this.getStyle() })\n        );\n      }\n\n      return null;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * @type {Object}\n   */\n\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Boolean} loading\n   * @return {ReactComponent || null}\n   */\n\n\n  _createClass(SkewLoader, [{\n    key: 'render',\n    value: function render() {\n      return this.renderLoader(this.props.loading);\n    }\n  }]);\n\n  return SkewLoader;\n}(_react.Component);\n\nSkewLoader.propTypes = propTypes;\nSkewLoader.defaultProps = {\n  loading: true,\n  color: '#fff',\n  size: '20px' };\nexports.default = SkewLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=SkewLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/SkewLoader.js\n// module id = 40\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '25%': {\n    transform: 'rotateX(180deg) rotateY(0)'\n  },\n  '50%': {\n    transform: 'rotateX(180deg) rotateY(180deg)'\n  },\n  '75%': {\n    transform: 'rotateX(0) rotateY(180deg)'\n  },\n  '100%': {\n    transform: 'rotateX(0) rotateY(0)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar SquareLoader = function (_Component) {\n  _inherits(SquareLoader, _Component);\n\n  function SquareLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, SquareLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = SquareLoader.__proto__ || Object.getPrototypeOf(SquareLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getSquareStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        width: _this.props.size,\n        height: _this.props.size,\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function () {\n      var animation = [animationName, '3s', '0s', 'infinite', 'cubic-bezier(.09,.57,.49,.9)'].join(' ');\n      var animationFillMode = 'both';\n      var perspective = '100px';\n\n      return {\n        perspective: perspective,\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)(_this.getSquareStyle(i), _this.getAnimationStyle(i), {\n        display: 'inline-block',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _this.renderLoader = function (loading) {\n      if (loading) {\n        var props = Object.assign({}, _this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement('div', { style: _this.getStyle() })\n        );\n      }\n\n      return null;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * @type {Object}\n   */\n\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Boolean} loading\n   * @return {ReactComponent || null}\n   */\n\n\n  _createClass(SquareLoader, [{\n    key: 'render',\n    value: function render() {\n      return this.renderLoader(this.props.loading);\n    }\n  }]);\n\n  return SquareLoader;\n}(_react.Component);\n\nSquareLoader.propTypes = propTypes;\nSquareLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '50px' };\nexports.default = SquareLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=SquareLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/SquareLoader.js\n// module id = 41\n// module chunks = 0","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _appendVendorPrefix = require('domkit/appendVendorPrefix');\n\nvar _appendVendorPrefix2 = _interopRequireDefault(_appendVendorPrefix);\n\nvar _insertKeyframesRule = require('domkit/insertKeyframesRule');\n\nvar _insertKeyframesRule2 = _interopRequireDefault(_insertKeyframesRule);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n/**\n * @type {Object}\n */\nvar keyframes = {\n  '33%': {\n    transform: 'translateY(10px)'\n  },\n  '66%': {\n    transform: 'translateY(-10px)'\n  },\n  '100%': {\n    transform: 'translateY(0)'\n  }\n\n  /**\n   * @type {String}\n   */\n};var animationName = (0, _insertKeyframesRule2.default)(keyframes);\n\nvar propTypes = {\n  loading: _propTypes2.default.bool,\n  color: _propTypes2.default.string,\n  size: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  margin: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  verticalAlign: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string])\n};\n\nvar ptKeys = Object.keys(propTypes);\n\nvar SyncLoader = function (_Component) {\n  _inherits(SyncLoader, _Component);\n\n  function SyncLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, SyncLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = SyncLoader.__proto__ || Object.getPrototypeOf(SyncLoader)).call.apply(_ref, [this].concat(args))), _this), _this.getBallStyle = function () {\n      return {\n        backgroundColor: _this.props.color,\n        width: _this.props.size,\n        height: _this.props.size,\n        margin: _this.props.margin,\n        borderRadius: '100%',\n        verticalAlign: _this.props.verticalAlign\n      };\n    }, _this.getAnimationStyle = function (i) {\n      var animation = [animationName, '0.6s', i * 0.07 + 's', 'infinite', 'ease-in-out'].join(' ');\n      var animationFillMode = 'both';\n\n      return {\n        animation: animation,\n        animationFillMode: animationFillMode\n      };\n    }, _this.getStyle = function (i) {\n      return (0, _appendVendorPrefix2.default)(_this.getBallStyle(i), _this.getAnimationStyle(i), {\n        display: 'inline-block',\n        border: '0px solid transparent' // fix firefox/chrome/opera rendering\n      });\n    }, _this.renderLoader = function (loading) {\n      if (loading) {\n        var props = Object.assign({}, _this.props);\n\n        if (propTypes && ptKeys) {\n          var klen = ptKeys.length;\n          for (var i = 0; i < klen; i++) {\n            delete props[ptKeys[i]];\n          }\n        }\n\n        return _react2.default.createElement(\n          'div',\n          props,\n          _react2.default.createElement('div', { style: _this.getStyle(1) }),\n          _react2.default.createElement('div', { style: _this.getStyle(2) }),\n          _react2.default.createElement('div', { style: _this.getStyle(3) })\n        );\n      }\n\n      return null;\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n  /**\n   * @type {Object}\n   */\n\n\n  /**\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Number} i\n   * @return {Object}\n   */\n\n\n  /**\n   * @param  {Boolean} loading\n   * @return {ReactComponent || null}\n   */\n\n\n  _createClass(SyncLoader, [{\n    key: 'render',\n    value: function render() {\n      return this.renderLoader(this.props.loading);\n    }\n  }]);\n\n  return SyncLoader;\n}(_react.Component);\n\nSyncLoader.propTypes = propTypes;\nSyncLoader.defaultProps = {\n  loading: true,\n  color: '#ffffff',\n  size: '15px',\n  margin: '2px' };\nexports.default = SyncLoader;\nmodule.exports = exports['default'];\n//# sourceMappingURL=SyncLoader.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/halogenium/lib/SyncLoader.js\n// module id = 42\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar emptyFunction = require('fbjs/lib/emptyFunction');\nvar invariant = require('fbjs/lib/invariant');\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    invariant(\n      false,\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim\n  };\n\n  ReactPropTypes.checkPropTypes = emptyFunction;\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/prop-types/factoryWithThrowingShims.js\n// module id = 43\n// module chunks = 0","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/prop-types/lib/ReactPropTypesSecret.js\n// module id = 44\n// module chunks = 0","/** @license React v16.2.0\n * react-dom.production.min.js\n *\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n/*\n Modernizr 3.0.0pre (Custom Build) | MIT\n*/\n'use strict';var aa=require(\"react\"),l=require(\"fbjs/lib/ExecutionEnvironment\"),B=require(\"object-assign\"),C=require(\"fbjs/lib/emptyFunction\"),ba=require(\"fbjs/lib/EventListener\"),da=require(\"fbjs/lib/getActiveElement\"),ea=require(\"fbjs/lib/shallowEqual\"),fa=require(\"fbjs/lib/containsNode\"),ia=require(\"fbjs/lib/focusNode\"),D=require(\"fbjs/lib/emptyObject\");\nfunction E(a){for(var b=arguments.length-1,c=\"Minified React error #\"+a+\"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant\\x3d\"+a,d=0;d<b;d++)c+=\"\\x26args[]\\x3d\"+encodeURIComponent(arguments[d+1]);b=Error(c+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\");b.name=\"Invariant Violation\";b.framesToPop=1;throw b;}aa?void 0:E(\"227\");\nvar oa={children:!0,dangerouslySetInnerHTML:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,suppressHydrationWarning:!0,style:!0};function pa(a,b){return(a&b)===b}\nvar ta={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(a){var b=ta,c=a.Properties||{},d=a.DOMAttributeNamespaces||{},e=a.DOMAttributeNames||{};a=a.DOMMutationMethods||{};for(var f in c){ua.hasOwnProperty(f)?E(\"48\",f):void 0;var g=f.toLowerCase(),h=c[f];g={attributeName:g,attributeNamespace:null,propertyName:f,mutationMethod:null,mustUseProperty:pa(h,b.MUST_USE_PROPERTY),\nhasBooleanValue:pa(h,b.HAS_BOOLEAN_VALUE),hasNumericValue:pa(h,b.HAS_NUMERIC_VALUE),hasPositiveNumericValue:pa(h,b.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:pa(h,b.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:pa(h,b.HAS_STRING_BOOLEAN_VALUE)};1>=g.hasBooleanValue+g.hasNumericValue+g.hasOverloadedBooleanValue?void 0:E(\"50\",f);e.hasOwnProperty(f)&&(g.attributeName=e[f]);d.hasOwnProperty(f)&&(g.attributeNamespace=d[f]);a.hasOwnProperty(f)&&(g.mutationMethod=a[f]);ua[f]=g}}},ua={};\nfunction va(a,b){if(oa.hasOwnProperty(a)||2<a.length&&(\"o\"===a[0]||\"O\"===a[0])&&(\"n\"===a[1]||\"N\"===a[1]))return!1;if(null===b)return!0;switch(typeof b){case \"boolean\":return oa.hasOwnProperty(a)?a=!0:(b=wa(a))?a=b.hasBooleanValue||b.hasStringBooleanValue||b.hasOverloadedBooleanValue:(a=a.toLowerCase().slice(0,5),a=\"data-\"===a||\"aria-\"===a),a;case \"undefined\":case \"number\":case \"string\":case \"object\":return!0;default:return!1}}function wa(a){return ua.hasOwnProperty(a)?ua[a]:null}\nvar xa=ta,ya=xa.MUST_USE_PROPERTY,K=xa.HAS_BOOLEAN_VALUE,za=xa.HAS_NUMERIC_VALUE,Aa=xa.HAS_POSITIVE_NUMERIC_VALUE,Ba=xa.HAS_OVERLOADED_BOOLEAN_VALUE,Ca=xa.HAS_STRING_BOOLEAN_VALUE,Da={Properties:{allowFullScreen:K,async:K,autoFocus:K,autoPlay:K,capture:Ba,checked:ya|K,cols:Aa,contentEditable:Ca,controls:K,\"default\":K,defer:K,disabled:K,download:Ba,draggable:Ca,formNoValidate:K,hidden:K,loop:K,multiple:ya|K,muted:ya|K,noValidate:K,open:K,playsInline:K,readOnly:K,required:K,reversed:K,rows:Aa,rowSpan:za,\nscoped:K,seamless:K,selected:ya|K,size:Aa,start:za,span:Aa,spellCheck:Ca,style:0,tabIndex:0,itemScope:K,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:Ca},DOMAttributeNames:{acceptCharset:\"accept-charset\",className:\"class\",htmlFor:\"for\",httpEquiv:\"http-equiv\"},DOMMutationMethods:{value:function(a,b){if(null==b)return a.removeAttribute(\"value\");\"number\"!==a.type||!1===a.hasAttribute(\"value\")?a.setAttribute(\"value\",\"\"+b):a.validity&&!a.validity.badInput&&a.ownerDocument.activeElement!==a&&\na.setAttribute(\"value\",\"\"+b)}}},Ea=xa.HAS_STRING_BOOLEAN_VALUE,M={xlink:\"http://www.w3.org/1999/xlink\",xml:\"http://www.w3.org/XML/1998/namespace\"},Ga={Properties:{autoReverse:Ea,externalResourcesRequired:Ea,preserveAlpha:Ea},DOMAttributeNames:{autoReverse:\"autoReverse\",externalResourcesRequired:\"externalResourcesRequired\",preserveAlpha:\"preserveAlpha\"},DOMAttributeNamespaces:{xlinkActuate:M.xlink,xlinkArcrole:M.xlink,xlinkHref:M.xlink,xlinkRole:M.xlink,xlinkShow:M.xlink,xlinkTitle:M.xlink,xlinkType:M.xlink,\nxmlBase:M.xml,xmlLang:M.xml,xmlSpace:M.xml}},Ha=/[\\-\\:]([a-z])/g;function Ia(a){return a[1].toUpperCase()}\n\"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space\".split(\" \").forEach(function(a){var b=a.replace(Ha,\nIa);Ga.Properties[b]=0;Ga.DOMAttributeNames[b]=a});xa.injectDOMPropertyConfig(Da);xa.injectDOMPropertyConfig(Ga);\nvar P={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(a){\"function\"!==typeof a.invokeGuardedCallback?E(\"197\"):void 0;Ja=a.invokeGuardedCallback}},invokeGuardedCallback:function(a,b,c,d,e,f,g,h,k){Ja.apply(P,arguments)},invokeGuardedCallbackAndCatchFirstError:function(a,b,c,d,e,f,g,h,k){P.invokeGuardedCallback.apply(this,arguments);if(P.hasCaughtError()){var q=P.clearCaughtError();P._hasRethrowError||(P._hasRethrowError=!0,P._rethrowError=\nq)}},rethrowCaughtError:function(){return Ka.apply(P,arguments)},hasCaughtError:function(){return P._hasCaughtError},clearCaughtError:function(){if(P._hasCaughtError){var a=P._caughtError;P._caughtError=null;P._hasCaughtError=!1;return a}E(\"198\")}};function Ja(a,b,c,d,e,f,g,h,k){P._hasCaughtError=!1;P._caughtError=null;var q=Array.prototype.slice.call(arguments,3);try{b.apply(c,q)}catch(v){P._caughtError=v,P._hasCaughtError=!0}}\nfunction Ka(){if(P._hasRethrowError){var a=P._rethrowError;P._rethrowError=null;P._hasRethrowError=!1;throw a;}}var La=null,Ma={};\nfunction Na(){if(La)for(var a in Ma){var b=Ma[a],c=La.indexOf(a);-1<c?void 0:E(\"96\",a);if(!Oa[c]){b.extractEvents?void 0:E(\"97\",a);Oa[c]=b;c=b.eventTypes;for(var d in c){var e=void 0;var f=c[d],g=b,h=d;Pa.hasOwnProperty(h)?E(\"99\",h):void 0;Pa[h]=f;var k=f.phasedRegistrationNames;if(k){for(e in k)k.hasOwnProperty(e)&&Qa(k[e],g,h);e=!0}else f.registrationName?(Qa(f.registrationName,g,h),e=!0):e=!1;e?void 0:E(\"98\",d,a)}}}}\nfunction Qa(a,b,c){Ra[a]?E(\"100\",a):void 0;Ra[a]=b;Sa[a]=b.eventTypes[c].dependencies}var Oa=[],Pa={},Ra={},Sa={};function Ta(a){La?E(\"101\"):void 0;La=Array.prototype.slice.call(a);Na()}function Ua(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];Ma.hasOwnProperty(c)&&Ma[c]===d||(Ma[c]?E(\"102\",c):void 0,Ma[c]=d,b=!0)}b&&Na()}\nvar Va=Object.freeze({plugins:Oa,eventNameDispatchConfigs:Pa,registrationNameModules:Ra,registrationNameDependencies:Sa,possibleRegistrationNames:null,injectEventPluginOrder:Ta,injectEventPluginsByName:Ua}),Wa=null,Xa=null,Ya=null;function Za(a,b,c,d){b=a.type||\"unknown-event\";a.currentTarget=Ya(d);P.invokeGuardedCallbackAndCatchFirstError(b,c,void 0,a);a.currentTarget=null}\nfunction $a(a,b){null==b?E(\"30\"):void 0;if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function ab(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}var bb=null;\nfunction cb(a,b){if(a){var c=a._dispatchListeners,d=a._dispatchInstances;if(Array.isArray(c))for(var e=0;e<c.length&&!a.isPropagationStopped();e++)Za(a,b,c[e],d[e]);else c&&Za(a,b,c,d);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}}function db(a){return cb(a,!0)}function gb(a){return cb(a,!1)}var hb={injectEventPluginOrder:Ta,injectEventPluginsByName:Ua};\nfunction ib(a,b){var c=a.stateNode;if(!c)return null;var d=Wa(c);if(!d)return null;c=d[b];a:switch(b){case \"onClick\":case \"onClickCapture\":case \"onDoubleClick\":case \"onDoubleClickCapture\":case \"onMouseDown\":case \"onMouseDownCapture\":case \"onMouseMove\":case \"onMouseMoveCapture\":case \"onMouseUp\":case \"onMouseUpCapture\":(d=!d.disabled)||(a=a.type,d=!(\"button\"===a||\"input\"===a||\"select\"===a||\"textarea\"===a));a=!d;break a;default:a=!1}if(a)return null;c&&\"function\"!==typeof c?E(\"231\",b,typeof c):void 0;\nreturn c}function jb(a,b,c,d){for(var e,f=0;f<Oa.length;f++){var g=Oa[f];g&&(g=g.extractEvents(a,b,c,d))&&(e=$a(e,g))}return e}function kb(a){a&&(bb=$a(bb,a))}function lb(a){var b=bb;bb=null;b&&(a?ab(b,db):ab(b,gb),bb?E(\"95\"):void 0,P.rethrowCaughtError())}var mb=Object.freeze({injection:hb,getListener:ib,extractEvents:jb,enqueueEvents:kb,processEventQueue:lb}),nb=Math.random().toString(36).slice(2),Q=\"__reactInternalInstance$\"+nb,ob=\"__reactEventHandlers$\"+nb;\nfunction pb(a){if(a[Q])return a[Q];for(var b=[];!a[Q];)if(b.push(a),a.parentNode)a=a.parentNode;else return null;var c=void 0,d=a[Q];if(5===d.tag||6===d.tag)return d;for(;a&&(d=a[Q]);a=b.pop())c=d;return c}function qb(a){if(5===a.tag||6===a.tag)return a.stateNode;E(\"33\")}function rb(a){return a[ob]||null}\nvar sb=Object.freeze({precacheFiberNode:function(a,b){b[Q]=a},getClosestInstanceFromNode:pb,getInstanceFromNode:function(a){a=a[Q];return!a||5!==a.tag&&6!==a.tag?null:a},getNodeFromInstance:qb,getFiberCurrentPropsFromNode:rb,updateFiberProps:function(a,b){a[ob]=b}});function tb(a){do a=a[\"return\"];while(a&&5!==a.tag);return a?a:null}function ub(a,b,c){for(var d=[];a;)d.push(a),a=tb(a);for(a=d.length;0<a--;)b(d[a],\"captured\",c);for(a=0;a<d.length;a++)b(d[a],\"bubbled\",c)}\nfunction vb(a,b,c){if(b=ib(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=$a(c._dispatchListeners,b),c._dispatchInstances=$a(c._dispatchInstances,a)}function wb(a){a&&a.dispatchConfig.phasedRegistrationNames&&ub(a._targetInst,vb,a)}function xb(a){if(a&&a.dispatchConfig.phasedRegistrationNames){var b=a._targetInst;b=b?tb(b):null;ub(b,vb,a)}}\nfunction yb(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=ib(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=$a(c._dispatchListeners,b),c._dispatchInstances=$a(c._dispatchInstances,a))}function zb(a){a&&a.dispatchConfig.registrationName&&yb(a._targetInst,null,a)}function Ab(a){ab(a,wb)}\nfunction Bb(a,b,c,d){if(c&&d)a:{var e=c;for(var f=d,g=0,h=e;h;h=tb(h))g++;h=0;for(var k=f;k;k=tb(k))h++;for(;0<g-h;)e=tb(e),g--;for(;0<h-g;)f=tb(f),h--;for(;g--;){if(e===f||e===f.alternate)break a;e=tb(e);f=tb(f)}e=null}else e=null;f=e;for(e=[];c&&c!==f;){g=c.alternate;if(null!==g&&g===f)break;e.push(c);c=tb(c)}for(c=[];d&&d!==f;){g=d.alternate;if(null!==g&&g===f)break;c.push(d);d=tb(d)}for(d=0;d<e.length;d++)yb(e[d],\"bubbled\",a);for(a=c.length;0<a--;)yb(c[a],\"captured\",b)}\nvar Cb=Object.freeze({accumulateTwoPhaseDispatches:Ab,accumulateTwoPhaseDispatchesSkipTarget:function(a){ab(a,xb)},accumulateEnterLeaveDispatches:Bb,accumulateDirectDispatches:function(a){ab(a,zb)}}),Db=null;function Eb(){!Db&&l.canUseDOM&&(Db=\"textContent\"in document.documentElement?\"textContent\":\"innerText\");return Db}var S={_root:null,_startText:null,_fallbackText:null};\nfunction Fb(){if(S._fallbackText)return S._fallbackText;var a,b=S._startText,c=b.length,d,e=Gb(),f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);S._fallbackText=e.slice(a,1<d?1-d:void 0);return S._fallbackText}function Gb(){return\"value\"in S._root?S._root.value:S._root[Eb()]}\nvar Hb=\"dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances\".split(\" \"),Ib={type:null,target:null,currentTarget:C.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};\nfunction T(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):\"target\"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?C.thatReturnsTrue:C.thatReturnsFalse;this.isPropagationStopped=C.thatReturnsFalse;return this}\nB(T.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():\"unknown\"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=C.thatReturnsTrue)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():\"unknown\"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=C.thatReturnsTrue)},persist:function(){this.isPersistent=C.thatReturnsTrue},isPersistent:C.thatReturnsFalse,\ndestructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;for(a=0;a<Hb.length;a++)this[Hb[a]]=null}});T.Interface=Ib;T.augmentClass=function(a,b){function c(){}c.prototype=this.prototype;var d=new c;B(d,a.prototype);a.prototype=d;a.prototype.constructor=a;a.Interface=B({},this.Interface,b);a.augmentClass=this.augmentClass;Jb(a)};Jb(T);function Kb(a,b,c,d){if(this.eventPool.length){var e=this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}\nfunction Lb(a){a instanceof this?void 0:E(\"223\");a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function Jb(a){a.eventPool=[];a.getPooled=Kb;a.release=Lb}function Mb(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(Mb,{data:null});function Nb(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(Nb,{data:null});var Pb=[9,13,27,32],Vb=l.canUseDOM&&\"CompositionEvent\"in window,Wb=null;l.canUseDOM&&\"documentMode\"in document&&(Wb=document.documentMode);var Xb;\nif(Xb=l.canUseDOM&&\"TextEvent\"in window&&!Wb){var Yb=window.opera;Xb=!(\"object\"===typeof Yb&&\"function\"===typeof Yb.version&&12>=parseInt(Yb.version(),10))}\nvar Zb=Xb,$b=l.canUseDOM&&(!Vb||Wb&&8<Wb&&11>=Wb),ac=String.fromCharCode(32),bc={beforeInput:{phasedRegistrationNames:{bubbled:\"onBeforeInput\",captured:\"onBeforeInputCapture\"},dependencies:[\"topCompositionEnd\",\"topKeyPress\",\"topTextInput\",\"topPaste\"]},compositionEnd:{phasedRegistrationNames:{bubbled:\"onCompositionEnd\",captured:\"onCompositionEndCapture\"},dependencies:\"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown\".split(\" \")},compositionStart:{phasedRegistrationNames:{bubbled:\"onCompositionStart\",\ncaptured:\"onCompositionStartCapture\"},dependencies:\"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown\".split(\" \")},compositionUpdate:{phasedRegistrationNames:{bubbled:\"onCompositionUpdate\",captured:\"onCompositionUpdateCapture\"},dependencies:\"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown\".split(\" \")}},cc=!1;\nfunction dc(a,b){switch(a){case \"topKeyUp\":return-1!==Pb.indexOf(b.keyCode);case \"topKeyDown\":return 229!==b.keyCode;case \"topKeyPress\":case \"topMouseDown\":case \"topBlur\":return!0;default:return!1}}function ec(a){a=a.detail;return\"object\"===typeof a&&\"data\"in a?a.data:null}var fc=!1;function gc(a,b){switch(a){case \"topCompositionEnd\":return ec(b);case \"topKeyPress\":if(32!==b.which)return null;cc=!0;return ac;case \"topTextInput\":return a=b.data,a===ac&&cc?null:a;default:return null}}\nfunction hc(a,b){if(fc)return\"topCompositionEnd\"===a||!Vb&&dc(a,b)?(a=Fb(),S._root=null,S._startText=null,S._fallbackText=null,fc=!1,a):null;switch(a){case \"topPaste\":return null;case \"topKeyPress\":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case \"topCompositionEnd\":return $b?null:b.data;default:return null}}\nvar ic={eventTypes:bc,extractEvents:function(a,b,c,d){var e;if(Vb)b:{switch(a){case \"topCompositionStart\":var f=bc.compositionStart;break b;case \"topCompositionEnd\":f=bc.compositionEnd;break b;case \"topCompositionUpdate\":f=bc.compositionUpdate;break b}f=void 0}else fc?dc(a,c)&&(f=bc.compositionEnd):\"topKeyDown\"===a&&229===c.keyCode&&(f=bc.compositionStart);f?($b&&(fc||f!==bc.compositionStart?f===bc.compositionEnd&&fc&&(e=Fb()):(S._root=d,S._startText=Gb(),fc=!0)),f=Mb.getPooled(f,b,c,d),e?f.data=\ne:(e=ec(c),null!==e&&(f.data=e)),Ab(f),e=f):e=null;(a=Zb?gc(a,c):hc(a,c))?(b=Nb.getPooled(bc.beforeInput,b,c,d),b.data=a,Ab(b)):b=null;return[e,b]}},jc=null,kc=null,lc=null;function mc(a){if(a=Xa(a)){jc&&\"function\"===typeof jc.restoreControlledState?void 0:E(\"194\");var b=Wa(a.stateNode);jc.restoreControlledState(a.stateNode,a.type,b)}}var nc={injectFiberControlledHostComponent:function(a){jc=a}};function oc(a){kc?lc?lc.push(a):lc=[a]:kc=a}\nfunction pc(){if(kc){var a=kc,b=lc;lc=kc=null;mc(a);if(b)for(a=0;a<b.length;a++)mc(b[a])}}var qc=Object.freeze({injection:nc,enqueueStateRestore:oc,restoreStateIfNeeded:pc});function rc(a,b){return a(b)}var sc=!1;function tc(a,b){if(sc)return rc(a,b);sc=!0;try{return rc(a,b)}finally{sc=!1,pc()}}var uc={color:!0,date:!0,datetime:!0,\"datetime-local\":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};\nfunction vc(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return\"input\"===b?!!uc[a.type]:\"textarea\"===b?!0:!1}function wc(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}var xc;l.canUseDOM&&(xc=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature(\"\",\"\"));\nfunction yc(a,b){if(!l.canUseDOM||b&&!(\"addEventListener\"in document))return!1;b=\"on\"+a;var c=b in document;c||(c=document.createElement(\"div\"),c.setAttribute(b,\"return;\"),c=\"function\"===typeof c[b]);!c&&xc&&\"wheel\"===a&&(c=document.implementation.hasFeature(\"Events.wheel\",\"3.0\"));return c}function zc(a){var b=a.type;return(a=a.nodeName)&&\"input\"===a.toLowerCase()&&(\"checkbox\"===b||\"radio\"===b)}\nfunction Ac(a){var b=zc(a)?\"checked\":\"value\",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=\"\"+a[b];if(!a.hasOwnProperty(b)&&\"function\"===typeof c.get&&\"function\"===typeof c.set)return Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:!0,get:function(){return c.get.call(this)},set:function(a){d=\"\"+a;c.set.call(this,a)}}),{getValue:function(){return d},setValue:function(a){d=\"\"+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}\nfunction Bc(a){a._valueTracker||(a._valueTracker=Ac(a))}function Cc(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d=\"\";a&&(d=zc(a)?a.checked?\"true\":\"false\":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}var Dc={change:{phasedRegistrationNames:{bubbled:\"onChange\",captured:\"onChangeCapture\"},dependencies:\"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange\".split(\" \")}};\nfunction Ec(a,b,c){a=T.getPooled(Dc.change,a,b,c);a.type=\"change\";oc(c);Ab(a);return a}var Fc=null,Gc=null;function Hc(a){kb(a);lb(!1)}function Ic(a){var b=qb(a);if(Cc(b))return a}function Jc(a,b){if(\"topChange\"===a)return b}var Kc=!1;l.canUseDOM&&(Kc=yc(\"input\")&&(!document.documentMode||9<document.documentMode));function Lc(){Fc&&(Fc.detachEvent(\"onpropertychange\",Mc),Gc=Fc=null)}function Mc(a){\"value\"===a.propertyName&&Ic(Gc)&&(a=Ec(Gc,a,wc(a)),tc(Hc,a))}\nfunction Nc(a,b,c){\"topFocus\"===a?(Lc(),Fc=b,Gc=c,Fc.attachEvent(\"onpropertychange\",Mc)):\"topBlur\"===a&&Lc()}function Oc(a){if(\"topSelectionChange\"===a||\"topKeyUp\"===a||\"topKeyDown\"===a)return Ic(Gc)}function Pc(a,b){if(\"topClick\"===a)return Ic(b)}function $c(a,b){if(\"topInput\"===a||\"topChange\"===a)return Ic(b)}\nvar ad={eventTypes:Dc,_isInputEventSupported:Kc,extractEvents:function(a,b,c,d){var e=b?qb(b):window,f=e.nodeName&&e.nodeName.toLowerCase();if(\"select\"===f||\"input\"===f&&\"file\"===e.type)var g=Jc;else if(vc(e))if(Kc)g=$c;else{g=Oc;var h=Nc}else f=e.nodeName,!f||\"input\"!==f.toLowerCase()||\"checkbox\"!==e.type&&\"radio\"!==e.type||(g=Pc);if(g&&(g=g(a,b)))return Ec(g,c,d);h&&h(a,e,b);\"topBlur\"===a&&null!=b&&(a=b._wrapperState||e._wrapperState)&&a.controlled&&\"number\"===e.type&&(a=\"\"+e.value,e.getAttribute(\"value\")!==\na&&e.setAttribute(\"value\",a))}};function bd(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(bd,{view:null,detail:null});var cd={Alt:\"altKey\",Control:\"ctrlKey\",Meta:\"metaKey\",Shift:\"shiftKey\"};function dd(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=cd[a])?!!b[a]:!1}function ed(){return dd}function fd(a,b,c,d){return T.call(this,a,b,c,d)}\nbd.augmentClass(fd,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:ed,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)}});\nvar gd={mouseEnter:{registrationName:\"onMouseEnter\",dependencies:[\"topMouseOut\",\"topMouseOver\"]},mouseLeave:{registrationName:\"onMouseLeave\",dependencies:[\"topMouseOut\",\"topMouseOver\"]}},hd={eventTypes:gd,extractEvents:function(a,b,c,d){if(\"topMouseOver\"===a&&(c.relatedTarget||c.fromElement)||\"topMouseOut\"!==a&&\"topMouseOver\"!==a)return null;var e=d.window===d?d:(e=d.ownerDocument)?e.defaultView||e.parentWindow:window;\"topMouseOut\"===a?(a=b,b=(b=c.relatedTarget||c.toElement)?pb(b):null):a=null;if(a===\nb)return null;var f=null==a?e:qb(a);e=null==b?e:qb(b);var g=fd.getPooled(gd.mouseLeave,a,c,d);g.type=\"mouseleave\";g.target=f;g.relatedTarget=e;c=fd.getPooled(gd.mouseEnter,b,c,d);c.type=\"mouseenter\";c.target=e;c.relatedTarget=f;Bb(g,c,a,b);return[g,c]}},id=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner;function jd(a){a=a.type;return\"string\"===typeof a?a:\"function\"===typeof a?a.displayName||a.name:null}\nfunction kd(a){var b=a;if(a.alternate)for(;b[\"return\"];)b=b[\"return\"];else{if(0!==(b.effectTag&2))return 1;for(;b[\"return\"];)if(b=b[\"return\"],0!==(b.effectTag&2))return 1}return 3===b.tag?2:3}function ld(a){return(a=a._reactInternalFiber)?2===kd(a):!1}function md(a){2!==kd(a)?E(\"188\"):void 0}\nfunction nd(a){var b=a.alternate;if(!b)return b=kd(a),3===b?E(\"188\"):void 0,1===b?null:a;for(var c=a,d=b;;){var e=c[\"return\"],f=e?e.alternate:null;if(!e||!f)break;if(e.child===f.child){for(var g=e.child;g;){if(g===c)return md(e),a;if(g===d)return md(e),b;g=g.sibling}E(\"188\")}if(c[\"return\"]!==d[\"return\"])c=e,d=f;else{g=!1;for(var h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}g?\nvoid 0:E(\"189\")}}c.alternate!==d?E(\"190\"):void 0}3!==c.tag?E(\"188\"):void 0;return c.stateNode.current===c?a:b}function od(a){a=nd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child[\"return\"]=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b[\"return\"]||b[\"return\"]===a)return null;b=b[\"return\"]}b.sibling[\"return\"]=b[\"return\"];b=b.sibling}}return null}\nfunction pd(a){a=nd(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child&&4!==b.tag)b.child[\"return\"]=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b[\"return\"]||b[\"return\"]===a)return null;b=b[\"return\"]}b.sibling[\"return\"]=b[\"return\"];b=b.sibling}}return null}var qd=[];\nfunction rd(a){var b=a.targetInst;do{if(!b){a.ancestors.push(b);break}var c;for(c=b;c[\"return\"];)c=c[\"return\"];c=3!==c.tag?null:c.stateNode.containerInfo;if(!c)break;a.ancestors.push(b);b=pb(c)}while(b);for(c=0;c<a.ancestors.length;c++)b=a.ancestors[c],sd(a.topLevelType,b,a.nativeEvent,wc(a.nativeEvent))}var td=!0,sd=void 0;function ud(a){td=!!a}function U(a,b,c){return c?ba.listen(c,b,vd.bind(null,a)):null}function wd(a,b,c){return c?ba.capture(c,b,vd.bind(null,a)):null}\nfunction vd(a,b){if(td){var c=wc(b);c=pb(c);null===c||\"number\"!==typeof c.tag||2===kd(c)||(c=null);if(qd.length){var d=qd.pop();d.topLevelType=a;d.nativeEvent=b;d.targetInst=c;a=d}else a={topLevelType:a,nativeEvent:b,targetInst:c,ancestors:[]};try{tc(rd,a)}finally{a.topLevelType=null,a.nativeEvent=null,a.targetInst=null,a.ancestors.length=0,10>qd.length&&qd.push(a)}}}\nvar xd=Object.freeze({get _enabled(){return td},get _handleTopLevel(){return sd},setHandleTopLevel:function(a){sd=a},setEnabled:ud,isEnabled:function(){return td},trapBubbledEvent:U,trapCapturedEvent:wd,dispatchEvent:vd});function yd(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c[\"Webkit\"+a]=\"webkit\"+b;c[\"Moz\"+a]=\"moz\"+b;c[\"ms\"+a]=\"MS\"+b;c[\"O\"+a]=\"o\"+b.toLowerCase();return c}\nvar zd={animationend:yd(\"Animation\",\"AnimationEnd\"),animationiteration:yd(\"Animation\",\"AnimationIteration\"),animationstart:yd(\"Animation\",\"AnimationStart\"),transitionend:yd(\"Transition\",\"TransitionEnd\")},Ad={},Bd={};l.canUseDOM&&(Bd=document.createElement(\"div\").style,\"AnimationEvent\"in window||(delete zd.animationend.animation,delete zd.animationiteration.animation,delete zd.animationstart.animation),\"TransitionEvent\"in window||delete zd.transitionend.transition);\nfunction Cd(a){if(Ad[a])return Ad[a];if(!zd[a])return a;var b=zd[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Bd)return Ad[a]=b[c];return\"\"}\nvar Dd={topAbort:\"abort\",topAnimationEnd:Cd(\"animationend\")||\"animationend\",topAnimationIteration:Cd(\"animationiteration\")||\"animationiteration\",topAnimationStart:Cd(\"animationstart\")||\"animationstart\",topBlur:\"blur\",topCancel:\"cancel\",topCanPlay:\"canplay\",topCanPlayThrough:\"canplaythrough\",topChange:\"change\",topClick:\"click\",topClose:\"close\",topCompositionEnd:\"compositionend\",topCompositionStart:\"compositionstart\",topCompositionUpdate:\"compositionupdate\",topContextMenu:\"contextmenu\",topCopy:\"copy\",\ntopCut:\"cut\",topDoubleClick:\"dblclick\",topDrag:\"drag\",topDragEnd:\"dragend\",topDragEnter:\"dragenter\",topDragExit:\"dragexit\",topDragLeave:\"dragleave\",topDragOver:\"dragover\",topDragStart:\"dragstart\",topDrop:\"drop\",topDurationChange:\"durationchange\",topEmptied:\"emptied\",topEncrypted:\"encrypted\",topEnded:\"ended\",topError:\"error\",topFocus:\"focus\",topInput:\"input\",topKeyDown:\"keydown\",topKeyPress:\"keypress\",topKeyUp:\"keyup\",topLoadedData:\"loadeddata\",topLoad:\"load\",topLoadedMetadata:\"loadedmetadata\",topLoadStart:\"loadstart\",\ntopMouseDown:\"mousedown\",topMouseMove:\"mousemove\",topMouseOut:\"mouseout\",topMouseOver:\"mouseover\",topMouseUp:\"mouseup\",topPaste:\"paste\",topPause:\"pause\",topPlay:\"play\",topPlaying:\"playing\",topProgress:\"progress\",topRateChange:\"ratechange\",topScroll:\"scroll\",topSeeked:\"seeked\",topSeeking:\"seeking\",topSelectionChange:\"selectionchange\",topStalled:\"stalled\",topSuspend:\"suspend\",topTextInput:\"textInput\",topTimeUpdate:\"timeupdate\",topToggle:\"toggle\",topTouchCancel:\"touchcancel\",topTouchEnd:\"touchend\",topTouchMove:\"touchmove\",\ntopTouchStart:\"touchstart\",topTransitionEnd:Cd(\"transitionend\")||\"transitionend\",topVolumeChange:\"volumechange\",topWaiting:\"waiting\",topWheel:\"wheel\"},Ed={},Fd=0,Gd=\"_reactListenersID\"+(\"\"+Math.random()).slice(2);function Hd(a){Object.prototype.hasOwnProperty.call(a,Gd)||(a[Gd]=Fd++,Ed[a[Gd]]={});return Ed[a[Gd]]}function Id(a){for(;a&&a.firstChild;)a=a.firstChild;return a}\nfunction Jd(a,b){var c=Id(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=Id(c)}}function Kd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&(\"input\"===b&&\"text\"===a.type||\"textarea\"===b||\"true\"===a.contentEditable)}\nvar Ld=l.canUseDOM&&\"documentMode\"in document&&11>=document.documentMode,Md={select:{phasedRegistrationNames:{bubbled:\"onSelect\",captured:\"onSelectCapture\"},dependencies:\"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange\".split(\" \")}},Nd=null,Od=null,Pd=null,Qd=!1;\nfunction Rd(a,b){if(Qd||null==Nd||Nd!==da())return null;var c=Nd;\"selectionStart\"in c&&Kd(c)?c={start:c.selectionStart,end:c.selectionEnd}:window.getSelection?(c=window.getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}):c=void 0;return Pd&&ea(Pd,c)?null:(Pd=c,a=T.getPooled(Md.select,Od,a,b),a.type=\"select\",a.target=Nd,Ab(a),a)}\nvar Sd={eventTypes:Md,extractEvents:function(a,b,c,d){var e=d.window===d?d.document:9===d.nodeType?d:d.ownerDocument,f;if(!(f=!e)){a:{e=Hd(e);f=Sa.onSelect;for(var g=0;g<f.length;g++){var h=f[g];if(!e.hasOwnProperty(h)||!e[h]){e=!1;break a}}e=!0}f=!e}if(f)return null;e=b?qb(b):window;switch(a){case \"topFocus\":if(vc(e)||\"true\"===e.contentEditable)Nd=e,Od=b,Pd=null;break;case \"topBlur\":Pd=Od=Nd=null;break;case \"topMouseDown\":Qd=!0;break;case \"topContextMenu\":case \"topMouseUp\":return Qd=!1,Rd(c,d);case \"topSelectionChange\":if(Ld)break;\ncase \"topKeyDown\":case \"topKeyUp\":return Rd(c,d)}return null}};function Td(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(Td,{animationName:null,elapsedTime:null,pseudoElement:null});function Ud(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(Ud,{clipboardData:function(a){return\"clipboardData\"in a?a.clipboardData:window.clipboardData}});function Vd(a,b,c,d){return T.call(this,a,b,c,d)}bd.augmentClass(Vd,{relatedTarget:null});\nfunction Wd(a){var b=a.keyCode;\"charCode\"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;return 32<=a||13===a?a:0}\nvar Xd={Esc:\"Escape\",Spacebar:\" \",Left:\"ArrowLeft\",Up:\"ArrowUp\",Right:\"ArrowRight\",Down:\"ArrowDown\",Del:\"Delete\",Win:\"OS\",Menu:\"ContextMenu\",Apps:\"ContextMenu\",Scroll:\"ScrollLock\",MozPrintableKey:\"Unidentified\"},Yd={8:\"Backspace\",9:\"Tab\",12:\"Clear\",13:\"Enter\",16:\"Shift\",17:\"Control\",18:\"Alt\",19:\"Pause\",20:\"CapsLock\",27:\"Escape\",32:\" \",33:\"PageUp\",34:\"PageDown\",35:\"End\",36:\"Home\",37:\"ArrowLeft\",38:\"ArrowUp\",39:\"ArrowRight\",40:\"ArrowDown\",45:\"Insert\",46:\"Delete\",112:\"F1\",113:\"F2\",114:\"F3\",115:\"F4\",\n116:\"F5\",117:\"F6\",118:\"F7\",119:\"F8\",120:\"F9\",121:\"F10\",122:\"F11\",123:\"F12\",144:\"NumLock\",145:\"ScrollLock\",224:\"Meta\"};function Zd(a,b,c,d){return T.call(this,a,b,c,d)}\nbd.augmentClass(Zd,{key:function(a){if(a.key){var b=Xd[a.key]||a.key;if(\"Unidentified\"!==b)return b}return\"keypress\"===a.type?(a=Wd(a),13===a?\"Enter\":String.fromCharCode(a)):\"keydown\"===a.type||\"keyup\"===a.type?Yd[a.keyCode]||\"Unidentified\":\"\"},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:ed,charCode:function(a){return\"keypress\"===a.type?Wd(a):0},keyCode:function(a){return\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0},which:function(a){return\"keypress\"===\na.type?Wd(a):\"keydown\"===a.type||\"keyup\"===a.type?a.keyCode:0}});function $d(a,b,c,d){return T.call(this,a,b,c,d)}fd.augmentClass($d,{dataTransfer:null});function ae(a,b,c,d){return T.call(this,a,b,c,d)}bd.augmentClass(ae,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:ed});function be(a,b,c,d){return T.call(this,a,b,c,d)}T.augmentClass(be,{propertyName:null,elapsedTime:null,pseudoElement:null});\nfunction ce(a,b,c,d){return T.call(this,a,b,c,d)}fd.augmentClass(ce,{deltaX:function(a){return\"deltaX\"in a?a.deltaX:\"wheelDeltaX\"in a?-a.wheelDeltaX:0},deltaY:function(a){return\"deltaY\"in a?a.deltaY:\"wheelDeltaY\"in a?-a.wheelDeltaY:\"wheelDelta\"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null});var de={},ee={};\n\"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel\".split(\" \").forEach(function(a){var b=a[0].toUpperCase()+\na.slice(1),c=\"on\"+b;b=\"top\"+b;c={phasedRegistrationNames:{bubbled:c,captured:c+\"Capture\"},dependencies:[b]};de[a]=c;ee[b]=c});\nvar fe={eventTypes:de,extractEvents:function(a,b,c,d){var e=ee[a];if(!e)return null;switch(a){case \"topKeyPress\":if(0===Wd(c))return null;case \"topKeyDown\":case \"topKeyUp\":a=Zd;break;case \"topBlur\":case \"topFocus\":a=Vd;break;case \"topClick\":if(2===c.button)return null;case \"topDoubleClick\":case \"topMouseDown\":case \"topMouseMove\":case \"topMouseUp\":case \"topMouseOut\":case \"topMouseOver\":case \"topContextMenu\":a=fd;break;case \"topDrag\":case \"topDragEnd\":case \"topDragEnter\":case \"topDragExit\":case \"topDragLeave\":case \"topDragOver\":case \"topDragStart\":case \"topDrop\":a=\n$d;break;case \"topTouchCancel\":case \"topTouchEnd\":case \"topTouchMove\":case \"topTouchStart\":a=ae;break;case \"topAnimationEnd\":case \"topAnimationIteration\":case \"topAnimationStart\":a=Td;break;case \"topTransitionEnd\":a=be;break;case \"topScroll\":a=bd;break;case \"topWheel\":a=ce;break;case \"topCopy\":case \"topCut\":case \"topPaste\":a=Ud;break;default:a=T}b=a.getPooled(e,b,c,d);Ab(b);return b}};sd=function(a,b,c,d){a=jb(a,b,c,d);kb(a);lb(!1)};hb.injectEventPluginOrder(\"ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin\".split(\" \"));\nWa=sb.getFiberCurrentPropsFromNode;Xa=sb.getInstanceFromNode;Ya=sb.getNodeFromInstance;hb.injectEventPluginsByName({SimpleEventPlugin:fe,EnterLeaveEventPlugin:hd,ChangeEventPlugin:ad,SelectEventPlugin:Sd,BeforeInputEventPlugin:ic});var ge=[],he=-1;function V(a){0>he||(a.current=ge[he],ge[he]=null,he--)}function W(a,b){he++;ge[he]=a.current;a.current=b}new Set;var ie={current:D},X={current:!1},je=D;function ke(a){return le(a)?je:ie.current}\nfunction me(a,b){var c=a.type.contextTypes;if(!c)return D;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function le(a){return 2===a.tag&&null!=a.type.childContextTypes}function ne(a){le(a)&&(V(X,a),V(ie,a))}\nfunction oe(a,b,c){null!=ie.cursor?E(\"168\"):void 0;W(ie,b,a);W(X,c,a)}function pe(a,b){var c=a.stateNode,d=a.type.childContextTypes;if(\"function\"!==typeof c.getChildContext)return b;c=c.getChildContext();for(var e in c)e in d?void 0:E(\"108\",jd(a)||\"Unknown\",e);return B({},b,c)}function qe(a){if(!le(a))return!1;var b=a.stateNode;b=b&&b.__reactInternalMemoizedMergedChildContext||D;je=ie.current;W(ie,b,a);W(X,X.current,a);return!0}\nfunction re(a,b){var c=a.stateNode;c?void 0:E(\"169\");if(b){var d=pe(a,je);c.__reactInternalMemoizedMergedChildContext=d;V(X,a);V(ie,a);W(ie,d,a)}else V(X,a);W(X,b,a)}\nfunction Y(a,b,c){this.tag=a;this.key=b;this.stateNode=this.type=null;this.sibling=this.child=this[\"return\"]=null;this.index=0;this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null;this.internalContextTag=c;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=null;this.expirationTime=0;this.alternate=null}\nfunction se(a,b,c){var d=a.alternate;null===d?(d=new Y(a.tag,a.key,a.internalContextTag),d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.effectTag=0,d.nextEffect=null,d.firstEffect=null,d.lastEffect=null);d.expirationTime=c;d.pendingProps=b;d.child=a.child;d.memoizedProps=a.memoizedProps;d.memoizedState=a.memoizedState;d.updateQueue=a.updateQueue;d.sibling=a.sibling;d.index=a.index;d.ref=a.ref;return d}\nfunction te(a,b,c){var d=void 0,e=a.type,f=a.key;\"function\"===typeof e?(d=e.prototype&&e.prototype.isReactComponent?new Y(2,f,b):new Y(0,f,b),d.type=e,d.pendingProps=a.props):\"string\"===typeof e?(d=new Y(5,f,b),d.type=e,d.pendingProps=a.props):\"object\"===typeof e&&null!==e&&\"number\"===typeof e.tag?(d=e,d.pendingProps=a.props):E(\"130\",null==e?e:typeof e,\"\");d.expirationTime=c;return d}function ue(a,b,c,d){b=new Y(10,d,b);b.pendingProps=a;b.expirationTime=c;return b}\nfunction ve(a,b,c){b=new Y(6,null,b);b.pendingProps=a;b.expirationTime=c;return b}function we(a,b,c){b=new Y(7,a.key,b);b.type=a.handler;b.pendingProps=a;b.expirationTime=c;return b}function xe(a,b,c){a=new Y(9,null,b);a.expirationTime=c;return a}function ye(a,b,c){b=new Y(4,a.key,b);b.pendingProps=a.children||[];b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}var ze=null,Ae=null;\nfunction Be(a){return function(b){try{return a(b)}catch(c){}}}function Ce(a){if(\"undefined\"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=b.inject(a);ze=Be(function(a){return b.onCommitFiberRoot(c,a)});Ae=Be(function(a){return b.onCommitFiberUnmount(c,a)})}catch(d){}return!0}function De(a){\"function\"===typeof ze&&ze(a)}function Ee(a){\"function\"===typeof Ae&&Ae(a)}\nfunction Fe(a){return{baseState:a,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1}}function Ge(a,b){null===a.last?a.first=a.last=b:(a.last.next=b,a.last=b);if(0===a.expirationTime||a.expirationTime>b.expirationTime)a.expirationTime=b.expirationTime}\nfunction He(a,b){var c=a.alternate,d=a.updateQueue;null===d&&(d=a.updateQueue=Fe(null));null!==c?(a=c.updateQueue,null===a&&(a=c.updateQueue=Fe(null))):a=null;a=a!==d?a:null;null===a?Ge(d,b):null===d.last||null===a.last?(Ge(d,b),Ge(a,b)):(Ge(d,b),a.last=b)}function Ie(a,b,c,d){a=a.partialState;return\"function\"===typeof a?a.call(b,c,d):a}\nfunction Je(a,b,c,d,e,f){null!==a&&a.updateQueue===c&&(c=b.updateQueue={baseState:c.baseState,expirationTime:c.expirationTime,first:c.first,last:c.last,isInitialized:c.isInitialized,callbackList:null,hasForceUpdate:!1});c.expirationTime=0;c.isInitialized?a=c.baseState:(a=c.baseState=b.memoizedState,c.isInitialized=!0);for(var g=!0,h=c.first,k=!1;null!==h;){var q=h.expirationTime;if(q>f){var v=c.expirationTime;if(0===v||v>q)c.expirationTime=q;k||(k=!0,c.baseState=a)}else{k||(c.first=h.next,null===\nc.first&&(c.last=null));if(h.isReplace)a=Ie(h,d,a,e),g=!0;else if(q=Ie(h,d,a,e))a=g?B({},a,q):B(a,q),g=!1;h.isForced&&(c.hasForceUpdate=!0);null!==h.callback&&(q=c.callbackList,null===q&&(q=c.callbackList=[]),q.push(h))}h=h.next}null!==c.callbackList?b.effectTag|=32:null!==c.first||c.hasForceUpdate||(b.updateQueue=null);k||(c.baseState=a);return a}\nfunction Ke(a,b){var c=a.callbackList;if(null!==c)for(a.callbackList=null,a=0;a<c.length;a++){var d=c[a],e=d.callback;d.callback=null;\"function\"!==typeof e?E(\"191\",e):void 0;e.call(b)}}\nfunction Le(a,b,c,d){function e(a,b){b.updater=f;a.stateNode=b;b._reactInternalFiber=a}var f={isMounted:ld,enqueueSetState:function(c,d,e){c=c._reactInternalFiber;e=void 0===e?null:e;var g=b(c);He(c,{expirationTime:g,partialState:d,callback:e,isReplace:!1,isForced:!1,nextCallback:null,next:null});a(c,g)},enqueueReplaceState:function(c,d,e){c=c._reactInternalFiber;e=void 0===e?null:e;var g=b(c);He(c,{expirationTime:g,partialState:d,callback:e,isReplace:!0,isForced:!1,nextCallback:null,next:null});\na(c,g)},enqueueForceUpdate:function(c,d){c=c._reactInternalFiber;d=void 0===d?null:d;var e=b(c);He(c,{expirationTime:e,partialState:null,callback:d,isReplace:!1,isForced:!0,nextCallback:null,next:null});a(c,e)}};return{adoptClassInstance:e,constructClassInstance:function(a,b){var c=a.type,d=ke(a),f=2===a.tag&&null!=a.type.contextTypes,g=f?me(a,d):D;b=new c(b,g);e(a,b);f&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=d,a.__reactInternalMemoizedMaskedChildContext=g);return b},mountClassInstance:function(a,\nb){var c=a.alternate,d=a.stateNode,e=d.state||null,g=a.pendingProps;g?void 0:E(\"158\");var h=ke(a);d.props=g;d.state=a.memoizedState=e;d.refs=D;d.context=me(a,h);null!=a.type&&null!=a.type.prototype&&!0===a.type.prototype.unstable_isAsyncReactComponent&&(a.internalContextTag|=1);\"function\"===typeof d.componentWillMount&&(e=d.state,d.componentWillMount(),e!==d.state&&f.enqueueReplaceState(d,d.state,null),e=a.updateQueue,null!==e&&(d.state=Je(c,a,e,d,g,b)));\"function\"===typeof d.componentDidMount&&(a.effectTag|=\n4)},updateClassInstance:function(a,b,e){var g=b.stateNode;g.props=b.memoizedProps;g.state=b.memoizedState;var h=b.memoizedProps,k=b.pendingProps;k||(k=h,null==k?E(\"159\"):void 0);var u=g.context,z=ke(b);z=me(b,z);\"function\"!==typeof g.componentWillReceiveProps||h===k&&u===z||(u=g.state,g.componentWillReceiveProps(k,z),g.state!==u&&f.enqueueReplaceState(g,g.state,null));u=b.memoizedState;e=null!==b.updateQueue?Je(a,b,b.updateQueue,g,k,e):u;if(!(h!==k||u!==e||X.current||null!==b.updateQueue&&b.updateQueue.hasForceUpdate))return\"function\"!==\ntypeof g.componentDidUpdate||h===a.memoizedProps&&u===a.memoizedState||(b.effectTag|=4),!1;var G=k;if(null===h||null!==b.updateQueue&&b.updateQueue.hasForceUpdate)G=!0;else{var I=b.stateNode,L=b.type;G=\"function\"===typeof I.shouldComponentUpdate?I.shouldComponentUpdate(G,e,z):L.prototype&&L.prototype.isPureReactComponent?!ea(h,G)||!ea(u,e):!0}G?(\"function\"===typeof g.componentWillUpdate&&g.componentWillUpdate(k,e,z),\"function\"===typeof g.componentDidUpdate&&(b.effectTag|=4)):(\"function\"!==typeof g.componentDidUpdate||\nh===a.memoizedProps&&u===a.memoizedState||(b.effectTag|=4),c(b,k),d(b,e));g.props=k;g.state=e;g.context=z;return G}}}var Qe=\"function\"===typeof Symbol&&Symbol[\"for\"],Re=Qe?Symbol[\"for\"](\"react.element\"):60103,Se=Qe?Symbol[\"for\"](\"react.call\"):60104,Te=Qe?Symbol[\"for\"](\"react.return\"):60105,Ue=Qe?Symbol[\"for\"](\"react.portal\"):60106,Ve=Qe?Symbol[\"for\"](\"react.fragment\"):60107,We=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction Xe(a){if(null===a||\"undefined\"===typeof a)return null;a=We&&a[We]||a[\"@@iterator\"];return\"function\"===typeof a?a:null}var Ye=Array.isArray;\nfunction Ze(a,b){var c=b.ref;if(null!==c&&\"function\"!==typeof c){if(b._owner){b=b._owner;var d=void 0;b&&(2!==b.tag?E(\"110\"):void 0,d=b.stateNode);d?void 0:E(\"147\",c);var e=\"\"+c;if(null!==a&&null!==a.ref&&a.ref._stringRef===e)return a.ref;a=function(a){var b=d.refs===D?d.refs={}:d.refs;null===a?delete b[e]:b[e]=a};a._stringRef=e;return a}\"string\"!==typeof c?E(\"148\"):void 0;b._owner?void 0:E(\"149\",c)}return c}\nfunction $e(a,b){\"textarea\"!==a.type&&E(\"31\",\"[object Object]\"===Object.prototype.toString.call(b)?\"object with keys {\"+Object.keys(b).join(\", \")+\"}\":b,\"\")}\nfunction af(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,b),b=b.sibling;return a}function e(a,b,c){a=se(a,b,c);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=\n2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=ve(c,a.internalContextTag,d),b[\"return\"]=a,b;b=e(b,c,d);b[\"return\"]=a;return b}function k(a,b,c,d){if(null!==b&&b.type===c.type)return d=e(b,c.props,d),d.ref=Ze(b,c),d[\"return\"]=a,d;d=te(c,a.internalContextTag,d);d.ref=Ze(b,c);d[\"return\"]=a;return d}function q(a,b,c,d){if(null===b||7!==b.tag)return b=we(c,a.internalContextTag,d),b[\"return\"]=a,b;b=e(b,c,d);\nb[\"return\"]=a;return b}function v(a,b,c,d){if(null===b||9!==b.tag)return b=xe(c,a.internalContextTag,d),b.type=c.value,b[\"return\"]=a,b;b=e(b,null,d);b.type=c.value;b[\"return\"]=a;return b}function y(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=ye(c,a.internalContextTag,d),b[\"return\"]=a,b;b=e(b,c.children||[],d);b[\"return\"]=a;return b}function u(a,b,c,d,f){if(null===b||10!==b.tag)return b=ue(c,a.internalContextTag,\nd,f),b[\"return\"]=a,b;b=e(b,c,d);b[\"return\"]=a;return b}function z(a,b,c){if(\"string\"===typeof b||\"number\"===typeof b)return b=ve(\"\"+b,a.internalContextTag,c),b[\"return\"]=a,b;if(\"object\"===typeof b&&null!==b){switch(b.$$typeof){case Re:if(b.type===Ve)return b=ue(b.props.children,a.internalContextTag,c,b.key),b[\"return\"]=a,b;c=te(b,a.internalContextTag,c);c.ref=Ze(null,b);c[\"return\"]=a;return c;case Se:return b=we(b,a.internalContextTag,c),b[\"return\"]=a,b;case Te:return c=xe(b,a.internalContextTag,\nc),c.type=b.value,c[\"return\"]=a,c;case Ue:return b=ye(b,a.internalContextTag,c),b[\"return\"]=a,b}if(Ye(b)||Xe(b))return b=ue(b,a.internalContextTag,c,null),b[\"return\"]=a,b;$e(a,b)}return null}function G(a,b,c,d){var e=null!==b?b.key:null;if(\"string\"===typeof c||\"number\"===typeof c)return null!==e?null:h(a,b,\"\"+c,d);if(\"object\"===typeof c&&null!==c){switch(c.$$typeof){case Re:return c.key===e?c.type===Ve?u(a,b,c.props.children,d,e):k(a,b,c,d):null;case Se:return c.key===e?q(a,b,c,d):null;case Te:return null===\ne?v(a,b,c,d):null;case Ue:return c.key===e?y(a,b,c,d):null}if(Ye(c)||Xe(c))return null!==e?null:u(a,b,c,d,null);$e(a,c)}return null}function I(a,b,c,d,e){if(\"string\"===typeof d||\"number\"===typeof d)return a=a.get(c)||null,h(b,a,\"\"+d,e);if(\"object\"===typeof d&&null!==d){switch(d.$$typeof){case Re:return a=a.get(null===d.key?c:d.key)||null,d.type===Ve?u(b,a,d.props.children,e,d.key):k(b,a,d,e);case Se:return a=a.get(null===d.key?c:d.key)||null,q(b,a,d,e);case Te:return a=a.get(c)||null,v(b,a,d,e);case Ue:return a=\na.get(null===d.key?c:d.key)||null,y(b,a,d,e)}if(Ye(d)||Xe(d))return a=a.get(c)||null,u(b,a,d,e,null);$e(b,d)}return null}function L(e,g,m,A){for(var h=null,r=null,n=g,w=g=0,k=null;null!==n&&w<m.length;w++){n.index>w?(k=n,n=null):k=n.sibling;var x=G(e,n,m[w],A);if(null===x){null===n&&(n=k);break}a&&n&&null===x.alternate&&b(e,n);g=f(x,g,w);null===r?h=x:r.sibling=x;r=x;n=k}if(w===m.length)return c(e,n),h;if(null===n){for(;w<m.length;w++)if(n=z(e,m[w],A))g=f(n,g,w),null===r?h=n:r.sibling=n,r=n;return h}for(n=\nd(e,n);w<m.length;w++)if(k=I(n,e,w,m[w],A)){if(a&&null!==k.alternate)n[\"delete\"](null===k.key?w:k.key);g=f(k,g,w);null===r?h=k:r.sibling=k;r=k}a&&n.forEach(function(a){return b(e,a)});return h}function N(e,g,m,A){var h=Xe(m);\"function\"!==typeof h?E(\"150\"):void 0;m=h.call(m);null==m?E(\"151\"):void 0;for(var r=h=null,n=g,w=g=0,k=null,x=m.next();null!==n&&!x.done;w++,x=m.next()){n.index>w?(k=n,n=null):k=n.sibling;var J=G(e,n,x.value,A);if(null===J){n||(n=k);break}a&&n&&null===J.alternate&&b(e,n);g=f(J,\ng,w);null===r?h=J:r.sibling=J;r=J;n=k}if(x.done)return c(e,n),h;if(null===n){for(;!x.done;w++,x=m.next())x=z(e,x.value,A),null!==x&&(g=f(x,g,w),null===r?h=x:r.sibling=x,r=x);return h}for(n=d(e,n);!x.done;w++,x=m.next())if(x=I(n,e,w,x.value,A),null!==x){if(a&&null!==x.alternate)n[\"delete\"](null===x.key?w:x.key);g=f(x,g,w);null===r?h=x:r.sibling=x;r=x}a&&n.forEach(function(a){return b(e,a)});return h}return function(a,d,f,h){\"object\"===typeof f&&null!==f&&f.type===Ve&&null===f.key&&(f=f.props.children);\nvar m=\"object\"===typeof f&&null!==f;if(m)switch(f.$$typeof){case Re:a:{var r=f.key;for(m=d;null!==m;){if(m.key===r)if(10===m.tag?f.type===Ve:m.type===f.type){c(a,m.sibling);d=e(m,f.type===Ve?f.props.children:f.props,h);d.ref=Ze(m,f);d[\"return\"]=a;a=d;break a}else{c(a,m);break}else b(a,m);m=m.sibling}f.type===Ve?(d=ue(f.props.children,a.internalContextTag,h,f.key),d[\"return\"]=a,a=d):(h=te(f,a.internalContextTag,h),h.ref=Ze(d,f),h[\"return\"]=a,a=h)}return g(a);case Se:a:{for(m=f.key;null!==d;){if(d.key===\nm)if(7===d.tag){c(a,d.sibling);d=e(d,f,h);d[\"return\"]=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=we(f,a.internalContextTag,h);d[\"return\"]=a;a=d}return g(a);case Te:a:{if(null!==d)if(9===d.tag){c(a,d.sibling);d=e(d,null,h);d.type=f.value;d[\"return\"]=a;a=d;break a}else c(a,d);d=xe(f,a.internalContextTag,h);d.type=f.value;d[\"return\"]=a;a=d}return g(a);case Ue:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===f.containerInfo&&d.stateNode.implementation===\nf.implementation){c(a,d.sibling);d=e(d,f.children||[],h);d[\"return\"]=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=ye(f,a.internalContextTag,h);d[\"return\"]=a;a=d}return g(a)}if(\"string\"===typeof f||\"number\"===typeof f)return f=\"\"+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f,h)):(c(a,d),d=ve(f,a.internalContextTag,h)),d[\"return\"]=a,a=d,g(a);if(Ye(f))return L(a,d,f,h);if(Xe(f))return N(a,d,f,h);m&&$e(a,f);if(\"undefined\"===typeof f)switch(a.tag){case 2:case 1:h=a.type,E(\"152\",h.displayName||\nh.name||\"Component\")}return c(a,d)}}var bf=af(!0),cf=af(!1);\nfunction df(a,b,c,d,e){function f(a,b,c){var d=b.expirationTime;b.child=null===a?cf(b,null,c,d):bf(b,a.child,c,d)}function g(a,b){var c=b.ref;null===c||a&&a.ref===c||(b.effectTag|=128)}function h(a,b,c,d){g(a,b);if(!c)return d&&re(b,!1),q(a,b);c=b.stateNode;id.current=b;var e=c.render();b.effectTag|=1;f(a,b,e);b.memoizedState=c.state;b.memoizedProps=c.props;d&&re(b,!0);return b.child}function k(a){var b=a.stateNode;b.pendingContext?oe(a,b.pendingContext,b.pendingContext!==b.context):b.context&&oe(a,\nb.context,!1);I(a,b.containerInfo)}function q(a,b){null!==a&&b.child!==a.child?E(\"153\"):void 0;if(null!==b.child){a=b.child;var c=se(a,a.pendingProps,a.expirationTime);b.child=c;for(c[\"return\"]=b;null!==a.sibling;)a=a.sibling,c=c.sibling=se(a,a.pendingProps,a.expirationTime),c[\"return\"]=b;c.sibling=null}return b.child}function v(a,b){switch(b.tag){case 3:k(b);break;case 2:qe(b);break;case 4:I(b,b.stateNode.containerInfo)}return null}var y=a.shouldSetTextContent,u=a.useSyncScheduling,z=a.shouldDeprioritizeSubtree,\nG=b.pushHostContext,I=b.pushHostContainer,L=c.enterHydrationState,N=c.resetHydrationState,J=c.tryToClaimNextHydratableInstance;a=Le(d,e,function(a,b){a.memoizedProps=b},function(a,b){a.memoizedState=b});var w=a.adoptClassInstance,m=a.constructClassInstance,A=a.mountClassInstance,Ob=a.updateClassInstance;return{beginWork:function(a,b,c){if(0===b.expirationTime||b.expirationTime>c)return v(a,b);switch(b.tag){case 0:null!==a?E(\"155\"):void 0;var d=b.type,e=b.pendingProps,r=ke(b);r=me(b,r);d=d(e,r);b.effectTag|=\n1;\"object\"===typeof d&&null!==d&&\"function\"===typeof d.render?(b.tag=2,e=qe(b),w(b,d),A(b,c),b=h(a,b,!0,e)):(b.tag=1,f(a,b,d),b.memoizedProps=e,b=b.child);return b;case 1:a:{e=b.type;c=b.pendingProps;d=b.memoizedProps;if(X.current)null===c&&(c=d);else if(null===c||d===c){b=q(a,b);break a}d=ke(b);d=me(b,d);e=e(c,d);b.effectTag|=1;f(a,b,e);b.memoizedProps=c;b=b.child}return b;case 2:return e=qe(b),d=void 0,null===a?b.stateNode?E(\"153\"):(m(b,b.pendingProps),A(b,c),d=!0):d=Ob(a,b,c),h(a,b,d,e);case 3:return k(b),\ne=b.updateQueue,null!==e?(d=b.memoizedState,e=Je(a,b,e,null,null,c),d===e?(N(),b=q(a,b)):(d=e.element,r=b.stateNode,(null===a||null===a.child)&&r.hydrate&&L(b)?(b.effectTag|=2,b.child=cf(b,null,d,c)):(N(),f(a,b,d)),b.memoizedState=e,b=b.child)):(N(),b=q(a,b)),b;case 5:G(b);null===a&&J(b);e=b.type;var n=b.memoizedProps;d=b.pendingProps;null===d&&(d=n,null===d?E(\"154\"):void 0);r=null!==a?a.memoizedProps:null;X.current||null!==d&&n!==d?(n=d.children,y(e,d)?n=null:r&&y(e,r)&&(b.effectTag|=16),g(a,b),\n2147483647!==c&&!u&&z(e,d)?(b.expirationTime=2147483647,b=null):(f(a,b,n),b.memoizedProps=d,b=b.child)):b=q(a,b);return b;case 6:return null===a&&J(b),a=b.pendingProps,null===a&&(a=b.memoizedProps),b.memoizedProps=a,null;case 8:b.tag=7;case 7:e=b.pendingProps;if(X.current)null===e&&(e=a&&a.memoizedProps,null===e?E(\"154\"):void 0);else if(null===e||b.memoizedProps===e)e=b.memoizedProps;d=e.children;b.stateNode=null===a?cf(b,b.stateNode,d,c):bf(b,b.stateNode,d,c);b.memoizedProps=e;return b.stateNode;\ncase 9:return null;case 4:a:{I(b,b.stateNode.containerInfo);e=b.pendingProps;if(X.current)null===e&&(e=a&&a.memoizedProps,null==e?E(\"154\"):void 0);else if(null===e||b.memoizedProps===e){b=q(a,b);break a}null===a?b.child=bf(b,null,e,c):f(a,b,e);b.memoizedProps=e;b=b.child}return b;case 10:a:{c=b.pendingProps;if(X.current)null===c&&(c=b.memoizedProps);else if(null===c||b.memoizedProps===c){b=q(a,b);break a}f(a,b,c);b.memoizedProps=c;b=b.child}return b;default:E(\"156\")}},beginFailedWork:function(a,b,\nc){switch(b.tag){case 2:qe(b);break;case 3:k(b);break;default:E(\"157\")}b.effectTag|=64;null===a?b.child=null:b.child!==a.child&&(b.child=a.child);if(0===b.expirationTime||b.expirationTime>c)return v(a,b);b.firstEffect=null;b.lastEffect=null;b.child=null===a?cf(b,null,null,c):bf(b,a.child,null,c);2===b.tag&&(a=b.stateNode,b.memoizedProps=a.props,b.memoizedState=a.state);return b.child}}}\nfunction ef(a,b,c){function d(a){a.effectTag|=4}var e=a.createInstance,f=a.createTextInstance,g=a.appendInitialChild,h=a.finalizeInitialChildren,k=a.prepareUpdate,q=a.persistence,v=b.getRootHostContainer,y=b.popHostContext,u=b.getHostContext,z=b.popHostContainer,G=c.prepareToHydrateHostInstance,I=c.prepareToHydrateHostTextInstance,L=c.popHydrationState,N=void 0,J=void 0,w=void 0;a.mutation?(N=function(){},J=function(a,b,c){(b.updateQueue=c)&&d(b)},w=function(a,b,c,e){c!==e&&d(b)}):q?E(\"235\"):E(\"236\");\nreturn{completeWork:function(a,b,c){var m=b.pendingProps;if(null===m)m=b.memoizedProps;else if(2147483647!==b.expirationTime||2147483647===c)b.pendingProps=null;switch(b.tag){case 1:return null;case 2:return ne(b),null;case 3:z(b);V(X,b);V(ie,b);m=b.stateNode;m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null);if(null===a||null===a.child)L(b),b.effectTag&=-3;N(b);return null;case 5:y(b);c=v();var A=b.type;if(null!==a&&null!=b.stateNode){var p=a.memoizedProps,q=b.stateNode,x=u();q=\nk(q,A,p,m,c,x);J(a,b,q,A,p,m,c);a.ref!==b.ref&&(b.effectTag|=128)}else{if(!m)return null===b.stateNode?E(\"166\"):void 0,null;a=u();if(L(b))G(b,c,a)&&d(b);else{a=e(A,m,c,a,b);a:for(p=b.child;null!==p;){if(5===p.tag||6===p.tag)g(a,p.stateNode);else if(4!==p.tag&&null!==p.child){p.child[\"return\"]=p;p=p.child;continue}if(p===b)break;for(;null===p.sibling;){if(null===p[\"return\"]||p[\"return\"]===b)break a;p=p[\"return\"]}p.sibling[\"return\"]=p[\"return\"];p=p.sibling}h(a,A,m,c)&&d(b);b.stateNode=a}null!==b.ref&&\n(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)w(a,b,a.memoizedProps,m);else{if(\"string\"!==typeof m)return null===b.stateNode?E(\"166\"):void 0,null;a=v();c=u();L(b)?I(b)&&d(b):b.stateNode=f(m,a,c,b)}return null;case 7:(m=b.memoizedProps)?void 0:E(\"165\");b.tag=8;A=[];a:for((p=b.stateNode)&&(p[\"return\"]=b);null!==p;){if(5===p.tag||6===p.tag||4===p.tag)E(\"247\");else if(9===p.tag)A.push(p.type);else if(null!==p.child){p.child[\"return\"]=p;p=p.child;continue}for(;null===p.sibling;){if(null===\np[\"return\"]||p[\"return\"]===b)break a;p=p[\"return\"]}p.sibling[\"return\"]=p[\"return\"];p=p.sibling}p=m.handler;m=p(m.props,A);b.child=bf(b,null!==a?a.child:null,m,c);return b.child;case 8:return b.tag=7,null;case 9:return null;case 10:return null;case 4:return z(b),N(b),null;case 0:E(\"167\");default:E(\"156\")}}}}\nfunction ff(a,b){function c(a){var c=a.ref;if(null!==c)try{c(null)}catch(A){b(a,A)}}function d(a){\"function\"===typeof Ee&&Ee(a);switch(a.tag){case 2:c(a);var d=a.stateNode;if(\"function\"===typeof d.componentWillUnmount)try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(A){b(a,A)}break;case 5:c(a);break;case 7:e(a.stateNode);break;case 4:k&&g(a)}}function e(a){for(var b=a;;)if(d(b),null===b.child||k&&4===b.tag){if(b===a)break;for(;null===b.sibling;){if(null===b[\"return\"]||\nb[\"return\"]===a)return;b=b[\"return\"]}b.sibling[\"return\"]=b[\"return\"];b=b.sibling}else b.child[\"return\"]=b,b=b.child}function f(a){return 5===a.tag||3===a.tag||4===a.tag}function g(a){for(var b=a,c=!1,f=void 0,g=void 0;;){if(!c){c=b[\"return\"];a:for(;;){null===c?E(\"160\"):void 0;switch(c.tag){case 5:f=c.stateNode;g=!1;break a;case 3:f=c.stateNode.containerInfo;g=!0;break a;case 4:f=c.stateNode.containerInfo;g=!0;break a}c=c[\"return\"]}c=!0}if(5===b.tag||6===b.tag)e(b),g?J(f,b.stateNode):N(f,b.stateNode);\nelse if(4===b.tag?f=b.stateNode.containerInfo:d(b),null!==b.child){b.child[\"return\"]=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b[\"return\"]||b[\"return\"]===a)return;b=b[\"return\"];4===b.tag&&(c=!1)}b.sibling[\"return\"]=b[\"return\"];b=b.sibling}}var h=a.getPublicInstance,k=a.mutation;a=a.persistence;k||(a?E(\"235\"):E(\"236\"));var q=k.commitMount,v=k.commitUpdate,y=k.resetTextContent,u=k.commitTextUpdate,z=k.appendChild,G=k.appendChildToContainer,I=k.insertBefore,L=k.insertInContainerBefore,\nN=k.removeChild,J=k.removeChildFromContainer;return{commitResetTextContent:function(a){y(a.stateNode)},commitPlacement:function(a){a:{for(var b=a[\"return\"];null!==b;){if(f(b)){var c=b;break a}b=b[\"return\"]}E(\"160\");c=void 0}var d=b=void 0;switch(c.tag){case 5:b=c.stateNode;d=!1;break;case 3:b=c.stateNode.containerInfo;d=!0;break;case 4:b=c.stateNode.containerInfo;d=!0;break;default:E(\"161\")}c.effectTag&16&&(y(b),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c[\"return\"]||f(c[\"return\"])){c=\nnull;break a}c=c[\"return\"]}c.sibling[\"return\"]=c[\"return\"];for(c=c.sibling;5!==c.tag&&6!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;else c.child[\"return\"]=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}for(var e=a;;){if(5===e.tag||6===e.tag)c?d?L(b,e.stateNode,c):I(b,e.stateNode,c):d?G(b,e.stateNode):z(b,e.stateNode);else if(4!==e.tag&&null!==e.child){e.child[\"return\"]=e;e=e.child;continue}if(e===a)break;for(;null===e.sibling;){if(null===e[\"return\"]||e[\"return\"]===\na)return;e=e[\"return\"]}e.sibling[\"return\"]=e[\"return\"];e=e.sibling}},commitDeletion:function(a){g(a);a[\"return\"]=null;a.child=null;a.alternate&&(a.alternate.child=null,a.alternate[\"return\"]=null)},commitWork:function(a,b){switch(b.tag){case 2:break;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps;a=null!==a?a.memoizedProps:d;var e=b.type,f=b.updateQueue;b.updateQueue=null;null!==f&&v(c,f,e,a,d,b)}break;case 6:null===b.stateNode?E(\"162\"):void 0;c=b.memoizedProps;u(b.stateNode,null!==a?a.memoizedProps:\nc,c);break;case 3:break;default:E(\"163\")}},commitLifeCycles:function(a,b){switch(b.tag){case 2:var c=b.stateNode;if(b.effectTag&4)if(null===a)c.props=b.memoizedProps,c.state=b.memoizedState,c.componentDidMount();else{var d=a.memoizedProps;a=a.memoizedState;c.props=b.memoizedProps;c.state=b.memoizedState;c.componentDidUpdate(d,a)}b=b.updateQueue;null!==b&&Ke(b,c);break;case 3:c=b.updateQueue;null!==c&&Ke(c,null!==b.child?b.child.stateNode:null);break;case 5:c=b.stateNode;null===a&&b.effectTag&4&&q(c,\nb.type,b.memoizedProps,b);break;case 6:break;case 4:break;default:E(\"163\")}},commitAttachRef:function(a){var b=a.ref;if(null!==b){var c=a.stateNode;switch(a.tag){case 5:b(h(c));break;default:b(c)}}},commitDetachRef:function(a){a=a.ref;null!==a&&a(null)}}}var gf={};\nfunction hf(a){function b(a){a===gf?E(\"174\"):void 0;return a}var c=a.getChildHostContext,d=a.getRootHostContext,e={current:gf},f={current:gf},g={current:gf};return{getHostContext:function(){return b(e.current)},getRootHostContainer:function(){return b(g.current)},popHostContainer:function(a){V(e,a);V(f,a);V(g,a)},popHostContext:function(a){f.current===a&&(V(e,a),V(f,a))},pushHostContainer:function(a,b){W(g,b,a);b=d(b);W(f,a,a);W(e,b,a)},pushHostContext:function(a){var d=b(g.current),h=b(e.current);\nd=c(h,a.type,d);h!==d&&(W(f,a,a),W(e,d,a))},resetHostContainer:function(){e.current=gf;g.current=gf}}}\nfunction jf(a){function b(a,b){var c=new Y(5,null,0);c.type=\"DELETED\";c.stateNode=b;c[\"return\"]=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function c(a,b){switch(a.tag){case 5:return b=f(b,a.type,a.pendingProps),null!==b?(a.stateNode=b,!0):!1;case 6:return b=g(b,a.pendingProps),null!==b?(a.stateNode=b,!0):!1;default:return!1}}function d(a){for(a=a[\"return\"];null!==a&&5!==a.tag&&3!==a.tag;)a=a[\"return\"];y=a}var e=a.shouldSetTextContent;\na=a.hydration;if(!a)return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){E(\"175\")},prepareToHydrateHostTextInstance:function(){E(\"176\")},popHydrationState:function(){return!1}};var f=a.canHydrateInstance,g=a.canHydrateTextInstance,h=a.getNextHydratableSibling,k=a.getFirstHydratableChild,q=a.hydrateInstance,v=a.hydrateTextInstance,y=null,u=null,z=!1;return{enterHydrationState:function(a){u=\nk(a.stateNode.containerInfo);y=a;return z=!0},resetHydrationState:function(){u=y=null;z=!1},tryToClaimNextHydratableInstance:function(a){if(z){var d=u;if(d){if(!c(a,d)){d=h(d);if(!d||!c(a,d)){a.effectTag|=2;z=!1;y=a;return}b(y,u)}y=a;u=k(d)}else a.effectTag|=2,z=!1,y=a}},prepareToHydrateHostInstance:function(a,b,c){b=q(a.stateNode,a.type,a.memoizedProps,b,c,a);a.updateQueue=b;return null!==b?!0:!1},prepareToHydrateHostTextInstance:function(a){return v(a.stateNode,a.memoizedProps,a)},popHydrationState:function(a){if(a!==\ny)return!1;if(!z)return d(a),z=!0,!1;var c=a.type;if(5!==a.tag||\"head\"!==c&&\"body\"!==c&&!e(c,a.memoizedProps))for(c=u;c;)b(a,c),c=h(c);d(a);u=y?h(a.stateNode):null;return!0}}}\nfunction kf(a){function b(a){Qb=ja=!0;var b=a.stateNode;b.current===a?E(\"177\"):void 0;b.isReadyForCommit=!1;id.current=null;if(1<a.effectTag)if(null!==a.lastEffect){a.lastEffect.nextEffect=a;var c=a.firstEffect}else c=a;else c=a.firstEffect;yg();for(t=c;null!==t;){var d=!1,e=void 0;try{for(;null!==t;){var f=t.effectTag;f&16&&zg(t);if(f&128){var g=t.alternate;null!==g&&Ag(g)}switch(f&-242){case 2:Ne(t);t.effectTag&=-3;break;case 6:Ne(t);t.effectTag&=-3;Oe(t.alternate,t);break;case 4:Oe(t.alternate,\nt);break;case 8:Sc=!0,Bg(t),Sc=!1}t=t.nextEffect}}catch(Tc){d=!0,e=Tc}d&&(null===t?E(\"178\"):void 0,h(t,e),null!==t&&(t=t.nextEffect))}Cg();b.current=a;for(t=c;null!==t;){c=!1;d=void 0;try{for(;null!==t;){var k=t.effectTag;k&36&&Dg(t.alternate,t);k&128&&Eg(t);if(k&64)switch(e=t,f=void 0,null!==R&&(f=R.get(e),R[\"delete\"](e),null==f&&null!==e.alternate&&(e=e.alternate,f=R.get(e),R[\"delete\"](e))),null==f?E(\"184\"):void 0,e.tag){case 2:e.stateNode.componentDidCatch(f.error,{componentStack:f.componentStack});\nbreak;case 3:null===ca&&(ca=f.error);break;default:E(\"157\")}var Qc=t.nextEffect;t.nextEffect=null;t=Qc}}catch(Tc){c=!0,d=Tc}c&&(null===t?E(\"178\"):void 0,h(t,d),null!==t&&(t=t.nextEffect))}ja=Qb=!1;\"function\"===typeof De&&De(a.stateNode);ha&&(ha.forEach(G),ha=null);null!==ca&&(a=ca,ca=null,Ob(a));b=b.current.expirationTime;0===b&&(qa=R=null);return b}function c(a){for(;;){var b=Fg(a.alternate,a,H),c=a[\"return\"],d=a.sibling;var e=a;if(2147483647===H||2147483647!==e.expirationTime){if(2!==e.tag&&3!==\ne.tag)var f=0;else f=e.updateQueue,f=null===f?0:f.expirationTime;for(var g=e.child;null!==g;)0!==g.expirationTime&&(0===f||f>g.expirationTime)&&(f=g.expirationTime),g=g.sibling;e.expirationTime=f}if(null!==b)return b;null!==c&&(null===c.firstEffect&&(c.firstEffect=a.firstEffect),null!==a.lastEffect&&(null!==c.lastEffect&&(c.lastEffect.nextEffect=a.firstEffect),c.lastEffect=a.lastEffect),1<a.effectTag&&(null!==c.lastEffect?c.lastEffect.nextEffect=a:c.firstEffect=a,c.lastEffect=a));if(null!==d)return d;\nif(null!==c)a=c;else{a.stateNode.isReadyForCommit=!0;break}}return null}function d(a){var b=rg(a.alternate,a,H);null===b&&(b=c(a));id.current=null;return b}function e(a){var b=Gg(a.alternate,a,H);null===b&&(b=c(a));id.current=null;return b}function f(a){if(null!==R){if(!(0===H||H>a))if(H<=Uc)for(;null!==F;)F=k(F)?e(F):d(F);else for(;null!==F&&!A();)F=k(F)?e(F):d(F)}else if(!(0===H||H>a))if(H<=Uc)for(;null!==F;)F=d(F);else for(;null!==F&&!A();)F=d(F)}function g(a,b){ja?E(\"243\"):void 0;ja=!0;a.isReadyForCommit=\n!1;if(a!==ra||b!==H||null===F){for(;-1<he;)ge[he]=null,he--;je=D;ie.current=D;X.current=!1;x();ra=a;H=b;F=se(ra.current,null,b)}var c=!1,d=null;try{f(b)}catch(Rc){c=!0,d=Rc}for(;c;){if(eb){ca=d;break}var g=F;if(null===g)eb=!0;else{var k=h(g,d);null===k?E(\"183\"):void 0;if(!eb){try{c=k;d=b;for(k=c;null!==g;){switch(g.tag){case 2:ne(g);break;case 5:qg(g);break;case 3:p(g);break;case 4:p(g)}if(g===k||g.alternate===k)break;g=g[\"return\"]}F=e(c);f(d)}catch(Rc){c=!0;d=Rc;continue}break}}}b=ca;eb=ja=!1;ca=\nnull;null!==b&&Ob(b);return a.isReadyForCommit?a.current.alternate:null}function h(a,b){var c=id.current=null,d=!1,e=!1,f=null;if(3===a.tag)c=a,q(a)&&(eb=!0);else for(var g=a[\"return\"];null!==g&&null===c;){2===g.tag?\"function\"===typeof g.stateNode.componentDidCatch&&(d=!0,f=jd(g),c=g,e=!0):3===g.tag&&(c=g);if(q(g)){if(Sc||null!==ha&&(ha.has(g)||null!==g.alternate&&ha.has(g.alternate)))return null;c=null;e=!1}g=g[\"return\"]}if(null!==c){null===qa&&(qa=new Set);qa.add(c);var h=\"\";g=a;do{a:switch(g.tag){case 0:case 1:case 2:case 5:var k=\ng._debugOwner,Qc=g._debugSource;var m=jd(g);var n=null;k&&(n=jd(k));k=Qc;m=\"\\n    in \"+(m||\"Unknown\")+(k?\" (at \"+k.fileName.replace(/^.*[\\\\\\/]/,\"\")+\":\"+k.lineNumber+\")\":n?\" (created by \"+n+\")\":\"\");break a;default:m=\"\"}h+=m;g=g[\"return\"]}while(g);g=h;a=jd(a);null===R&&(R=new Map);b={componentName:a,componentStack:g,error:b,errorBoundary:d?c.stateNode:null,errorBoundaryFound:d,errorBoundaryName:f,willRetry:e};R.set(c,b);try{var p=b.error;p&&p.suppressReactErrorLogging||console.error(p)}catch(Vc){Vc&&\nVc.suppressReactErrorLogging||console.error(Vc)}Qb?(null===ha&&(ha=new Set),ha.add(c)):G(c);return c}null===ca&&(ca=b);return null}function k(a){return null!==R&&(R.has(a)||null!==a.alternate&&R.has(a.alternate))}function q(a){return null!==qa&&(qa.has(a)||null!==a.alternate&&qa.has(a.alternate))}function v(){return 20*(((I()+100)/20|0)+1)}function y(a){return 0!==ka?ka:ja?Qb?1:H:!Hg||a.internalContextTag&1?v():1}function u(a,b){return z(a,b,!1)}function z(a,b){for(;null!==a;){if(0===a.expirationTime||\na.expirationTime>b)a.expirationTime=b;null!==a.alternate&&(0===a.alternate.expirationTime||a.alternate.expirationTime>b)&&(a.alternate.expirationTime=b);if(null===a[\"return\"])if(3===a.tag){var c=a.stateNode;!ja&&c===ra&&b<H&&(F=ra=null,H=0);var d=c,e=b;Rb>Ig&&E(\"185\");if(null===d.nextScheduledRoot)d.remainingExpirationTime=e,null===O?(sa=O=d,d.nextScheduledRoot=d):(O=O.nextScheduledRoot=d,O.nextScheduledRoot=sa);else{var f=d.remainingExpirationTime;if(0===f||e<f)d.remainingExpirationTime=e}Fa||(la?\nSb&&(ma=d,na=1,m(ma,na)):1===e?w(1,null):L(e));!ja&&c===ra&&b<H&&(F=ra=null,H=0)}else break;a=a[\"return\"]}}function G(a){z(a,1,!0)}function I(){return Uc=((Wc()-Pe)/10|0)+2}function L(a){if(0!==Tb){if(a>Tb)return;Jg(Xc)}var b=Wc()-Pe;Tb=a;Xc=Kg(J,{timeout:10*(a-2)-b})}function N(){var a=0,b=null;if(null!==O)for(var c=O,d=sa;null!==d;){var e=d.remainingExpirationTime;if(0===e){null===c||null===O?E(\"244\"):void 0;if(d===d.nextScheduledRoot){sa=O=d.nextScheduledRoot=null;break}else if(d===sa)sa=e=d.nextScheduledRoot,\nO.nextScheduledRoot=e,d.nextScheduledRoot=null;else if(d===O){O=c;O.nextScheduledRoot=sa;d.nextScheduledRoot=null;break}else c.nextScheduledRoot=d.nextScheduledRoot,d.nextScheduledRoot=null;d=c.nextScheduledRoot}else{if(0===a||e<a)a=e,b=d;if(d===O)break;c=d;d=d.nextScheduledRoot}}c=ma;null!==c&&c===b?Rb++:Rb=0;ma=b;na=a}function J(a){w(0,a)}function w(a,b){fb=b;for(N();null!==ma&&0!==na&&(0===a||na<=a)&&!Yc;)m(ma,na),N();null!==fb&&(Tb=0,Xc=-1);0!==na&&L(na);fb=null;Yc=!1;Rb=0;if(Ub)throw a=Zc,Zc=\nnull,Ub=!1,a;}function m(a,c){Fa?E(\"245\"):void 0;Fa=!0;if(c<=I()){var d=a.finishedWork;null!==d?(a.finishedWork=null,a.remainingExpirationTime=b(d)):(a.finishedWork=null,d=g(a,c),null!==d&&(a.remainingExpirationTime=b(d)))}else d=a.finishedWork,null!==d?(a.finishedWork=null,a.remainingExpirationTime=b(d)):(a.finishedWork=null,d=g(a,c),null!==d&&(A()?a.finishedWork=d:a.remainingExpirationTime=b(d)));Fa=!1}function A(){return null===fb||fb.timeRemaining()>Lg?!1:Yc=!0}function Ob(a){null===ma?E(\"246\"):\nvoid 0;ma.remainingExpirationTime=0;Ub||(Ub=!0,Zc=a)}var r=hf(a),n=jf(a),p=r.popHostContainer,qg=r.popHostContext,x=r.resetHostContainer,Me=df(a,r,n,u,y),rg=Me.beginWork,Gg=Me.beginFailedWork,Fg=ef(a,r,n).completeWork;r=ff(a,h);var zg=r.commitResetTextContent,Ne=r.commitPlacement,Bg=r.commitDeletion,Oe=r.commitWork,Dg=r.commitLifeCycles,Eg=r.commitAttachRef,Ag=r.commitDetachRef,Wc=a.now,Kg=a.scheduleDeferredCallback,Jg=a.cancelDeferredCallback,Hg=a.useSyncScheduling,yg=a.prepareForCommit,Cg=a.resetAfterCommit,\nPe=Wc(),Uc=2,ka=0,ja=!1,F=null,ra=null,H=0,t=null,R=null,qa=null,ha=null,ca=null,eb=!1,Qb=!1,Sc=!1,sa=null,O=null,Tb=0,Xc=-1,Fa=!1,ma=null,na=0,Yc=!1,Ub=!1,Zc=null,fb=null,la=!1,Sb=!1,Ig=1E3,Rb=0,Lg=1;return{computeAsyncExpiration:v,computeExpirationForFiber:y,scheduleWork:u,batchedUpdates:function(a,b){var c=la;la=!0;try{return a(b)}finally{(la=c)||Fa||w(1,null)}},unbatchedUpdates:function(a){if(la&&!Sb){Sb=!0;try{return a()}finally{Sb=!1}}return a()},flushSync:function(a){var b=la;la=!0;try{a:{var c=\nka;ka=1;try{var d=a();break a}finally{ka=c}d=void 0}return d}finally{la=b,Fa?E(\"187\"):void 0,w(1,null)}},deferredUpdates:function(a){var b=ka;ka=v();try{return a()}finally{ka=b}}}}\nfunction lf(a){function b(a){a=od(a);return null===a?null:a.stateNode}var c=a.getPublicInstance;a=kf(a);var d=a.computeAsyncExpiration,e=a.computeExpirationForFiber,f=a.scheduleWork;return{createContainer:function(a,b){var c=new Y(3,null,0);a={current:c,containerInfo:a,pendingChildren:null,remainingExpirationTime:0,isReadyForCommit:!1,finishedWork:null,context:null,pendingContext:null,hydrate:b,nextScheduledRoot:null};return c.stateNode=a},updateContainer:function(a,b,c,q){var g=b.current;if(c){c=\nc._reactInternalFiber;var h;b:{2===kd(c)&&2===c.tag?void 0:E(\"170\");for(h=c;3!==h.tag;){if(le(h)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}(h=h[\"return\"])?void 0:E(\"171\")}h=h.stateNode.context}c=le(c)?pe(c,h):h}else c=D;null===b.context?b.context=c:b.pendingContext=c;b=q;b=void 0===b?null:b;q=null!=a&&null!=a.type&&null!=a.type.prototype&&!0===a.type.prototype.unstable_isAsyncReactComponent?d():e(g);He(g,{expirationTime:q,partialState:{element:a},callback:b,isReplace:!1,isForced:!1,\nnextCallback:null,next:null});f(g,q)},batchedUpdates:a.batchedUpdates,unbatchedUpdates:a.unbatchedUpdates,deferredUpdates:a.deferredUpdates,flushSync:a.flushSync,getPublicRootInstance:function(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return c(a.child.stateNode);default:return a.child.stateNode}},findHostInstance:b,findHostInstanceWithNoPortals:function(a){a=pd(a);return null===a?null:a.stateNode},injectIntoDevTools:function(a){var c=a.findFiberByHostInstance;return Ce(B({},\na,{findHostInstanceByFiber:function(a){return b(a)},findFiberByHostInstance:function(a){return c?c(a):null}}))}}}var mf=Object.freeze({default:lf}),nf=mf&&lf||mf,of=nf[\"default\"]?nf[\"default\"]:nf;function pf(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ue,key:null==d?null:\"\"+d,children:a,containerInfo:b,implementation:c}}var qf=\"object\"===typeof performance&&\"function\"===typeof performance.now,rf=void 0;rf=qf?function(){return performance.now()}:function(){return Date.now()};\nvar sf=void 0,tf=void 0;\nif(l.canUseDOM)if(\"function\"!==typeof requestIdleCallback||\"function\"!==typeof cancelIdleCallback){var uf=null,vf=!1,wf=-1,xf=!1,yf=0,zf=33,Af=33,Bf;Bf=qf?{didTimeout:!1,timeRemaining:function(){var a=yf-performance.now();return 0<a?a:0}}:{didTimeout:!1,timeRemaining:function(){var a=yf-Date.now();return 0<a?a:0}};var Cf=\"__reactIdleCallback$\"+Math.random().toString(36).slice(2);window.addEventListener(\"message\",function(a){if(a.source===window&&a.data===Cf){vf=!1;a=rf();if(0>=yf-a)if(-1!==wf&&wf<=\na)Bf.didTimeout=!0;else{xf||(xf=!0,requestAnimationFrame(Df));return}else Bf.didTimeout=!1;wf=-1;a=uf;uf=null;null!==a&&a(Bf)}},!1);var Df=function(a){xf=!1;var b=a-yf+Af;b<Af&&zf<Af?(8>b&&(b=8),Af=b<zf?zf:b):zf=b;yf=a+Af;vf||(vf=!0,window.postMessage(Cf,\"*\"))};sf=function(a,b){uf=a;null!=b&&\"number\"===typeof b.timeout&&(wf=rf()+b.timeout);xf||(xf=!0,requestAnimationFrame(Df));return 0};tf=function(){uf=null;vf=!1;wf=-1}}else sf=window.requestIdleCallback,tf=window.cancelIdleCallback;else sf=function(a){return setTimeout(function(){a({timeRemaining:function(){return Infinity}})})},\ntf=function(a){clearTimeout(a)};var Ef=/^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$/,Ff={},Gf={};\nfunction Hf(a){if(Gf.hasOwnProperty(a))return!0;if(Ff.hasOwnProperty(a))return!1;if(Ef.test(a))return Gf[a]=!0;Ff[a]=!0;return!1}\nfunction If(a,b,c){var d=wa(b);if(d&&va(b,c)){var e=d.mutationMethod;e?e(a,c):null==c||d.hasBooleanValue&&!c||d.hasNumericValue&&isNaN(c)||d.hasPositiveNumericValue&&1>c||d.hasOverloadedBooleanValue&&!1===c?Jf(a,b):d.mustUseProperty?a[d.propertyName]=c:(b=d.attributeName,(e=d.attributeNamespace)?a.setAttributeNS(e,b,\"\"+c):d.hasBooleanValue||d.hasOverloadedBooleanValue&&!0===c?a.setAttribute(b,\"\"):a.setAttribute(b,\"\"+c))}else Kf(a,b,va(b,c)?c:null)}\nfunction Kf(a,b,c){Hf(b)&&(null==c?a.removeAttribute(b):a.setAttribute(b,\"\"+c))}function Jf(a,b){var c=wa(b);c?(b=c.mutationMethod)?b(a,void 0):c.mustUseProperty?a[c.propertyName]=c.hasBooleanValue?!1:\"\":a.removeAttribute(c.attributeName):a.removeAttribute(b)}\nfunction Lf(a,b){var c=b.value,d=b.checked;return B({type:void 0,step:void 0,min:void 0,max:void 0},b,{defaultChecked:void 0,defaultValue:void 0,value:null!=c?c:a._wrapperState.initialValue,checked:null!=d?d:a._wrapperState.initialChecked})}function Mf(a,b){var c=b.defaultValue;a._wrapperState={initialChecked:null!=b.checked?b.checked:b.defaultChecked,initialValue:null!=b.value?b.value:c,controlled:\"checkbox\"===b.type||\"radio\"===b.type?null!=b.checked:null!=b.value}}\nfunction Nf(a,b){b=b.checked;null!=b&&If(a,\"checked\",b)}function Of(a,b){Nf(a,b);var c=b.value;if(null!=c)if(0===c&&\"\"===a.value)a.value=\"0\";else if(\"number\"===b.type){if(b=parseFloat(a.value)||0,c!=b||c==b&&a.value!=c)a.value=\"\"+c}else a.value!==\"\"+c&&(a.value=\"\"+c);else null==b.value&&null!=b.defaultValue&&a.defaultValue!==\"\"+b.defaultValue&&(a.defaultValue=\"\"+b.defaultValue),null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}\nfunction Pf(a,b){switch(b.type){case \"submit\":case \"reset\":break;case \"color\":case \"date\":case \"datetime\":case \"datetime-local\":case \"month\":case \"time\":case \"week\":a.value=\"\";a.value=a.defaultValue;break;default:a.value=a.value}b=a.name;\"\"!==b&&(a.name=\"\");a.defaultChecked=!a.defaultChecked;a.defaultChecked=!a.defaultChecked;\"\"!==b&&(a.name=b)}function Qf(a){var b=\"\";aa.Children.forEach(a,function(a){null==a||\"string\"!==typeof a&&\"number\"!==typeof a||(b+=a)});return b}\nfunction Rf(a,b){a=B({children:void 0},b);if(b=Qf(b.children))a.children=b;return a}function Sf(a,b,c,d){a=a.options;if(b){b={};for(var e=0;e<c.length;e++)b[\"$\"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty(\"$\"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=\"\"+c;b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}\nfunction Tf(a,b){var c=b.value;a._wrapperState={initialValue:null!=c?c:b.defaultValue,wasMultiple:!!b.multiple}}function Uf(a,b){null!=b.dangerouslySetInnerHTML?E(\"91\"):void 0;return B({},b,{value:void 0,defaultValue:void 0,children:\"\"+a._wrapperState.initialValue})}function Vf(a,b){var c=b.value;null==c&&(c=b.defaultValue,b=b.children,null!=b&&(null!=c?E(\"92\"):void 0,Array.isArray(b)&&(1>=b.length?void 0:E(\"93\"),b=b[0]),c=\"\"+b),null==c&&(c=\"\"));a._wrapperState={initialValue:\"\"+c}}\nfunction Wf(a,b){var c=b.value;null!=c&&(c=\"\"+c,c!==a.value&&(a.value=c),null==b.defaultValue&&(a.defaultValue=c));null!=b.defaultValue&&(a.defaultValue=b.defaultValue)}function Xf(a){var b=a.textContent;b===a._wrapperState.initialValue&&(a.value=b)}var Yf={html:\"http://www.w3.org/1999/xhtml\",mathml:\"http://www.w3.org/1998/Math/MathML\",svg:\"http://www.w3.org/2000/svg\"};\nfunction Zf(a){switch(a){case \"svg\":return\"http://www.w3.org/2000/svg\";case \"math\":return\"http://www.w3.org/1998/Math/MathML\";default:return\"http://www.w3.org/1999/xhtml\"}}function $f(a,b){return null==a||\"http://www.w3.org/1999/xhtml\"===a?Zf(b):\"http://www.w3.org/2000/svg\"===a&&\"foreignObject\"===b?\"http://www.w3.org/1999/xhtml\":a}\nvar ag=void 0,bg=function(a){return\"undefined\"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if(a.namespaceURI!==Yf.svg||\"innerHTML\"in a)a.innerHTML=b;else{ag=ag||document.createElement(\"div\");ag.innerHTML=\"\\x3csvg\\x3e\"+b+\"\\x3c/svg\\x3e\";for(b=ag.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}});\nfunction cg(a,b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b}\nvar dg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,\nstopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eg=[\"Webkit\",\"ms\",\"Moz\",\"O\"];Object.keys(dg).forEach(function(a){eg.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);dg[b]=dg[a]})});\nfunction fg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf(\"--\");var e=c;var f=b[c];e=null==f||\"boolean\"===typeof f||\"\"===f?\"\":d||\"number\"!==typeof f||0===f||dg.hasOwnProperty(e)&&dg[e]?(\"\"+f).trim():f+\"px\";\"float\"===c&&(c=\"cssFloat\");d?a.setProperty(c,e):a[c]=e}}var gg=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});\nfunction hg(a,b,c){b&&(gg[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML?E(\"137\",a,c()):void 0),null!=b.dangerouslySetInnerHTML&&(null!=b.children?E(\"60\"):void 0,\"object\"===typeof b.dangerouslySetInnerHTML&&\"__html\"in b.dangerouslySetInnerHTML?void 0:E(\"61\")),null!=b.style&&\"object\"!==typeof b.style?E(\"62\",c()):void 0)}\nfunction ig(a,b){if(-1===a.indexOf(\"-\"))return\"string\"===typeof b.is;switch(a){case \"annotation-xml\":case \"color-profile\":case \"font-face\":case \"font-face-src\":case \"font-face-uri\":case \"font-face-format\":case \"font-face-name\":case \"missing-glyph\":return!1;default:return!0}}var jg=Yf.html,kg=C.thatReturns(\"\");\nfunction lg(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Hd(a);b=Sa[b];for(var d=0;d<b.length;d++){var e=b[d];c.hasOwnProperty(e)&&c[e]||(\"topScroll\"===e?wd(\"topScroll\",\"scroll\",a):\"topFocus\"===e||\"topBlur\"===e?(wd(\"topFocus\",\"focus\",a),wd(\"topBlur\",\"blur\",a),c.topBlur=!0,c.topFocus=!0):\"topCancel\"===e?(yc(\"cancel\",!0)&&wd(\"topCancel\",\"cancel\",a),c.topCancel=!0):\"topClose\"===e?(yc(\"close\",!0)&&wd(\"topClose\",\"close\",a),c.topClose=!0):Dd.hasOwnProperty(e)&&U(e,Dd[e],a),c[e]=!0)}}\nvar mg={topAbort:\"abort\",topCanPlay:\"canplay\",topCanPlayThrough:\"canplaythrough\",topDurationChange:\"durationchange\",topEmptied:\"emptied\",topEncrypted:\"encrypted\",topEnded:\"ended\",topError:\"error\",topLoadedData:\"loadeddata\",topLoadedMetadata:\"loadedmetadata\",topLoadStart:\"loadstart\",topPause:\"pause\",topPlay:\"play\",topPlaying:\"playing\",topProgress:\"progress\",topRateChange:\"ratechange\",topSeeked:\"seeked\",topSeeking:\"seeking\",topStalled:\"stalled\",topSuspend:\"suspend\",topTimeUpdate:\"timeupdate\",topVolumeChange:\"volumechange\",\ntopWaiting:\"waiting\"};function ng(a,b,c,d){c=9===c.nodeType?c:c.ownerDocument;d===jg&&(d=Zf(a));d===jg?\"script\"===a?(a=c.createElement(\"div\"),a.innerHTML=\"\\x3cscript\\x3e\\x3c/script\\x3e\",a=a.removeChild(a.firstChild)):a=\"string\"===typeof b.is?c.createElement(a,{is:b.is}):c.createElement(a):a=c.createElementNS(d,a);return a}function og(a,b){return(9===b.nodeType?b:b.ownerDocument).createTextNode(a)}\nfunction pg(a,b,c,d){var e=ig(b,c);switch(b){case \"iframe\":case \"object\":U(\"topLoad\",\"load\",a);var f=c;break;case \"video\":case \"audio\":for(f in mg)mg.hasOwnProperty(f)&&U(f,mg[f],a);f=c;break;case \"source\":U(\"topError\",\"error\",a);f=c;break;case \"img\":case \"image\":U(\"topError\",\"error\",a);U(\"topLoad\",\"load\",a);f=c;break;case \"form\":U(\"topReset\",\"reset\",a);U(\"topSubmit\",\"submit\",a);f=c;break;case \"details\":U(\"topToggle\",\"toggle\",a);f=c;break;case \"input\":Mf(a,c);f=Lf(a,c);U(\"topInvalid\",\"invalid\",a);\nlg(d,\"onChange\");break;case \"option\":f=Rf(a,c);break;case \"select\":Tf(a,c);f=B({},c,{value:void 0});U(\"topInvalid\",\"invalid\",a);lg(d,\"onChange\");break;case \"textarea\":Vf(a,c);f=Uf(a,c);U(\"topInvalid\",\"invalid\",a);lg(d,\"onChange\");break;default:f=c}hg(b,f,kg);var g=f,h;for(h in g)if(g.hasOwnProperty(h)){var k=g[h];\"style\"===h?fg(a,k,kg):\"dangerouslySetInnerHTML\"===h?(k=k?k.__html:void 0,null!=k&&bg(a,k)):\"children\"===h?\"string\"===typeof k?(\"textarea\"!==b||\"\"!==k)&&cg(a,k):\"number\"===typeof k&&cg(a,\n\"\"+k):\"suppressContentEditableWarning\"!==h&&\"suppressHydrationWarning\"!==h&&\"autoFocus\"!==h&&(Ra.hasOwnProperty(h)?null!=k&&lg(d,h):e?Kf(a,h,k):null!=k&&If(a,h,k))}switch(b){case \"input\":Bc(a);Pf(a,c);break;case \"textarea\":Bc(a);Xf(a,c);break;case \"option\":null!=c.value&&a.setAttribute(\"value\",c.value);break;case \"select\":a.multiple=!!c.multiple;b=c.value;null!=b?Sf(a,!!c.multiple,b,!1):null!=c.defaultValue&&Sf(a,!!c.multiple,c.defaultValue,!0);break;default:\"function\"===typeof f.onClick&&(a.onclick=\nC)}}\nfunction sg(a,b,c,d,e){var f=null;switch(b){case \"input\":c=Lf(a,c);d=Lf(a,d);f=[];break;case \"option\":c=Rf(a,c);d=Rf(a,d);f=[];break;case \"select\":c=B({},c,{value:void 0});d=B({},d,{value:void 0});f=[];break;case \"textarea\":c=Uf(a,c);d=Uf(a,d);f=[];break;default:\"function\"!==typeof c.onClick&&\"function\"===typeof d.onClick&&(a.onclick=C)}hg(b,d,kg);var g,h;a=null;for(g in c)if(!d.hasOwnProperty(g)&&c.hasOwnProperty(g)&&null!=c[g])if(\"style\"===g)for(h in b=c[g],b)b.hasOwnProperty(h)&&(a||(a={}),a[h]=\n\"\");else\"dangerouslySetInnerHTML\"!==g&&\"children\"!==g&&\"suppressContentEditableWarning\"!==g&&\"suppressHydrationWarning\"!==g&&\"autoFocus\"!==g&&(Ra.hasOwnProperty(g)?f||(f=[]):(f=f||[]).push(g,null));for(g in d){var k=d[g];b=null!=c?c[g]:void 0;if(d.hasOwnProperty(g)&&k!==b&&(null!=k||null!=b))if(\"style\"===g)if(b){for(h in b)!b.hasOwnProperty(h)||k&&k.hasOwnProperty(h)||(a||(a={}),a[h]=\"\");for(h in k)k.hasOwnProperty(h)&&b[h]!==k[h]&&(a||(a={}),a[h]=k[h])}else a||(f||(f=[]),f.push(g,a)),a=k;else\"dangerouslySetInnerHTML\"===\ng?(k=k?k.__html:void 0,b=b?b.__html:void 0,null!=k&&b!==k&&(f=f||[]).push(g,\"\"+k)):\"children\"===g?b===k||\"string\"!==typeof k&&\"number\"!==typeof k||(f=f||[]).push(g,\"\"+k):\"suppressContentEditableWarning\"!==g&&\"suppressHydrationWarning\"!==g&&(Ra.hasOwnProperty(g)?(null!=k&&lg(e,g),f||b===k||(f=[])):(f=f||[]).push(g,k))}a&&(f=f||[]).push(\"style\",a);return f}\nfunction tg(a,b,c,d,e){\"input\"===c&&\"radio\"===e.type&&null!=e.name&&Nf(a,e);ig(c,d);d=ig(c,e);for(var f=0;f<b.length;f+=2){var g=b[f],h=b[f+1];\"style\"===g?fg(a,h,kg):\"dangerouslySetInnerHTML\"===g?bg(a,h):\"children\"===g?cg(a,h):d?null!=h?Kf(a,g,h):a.removeAttribute(g):null!=h?If(a,g,h):Jf(a,g)}switch(c){case \"input\":Of(a,e);break;case \"textarea\":Wf(a,e);break;case \"select\":a._wrapperState.initialValue=void 0,b=a._wrapperState.wasMultiple,a._wrapperState.wasMultiple=!!e.multiple,c=e.value,null!=c?Sf(a,\n!!e.multiple,c,!1):b!==!!e.multiple&&(null!=e.defaultValue?Sf(a,!!e.multiple,e.defaultValue,!0):Sf(a,!!e.multiple,e.multiple?[]:\"\",!1))}}\nfunction ug(a,b,c,d,e){switch(b){case \"iframe\":case \"object\":U(\"topLoad\",\"load\",a);break;case \"video\":case \"audio\":for(var f in mg)mg.hasOwnProperty(f)&&U(f,mg[f],a);break;case \"source\":U(\"topError\",\"error\",a);break;case \"img\":case \"image\":U(\"topError\",\"error\",a);U(\"topLoad\",\"load\",a);break;case \"form\":U(\"topReset\",\"reset\",a);U(\"topSubmit\",\"submit\",a);break;case \"details\":U(\"topToggle\",\"toggle\",a);break;case \"input\":Mf(a,c);U(\"topInvalid\",\"invalid\",a);lg(e,\"onChange\");break;case \"select\":Tf(a,c);\nU(\"topInvalid\",\"invalid\",a);lg(e,\"onChange\");break;case \"textarea\":Vf(a,c),U(\"topInvalid\",\"invalid\",a),lg(e,\"onChange\")}hg(b,c,kg);d=null;for(var g in c)c.hasOwnProperty(g)&&(f=c[g],\"children\"===g?\"string\"===typeof f?a.textContent!==f&&(d=[\"children\",f]):\"number\"===typeof f&&a.textContent!==\"\"+f&&(d=[\"children\",\"\"+f]):Ra.hasOwnProperty(g)&&null!=f&&lg(e,g));switch(b){case \"input\":Bc(a);Pf(a,c);break;case \"textarea\":Bc(a);Xf(a,c);break;case \"select\":case \"option\":break;default:\"function\"===typeof c.onClick&&\n(a.onclick=C)}return d}function vg(a,b){return a.nodeValue!==b}\nvar wg=Object.freeze({createElement:ng,createTextNode:og,setInitialProperties:pg,diffProperties:sg,updateProperties:tg,diffHydratedProperties:ug,diffHydratedText:vg,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(a,b,c){switch(b){case \"input\":Of(a,c);b=c.name;if(\"radio\"===c.type&&null!=b){for(c=a;c.parentNode;)c=\nc.parentNode;c=c.querySelectorAll(\"input[name\\x3d\"+JSON.stringify(\"\"+b)+'][type\\x3d\"radio\"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=rb(d);e?void 0:E(\"90\");Cc(d);Of(d,e)}}}break;case \"textarea\":Wf(a,c);break;case \"select\":b=c.value,null!=b&&Sf(a,!!c.multiple,b,!1)}}});nc.injectFiberControlledHostComponent(wg);var xg=null,Mg=null;function Ng(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||\" react-mount-point-unstable \"!==a.nodeValue))}\nfunction Og(a){a=a?9===a.nodeType?a.documentElement:a.firstChild:null;return!(!a||1!==a.nodeType||!a.hasAttribute(\"data-reactroot\"))}\nvar Z=of({getRootHostContext:function(a){var b=a.nodeType;switch(b){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:$f(null,\"\");break;default:b=8===b?a.parentNode:a,a=b.namespaceURI||null,b=b.tagName,a=$f(a,b)}return a},getChildHostContext:function(a,b){return $f(a,b)},getPublicInstance:function(a){return a},prepareForCommit:function(){xg=td;var a=da();if(Kd(a)){if(\"selectionStart\"in a)var b={start:a.selectionStart,end:a.selectionEnd};else a:{var c=window.getSelection&&window.getSelection();\nif(c&&0!==c.rangeCount){b=c.anchorNode;var d=c.anchorOffset,e=c.focusNode;c=c.focusOffset;try{b.nodeType,e.nodeType}catch(z){b=null;break a}var f=0,g=-1,h=-1,k=0,q=0,v=a,y=null;b:for(;;){for(var u;;){v!==b||0!==d&&3!==v.nodeType||(g=f+d);v!==e||0!==c&&3!==v.nodeType||(h=f+c);3===v.nodeType&&(f+=v.nodeValue.length);if(null===(u=v.firstChild))break;y=v;v=u}for(;;){if(v===a)break b;y===b&&++k===d&&(g=f);y===e&&++q===c&&(h=f);if(null!==(u=v.nextSibling))break;v=y;y=v.parentNode}v=u}b=-1===g||-1===h?null:\n{start:g,end:h}}else b=null}b=b||{start:0,end:0}}else b=null;Mg={focusedElem:a,selectionRange:b};ud(!1)},resetAfterCommit:function(){var a=Mg,b=da(),c=a.focusedElem,d=a.selectionRange;if(b!==c&&fa(document.documentElement,c)){if(Kd(c))if(b=d.start,a=d.end,void 0===a&&(a=b),\"selectionStart\"in c)c.selectionStart=b,c.selectionEnd=Math.min(a,c.value.length);else if(window.getSelection){b=window.getSelection();var e=c[Eb()].length;a=Math.min(d.start,e);d=void 0===d.end?a:Math.min(d.end,e);!b.extend&&a>\nd&&(e=d,d=a,a=e);e=Jd(c,a);var f=Jd(c,d);if(e&&f&&(1!==b.rangeCount||b.anchorNode!==e.node||b.anchorOffset!==e.offset||b.focusNode!==f.node||b.focusOffset!==f.offset)){var g=document.createRange();g.setStart(e.node,e.offset);b.removeAllRanges();a>d?(b.addRange(g),b.extend(f.node,f.offset)):(g.setEnd(f.node,f.offset),b.addRange(g))}}b=[];for(a=c;a=a.parentNode;)1===a.nodeType&&b.push({element:a,left:a.scrollLeft,top:a.scrollTop});ia(c);for(c=0;c<b.length;c++)a=b[c],a.element.scrollLeft=a.left,a.element.scrollTop=\na.top}Mg=null;ud(xg);xg=null},createInstance:function(a,b,c,d,e){a=ng(a,b,c,d);a[Q]=e;a[ob]=b;return a},appendInitialChild:function(a,b){a.appendChild(b)},finalizeInitialChildren:function(a,b,c,d){pg(a,b,c,d);a:{switch(b){case \"button\":case \"input\":case \"select\":case \"textarea\":a=!!c.autoFocus;break a}a=!1}return a},prepareUpdate:function(a,b,c,d,e){return sg(a,b,c,d,e)},shouldSetTextContent:function(a,b){return\"textarea\"===a||\"string\"===typeof b.children||\"number\"===typeof b.children||\"object\"===\ntypeof b.dangerouslySetInnerHTML&&null!==b.dangerouslySetInnerHTML&&\"string\"===typeof b.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(a,b){return!!b.hidden},createTextInstance:function(a,b,c,d){a=og(a,b);a[Q]=d;return a},now:rf,mutation:{commitMount:function(a){a.focus()},commitUpdate:function(a,b,c,d,e){a[ob]=e;tg(a,b,c,d,e)},resetTextContent:function(a){a.textContent=\"\"},commitTextUpdate:function(a,b,c){a.nodeValue=c},appendChild:function(a,b){a.appendChild(b)},appendChildToContainer:function(a,\nb){8===a.nodeType?a.parentNode.insertBefore(b,a):a.appendChild(b)},insertBefore:function(a,b,c){a.insertBefore(b,c)},insertInContainerBefore:function(a,b,c){8===a.nodeType?a.parentNode.insertBefore(b,c):a.insertBefore(b,c)},removeChild:function(a,b){a.removeChild(b)},removeChildFromContainer:function(a,b){8===a.nodeType?a.parentNode.removeChild(b):a.removeChild(b)}},hydration:{canHydrateInstance:function(a,b){return 1!==a.nodeType||b.toLowerCase()!==a.nodeName.toLowerCase()?null:a},canHydrateTextInstance:function(a,\nb){return\"\"===b||3!==a.nodeType?null:a},getNextHydratableSibling:function(a){for(a=a.nextSibling;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a},getFirstHydratableChild:function(a){for(a=a.firstChild;a&&1!==a.nodeType&&3!==a.nodeType;)a=a.nextSibling;return a},hydrateInstance:function(a,b,c,d,e,f){a[Q]=f;a[ob]=c;return ug(a,b,c,e,d)},hydrateTextInstance:function(a,b,c){a[Q]=c;return vg(a,b)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},\ndidNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:sf,cancelDeferredCallback:tf,useSyncScheduling:!0});rc=Z.batchedUpdates;\nfunction Pg(a,b,c,d,e){Ng(c)?void 0:E(\"200\");var f=c._reactRootContainer;if(f)Z.updateContainer(b,f,a,e);else{d=d||Og(c);if(!d)for(f=void 0;f=c.lastChild;)c.removeChild(f);var g=Z.createContainer(c,d);f=c._reactRootContainer=g;Z.unbatchedUpdates(function(){Z.updateContainer(b,g,a,e)})}return Z.getPublicRootInstance(f)}function Qg(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;Ng(b)?void 0:E(\"200\");return pf(a,b,null,c)}\nfunction Rg(a,b){this._reactRootContainer=Z.createContainer(a,b)}Rg.prototype.render=function(a,b){Z.updateContainer(a,this._reactRootContainer,null,b)};Rg.prototype.unmount=function(a){Z.updateContainer(null,this._reactRootContainer,null,a)};\nvar Sg={createPortal:Qg,findDOMNode:function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(b)return Z.findHostInstance(b);\"function\"===typeof a.render?E(\"188\"):E(\"213\",Object.keys(a))},hydrate:function(a,b,c){return Pg(null,a,b,!0,c)},render:function(a,b,c){return Pg(null,a,b,!1,c)},unstable_renderSubtreeIntoContainer:function(a,b,c,d){null==a||void 0===a._reactInternalFiber?E(\"38\"):void 0;return Pg(a,b,c,!1,d)},unmountComponentAtNode:function(a){Ng(a)?void 0:\nE(\"40\");return a._reactRootContainer?(Z.unbatchedUpdates(function(){Pg(null,null,a,!1,function(){a._reactRootContainer=null})}),!0):!1},unstable_createPortal:Qg,unstable_batchedUpdates:tc,unstable_deferredUpdates:Z.deferredUpdates,flushSync:Z.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:mb,EventPluginRegistry:Va,EventPropagators:Cb,ReactControlledComponent:qc,ReactDOMComponentTree:sb,ReactDOMEventListener:xd}};\nZ.injectIntoDevTools({findFiberByHostInstance:pb,bundleType:0,version:\"16.2.0\",rendererPackageName:\"react-dom\"});var Tg=Object.freeze({default:Sg}),Ug=Tg&&Sg||Tg;module.exports=Ug[\"default\"]?Ug[\"default\"]:Ug;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-dom/cjs/react-dom.production.min.js\n// module id = 45\n// module chunks = 0","/** @license React v16.2.0\n * react.production.min.js\n *\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';var m=require(\"object-assign\"),n=require(\"fbjs/lib/emptyObject\"),p=require(\"fbjs/lib/emptyFunction\"),q=\"function\"===typeof Symbol&&Symbol[\"for\"],r=q?Symbol[\"for\"](\"react.element\"):60103,t=q?Symbol[\"for\"](\"react.call\"):60104,u=q?Symbol[\"for\"](\"react.return\"):60105,v=q?Symbol[\"for\"](\"react.portal\"):60106,w=q?Symbol[\"for\"](\"react.fragment\"):60107,x=\"function\"===typeof Symbol&&Symbol.iterator;\nfunction y(a){for(var b=arguments.length-1,e=\"Minified React error #\"+a+\"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant\\x3d\"+a,c=0;c<b;c++)e+=\"\\x26args[]\\x3d\"+encodeURIComponent(arguments[c+1]);b=Error(e+\" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.\");b.name=\"Invariant Violation\";b.framesToPop=1;throw b;}\nvar z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function A(a,b,e){this.props=a;this.context=b;this.refs=n;this.updater=e||z}A.prototype.isReactComponent={};A.prototype.setState=function(a,b){\"object\"!==typeof a&&\"function\"!==typeof a&&null!=a?y(\"85\"):void 0;this.updater.enqueueSetState(this,a,b,\"setState\")};A.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this,a,\"forceUpdate\")};\nfunction B(a,b,e){this.props=a;this.context=b;this.refs=n;this.updater=e||z}function C(){}C.prototype=A.prototype;var D=B.prototype=new C;D.constructor=B;m(D,A.prototype);D.isPureReactComponent=!0;function E(a,b,e){this.props=a;this.context=b;this.refs=n;this.updater=e||z}var F=E.prototype=new C;F.constructor=E;m(F,A.prototype);F.unstable_isAsyncReactComponent=!0;F.render=function(){return this.props.children};var G={current:null},H=Object.prototype.hasOwnProperty,I={key:!0,ref:!0,__self:!0,__source:!0};\nfunction J(a,b,e){var c,d={},g=null,k=null;if(null!=b)for(c in void 0!==b.ref&&(k=b.ref),void 0!==b.key&&(g=\"\"+b.key),b)H.call(b,c)&&!I.hasOwnProperty(c)&&(d[c]=b[c]);var f=arguments.length-2;if(1===f)d.children=e;else if(1<f){for(var h=Array(f),l=0;l<f;l++)h[l]=arguments[l+2];d.children=h}if(a&&a.defaultProps)for(c in f=a.defaultProps,f)void 0===d[c]&&(d[c]=f[c]);return{$$typeof:r,type:a,key:g,ref:k,props:d,_owner:G.current}}function K(a){return\"object\"===typeof a&&null!==a&&a.$$typeof===r}\nfunction escape(a){var b={\"\\x3d\":\"\\x3d0\",\":\":\"\\x3d2\"};return\"$\"+(\"\"+a).replace(/[=:]/g,function(a){return b[a]})}var L=/\\/+/g,M=[];function N(a,b,e,c){if(M.length){var d=M.pop();d.result=a;d.keyPrefix=b;d.func=e;d.context=c;d.count=0;return d}return{result:a,keyPrefix:b,func:e,context:c,count:0}}function O(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>M.length&&M.push(a)}\nfunction P(a,b,e,c){var d=typeof a;if(\"undefined\"===d||\"boolean\"===d)a=null;var g=!1;if(null===a)g=!0;else switch(d){case \"string\":case \"number\":g=!0;break;case \"object\":switch(a.$$typeof){case r:case t:case u:case v:g=!0}}if(g)return e(c,a,\"\"===b?\".\"+Q(a,0):b),1;g=0;b=\"\"===b?\".\":b+\":\";if(Array.isArray(a))for(var k=0;k<a.length;k++){d=a[k];var f=b+Q(d,k);g+=P(d,f,e,c)}else if(null===a||\"undefined\"===typeof a?f=null:(f=x&&a[x]||a[\"@@iterator\"],f=\"function\"===typeof f?f:null),\"function\"===typeof f)for(a=\nf.call(a),k=0;!(d=a.next()).done;)d=d.value,f=b+Q(d,k++),g+=P(d,f,e,c);else\"object\"===d&&(e=\"\"+a,y(\"31\",\"[object Object]\"===e?\"object with keys {\"+Object.keys(a).join(\", \")+\"}\":e,\"\"));return g}function Q(a,b){return\"object\"===typeof a&&null!==a&&null!=a.key?escape(a.key):b.toString(36)}function R(a,b){a.func.call(a.context,b,a.count++)}\nfunction S(a,b,e){var c=a.result,d=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?T(a,c,e,p.thatReturnsArgument):null!=a&&(K(a)&&(b=d+(!a.key||b&&b.key===a.key?\"\":(\"\"+a.key).replace(L,\"$\\x26/\")+\"/\")+e,a={$$typeof:r,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}),c.push(a))}function T(a,b,e,c,d){var g=\"\";null!=e&&(g=(\"\"+e).replace(L,\"$\\x26/\")+\"/\");b=N(b,g,c,d);null==a||P(a,\"\",S,b);O(b)}\nvar U={Children:{map:function(a,b,e){if(null==a)return a;var c=[];T(a,c,null,b,e);return c},forEach:function(a,b,e){if(null==a)return a;b=N(null,null,b,e);null==a||P(a,\"\",R,b);O(b)},count:function(a){return null==a?0:P(a,\"\",p.thatReturnsNull,null)},toArray:function(a){var b=[];T(a,b,null,p.thatReturnsArgument);return b},only:function(a){K(a)?void 0:y(\"143\");return a}},Component:A,PureComponent:B,unstable_AsyncComponent:E,Fragment:w,createElement:J,cloneElement:function(a,b,e){var c=m({},a.props),\nd=a.key,g=a.ref,k=a._owner;if(null!=b){void 0!==b.ref&&(g=b.ref,k=G.current);void 0!==b.key&&(d=\"\"+b.key);if(a.type&&a.type.defaultProps)var f=a.type.defaultProps;for(h in b)H.call(b,h)&&!I.hasOwnProperty(h)&&(c[h]=void 0===b[h]&&void 0!==f?f[h]:b[h])}var h=arguments.length-2;if(1===h)c.children=e;else if(1<h){f=Array(h);for(var l=0;l<h;l++)f[l]=arguments[l+2];c.children=f}return{$$typeof:r,type:a.type,key:d,ref:g,props:c,_owner:k}},createFactory:function(a){var b=J.bind(null,a);b.type=a;return b},\nisValidElement:K,version:\"16.2.0\",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:G,assign:m}},V=Object.freeze({default:U}),W=V&&U||V;module.exports=W[\"default\"]?W[\"default\"]:W;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react/cjs/react.production.min.js\n// module id = 46\n// module chunks = 0","module.exports = function(THREE) {\n\tvar MOUSE = THREE.MOUSE\n\tif (!MOUSE)\n\t\tMOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\n\n\t/**\n\t * @author qiao / https://github.com/qiao\n\t * @author mrdoob / http://mrdoob.com\n\t * @author alteredq / http://alteredqualia.com/\n\t * @author WestLangley / http://github.com/WestLangley\n\t * @author erich666 / http://erichaines.com\n\t */\n\t/*global THREE, console */\n\n\tfunction OrbitConstraint ( object ) {\n\n\t\tthis.object = object;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\t// and where it pans with respect to.\n\t\tthis.target = new THREE.Vector3();\n\n\t\t// Limits to how far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// Limits to how far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.25;\n\n\t\t////////////\n\t\t// internals\n\n\t\tvar scope = this;\n\n\t\tvar EPS = 0.000001;\n\n\t\t// Current position in spherical coordinate system.\n\t\tvar theta;\n\t\tvar phi;\n\n\t\t// Pending changes\n\t\tvar phiDelta = 0;\n\t\tvar thetaDelta = 0;\n\t\tvar scale = 1;\n\t\tvar panOffset = new THREE.Vector3();\n\t\tvar zoomChanged = false;\n\n\t\t// API\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn theta;\n\n\t\t};\n\n\t\tthis.rotateLeft = function ( angle ) {\n\n\t\t\tthetaDelta -= angle;\n\n\t\t};\n\n\t\tthis.rotateUp = function ( angle ) {\n\n\t\t\tphiDelta -= angle;\n\n\t\t};\n\n\t\t// pass in distance in world space to move left\n\t\tthis.panLeft = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panLeft ( distance ) {\n\n\t\t\t\tvar te = this.object.matrix.elements;\n\n\t\t\t\t// get X column of matrix\n\t\t\t\tv.set( te[ 0 ], te[ 1 ], te[ 2 ] );\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// pass in distance in world space to move up\n\t\tthis.panUp = function() {\n\n\t\t\tvar v = new THREE.Vector3();\n\n\t\t\treturn function panUp ( distance ) {\n\n\t\t\t\tvar te = this.object.matrix.elements;\n\n\t\t\t\t// get Y column of matrix\n\t\t\t\tv.set( te[ 4 ], te[ 5 ], te[ 6 ] );\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// pass in x,y of change desired in pixel space,\n\t\t// right and down are positive\n\t\tthis.pan = function ( deltaX, deltaY, screenWidth, screenHeight ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\tvar offset = position.clone().sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we actually don't use screenWidth, since perspective camera is fixed to screen height\n\t\t\t\tscope.panLeft( 2 * deltaX * targetDistance / screenHeight );\n\t\t\t\tscope.panUp( 2 * deltaY * targetDistance / screenHeight );\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tscope.panLeft( deltaX * ( scope.object.right - scope.object.left ) / screenWidth );\n\t\t\t\tscope.panUp( deltaY * ( scope.object.top - scope.object.bottom ) / screenHeight );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic or perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.dollyIn = function ( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.dollyOut = function ( dollyScale ) {\n\n\t\t\tif ( scope.object instanceof THREE.PerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object instanceof THREE.OrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( this.minZoom, Math.min( this.maxZoom, this.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.update = function() {\n\n\t\t\tvar offset = new THREE.Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tvar quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\t\tvar quatInverse = quat.clone().inverse();\n\n\t\t\tvar lastPosition = new THREE.Vector3();\n\t\t\tvar lastQuaternion = new THREE.Quaternion();\n\n\t\t\treturn function () {\n\n\t\t\t\tvar position = this.object.position;\n\n\t\t\t\toffset.copy( position ).sub( this.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\n\t\t\t\ttheta = Math.atan2( offset.x, offset.z );\n\n\t\t\t\t// angle from y-axis\n\n\t\t\t\tphi = Math.atan2( Math.sqrt( offset.x * offset.x + offset.z * offset.z ), offset.y );\n\n\t\t\t\ttheta += thetaDelta;\n\t\t\t\tphi += phiDelta;\n\n\t\t\t\t// restrict theta to be between desired limits\n\t\t\t\ttheta = Math.max( this.minAzimuthAngle, Math.min( this.maxAzimuthAngle, theta ) );\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tphi = Math.max( this.minPolarAngle, Math.min( this.maxPolarAngle, phi ) );\n\n\t\t\t\t// restrict phi to be betwee EPS and PI-EPS\n\t\t\t\tphi = Math.max( EPS, Math.min( Math.PI - EPS, phi ) );\n\n\t\t\t\tvar radius = offset.length() * scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tradius = Math.max( this.minDistance, Math.min( this.maxDistance, radius ) );\n\n\t\t\t\t// move target to panned location\n\t\t\t\tthis.target.add( panOffset );\n\n\t\t\t\toffset.x = radius * Math.sin( phi ) * Math.sin( theta );\n\t\t\t\toffset.y = radius * Math.cos( phi );\n\t\t\t\toffset.z = radius * Math.sin( phi ) * Math.cos( theta );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( this.target ).add( offset );\n\n\t\t\t\tthis.object.lookAt( this.target );\n\n\t\t\t\tif ( this.enableDamping === true ) {\n\n\t\t\t\t\tthetaDelta *= ( 1 - this.dampingFactor );\n\t\t\t\t\tphiDelta *= ( 1 - this.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthetaDelta = 0;\n\t\t\t\t\tphiDelta = 0;\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\t lastPosition.distanceToSquared( this.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( this.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tlastPosition.copy( this.object.position );\n\t\t\t\t\tlastQuaternion.copy( this.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t};\n\n\n\t// This set of controls performs orbiting, dollying (zooming), and panning. It maintains\n\t// the \"up\" direction as +Y, unlike the TrackballControls. Touch on tablet and phones is\n\t// supported.\n\t//\n\t//    Orbit - left mouse / touch: one finger move\n\t//    Zoom - middle mouse, or mousewheel / touch: two finger spread or squish\n\t//    Pan - right mouse, or arrow keys / touch: three finter swipe\n\n\tfunction OrbitControls ( object, domElement ) {\n\n\t\tvar constraint = new OrbitConstraint( object );\n\n\t\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\n\n\t\t// API\n\n\t\tObject.defineProperty( this, 'constraint', {\n\n\t\t\tget: function() {\n\n\t\t\t\treturn constraint;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn constraint.getPolarAngle();\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn constraint.getAzimuthalAngle();\n\n\t\t};\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// center is old, deprecated; use \"target\" instead\n\t\tthis.center = this.target;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for\n\t\t// backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t\t// Set to false to disable use of the keys\n\t\tthis.enableKeys = true;\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { ORBIT: THREE.MOUSE.LEFT, ZOOM: THREE.MOUSE.MIDDLE, PAN: THREE.MOUSE.RIGHT };\n\n\t\t////////////\n\t\t// internals\n\n\t\tvar scope = this;\n\n\t\tvar rotateStart = new THREE.Vector2();\n\t\tvar rotateEnd = new THREE.Vector2();\n\t\tvar rotateDelta = new THREE.Vector2();\n\n\t\tvar panStart = new THREE.Vector2();\n\t\tvar panEnd = new THREE.Vector2();\n\t\tvar panDelta = new THREE.Vector2();\n\n\t\tvar dollyStart = new THREE.Vector2();\n\t\tvar dollyEnd = new THREE.Vector2();\n\t\tvar dollyDelta = new THREE.Vector2();\n\n\t\tvar STATE = { NONE : - 1, ROTATE : 0, DOLLY : 1, PAN : 2, TOUCH_ROTATE : 3, TOUCH_DOLLY : 4, TOUCH_PAN : 5 };\n\n\t\tvar state = STATE.NONE;\n\n\t\t// for reset\n\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// events\n\n\t\tvar changeEvent = { type: 'change' };\n\t\tvar startEvent = { type: 'start' };\n\t\tvar endEvent = { type: 'end' };\n\n\t\t// pass in x,y of change desired in pixel space,\n\t\t// right and down are positive\n\t\tfunction pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tconstraint.pan( deltaX, deltaY, element.clientWidth, element.clientHeight );\n\n\t\t}\n\n\t\tthis.update = function () {\n\n\t\t\tif ( this.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\tconstraint.rotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( constraint.update() === true ) {\n\n\t\t\t\tthis.dispatchEvent( changeEvent );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tstate = STATE.NONE;\n\n\t\t\tthis.target.copy( this.target0 );\n\t\t\tthis.object.position.copy( this.position0 );\n\t\t\tthis.object.zoom = this.zoom0;\n\n\t\t\tthis.object.updateProjectionMatrix();\n\t\t\tthis.dispatchEvent( changeEvent );\n\n\t\t\tthis.update();\n\n\t\t};\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tif ( event.button === scope.mouseButtons.ORBIT ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t\t} else if ( event.button === scope.mouseButtons.ZOOM ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t\t} else if ( event.button === scope.mouseButtons.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tdocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\t\tdocument.addEventListener( 'mouseup', onMouseUp, false );\n\t\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tif ( state === STATE.ROTATE ) {\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\n\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\t} else if ( state === STATE.DOLLY ) {\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\n\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\t} else if ( state === STATE.PAN ) {\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\tpanEnd.set( event.clientX, event.clientY );\n\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\t\tpanStart.copy( panEnd );\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) scope.update();\n\n\t\t}\n\n\t\tfunction onMouseUp( /* event */ ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\t\t\tscope.dispatchEvent( endEvent );\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar delta = 0;\n\n\t\t\tif ( event.wheelDelta !== undefined ) {\n\n\t\t\t\t// WebKit / Opera / Explorer 9\n\n\t\t\t\tdelta = event.wheelDelta;\n\n\t\t\t} else if ( event.detail !== undefined ) {\n\n\t\t\t\t// Firefox\n\n\t\t\t\tdelta = - event.detail;\n\n\t\t\t}\n\n\t\t\tif ( delta > 0 ) {\n\n\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\n\t\t\t} else if ( delta < 0 ) {\n\n\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\t\t\tscope.dispatchEvent( startEvent );\n\t\t\tscope.dispatchEvent( endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\t\tswitch ( event.keyCode ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction touchstart( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1:\t// one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\t// two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\tstate = STATE.TOUCH_DOLLY;\n\n\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\t\tdollyStart.set( 0, distance );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) scope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t\tfunction touchmove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tvar element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1: // one-fingered touch: rotate\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_ROTATE ) return;\n\n\t\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart );\n\n\t\t\t\t\t// rotating across whole screen goes 360 degrees around\n\t\t\t\t\tconstraint.rotateLeft( 2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed );\n\t\t\t\t\t// rotating up and down along whole screen attempts to go 360, but limited to 180\n\t\t\t\t\tconstraint.rotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed );\n\n\t\t\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // two-fingered touch: dolly\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_DOLLY ) return;\n\n\t\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\t\t\t\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\t\t\tdollyEnd.set( 0, distance );\n\t\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\t\t\tconstraint.dollyOut( getZoomScale() );\n\n\t\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\t\t\tconstraint.dollyIn( getZoomScale() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 3: // three-fingered touch: pan\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\tif ( state !== STATE.TOUCH_PAN ) return;\n\n\t\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\t\t\t\t\tpanDelta.subVectors( panEnd, panStart );\n\n\t\t\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\t\t\tpanStart.copy( panEnd );\n\n\t\t\t\t\tscope.update();\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction touchend( /* event */ ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tscope.dispatchEvent( endEvent );\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction contextmenu( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\tthis.dispose = function() {\n\n\t\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\n\t\t\tthis.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\t\tthis.domElement.removeEventListener( 'mousewheel', onMouseWheel, false );\n\t\t\tthis.domElement.removeEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n\t\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\n\t\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\n\t\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\n\n\t\t\tdocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\t\tdocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\twindow.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t}\n\n\t\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\n\n\t\tthis.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\t\tthis.domElement.addEventListener( 'mousewheel', onMouseWheel, false );\n\t\tthis.domElement.addEventListener( 'MozMousePixelScroll', onMouseWheel, false ); // firefox\n\n\t\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\n\t\tthis.domElement.addEventListener( 'touchend', touchend, false );\n\t\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\n\n\t\twindow.addEventListener( 'keydown', onKeyDown, false );\n\n\t\t// force an update at start\n\t\tthis.update();\n\n\t};\n\n\tOrbitControls.prototype = Object.create( THREE.EventDispatcher.prototype );\n\tOrbitControls.prototype.constructor = OrbitControls;\n\n\tObject.defineProperties( OrbitControls.prototype, {\n\n\t\tobject: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.object;\n\n\t\t\t}\n\n\t\t},\n\n\t\ttarget: {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.target;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: target is now immutable. Use target.set() instead.' );\n\t\t\t\tthis.constraint.target.copy( value );\n\n\t\t\t}\n\n\t\t},\n\n\t\tminDistance : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minDistance;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minDistance = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxDistance : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxDistance;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxDistance = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tminZoom : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minZoom = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxZoom : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxZoom = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tminPolarAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minPolarAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minPolarAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxPolarAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxPolarAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxPolarAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tminAzimuthAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.minAzimuthAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.minAzimuthAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tmaxAzimuthAngle : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.maxAzimuthAngle;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.maxAzimuthAngle = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tenableDamping : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.enableDamping;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.enableDamping = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdampingFactor : {\n\n\t\t\tget: function () {\n\n\t\t\t\treturn this.constraint.dampingFactor;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tthis.constraint.dampingFactor = value;\n\n\t\t\t}\n\n\t\t},\n\n\t\t// backward compatibility\n\n\t\tnoZoom: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\treturn ! this.enableZoom;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.' );\n\t\t\t\tthis.enableZoom = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoRotate: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\treturn ! this.enableRotate;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.' );\n\t\t\t\tthis.enableRotate = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoPan: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\treturn ! this.enablePan;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.' );\n\t\t\t\tthis.enablePan = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tnoKeys: {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\treturn ! this.enableKeys;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.' );\n\t\t\t\tthis.enableKeys = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tstaticMoving : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\treturn ! this.constraint.enableDamping;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.' );\n\t\t\t\tthis.constraint.enableDamping = ! value;\n\n\t\t\t}\n\n\t\t},\n\n\t\tdynamicDampingFactor : {\n\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\treturn this.constraint.dampingFactor;\n\n\t\t\t},\n\n\t\t\tset: function ( value ) {\n\n\t\t\t\tconsole.warn( 'THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.' );\n\t\t\t\tthis.constraint.dampingFactor = value;\n\n\t\t\t}\n\n\t\t}\n\n\t} );\n\n\treturn OrbitControls;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/three-orbit-controls/index.js\n// module id = 47\n// module chunks = 0","var self = self || {};// File:src/Three.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nvar THREE = { REVISION: '72' };\r\n\r\n//\r\n\r\nif ( typeof define === 'function' && define.amd ) {\r\n\r\n\t\tdefine( 'three', THREE );\r\n\r\n} else if ( 'undefined' !== typeof exports && 'undefined' !== typeof module ) {\r\n\r\n\t\tmodule.exports = THREE;\r\n\r\n}\r\n\r\n\r\n// polyfills\r\n\r\nif ( self.requestAnimationFrame === undefined || self.cancelAnimationFrame === undefined ) {\r\n\r\n\t// Missing in Android stock browser.\r\n\r\n\t( function () {\r\n\r\n\t\tvar lastTime = 0;\r\n\t\tvar vendors = [ 'ms', 'moz', 'webkit', 'o' ];\r\n\r\n\t\tfor ( var x = 0; x < vendors.length && ! self.requestAnimationFrame; ++ x ) {\r\n\r\n\t\t\tself.requestAnimationFrame = self[ vendors[ x ] + 'RequestAnimationFrame' ];\r\n\t\t\tself.cancelAnimationFrame = self[ vendors[ x ] + 'CancelAnimationFrame' ] || self[ vendors[ x ] + 'CancelRequestAnimationFrame' ];\r\n\r\n\t\t}\r\n\r\n\t\tif ( self.requestAnimationFrame === undefined && self.setTimeout !== undefined ) {\r\n\r\n\t\t\tself.requestAnimationFrame = function ( callback ) {\r\n\r\n\t\t\t\tvar currTime = Date.now(), timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) );\r\n\t\t\t\tvar id = self.setTimeout( function () {\r\n\r\n\t\t\t\t\tcallback( currTime + timeToCall );\r\n\r\n\t\t\t\t}, timeToCall );\r\n\t\t\t\tlastTime = currTime + timeToCall;\r\n\t\t\t\treturn id;\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tif ( self.cancelAnimationFrame === undefined && self.clearTimeout !== undefined ) {\r\n\r\n\t\t\tself.cancelAnimationFrame = function ( id ) {\r\n\r\n\t\t\t\tself.clearTimeout( id );\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t}() );\r\n\r\n}\r\n\r\nif ( Math.sign === undefined ) {\r\n\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\r\n\r\n\tMath.sign = function ( x ) {\r\n\r\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\r\n\r\n\t};\r\n\r\n}\r\n\r\nif ( Function.prototype.name === undefined && Object.defineProperty !== undefined ) {\r\n\r\n\t// Missing in IE9-11.\r\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\r\n\r\n\tObject.defineProperty( Function.prototype, 'name', {\r\n\r\n\t\tget: function () {\r\n\r\n\t\t\treturn this.toString().match( /^\\s*function\\s*(\\S*)\\s*\\(/ )[ 1 ];\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\r\n}\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent.button\r\n\r\nTHREE.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 };\r\n\r\n// GL STATE CONSTANTS\r\n\r\nTHREE.CullFaceNone = 0;\r\nTHREE.CullFaceBack = 1;\r\nTHREE.CullFaceFront = 2;\r\nTHREE.CullFaceFrontBack = 3;\r\n\r\nTHREE.FrontFaceDirectionCW = 0;\r\nTHREE.FrontFaceDirectionCCW = 1;\r\n\r\n// SHADOWING TYPES\r\n\r\nTHREE.BasicShadowMap = 0;\r\nTHREE.PCFShadowMap = 1;\r\nTHREE.PCFSoftShadowMap = 2;\r\n\r\n// MATERIAL CONSTANTS\r\n\r\n// side\r\n\r\nTHREE.FrontSide = 0;\r\nTHREE.BackSide = 1;\r\nTHREE.DoubleSide = 2;\r\n\r\n// shading\r\n\r\nTHREE.FlatShading = 1;\r\nTHREE.SmoothShading = 2;\r\n\r\n// colors\r\n\r\nTHREE.NoColors = 0;\r\nTHREE.FaceColors = 1;\r\nTHREE.VertexColors = 2;\r\n\r\n// blending modes\r\n\r\nTHREE.NoBlending = 0;\r\nTHREE.NormalBlending = 1;\r\nTHREE.AdditiveBlending = 2;\r\nTHREE.SubtractiveBlending = 3;\r\nTHREE.MultiplyBlending = 4;\r\nTHREE.CustomBlending = 5;\r\n\r\n// custom blending equations\r\n// (numbers start from 100 not to clash with other\r\n// mappings to OpenGL constants defined in Texture.js)\r\n\r\nTHREE.AddEquation = 100;\r\nTHREE.SubtractEquation = 101;\r\nTHREE.ReverseSubtractEquation = 102;\r\nTHREE.MinEquation = 103;\r\nTHREE.MaxEquation = 104;\r\n\r\n// custom blending destination factors\r\n\r\nTHREE.ZeroFactor = 200;\r\nTHREE.OneFactor = 201;\r\nTHREE.SrcColorFactor = 202;\r\nTHREE.OneMinusSrcColorFactor = 203;\r\nTHREE.SrcAlphaFactor = 204;\r\nTHREE.OneMinusSrcAlphaFactor = 205;\r\nTHREE.DstAlphaFactor = 206;\r\nTHREE.OneMinusDstAlphaFactor = 207;\r\n\r\n// custom blending source factors\r\n\r\n//THREE.ZeroFactor = 200;\r\n//THREE.OneFactor = 201;\r\n//THREE.SrcAlphaFactor = 204;\r\n//THREE.OneMinusSrcAlphaFactor = 205;\r\n//THREE.DstAlphaFactor = 206;\r\n//THREE.OneMinusDstAlphaFactor = 207;\r\nTHREE.DstColorFactor = 208;\r\nTHREE.OneMinusDstColorFactor = 209;\r\nTHREE.SrcAlphaSaturateFactor = 210;\r\n\r\n// depth modes\r\n\r\nTHREE.NeverDepth = 0;\r\nTHREE.AlwaysDepth = 1;\r\nTHREE.LessDepth = 2;\r\nTHREE.LessEqualDepth = 3;\r\nTHREE.EqualDepth = 4;\r\nTHREE.GreaterEqualDepth = 5;\r\nTHREE.GreaterDepth = 6;\r\nTHREE.NotEqualDepth = 7;\r\n\r\n\r\n// TEXTURE CONSTANTS\r\n\r\nTHREE.MultiplyOperation = 0;\r\nTHREE.MixOperation = 1;\r\nTHREE.AddOperation = 2;\r\n\r\n// Mapping modes\r\n\r\nTHREE.UVMapping = 300;\r\n\r\nTHREE.CubeReflectionMapping = 301;\r\nTHREE.CubeRefractionMapping = 302;\r\n\r\nTHREE.EquirectangularReflectionMapping = 303;\r\nTHREE.EquirectangularRefractionMapping = 304;\r\n\r\nTHREE.SphericalReflectionMapping = 305;\r\n\r\n// Wrapping modes\r\n\r\nTHREE.RepeatWrapping = 1000;\r\nTHREE.ClampToEdgeWrapping = 1001;\r\nTHREE.MirroredRepeatWrapping = 1002;\r\n\r\n// Filters\r\n\r\nTHREE.NearestFilter = 1003;\r\nTHREE.NearestMipMapNearestFilter = 1004;\r\nTHREE.NearestMipMapLinearFilter = 1005;\r\nTHREE.LinearFilter = 1006;\r\nTHREE.LinearMipMapNearestFilter = 1007;\r\nTHREE.LinearMipMapLinearFilter = 1008;\r\n\r\n// Data types\r\n\r\nTHREE.UnsignedByteType = 1009;\r\nTHREE.ByteType = 1010;\r\nTHREE.ShortType = 1011;\r\nTHREE.UnsignedShortType = 1012;\r\nTHREE.IntType = 1013;\r\nTHREE.UnsignedIntType = 1014;\r\nTHREE.FloatType = 1015;\r\nTHREE.HalfFloatType = 1025;\r\n\r\n// Pixel types\r\n\r\n//THREE.UnsignedByteType = 1009;\r\nTHREE.UnsignedShort4444Type = 1016;\r\nTHREE.UnsignedShort5551Type = 1017;\r\nTHREE.UnsignedShort565Type = 1018;\r\n\r\n// Pixel formats\r\n\r\nTHREE.AlphaFormat = 1019;\r\nTHREE.RGBFormat = 1020;\r\nTHREE.RGBAFormat = 1021;\r\nTHREE.LuminanceFormat = 1022;\r\nTHREE.LuminanceAlphaFormat = 1023;\r\n// THREE.RGBEFormat handled as THREE.RGBAFormat in shaders\r\nTHREE.RGBEFormat = THREE.RGBAFormat; //1024;\r\n\r\n// DDS / ST3C Compressed texture formats\r\n\r\nTHREE.RGB_S3TC_DXT1_Format = 2001;\r\nTHREE.RGBA_S3TC_DXT1_Format = 2002;\r\nTHREE.RGBA_S3TC_DXT3_Format = 2003;\r\nTHREE.RGBA_S3TC_DXT5_Format = 2004;\r\n\r\n\r\n// PVRTC compressed texture formats\r\n\r\nTHREE.RGB_PVRTC_4BPPV1_Format = 2100;\r\nTHREE.RGB_PVRTC_2BPPV1_Format = 2101;\r\nTHREE.RGBA_PVRTC_4BPPV1_Format = 2102;\r\nTHREE.RGBA_PVRTC_2BPPV1_Format = 2103;\r\n\r\n\r\n// DEPRECATED\r\n\r\nTHREE.Projector = function () {\r\n\r\n\tconsole.error( 'THREE.Projector has been moved to /examples/js/renderers/Projector.js.' );\r\n\r\n\tthis.projectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .projectVector() is now vector.project().' );\r\n\t\tvector.project( camera );\r\n\r\n\t};\r\n\r\n\tthis.unprojectVector = function ( vector, camera ) {\r\n\r\n\t\tconsole.warn( 'THREE.Projector: .unprojectVector() is now vector.unproject().' );\r\n\t\tvector.unproject( camera );\r\n\r\n\t};\r\n\r\n\tthis.pickingRay = function ( vector, camera ) {\r\n\r\n\t\tconsole.error( 'THREE.Projector: .pickingRay() is now raycaster.setFromCamera().' );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CanvasRenderer = function () {\r\n\r\n\tconsole.error( 'THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js' );\r\n\r\n\tthis.domElement = document.createElement( 'canvas' );\r\n\tthis.clear = function () {};\r\n\tthis.render = function () {};\r\n\tthis.setClearColor = function () {};\r\n\tthis.setSize = function () {};\r\n\r\n};\r\n\r\n// File:src/math/Color.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Color = function ( color ) {\r\n\r\n\tif ( arguments.length === 3 ) {\r\n\r\n\t\treturn this.setRGB( arguments[ 0 ], arguments[ 1 ], arguments[ 2 ] );\r\n\r\n\t}\r\n\r\n\treturn this.set( color );\r\n\r\n};\r\n\r\nTHREE.Color.prototype = {\r\n\r\n\tconstructor: THREE.Color,\r\n\r\n\tr: 1, g: 1, b: 1,\r\n\r\n\tset: function ( value ) {\r\n\r\n\t\tif ( value instanceof THREE.Color ) {\r\n\r\n\t\t\tthis.copy( value );\r\n\r\n\t\t} else if ( typeof value === 'number' ) {\r\n\r\n\t\t\tthis.setHex( value );\r\n\r\n\t\t} else if ( typeof value === 'string' ) {\r\n\r\n\t\t\tthis.setStyle( value );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHex: function ( hex ) {\r\n\r\n\t\thex = Math.floor( hex );\r\n\r\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\r\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\r\n\t\tthis.b = ( hex & 255 ) / 255;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRGB: function ( r, g, b ) {\r\n\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetHSL: function () {\r\n\r\n\t\tfunction hue2rgb ( p, q, t ) {\r\n\r\n\t\t\tif ( t < 0 ) t += 1;\r\n\t\t\tif ( t > 1 ) t -= 1;\r\n\t\t\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\r\n\t\t\tif ( t < 1 / 2 ) return q;\r\n\t\t\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\r\n\t\t\treturn p;\r\n\r\n\t\t}\r\n\r\n\t\treturn function ( h, s, l ) {\r\n\r\n\t\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\t\t\th = THREE.Math.euclideanModulo( h, 1 );\r\n\t\t\ts = THREE.Math.clamp( s, 0, 1 );\r\n\t\t\tl = THREE.Math.clamp( l, 0, 1 );\r\n\r\n\t\t\tif ( s === 0 ) {\r\n\r\n\t\t\t\tthis.r = this.g = this.b = l;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\r\n\t\t\t\tvar q = ( 2 * l ) - p;\r\n\r\n\t\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\r\n\t\t\t\tthis.g = hue2rgb( q, p, h );\r\n\t\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetStyle: function ( style ) {\r\n\r\n\t\tvar parseAlpha = function ( strAlpha ) {\r\n\r\n\t\t\tvar alpha = parseFloat( strAlpha );\r\n\r\n\t\t\tif ( alpha < 1 ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of color ' + style + ' will be ignored.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn alpha;\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar m;\r\n\r\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\r\n\r\n\t\t\t// rgb / hsl\r\n\r\n\t\t\tvar color;\r\n\t\t\tvar name = m[ 1 ];\r\n\t\t\tvar components = m[ 2 ];\r\n\r\n\t\t\tswitch ( name ) {\r\n\r\n\t\t\t\tcase 'rgb':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(255,0,0)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgb(100%,0%,0%)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'rgba':\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgba(255,0,0,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\r\n\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// rgba(100%,0%,0%,0.5)\r\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\r\n\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\r\n\t\t\t\t\t\treturn this;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsl':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsl(120,50%,50%)\r\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] );\r\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'hsla':\r\n\r\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*([0-9]*\\.?[0-9]+)\\s*$/.exec( components ) ) {\r\n\r\n\t\t\t\t\t\t// hsla(120,50%,50%,0.5)\r\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] );\r\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\r\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\r\n\t\t\t\t\t\tparseAlpha( color[ 4 ] );\r\n\r\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\r\n\r\n\t\t\t// hex color\r\n\r\n\t\t\tvar hex = m[ 1 ];\r\n\t\t\tvar size = hex.length;\r\n\r\n\t\t\tif ( size === 3 ) {\r\n\r\n\t\t\t\t// #ff0\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t} else if ( size === 6 ) {\r\n\r\n\t\t\t\t// #ff0000\r\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\r\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\r\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\r\n\r\n\t\t\t\treturn this;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( style && style.length > 0 ) {\r\n\r\n\t\t\t// color keywords\r\n\t\t\tvar hex = THREE.ColorKeywords[ style ];\r\n\r\n\t\t\tif ( hex !== undefined ) {\r\n\r\n\t\t\t\t// red\r\n\t\t\t\tthis.setHex( hex );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// unknown color\r\n\t\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.r, this.g, this.b );\r\n\r\n\t},\r\n\r\n\tcopy: function ( color ) {\r\n\r\n\t\tthis.r = color.r;\r\n\t\tthis.g = color.g;\r\n\t\tthis.b = color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, gammaFactor );\r\n\t\tthis.g = Math.pow( color.g, gammaFactor );\r\n\t\tthis.b = Math.pow( color.b, gammaFactor );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\r\n\r\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\r\n\r\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\r\n\r\n\t\tthis.r = Math.pow( color.r, safeInverse );\r\n\t\tthis.g = Math.pow( color.g, safeInverse );\r\n\t\tthis.b = Math.pow( color.b, safeInverse );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertGammaToLinear: function () {\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tthis.r = r * r;\r\n\t\tthis.g = g * g;\r\n\t\tthis.b = b * b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconvertLinearToGamma: function () {\r\n\r\n\t\tthis.r = Math.sqrt( this.r );\r\n\t\tthis.g = Math.sqrt( this.g );\r\n\t\tthis.b = Math.sqrt( this.b );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetHex: function () {\r\n\r\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\r\n\r\n\t},\r\n\r\n\tgetHexString: function () {\r\n\r\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\r\n\r\n\t},\r\n\r\n\tgetHSL: function ( optionalTarget ) {\r\n\r\n\t\t// h,s,l ranges are in 0.0 - 1.0\r\n\r\n\t\tvar hsl = optionalTarget || { h: 0, s: 0, l: 0 };\r\n\r\n\t\tvar r = this.r, g = this.g, b = this.b;\r\n\r\n\t\tvar max = Math.max( r, g, b );\r\n\t\tvar min = Math.min( r, g, b );\r\n\r\n\t\tvar hue, saturation;\r\n\t\tvar lightness = ( min + max ) / 2.0;\r\n\r\n\t\tif ( min === max ) {\r\n\r\n\t\t\thue = 0;\r\n\t\t\tsaturation = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar delta = max - min;\r\n\r\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\r\n\r\n\t\t\tswitch ( max ) {\r\n\r\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\r\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\r\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thue /= 6;\r\n\r\n\t\t}\r\n\r\n\t\thsl.h = hue;\r\n\t\thsl.s = saturation;\r\n\t\thsl.l = lightness;\r\n\r\n\t\treturn hsl;\r\n\r\n\t},\r\n\r\n\tgetStyle: function () {\r\n\r\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\r\n\r\n\t},\r\n\r\n\toffsetHSL: function ( h, s, l ) {\r\n\r\n\t\tvar hsl = this.getHSL();\r\n\r\n\t\thsl.h += h; hsl.s += s; hsl.l += l;\r\n\r\n\t\tthis.setHSL( hsl.h, hsl.s, hsl.l );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( color ) {\r\n\r\n\t\tthis.r += color.r;\r\n\t\tthis.g += color.g;\r\n\t\tthis.b += color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddColors: function ( color1, color2 ) {\r\n\r\n\t\tthis.r = color1.r + color2.r;\r\n\t\tthis.g = color1.g + color2.g;\r\n\t\tthis.b = color1.b + color2.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.r += s;\r\n\t\tthis.g += s;\r\n\t\tthis.b += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( color ) {\r\n\r\n\t\tthis.r *= color.r;\r\n\t\tthis.g *= color.g;\r\n\t\tthis.b *= color.b;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( color, alpha ) {\r\n\r\n\t\tthis.r += ( color.r - this.r ) * alpha;\r\n\t\tthis.g += ( color.g - this.g ) * alpha;\r\n\t\tthis.b += ( color.b - this.b ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( c ) {\r\n\r\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.r = array[ 0 ];\r\n\t\tthis.g = array[ 1 ];\r\n\t\tthis.b = array[ 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.r;\r\n\t\tarray[ offset + 1 ] = this.g;\r\n\t\tarray[ offset + 2 ] = this.b;\r\n\r\n\t\treturn array;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ColorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\r\n'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\r\n'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\r\n'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\r\n'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\r\n'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\r\n'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\r\n'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\r\n'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\r\n'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\r\n'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\r\n'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\r\n'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\r\n'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\r\n'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\r\n'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\r\n'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\r\n'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\r\n'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\r\n'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\r\n'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\r\n'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\r\n'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\r\n'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\r\n\r\n// File:src/math/Quaternion.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Quaternion = function ( x, y, z, w ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Quaternion.prototype = {\r\n\r\n\tconstructor: THREE.Quaternion,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget w () {\r\n\r\n\t\treturn this._w;\r\n\r\n\t},\r\n\r\n\tset w ( value ) {\r\n\r\n\t\tthis._w = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._w = w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( quaternion ) {\r\n\r\n\t\tthis._x = quaternion.x;\r\n\t\tthis._y = quaternion.y;\r\n\t\tthis._z = quaternion.z;\r\n\t\tthis._w = quaternion.w;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromEuler: function ( euler, update ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\r\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\r\n\t\t//\tcontent/SpinCalc.m\r\n\r\n\t\tvar c1 = Math.cos( euler._x / 2 );\r\n\t\tvar c2 = Math.cos( euler._y / 2 );\r\n\t\tvar c3 = Math.cos( euler._z / 2 );\r\n\t\tvar s1 = Math.sin( euler._x / 2 );\r\n\t\tvar s2 = Math.sin( euler._y / 2 );\r\n\t\tvar s3 = Math.sin( euler._z / 2 );\r\n\r\n\t\tvar order = euler.order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\r\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\r\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\r\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\r\n\r\n\t\t}\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\r\n\r\n\t\tthis._x = axis.x * s;\r\n\t\tthis._y = axis.y * s;\r\n\t\tthis._z = axis.z * s;\r\n\t\tthis._w = Math.cos( halfAngle );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\r\n\r\n\t\t\ttrace = m11 + m22 + m33,\r\n\t\t\ts;\r\n\r\n\t\tif ( trace > 0 ) {\r\n\r\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\r\n\r\n\t\t\tthis._w = 0.25 / s;\r\n\t\t\tthis._x = ( m32 - m23 ) * s;\r\n\t\t\tthis._y = ( m13 - m31 ) * s;\r\n\t\t\tthis._z = ( m21 - m12 ) * s;\r\n\r\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\r\n\r\n\t\t\tthis._w = ( m32 - m23 ) / s;\r\n\t\t\tthis._x = 0.25 * s;\r\n\t\t\tthis._y = ( m12 + m21 ) / s;\r\n\t\t\tthis._z = ( m13 + m31 ) / s;\r\n\r\n\t\t} else if ( m22 > m33 ) {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\r\n\r\n\t\t\tthis._w = ( m13 - m31 ) / s;\r\n\t\t\tthis._x = ( m12 + m21 ) / s;\r\n\t\t\tthis._y = 0.25 * s;\r\n\t\t\tthis._z = ( m23 + m32 ) / s;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\r\n\r\n\t\t\tthis._w = ( m21 - m12 ) / s;\r\n\t\t\tthis._x = ( m13 + m31 ) / s;\r\n\t\t\tthis._y = ( m23 + m32 ) / s;\r\n\t\t\tthis._z = 0.25 * s;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromUnitVectors: function () {\r\n\r\n\t\t// http://lolengine.net/blog/2014/02/24/quaternion-from-two-vectors-final\r\n\r\n\t\t// assumes direction vectors vFrom and vTo are normalized\r\n\r\n\t\tvar v1, r;\r\n\r\n\t\tvar EPS = 0.000001;\r\n\r\n\t\treturn function ( vFrom, vTo ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tr = vFrom.dot( vTo ) + 1;\r\n\r\n\t\t\tif ( r < EPS ) {\r\n\r\n\t\t\t\tr = 0;\r\n\r\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\r\n\r\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tv1.crossVectors( vFrom, vTo );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._x = v1.x;\r\n\t\t\tthis._y = v1.y;\r\n\t\t\tthis._z = v1.z;\r\n\t\t\tthis._w = r;\r\n\r\n\t\t\tthis.normalize();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tinverse: function () {\r\n\r\n\t\tthis.conjugate().normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tconjugate: function () {\r\n\r\n\t\tthis._x *= - 1;\r\n\t\tthis._y *= - 1;\r\n\t\tthis._z *= - 1;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tvar l = this.length();\r\n\r\n\t\tif ( l === 0 ) {\r\n\r\n\t\t\tthis._x = 0;\r\n\t\t\tthis._y = 0;\r\n\t\t\tthis._z = 0;\r\n\t\t\tthis._w = 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tl = 1 / l;\r\n\r\n\t\t\tthis._x = this._x * l;\r\n\t\t\tthis._y = this._y * l;\r\n\t\t\tthis._z = this._z * l;\r\n\t\t\tthis._w = this._w * l;\r\n\r\n\t\t}\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( q, p ) {\r\n\r\n\t\tif ( p !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\r\n\t\t\treturn this.multiplyQuaternions( q, p );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyQuaternions( this, q );\r\n\r\n\t},\r\n\r\n\tmultiplyQuaternions: function ( a, b ) {\r\n\r\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\r\n\r\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\r\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\r\n\r\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\r\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\r\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\r\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\r\n\t\treturn vector.applyQuaternion( this );\r\n\r\n\t},\r\n\r\n\tslerp: function ( qb, t ) {\r\n\r\n\t\tif ( t === 0 ) return this;\r\n\t\tif ( t === 1 ) return this.copy( qb );\r\n\r\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\r\n\r\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\r\n\r\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\r\n\r\n\t\tif ( cosHalfTheta < 0 ) {\r\n\r\n\t\t\tthis._w = - qb._w;\r\n\t\t\tthis._x = - qb._x;\r\n\t\t\tthis._y = - qb._y;\r\n\t\t\tthis._z = - qb._z;\r\n\r\n\t\t\tcosHalfTheta = - cosHalfTheta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.copy( qb );\r\n\r\n\t\t}\r\n\r\n\t\tif ( cosHalfTheta >= 1.0 ) {\r\n\r\n\t\t\tthis._w = w;\r\n\t\t\tthis._x = x;\r\n\t\t\tthis._y = y;\r\n\t\t\tthis._z = z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar halfTheta = Math.acos( cosHalfTheta );\r\n\t\tvar sinHalfTheta = Math.sqrt( 1.0 - cosHalfTheta * cosHalfTheta );\r\n\r\n\t\tif ( Math.abs( sinHalfTheta ) < 0.001 ) {\r\n\r\n\t\t\tthis._w = 0.5 * ( w + this._w );\r\n\t\t\tthis._x = 0.5 * ( x + this._x );\r\n\t\t\tthis._y = 0.5 * ( y + this._y );\r\n\t\t\tthis._z = 0.5 * ( z + this._z );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\r\n\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\r\n\r\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\r\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\r\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\r\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( quaternion ) {\r\n\r\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis._x = array[ offset ];\r\n\t\tthis._y = array[ offset + 1 ];\r\n\t\tthis._z = array[ offset + 2 ];\r\n\t\tthis._w = array[ offset + 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\nTHREE.Quaternion.slerp = function ( qa, qb, qm, t ) {\r\n\r\n\treturn qm.copy( qa ).slerp( qb, t );\r\n\r\n};\r\n\r\n// File:src/math/Vector2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author egraether / http://egraether.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.Vector2 = function ( x, y ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\r\n};\r\n\r\nTHREE.Vector2.prototype = {\r\n\r\n\tconstructor: THREE.Vector2,\r\n\r\n\tset: function ( x, y ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v ) {\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tthis.x *= s;\r\n\t\tthis.y *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector2();\r\n\t\t\t\tmax = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function() {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\r\n\t\treturn dx * dx + dy * dy;\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author *kile / http://kile.stravaganza.org/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector3 = function ( x, y, z ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\r\n};\r\n\r\nTHREE.Vector3.prototype = {\r\n\r\n\tconstructor: THREE.Vector3,\r\n\r\n\tset: function ( x, y, z ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiply: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\r\n\t\t\treturn this.multiplyVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\tthis.z *= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x * b.x;\r\n\t\tthis.y = a.y * b.y;\r\n\t\tthis.z = a.z * b.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyEuler: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyEuler( euler ) {\r\n\r\n\t\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromEuler( euler ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyAxisAngle: function () {\r\n\r\n\t\tvar quaternion;\r\n\r\n\t\treturn function applyAxisAngle( axis, angle ) {\r\n\r\n\t\t\tif ( quaternion === undefined ) quaternion = new THREE.Quaternion();\r\n\r\n\t\t\tthis.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix3: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ];\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ];\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyProjection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 projection matrix\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\t\tvar d = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] ); // perspective divide\r\n\r\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z + e[ 12 ] ) * d;\r\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z + e[ 13 ] ) * d;\r\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * d;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyQuaternion: function ( q ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\r\n\t\tvar qx = q.x;\r\n\t\tvar qy = q.y;\r\n\t\tvar qz = q.z;\r\n\t\tvar qw = q.w;\r\n\r\n\t\t// calculate quat * vector\r\n\r\n\t\tvar ix =  qw * x + qy * z - qz * y;\r\n\t\tvar iy =  qw * y + qz * x - qx * z;\r\n\t\tvar iz =  qw * z + qx * y - qy * x;\r\n\t\tvar iw = - qx * x - qy * y - qz * z;\r\n\r\n\t\t// calculate result * inverse quat\r\n\r\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\r\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\r\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function project( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.projectionMatrix, matrix.getInverse( camera.matrixWorld ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tunproject: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function unproject( camera ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tmatrix.multiplyMatrices( camera.matrixWorld, matrix.getInverse( camera.projectionMatrix ) );\r\n\t\t\treturn this.applyProjection( matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttransformDirection: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4 affine matrix\r\n\t\t// vector interpreted as a direction\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ]  * z;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ]  * z;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\r\n\r\n\t\tthis.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivide: function ( v ) {\r\n\r\n\t\tthis.x /= v.x;\r\n\t\tthis.y /= v.y;\r\n\t\tthis.z /= v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\t\t\tthis.z *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z > v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < min.z ) {\r\n\r\n\t\t\tthis.z = min.z;\r\n\r\n\t\t} else if ( this.z > max.z ) {\r\n\r\n\t\t\tthis.z = max.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector3();\r\n\t\t\t\tmax = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength  ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcross: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\r\n\t\t\treturn this.crossVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tvar x = this.x, y = this.y, z = this.z;\r\n\r\n\t\tthis.x = y * v.z - z * v.y;\r\n\t\tthis.y = z * v.x - x * v.z;\r\n\t\tthis.z = x * v.y - y * v.x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcrossVectors: function ( a, b ) {\r\n\r\n\t\tvar ax = a.x, ay = a.y, az = a.z;\r\n\t\tvar bx = b.x, by = b.y, bz = b.z;\r\n\r\n\t\tthis.x = ay * bz - az * by;\r\n\t\tthis.y = az * bx - ax * bz;\r\n\t\tthis.z = ax * by - ay * bx;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tprojectOnVector: function () {\r\n\r\n\t\tvar v1, dot;\r\n\r\n\t\treturn function projectOnVector( vector ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( vector ).normalize();\r\n\r\n\t\t\tdot = this.dot( v1 );\r\n\r\n\t\t\treturn this.copy( v1 ).multiplyScalar( dot );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tprojectOnPlane: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function projectOnPlane( planeNormal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\r\n\r\n\t\t\treturn this.sub( v1 );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\treflect: function () {\r\n\r\n\t\t// reflect incident vector off plane orthogonal to normal\r\n\t\t// normal is assumed to have unit length\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function reflect( normal ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tangleTo: function ( v ) {\r\n\r\n\t\tvar theta = this.dot( v ) / ( this.length() * v.length() );\r\n\r\n\t\t// clamp, to handle numerical problems\r\n\r\n\t\treturn Math.acos( THREE.Math.clamp( theta, - 1, 1 ) );\r\n\r\n\t},\r\n\r\n\tdistanceTo: function ( v ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\r\n\r\n\t},\r\n\r\n\tdistanceToSquared: function ( v ) {\r\n\r\n\t\tvar dx = this.x - v.x;\r\n\t\tvar dy = this.y - v.y;\r\n\t\tvar dz = this.z - v.z;\r\n\r\n\t\treturn dx * dx + dy * dy + dz * dz;\r\n\r\n\t},\r\n\r\n\tsetEulerFromRotationMatrix: function ( m, order ) {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\r\n\r\n\t},\r\n\r\n\tsetEulerFromQuaternion: function ( q, order ) {\r\n\r\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\r\n\r\n\t},\r\n\r\n\tgetPositionFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\r\n\r\n\t\treturn this.setFromMatrixPosition( m );\r\n\r\n\t},\r\n\r\n\tgetScaleFromMatrix: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\r\n\r\n\t\treturn this.setFromMatrixScale( m );\r\n\r\n\t},\r\n\r\n\tgetColumnFromMatrix: function ( index, matrix ) {\r\n\r\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\r\n\r\n\t\treturn this.setFromMatrixColumn( index, matrix );\r\n\r\n\t},\r\n\r\n\tsetFromMatrixPosition: function ( m ) {\r\n\r\n\t\tthis.x = m.elements[ 12 ];\r\n\t\tthis.y = m.elements[ 13 ];\r\n\t\tthis.z = m.elements[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixScale: function ( m ) {\r\n\r\n\t\tvar sx = this.set( m.elements[ 0 ], m.elements[ 1 ], m.elements[ 2 ] ).length();\r\n\t\tvar sy = this.set( m.elements[ 4 ], m.elements[ 5 ], m.elements[ 6 ] ).length();\r\n\t\tvar sz = this.set( m.elements[ 8 ], m.elements[ 9 ], m.elements[ 10 ] ).length();\r\n\r\n\t\tthis.x = sx;\r\n\t\tthis.y = sy;\r\n\t\tthis.z = sz;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrixColumn: function ( index, matrix ) {\r\n\r\n\t\tvar offset = index * 4;\r\n\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tthis.x = me[ offset ];\r\n\t\tthis.y = me[ offset + 1 ];\r\n\t\tthis.z = me[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Vector4.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author egraether / http://egraether.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Vector4 = function ( x, y, z, w ) {\r\n\r\n\tthis.x = x || 0;\r\n\tthis.y = y || 0;\r\n\tthis.z = z || 0;\r\n\tthis.w = ( w !== undefined ) ? w : 1;\r\n\r\n};\r\n\r\nTHREE.Vector4.prototype = {\r\n\r\n\tconstructor: THREE.Vector4,\r\n\r\n\tset: function ( x, y, z, w ) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\t\tthis.z = z;\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetX: function ( x ) {\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( y ) {\r\n\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( z ) {\r\n\r\n\t\tthis.z = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( w ) {\r\n\r\n\t\tthis.w = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponent: function ( index, value ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: this.x = value; break;\r\n\t\t\tcase 1: this.y = value; break;\r\n\t\t\tcase 2: this.z = value; break;\r\n\t\t\tcase 3: this.w = value; break;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetComponent: function ( index ) {\r\n\r\n\t\tswitch ( index ) {\r\n\r\n\t\t\tcase 0: return this.x;\r\n\t\t\tcase 1: return this.y;\r\n\t\t\tcase 2: return this.z;\r\n\t\t\tcase 3: return this.w;\r\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\r\n\r\n\t},\r\n\r\n\tcopy: function ( v ) {\r\n\r\n\t\tthis.x = v.x;\r\n\t\tthis.y = v.y;\r\n\t\tthis.z = v.z;\r\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tadd: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\r\n\t\t\treturn this.addVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\tthis.z += v.z;\r\n\t\tthis.w += v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScalar: function ( s ) {\r\n\r\n\t\tthis.x += s;\r\n\t\tthis.y += s;\r\n\t\tthis.z += s;\r\n\t\tthis.w += s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x + b.x;\r\n\t\tthis.y = a.y + b.y;\r\n\t\tthis.z = a.z + b.z;\r\n\t\tthis.w = a.w + b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\taddScaledVector: function ( v, s ) {\r\n\r\n\t\tthis.x += v.x * s;\r\n\t\tthis.y += v.y * s;\r\n\t\tthis.z += v.z * s;\r\n\t\tthis.w += v.w * s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsub: function ( v, w ) {\r\n\r\n\t\tif ( w !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\r\n\t\t\treturn this.subVectors( v, w );\r\n\r\n\t\t}\r\n\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\tthis.z -= v.z;\r\n\t\tthis.w -= v.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubScalar: function ( s ) {\r\n\r\n\t\tthis.x -= s;\r\n\t\tthis.y -= s;\r\n\t\tthis.z -= s;\r\n\t\tthis.w -= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsubVectors: function ( a, b ) {\r\n\r\n\t\tthis.x = a.x - b.x;\r\n\t\tthis.y = a.y - b.y;\r\n\t\tthis.z = a.z - b.z;\r\n\t\tthis.w = a.w - b.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( scalar ) {\r\n\r\n\t\tthis.x *= scalar;\r\n\t\tthis.y *= scalar;\r\n\t\tthis.z *= scalar;\r\n\t\tthis.w *= scalar;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( m ) {\r\n\r\n\t\tvar x = this.x;\r\n\t\tvar y = this.y;\r\n\t\tvar z = this.z;\r\n\t\tvar w = this.w;\r\n\r\n\t\tvar e = m.elements;\r\n\r\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\r\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\r\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\r\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdivideScalar: function ( scalar ) {\r\n\r\n\t\tif ( scalar !== 0 ) {\r\n\r\n\t\t\tvar invScalar = 1 / scalar;\r\n\r\n\t\t\tthis.x *= invScalar;\r\n\t\t\tthis.y *= invScalar;\r\n\t\t\tthis.z *= invScalar;\r\n\t\t\tthis.w *= invScalar;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.z = 0;\r\n\t\t\tthis.w = 1;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromQuaternion: function ( q ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\r\n\r\n\t\t// q is assumed to be normalized\r\n\r\n\t\tthis.w = 2 * Math.acos( q.w );\r\n\r\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\r\n\r\n\t\tif ( s < 0.0001 ) {\r\n\r\n\t\t\t this.x = 1;\r\n\t\t\t this.y = 0;\r\n\t\t\t this.z = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t this.x = q.x / s;\r\n\t\t\t this.y = q.y / s;\r\n\t\t\t this.z = q.z / s;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\r\n\r\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar angle, x, y, z,\t\t// variables for result\r\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\r\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\r\n\r\n\t\t\tte = m.elements,\r\n\r\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\r\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\r\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon )\r\n\t\t   && ( Math.abs( m13 - m31 ) < epsilon )\r\n\t\t   && ( Math.abs( m23 - m32 ) < epsilon ) ) {\r\n\r\n\t\t\t// singularity found\r\n\t\t\t// first check for identity matrix which must have +1 for all terms\r\n\t\t\t// in leading diagonal and zero in other terms\r\n\r\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m13 + m31 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m23 + m32 ) < epsilon2 )\r\n\t\t\t   && ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\r\n\r\n\t\t\t\t// this singularity is identity matrix so angle = 0\r\n\r\n\t\t\t\tthis.set( 1, 0, 0, 0 );\r\n\r\n\t\t\t\treturn this; // zero angle, arbitrary axis\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// otherwise this singularity is angle = 180\r\n\r\n\t\t\tangle = Math.PI;\r\n\r\n\t\t\tvar xx = ( m11 + 1 ) / 2;\r\n\t\t\tvar yy = ( m22 + 1 ) / 2;\r\n\t\t\tvar zz = ( m33 + 1 ) / 2;\r\n\t\t\tvar xy = ( m12 + m21 ) / 4;\r\n\t\t\tvar xz = ( m13 + m31 ) / 4;\r\n\t\t\tvar yz = ( m23 + m32 ) / 4;\r\n\r\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\r\n\r\n\t\t\t\t// m11 is the largest diagonal term\r\n\r\n\t\t\t\tif ( xx < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tx = Math.sqrt( xx );\r\n\t\t\t\t\ty = xy / x;\r\n\t\t\t\t\tz = xz / x;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( yy > zz ) {\r\n\r\n\t\t\t\t// m22 is the largest diagonal term\r\n\r\n\t\t\t\tif ( yy < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0;\r\n\t\t\t\t\tz = 0.707106781;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ty = Math.sqrt( yy );\r\n\t\t\t\t\tx = xy / y;\r\n\t\t\t\t\tz = yz / y;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// m33 is the largest diagonal term so base result on this\r\n\r\n\t\t\t\tif ( zz < epsilon ) {\r\n\r\n\t\t\t\t\tx = 0.707106781;\r\n\t\t\t\t\ty = 0.707106781;\r\n\t\t\t\t\tz = 0;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tz = Math.sqrt( zz );\r\n\t\t\t\t\tx = xz / z;\r\n\t\t\t\t\ty = yz / z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.set( x, y, z, angle );\r\n\r\n\t\t\treturn this; // return 180 deg rotation\r\n\r\n\t\t}\r\n\r\n\t\t// as we have reached here there are no singularities so we can handle normally\r\n\r\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 )\r\n\t\t\t\t\t\t  + ( m13 - m31 ) * ( m13 - m31 )\r\n\t\t\t\t\t\t  + ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\r\n\r\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\r\n\r\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\r\n\t\t// caught by singularity test above, but I've left it in just in case\r\n\r\n\t\tthis.x = ( m32 - m23 ) / s;\r\n\t\tthis.y = ( m13 - m31 ) / s;\r\n\t\tthis.z = ( m21 - m12 ) / s;\r\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmin: function ( v ) {\r\n\r\n\t\tif ( this.x > v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y > v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z > v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w > v.w ) {\r\n\r\n\t\t\tthis.w = v.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmax: function ( v ) {\r\n\r\n\t\tif ( this.x < v.x ) {\r\n\r\n\t\t\tthis.x = v.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < v.y ) {\r\n\r\n\t\t\tthis.y = v.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < v.z ) {\r\n\r\n\t\t\tthis.z = v.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w < v.w ) {\r\n\r\n\t\t\tthis.w = v.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclamp: function ( min, max ) {\r\n\r\n\t\t// This function assumes min < max, if this assumption isn't true it will not operate correctly\r\n\r\n\t\tif ( this.x < min.x ) {\r\n\r\n\t\t\tthis.x = min.x;\r\n\r\n\t\t} else if ( this.x > max.x ) {\r\n\r\n\t\t\tthis.x = max.x;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.y < min.y ) {\r\n\r\n\t\t\tthis.y = min.y;\r\n\r\n\t\t} else if ( this.y > max.y ) {\r\n\r\n\t\t\tthis.y = max.y;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.z < min.z ) {\r\n\r\n\t\t\tthis.z = min.z;\r\n\r\n\t\t} else if ( this.z > max.z ) {\r\n\r\n\t\t\tthis.z = max.z;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.w < min.w ) {\r\n\r\n\t\t\tthis.w = min.w;\r\n\r\n\t\t} else if ( this.w > max.w ) {\r\n\r\n\t\t\tthis.w = max.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclampScalar: function () {\r\n\r\n\t\tvar min, max;\r\n\r\n\t\treturn function clampScalar( minVal, maxVal ) {\r\n\r\n\t\t\tif ( min === undefined ) {\r\n\r\n\t\t\t\tmin = new THREE.Vector4();\r\n\t\t\t\tmax = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmin.set( minVal, minVal, minVal, minVal );\r\n\t\t\tmax.set( maxVal, maxVal, maxVal, maxVal );\r\n\r\n\t\t\treturn this.clamp( min, max );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfloor: function () {\r\n\r\n\t\tthis.x = Math.floor( this.x );\r\n\t\tthis.y = Math.floor( this.y );\r\n\t\tthis.z = Math.floor( this.z );\r\n\t\tthis.w = Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tceil: function () {\r\n\r\n\t\tthis.x = Math.ceil( this.x );\r\n\t\tthis.y = Math.ceil( this.y );\r\n\t\tthis.z = Math.ceil( this.z );\r\n\t\tthis.w = Math.ceil( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tround: function () {\r\n\r\n\t\tthis.x = Math.round( this.x );\r\n\t\tthis.y = Math.round( this.y );\r\n\t\tthis.z = Math.round( this.z );\r\n\t\tthis.w = Math.round( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\troundToZero: function () {\r\n\r\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\r\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\r\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\r\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.x = - this.x;\r\n\t\tthis.y = - this.y;\r\n\t\tthis.z = - this.z;\r\n\t\tthis.w = - this.w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdot: function ( v ) {\r\n\r\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\r\n\r\n\t},\r\n\r\n\tlengthSq: function () {\r\n\r\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\r\n\r\n\t},\r\n\r\n\tlength: function () {\r\n\r\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\r\n\r\n\t},\r\n\r\n\tlengthManhattan: function () {\r\n\r\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\treturn this.divideScalar( this.length() );\r\n\r\n\t},\r\n\r\n\tsetLength: function ( l ) {\r\n\r\n\t\tvar oldLength = this.length();\r\n\r\n\t\tif ( oldLength !== 0 && l !== oldLength ) {\r\n\r\n\t\t\tthis.multiplyScalar( l / oldLength );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerp: function ( v, alpha ) {\r\n\r\n\t\tthis.x += ( v.x - this.x ) * alpha;\r\n\t\tthis.y += ( v.y - this.y ) * alpha;\r\n\t\tthis.z += ( v.z - this.z ) * alpha;\r\n\t\tthis.w += ( v.w - this.w ) * alpha;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlerpVectors: function ( v1, v2, alpha ) {\r\n\r\n\t\tthis.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( v ) {\r\n\r\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.x = array[ offset ];\r\n\t\tthis.y = array[ offset + 1 ];\r\n\t\tthis.z = array[ offset + 2 ];\r\n\t\tthis.w = array[ offset + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this.x;\r\n\t\tarray[ offset + 1 ] = this.y;\r\n\t\tarray[ offset + 2 ] = this.z;\r\n\t\tarray[ offset + 3 ] = this.w;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tfromAttribute: function ( attribute, index, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tindex = index * attribute.itemSize + offset;\r\n\r\n\t\tthis.x = attribute.array[ index ];\r\n\t\tthis.y = attribute.array[ index + 1 ];\r\n\t\tthis.z = attribute.array[ index + 2 ];\r\n\t\tthis.w = attribute.array[ index + 3 ];\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Euler.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Euler = function ( x, y, z, order ) {\r\n\r\n\tthis._x = x || 0;\r\n\tthis._y = y || 0;\r\n\tthis._z = z || 0;\r\n\tthis._order = order || THREE.Euler.DefaultOrder;\r\n\r\n};\r\n\r\nTHREE.Euler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\r\n\r\nTHREE.Euler.DefaultOrder = 'XYZ';\r\n\r\nTHREE.Euler.prototype = {\r\n\r\n\tconstructor: THREE.Euler,\r\n\r\n\tget x () {\r\n\r\n\t\treturn this._x;\r\n\r\n\t},\r\n\r\n\tset x ( value ) {\r\n\r\n\t\tthis._x = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget y () {\r\n\r\n\t\treturn this._y;\r\n\r\n\t},\r\n\r\n\tset y ( value ) {\r\n\r\n\t\tthis._y = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget z () {\r\n\r\n\t\treturn this._z;\r\n\r\n\t},\r\n\r\n\tset z ( value ) {\r\n\r\n\t\tthis._z = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tget order () {\r\n\r\n\t\treturn this._order;\r\n\r\n\t},\r\n\r\n\tset order ( value ) {\r\n\r\n\t\tthis._order = value;\r\n\t\tthis.onChangeCallback();\r\n\r\n\t},\r\n\r\n\tset: function ( x, y, z, order ) {\r\n\r\n\t\tthis._x = x;\r\n\t\tthis._y = y;\r\n\t\tthis._z = z;\r\n\t\tthis._order = order || this._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order);\r\n\r\n\t},\r\n\r\n\tcopy: function ( euler ) {\r\n\r\n\t\tthis._x = euler._x;\r\n\t\tthis._y = euler._y;\r\n\t\tthis._z = euler._z;\r\n\t\tthis._order = euler._order;\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromRotationMatrix: function ( m, order, update ) {\r\n\r\n\t\tvar clamp = THREE.Math.clamp;\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tvar te = m.elements;\r\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\r\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\r\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\r\n\r\n\t\torder = order || this._order;\r\n\r\n\t\tif ( order === 'XYZ' ) {\r\n\r\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m13 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YXZ' ) {\r\n\r\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m23 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\t\t\t\tthis._z = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZXY' ) {\r\n\r\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m32 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._y = 0;\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'ZYX' ) {\r\n\r\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m31 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\r\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'YZX' ) {\r\n\r\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m21 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\r\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = 0;\r\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( order === 'XZY' ) {\r\n\r\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\r\n\r\n\t\t\tif ( Math.abs( m12 ) < 0.99999 ) {\r\n\r\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\r\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\r\n\t\t\t\tthis._y = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order )\r\n\r\n\t\t}\r\n\r\n\t\tthis._order = order;\r\n\r\n\t\tif ( update !== false ) this.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromQuaternion: function () {\r\n\r\n\t\tvar matrix;\r\n\r\n\t\treturn function ( q, order, update ) {\r\n\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\t\t\tmatrix.makeRotationFromQuaternion( q );\r\n\t\t\tthis.setFromRotationMatrix( matrix, order, update );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromVector3: function ( v, order ) {\r\n\r\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\r\n\r\n\t},\r\n\r\n\treorder: function () {\r\n\r\n\t\t// WARNING: this discards revolution information -bhouston\r\n\r\n\t\tvar q = new THREE.Quaternion();\r\n\r\n\t\treturn function ( newOrder ) {\r\n\r\n\t\t\tq.setFromEuler( this );\r\n\t\t\tthis.setFromQuaternion( q, newOrder );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tequals: function ( euler ) {\r\n\r\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis._x = array[ 0 ];\r\n\t\tthis._y = array[ 1 ];\r\n\t\tthis._z = array[ 2 ];\r\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\r\n\r\n\t\tthis.onChangeCallback();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function ( array, offset ) {\r\n\r\n\t\tif ( array === undefined ) array = [];\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tarray[ offset ] = this._x;\r\n\t\tarray[ offset + 1 ] = this._y;\r\n\t\tarray[ offset + 2 ] = this._z;\r\n\t\tarray[ offset + 3 ] = this._order;\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\ttoVector3: function ( optionalResult ) {\r\n\r\n\t\tif ( optionalResult ) {\r\n\r\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn new THREE.Vector3( this._x, this._y, this._z );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tonChange: function ( callback ) {\r\n\r\n\t\tthis.onChangeCallback = callback;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tonChangeCallback: function () {}\r\n\r\n};\r\n\r\n// File:src/math/Line3.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Line3 = function ( start, end ) {\r\n\r\n\tthis.start = ( start !== undefined ) ? start : new THREE.Vector3();\r\n\tthis.end = ( end !== undefined ) ? end : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Line3.prototype = {\r\n\r\n\tconstructor: THREE.Line3,\r\n\r\n\tset: function ( start, end ) {\r\n\r\n\t\tthis.start.copy( start );\r\n\t\tthis.end.copy( end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( line ) {\r\n\r\n\t\tthis.start.copy( line.start );\r\n\t\tthis.end.copy( line.end );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tdelta: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.end, this.start );\r\n\r\n\t},\r\n\r\n\tdistanceSq: function () {\r\n\r\n\t\treturn this.start.distanceToSquared( this.end );\r\n\r\n\t},\r\n\r\n\tdistance: function () {\r\n\r\n\t\treturn this.start.distanceTo( this.end );\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tclosestPointToPointParameter: function () {\r\n\r\n\t\tvar startP = new THREE.Vector3();\r\n\t\tvar startEnd = new THREE.Vector3();\r\n\r\n\t\treturn function ( point, clampToLine ) {\r\n\r\n\t\t\tstartP.subVectors( point, this.start );\r\n\t\t\tstartEnd.subVectors( this.end, this.start );\r\n\r\n\t\t\tvar startEnd2 = startEnd.dot( startEnd );\r\n\t\t\tvar startEnd_startP = startEnd.dot( startP );\r\n\r\n\t\t\tvar t = startEnd_startP / startEnd2;\r\n\r\n\t\t\tif ( clampToLine ) {\r\n\r\n\t\t\t\tt = THREE.Math.clamp( t, 0, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn t;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, clampToLine, optionalTarget ) {\r\n\r\n\t\tvar t = this.closestPointToPointParameter( point, clampToLine );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn this.delta( result ).multiplyScalar( t ).add( this.start );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.start.applyMatrix4( matrix );\r\n\t\tthis.end.applyMatrix4( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( line ) {\r\n\r\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box2.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Box2 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector2( Infinity, Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector2( - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box2.prototype = {\r\n\r\n\tconstructor: THREE.Box2,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] )\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\t\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = Infinity;\r\n\t\tthis.max.x = this.max.y = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t     ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector2();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector2();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Box3.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Box3 = function ( min, max ) {\r\n\r\n\tthis.min = ( min !== undefined ) ? min : new THREE.Vector3( Infinity, Infinity, Infinity );\r\n\tthis.max = ( max !== undefined ) ? max : new THREE.Vector3( - Infinity, - Infinity, - Infinity );\r\n\r\n};\r\n\r\nTHREE.Box3.prototype = {\r\n\r\n\tconstructor: THREE.Box3,\r\n\r\n\tset: function ( min, max ) {\r\n\r\n\t\tthis.min.copy( min );\r\n\t\tthis.max.copy( max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function ( points ) {\r\n\r\n\t\tthis.makeEmpty();\r\n\r\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.expandByPoint( points[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCenterAndSize: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( center, size ) {\r\n\r\n\t\t\tvar halfSize = v1.copy( size ).multiplyScalar( 0.5 );\r\n\r\n\t\t\tthis.min.copy( center ).sub( halfSize );\r\n\t\t\tthis.max.copy( center ).add( halfSize );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetFromObject: function () {\r\n\r\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\r\n\t\t// accounting for both the object's, and children's, world transforms\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tobject.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.makeEmpty();\r\n\r\n\t\t\tobject.traverse( function ( node ) {\r\n\r\n\t\t\t\tvar geometry = node.geometry;\r\n\r\n\t\t\t\tif ( geometry !== undefined ) {\r\n\r\n\t\t\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tv1.copy( vertices[ i ] );\r\n\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( geometry instanceof THREE.BufferGeometry && geometry.attributes[ 'position' ] !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar positions = geometry.attributes[ 'position' ].array;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\t\tv1.set( positions[ i ], positions[ i + 1 ], positions[ i + 2 ] );\r\n\r\n\t\t\t\t\t\t\tv1.applyMatrix4( node.matrixWorld );\r\n\r\n\t\t\t\t\t\t\tscope.expandByPoint( v1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( box ) {\r\n\r\n\t\tthis.min.copy( box.min );\r\n\t\tthis.max.copy( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeEmpty: function () {\r\n\r\n\t\tthis.min.x = this.min.y = this.min.z = Infinity;\r\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\r\n\r\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\r\n\r\n\t},\r\n\r\n\tcenter: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\r\n\r\n\t},\r\n\r\n\tsize: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.subVectors( this.max, this.min );\r\n\r\n\t},\r\n\r\n\texpandByPoint: function ( point ) {\r\n\r\n\t\tthis.min.min( point );\r\n\t\tthis.max.max( point );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByVector: function ( vector ) {\r\n\r\n\t\tthis.min.sub( vector );\r\n\t\tthis.max.add( vector );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\texpandByScalar: function ( scalar ) {\r\n\r\n\t\tthis.min.addScalar( - scalar );\r\n\t\tthis.max.addScalar( scalar );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tif ( point.x < this.min.x || point.x > this.max.x ||\r\n\t\t     point.y < this.min.y || point.y > this.max.y ||\r\n\t\t     point.z < this.min.z || point.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tcontainsBox: function ( box ) {\r\n\r\n\t\tif ( ( this.min.x <= box.min.x ) && ( box.max.x <= this.max.x ) &&\r\n\t\t\t ( this.min.y <= box.min.y ) && ( box.max.y <= this.max.y ) &&\r\n\t\t\t ( this.min.z <= box.min.z ) && ( box.max.z <= this.max.z ) ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tgetParameter: function ( point, optionalTarget ) {\r\n\r\n\t\t// This can potentially have a divide by zero if the box\r\n\t\t// has a size dimension of 0.\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.set(\r\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\r\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\r\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\r\n\t\t);\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function ( box ) {\r\n\r\n\t\t// using 6 splitting planes to rule out intersections.\r\n\r\n\t\tif ( box.max.x < this.min.x || box.min.x > this.max.x ||\r\n\t\t     box.max.y < this.min.y || box.min.y > this.max.y ||\r\n\t\t     box.max.z < this.min.z || box.min.z > this.max.z ) {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( point ).clamp( this.min, this.max );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar clampedPoint = v1.copy( point ).clamp( this.min, this.max );\r\n\t\t\treturn clampedPoint.sub( point ).length();\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetBoundingSphere: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Sphere();\r\n\r\n\t\t\tresult.center = this.center();\r\n\t\t\tresult.radius = this.size( v1 ).length() * 0.5;\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersect: function ( box ) {\r\n\r\n\t\tthis.min.max( box.min );\r\n\t\tthis.max.min( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tunion: function ( box ) {\r\n\r\n\t\tthis.min.min( box.min );\r\n\t\tthis.max.max( box.max );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar points = [\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3(),\r\n\t\t\tnew THREE.Vector3()\r\n\t\t];\r\n\r\n\t\treturn function ( matrix ) {\r\n\r\n\t\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\r\n\t\t\tpoints[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\r\n\t\t\tpoints[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\r\n\t\t\tpoints[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\r\n\t\t\tpoints[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\r\n\t\t\tpoints[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\r\n\t\t\tpoints[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\r\n\t\t\tpoints[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\r\n\t\t\tpoints[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix );  // 111\r\n\r\n\t\t\tthis.makeEmpty();\r\n\t\t\tthis.setFromPoints( points );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.min.add( offset );\r\n\t\tthis.max.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( box ) {\r\n\r\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix3.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Matrix3 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0,\r\n\t\t0, 1, 0,\r\n\t\t0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix3.prototype = {\r\n\r\n\tconstructor: THREE.Matrix3,\r\n\r\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 3 ] = n12; te[ 6 ] = n13;\r\n\t\tte[ 1 ] = n21; te[ 4 ] = n22; te[ 7 ] = n23;\r\n\t\tte[ 2 ] = n31; te[ 5 ] = n32; te[ 8 ] = n33;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0,\r\n\t\t\t0, 1, 0,\r\n\t\t\t0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tvar me = m.elements;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ],\r\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ],\r\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ]\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix3( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector3Array: function ( a ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix3( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\r\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\r\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\r\n\r\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( matrix, throwOnInvertible ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\t\t// ( based on http://code.google.com/p/webgl-mjs/ )\r\n\r\n\t\tvar me = matrix.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] =   me[ 10 ] * me[ 5 ] - me[ 6 ] * me[ 9 ];\r\n\t\tte[ 1 ] = - me[ 10 ] * me[ 1 ] + me[ 2 ] * me[ 9 ];\r\n\t\tte[ 2 ] =   me[ 6 ] * me[ 1 ] - me[ 2 ] * me[ 5 ];\r\n\t\tte[ 3 ] = - me[ 10 ] * me[ 4 ] + me[ 6 ] * me[ 8 ];\r\n\t\tte[ 4 ] =   me[ 10 ] * me[ 0 ] - me[ 2 ] * me[ 8 ];\r\n\t\tte[ 5 ] = - me[ 6 ] * me[ 0 ] + me[ 2 ] * me[ 4 ];\r\n\t\tte[ 6 ] =   me[ 9 ] * me[ 4 ] - me[ 5 ] * me[ 8 ];\r\n\t\tte[ 7 ] = - me[ 9 ] * me[ 0 ] + me[ 1 ] * me[ 8 ];\r\n\t\tte[ 8 ] =   me[ 5 ] * me[ 0 ] - me[ 1 ] * me[ 4 ];\r\n\r\n\t\tvar det = me[ 0 ] * te[ 0 ] + me[ 1 ] * te[ 3 ] + me[ 2 ] * te[ 6 ];\r\n\r\n\t\t// no inverse\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"Matrix3.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnInvertible || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1.0 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar tmp, m = this.elements;\r\n\r\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\r\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\r\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetNormalMatrix: function ( m ) {\r\n\r\n\t\t// input: THREE.Matrix4\r\n\r\n\t\tthis.getInverse( m ).transpose();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttransposeIntoArray: function ( r ) {\r\n\r\n\t\tvar m = this.elements;\r\n\r\n\t\tr[ 0 ] = m[ 0 ];\r\n\t\tr[ 1 ] = m[ 3 ];\r\n\t\tr[ 2 ] = m[ 6 ];\r\n\t\tr[ 3 ] = m[ 1 ];\r\n\t\tr[ 4 ] = m[ 4 ];\r\n\t\tr[ 5 ] = m[ 7 ];\r\n\t\tr[ 6 ] = m[ 2 ];\r\n\t\tr[ 7 ] = m[ 5 ];\r\n\t\tr[ 8 ] = m[ 8 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ],\r\n\t\t\tte[ 3 ], te[ 4 ], te[ 5 ],\r\n\t\t\tte[ 6 ], te[ 7 ], te[ 8 ]\r\n\t\t];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Matrix4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author philogb / http://blog.thejit.org/\r\n * @author jordi_ros / http://plattsoft.com\r\n * @author D1plo1d / http://github.com/D1plo1d\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author timknip / http://www.floorplanner.com/\r\n * @author bhouston / http://exocortex.com\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.Matrix4 = function () {\r\n\r\n\tthis.elements = new Float32Array( [\r\n\r\n\t\t1, 0, 0, 0,\r\n\t\t0, 1, 0, 0,\r\n\t\t0, 0, 1, 0,\r\n\t\t0, 0, 0, 1\r\n\r\n\t] );\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Matrix4.prototype = {\r\n\r\n\tconstructor: THREE.Matrix4,\r\n\r\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\r\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\r\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\r\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tidentity: function () {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, 0,\r\n\t\t\t0, 1, 0, 0,\r\n\t\t\t0, 0, 1, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new THREE.Matrix4().fromArray( this.elements );\r\n\r\n\t},\r\n\r\n\tcopy: function ( m ) {\r\n\r\n\t\tthis.elements.set( m.elements );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractPosition: function ( m ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\r\n\t\treturn this.copyPosition( m );\r\n\r\n\t},\r\n\r\n\tcopyPosition: function ( m ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tte[ 12 ] = me[ 12 ];\r\n\t\tte[ 13 ] = me[ 13 ];\r\n\t\tte[ 14 ] = me[ 14 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\txAxis.set( te[ 0 ], te[ 1 ], te[ 2 ] );\r\n\t\tyAxis.set( te[ 4 ], te[ 5 ], te[ 6 ] );\r\n\t\tzAxis.set( te[ 8 ], te[ 9 ], te[ 10 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\r\n\r\n\t\tthis.set(\r\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\r\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\r\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\r\n\t\t\t0,       0,       0,       1\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\textractRotation: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( m ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\tvar me = m.elements;\r\n\r\n\t\t\tvar scaleX = 1 / v1.set( me[ 0 ], me[ 1 ], me[ 2 ] ).length();\r\n\t\t\tvar scaleY = 1 / v1.set( me[ 4 ], me[ 5 ], me[ 6 ] ).length();\r\n\t\t\tvar scaleZ = 1 / v1.set( me[ 8 ], me[ 9 ], me[ 10 ] ).length();\r\n\r\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\r\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\r\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\r\n\r\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\r\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\r\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\r\n\r\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\r\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\r\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeRotationFromEuler: function ( euler ) {\r\n\r\n\t\tif ( euler instanceof THREE.Euler === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\r\n\r\n\t\t}\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\r\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\r\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\r\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\r\n\r\n\t\tif ( euler.order === 'XYZ' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - c * f;\r\n\t\t\tte[ 8 ] = d;\r\n\r\n\t\t\tte[ 1 ] = af + be * d;\r\n\t\t\tte[ 5 ] = ae - bf * d;\r\n\t\t\tte[ 9 ] = - b * c;\r\n\r\n\t\t\tte[ 2 ] = bf - ae * d;\r\n\t\t\tte[ 6 ] = be + af * d;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YXZ' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce + df * b;\r\n\t\t\tte[ 4 ] = de * b - cf;\r\n\t\t\tte[ 8 ] = a * d;\r\n\r\n\t\t\tte[ 1 ] = a * f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b;\r\n\r\n\t\t\tte[ 2 ] = cf * b - de;\r\n\t\t\tte[ 6 ] = df + ce * b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZXY' ) {\r\n\r\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\r\n\r\n\t\t\tte[ 0 ] = ce - df * b;\r\n\t\t\tte[ 4 ] = - a * f;\r\n\t\t\tte[ 8 ] = de + cf * b;\r\n\r\n\t\t\tte[ 1 ] = cf + de * b;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = df - ce * b;\r\n\r\n\t\t\tte[ 2 ] = - a * d;\r\n\t\t\tte[ 6 ] = b;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'ZYX' ) {\r\n\r\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = be * d - af;\r\n\t\t\tte[ 8 ] = ae * d + bf;\r\n\r\n\t\t\tte[ 1 ] = c * f;\r\n\t\t\tte[ 5 ] = bf * d + ae;\r\n\t\t\tte[ 9 ] = af * d - be;\r\n\r\n\t\t\tte[ 2 ] = - d;\r\n\t\t\tte[ 6 ] = b * c;\r\n\t\t\tte[ 10 ] = a * c;\r\n\r\n\t\t} else if ( euler.order === 'YZX' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = bd - ac * f;\r\n\t\t\tte[ 8 ] = bc * f + ad;\r\n\r\n\t\t\tte[ 1 ] = f;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = - b * e;\r\n\r\n\t\t\tte[ 2 ] = - d * e;\r\n\t\t\tte[ 6 ] = ad * f + bc;\r\n\t\t\tte[ 10 ] = ac - bd * f;\r\n\r\n\t\t} else if ( euler.order === 'XZY' ) {\r\n\r\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\r\n\r\n\t\t\tte[ 0 ] = c * e;\r\n\t\t\tte[ 4 ] = - f;\r\n\t\t\tte[ 8 ] = d * e;\r\n\r\n\t\t\tte[ 1 ] = ac * f + bd;\r\n\t\t\tte[ 5 ] = a * e;\r\n\t\t\tte[ 9 ] = ad * f - bc;\r\n\r\n\t\t\tte[ 2 ] = bc * f - ad;\r\n\t\t\tte[ 6 ] = b * e;\r\n\t\t\tte[ 10 ] = bd * f + ac;\r\n\r\n\t\t}\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\r\n\r\n\t\treturn this.makeRotationFromQuaternion( q );\r\n\r\n\t},\r\n\r\n\tmakeRotationFromQuaternion: function ( q ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar x = q.x, y = q.y, z = q.z, w = q.w;\r\n\t\tvar x2 = x + x, y2 = y + y, z2 = z + z;\r\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\r\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\r\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\r\n\r\n\t\tte[ 0 ] = 1 - ( yy + zz );\r\n\t\tte[ 4 ] = xy - wz;\r\n\t\tte[ 8 ] = xz + wy;\r\n\r\n\t\tte[ 1 ] = xy + wz;\r\n\t\tte[ 5 ] = 1 - ( xx + zz );\r\n\t\tte[ 9 ] = yz - wx;\r\n\r\n\t\tte[ 2 ] = xz - wy;\r\n\t\tte[ 6 ] = yz + wx;\r\n\t\tte[ 10 ] = 1 - ( xx + yy );\r\n\r\n\t\t// last column\r\n\t\tte[ 3 ] = 0;\r\n\t\tte[ 7 ] = 0;\r\n\t\tte[ 11 ] = 0;\r\n\r\n\t\t// bottom row\r\n\t\tte[ 12 ] = 0;\r\n\t\tte[ 13 ] = 0;\r\n\t\tte[ 14 ] = 0;\r\n\t\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar x, y, z;\r\n\r\n\t\treturn function ( eye, target, up ) {\r\n\r\n\t\t\tif ( x === undefined ) x = new THREE.Vector3();\r\n\t\t\tif ( y === undefined ) y = new THREE.Vector3();\r\n\t\t\tif ( z === undefined ) z = new THREE.Vector3();\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tz.subVectors( eye, target ).normalize();\r\n\r\n\t\t\tif ( z.length() === 0 ) {\r\n\r\n\t\t\t\tz.z = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\tif ( x.length() === 0 ) {\r\n\r\n\t\t\t\tz.x += 0.0001;\r\n\t\t\t\tx.crossVectors( up, z ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\ty.crossVectors( z, x );\r\n\r\n\r\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\r\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\r\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmultiply: function ( m, n ) {\r\n\r\n\t\tif ( n !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\r\n\t\t\treturn this.multiplyMatrices( m, n );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.multiplyMatrices( this, m );\r\n\r\n\t},\r\n\r\n\tmultiplyMatrices: function ( a, b ) {\r\n\r\n\t\tvar ae = a.elements;\r\n\t\tvar be = b.elements;\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\r\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\r\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\r\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\r\n\r\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\r\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\r\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\r\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\r\n\r\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\r\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\r\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\r\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\r\n\r\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\r\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\r\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\r\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\r\n\r\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\r\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\r\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\r\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\r\n\r\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\r\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\r\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\r\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyToArray: function ( a, b, r ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tthis.multiplyMatrices( a, b );\r\n\r\n\t\tr[ 0 ] = te[ 0 ]; r[ 1 ] = te[ 1 ]; r[ 2 ] = te[ 2 ]; r[ 3 ] = te[ 3 ];\r\n\t\tr[ 4 ] = te[ 4 ]; r[ 5 ] = te[ 5 ]; r[ 6 ] = te[ 6 ]; r[ 7 ] = te[ 7 ];\r\n\t\tr[ 8 ]  = te[ 8 ]; r[ 9 ]  = te[ 9 ]; r[ 10 ] = te[ 10 ]; r[ 11 ] = te[ 11 ];\r\n\t\tr[ 12 ] = te[ 12 ]; r[ 13 ] = te[ 13 ]; r[ 14 ] = te[ 14 ]; r[ 15 ] = te[ 15 ];\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyScalar: function ( s ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\r\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\r\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\r\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmultiplyVector3: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.' );\r\n\t\treturn vector.applyProjection( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector4: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\r\n\tmultiplyVector3Array: function ( a ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.' );\r\n\t\treturn this.applyToVector3Array( a );\r\n\r\n\t},\r\n\r\n\tapplyToVector3Array: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function ( array, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = array.length;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i += 3, j += 3 ) {\r\n\r\n\t\t\t\tv1.fromArray( array, j );\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\t\t\t\tv1.toArray( array, j );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyToBuffer: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function applyToBuffer( buffer, offset, length ) {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tif ( offset === undefined ) offset = 0;\r\n\t\t\tif ( length === undefined ) length = buffer.length / buffer.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = offset; i < length; i ++, j ++ ) {\r\n\r\n\t\t\t\tv1.x = buffer.getX( j );\r\n\t\t\t\tv1.y = buffer.getY( j );\r\n\t\t\t\tv1.z = buffer.getZ( j );\r\n\r\n\t\t\t\tv1.applyMatrix4( this );\r\n\r\n\t\t\t\tbuffer.setXYZ( v1.x, v1.y, v1.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn buffer;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateAxis: function ( v ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\r\n\r\n\t\tv.transformDirection( this );\r\n\r\n\t},\r\n\r\n\tcrossVector: function ( vector ) {\r\n\r\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\r\n\t\treturn vector.applyMatrix4( this );\r\n\r\n\t},\r\n\r\n\tdeterminant: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\r\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\r\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\r\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\r\n\r\n\t\t//TODO: make this more efficient\r\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\r\n\r\n\t\treturn (\r\n\t\t\tn41 * (\r\n\t\t\t\t+ n14 * n23 * n32\r\n\t\t\t\t - n13 * n24 * n32\r\n\t\t\t\t - n14 * n22 * n33\r\n\t\t\t\t + n12 * n24 * n33\r\n\t\t\t\t + n13 * n22 * n34\r\n\t\t\t\t - n12 * n23 * n34\r\n\t\t\t) +\r\n\t\t\tn42 * (\r\n\t\t\t\t+ n11 * n23 * n34\r\n\t\t\t\t - n11 * n24 * n33\r\n\t\t\t\t + n14 * n21 * n33\r\n\t\t\t\t - n13 * n21 * n34\r\n\t\t\t\t + n13 * n24 * n31\r\n\t\t\t\t - n14 * n23 * n31\r\n\t\t\t) +\r\n\t\t\tn43 * (\r\n\t\t\t\t+ n11 * n24 * n32\r\n\t\t\t\t - n11 * n22 * n34\r\n\t\t\t\t - n14 * n21 * n32\r\n\t\t\t\t + n12 * n21 * n34\r\n\t\t\t\t + n14 * n22 * n31\r\n\t\t\t\t - n12 * n24 * n31\r\n\t\t\t) +\r\n\t\t\tn44 * (\r\n\t\t\t\t- n13 * n22 * n31\r\n\t\t\t\t - n11 * n23 * n32\r\n\t\t\t\t + n11 * n22 * n33\r\n\t\t\t\t + n13 * n21 * n32\r\n\t\t\t\t - n12 * n21 * n33\r\n\t\t\t\t + n12 * n23 * n31\r\n\t\t\t)\r\n\r\n\t\t);\r\n\r\n\t},\r\n\r\n\ttranspose: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar tmp;\r\n\r\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\r\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\r\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\r\n\r\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\r\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\r\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tflattenToArrayOffset: function ( array, offset ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tarray[ offset ] = te[ 0 ];\r\n\t\tarray[ offset + 1 ] = te[ 1 ];\r\n\t\tarray[ offset + 2 ] = te[ 2 ];\r\n\t\tarray[ offset + 3 ] = te[ 3 ];\r\n\r\n\t\tarray[ offset + 4 ] = te[ 4 ];\r\n\t\tarray[ offset + 5 ] = te[ 5 ];\r\n\t\tarray[ offset + 6 ] = te[ 6 ];\r\n\t\tarray[ offset + 7 ] = te[ 7 ];\r\n\r\n\t\tarray[ offset + 8 ]  = te[ 8 ];\r\n\t\tarray[ offset + 9 ]  = te[ 9 ];\r\n\t\tarray[ offset + 10 ] = te[ 10 ];\r\n\t\tarray[ offset + 11 ] = te[ 11 ];\r\n\r\n\t\tarray[ offset + 12 ] = te[ 12 ];\r\n\t\tarray[ offset + 13 ] = te[ 13 ];\r\n\t\tarray[ offset + 14 ] = te[ 14 ];\r\n\t\tarray[ offset + 15 ] = te[ 15 ];\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tgetPosition: function () {\r\n\r\n\t\tvar v1;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( v1 === undefined ) v1 = new THREE.Vector3();\r\n\t\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\r\n\r\n\t\t\tvar te = this.elements;\r\n\t\t\treturn v1.set( te[ 12 ], te[ 13 ], te[ 14 ] );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tsetPosition: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tte[ 12 ] = v.x;\r\n\t\tte[ 13 ] = v.y;\r\n\t\tte[ 14 ] = v.z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetInverse: function ( m, throwOnInvertible ) {\r\n\r\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\r\n\t\tvar te = this.elements;\r\n\t\tvar me = m.elements;\r\n\r\n\t\tvar n11 = me[ 0 ], n12 = me[ 4 ], n13 = me[ 8 ], n14 = me[ 12 ];\r\n\t\tvar n21 = me[ 1 ], n22 = me[ 5 ], n23 = me[ 9 ], n24 = me[ 13 ];\r\n\t\tvar n31 = me[ 2 ], n32 = me[ 6 ], n33 = me[ 10 ], n34 = me[ 14 ];\r\n\t\tvar n41 = me[ 3 ], n42 = me[ 7 ], n43 = me[ 11 ], n44 = me[ 15 ];\r\n\r\n\t\tte[ 0 ] = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44;\r\n\t\tte[ 4 ] = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44;\r\n\t\tte[ 8 ] = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44;\r\n\t\tte[ 12 ] = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\r\n\t\tte[ 1 ] = n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44;\r\n\t\tte[ 5 ] = n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44;\r\n\t\tte[ 9 ] = n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44;\r\n\t\tte[ 13 ] = n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34;\r\n\t\tte[ 2 ] = n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44;\r\n\t\tte[ 6 ] = n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44;\r\n\t\tte[ 10 ] = n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44;\r\n\t\tte[ 14 ] = n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34;\r\n\t\tte[ 3 ] = n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43;\r\n\t\tte[ 7 ] = n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43;\r\n\t\tte[ 11 ] = n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43;\r\n\t\tte[ 15 ] = n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33;\r\n\r\n\t\tvar det = n11 * te[ 0 ] + n21 * te[ 4 ] + n31 * te[ 8 ] + n41 * te[ 12 ];\r\n\r\n\t\tif ( det === 0 ) {\r\n\r\n\t\t\tvar msg = \"THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0\";\r\n\r\n\t\t\tif ( throwOnInvertible || false ) {\r\n\r\n\t\t\t\tthrow new Error( msg );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( msg );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.identity();\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tthis.multiplyScalar( 1 / det );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( v ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateX: function ( angle ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateY: function ( angle ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateZ: function ( angle ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\r\n\r\n\t},\r\n\r\n\trotateByAxis: function ( axis, angle ) {\r\n\r\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\r\n\r\n\t},\r\n\r\n\tscale: function ( v ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = v.x, y = v.y, z = v.z;\r\n\r\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\r\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\r\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\r\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetMaxScaleOnAxis: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\r\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\r\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\r\n\r\n\t\treturn Math.sqrt( Math.max( scaleXSq, Math.max( scaleYSq, scaleZSq ) ) );\r\n\r\n\t},\r\n\r\n\tmakeTranslation: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0, 0, x,\r\n\t\t\t0, 1, 0, y,\r\n\t\t\t0, 0, 1, z,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationX: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t1, 0,  0, 0,\r\n\t\t\t0, c, - s, 0,\r\n\t\t\t0, s,  c, 0,\r\n\t\t\t0, 0,  0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationY: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\t c, 0, s, 0,\r\n\t\t\t 0, 1, 0, 0,\r\n\t\t\t- s, 0, c, 0,\r\n\t\t\t 0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationZ: function ( theta ) {\r\n\r\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tc, - s, 0, 0,\r\n\t\t\ts,  c, 0, 0,\r\n\t\t\t0,  0, 1, 0,\r\n\t\t\t0,  0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakeRotationAxis: function ( axis, angle ) {\r\n\r\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\r\n\r\n\t\tvar c = Math.cos( angle );\r\n\t\tvar s = Math.sin( angle );\r\n\t\tvar t = 1 - c;\r\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\r\n\t\tvar tx = t * x, ty = t * y;\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\r\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\r\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\t return this;\r\n\r\n\t},\r\n\r\n\tmakeScale: function ( x, y, z ) {\r\n\r\n\t\tthis.set(\r\n\r\n\t\t\tx, 0, 0, 0,\r\n\t\t\t0, y, 0, 0,\r\n\t\t\t0, 0, z, 0,\r\n\t\t\t0, 0, 0, 1\r\n\r\n\t\t);\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcompose: function ( position, quaternion, scale ) {\r\n\r\n\t\tthis.makeRotationFromQuaternion( quaternion );\r\n\t\tthis.scale( scale );\r\n\t\tthis.setPosition( position );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdecompose: function () {\r\n\r\n\t\tvar vector, matrix;\r\n\r\n\t\treturn function ( position, quaternion, scale ) {\r\n\r\n\t\t\tif ( vector === undefined ) vector = new THREE.Vector3();\r\n\t\t\tif ( matrix === undefined ) matrix = new THREE.Matrix4();\r\n\r\n\t\t\tvar te = this.elements;\r\n\r\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\r\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\r\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\r\n\r\n\t\t\t// if determine is negative, we need to invert one scale\r\n\t\t\tvar det = this.determinant();\r\n\t\t\tif ( det < 0 ) {\r\n\r\n\t\t\t\tsx = - sx;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tposition.x = te[ 12 ];\r\n\t\t\tposition.y = te[ 13 ];\r\n\t\t\tposition.z = te[ 14 ];\r\n\r\n\t\t\t// scale the rotation part\r\n\r\n\t\t\tmatrix.elements.set( this.elements ); // at this point matrix is incomplete so we can't use .copy()\r\n\r\n\t\t\tvar invSX = 1 / sx;\r\n\t\t\tvar invSY = 1 / sy;\r\n\t\t\tvar invSZ = 1 / sz;\r\n\r\n\t\t\tmatrix.elements[ 0 ] *= invSX;\r\n\t\t\tmatrix.elements[ 1 ] *= invSX;\r\n\t\t\tmatrix.elements[ 2 ] *= invSX;\r\n\r\n\t\t\tmatrix.elements[ 4 ] *= invSY;\r\n\t\t\tmatrix.elements[ 5 ] *= invSY;\r\n\t\t\tmatrix.elements[ 6 ] *= invSY;\r\n\r\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\r\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\r\n\r\n\t\t\tquaternion.setFromRotationMatrix( matrix );\r\n\r\n\t\t\tscale.x = sx;\r\n\t\t\tscale.y = sy;\r\n\t\t\tscale.z = sz;\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar x = 2 * near / ( right - left );\r\n\t\tvar y = 2 * near / ( top - bottom );\r\n\r\n\t\tvar a = ( right + left ) / ( right - left );\r\n\t\tvar b = ( top + bottom ) / ( top - bottom );\r\n\t\tvar c = - ( far + near ) / ( far - near );\r\n\t\tvar d = - 2 * far * near / ( far - near );\r\n\r\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tmakePerspective: function ( fov, aspect, near, far ) {\r\n\r\n\t\tvar ymax = near * Math.tan( THREE.Math.degToRad( fov * 0.5 ) );\r\n\t\tvar ymin = - ymax;\r\n\t\tvar xmin = ymin * aspect;\r\n\t\tvar xmax = ymax * aspect;\r\n\r\n\t\treturn this.makeFrustum( xmin, xmax, ymin, ymax, near, far );\r\n\r\n\t},\r\n\r\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar w = right - left;\r\n\t\tvar h = top - bottom;\r\n\t\tvar p = far - near;\r\n\r\n\t\tvar x = ( right + left ) / w;\r\n\t\tvar y = ( top + bottom ) / h;\r\n\t\tvar z = ( far + near ) / p;\r\n\r\n\t\tte[ 0 ] = 2 / w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\r\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 / h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\r\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 / p;\tte[ 14 ] = - z;\r\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( matrix ) {\r\n\r\n\t\tvar te = this.elements;\r\n\t\tvar me = matrix.elements;\r\n\r\n\t\tfor ( var i = 0; i < 16; i ++ ) {\r\n\r\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tfromArray: function ( array ) {\r\n\r\n\t\tthis.elements.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoArray: function () {\r\n\r\n\t\tvar te = this.elements;\r\n\r\n\t\treturn [\r\n\t\t\tte[ 0 ], te[ 1 ], te[ 2 ], te[ 3 ],\r\n\t\t\tte[ 4 ], te[ 5 ], te[ 6 ], te[ 7 ],\r\n\t\t\tte[ 8 ], te[ 9 ], te[ 10 ], te[ 11 ],\r\n\t\t\tte[ 12 ], te[ 13 ], te[ 14 ], te[ 15 ]\r\n\t\t];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Ray.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Ray = function ( origin, direction ) {\r\n\r\n\tthis.origin = ( origin !== undefined ) ? origin : new THREE.Vector3();\r\n\tthis.direction = ( direction !== undefined ) ? direction : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Ray.prototype = {\r\n\r\n\tconstructor: THREE.Ray,\r\n\r\n\tset: function ( origin, direction ) {\r\n\r\n\t\tthis.origin.copy( origin );\r\n\t\tthis.direction.copy( direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( ray ) {\r\n\r\n\t\tthis.origin.copy( ray.origin );\r\n\t\tthis.direction.copy( ray.direction );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tat: function ( t, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( t ).add( this.origin );\r\n\r\n\t},\r\n\r\n\trecast: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( t ) {\r\n\r\n\t\t\tthis.origin.copy( this.at( t, v1 ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclosestPointToPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.subVectors( point, this.origin );\r\n\t\tvar directionDistance = result.dot( this.direction );\r\n\r\n\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\treturn result.copy( this.origin );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\r\n\r\n\t},\r\n\r\n\tdistanceSqToPoint: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( point ) {\r\n\r\n\t\t\tvar directionDistance = v1.subVectors( point, this.origin ).dot( this.direction );\r\n\r\n\t\t\t// point behind the ray\r\n\r\n\t\t\tif ( directionDistance < 0 ) {\r\n\r\n\t\t\t\treturn this.origin.distanceToSquared( point );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tv1.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\r\n\r\n\t\t\treturn v1.distanceToSquared( point );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tdistanceSqToSegment: function () {\r\n\r\n\t\tvar segCenter = new THREE.Vector3();\r\n\t\tvar segDir = new THREE.Vector3();\r\n\t\tvar diff = new THREE.Vector3();\r\n\r\n\t\treturn function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Distance/Wm5DistRay3Segment3.cpp\r\n\t\t\t// It returns the min distance between the ray and the segment\r\n\t\t\t// defined by v0 and v1\r\n\t\t\t// It can also set two optional targets :\r\n\t\t\t// - The closest point on the ray\r\n\t\t\t// - The closest point on the segment\r\n\r\n\t\t\tsegCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\r\n\t\t\tsegDir.copy( v1 ).sub( v0 ).normalize();\r\n\t\t\tdiff.copy( this.origin ).sub( segCenter );\r\n\r\n\t\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\r\n\t\t\tvar a01 = - this.direction.dot( segDir );\r\n\t\t\tvar b0 = diff.dot( this.direction );\r\n\t\t\tvar b1 = - diff.dot( segDir );\r\n\t\t\tvar c = diff.lengthSq();\r\n\t\t\tvar det = Math.abs( 1 - a01 * a01 );\r\n\t\t\tvar s0, s1, sqrDist, extDet;\r\n\r\n\t\t\tif ( det > 0 ) {\r\n\r\n\t\t\t\t// The ray and segment are not parallel.\r\n\r\n\t\t\t\ts0 = a01 * b1 - b0;\r\n\t\t\t\ts1 = a01 * b0 - b1;\r\n\t\t\t\textDet = segExtent * det;\r\n\r\n\t\t\t\tif ( s0 >= 0 ) {\r\n\r\n\t\t\t\t\tif ( s1 >= - extDet ) {\r\n\r\n\t\t\t\t\t\tif ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t\t// region 0\r\n\t\t\t\t\t\t\t// Minimum at interior points of ray and segment.\r\n\r\n\t\t\t\t\t\t\tvar invDet = 1 / det;\r\n\t\t\t\t\t\t\ts0 *= invDet;\r\n\t\t\t\t\t\t\ts1 *= invDet;\r\n\t\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t// region 1\r\n\r\n\t\t\t\t\t\t\ts1 = segExtent;\r\n\t\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 5\r\n\r\n\t\t\t\t\t\ts1 = - segExtent;\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( s1 <= - extDet ) {\r\n\r\n\t\t\t\t\t\t// region 4\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else if ( s1 <= extDet ) {\r\n\r\n\t\t\t\t\t\t// region 3\r\n\r\n\t\t\t\t\t\ts0 = 0;\r\n\t\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t// region 2\r\n\r\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\r\n\t\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\r\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// Ray and segment are parallel.\r\n\r\n\t\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\r\n\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\r\n\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnRay ) {\r\n\r\n\t\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( optionalPointOnSegment ) {\r\n\r\n\t\t\t\toptionalPointOnSegment.copy( segDir ).multiplyScalar( s1 ).add( segCenter );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn sqrDist;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tisIntersectionSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) <= sphere.radius;\r\n\r\n\t},\r\n\r\n\tintersectSphere: function () {\r\n\r\n\t\t// from http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-sphere-intersection/\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( sphere, optionalTarget ) {\r\n\r\n\t\t\tv1.subVectors( sphere.center, this.origin );\r\n\r\n\t\t\tvar tca = v1.dot( this.direction );\r\n\r\n\t\t\tvar d2 = v1.dot( v1 ) - tca * tca;\r\n\r\n\t\t\tvar radius2 = sphere.radius * sphere.radius;\r\n\r\n\t\t\tif ( d2 > radius2 ) return null;\r\n\r\n\t\t\tvar thc = Math.sqrt( radius2 - d2 );\r\n\r\n\t\t\t// t0 = first intersect point - entrance on front of sphere\r\n\t\t\tvar t0 = tca - thc;\r\n\r\n\t\t\t// t1 = second intersect point - exit point on back of sphere\r\n\t\t\tvar t1 = tca + thc;\r\n\r\n\t\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\r\n\t\t\tif ( t0 < 0 && t1 < 0 ) return null;\r\n\r\n\t\t\t// test to see if t0 is behind the ray:\r\n\t\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\r\n\t\t\t// in order to always return an intersect point that is in front of the ray.\r\n\t\t\tif ( t0 < 0 ) return this.at( t1, optionalTarget );\r\n\r\n\t\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\r\n\t\t\treturn this.at( t0, optionalTarget );\r\n\r\n\t\t}\r\n\r\n\t}(),\r\n\r\n\tisIntersectionPlane: function ( plane ) {\r\n\r\n\t\t// check if the ray lies on the plane first\r\n\r\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\r\n\r\n\t\tif ( distToPoint === 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\r\n\t\tif ( denominator * distToPoint < 0 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\t// ray origin is behind the plane (and is pointing behind it)\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tdistanceToPlane: function ( plane ) {\r\n\r\n\t\tvar denominator = plane.normal.dot( this.direction );\r\n\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t// line is coplanar, return origin\r\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\r\n\r\n\t\t\t\treturn 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\r\n\r\n\t\t// Return if the ray never intersects the plane\r\n\r\n\t\treturn t >= 0 ? t :  null;\r\n\r\n\t},\r\n\r\n\tintersectPlane: function ( plane, optionalTarget ) {\r\n\r\n\t\tvar t = this.distanceToPlane( plane );\r\n\r\n\t\tif ( t === null ) {\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t\treturn this.at( t, optionalTarget );\r\n\r\n\t},\r\n\r\n\tisIntersectionBox: function () {\r\n\r\n\t\tvar v = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\treturn this.intersectBox( box, v ) !== null;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectBox: function ( box, optionalTarget ) {\r\n\r\n\t\t// http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\r\n\r\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\r\n\r\n\t\tvar invdirx = 1 / this.direction.x,\r\n\t\t\tinvdiry = 1 / this.direction.y,\r\n\t\t\tinvdirz = 1 / this.direction.z;\r\n\r\n\t\tvar origin = this.origin;\r\n\r\n\t\tif ( invdirx >= 0 ) {\r\n\r\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\r\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\r\n\r\n\t\t}\r\n\r\n\t\tif ( invdiry >= 0 ) {\r\n\r\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\r\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\r\n\r\n\t\t// These lines also handle the case where tmin or tmax is NaN\r\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\r\n\r\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\r\n\r\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\r\n\r\n\t\tif ( invdirz >= 0 ) {\r\n\r\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\r\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\r\n\r\n\t\t}\r\n\r\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\r\n\r\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\r\n\r\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\r\n\r\n\t\t//return point closest to the ray (positive side)\r\n\r\n\t\tif ( tmax < 0 ) return null;\r\n\r\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, optionalTarget );\r\n\r\n\t},\r\n\r\n\tintersectTriangle: function () {\r\n\r\n\t\t// Compute the offset origin, edges, and normal.\r\n\t\tvar diff = new THREE.Vector3();\r\n\t\tvar edge1 = new THREE.Vector3();\r\n\t\tvar edge2 = new THREE.Vector3();\r\n\t\tvar normal = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c, backfaceCulling, optionalTarget ) {\r\n\r\n\t\t\t// from http://www.geometrictools.com/LibMathematics/Intersection/Wm5IntrRay3Triangle3.cpp\r\n\r\n\t\t\tedge1.subVectors( b, a );\r\n\t\t\tedge2.subVectors( c, a );\r\n\t\t\tnormal.crossVectors( edge1, edge2 );\r\n\r\n\t\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\r\n\t\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\r\n\t\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\r\n\t\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\r\n\t\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\r\n\t\t\tvar DdN = this.direction.dot( normal );\r\n\t\t\tvar sign;\r\n\r\n\t\t\tif ( DdN > 0 ) {\r\n\r\n\t\t\t\tif ( backfaceCulling ) return null;\r\n\t\t\t\tsign = 1;\r\n\r\n\t\t\t} else if ( DdN < 0 ) {\r\n\r\n\t\t\t\tsign = - 1;\r\n\t\t\t\tDdN = - DdN;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdiff.subVectors( this.origin, a );\r\n\t\t\tvar DdQxE2 = sign * this.direction.dot( edge2.crossVectors( diff, edge2 ) );\r\n\r\n\t\t\t// b1 < 0, no intersection\r\n\t\t\tif ( DdQxE2 < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar DdE1xQ = sign * this.direction.dot( edge1.cross( diff ) );\r\n\r\n\t\t\t// b2 < 0, no intersection\r\n\t\t\tif ( DdE1xQ < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// b1+b2 > 1, no intersection\r\n\t\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Line intersects triangle, check if ray does.\r\n\t\t\tvar QdN = - sign * diff.dot( normal );\r\n\r\n\t\t\t// t < 0, no intersection\r\n\t\t\tif ( QdN < 0 ) {\r\n\r\n\t\t\t\treturn null;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Ray intersects triangle.\r\n\t\t\treturn this.at( QdN / DdN, optionalTarget );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tapplyMatrix4: function ( matrix4 ) {\r\n\r\n\t\tthis.direction.add( this.origin ).applyMatrix4( matrix4 );\r\n\t\tthis.origin.applyMatrix4( matrix4 );\r\n\t\tthis.direction.sub( this.origin );\r\n\t\tthis.direction.normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( ray ) {\r\n\r\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Sphere.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Sphere = function ( center, radius ) {\r\n\r\n\tthis.center = ( center !== undefined ) ? center : new THREE.Vector3();\r\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\r\n\r\n};\r\n\r\nTHREE.Sphere.prototype = {\r\n\r\n\tconstructor: THREE.Sphere,\r\n\r\n\tset: function ( center, radius ) {\r\n\r\n\t\tthis.center.copy( center );\r\n\t\tthis.radius = radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPoints: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\r\n\t\treturn function ( points, optionalCenter ) {\r\n\r\n\t\t\tvar center = this.center;\r\n\r\n\t\t\tif ( optionalCenter !== undefined ) {\r\n\r\n\t\t\t\tcenter.copy( optionalCenter );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbox.setFromPoints( points ).center( center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( sphere ) {\r\n\r\n\t\tthis.center.copy( sphere.center );\r\n\t\tthis.radius = sphere.radius;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tempty: function () {\r\n\r\n\t\treturn ( this.radius <= 0 );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\r\n\r\n\t},\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar radiusSum = this.radius + sphere.radius;\r\n\r\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\r\n\r\n\t},\r\n\r\n\tclampPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\tresult.copy( point );\r\n\r\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\r\n\r\n\t\t\tresult.sub( this.center ).normalize();\r\n\t\t\tresult.multiplyScalar( this.radius ).add( this.center );\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t},\r\n\r\n\tgetBoundingBox: function ( optionalTarget ) {\r\n\r\n\t\tvar box = optionalTarget || new THREE.Box3();\r\n\r\n\t\tbox.set( this.center, this.center );\r\n\t\tbox.expandByScalar( this.radius );\r\n\r\n\t\treturn box;\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function ( matrix ) {\r\n\r\n\t\tthis.center.applyMatrix4( matrix );\r\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.center.add( offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( sphere ) {\r\n\r\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Frustum.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Frustum = function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\tthis.planes = [\r\n\r\n\t\t( p0 !== undefined ) ? p0 : new THREE.Plane(),\r\n\t\t( p1 !== undefined ) ? p1 : new THREE.Plane(),\r\n\t\t( p2 !== undefined ) ? p2 : new THREE.Plane(),\r\n\t\t( p3 !== undefined ) ? p3 : new THREE.Plane(),\r\n\t\t( p4 !== undefined ) ? p4 : new THREE.Plane(),\r\n\t\t( p5 !== undefined ) ? p5 : new THREE.Plane()\r\n\r\n\t];\r\n\r\n};\r\n\r\nTHREE.Frustum.prototype = {\r\n\r\n\tconstructor: THREE.Frustum,\r\n\r\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tplanes[ 0 ].copy( p0 );\r\n\t\tplanes[ 1 ].copy( p1 );\r\n\t\tplanes[ 2 ].copy( p2 );\r\n\t\tplanes[ 3 ].copy( p3 );\r\n\t\tplanes[ 4 ].copy( p4 );\r\n\t\tplanes[ 5 ].copy( p5 );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( frustum ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromMatrix: function ( m ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar me = m.elements;\r\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\r\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\r\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\r\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\r\n\r\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\r\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\r\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\r\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\r\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\r\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tintersectsObject: function () {\r\n\r\n\t\tvar sphere = new THREE.Sphere();\r\n\r\n\t\treturn function ( object ) {\r\n\r\n\t\t\tvar geometry = object.geometry;\r\n\r\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t\tsphere.copy( geometry.boundingSphere );\r\n\t\t\tsphere.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\treturn this.intersectsSphere( sphere );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tintersectsSphere: function ( sphere ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\t\tvar center = sphere.center;\r\n\t\tvar negRadius = - sphere.radius;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\r\n\r\n\t\t\tif ( distance < negRadius ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t},\r\n\r\n\tintersectsBox: function () {\r\n\r\n\t\tvar p1 = new THREE.Vector3(),\r\n\t\t\tp2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( box ) {\r\n\r\n\t\t\tvar planes = this.planes;\r\n\r\n\t\t\tfor ( var i = 0; i < 6 ; i ++ ) {\r\n\r\n\t\t\t\tvar plane = planes[ i ];\r\n\r\n\t\t\t\tp1.x = plane.normal.x > 0 ? box.min.x : box.max.x;\r\n\t\t\t\tp2.x = plane.normal.x > 0 ? box.max.x : box.min.x;\r\n\t\t\t\tp1.y = plane.normal.y > 0 ? box.min.y : box.max.y;\r\n\t\t\t\tp2.y = plane.normal.y > 0 ? box.max.y : box.min.y;\r\n\t\t\t\tp1.z = plane.normal.z > 0 ? box.min.z : box.max.z;\r\n\t\t\t\tp2.z = plane.normal.z > 0 ? box.max.z : box.min.z;\r\n\r\n\t\t\t\tvar d1 = plane.distanceToPoint( p1 );\r\n\t\t\t\tvar d2 = plane.distanceToPoint( p2 );\r\n\r\n\t\t\t\t// if both outside plane, no intersection\r\n\r\n\t\t\t\tif ( d1 < 0 && d2 < 0 ) {\r\n\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\tvar planes = this.planes;\r\n\r\n\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\r\n\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Plane.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Plane = function ( normal, constant ) {\r\n\r\n\tthis.normal = ( normal !== undefined ) ? normal : new THREE.Vector3( 1, 0, 0 );\r\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\r\n\r\n};\r\n\r\nTHREE.Plane.prototype = {\r\n\r\n\tconstructor: THREE.Plane,\r\n\r\n\tset: function ( normal, constant ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetComponents: function ( x, y, z, w ) {\r\n\r\n\t\tthis.normal.set( x, y, z );\r\n\t\tthis.constant = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\r\n\r\n\t\tthis.normal.copy( normal );\r\n\t\tthis.constant = - point.dot( this.normal );\t// must be this.normal, not normal, as this.normal is normalized\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromCoplanarPoints: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\r\n\t\treturn function ( a, b, c ) {\r\n\r\n\t\t\tvar normal = v1.subVectors( c, b ).cross( v2.subVectors( a, b ) ).normalize();\r\n\r\n\t\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( plane ) {\r\n\r\n\t\tthis.normal.copy( plane.normal );\r\n\t\tthis.constant = plane.constant;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\r\n\r\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\r\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\r\n\t\tthis.constant *= inverseNormalLength;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnegate: function () {\r\n\r\n\t\tthis.constant *= - 1;\r\n\t\tthis.normal.negate();\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdistanceToPoint: function ( point ) {\r\n\r\n\t\treturn this.normal.dot( point ) + this.constant;\r\n\r\n\t},\r\n\r\n\tdistanceToSphere: function ( sphere ) {\r\n\r\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\r\n\r\n\t},\r\n\r\n\tprojectPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn this.orthoPoint( point, optionalTarget ).sub( point ).negate();\r\n\r\n\t},\r\n\r\n\torthoPoint: function ( point, optionalTarget ) {\r\n\r\n\t\tvar perpendicularMagnitude = this.distanceToPoint( point );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( perpendicularMagnitude );\r\n\r\n\t},\r\n\r\n\tisIntersectionLine: function ( line ) {\r\n\r\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\r\n\r\n\t\tvar startSign = this.distanceToPoint( line.start );\r\n\t\tvar endSign = this.distanceToPoint( line.end );\r\n\r\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\r\n\r\n\t},\r\n\r\n\tintersectLine: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( line, optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tvar direction = line.delta( v1 );\r\n\r\n\t\t\tvar denominator = this.normal.dot( direction );\r\n\r\n\t\t\tif ( denominator === 0 ) {\r\n\r\n\t\t\t\t// line is coplanar, return origin\r\n\t\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\r\n\r\n\t\t\t\t\treturn result.copy( line.start );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Unsure if this is the correct method to handle this case.\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\r\n\r\n\t\t\tif ( t < 0 || t > 1 ) {\r\n\r\n\t\t\t\treturn undefined;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result.copy( direction ).multiplyScalar( t ).add( line.start );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\r\n\tcoplanarPoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.copy( this.normal ).multiplyScalar( - this.constant );\r\n\r\n\t},\r\n\r\n\tapplyMatrix4: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\t\tvar v2 = new THREE.Vector3();\r\n\t\tvar m1 = new THREE.Matrix3();\r\n\r\n\t\treturn function ( matrix, optionalNormalMatrix ) {\r\n\r\n\t\t\t// compute new normal based on theory here:\r\n\t\t\t// http://www.songho.ca/opengl/gl_normaltransform.html\r\n\t\t\tvar normalMatrix = optionalNormalMatrix || m1.getNormalMatrix( matrix );\r\n\t\t\tvar newNormal = v1.copy( this.normal ).applyMatrix3( normalMatrix );\r\n\r\n\t\t\tvar newCoplanarPoint = this.coplanarPoint( v2 );\r\n\t\t\tnewCoplanarPoint.applyMatrix4( matrix );\r\n\r\n\t\t\tthis.setFromNormalAndCoplanarPoint( newNormal, newCoplanarPoint );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( offset ) {\r\n\r\n\t\tthis.constant = this.constant - offset.dot( this.normal );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tequals: function ( plane ) {\r\n\r\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Math.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Math = {\r\n\r\n\tgenerateUUID: function () {\r\n\r\n\t\t// http://www.broofa.com/Tools/Math.uuid.htm\r\n\r\n\t\tvar chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split( '' );\r\n\t\tvar uuid = new Array( 36 );\r\n\t\tvar rnd = 0, r;\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tfor ( var i = 0; i < 36; i ++ ) {\r\n\r\n\t\t\t\tif ( i === 8 || i === 13 || i === 18 || i === 23 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '-';\r\n\r\n\t\t\t\t} else if ( i === 14 ) {\r\n\r\n\t\t\t\t\tuuid[ i ] = '4';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( rnd <= 0x02 ) rnd = 0x2000000 + ( Math.random() * 0x1000000 ) | 0;\r\n\t\t\t\t\tr = rnd & 0xf;\r\n\t\t\t\t\trnd = rnd >> 4;\r\n\t\t\t\t\tuuid[ i ] = chars[ ( i === 19 ) ? ( r & 0x3 ) | 0x8 : r ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn uuid.join( '' );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\t// Clamp value to range <a, b>\r\n\r\n\tclamp: function ( x, a, b ) {\r\n\r\n\t\treturn ( x < a ) ? a : ( ( x > b ) ? b : x );\r\n\r\n\t},\r\n\r\n\t// Clamp value to range <a, inf)\r\n\r\n\tclampBottom: function ( x, a ) {\r\n\r\n\t\treturn x < a ? a : x;\r\n\r\n\t},\r\n\r\n\t// compute euclidian modulo of m % n\r\n\t// https://en.wikipedia.org/wiki/Modulo_operation\r\n\r\n\teuclideanModulo: function ( n, m ) {\r\n\r\n\t\treturn ( ( n % m ) + m ) % m;\r\n\r\n\t},\r\n\r\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\r\n\r\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\r\n\r\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\r\n\r\n\t},\r\n\r\n\t// http://en.wikipedia.org/wiki/Smoothstep\r\n\r\n\tsmoothstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * ( 3 - 2 * x );\r\n\r\n\t},\r\n\r\n\tsmootherstep: function ( x, min, max ) {\r\n\r\n\t\tif ( x <= min ) return 0;\r\n\t\tif ( x >= max ) return 1;\r\n\r\n\t\tx = ( x - min ) / ( max - min );\r\n\r\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\r\n\r\n\t},\r\n\r\n\t// Random float from <0, 1> with 16 bits of randomness\r\n\t// (standard Math.random() creates repetitive patterns when applied over larger space)\r\n\r\n\trandom16: function () {\r\n\r\n\t\treturn ( 65280 * Math.random() + 255 * Math.random() ) / 65535;\r\n\r\n\t},\r\n\r\n\t// Random integer from <low, high> interval\r\n\r\n\trandInt: function ( low, high ) {\r\n\r\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\r\n\r\n\t},\r\n\r\n\t// Random float from <low, high> interval\r\n\r\n\trandFloat: function ( low, high ) {\r\n\r\n\t\treturn low + Math.random() * ( high - low );\r\n\r\n\t},\r\n\r\n\t// Random float from <-range/2, range/2> interval\r\n\r\n\trandFloatSpread: function ( range ) {\r\n\r\n\t\treturn range * ( 0.5 - Math.random() );\r\n\r\n\t},\r\n\r\n\tdegToRad: function () {\r\n\r\n\t\tvar degreeToRadiansFactor = Math.PI / 180;\r\n\r\n\t\treturn function ( degrees ) {\r\n\r\n\t\t\treturn degrees * degreeToRadiansFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tradToDeg: function () {\r\n\r\n\t\tvar radianToDegreesFactor = 180 / Math.PI;\r\n\r\n\t\treturn function ( radians ) {\r\n\r\n\t\t\treturn radians * radianToDegreesFactor;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tisPowerOfTwo: function ( value ) {\r\n\r\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\r\n\r\n\t},\r\n\r\n\tnextPowerOfTwo: function ( value ) {\r\n\r\n\t\tvalue --;\r\n\t\tvalue |= value >> 1;\r\n\t\tvalue |= value >> 2;\r\n\t\tvalue |= value >> 4;\r\n\t\tvalue |= value >> 8;\r\n\t\tvalue |= value >> 16;\r\n\t\tvalue ++;\r\n\r\n\t\treturn value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Spline.js\r\n\r\n/**\r\n * Spline from Tween.js, slightly optimized (and trashed)\r\n * http://sole.github.com/tween.js/examples/05_spline.html\r\n *\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Spline = function ( points ) {\r\n\r\n\tthis.points = points;\r\n\r\n\tvar c = [], v3 = { x: 0, y: 0, z: 0 },\r\n\tpoint, intPoint, weight, w2, w3,\r\n\tpa, pb, pc, pd;\r\n\r\n\tthis.initFromArray = function ( a ) {\r\n\r\n\t\tthis.points = [];\r\n\r\n\t\tfor ( var i = 0; i < a.length; i ++ ) {\r\n\r\n\t\t\tthis.points[ i ] = { x: a[ i ][ 0 ], y: a[ i ][ 1 ], z: a[ i ][ 2 ] };\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getPoint = function ( k ) {\r\n\r\n\t\tpoint = ( this.points.length - 1 ) * k;\r\n\t\tintPoint = Math.floor( point );\r\n\t\tweight = point - intPoint;\r\n\r\n\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\tc[ 1 ] = intPoint;\r\n\t\tc[ 2 ] = intPoint  > this.points.length - 2 ? this.points.length - 1 : intPoint + 1;\r\n\t\tc[ 3 ] = intPoint  > this.points.length - 3 ? this.points.length - 1 : intPoint + 2;\r\n\r\n\t\tpa = this.points[ c[ 0 ] ];\r\n\t\tpb = this.points[ c[ 1 ] ];\r\n\t\tpc = this.points[ c[ 2 ] ];\r\n\t\tpd = this.points[ c[ 3 ] ];\r\n\r\n\t\tw2 = weight * weight;\r\n\t\tw3 = weight * w2;\r\n\r\n\t\tv3.x = interpolate( pa.x, pb.x, pc.x, pd.x, weight, w2, w3 );\r\n\t\tv3.y = interpolate( pa.y, pb.y, pc.y, pd.y, weight, w2, w3 );\r\n\t\tv3.z = interpolate( pa.z, pb.z, pc.z, pd.z, weight, w2, w3 );\r\n\r\n\t\treturn v3;\r\n\r\n\t};\r\n\r\n\tthis.getControlPointsArray = function () {\r\n\r\n\t\tvar i, p, l = this.points.length,\r\n\t\t\tcoords = [];\r\n\r\n\t\tfor ( i = 0; i < l; i ++ ) {\r\n\r\n\t\t\tp = this.points[ i ];\r\n\t\t\tcoords[ i ] = [ p.x, p.y, p.z ];\r\n\r\n\t\t}\r\n\r\n\t\treturn coords;\r\n\r\n\t};\r\n\r\n\t// approximate length by summing linear segments\r\n\r\n\tthis.getLength = function ( nSubDivisions ) {\r\n\r\n\t\tvar i, index, nSamples, position,\r\n\t\t\tpoint = 0, intPoint = 0, oldIntPoint = 0,\r\n\t\t\toldPosition = new THREE.Vector3(),\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tchunkLengths = [],\r\n\t\t\ttotalLength = 0;\r\n\r\n\t\t// first point has 0 length\r\n\r\n\t\tchunkLengths[ 0 ] = 0;\r\n\r\n\t\tif ( ! nSubDivisions ) nSubDivisions = 100;\r\n\r\n\t\tnSamples = this.points.length * nSubDivisions;\r\n\r\n\t\toldPosition.copy( this.points[ 0 ] );\r\n\r\n\t\tfor ( i = 1; i < nSamples; i ++ ) {\r\n\r\n\t\t\tindex = i / nSamples;\r\n\r\n\t\t\tposition = this.getPoint( index );\r\n\t\t\ttmpVec.copy( position );\r\n\r\n\t\t\ttotalLength += tmpVec.distanceTo( oldPosition );\r\n\r\n\t\t\toldPosition.copy( position );\r\n\r\n\t\t\tpoint = ( this.points.length - 1 ) * index;\r\n\t\t\tintPoint = Math.floor( point );\r\n\r\n\t\t\tif ( intPoint !== oldIntPoint ) {\r\n\r\n\t\t\t\tchunkLengths[ intPoint ] = totalLength;\r\n\t\t\t\toldIntPoint = intPoint;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// last point ends with total length\r\n\r\n\t\tchunkLengths[ chunkLengths.length ] = totalLength;\r\n\r\n\t\treturn { chunks: chunkLengths, total: totalLength };\r\n\r\n\t};\r\n\r\n\tthis.reparametrizeByArcLength = function ( samplingCoef ) {\r\n\r\n\t\tvar i, j,\r\n\t\t\tindex, indexCurrent, indexNext,\r\n\t\t\trealDistance,\r\n\t\t\tsampling, position,\r\n\t\t\tnewpoints = [],\r\n\t\t\ttmpVec = new THREE.Vector3(),\r\n\t\t\tsl = this.getLength();\r\n\r\n\t\tnewpoints.push( tmpVec.copy( this.points[ 0 ] ).clone() );\r\n\r\n\t\tfor ( i = 1; i < this.points.length; i ++ ) {\r\n\r\n\t\t\t//tmpVec.copy( this.points[ i - 1 ] );\r\n\t\t\t//linearDistance = tmpVec.distanceTo( this.points[ i ] );\r\n\r\n\t\t\trealDistance = sl.chunks[ i ] - sl.chunks[ i - 1 ];\r\n\r\n\t\t\tsampling = Math.ceil( samplingCoef * realDistance / sl.total );\r\n\r\n\t\t\tindexCurrent = ( i - 1 ) / ( this.points.length - 1 );\r\n\t\t\tindexNext = i / ( this.points.length - 1 );\r\n\r\n\t\t\tfor ( j = 1; j < sampling - 1; j ++ ) {\r\n\r\n\t\t\t\tindex = indexCurrent + j * ( 1 / sampling ) * ( indexNext - indexCurrent );\r\n\r\n\t\t\t\tposition = this.getPoint( index );\r\n\t\t\t\tnewpoints.push( tmpVec.copy( position ).clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnewpoints.push( tmpVec.copy( this.points[ i ] ).clone() );\r\n\r\n\t\t}\r\n\r\n\t\tthis.points = newpoints;\r\n\r\n\t};\r\n\r\n\t// Catmull-Rom\r\n\r\n\tfunction interpolate( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/math/Triangle.js\r\n\r\n/**\r\n * @author bhouston / http://exocortex.com\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Triangle = function ( a, b, c ) {\r\n\r\n\tthis.a = ( a !== undefined ) ? a : new THREE.Vector3();\r\n\tthis.b = ( b !== undefined ) ? b : new THREE.Vector3();\r\n\tthis.c = ( c !== undefined ) ? c : new THREE.Vector3();\r\n\r\n};\r\n\r\nTHREE.Triangle.normal = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\r\n\treturn function ( a, b, c, optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tresult.subVectors( c, b );\r\n\t\tv0.subVectors( a, b );\r\n\t\tresult.cross( v0 );\r\n\r\n\t\tvar resultLengthSq = result.lengthSq();\r\n\t\tif ( resultLengthSq > 0 ) {\r\n\r\n\t\t\treturn result.multiplyScalar( 1 / Math.sqrt( resultLengthSq ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn result.set( 0, 0, 0 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// static/instance method to calculate barycentric coordinates\r\n// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\r\nTHREE.Triangle.barycoordFromPoint = function () {\r\n\r\n\tvar v0 = new THREE.Vector3();\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c, optionalTarget ) {\r\n\r\n\t\tv0.subVectors( c, a );\r\n\t\tv1.subVectors( b, a );\r\n\t\tv2.subVectors( point, a );\r\n\r\n\t\tvar dot00 = v0.dot( v0 );\r\n\t\tvar dot01 = v0.dot( v1 );\r\n\t\tvar dot02 = v0.dot( v2 );\r\n\t\tvar dot11 = v1.dot( v1 );\r\n\t\tvar dot12 = v1.dot( v2 );\r\n\r\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t// collinear or singular triangle\r\n\t\tif ( denom === 0 ) {\r\n\r\n\t\t\t// arbitrary location outside of triangle?\r\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\r\n\t\t\treturn result.set( - 2, - 1, - 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar invDenom = 1 / denom;\r\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\r\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\r\n\r\n\t\t// barycentric coordinates must always sum to 1\r\n\t\treturn result.set( 1 - u - v, v, u );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.containsPoint = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\r\n\treturn function ( point, a, b, c ) {\r\n\r\n\t\tvar result = THREE.Triangle.barycoordFromPoint( point, a, b, c, v1 );\r\n\r\n\t\treturn ( result.x >= 0 ) && ( result.y >= 0 ) && ( ( result.x + result.y ) <= 1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Triangle.prototype = {\r\n\r\n\tconstructor: THREE.Triangle,\r\n\r\n\tset: function ( a, b, c ) {\r\n\r\n\t\tthis.a.copy( a );\r\n\t\tthis.b.copy( b );\r\n\t\tthis.c.copy( c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\r\n\r\n\t\tthis.a.copy( points[ i0 ] );\r\n\t\tthis.b.copy( points[ i1 ] );\r\n\t\tthis.c.copy( points[ i2 ] );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( triangle ) {\r\n\r\n\t\tthis.a.copy( triangle.a );\r\n\t\tthis.b.copy( triangle.b );\r\n\t\tthis.c.copy( triangle.c );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tarea: function () {\r\n\r\n\t\tvar v0 = new THREE.Vector3();\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tv0.subVectors( this.c, this.b );\r\n\t\t\tv1.subVectors( this.a, this.b );\r\n\r\n\t\t\treturn v0.cross( v1 ).length() * 0.5;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tmidpoint: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\t\treturn result.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\r\n\r\n\t},\r\n\r\n\tnormal: function ( optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.normal( this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tplane: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Plane();\r\n\r\n\t\treturn result.setFromCoplanarPoints( this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tbarycoordFromPoint: function ( point, optionalTarget ) {\r\n\r\n\t\treturn THREE.Triangle.barycoordFromPoint( point, this.a, this.b, this.c, optionalTarget );\r\n\r\n\t},\r\n\r\n\tcontainsPoint: function ( point ) {\r\n\r\n\t\treturn THREE.Triangle.containsPoint( point, this.a, this.b, this.c );\r\n\r\n\t},\r\n\r\n\tequals: function ( triangle ) {\r\n\r\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Clock.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Clock = function ( autoStart ) {\r\n\r\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.oldTime = 0;\r\n\tthis.elapsedTime = 0;\r\n\r\n\tthis.running = false;\r\n\r\n};\r\n\r\nTHREE.Clock.prototype = {\r\n\r\n\tconstructor: THREE.Clock,\r\n\r\n\tstart: function () {\r\n\r\n\t\tthis.startTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t : Date.now();\r\n\r\n\t\tthis.oldTime = this.startTime;\r\n\t\tthis.running = true;\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.getElapsedTime();\r\n\t\tthis.running = false;\r\n\r\n\t},\r\n\r\n\tgetElapsedTime: function () {\r\n\r\n\t\tthis.getDelta();\r\n\t\treturn this.elapsedTime;\r\n\r\n\t},\r\n\r\n\tgetDelta: function () {\r\n\r\n\t\tvar diff = 0;\r\n\r\n\t\tif ( this.autoStart && ! this.running ) {\r\n\r\n\t\t\tthis.start();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.running ) {\r\n\r\n\t\t\tvar newTime = self.performance !== undefined && self.performance.now !== undefined\r\n\t\t\t\t\t ? self.performance.now()\r\n\t\t\t\t\t : Date.now();\r\n\r\n\t\t\tdiff = 0.001 * ( newTime - this.oldTime );\r\n\t\t\tthis.oldTime = newTime;\r\n\r\n\t\t\tthis.elapsedTime += diff;\r\n\r\n\t\t}\r\n\r\n\t\treturn diff;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/EventDispatcher.js\r\n\r\n/**\r\n * https://github.com/mrdoob/eventdispatcher.js/\r\n */\r\n\r\nTHREE.EventDispatcher = function () {};\r\n\r\nTHREE.EventDispatcher.prototype = {\r\n\r\n\tconstructor: THREE.EventDispatcher,\r\n\r\n\tapply: function ( object ) {\r\n\r\n\t\tobject.addEventListener = THREE.EventDispatcher.prototype.addEventListener;\r\n\t\tobject.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener;\r\n\t\tobject.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener;\r\n\t\tobject.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent;\r\n\r\n\t},\r\n\r\n\taddEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) this._listeners = {};\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] === undefined ) {\r\n\r\n\t\t\tlisteners[ type ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\r\n\r\n\t\t\tlisteners[ type ].push( listener );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\thasEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return false;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\r\n\t\tif ( listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1 ) {\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t},\r\n\r\n\tremoveEventListener: function ( type, listener ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tvar index = listenerArray.indexOf( listener );\r\n\r\n\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\tlistenerArray.splice( index, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tdispatchEvent: function ( event ) {\r\n\r\n\t\tif ( this._listeners === undefined ) return;\r\n\r\n\t\tvar listeners = this._listeners;\r\n\t\tvar listenerArray = listeners[ event.type ];\r\n\r\n\t\tif ( listenerArray !== undefined ) {\r\n\r\n\t\t\tevent.target = this;\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar length = listenerArray.length;\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ] = listenerArray[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\t\tarray[ i ].call( this, event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Raycaster.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author bhouston / http://exocortex.com/\r\n * @author stephomi / http://stephaneginier.com/\r\n */\r\n\r\n( function ( THREE ) {\r\n\r\n\tTHREE.Raycaster = function ( origin, direction, near, far ) {\r\n\r\n\t\tthis.ray = new THREE.Ray( origin, direction );\r\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\tthis.near = near || 0;\r\n\t\tthis.far = far || Infinity;\r\n\r\n\t\tthis.params = {\r\n\t\t\tMesh: {},\r\n\t\t\tLine: {},\r\n\t\t\tLOD: {},\r\n\t\t\tPoints: { threshold: 1 },\r\n\t\t\tSprite: {}\r\n\t\t};\r\n\r\n\t\tObject.defineProperties( this.params, {\r\n\t\t\tPointCloud: {\r\n\t\t\t\tget: function () {\r\n\t\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\r\n\t\t\t\t\treturn this.Points;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t};\r\n\r\n\tfunction descSort( a, b ) {\r\n\r\n\t\treturn a.distance - b.distance;\r\n\r\n\t}\r\n\r\n\tvar intersectObject = function ( object, raycaster, intersects, recursive ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tobject.raycast( raycaster, intersects );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tvar children = object.children;\r\n\r\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tTHREE.Raycaster.prototype = {\r\n\r\n\t\tconstructor: THREE.Raycaster,\r\n\r\n\t\tlinePrecision: 1,\r\n\r\n\t\tset: function ( origin, direction ) {\r\n\r\n\t\t\t// direction is assumed to be normalized (for accurate distance calculations)\r\n\r\n\t\t\tthis.ray.set( origin, direction );\r\n\r\n\t\t},\r\n\r\n\t\tsetFromCamera: function ( coords, camera ) {\r\n\r\n\t\t\tif ( camera instanceof THREE.PerspectiveCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\r\n\r\n\t\t\t} else if ( camera instanceof THREE.OrthographicCamera ) {\r\n\r\n\t\t\t\tthis.ray.origin.set( coords.x, coords.y, - 1 ).unproject( camera );\r\n\t\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\r\n\t\tintersectObject: function ( object, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tintersectObject( object, this, intersects, recursive );\r\n\r\n\t\t\tintersects.sort( descSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t},\r\n\r\n\t\tintersectObjects: function ( objects, recursive ) {\r\n\r\n\t\t\tvar intersects = [];\r\n\r\n\t\t\tif ( Array.isArray( objects ) === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\r\n\t\t\t\treturn intersects;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tintersects.sort( descSort );\r\n\r\n\t\t\treturn intersects;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}( THREE ) );\r\n\r\n// File:src/core/Object3D.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author elephantatwork / www.elephantatwork.ch\r\n */\r\n\r\nTHREE.Object3D = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.Object3DIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Object3D';\r\n\r\n\tthis.parent = null;\r\n\tthis.children = [];\r\n\r\n\tthis.up = THREE.Object3D.DefaultUp.clone();\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar rotation = new THREE.Euler();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3( 1, 1, 1 );\r\n\r\n\tvar onRotationChange = function () {\r\n\r\n\t\tquaternion.setFromEuler( rotation, false );\r\n\r\n\t};\r\n\r\n\tvar onQuaternionChange = function () {\r\n\r\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\r\n\r\n\t};\r\n\r\n\trotation.onChange( onRotationChange );\r\n\tquaternion.onChange( onQuaternionChange );\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tposition: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: position\r\n\t\t},\r\n\t\trotation: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: rotation\r\n\t\t},\r\n\t\tquaternion: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: quaternion\r\n\t\t},\r\n\t\tscale: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: scale\r\n\t\t},\r\n\t\tmodelViewMatrix: {\r\n\t\t\tvalue: new THREE.Matrix4()\r\n\t\t},\r\n\t\tnormalMatrix: {\r\n\t\t\tvalue: new THREE.Matrix3()\r\n\t\t}\r\n\t} );\r\n\r\n\tthis.rotationAutoUpdate = true;\r\n\r\n\tthis.matrix = new THREE.Matrix4();\r\n\tthis.matrixWorld = new THREE.Matrix4();\r\n\r\n\tthis.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\r\n\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.receiveShadow = false;\r\n\r\n\tthis.frustumCulled = true;\r\n\tthis.renderOrder = 0;\r\n\r\n\tthis.userData = {};\r\n\r\n};\r\n\r\nTHREE.Object3D.DefaultUp = new THREE.Vector3( 0, 1, 0 );\r\nTHREE.Object3D.DefaultMatrixAutoUpdate = true;\r\n\r\nTHREE.Object3D.prototype = {\r\n\r\n\tconstructor: THREE.Object3D,\r\n\r\n\tget eulerOrder () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\r\n\t\treturn this.rotation.order;\r\n\r\n\t},\r\n\r\n\tset eulerOrder ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .eulerOrder has been moved to .rotation.order.' );\r\n\r\n\t\tthis.rotation.order = value;\r\n\r\n\t},\r\n\r\n\tget useQuaternion () {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t},\r\n\r\n\tset useQuaternion ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\r\n\r\n\t},\r\n\r\n\tset renderDepth ( value ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tthis.matrix.multiplyMatrices( matrix, this.matrix );\r\n\r\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\r\n\r\n\t},\r\n\r\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\r\n\r\n\t\t// assumes axis is normalized\r\n\r\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t},\r\n\r\n\tsetRotationFromEuler: function ( euler ) {\r\n\r\n\t\tthis.quaternion.setFromEuler( euler, true );\r\n\r\n\t},\r\n\r\n\tsetRotationFromMatrix: function ( m ) {\r\n\r\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m );\r\n\r\n\t},\r\n\r\n\tsetRotationFromQuaternion: function ( q ) {\r\n\r\n\t\t// assumes q is normalized\r\n\r\n\t\tthis.quaternion.copy( q );\r\n\r\n\t},\r\n\r\n\trotateOnAxis: function () {\r\n\r\n\t\t// rotate object on axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar q1 = new THREE.Quaternion();\r\n\r\n\t\treturn function ( axis, angle ) {\r\n\r\n\t\t\tq1.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\tthis.quaternion.multiply( q1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( angle ) {\r\n\r\n\t\t\treturn this.rotateOnAxis( v1, angle );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateOnAxis: function () {\r\n\r\n\t\t// translate object by distance along axis in object space\r\n\t\t// axis is assumed to be normalized\r\n\r\n\t\tvar v1 = new THREE.Vector3();\r\n\r\n\t\treturn function ( axis, distance ) {\r\n\r\n\t\t\tv1.copy( axis ).applyQuaternion( this.quaternion );\r\n\r\n\t\t\tthis.position.add( v1.multiplyScalar( distance ) );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function ( distance, axis ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\r\n\t\treturn this.translateOnAxis( axis, distance );\r\n\r\n\t},\r\n\r\n\ttranslateX: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 1, 0, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateY: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslateZ: function () {\r\n\r\n\t\tvar v1 = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\t\treturn function ( distance ) {\r\n\r\n\t\t\treturn this.translateOnAxis( v1, distance );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlocalToWorld: function ( vector ) {\r\n\r\n\t\treturn vector.applyMatrix4( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tworldToLocal: function () {\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\treturn vector.applyMatrix4( m1.getInverse( this.matrixWorld ) );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\t// This routine does not support objects with rotated and/or translated parent(s)\r\n\r\n\t\tvar m1 = new THREE.Matrix4();\r\n\r\n\t\treturn function ( vector ) {\r\n\r\n\t\t\tm1.lookAt( vector, this.position, this.up );\r\n\r\n\t\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tadd: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.add( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object === this ) {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Object3D ) {\r\n\r\n\t\t\tif ( object.parent !== null ) {\r\n\r\n\t\t\t\tobject.parent.remove( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.parent = this;\r\n\t\t\tobject.dispatchEvent( { type: 'added' } );\r\n\r\n\t\t\tthis.children.push( object );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tremove: function ( object ) {\r\n\r\n\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\r\n\r\n\t\t\t\tthis.remove( arguments[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar index = this.children.indexOf( object );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tobject.parent = null;\r\n\r\n\t\t\tobject.dispatchEvent( { type: 'removed' } );\r\n\r\n\t\t\tthis.children.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetChildByName: function ( name ) {\r\n\r\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\r\n\t\treturn this.getObjectByName( name );\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( id ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'id', id );\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( name ) {\r\n\r\n\t\treturn this.getObjectByProperty( 'name', name );\r\n\r\n\t},\r\n\r\n\tgetObjectByProperty: function ( name, value ) {\r\n\r\n\t\tif ( this[ name ] === value ) return this;\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar child = this.children[ i ];\r\n\t\t\tvar object = child.getObjectByProperty( name, value );\r\n\r\n\t\t\tif ( object !== undefined ) {\r\n\r\n\t\t\t\treturn object;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\r\n\t},\r\n\r\n\tgetWorldPosition: function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\treturn result.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t},\r\n\r\n\tgetWorldQuaternion: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar scale = new THREE.Vector3();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Quaternion();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, result, scale );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldRotation: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Euler();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.setFromQuaternion( quaternion, this.rotation.order, false );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldScale: function () {\r\n\r\n\t\tvar position = new THREE.Vector3();\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.updateMatrixWorld( true );\r\n\r\n\t\t\tthis.matrixWorld.decompose( position, quaternion, result );\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tgetWorldDirection: function () {\r\n\r\n\t\tvar quaternion = new THREE.Quaternion();\r\n\r\n\t\treturn function ( optionalTarget ) {\r\n\r\n\t\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\t\treturn result.set( 0, 0, 1 ).applyQuaternion( quaternion );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\traycast: function () {},\r\n\r\n\ttraverse: function ( callback ) {\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverse( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseVisible: function ( callback ) {\r\n\r\n\t\tif ( this.visible === false ) return;\r\n\r\n\t\tcallback( this );\r\n\r\n\t\tvar children = this.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tchildren[ i ].traverseVisible( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttraverseAncestors: function ( callback ) {\r\n\r\n\t\tvar parent = this.parent;\r\n\r\n\t\tif ( parent !== null ) {\r\n\r\n\t\t\tcallback( parent );\r\n\r\n\t\t\tparent.traverseAncestors( callback );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdateMatrix: function () {\r\n\r\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\r\n\r\n\t\tthis.matrixWorldNeedsUpdate = true;\r\n\r\n\t},\r\n\r\n\tupdateMatrixWorld: function ( force ) {\r\n\r\n\t\tif ( this.matrixAutoUpdate === true ) this.updateMatrix();\r\n\r\n\t\tif ( this.matrixWorldNeedsUpdate === true || force === true ) {\r\n\r\n\t\t\tif ( this.parent === null ) {\r\n\r\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.matrixWorldNeedsUpdate = false;\r\n\r\n\t\t\tforce = true;\r\n\r\n\t\t}\r\n\r\n\t\t// update children\r\n\r\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\r\n\r\n\t\t\tthis.children[ i ].updateMatrixWorld( force );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar isRootObject = ( meta === undefined );\r\n\r\n\t\tvar data = {};\r\n\r\n\t\t// meta is a hash used to collect geometries, materials.\r\n\t\t// not providing it implies that this is the root object\r\n\t\t// being serialized.\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\t// initialize meta obj\r\n\t\t\tmeta = {\r\n\t\t\t\tgeometries: {},\r\n\t\t\t\tmaterials: {},\r\n\t\t\t\ttextures: {},\r\n\t\t\t\timages: {}\r\n\t\t\t};\r\n\r\n\t\t\tdata.metadata = {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Object',\r\n\t\t\t\tgenerator: 'Object3D.toJSON'\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// standard Object3D serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\r\n\t\tif ( this.visible !== true ) data.visible = this.visible;\r\n\r\n\t\tdata.matrix = this.matrix.toArray();\r\n\r\n\t\tif ( this.children.length > 0 ) {\r\n\r\n\t\t\tdata.children = [];\r\n\r\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\r\n\r\n\t\t\t\tdata.children.push( this.children[ i ].toJSON( meta ).object );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar output = {};\r\n\r\n\t\tif ( isRootObject ) {\r\n\r\n\t\t\tvar geometries = extractFromCache( meta.geometries );\r\n\t\t\tvar materials = extractFromCache( meta.materials );\r\n\t\t\tvar textures = extractFromCache( meta.textures );\r\n\t\t\tvar images = extractFromCache( meta.images );\r\n\r\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\r\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\r\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\r\n\t\t\tif ( images.length > 0 ) output.images = images;\r\n\r\n\t\t}\r\n\r\n\t\toutput.object = data;\r\n\r\n\t\treturn output;\r\n\r\n\t\t// extract data from the cache hash\r\n\t\t// remove metadata on each item\r\n\t\t// and return as array\r\n\t\tfunction extractFromCache ( cache ) {\r\n\r\n\t\t\tvar values = [];\r\n\t\t\tfor ( var key in cache ) {\r\n\r\n\t\t\t\tvar data = cache[ key ];\r\n\t\t\t\tdelete data.metadata;\r\n\t\t\t\tvalues.push( data );\r\n\r\n\t\t\t}\r\n\t\t\treturn values;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function ( recursive ) {\r\n\r\n\t\treturn new this.constructor().copy( this, recursive );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tif ( recursive === undefined ) recursive = true;\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.up.copy( source.up );\r\n\r\n\t\tthis.position.copy( source.position );\r\n\t\tthis.quaternion.copy( source.quaternion );\r\n\t\tthis.scale.copy( source.scale );\r\n\r\n\t\tthis.rotationAutoUpdate = source.rotationAutoUpdate;\r\n\r\n\t\tthis.matrix.copy( source.matrix );\r\n\t\tthis.matrixWorld.copy( source.matrixWorld );\r\n\r\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\tthis.castShadow = source.castShadow;\r\n\t\tthis.receiveShadow = source.receiveShadow;\r\n\r\n\t\tthis.frustumCulled = source.frustumCulled;\r\n\t\tthis.renderOrder = source.renderOrder;\r\n\r\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\r\n\r\n\t\tif ( recursive === true ) {\r\n\r\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\r\n\r\n\t\t\t\tvar child = source.children[ i ];\r\n\t\t\t\tthis.add( child.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Object3D.prototype );\r\n\r\nTHREE.Object3DIdCount = 0;\r\n\r\n// File:src/core/Face3.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Face3 = function ( a, b, c, normal, color, materialIndex ) {\r\n\r\n\tthis.a = a;\r\n\tthis.b = b;\r\n\tthis.c = c;\r\n\r\n\tthis.normal = normal instanceof THREE.Vector3 ? normal : new THREE.Vector3();\r\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\r\n\r\n\tthis.color = color instanceof THREE.Color ? color : new THREE.Color();\r\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\r\n\r\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\r\n\r\n};\r\n\r\nTHREE.Face3.prototype = {\r\n\r\n\tconstructor: THREE.Face3,\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.a = source.a;\r\n\t\tthis.b = source.b;\r\n\t\tthis.c = source.c;\r\n\r\n\t\tthis.normal.copy( source.normal );\r\n\t\tthis.color.copy( source.color );\r\n\r\n\t\tthis.materialIndex = source.materialIndex;\r\n\r\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Face4.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Face4 = function ( a, b, c, d, normal, color, materialIndex ) {\r\n\r\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\r\n\treturn new THREE.Face3( a, b, c, normal, color, materialIndex );\r\n\r\n};\r\n\r\n// File:src/core/BufferAttribute.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferAttribute = function ( array, itemSize ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.itemSize = itemSize;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.BufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.BufferAttribute,\r\n\r\n\tget length() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.array.length / this.itemSize;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.itemSize = source.itemSize;\r\n\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.itemSize;\r\n\t\tindex2 *= attribute.itemSize;\r\n\r\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyArray: function ( array ) {\r\n\r\n\t\tthis.array.set( array );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyColorsArray: function ( colors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar color = colors[ i ];\r\n\r\n\t\t\tif ( color === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\r\n\t\t\t\tcolor = new THREE.Color();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = color.r;\r\n\t\t\tarray[ offset ++ ] = color.g;\r\n\t\t\tarray[ offset ++ ] = color.b;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyIndicesArray: function ( indices ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar index = indices[ i ];\r\n\r\n\t\t\tarray[ offset ++ ] = index.a;\r\n\t\t\tarray[ offset ++ ] = index.b;\r\n\t\t\tarray[ offset ++ ] = index.c;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector2sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector2();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector3sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopyVector4sArray: function ( vectors ) {\r\n\r\n\t\tvar array = this.array, offset = 0;\r\n\r\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar vector = vectors[ i ];\r\n\r\n\t\t\tif ( vector === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\r\n\t\t\t\tvector = new THREE.Vector4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tarray[ offset ++ ] = vector.x;\r\n\t\t\tarray[ offset ++ ] = vector.y;\r\n\t\t\tarray[ offset ++ ] = vector.z;\r\n\t\t\tarray[ offset ++ ] = vector.w;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize ];\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.array[ index * this.itemSize ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 1 ];\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 2 ];\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.array[ index * this.itemSize + 3 ];\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex *= this.itemSize;\r\n\r\n\t\tthis.array[ index + 0 ] = x;\r\n\t\tthis.array[ index + 1 ] = y;\r\n\t\tthis.array[ index + 2 ] = z;\r\n\t\tthis.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n//\r\n\r\nTHREE.Int8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint8ClampedAttribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint8ClampedArray( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint16Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint16Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Int32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Int32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Uint32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Uint32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float32Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float32Array( array ), itemSize );\r\n\r\n};\r\n\r\nTHREE.Float64Attribute = function ( array, itemSize ) {\r\n\r\n\treturn new THREE.BufferAttribute( new Float64Array( array ), itemSize );\r\n\r\n};\r\n\r\n\r\n// Deprecated\r\n\r\nTHREE.DynamicBufferAttribute = function ( array, itemSize ) {\r\n\r\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.' );\r\n\treturn new THREE.BufferAttribute( array, itemSize ).setDynamic( true );\r\n\r\n};\r\n\r\n// File:src/core/InstancedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferAttribute = function ( array, itemSize, meshPerAttribute ) {\r\n\r\n\tTHREE.BufferAttribute.call( this, array, itemSize );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferAttribute.prototype = Object.create( THREE.BufferAttribute.prototype );\r\nTHREE.InstancedBufferAttribute.prototype.constructor = THREE.InstancedBufferAttribute;\r\n\r\nTHREE.InstancedBufferAttribute.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.BufferAttribute.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBuffer = function ( array, stride ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.array = array;\r\n\tthis.stride = stride;\r\n\r\n\tthis.dynamic = false;\r\n\tthis.updateRange = { offset: 0, count: - 1 };\r\n\r\n\tthis.version = 0;\r\n\r\n};\r\n\r\nTHREE.InterleavedBuffer.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBuffer,\r\n\r\n\tget length () {\r\n\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count () {\r\n\r\n\t\treturn this.array.length / this.stride;\r\n\r\n\t},\r\n\r\n\tset needsUpdate( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tsetDynamic: function ( value ) {\r\n\r\n\t\tthis.dynamic = value;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.array = new source.array.constructor( source.array );\r\n\t\tthis.stride = source.stride;\r\n\t\tthis.dynamic = source.dynamic;\r\n\r\n\t},\r\n\r\n\tcopyAt: function ( index1, attribute, index2 ) {\r\n\r\n\t\tindex1 *= this.stride;\r\n\t\tindex2 *= attribute.stride;\r\n\r\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\r\n\r\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tset: function ( value, offset ) {\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tthis.array.set( value, offset );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/InstancedInterleavedBuffer.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedInterleavedBuffer = function ( array, stride, meshPerAttribute ) {\r\n\r\n\tTHREE.InterleavedBuffer.call( this, array, stride );\r\n\r\n\tthis.meshPerAttribute = meshPerAttribute || 1;\r\n\r\n};\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype = Object.create( THREE.InterleavedBuffer.prototype );\r\nTHREE.InstancedInterleavedBuffer.prototype.constructor = THREE.InstancedInterleavedBuffer;\r\n\r\nTHREE.InstancedInterleavedBuffer.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.InterleavedBuffer.prototype.copy.call( this, source );\r\n\r\n\tthis.meshPerAttribute = source.meshPerAttribute;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/core/InterleavedBufferAttribute.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InterleavedBufferAttribute = function ( interleavedBuffer, itemSize, offset ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.data = interleavedBuffer;\r\n\tthis.itemSize = itemSize;\r\n\tthis.offset = offset;\r\n\r\n};\r\n\r\n\r\nTHREE.InterleavedBufferAttribute.prototype = {\r\n\r\n\tconstructor: THREE.InterleavedBufferAttribute,\r\n\r\n\tget length() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Please use .count.' );\r\n\t\treturn this.array.length;\r\n\r\n\t},\r\n\r\n\tget count() {\r\n\r\n\t\treturn this.data.array.length / this.data.stride;\r\n\r\n\t},\r\n\r\n\tsetX: function ( index, x ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetY: function ( index, y ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetZ: function ( index, z ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetW: function ( index, w ) {\r\n\r\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetX: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\r\n\r\n\t},\r\n\r\n\tgetY: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\r\n\r\n\t},\r\n\r\n\tgetZ: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\r\n\r\n\t},\r\n\r\n\tgetW: function ( index ) {\r\n\r\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\r\n\r\n\t},\r\n\r\n\tsetXY: function ( index, x, y ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZ: function ( index, x, y, z ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetXYZW: function ( index, x, y, z, w ) {\r\n\r\n\t\tindex = index * this.data.stride + this.offset;\r\n\r\n\t\tthis.data.array[ index + 0 ] = x;\r\n\t\tthis.data.array[ index + 1 ] = y;\r\n\t\tthis.data.array[ index + 2 ] = z;\r\n\t\tthis.data.array[ index + 3 ] = w;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/core/Geometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author kile / http://kile.stravaganza.org/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\nTHREE.Geometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Geometry';\r\n\r\n\tthis.vertices = [];\r\n\tthis.colors = [];\r\n\tthis.faces = [];\r\n\tthis.faceVertexUvs = [ [] ];\r\n\r\n\tthis.morphTargets = [];\r\n\tthis.morphColors = [];\r\n\tthis.morphNormals = [];\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\tthis.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.elementsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.lineDistancesNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.Geometry.prototype = {\r\n\r\n\tconstructor: THREE.Geometry,\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertex.applyMatrix4( matrix );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.verticesNeedUpdate = true;\r\n\t\tthis.normalsNeedUpdate = true;\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tfromBufferGeometry: function ( geometry ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tvar vertices = attributes.position.array;\r\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\r\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\r\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\r\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\r\n\r\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\r\n\r\n\t\tvar tempNormals = [];\r\n\t\tvar tempUVs = [];\r\n\t\tvar tempUVs2 = [];\r\n\r\n\t\tfor ( var i = 0, j = 0, k = 0; i < vertices.length; i += 3, j += 2, k += 4 ) {\r\n\r\n\t\t\tscope.vertices.push( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\ttempNormals.push( new THREE.Vector3( normals[ i ], normals[ i + 1 ], normals[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( colors !== undefined ) {\r\n\r\n\t\t\t\tscope.colors.push( new THREE.Color( colors[ i ], colors[ i + 1 ], colors[ i + 2 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\ttempUVs.push( new THREE.Vector2( uvs[ j ], uvs[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\ttempUVs2.push( new THREE.Vector2( uvs2[ j ], uvs2[ j + 1 ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar addFace = function ( a, b, c ) {\r\n\r\n\t\t\tvar vertexNormals = normals !== undefined ? [ tempNormals[ a ].clone(), tempNormals[ b ].clone(), tempNormals[ c ].clone() ] : [];\r\n\t\t\tvar vertexColors = colors !== undefined ? [ scope.colors[ a ].clone(), scope.colors[ b ].clone(), scope.colors[ c ].clone() ] : [];\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, c, vertexNormals, vertexColors );\r\n\r\n\t\t\tscope.faces.push( face );\r\n\r\n\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ tempUVs[ a ].clone(), tempUVs[ b ].clone(), tempUVs[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( uvs2 !== undefined ) {\r\n\r\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [ tempUVs2[ a ].clone(), tempUVs2[ b ].clone(), tempUVs2[ c ].clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tif ( indices !== undefined ) {\r\n\r\n\t\t\tvar groups = geometry.groups;\r\n\r\n\t\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\r\n\r\n\t\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\r\n\r\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\r\n\r\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var i = 0; i < vertices.length / 3; i += 3 ) {\r\n\r\n\t\t\t\taddFace( i, i + 1, i + 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeFaceNormals();\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tnormalize: function () {\r\n\r\n\t\tthis.computeBoundingSphere();\r\n\r\n\t\tvar center = this.boundingSphere.center;\r\n\t\tvar radius = this.boundingSphere.radius;\r\n\r\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\t\tmatrix.set(\r\n\t\t\ts, 0, 0, - s * center.x,\r\n\t\t\t0, s, 0, - s * center.y,\r\n\t\t\t0, 0, s, - s * center.z,\r\n\t\t\t0, 0, 0, 1\r\n\t\t);\r\n\r\n\t\tthis.applyMatrix( matrix );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ f ];\r\n\r\n\t\t\tvar vA = this.vertices[ face.a ];\r\n\t\t\tvar vB = this.vertices[ face.b ];\r\n\t\t\tvar vC = this.vertices[ face.c ];\r\n\r\n\t\t\tcb.subVectors( vC, vB );\r\n\t\t\tab.subVectors( vA, vB );\r\n\t\t\tcb.cross( ab );\r\n\r\n\t\t\tcb.normalize();\r\n\r\n\t\t\tface.normal.copy( cb );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function ( areaWeighted ) {\r\n\r\n\t\tvar v, vl, f, fl, face, vertices;\r\n\r\n\t\tvertices = new Array( this.vertices.length );\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ] = new THREE.Vector3();\r\n\r\n\t\t}\r\n\r\n\t\tif ( areaWeighted ) {\r\n\r\n\t\t\t// vertex normals weighted by triangle areas\r\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\r\n\r\n\t\t\tvar vA, vB, vC;\r\n\t\t\tvar cb = new THREE.Vector3(), ab = new THREE.Vector3();\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvA = this.vertices[ face.a ];\r\n\t\t\t\tvB = this.vertices[ face.b ];\r\n\t\t\t\tvC = this.vertices[ face.c ];\r\n\r\n\t\t\t\tcb.subVectors( vC, vB );\r\n\t\t\t\tab.subVectors( vA, vB );\r\n\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\tvertices[ face.a ].add( cb );\r\n\t\t\t\tvertices[ face.b ].add( cb );\r\n\t\t\t\tvertices[ face.c ].add( cb );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tvertices[ face.a ].add( face.normal );\r\n\t\t\t\tvertices[ face.b ].add( face.normal );\r\n\t\t\t\tvertices[ face.c ].add( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\r\n\r\n\t\t\tvertices[ v ].normalize();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\r\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\r\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\r\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\r\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeMorphNormals: function () {\r\n\r\n\t\tvar i, il, f, fl, face;\r\n\r\n\t\t// save original normals\r\n\t\t// - create temp variables on first access\r\n\t\t//   otherwise just copy (for faster repeated calls)\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tif ( ! face.__originalFaceNormal ) {\r\n\r\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\r\n\r\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// use temp geometry to compute face and vertex normals for each morph\r\n\r\n\t\tvar tmpGeo = new THREE.Geometry();\r\n\t\ttmpGeo.faces = this.faces;\r\n\r\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\t\t// create on first access\r\n\r\n\t\t\tif ( ! this.morphNormals[ i ] ) {\r\n\r\n\t\t\t\tthis.morphNormals[ i ] = {};\r\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\r\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\r\n\r\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\r\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\r\n\r\n\t\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\t\tfaceNormal = new THREE.Vector3();\r\n\t\t\t\t\tvertexNormals = { a: new THREE.Vector3(), b: new THREE.Vector3(), c: new THREE.Vector3() };\r\n\r\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\r\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphNormals = this.morphNormals[ i ];\r\n\r\n\t\t\t// set vertices to morph target\r\n\r\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\r\n\r\n\t\t\t// compute morph normals\r\n\r\n\t\t\ttmpGeo.computeFaceNormals();\r\n\t\t\ttmpGeo.computeVertexNormals();\r\n\r\n\t\t\t// store morph normals\r\n\r\n\t\t\tvar faceNormal, vertexNormals;\r\n\r\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\r\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\r\n\r\n\t\t\t\tfaceNormal.copy( face.normal );\r\n\r\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\r\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\r\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore original normals\r\n\r\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\tface = this.faces[ f ];\r\n\r\n\t\t\tface.normal = face.__originalFaceNormal;\r\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.Geometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\r\n\tcomputeLineDistances: function () {\r\n\r\n\t\tvar d = 0;\r\n\t\tvar vertices = this.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tif ( i > 0 ) {\r\n\r\n\t\t\t\td += vertices[ i ].distanceTo( vertices[ i - 1 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.lineDistances[ i ] = d;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingBox.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t}\r\n\r\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.Geometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar normalMatrix,\r\n\t\tvertexOffset = this.vertices.length,\r\n\t\tvertices1 = this.vertices,\r\n\t\tvertices2 = geometry.vertices,\r\n\t\tfaces1 = this.faces,\r\n\t\tfaces2 = geometry.faces,\r\n\t\tuvs1 = this.faceVertexUvs[ 0 ],\r\n\t\tuvs2 = geometry.faceVertexUvs[ 0 ];\r\n\r\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\r\n\r\n\t\tif ( matrix !== undefined ) {\r\n\r\n\t\t\tnormalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t}\r\n\r\n\t\t// vertices\r\n\r\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar vertex = vertices2[ i ];\r\n\r\n\t\t\tvar vertexCopy = vertex.clone();\r\n\r\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\r\n\r\n\t\t\tvertices1.push( vertexCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// faces\r\n\r\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\r\n\t\t\tfaceVertexNormals = face.vertexNormals,\r\n\t\t\tfaceVertexColors = face.vertexColors;\r\n\r\n\t\t\tfaceCopy = new THREE.Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\r\n\t\t\tfaceCopy.normal.copy( face.normal );\r\n\r\n\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\r\n\r\n\t\t\t\tif ( normalMatrix !== undefined ) {\r\n\r\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.color.copy( face.color );\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tcolor = faceVertexColors[ j ];\r\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\r\n\r\n\t\t\tfaces1.push( faceCopy );\r\n\r\n\t\t}\r\n\r\n\t\t// uvs\r\n\r\n\t\tfor ( i = 0, il = uvs2.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar uv = uvs2[ i ], uvCopy = [];\r\n\r\n\t\t\tif ( uv === undefined ) {\r\n\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = uv.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tuvCopy.push( uv[ j ].clone() );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvs1.push( uvCopy );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tmergeMesh: function ( mesh ) {\r\n\r\n\t\tif ( mesh instanceof THREE.Mesh === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tmesh.matrixAutoUpdate && mesh.updateMatrix();\r\n\r\n\t\tthis.merge( mesh.geometry, mesh.matrix );\r\n\r\n\t},\r\n\r\n\t/*\r\n\t * Checks for duplicate vertices with hashmap.\r\n\t * Duplicated vertices are removed\r\n\t * and faces' vertices are updated.\r\n\t */\r\n\r\n\tmergeVertices: function () {\r\n\r\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\r\n\t\tvar unique = [], changes = [];\r\n\r\n\t\tvar v, key;\r\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\r\n\t\tvar precision = Math.pow( 10, precisionPoints );\r\n\t\tvar i, il, face;\r\n\t\tvar indices, j, jl;\r\n\r\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tv = this.vertices[ i ];\r\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\r\n\r\n\t\t\tif ( verticesMap[ key ] === undefined ) {\r\n\r\n\t\t\t\tverticesMap[ key ] = i;\r\n\t\t\t\tunique.push( this.vertices[ i ] );\r\n\t\t\t\tchanges[ i ] = unique.length - 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\r\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// if faces are completely degenerate after merging vertices, we\r\n\t\t// have to remove them from the geometry.\r\n\t\tvar faceIndicesToRemove = [];\r\n\r\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = this.faces[ i ];\r\n\r\n\t\t\tface.a = changes[ face.a ];\r\n\t\t\tface.b = changes[ face.b ];\r\n\t\t\tface.c = changes[ face.c ];\r\n\r\n\t\t\tindices = [ face.a, face.b, face.c ];\r\n\r\n\t\t\tvar dupIndex = - 1;\r\n\r\n\t\t\t// if any duplicate vertices are found in a Face3\r\n\t\t\t// we have to remove the face as nothing can be saved\r\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\r\n\r\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\r\n\r\n\t\t\t\t\tdupIndex = n;\r\n\t\t\t\t\tfaceIndicesToRemove.push( i );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\tvar idx = faceIndicesToRemove[ i ];\r\n\r\n\t\t\tthis.faces.splice( idx, 1 );\r\n\r\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Use unique set of vertices\r\n\r\n\t\tvar diff = this.vertices.length - unique.length;\r\n\t\tthis.vertices = unique;\r\n\t\treturn diff;\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Geometry',\r\n\t\t\t\tgenerator: 'Geometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Geometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tvar vertices = [];\r\n\r\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\r\n\r\n\t\t\tvar vertex = this.vertices[ i ];\r\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = [];\r\n\t\tvar normals = [];\r\n\t\tvar normalsHash = {};\r\n\t\tvar colors = [];\r\n\t\tvar colorsHash = {};\r\n\t\tvar uvs = [];\r\n\t\tvar uvsHash = {};\r\n\r\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = this.faces[ i ];\r\n\r\n\t\t\tvar hasMaterial = false; // face.materialIndex !== undefined;\r\n\t\t\tvar hasFaceUv = false; // deprecated\r\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\r\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\r\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\r\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\r\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\r\n\r\n\t\t\tvar faceType = 0;\r\n\r\n\t\t\tfaceType = setBit( faceType, 0, 0 );\r\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\r\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\r\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\r\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\r\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\r\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\r\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\r\n\r\n\t\t\tfaces.push( faceType );\r\n\t\t\tfaces.push( face.a, face.b, face.c );\r\n\r\n\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\r\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\r\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\t\tfaces.push(\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\r\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\r\n\t\t\t\t);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction setBit( value, position, enabled ) {\r\n\r\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\r\n\r\n\t\t}\r\n\r\n\t\tfunction getNormalIndex( normal ) {\r\n\r\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\r\n\r\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\r\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\r\n\r\n\t\t\treturn normalsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getColorIndex( color ) {\r\n\r\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\r\n\r\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcolorsHash[ hash ] = colors.length;\r\n\t\t\tcolors.push( color.getHex() );\r\n\r\n\t\t\treturn colorsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getUvIndex( uv ) {\r\n\r\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\r\n\r\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\r\n\r\n\t\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\r\n\t\t\tuvs.push( uv.x, uv.y );\r\n\r\n\t\t\treturn uvsHash[ hash ];\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = {};\r\n\r\n\t\tdata.data.vertices = vertices;\r\n\t\tdata.data.normals = normals;\r\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\r\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\r\n\t\tdata.data.faces = faces;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.vertices = [];\r\n\t\tthis.faces = [];\r\n\t\tthis.faceVertexUvs = [ [] ];\r\n\r\n\t\tvar vertices = source.vertices;\r\n\r\n\t\tfor ( var i = 0, il = vertices.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar faces = source.faces;\r\n\r\n\t\tfor ( var i = 0, il = faces.length; i < il; i ++ ) {\r\n\r\n\t\t\tthis.faces.push( faces[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\r\n\r\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\r\n\r\n\t\t\t\tfor ( var k = 0, kl = uvs.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\tvar uv = uvs[ k ];\r\n\r\n\t\t\t\t\tuvsCopy.push( uv.clone() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Geometry.prototype );\r\n\r\nTHREE.GeometryIdCount = 0;\r\n\r\n// File:src/core/DirectGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.DirectGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'DirectGeometry';\r\n\r\n\tthis.indices = [];\r\n\tthis.vertices = [];\r\n\tthis.normals = [];\r\n\tthis.colors = [];\r\n\tthis.uvs = [];\r\n\tthis.uvs2 = [];\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.morphTargets = {};\r\n\r\n\tthis.skinWeights = [];\r\n\tthis.skinIndices = [];\r\n\r\n\t// this.lineDistances = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\t// update flags\r\n\r\n\tthis.verticesNeedUpdate = false;\r\n\tthis.normalsNeedUpdate = false;\r\n\tthis.colorsNeedUpdate = false;\r\n\tthis.uvsNeedUpdate = false;\r\n\tthis.groupsNeedUpdate = false;\r\n\r\n};\r\n\r\nTHREE.DirectGeometry.prototype = {\r\n\r\n\tconstructor: THREE.DirectGeometry,\r\n\r\n\tcomputeBoundingBox: THREE.Geometry.prototype.computeBoundingBox,\r\n\tcomputeBoundingSphere: THREE.Geometry.prototype.computeBoundingSphere,\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeFaceNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tconsole.warn( 'THREE.DirectGeometry: computeVertexNormals() is not a method of this type of geometry.' );\r\n\r\n\t},\r\n\r\n\tcomputeGroups: function ( geometry ) {\r\n\r\n\t\tvar group;\r\n\t\tvar groups = [];\r\n\t\tvar materialIndex;\r\n\r\n\t\tvar faces = geometry.faces;\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t// materials\r\n\r\n\t\t\tif ( face.materialIndex !== materialIndex ) {\r\n\r\n\t\t\t\tmaterialIndex = face.materialIndex;\r\n\r\n\t\t\t\tif ( group !== undefined ) {\r\n\r\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\t\t\tgroups.push( group );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgroup = {\r\n\t\t\t\t\tstart: i * 3,\r\n\t\t\t\t\tmaterialIndex: materialIndex\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group !== undefined ) {\r\n\r\n\t\t\tgroup.count = ( i * 3 ) - group.start;\r\n\t\t\tgroups.push( group );\r\n\r\n\t\t}\r\n\r\n\t\tthis.groups = groups;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\r\n\r\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\r\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\r\n\r\n\t\t// morphs\r\n\r\n\t\tvar morphTargets = geometry.morphTargets;\r\n\t\tvar morphTargetsLength = morphTargets.length;\r\n\r\n\t\tif ( morphTargetsLength > 0 ) {\r\n\r\n\t\t\tvar morphTargetsPosition = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsPosition[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\r\n\r\n\t\t}\r\n\r\n\t\tvar morphNormals = geometry.morphNormals;\r\n\t\tvar morphNormalsLength = morphNormals.length;\r\n\r\n\t\tif ( morphNormalsLength > 0 ) {\r\n\r\n\t\t\tvar morphTargetsNormal = [];\r\n\r\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\r\n\r\n\t\t\t\tmorphTargetsNormal[ i ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\r\n\r\n\t\t}\r\n\r\n\t\t// skins\r\n\r\n\t\tvar skinIndices = geometry.skinIndices;\r\n\t\tvar skinWeights = geometry.skinWeights;\r\n\r\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\r\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\r\n\r\n\t\t//\r\n\r\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\r\n\r\n\t\t\tvar vertexNormals = face.vertexNormals;\r\n\r\n\t\t\tif ( vertexNormals.length === 3 ) {\r\n\r\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar normal = face.normal;\r\n\r\n\t\t\t\tthis.normals.push( normal, normal, normal );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar vertexColors = face.vertexColors;\r\n\r\n\t\t\tif ( vertexColors.length === 3 ) {\r\n\r\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar color = face.color;\r\n\r\n\t\t\t\tthis.colors.push( color, color, color );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\r\n\r\n\t\t\t\t\tthis.uvs.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasFaceVertexUv2 === true ) {\r\n\r\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\r\n\r\n\t\t\t\tif ( vertexUvs !== undefined ) {\r\n\r\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\r\n\r\n\t\t\t\t\tthis.uvs2.push( new THREE.Vector2(), new THREE.Vector2(), new THREE.Vector2() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// morphs\r\n\r\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\r\n\r\n\t\t\t\tmorphTargetsPosition[ j ].push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\r\n\r\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\r\n\r\n\t\t\t\tmorphTargetsNormal[ j ].push( morphNormal.a, morphNormal.b, morphNormal.c );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// skins\r\n\r\n\t\t\tif ( hasSkinIndices ) {\r\n\r\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( hasSkinWeights ) {\r\n\r\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.computeGroups( geometry );\r\n\r\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.DirectGeometry.prototype );\r\n\r\n// File:src/core/BufferGeometry.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometry = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.GeometryIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'BufferGeometry';\r\n\r\n\tthis.index = null;\r\n\tthis.attributes = {};\r\n\r\n\tthis.morphAttributes = {};\r\n\r\n\tthis.groups = [];\r\n\r\n\tthis.boundingBox = null;\r\n\tthis.boundingSphere = null;\r\n\r\n\tthis.drawRange = { start: 0, count: Infinity };\r\n\r\n};\r\n\r\nTHREE.BufferGeometry.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometry,\r\n\r\n\taddIndex: function ( index ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\r\n\t\tthis.setIndex( index );\r\n\r\n\t},\r\n\r\n\tgetIndex: function () {\r\n\r\n\t\treturn this.index;\r\n\r\n\t},\r\n\r\n\tsetIndex: function ( index ) {\r\n\r\n\t\tthis.index = index;\r\n\r\n\t},\r\n\r\n\taddAttribute: function ( name, attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.BufferAttribute === false && attribute instanceof THREE.InterleavedBufferAttribute === false ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\r\n\r\n\t\t\tthis.addAttribute( name, new THREE.BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( name === 'index' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\r\n\t\t\tthis.setIndex( attribute );\r\n\r\n\t\t}\r\n\r\n\t\tthis.attributes[ name ] = attribute;\r\n\r\n\t},\r\n\r\n\tgetAttribute: function ( name ) {\r\n\r\n\t\treturn this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tremoveAttribute: function ( name ) {\r\n\r\n\t\tdelete this.attributes[ name ];\r\n\r\n\t},\r\n\r\n\tget drawcalls() {\r\n\r\n\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\r\n\t\treturn this.groups;\r\n\r\n\t},\r\n\r\n\tget offsets() {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\r\n\t\treturn this.groups;\r\n\r\n\t},\r\n\r\n\taddDrawCall: function ( start, count, indexOffset ) {\r\n\r\n\t\tif ( indexOffset !== undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\r\n\t\tthis.addGroup( start, count );\r\n\r\n\t},\r\n\r\n\tclearDrawCalls: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\r\n\t\tthis.clearGroups();\r\n\r\n\t},\r\n\r\n\taddGroup: function ( start, count, materialIndex ) {\r\n\r\n\t\tthis.groups.push( {\r\n\r\n\t\t\tstart: start,\r\n\t\t\tcount: count,\r\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tclearGroups: function () {\r\n\r\n\t\tthis.groups = [];\r\n\r\n\t},\r\n\r\n\tsetDrawRange: function ( start, count ) {\r\n\r\n\t\tthis.drawRange.start = start;\r\n\t\tthis.drawRange.count = count;\r\n\r\n\t},\r\n\r\n\tapplyMatrix: function ( matrix ) {\r\n\r\n\t\tvar position = this.attributes.position;\r\n\r\n\t\tif ( position !== undefined ) {\r\n\r\n\t\t\tmatrix.applyToVector3Array( position.array );\r\n\t\t\tposition.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tvar normal = this.attributes.normal;\r\n\r\n\t\tif ( normal !== undefined ) {\r\n\r\n\t\t\tvar normalMatrix = new THREE.Matrix3().getNormalMatrix( matrix );\r\n\r\n\t\t\tnormalMatrix.applyToVector3Array( normal.array );\r\n\t\t\tnormal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingBox !== null ) {\r\n\r\n\t\t\tthis.computeBoundingBox();\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.computeBoundingSphere();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\trotateX: function () {\r\n\r\n\t\t// rotate geometry around world x-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateX( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationX( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateY: function () {\r\n\r\n\t\t// rotate geometry around world y-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateY( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationY( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\trotateZ: function () {\r\n\r\n\t\t// rotate geometry around world z-axis\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function rotateZ( angle ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeRotationZ( angle );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\ttranslate: function () {\r\n\r\n\t\t// translate geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function translate( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeTranslation( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tscale: function () {\r\n\r\n\t\t// scale geometry\r\n\r\n\t\tvar m1;\r\n\r\n\t\treturn function scale( x, y, z ) {\r\n\r\n\t\t\tif ( m1 === undefined ) m1 = new THREE.Matrix4();\r\n\r\n\t\t\tm1.makeScale( x, y, z );\r\n\r\n\t\t\tthis.applyMatrix( m1 );\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tlookAt: function () {\r\n\r\n\t\tvar obj;\r\n\r\n\t\treturn function lookAt( vector ) {\r\n\r\n\t\t\tif ( obj === undefined ) obj = new THREE.Object3D();\r\n\r\n\t\t\tobj.lookAt( vector );\r\n\r\n\t\t\tobj.updateMatrix();\r\n\r\n\t\t\tthis.applyMatrix( obj.matrix );\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcenter: function () {\r\n\r\n\t\tthis.computeBoundingBox();\r\n\r\n\t\tvar offset = this.boundingBox.center().negate();\r\n\r\n\t\tthis.translate( offset.x, offset.y, offset.z );\r\n\r\n\t\treturn offset;\r\n\r\n\t},\r\n\r\n\tsetFromObject: function ( object ) {\r\n\r\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Points || object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar positions = new THREE.Float32Attribute( geometry.vertices.length * 3, 3 );\r\n\t\t\tvar colors = new THREE.Float32Attribute( geometry.colors.length * 3, 3 );\r\n\r\n\t\t\tthis.addAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\r\n\t\t\tthis.addAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\r\n\r\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\r\n\r\n\t\t\t\tvar lineDistances = new THREE.Float32Attribute( geometry.lineDistances.length, 1 );\r\n\r\n\t\t\t\tthis.addAttribute( 'lineDistance',  lineDistances.copyArray( geometry.lineDistances ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\t\tthis.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdateFromObject: function ( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tvar direct = geometry.__directGeometry;\r\n\r\n\t\t\tif ( direct === undefined ) {\r\n\r\n\t\t\t\treturn this.fromGeometry( geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\r\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\r\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\r\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\r\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\t\t\tgeometry.uvsNeedUpdate = false;\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t\tgeometry = direct;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.verticesNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.position;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.verticesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.normalsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.normal;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.normalsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colorsNeedUpdate === true ) {\r\n\r\n\t\t\tvar attribute = this.attributes.color;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.colorsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\r\n\r\n\t\t\tvar attribute = this.attributes.lineDistance;\r\n\r\n\t\t\tif ( attribute !== undefined ) {\r\n\r\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\r\n\t\t\t\tattribute.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.groupsNeedUpdate ) {\r\n\r\n\t\t\tgeometry.computeGroups( object.geometry );\r\n\t\t\tthis.groups = geometry.groups;\r\n\r\n\t\t\tgeometry.groupsNeedUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tfromGeometry: function ( geometry ) {\r\n\r\n\t\tgeometry.__directGeometry = new THREE.DirectGeometry().fromGeometry( geometry );\r\n\r\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\r\n\r\n\t},\r\n\r\n\tfromDirectGeometry: function ( geometry ) {\r\n\r\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\r\n\r\n\t\tif ( geometry.normals.length > 0 ) {\r\n\r\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\r\n\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.colors.length > 0 ) {\r\n\r\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\r\n\t\t\tthis.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs.length > 0 ) {\r\n\r\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.uvs2.length > 0 ) {\r\n\r\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\r\n\t\t\tthis.addAttribute( 'uv2', new THREE.BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.indices.length > 0 ) {\r\n\r\n\t\t\tvar TypeArray = geometry.vertices.length > 65535 ? Uint32Array : Uint16Array;\r\n\t\t\tvar indices = new TypeArray( geometry.indices.length * 3 );\r\n\t\t\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ).copyIndicesArray( geometry.indices ) );\r\n\r\n\t\t}\r\n\r\n\t\t// groups\r\n\r\n\t\tthis.groups = geometry.groups;\r\n\r\n\t\t// morphs\r\n\r\n\t\tfor ( var name in geometry.morphTargets ) {\r\n\r\n\t\t\tvar array = [];\r\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar morphTarget = morphTargets[ i ];\r\n\r\n\t\t\t\tvar attribute = new THREE.Float32Attribute( morphTarget.length * 3, 3 );\r\n\r\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.morphAttributes[ name ] = array;\r\n\r\n\t\t}\r\n\r\n\t\t// skinning\r\n\r\n\t\tif ( geometry.skinIndices.length > 0 ) {\r\n\r\n\t\t\tvar skinIndices = new THREE.Float32Attribute( geometry.skinIndices.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.skinWeights.length > 0 ) {\r\n\r\n\t\t\tvar skinWeights = new THREE.Float32Attribute( geometry.skinWeights.length * 4, 4 );\r\n\t\t\tthis.addAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( geometry.boundingSphere !== null ) {\r\n\r\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tcomputeBoundingBox: function () {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingBox === null ) {\r\n\r\n\t\t\t\tthis.boundingBox = new THREE.Box3();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tvar bb = this.boundingBox;\r\n\t\t\t\tbb.makeEmpty();\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tbb.expandByPoint( vector );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( positions === undefined || positions.length === 0 ) {\r\n\r\n\t\t\t\tthis.boundingBox.min.set( 0, 0, 0 );\r\n\t\t\t\tthis.boundingBox.max.set( 0, 0, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeBoundingSphere: function () {\r\n\r\n\t\tvar box = new THREE.Box3();\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\treturn function () {\r\n\r\n\t\t\tif ( this.boundingSphere === null ) {\r\n\r\n\t\t\t\tthis.boundingSphere = new THREE.Sphere();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar positions = this.attributes.position.array;\r\n\r\n\t\t\tif ( positions ) {\r\n\r\n\t\t\t\tbox.makeEmpty();\r\n\r\n\t\t\t\tvar center = this.boundingSphere.center;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tbox.expandByPoint( vector );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbox.center( center );\r\n\r\n\t\t\t\t// hoping to find a boundingSphere with a radius smaller than the\r\n\t\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\r\n\r\n\t\t\t\tvar maxRadiusSq = 0;\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tvector.fromArray( positions, i );\r\n\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( vector ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\r\n\r\n\t\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}(),\r\n\r\n\tcomputeFaceNormals: function () {\r\n\r\n\t\t// backwards compatibility\r\n\r\n\t},\r\n\r\n\tcomputeVertexNormals: function () {\r\n\r\n\t\tvar index = this.index;\r\n\t\tvar attributes = this.attributes;\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( attributes.position ) {\r\n\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( attributes.normal === undefined ) {\r\n\r\n\t\t\t\tthis.addAttribute( 'normal', new THREE.BufferAttribute( new Float32Array( positions.length ), 3 ) );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// reset existing normals to zero\r\n\r\n\t\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = normals.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tnormals[ i ] = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar normals = attributes.normal.array;\r\n\r\n\t\t\tvar vA, vB, vC,\r\n\r\n\t\t\tpA = new THREE.Vector3(),\r\n\t\t\tpB = new THREE.Vector3(),\r\n\t\t\tpC = new THREE.Vector3(),\r\n\r\n\t\t\tcb = new THREE.Vector3(),\r\n\t\t\tab = new THREE.Vector3();\r\n\r\n\t\t\t// indexed elements\r\n\r\n\t\t\tif ( index ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tif ( groups.length === 0 ) {\r\n\r\n\t\t\t\t\tthis.addGroup( 0, indices.length );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( var j = 0, jl = groups.length; j < jl; ++ j ) {\r\n\r\n\t\t\t\t\tvar group = groups[ j ];\r\n\r\n\t\t\t\t\tvar start = group.start;\r\n\t\t\t\t\tvar count = group.count;\r\n\r\n\t\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\t\tvA = indices[ i + 0 ] * 3;\r\n\t\t\t\t\t\tvB = indices[ i + 1 ] * 3;\r\n\t\t\t\t\t\tvC = indices[ i + 2 ] * 3;\r\n\r\n\t\t\t\t\t\tpA.fromArray( positions, vA );\r\n\t\t\t\t\t\tpB.fromArray( positions, vB );\r\n\t\t\t\t\t\tpC.fromArray( positions, vC );\r\n\r\n\t\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\t\tnormals[ vA ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vB ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t\tnormals[ vC ] += cb.x;\r\n\t\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\r\n\t\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\r\n\r\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\r\n\r\n\t\t\t\t\tpA.fromArray( positions, i );\r\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tcb.subVectors( pC, pB );\r\n\t\t\t\t\tab.subVectors( pA, pB );\r\n\t\t\t\t\tcb.cross( ab );\r\n\r\n\t\t\t\t\tnormals[ i ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\r\n\r\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\r\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\r\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.normalizeNormals();\r\n\r\n\t\t\tattributes.normal.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tcomputeTangents: function () {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\r\n\r\n\t},\r\n\r\n\tcomputeOffsets: function ( size ) {\r\n\r\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.')\r\n\r\n\t},\r\n\r\n\tmerge: function ( geometry, offset ) {\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( offset === undefined ) offset = 0;\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\r\n\r\n\t\t\tvar attribute1 = attributes[ key ];\r\n\t\t\tvar attributeArray1 = attribute1.array;\r\n\r\n\t\t\tvar attribute2 = geometry.attributes[ key ];\r\n\t\t\tvar attributeArray2 = attribute2.array;\r\n\r\n\t\t\tvar attributeSize = attribute2.itemSize;\r\n\r\n\t\t\tfor ( var i = 0, j = attributeSize * offset; i < attributeArray2.length; i ++, j ++ ) {\r\n\r\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tnormalizeNormals: function () {\r\n\r\n\t\tvar normals = this.attributes.normal.array;\r\n\r\n\t\tvar x, y, z, n;\r\n\r\n\t\tfor ( var i = 0, il = normals.length; i < il; i += 3 ) {\r\n\r\n\t\t\tx = normals[ i ];\r\n\t\t\ty = normals[ i + 1 ];\r\n\t\t\tz = normals[ i + 2 ];\r\n\r\n\t\t\tn = 1.0 / Math.sqrt( x * x + y * y + z * z );\r\n\r\n\t\t\tnormals[ i ] *= n;\r\n\t\t\tnormals[ i + 1 ] *= n;\r\n\t\t\tnormals[ i + 2 ] *= n;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'BufferGeometry',\r\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard BufferGeometry serialization\r\n\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.parameters !== undefined ) {\r\n\r\n\t\t\tvar parameters = this.parameters;\r\n\r\n\t\t\tfor ( var key in parameters ) {\r\n\r\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn data;\r\n\r\n\t\t}\r\n\r\n\t\tdata.data = { attributes: {} };\r\n\r\n\t\tvar index = this.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( index.array );\r\n\r\n\t\t\tdata.data.index = {\r\n\t\t\t\ttype: index.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = this.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\r\n\t\t\tvar array = Array.prototype.slice.call( attribute.array );\r\n\r\n\t\t\tdata.data.attributes[ key ] = {\r\n\t\t\t\titemSize: attribute.itemSize,\r\n\t\t\t\ttype: attribute.array.constructor.name,\r\n\t\t\t\tarray: array\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = this.groups;\r\n\r\n\t\tif ( groups.length > 0 ) {\r\n\r\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = this.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== null ) {\r\n\r\n\t\t\tdata.data.boundingSphere = {\r\n\t\t\t\tcenter: boundingSphere.center.toArray(),\r\n\t\t\t\tradius: boundingSphere.radius\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tvar index = source.index;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tthis.setIndex( index.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = source.attributes;\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ name ];\r\n\t\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = source.groups;\r\n\r\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar group = groups[ i ];\r\n\t\t\tthis.addGroup( group.start, group.count );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.BufferGeometry.prototype );\r\n\r\nTHREE.BufferGeometry.MaxIndex = 65535;\r\n\r\n// File:src/core/InstancedBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.InstancedBufferGeometry = function () {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'InstancedBufferGeometry';\r\n\tthis.maxInstancedCount = undefined;\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.InstancedBufferGeometry.prototype.constructor = THREE.InstancedBufferGeometry;\r\n\r\nTHREE.InstancedBufferGeometry.prototype.addGroup = function ( start, count, instances ) {\r\n\r\n\tthis.groups.push( {\r\n\r\n\t\tstart: start,\r\n\t\tcount: count,\r\n\t\tinstances: instances\r\n\r\n\t} );\r\n\r\n};\r\n\r\nTHREE.InstancedBufferGeometry.prototype.copy = function ( source ) {\r\n\r\n\tvar index = source.index;\r\n\r\n\tif ( index !== null ) {\r\n\r\n\t\tthis.setIndex( index.clone() );\r\n\r\n\t}\r\n\r\n\tvar attributes = source.attributes;\r\n\r\n\tfor ( var name in attributes ) {\r\n\r\n\t\tvar attribute = attributes[ name ];\r\n\t\tthis.addAttribute( name, attribute.clone() );\r\n\r\n\t}\r\n\r\n\tvar groups = source.groups;\r\n\r\n\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\tvar group = groups[ i ];\r\n\t\tthis.addGroup( group.start, group.count, group.instances );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.InstancedBufferGeometry.prototype );\r\n\r\n// File:src/cameras/Camera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.Camera = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Camera';\r\n\r\n\tthis.matrixWorldInverse = new THREE.Matrix4();\r\n\tthis.projectionMatrix = new THREE.Matrix4();\r\n\r\n};\r\n\r\nTHREE.Camera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Camera.prototype.constructor = THREE.Camera;\r\n\r\nTHREE.Camera.prototype.getWorldDirection = function () {\r\n\r\n\tvar quaternion = new THREE.Quaternion();\r\n\r\n\treturn function ( optionalTarget ) {\r\n\r\n\t\tvar result = optionalTarget || new THREE.Vector3();\r\n\r\n\t\tthis.getWorldQuaternion( quaternion );\r\n\r\n\t\treturn result.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.lookAt = function () {\r\n\r\n\t// This routine does not support cameras with rotated and/or translated parent(s)\r\n\r\n\tvar m1 = new THREE.Matrix4();\r\n\r\n\treturn function ( vector ) {\r\n\r\n\t\tm1.lookAt( this.position, vector, this.up );\r\n\r\n\t\tthis.quaternion.setFromRotationMatrix( m1 );\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.Camera.prototype.clone = function () {\r\n\r\n\treturn new this.constructor().copy( this );\r\n\r\n};\r\n\r\nTHREE.Camera.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\r\n\tthis.projectionMatrix.copy( source.projectionMatrix );\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/cameras/CubeCamera.js\r\n\r\n/**\r\n * Camera for rendering cube maps\r\n *\t- renders scene into axis-aligned cube\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CubeCamera = function ( near, far, cubeResolution ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'CubeCamera';\r\n\r\n\tvar fov = 90, aspect = 1;\r\n\r\n\tvar cameraPX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPX.up.set( 0, - 1, 0 );\r\n\tcameraPX.lookAt( new THREE.Vector3( 1, 0, 0 ) );\r\n\tthis.add( cameraPX );\r\n\r\n\tvar cameraNX = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNX.up.set( 0, - 1, 0 );\r\n\tcameraNX.lookAt( new THREE.Vector3( - 1, 0, 0 ) );\r\n\tthis.add( cameraNX );\r\n\r\n\tvar cameraPY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPY.up.set( 0, 0, 1 );\r\n\tcameraPY.lookAt( new THREE.Vector3( 0, 1, 0 ) );\r\n\tthis.add( cameraPY );\r\n\r\n\tvar cameraNY = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNY.up.set( 0, 0, - 1 );\r\n\tcameraNY.lookAt( new THREE.Vector3( 0, - 1, 0 ) );\r\n\tthis.add( cameraNY );\r\n\r\n\tvar cameraPZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraPZ.up.set( 0, - 1, 0 );\r\n\tcameraPZ.lookAt( new THREE.Vector3( 0, 0, 1 ) );\r\n\tthis.add( cameraPZ );\r\n\r\n\tvar cameraNZ = new THREE.PerspectiveCamera( fov, aspect, near, far );\r\n\tcameraNZ.up.set( 0, - 1, 0 );\r\n\tcameraNZ.lookAt( new THREE.Vector3( 0, 0, - 1 ) );\r\n\tthis.add( cameraNZ );\r\n\r\n\tthis.renderTarget = new THREE.WebGLRenderTargetCube( cubeResolution, cubeResolution, { format: THREE.RGBFormat, magFilter: THREE.LinearFilter, minFilter: THREE.LinearFilter } );\r\n\r\n\tthis.updateCubeMap = function ( renderer, scene ) {\r\n\r\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\r\n\r\n\t\tvar renderTarget = this.renderTarget;\r\n\t\tvar generateMipmaps = renderTarget.generateMipmaps;\r\n\r\n\t\trenderTarget.generateMipmaps = false;\r\n\r\n\t\trenderTarget.activeCubeFace = 0;\r\n\t\trenderer.render( scene, cameraPX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 1;\r\n\t\trenderer.render( scene, cameraNX, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 2;\r\n\t\trenderer.render( scene, cameraPY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 3;\r\n\t\trenderer.render( scene, cameraNY, renderTarget );\r\n\r\n\t\trenderTarget.activeCubeFace = 4;\r\n\t\trenderer.render( scene, cameraPZ, renderTarget );\r\n\r\n\t\trenderTarget.generateMipmaps = generateMipmaps;\r\n\r\n\t\trenderTarget.activeCubeFace = 5;\r\n\t\trenderer.render( scene, cameraNZ, renderTarget );\r\n\r\n\t\trenderer.setRenderTarget( null );\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.CubeCamera.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.CubeCamera.prototype.constructor = THREE.CubeCamera;\r\n\r\n// File:src/cameras/OrthographicCamera.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.OrthographicCamera = function ( left, right, top, bottom, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'OrthographicCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.left = left;\r\n\tthis.right = right;\r\n\tthis.top = top;\r\n\tthis.bottom = bottom;\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 0.1;\r\n\tthis.far = ( far !== undefined ) ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera;\r\n\r\nTHREE.OrthographicCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\r\n\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\r\n\tvar cx = ( this.right + this.left ) / 2;\r\n\tvar cy = ( this.top + this.bottom ) / 2;\r\n\r\n\tthis.projectionMatrix.makeOrthographic( cx - dx, cx + dx, cy + dy, cy - dy, this.near, this.far );\r\n\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Camera.prototype.copy.call( this, source );\r\n\t\r\n\tthis.left = source.left;\r\n\tthis.right = source.right;\r\n\tthis.top = source.top;\r\n\tthis.bottom = source.bottom;\r\n\tthis.near = source.near;\r\n\tthis.far = source.far;\r\n\t\r\n\tthis.zoom = source.zoom;\r\n\t\r\n\treturn this;\r\n\t\t\r\n};\r\n\r\nTHREE.OrthographicCamera.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.zoom = this.zoom;\r\n\tdata.object.left = this.left;\r\n\tdata.object.right = this.right;\r\n\tdata.object.top = this.top;\r\n\tdata.object.bottom = this.bottom;\r\n\tdata.object.near = this.near;\r\n\tdata.object.far = this.far;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/cameras/PerspectiveCamera.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author greggman / http://games.greggman.com/\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n */\r\n\r\nTHREE.PerspectiveCamera = function ( fov, aspect, near, far ) {\r\n\r\n\tTHREE.Camera.call( this );\r\n\r\n\tthis.type = 'PerspectiveCamera';\r\n\r\n\tthis.zoom = 1;\r\n\r\n\tthis.fov = fov !== undefined ? fov : 50;\r\n\tthis.aspect = aspect !== undefined ? aspect : 1;\r\n\tthis.near = near !== undefined ? near : 0.1;\r\n\tthis.far = far !== undefined ? far : 2000;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype = Object.create( THREE.Camera.prototype );\r\nTHREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera;\r\n\r\n\r\n/**\r\n * Uses Focal Length (in mm) to estimate and set FOV\r\n * 35mm (full-frame) camera is used if frame size is not specified;\r\n * Formula based on http://www.bobatkins.com/photography/technical/field_of_view.html\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setLens = function ( focalLength, frameHeight ) {\r\n\r\n\tif ( frameHeight === undefined ) frameHeight = 24;\r\n\r\n\tthis.fov = 2 * THREE.Math.radToDeg( Math.atan( frameHeight / ( focalLength * 2 ) ) );\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\n/**\r\n * Sets an offset in a larger frustum. This is useful for multi-window or\r\n * multi-monitor/multi-machine setups.\r\n *\r\n * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\r\n * the monitors are in grid like this\r\n *\r\n *   +---+---+---+\r\n *   | A | B | C |\r\n *   +---+---+---+\r\n *   | D | E | F |\r\n *   +---+---+---+\r\n *\r\n * then for each monitor you would call it like this\r\n *\r\n *   var w = 1920;\r\n *   var h = 1080;\r\n *   var fullWidth = w * 3;\r\n *   var fullHeight = h * 2;\r\n *\r\n *   --A--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\r\n *   --B--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\r\n *   --C--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\r\n *   --D--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\r\n *   --E--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\r\n *   --F--\r\n *   camera.setOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\r\n *\r\n *   Note there is no reason monitors have to be the same size or in a grid.\r\n */\r\n\r\nTHREE.PerspectiveCamera.prototype.setViewOffset = function ( fullWidth, fullHeight, x, y, width, height ) {\r\n\r\n\tthis.fullWidth = fullWidth;\r\n\tthis.fullHeight = fullHeight;\r\n\tthis.x = x;\r\n\tthis.y = y;\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\tthis.updateProjectionMatrix();\r\n\r\n};\r\n\r\n\r\nTHREE.PerspectiveCamera.prototype.updateProjectionMatrix = function () {\r\n\r\n\tvar fov = THREE.Math.radToDeg( 2 * Math.atan( Math.tan( THREE.Math.degToRad( this.fov ) * 0.5 ) / this.zoom ) );\r\n\r\n\tif ( this.fullWidth ) {\r\n\r\n\t\tvar aspect = this.fullWidth / this.fullHeight;\r\n\t\tvar top = Math.tan( THREE.Math.degToRad( fov * 0.5 ) ) * this.near;\r\n\t\tvar bottom = - top;\r\n\t\tvar left = aspect * bottom;\r\n\t\tvar right = aspect * top;\r\n\t\tvar width = Math.abs( right - left );\r\n\t\tvar height = Math.abs( top - bottom );\r\n\r\n\t\tthis.projectionMatrix.makeFrustum(\r\n\t\t\tleft + this.x * width / this.fullWidth,\r\n\t\t\tleft + ( this.x + this.width ) * width / this.fullWidth,\r\n\t\t\ttop - ( this.y + this.height ) * height / this.fullHeight,\r\n\t\t\ttop - this.y * height / this.fullHeight,\r\n\t\t\tthis.near,\r\n\t\t\tthis.far\r\n\t\t);\r\n\r\n\t} else {\r\n\r\n\t\tthis.projectionMatrix.makePerspective( fov, this.aspect, this.near, this.far );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Camera.prototype.copy.call( this, source );\r\n\t\r\n\tthis.fov = source.fov;\r\n\tthis.aspect = source.aspect;\r\n\tthis.near = source.near;\r\n\tthis.far = source.far;\r\n\t\r\n\tthis.zoom = source.zoom;\r\n\t\r\n\treturn this;\r\n\t\t\r\n};\r\n\r\nTHREE.PerspectiveCamera.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.zoom = this.zoom;\r\n\tdata.object.fov = this.fov;\r\n\tdata.object.aspect = this.aspect;\r\n\tdata.object.near = this.near;\r\n\tdata.object.far = this.far;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/Light.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Light = function ( color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Light';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n};\r\n\r\nTHREE.Light.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Light.prototype.constructor = THREE.Light;\r\n\r\nTHREE.Light.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\tthis.color.copy( source.color );\r\n\t\r\n\treturn this;\r\n\r\n};\r\n// File:src/lights/AmbientLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AmbientLight = function ( color ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'AmbientLight';\r\n\r\n};\r\n\r\nTHREE.AmbientLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.AmbientLight.prototype.constructor = THREE.AmbientLight;\r\n\r\nTHREE.AmbientLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/DirectionalLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DirectionalLight = function ( color, intensity ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'DirectionalLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n\tthis.castShadow = false;\r\n\tthis.onlyShadow = false;\r\n\r\n\tthis.shadowCameraNear = 50;\r\n\tthis.shadowCameraFar = 5000;\r\n\r\n\tthis.shadowCameraLeft = - 500;\r\n\tthis.shadowCameraRight = 500;\r\n\tthis.shadowCameraTop = 500;\r\n\tthis.shadowCameraBottom = - 500;\r\n\r\n\tthis.shadowCameraVisible = false;\r\n\r\n\tthis.shadowBias = 0;\r\n\tthis.shadowDarkness = 0.5;\r\n\r\n\tthis.shadowMapWidth = 512;\r\n\tthis.shadowMapHeight = 512;\r\n\r\n\tthis.shadowMap = null;\r\n\tthis.shadowMapSize = null;\r\n\tthis.shadowCamera = null;\r\n\tthis.shadowMatrix = null;\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight;\r\n\r\nTHREE.DirectionalLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.intensity = source.intensity;\r\n\tthis.target = source.target.clone();\r\n\r\n\tthis.castShadow = source.castShadow;\r\n\tthis.onlyShadow = source.onlyShadow;\r\n\r\n\tthis.shadowCameraNear = source.shadowCameraNear;\r\n\tthis.shadowCameraFar = source.shadowCameraFar;\r\n\r\n\tthis.shadowCameraLeft = source.shadowCameraLeft;\r\n\tthis.shadowCameraRight = source.shadowCameraRight;\r\n\tthis.shadowCameraTop = source.shadowCameraTop;\r\n\tthis.shadowCameraBottom = source.shadowCameraBottom;\r\n\r\n\tthis.shadowCameraVisible = source.shadowCameraVisible;\r\n\r\n\tthis.shadowBias = source.shadowBias;\r\n\tthis.shadowDarkness = source.shadowDarkness;\r\n\r\n\tthis.shadowMapWidth = source.shadowMapWidth;\r\n\tthis.shadowMapHeight = source.shadowMapHeight;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.DirectionalLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/HemisphereLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.HemisphereLight = function ( skyColor, groundColor, intensity ) {\r\n\r\n\tTHREE.Light.call( this, skyColor );\r\n\r\n\tthis.type = 'HemisphereLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.groundColor = new THREE.Color( groundColor );\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight;\r\n\r\nTHREE.HemisphereLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.groundColor.copy( source.groundColor );\r\n\tthis.intensity = source.intensity;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.HemisphereLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.groundColor = this.groundColor.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/PointLight.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLight = function ( color, intensity, distance, decay ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'PointLight';\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.PointLight.prototype.constructor = THREE.PointLight;\r\n\r\nTHREE.PointLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.intensity = source.intensity;\r\n\tthis.distance = source.distance;\r\n\tthis.decay = source.decay;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.PointLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\tdata.object.distance = this.distance;\r\n\tdata.object.decay = this.decay;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/lights/SpotLight.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpotLight = function ( color, intensity, distance, angle, exponent, decay ) {\r\n\r\n\tTHREE.Light.call( this, color );\r\n\r\n\tthis.type = 'SpotLight';\r\n\r\n\tthis.position.set( 0, 1, 0 );\r\n\tthis.updateMatrix();\r\n\r\n\tthis.target = new THREE.Object3D();\r\n\r\n\tthis.intensity = ( intensity !== undefined ) ? intensity : 1;\r\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\r\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\r\n\tthis.exponent = ( exponent !== undefined ) ? exponent : 10;\r\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\r\n\r\n\tthis.castShadow = false;\r\n\tthis.onlyShadow = false;\r\n\r\n\tthis.shadowCameraNear = 50;\r\n\tthis.shadowCameraFar = 5000;\r\n\tthis.shadowCameraFov = 50;\r\n\r\n\tthis.shadowCameraVisible = false;\r\n\r\n\tthis.shadowBias = 0;\r\n\tthis.shadowDarkness = 0.5;\r\n\r\n\tthis.shadowMapWidth = 512;\r\n\tthis.shadowMapHeight = 512;\r\n\r\n\tthis.shadowMap = null;\r\n\tthis.shadowMapSize = null;\r\n\tthis.shadowCamera = null;\r\n\tthis.shadowMatrix = null;\r\n\r\n};\r\n\r\nTHREE.SpotLight.prototype = Object.create( THREE.Light.prototype );\r\nTHREE.SpotLight.prototype.constructor = THREE.SpotLight;\r\n\r\nTHREE.SpotLight.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Light.prototype.copy.call( this, source );\r\n\r\n\tthis.intensity = source.intensity;\r\n\tthis.distance = source.distance;\r\n\tthis.angle = source.angle;\r\n\tthis.exponent = source.exponent;\r\n\tthis.decay = source.decay;\r\n\r\n\tthis.target = source.target.clone();\r\n\r\n\tthis.castShadow = source.castShadow;\r\n\tthis.onlyShadow = source.onlyShadow;\r\n\r\n\tthis.shadowCameraNear = source.shadowCameraNear;\r\n\tthis.shadowCameraFar = source.shadowCameraFar;\r\n\tthis.shadowCameraFov = source.shadowCameraFov;\r\n\r\n\tthis.shadowCameraVisible = source.shadowCameraVisible;\r\n\r\n\tthis.shadowBias = source.shadowBias;\r\n\tthis.shadowDarkness = source.shadowDarkness;\r\n\r\n\tthis.shadowMapWidth = source.shadowMapWidth;\r\n\tthis.shadowMapHeight = source.shadowMapHeight;\r\n\r\n\treturn this;\r\n}\r\n\r\nTHREE.SpotLight.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.color = this.color.getHex();\r\n\tdata.object.intensity = this.intensity;\r\n\tdata.object.distance = this.distance;\r\n\tdata.object.angle = this.angle;\r\n\tdata.object.exponent = this.exponent;\r\n\tdata.object.decay = this.decay;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/loaders/Cache.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Cache = {\r\n\r\n\tenabled: false,\r\n\r\n\tfiles: {},\r\n\r\n\tadd: function ( key, file ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\r\n\r\n\t\tthis.files[ key ] = file;\r\n\r\n\t},\r\n\r\n\tget: function ( key ) {\r\n\r\n\t\tif ( this.enabled === false ) return;\r\n\r\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\r\n\r\n\t\treturn this.files[ key ];\r\n\r\n\t},\r\n\r\n\tremove: function ( key ) {\r\n\r\n\t\tdelete this.files[ key ];\r\n\r\n\t},\r\n\r\n\tclear: function () {\r\n\r\n\t\tthis.files = {};\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/Loader.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Loader = function () {\r\n\r\n\tthis.onLoadStart = function () {};\r\n\tthis.onLoadProgress = function () {};\r\n\tthis.onLoadComplete = function () {};\r\n\r\n};\r\n\r\nTHREE.Loader.prototype = {\r\n\r\n\tconstructor: THREE.Loader,\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\textractUrlBase: function ( url ) {\r\n\r\n\t\tvar parts = url.split( '/' );\r\n\r\n\t\tif ( parts.length === 1 ) return './';\r\n\r\n\t\tparts.pop();\r\n\r\n\t\treturn parts.join( '/' ) + '/';\r\n\r\n\t},\r\n\r\n\tinitMaterials: function ( materials, texturePath, crossOrigin ) {\r\n\r\n\t\tvar array = [];\r\n\r\n\t\tfor ( var i = 0; i < materials.length; ++ i ) {\r\n\r\n\t\t\tarray[ i ] = this.createMaterial( materials[ i ], texturePath, crossOrigin );\r\n\r\n\t\t}\r\n\r\n\t\treturn array;\r\n\r\n\t},\r\n\r\n\tcreateMaterial: ( function () {\r\n\r\n\t\tvar imageLoader;\r\n\r\n\t\treturn function createMaterial( m, texturePath, crossOrigin ) {\r\n\r\n\t\t\tvar scope = this;\r\n\r\n\t\t\tif ( crossOrigin === undefined && scope.crossOrigin !== undefined ) crossOrigin = scope.crossOrigin;\r\n\r\n\t\t\tif ( imageLoader === undefined ) imageLoader = new THREE.ImageLoader();\r\n\r\n\t\t\tfunction nearest_pow2( n ) {\r\n\r\n\t\t\t\tvar l = Math.log( n ) / Math.LN2;\r\n\t\t\t\treturn Math.pow( 2, Math.round(  l ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction create_texture( where, name, sourceFile, repeat, offset, wrap, anisotropy ) {\r\n\r\n\t\t\t\tvar fullPath = texturePath + sourceFile;\r\n\r\n\t\t\t\tvar texture;\r\n\r\n\t\t\t\tvar loader = THREE.Loader.Handlers.get( fullPath );\r\n\r\n\t\t\t\tif ( loader !== null ) {\r\n\r\n\t\t\t\t\ttexture = loader.load( fullPath );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture = new THREE.Texture();\r\n\r\n\t\t\t\t\tloader = imageLoader;\r\n\t\t\t\t\tloader.setCrossOrigin( crossOrigin );\r\n\t\t\t\t\tloader.load( fullPath, function ( image ) {\r\n\r\n\t\t\t\t\t\tif ( THREE.Math.isPowerOfTwo( image.width ) === false ||\r\n\t\t\t\t\t\t\tTHREE.Math.isPowerOfTwo( image.height ) === false ) {\r\n\r\n\t\t\t\t\t\t\tvar width = nearest_pow2( image.width );\r\n\t\t\t\t\t\t\tvar height = nearest_pow2( image.height );\r\n\r\n\t\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\t\t\t\t\tcanvas.width = width;\r\n\t\t\t\t\t\t\tcanvas.height = height;\r\n\r\n\t\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\t\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\r\n\r\n\t\t\t\t\t\t\ttexture.image = canvas;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\ttexture.image = image;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.sourceFile = sourceFile;\r\n\r\n\t\t\t\tif ( repeat ) {\r\n\r\n\t\t\t\t\ttexture.repeat.set( repeat[ 0 ], repeat[ 1 ] );\r\n\r\n\t\t\t\t\tif ( repeat[ 0 ] !== 1 ) texture.wrapS = THREE.RepeatWrapping;\r\n\t\t\t\t\tif ( repeat[ 1 ] !== 1 ) texture.wrapT = THREE.RepeatWrapping;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( offset ) {\r\n\r\n\t\t\t\t\ttexture.offset.set( offset[ 0 ], offset[ 1 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( wrap ) {\r\n\r\n\t\t\t\t\tvar wrapMap = {\r\n\t\t\t\t\t\t'repeat': THREE.RepeatWrapping,\r\n\t\t\t\t\t\t'mirror': THREE.MirroredRepeatWrapping\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif ( wrapMap[ wrap[ 0 ] ] !== undefined ) texture.wrapS = wrapMap[ wrap[ 0 ] ];\r\n\t\t\t\t\tif ( wrapMap[ wrap[ 1 ] ] !== undefined ) texture.wrapT = wrapMap[ wrap[ 1 ] ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( anisotropy ) {\r\n\r\n\t\t\t\t\ttexture.anisotropy = anisotropy;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhere[ name ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction rgb2hex( rgb ) {\r\n\r\n\t\t\t\treturn ( rgb[ 0 ] * 255 << 16 ) + ( rgb[ 1 ] * 255 << 8 ) + rgb[ 2 ] * 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// defaults\r\n\r\n\t\t\tvar mtype = 'MeshLambertMaterial';\r\n\t\t\tvar mpars = {};\r\n\r\n\t\t\t// parameters from model file\r\n\r\n\t\t\tif ( m.shading ) {\r\n\r\n\t\t\t\tvar shading = m.shading.toLowerCase();\r\n\r\n\t\t\t\tif ( shading === 'phong' ) mtype = 'MeshPhongMaterial';\r\n\t\t\t\telse if ( shading === 'basic' ) mtype = 'MeshBasicMaterial';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.blending !== undefined && THREE[ m.blending ] !== undefined ) {\r\n\r\n\t\t\t\tmpars.blending = THREE[ m.blending ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.transparent !== undefined ) {\r\n\r\n\t\t\t\tmpars.transparent = m.transparent;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.opacity !== undefined && m.opacity < 1.0 ) {\r\n\r\n\t\t\t\tmpars.transparent = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.depthTest !== undefined ) {\r\n\r\n\t\t\t\tmpars.depthTest = m.depthTest;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.depthWrite !== undefined ) {\r\n\r\n\t\t\t\tmpars.depthWrite = m.depthWrite;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.visible !== undefined ) {\r\n\r\n\t\t\t\tmpars.visible = m.visible;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.flipSided !== undefined ) {\r\n\r\n\t\t\t\tmpars.side = THREE.BackSide;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.doubleSided !== undefined ) {\r\n\r\n\t\t\t\tmpars.side = THREE.DoubleSide;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.wireframe !== undefined ) {\r\n\r\n\t\t\t\tmpars.wireframe = m.wireframe;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.vertexColors !== undefined ) {\r\n\r\n\t\t\t\tif ( m.vertexColors === 'face' ) {\r\n\r\n\t\t\t\t\tmpars.vertexColors = THREE.FaceColors;\r\n\r\n\t\t\t\t} else if ( m.vertexColors ) {\r\n\r\n\t\t\t\t\tmpars.vertexColors = THREE.VertexColors;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// colors\r\n\r\n\t\t\tif ( m.colorDiffuse ) {\r\n\r\n\t\t\t\tmpars.color = rgb2hex( m.colorDiffuse );\r\n\r\n\t\t\t} else if ( m.DbgColor ) {\r\n\r\n\t\t\t\tmpars.color = m.DbgColor;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.colorEmissive ) {\r\n\r\n\t\t\t\tmpars.emissive = rgb2hex( m.colorEmissive );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( mtype === 'MeshPhongMaterial' ) {\r\n\r\n\t\t\t\tif ( m.colorSpecular ) {\r\n\r\n\t\t\t\t\tmpars.specular = rgb2hex( m.colorSpecular );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.specularCoef ) {\r\n\r\n\t\t\t\t\tmpars.shininess = m.specularCoef;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// modifiers\r\n\r\n\t\t\tif ( m.transparency !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.Loader: transparency has been renamed to opacity' );\r\n\t\t\t\tm.opacity = m.transparency;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.opacity !== undefined ) {\r\n\r\n\t\t\t\tmpars.opacity = m.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// textures\r\n\r\n\t\t\tif ( texturePath ) {\r\n\r\n\t\t\t\tif ( m.mapDiffuse ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'map', m.mapDiffuse, m.mapDiffuseRepeat, m.mapDiffuseOffset, m.mapDiffuseWrap, m.mapDiffuseAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapLight ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'lightMap', m.mapLight, m.mapLightRepeat, m.mapLightOffset, m.mapLightWrap, m.mapLightAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapAO ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'aoMap', m.mapAO, m.mapAORepeat, m.mapAOOffset, m.mapAOWrap, m.mapAOAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapBump ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'bumpMap', m.mapBump, m.mapBumpRepeat, m.mapBumpOffset, m.mapBumpWrap, m.mapBumpAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapNormal ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'normalMap', m.mapNormal, m.mapNormalRepeat, m.mapNormalOffset, m.mapNormalWrap, m.mapNormalAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapSpecular ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'specularMap', m.mapSpecular, m.mapSpecularRepeat, m.mapSpecularOffset, m.mapSpecularWrap, m.mapSpecularAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( m.mapAlpha ) {\r\n\r\n\t\t\t\t\tcreate_texture( mpars, 'alphaMap', m.mapAlpha, m.mapAlphaRepeat, m.mapAlphaOffset, m.mapAlphaWrap, m.mapAlphaAnisotropy );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//\r\n\r\n\t\t\tif ( m.mapBumpScale ) {\r\n\r\n\t\t\t\tmpars.bumpScale = m.mapBumpScale;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( m.mapNormalFactor ) {\r\n\r\n\t\t\t\tmpars.normalScale = new THREE.Vector2( m.mapNormalFactor, m.mapNormalFactor );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar material = new THREE[ mtype ]( mpars );\r\n\r\n\t\t\tif ( m.DbgName !== undefined ) material.name = m.DbgName;\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t};\r\n\r\n\t} )()\r\n\r\n};\r\n\r\nTHREE.Loader.Handlers = {\r\n\r\n\thandlers: [],\r\n\r\n\tadd: function ( regex, loader ) {\r\n\r\n\t\tthis.handlers.push( regex, loader );\r\n\r\n\t},\r\n\r\n\tget: function ( file ) {\r\n\r\n\t\tfor ( var i = 0, l = this.handlers.length; i < l; i += 2 ) {\r\n\r\n\t\t\tvar regex = this.handlers[ i ];\r\n\t\t\tvar loader  = this.handlers[ i + 1 ];\r\n\r\n\t\t\tif ( regex.test( file ) ) {\r\n\r\n\t\t\t\treturn loader;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/XHRLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.XHRLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.XHRLoader.prototype = {\r\n\r\n\tconstructor: THREE.XHRLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar request = new XMLHttpRequest();\r\n\t\trequest.open( 'GET', url, true );\r\n\r\n\t\trequest.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tTHREE.Cache.add( url, this.response );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this.response );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\trequest.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) request.crossOrigin = this.crossOrigin;\r\n\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\r\n\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\r\n\r\n\t\trequest.send( null );\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\treturn request;\r\n\r\n\t},\r\n\r\n\tsetResponseType: function ( value ) {\r\n\r\n\t\tthis.responseType = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetWithCredentials: function ( value ) {\r\n\r\n\t\tthis.withCredentials = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ImageLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ImageLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.ImageLoader.prototype = {\r\n\r\n\tconstructor: THREE.ImageLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar cached = THREE.Cache.get( url );\r\n\r\n\t\tif ( cached !== undefined ) {\r\n\r\n\t\t\tif ( onLoad ) {\r\n\r\n\t\t\t\tsetTimeout( function () {\r\n\r\n\t\t\t\t\tonLoad( cached );\r\n\r\n\t\t\t\t}, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cached;\r\n\r\n\t\t}\r\n\r\n\t\tvar image = document.createElement( 'img' );\r\n\r\n\t\timage.addEventListener( 'load', function ( event ) {\r\n\r\n\t\t\tTHREE.Cache.add( url, this );\r\n\r\n\t\t\tif ( onLoad ) onLoad( this );\r\n\r\n\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( onProgress !== undefined ) {\r\n\r\n\t\t\timage.addEventListener( 'progress', function ( event ) {\r\n\r\n\t\t\t\tonProgress( event );\r\n\r\n\t\t\t}, false );\r\n\r\n\t\t}\r\n\r\n\t\timage.addEventListener( 'error', function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t}, false );\r\n\r\n\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\r\n\r\n\t\tscope.manager.itemStart( url );\r\n\r\n\t\timage.src = url;\r\n\r\n\t\treturn image;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/JSONLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.JSONLoader = function ( manager ) {\r\n\r\n\tif ( typeof manager === 'boolean' ) {\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: showStatus parameter has been removed from constructor.' );\r\n\t\tmanager = undefined;\r\n\r\n\t}\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\tthis.withCredentials = false;\r\n\r\n};\r\n\r\nTHREE.JSONLoader.prototype = {\r\n\r\n\tconstructor: THREE.JSONLoader,\r\n\r\n\t// Deprecated\r\n\t\r\n\tget statusDomElement () {\r\n\r\n\t\tif ( this._statusDomElement === undefined ) {\r\n\r\n\t\t\tthis._statusDomElement = document.createElement( 'div' );\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'THREE.JSONLoader: .statusDomElement has been removed.' );\r\n\t\treturn this._statusDomElement;\r\n\r\n\t},\r\n\r\n\tload: function( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texturePath = this.texturePath && ( typeof this.texturePath === \"string\" ) ? this.texturePath : THREE.Loader.prototype.extractUrlBase( url );\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setWithCredentials( this.withCredentials );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tvar json = JSON.parse( text );\r\n\t\t\tvar metadata = json.metadata;\r\n\r\n\t\t\tif ( metadata !== undefined ) {\r\n\r\n\t\t\t\tif ( metadata.type === 'object' ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.ObjectLoader instead.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( metadata.type === 'scene' ) {\r\n\r\n\t\t\t\t\tconsole.error( 'THREE.JSONLoader: ' + url + ' should be loaded with THREE.SceneLoader instead.' );\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar object = scope.parse( json, texturePath );\r\n\t\t\tonLoad( object.geometry, object.materials );\r\n\r\n\t\t} );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, texturePath ) {\r\n\r\n\t\tvar geometry = new THREE.Geometry(),\r\n\t\tscale = ( json.scale !== undefined ) ? 1.0 / json.scale : 1.0;\r\n\r\n\t\tparseModel( scale );\r\n\r\n\t\tparseSkin();\r\n\t\tparseMorphing( scale );\r\n\r\n\t\tgeometry.computeFaceNormals();\r\n\t\tgeometry.computeBoundingSphere();\r\n\r\n\t\tfunction parseModel( scale ) {\r\n\r\n\t\t\tfunction isBitSet( value, position ) {\r\n\r\n\t\t\t\treturn value & ( 1 << position );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar i, j, fi,\r\n\r\n\t\t\toffset, zLength,\r\n\r\n\t\tcolorIndex, normalIndex, uvIndex, materialIndex,\r\n\r\n\t\t\ttype,\r\n\t\t\tisQuad,\r\n\t\t\thasMaterial,\r\n\t\t\thasFaceVertexUv,\r\n\t\t\thasFaceNormal, hasFaceVertexNormal,\r\n\t\t\thasFaceColor, hasFaceVertexColor,\r\n\r\n\t\tvertex, face, faceA, faceB, hex, normal,\r\n\r\n\t\t\tuvLayer, uv, u, v,\r\n\r\n\t\t\tfaces = json.faces,\r\n\t\t\tvertices = json.vertices,\r\n\t\t\tnormals = json.normals,\r\n\t\t\tcolors = json.colors,\r\n\r\n\t\t\tnUvLayers = 0;\r\n\r\n\t\t\tif ( json.uvs !== undefined ) {\r\n\r\n\t\t\t\t// disregard empty arrays\r\n\r\n\t\t\t\tfor ( i = 0; i < json.uvs.length; i ++ ) {\r\n\r\n\t\t\t\t\tif ( json.uvs[ i ].length ) nUvLayers ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.faceVertexUvs[ i ] = [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = vertices.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\tvertex = new THREE.Vector3();\r\n\r\n\t\t\t\tvertex.x = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.y = vertices[ offset ++ ] * scale;\r\n\t\t\t\tvertex.z = vertices[ offset ++ ] * scale;\r\n\r\n\t\t\t\tgeometry.vertices.push( vertex );\r\n\r\n\t\t\t}\r\n\r\n\t\t\toffset = 0;\r\n\t\t\tzLength = faces.length;\r\n\r\n\t\t\twhile ( offset < zLength ) {\r\n\r\n\t\t\t\ttype = faces[ offset ++ ];\r\n\r\n\r\n\t\t\t\tisQuad              = isBitSet( type, 0 );\r\n\t\t\t\thasMaterial         = isBitSet( type, 1 );\r\n\t\t\t\thasFaceVertexUv     = isBitSet( type, 3 );\r\n\t\t\t\thasFaceNormal       = isBitSet( type, 4 );\r\n\t\t\t\thasFaceVertexNormal = isBitSet( type, 5 );\r\n\t\t\t\thasFaceColor\t     = isBitSet( type, 6 );\r\n\t\t\t\thasFaceVertexColor  = isBitSet( type, 7 );\r\n\r\n\t\t\t\t// console.log(\"type\", type, \"bits\", isQuad, hasMaterial, hasFaceVertexUv, hasFaceNormal, hasFaceVertexNormal, hasFaceColor, hasFaceVertexColor);\r\n\r\n\t\t\t\tif ( isQuad ) {\r\n\r\n\t\t\t\t\tfaceA = new THREE.Face3();\r\n\t\t\t\t\tfaceA.a = faces[ offset ];\r\n\t\t\t\t\tfaceA.b = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceA.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\tfaceB = new THREE.Face3();\r\n\t\t\t\t\tfaceB.a = faces[ offset + 1 ];\r\n\t\t\t\t\tfaceB.b = faces[ offset + 2 ];\r\n\t\t\t\t\tfaceB.c = faces[ offset + 3 ];\r\n\r\n\t\t\t\t\toffset += 4;\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tfaceA.materialIndex = materialIndex;\r\n\t\t\t\t\t\tfaceB.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi + 1 ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 4; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tif ( j !== 2 ) geometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\t\t\t\t\t\t\t\tif ( j !== 0 ) geometry.faceVertexUvs[ i ][ fi + 1 ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tfaceA.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tfaceB.normal.copy( faceA.normal );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexNormals.push( normal );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\tfaceA.color.setHex( hex );\r\n\t\t\t\t\t\tfaceB.color.setHex( hex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 4; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\thex = colors[ colorIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( i !== 2 ) faceA.vertexColors.push( new THREE.Color( hex ) );\r\n\t\t\t\t\t\t\tif ( i !== 0 ) faceB.vertexColors.push( new THREE.Color( hex ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( faceA );\r\n\t\t\t\t\tgeometry.faces.push( faceB );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tface = new THREE.Face3();\r\n\t\t\t\t\tface.a = faces[ offset ++ ];\r\n\t\t\t\t\tface.b = faces[ offset ++ ];\r\n\t\t\t\t\tface.c = faces[ offset ++ ];\r\n\r\n\t\t\t\t\tif ( hasMaterial ) {\r\n\r\n\t\t\t\t\t\tmaterialIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// to get face <=> uv index correspondence\r\n\r\n\t\t\t\t\tfi = geometry.faces.length;\r\n\r\n\t\t\t\t\tif ( hasFaceVertexUv ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < nUvLayers; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tuvLayer = json.uvs[ i ];\r\n\r\n\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ] = [];\r\n\r\n\t\t\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\t\t\tuvIndex = faces[ offset ++ ];\r\n\r\n\t\t\t\t\t\t\t\tu = uvLayer[ uvIndex * 2 ];\r\n\t\t\t\t\t\t\t\tv = uvLayer[ uvIndex * 2 + 1 ];\r\n\r\n\t\t\t\t\t\t\t\tuv = new THREE.Vector2( u, v );\r\n\r\n\t\t\t\t\t\t\t\tgeometry.faceVertexUvs[ i ][ fi ].push( uv );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceNormal ) {\r\n\r\n\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\tface.normal.set(\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ( hasFaceVertexNormal ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tnormalIndex = faces[ offset ++ ] * 3;\r\n\r\n\t\t\t\t\t\t\tnormal = new THREE.Vector3(\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ++ ],\r\n\t\t\t\t\t\t\t\tnormals[ normalIndex ]\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\tface.vertexNormals.push( normal );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceColor ) {\r\n\r\n\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\tface.color.setHex( colors[ colorIndex ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif ( hasFaceVertexColor ) {\r\n\r\n\t\t\t\t\t\tfor ( i = 0; i < 3; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tcolorIndex = faces[ offset ++ ];\r\n\t\t\t\t\t\t\tface.vertexColors.push( new THREE.Color( colors[ colorIndex ] ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tgeometry.faces.push( face );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tfunction parseSkin() {\r\n\r\n\t\t\tvar influencesPerVertex = ( json.influencesPerVertex !== undefined ) ? json.influencesPerVertex : 2;\r\n\r\n\t\t\tif ( json.skinWeights ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinWeights.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar x =                               json.skinWeights[ i ];\r\n\t\t\t\t\tvar y = ( influencesPerVertex > 1 ) ? json.skinWeights[ i + 1 ] : 0;\r\n\t\t\t\t\tvar z = ( influencesPerVertex > 2 ) ? json.skinWeights[ i + 2 ] : 0;\r\n\t\t\t\t\tvar w = ( influencesPerVertex > 3 ) ? json.skinWeights[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinWeights.push( new THREE.Vector4( x, y, z, w ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.skinIndices ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = json.skinIndices.length; i < l; i += influencesPerVertex ) {\r\n\r\n\t\t\t\t\tvar a =                               json.skinIndices[ i ];\r\n\t\t\t\t\tvar b = ( influencesPerVertex > 1 ) ? json.skinIndices[ i + 1 ] : 0;\r\n\t\t\t\t\tvar c = ( influencesPerVertex > 2 ) ? json.skinIndices[ i + 2 ] : 0;\r\n\t\t\t\t\tvar d = ( influencesPerVertex > 3 ) ? json.skinIndices[ i + 3 ] : 0;\r\n\r\n\t\t\t\t\tgeometry.skinIndices.push( new THREE.Vector4( a, b, c, d ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.bones = json.bones;\r\n\r\n\t\t\tif ( geometry.bones && geometry.bones.length > 0 && ( geometry.skinWeights.length !== geometry.skinIndices.length || geometry.skinIndices.length !== geometry.vertices.length ) ) {\r\n\r\n\t\t\t\tconsole.warn( 'When skinning, number of vertices (' + geometry.vertices.length + '), skinIndices (' +\r\n\t\t\t\t\tgeometry.skinIndices.length + '), and skinWeights (' + geometry.skinWeights.length + ') should match.' );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// could change this to json.animations[0] or remove completely\r\n\r\n\t\t\tgeometry.animation = json.animation;\r\n\t\t\tgeometry.animations = json.animations;\r\n\r\n\t\t};\r\n\r\n\t\tfunction parseMorphing( scale ) {\r\n\r\n\t\t\tif ( json.morphTargets !== undefined ) {\r\n\r\n\t\t\t\tvar i, l, v, vl, dstVertices, srcVertices;\r\n\r\n\t\t\t\tfor ( i = 0, l = json.morphTargets.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.morphTargets[ i ] = {};\r\n\t\t\t\t\tgeometry.morphTargets[ i ].name = json.morphTargets[ i ].name;\r\n\t\t\t\t\tgeometry.morphTargets[ i ].vertices = [];\r\n\r\n\t\t\t\t\tdstVertices = geometry.morphTargets[ i ].vertices;\r\n\t\t\t\t\tsrcVertices = json.morphTargets[ i ].vertices;\r\n\r\n\t\t\t\t\tfor ( v = 0, vl = srcVertices.length; v < vl; v += 3 ) {\r\n\r\n\t\t\t\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\t\t\t\tvertex.x = srcVertices[ v ] * scale;\r\n\t\t\t\t\t\tvertex.y = srcVertices[ v + 1 ] * scale;\r\n\t\t\t\t\t\tvertex.z = srcVertices[ v + 2 ] * scale;\r\n\r\n\t\t\t\t\t\tdstVertices.push( vertex );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( json.morphColors !== undefined ) {\r\n\r\n\t\t\t\tvar i, l, c, cl, dstColors, srcColors, color;\r\n\r\n\t\t\t\tfor ( i = 0, l = json.morphColors.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tgeometry.morphColors[ i ] = {};\r\n\t\t\t\t\tgeometry.morphColors[ i ].name = json.morphColors[ i ].name;\r\n\t\t\t\t\tgeometry.morphColors[ i ].colors = [];\r\n\r\n\t\t\t\t\tdstColors = geometry.morphColors[ i ].colors;\r\n\t\t\t\t\tsrcColors = json.morphColors[ i ].colors;\r\n\r\n\t\t\t\t\tfor ( c = 0, cl = srcColors.length; c < cl; c += 3 ) {\r\n\r\n\t\t\t\t\t\tcolor = new THREE.Color( 0xffaa00 );\r\n\t\t\t\t\t\tcolor.setRGB( srcColors[ c ], srcColors[ c + 1 ], srcColors[ c + 2 ] );\r\n\t\t\t\t\t\tdstColors.push( color );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t\tif ( json.materials === undefined || json.materials.length === 0 ) {\r\n\r\n\t\t\treturn { geometry: geometry };\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar materials = THREE.Loader.prototype.initMaterials( json.materials, texturePath, this.crossOrigin );\r\n\r\n\t\t\treturn { geometry: geometry, materials: materials };\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/LoadingManager.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LoadingManager = function ( onLoad, onProgress, onError ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar isLoading = false, itemsLoaded = 0, itemsTotal = 0;\r\n\r\n\tthis.onStart = undefined;\r\n\tthis.onLoad = onLoad;\r\n\tthis.onProgress = onProgress;\r\n\tthis.onError = onError;\r\n\r\n\tthis.itemStart = function ( url ) {\r\n\r\n\t\titemsTotal ++;\r\n\r\n\t\tif ( isLoading === false ) {\r\n\r\n\t\t\tif ( scope.onStart !== undefined ) {\r\n\r\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tisLoading = true;\r\n\r\n\t};\r\n\r\n\tthis.itemEnd = function ( url ) {\r\n\r\n\t\titemsLoaded ++;\r\n\r\n\t\tif ( scope.onProgress !== undefined ) {\r\n\r\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\r\n\r\n\t\t}\r\n\r\n\t\tif ( itemsLoaded === itemsTotal ) {\r\n\r\n\t\t\tisLoading = false;\r\n\r\n\t\t\tif ( scope.onLoad !== undefined ) {\r\n\r\n\t\t\t\tscope.onLoad();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.itemError = function ( url ) {\r\n\r\n\t\tif ( scope.onError !== undefined ) {\r\n\r\n\t\t\tscope.onError( url );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DefaultLoadingManager = new THREE.LoadingManager();\r\n\r\n// File:src/loaders/BufferGeometryLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BufferGeometryLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.BufferGeometryLoader.prototype = {\r\n\r\n\tconstructor: THREE.BufferGeometryLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\t\tvar index = json.data.index;\r\n\r\n\t\tif ( index !== undefined ) {\r\n\r\n\t\t\tvar typedArray = new self[ index.type ]( index.array );\r\n\t\t\tgeometry.setIndex( new THREE.BufferAttribute( typedArray, 1 ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = json.data.attributes;\r\n\r\n\t\tfor ( var key in attributes ) {\r\n\r\n\t\t\tvar attribute = attributes[ key ];\r\n\t\t\tvar typedArray = new self[ attribute.type ]( attribute.array );\r\n\r\n\t\t\tgeometry.addAttribute( key, new THREE.BufferAttribute( typedArray, attribute.itemSize ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\r\n\r\n\t\tif ( groups !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\r\n\r\n\t\t\t\tvar group = groups[ i ];\r\n\r\n\t\t\t\tgeometry.addGroup( group.start, group.count );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar boundingSphere = json.data.boundingSphere;\r\n\r\n\t\tif ( boundingSphere !== undefined ) {\r\n\r\n\t\t\tvar center = new THREE.Vector3();\r\n\r\n\t\t\tif ( boundingSphere.center !== undefined ) {\r\n\r\n\t\t\t\tcenter.fromArray( boundingSphere.center );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry.boundingSphere = new THREE.Sphere( center, boundingSphere.radius );\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/MaterialLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MaterialLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.textures = {};\r\n\r\n};\r\n\r\nTHREE.MaterialLoader.prototype = {\r\n\r\n\tconstructor: THREE.MaterialLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tsetTextures: function ( value ) {\r\n\r\n\t\tthis.textures = value;\r\n\r\n\t},\r\n\r\n\tgetTexture: function ( name ) {\r\n\r\n\t\tvar textures = this.textures;\r\n\r\n\t\tif ( textures[ name ] === undefined ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\r\n\r\n\t\t}\r\n\r\n\t\treturn textures[ name ];\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar material = new THREE[ json.type ];\r\n\t\tmaterial.uuid = json.uuid;\r\n\r\n\t\tif ( json.name !== undefined ) material.name = json.name;\r\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\r\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\r\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\r\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\r\n\t\tif ( json.uniforms !== undefined ) material.uniforms = json.uniforms;\r\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\r\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\r\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\r\n\t\tif ( json.shading !== undefined ) material.shading = json.shading;\r\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\r\n\t\tif ( json.side !== undefined ) material.side = json.side;\r\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\r\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\r\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\r\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\r\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\r\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\r\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\r\n\r\n\t\t// for PointsMaterial\r\n\t\tif ( json.size !== undefined ) material.size = json.size;\r\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\r\n\r\n\t\t// maps\r\n\r\n\t\tif ( json.map !== undefined ) material.map = this.getTexture( json.map );\r\n\r\n\t\tif ( json.alphaMap !== undefined ) {\r\n\r\n\t\t\tmaterial.alphaMap = this.getTexture( json.alphaMap );\r\n\t\t\tmaterial.transparent = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = this.getTexture( json.bumpMap );\r\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\r\n\r\n\t\tif ( json.normalMap !== undefined ) material.normalMap = this.getTexture( json.normalMap );\r\n\t\tif ( json.normalScale )\tmaterial.normalScale = new THREE.Vector2( json.normalScale, json.normalScale );\r\n\r\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = this.getTexture( json.displacementMap );\r\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\r\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\r\n\r\n\t\tif ( json.specularMap !== undefined ) material.specularMap = this.getTexture( json.specularMap );\r\n\r\n\t\tif ( json.envMap !== undefined ) {\r\n\r\n\t\t\tmaterial.envMap = this.getTexture( json.envMap );\r\n\t\t\tmaterial.combine = THREE.MultiplyOperation;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.reflectivity ) material.reflectivity = json.reflectivity;\r\n\r\n\t\tif ( json.lightMap !== undefined ) material.lightMap = this.getTexture( json.lightMap );\r\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\r\n\r\n\t\tif ( json.aoMap !== undefined ) material.aoMap = this.getTexture( json.aoMap );\r\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\r\n\r\n\t\t// MeshFaceMaterial\r\n\r\n\t\tif ( json.materials !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tmaterial.materials.push( this.parse( json.materials[ i ] ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/ObjectLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.ObjectLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\tthis.texturePath = '';\r\n\r\n};\r\n\r\nTHREE.ObjectLoader.prototype = {\r\n\r\n\tconstructor: THREE.ObjectLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tif ( this.texturePath === '' ) {\r\n\r\n\t\t\tthis.texturePath = url.substring( 0, url.lastIndexOf( '/' ) + 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tscope.parse( JSON.parse( text ), onLoad );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetTexturePath: function ( value ) {\r\n\r\n\t\tthis.texturePath = value;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t},\r\n\r\n\tparse: function ( json, onLoad ) {\r\n\r\n\t\tvar geometries = this.parseGeometries( json.geometries );\r\n\r\n\t\tvar images = this.parseImages( json.images, function () {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t} );\r\n\r\n\t\tvar textures  = this.parseTextures( json.textures, images );\r\n\t\tvar materials = this.parseMaterials( json.materials, textures );\r\n\t\tvar object = this.parseObject( json.object, geometries, materials );\r\n\r\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\r\n\r\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tparseGeometries: function ( json ) {\r\n\r\n\t\tvar geometries = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar geometryLoader = new THREE.JSONLoader();\r\n\t\t\tvar bufferGeometryLoader = new THREE.BufferGeometryLoader();\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar geometry;\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\t\tcase 'PlaneGeometry':\r\n\t\t\t\t\tcase 'PlaneBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE[ data.type ](\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BoxGeometry':\r\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.BoxGeometry(\r\n\t\t\t\t\t\t\tdata.width,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.depth,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.depthSegments\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CircleBufferGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CircleGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CircleGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.segments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'CylinderGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.CylinderGeometry(\r\n\t\t\t\t\t\t\tdata.radiusTop,\r\n\t\t\t\t\t\t\tdata.radiusBottom,\r\n\t\t\t\t\t\t\tdata.height,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.openEnded,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.SphereGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'SphereBufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.SphereBufferGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.widthSegments,\r\n\t\t\t\t\t\t\tdata.heightSegments,\r\n\t\t\t\t\t\t\tdata.phiStart,\r\n\t\t\t\t\t\t\tdata.phiLength,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'DodecahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.DodecahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'IcosahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.IcosahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'OctahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.OctahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TetrahedronGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TetrahedronGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.detail\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'RingGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.RingGeometry(\r\n\t\t\t\t\t\t\tdata.innerRadius,\r\n\t\t\t\t\t\t\tdata.outerRadius,\r\n\t\t\t\t\t\t\tdata.thetaSegments,\r\n\t\t\t\t\t\t\tdata.phiSegments,\r\n\t\t\t\t\t\t\tdata.thetaStart,\r\n\t\t\t\t\t\t\tdata.thetaLength\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.arc\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TorusKnotGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TorusKnotGeometry(\r\n\t\t\t\t\t\t\tdata.radius,\r\n\t\t\t\t\t\t\tdata.tube,\r\n\t\t\t\t\t\t\tdata.radialSegments,\r\n\t\t\t\t\t\t\tdata.tubularSegments,\r\n\t\t\t\t\t\t\tdata.p,\r\n\t\t\t\t\t\t\tdata.q,\r\n\t\t\t\t\t\t\tdata.heightScale\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'TextGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = new THREE.TextGeometry(\r\n\t\t\t\t\t\t\tdata.text,\r\n\t\t\t\t\t\t\tdata.data\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'BufferGeometry':\r\n\r\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'Geometry':\r\n\r\n\t\t\t\t\t\tgeometry = geometryLoader.parse( data.data, this.texturePath ).geometry;\r\n\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\r\n\r\n\t\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tgeometry.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\r\n\r\n\t\t\t\tgeometries[ data.uuid ] = geometry;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometries;\r\n\r\n\t},\r\n\r\n\tparseMaterials: function ( json, textures ) {\r\n\r\n\t\tvar materials = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tvar loader = new THREE.MaterialLoader();\r\n\t\t\tloader.setTextures( textures );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar material = loader.parse( json[ i ] );\r\n\t\t\t\tmaterials[ material.uuid ] = material;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn materials;\r\n\r\n\t},\r\n\r\n\tparseImages: function ( json, onLoad ) {\r\n\r\n\t\tvar scope = this;\r\n\t\tvar images = {};\r\n\r\n\t\tfunction loadImage( url ) {\r\n\r\n\t\t\tscope.manager.itemStart( url );\r\n\r\n\t\t\treturn loader.load( url, function () {\r\n\r\n\t\t\t\tscope.manager.itemEnd( url );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( json !== undefined && json.length > 0 ) {\r\n\r\n\t\t\tvar manager = new THREE.LoadingManager( onLoad );\r\n\r\n\t\t\tvar loader = new THREE.ImageLoader( manager );\r\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar image = json[ i ];\r\n\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.texturePath + image.url;\r\n\r\n\t\t\t\timages[ image.uuid ] = loadImage( path );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn images;\r\n\r\n\t},\r\n\r\n\tparseTextures: function ( json, images ) {\r\n\r\n\t\tfunction parseConstant( value ) {\r\n\r\n\t\t\tif ( typeof( value ) === 'number' ) return value;\r\n\r\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\r\n\r\n\t\t\treturn THREE[ value ];\r\n\r\n\t\t}\r\n\r\n\t\tvar textures = {};\r\n\r\n\t\tif ( json !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar data = json[ i ];\r\n\r\n\t\t\t\tif ( data.image === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( images[ data.image ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar texture = new THREE.Texture( images[ data.image ] );\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\ttexture.uuid = data.uuid;\r\n\r\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\r\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping );\r\n\t\t\t\tif ( data.offset !== undefined ) texture.offset = new THREE.Vector2( data.offset[ 0 ], data.offset[ 1 ] );\r\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat = new THREE.Vector2( data.repeat[ 0 ], data.repeat[ 1 ] );\r\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter );\r\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter );\r\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\r\n\t\t\t\tif ( Array.isArray( data.wrap ) ) {\r\n\r\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ] );\r\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextures[ data.uuid ] = texture;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn textures;\r\n\r\n\t},\r\n\r\n\tparseObject: function () {\r\n\r\n\t\tvar matrix = new THREE.Matrix4();\r\n\r\n\t\treturn function ( data, geometries, materials ) {\r\n\r\n\t\t\tvar object;\r\n\r\n\t\t\tvar getGeometry = function ( name ) {\r\n\r\n\t\t\t\tif ( geometries[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn geometries[ name ];\r\n\r\n\t\t\t};\r\n\r\n\t\t\tvar getMaterial = function ( name ) {\r\n\r\n\t\t\t\tif ( materials[ name ] === undefined ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn materials[ name ];\r\n\r\n\t\t\t};\r\n\r\n\t\t\tswitch ( data.type ) {\r\n\r\n\t\t\t\tcase 'Scene':\r\n\r\n\t\t\t\t\tobject = new THREE.Scene();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PerspectiveCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'OrthographicCamera':\r\n\r\n\t\t\t\t\tobject = new THREE.OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'AmbientLight':\r\n\r\n\t\t\t\t\tobject = new THREE.AmbientLight( data.color );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'DirectionalLight':\r\n\r\n\t\t\t\t\tobject = new THREE.DirectionalLight( data.color, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointLight':\r\n\r\n\t\t\t\t\tobject = new THREE.PointLight( data.color, data.intensity, data.distance, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'SpotLight':\r\n\r\n\t\t\t\t\tobject = new THREE.SpotLight( data.color, data.intensity, data.distance, data.angle, data.exponent, data.decay );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'HemisphereLight':\r\n\r\n\t\t\t\t\tobject = new THREE.HemisphereLight( data.color, data.groundColor, data.intensity );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Mesh':\r\n\r\n\t\t\t\t\tobject = new THREE.Mesh( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'LOD':\r\n\r\n\t\t\t\t\tobject = new THREE.LOD();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Line':\r\n\r\n\t\t\t\t\tobject = new THREE.Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'PointCloud':\r\n\t\t\t\tcase 'Points':\r\n\r\n\t\t\t\t\tobject = new THREE.Points( getGeometry( data.geometry ), getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Sprite':\r\n\r\n\t\t\t\t\tobject = new THREE.Sprite( getMaterial( data.material ) );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Group':\r\n\r\n\t\t\t\t\tobject = new THREE.Group();\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tobject = new THREE.Object3D();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.uuid = data.uuid;\r\n\r\n\t\t\tif ( data.name !== undefined ) object.name = data.name;\r\n\t\t\tif ( data.matrix !== undefined ) {\r\n\r\n\t\t\t\tmatrix.fromArray( data.matrix );\r\n\t\t\t\tmatrix.decompose( object.position, object.quaternion, object.scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\r\n\t\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\r\n\t\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\r\n\t\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\r\n\r\n\t\t\tif ( data.visible !== undefined ) object.visible = data.visible;\r\n\t\t\tif ( data.userData !== undefined ) object.userData = data.userData;\r\n\r\n\t\t\tif ( data.children !== undefined ) {\r\n\r\n\t\t\t\tfor ( var child in data.children ) {\r\n\r\n\t\t\t\t\tobject.add( this.parseObject( data.children[ child ], geometries, materials ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( data.type === 'LOD' ) {\r\n\r\n\t\t\t\tvar levels = data.levels;\r\n\r\n\t\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\t\t\t\tvar level = levels[ l ];\r\n\t\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\r\n\r\n\t\t\t\t\tif ( child !== undefined ) {\r\n\r\n\t\t\t\t\t\tobject.addLevel( child, level.distance );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn object;\r\n\r\n\t\t}\r\n\r\n\t}()\r\n\r\n};\r\n\r\n// File:src/loaders/TextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.TextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n};\r\n\r\nTHREE.TextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.TextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new THREE.ImageLoader( scope.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\tvar texture = new THREE.Texture( image );\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad !== undefined ) {\r\n\r\n\t\t\t\tonLoad( texture );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/BinaryTextureLoader.js\r\n\r\n/**\r\n * @author Nikos M. / https://github.com/foo123/\r\n *\r\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\r\n */\r\n\r\nTHREE.DataTextureLoader = THREE.BinaryTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\nTHREE.BinaryTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.BinaryTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar texture = new THREE.DataTexture();\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\tvar texData = scope._parser( buffer );\r\n\r\n\t\t\tif ( ! texData ) return;\r\n\r\n\t\t\tif ( undefined !== texData.image ) {\r\n\r\n\t\t\t\ttexture.image = texData.image;\r\n\r\n\t\t\t} else if ( undefined !== texData.data ) {\r\n\r\n\t\t\t\ttexture.image.width = texData.width;\r\n\t\t\t\ttexture.image.height = texData.height;\r\n\t\t\t\ttexture.image.data = texData.data;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.wrapS = undefined !== texData.wrapS ? texData.wrapS : THREE.ClampToEdgeWrapping;\r\n\t\t\ttexture.wrapT = undefined !== texData.wrapT ? texData.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\t\t\ttexture.magFilter = undefined !== texData.magFilter ? texData.magFilter : THREE.LinearFilter;\r\n\t\t\ttexture.minFilter = undefined !== texData.minFilter ? texData.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\t\t\ttexture.anisotropy = undefined !== texData.anisotropy ? texData.anisotropy : 1;\r\n\r\n\t\t\tif ( undefined !== texData.format ) {\r\n\r\n\t\t\t\ttexture.format = texData.format;\r\n\r\n\t\t\t}\r\n\t\t\tif ( undefined !== texData.type ) {\r\n\r\n\t\t\t\ttexture.type = texData.type;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( undefined !== texData.mipmaps ) {\r\n\r\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( 1 === texData.mipmapCount ) {\r\n\r\n\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t}\r\n\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture, texData );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/loaders/CompressedTextureLoader.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * Abstract Base class to block based textures loader (dds, pvr, ...)\r\n */\r\n\r\nTHREE.CompressedTextureLoader = function ( manager ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : THREE.DefaultLoadingManager;\r\n\r\n\t// override in sub classes\r\n\tthis._parser = null;\r\n\r\n};\r\n\r\n\r\nTHREE.CompressedTextureLoader.prototype = {\r\n\r\n\tconstructor: THREE.CompressedTextureLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar texture = new THREE.CompressedTexture();\r\n\t\ttexture.image = images;\r\n\r\n\t\tvar loader = new THREE.XHRLoader( this.manager );\r\n\t\tloader.setCrossOrigin( this.crossOrigin );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\r\n\t\tif ( Array.isArray( url ) ) {\r\n\r\n\t\t\tvar loaded = 0;\r\n\r\n\t\t\tvar loadTexture = function ( i ) {\r\n\r\n\t\t\t\tloader.load( url[ i ], function ( buffer ) {\r\n\r\n\t\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\t\timages[ i ] = {\r\n\t\t\t\t\t\twidth: texDatas.width,\r\n\t\t\t\t\t\theight: texDatas.height,\r\n\t\t\t\t\t\tformat: texDatas.format,\r\n\t\t\t\t\t\tmipmaps: texDatas.mipmaps\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\r\n \t\t\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, onProgress, onError );\r\n\r\n\t\t\t};\r\n\r\n\t\t\tfor ( var i = 0, il = url.length; i < il; ++ i ) {\r\n\r\n\t\t\t\tloadTexture( i );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// compressed cubemap texture stored in a single DDS file\r\n\r\n\t\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\t\tvar texDatas = scope._parser( buffer, true );\r\n\r\n\t\t\t\tif ( texDatas.isCubemap ) {\r\n\r\n\t\t\t\t\tvar faces = texDatas.mipmaps.length / texDatas.mipmapCount;\r\n\r\n\t\t\t\t\tfor ( var f = 0; f < faces; f ++ ) {\r\n\r\n\t\t\t\t\t\timages[ f ] = { mipmaps : [] };\r\n\r\n\t\t\t\t\t\tfor ( var i = 0; i < texDatas.mipmapCount; i ++ ) {\r\n\r\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\r\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\r\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\r\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\ttexture.image.width = texDatas.width;\r\n\t\t\t\t\ttexture.image.height = texDatas.height;\r\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\r\n\r\n\t\t\t\t\ttexture.minFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.format = texDatas.format;\r\n\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t}, onProgress, onError );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tsetCrossOrigin: function ( value ) {\r\n\r\n\t\tthis.crossOrigin = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/materials/Material.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Material = function () {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.MaterialIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.type = 'Material';\r\n\r\n\tthis.side = THREE.FrontSide;\r\n\r\n\tthis.opacity = 1;\r\n\tthis.transparent = false;\r\n\r\n\tthis.blending = THREE.NormalBlending;\r\n\r\n\tthis.blendSrc = THREE.SrcAlphaFactor;\r\n\tthis.blendDst = THREE.OneMinusSrcAlphaFactor;\r\n\tthis.blendEquation = THREE.AddEquation;\r\n\tthis.blendSrcAlpha = null;\r\n\tthis.blendDstAlpha = null;\r\n\tthis.blendEquationAlpha = null;\r\n\r\n\tthis.depthFunc = THREE.LessEqualDepth;\r\n\tthis.depthTest = true;\r\n\tthis.depthWrite = true;\r\n\r\n\tthis.colorWrite = true;\r\n\r\n\tthis.precision = null; // override the renderer's default precision for this material\r\n\r\n\tthis.polygonOffset = false;\r\n\tthis.polygonOffsetFactor = 0;\r\n\tthis.polygonOffsetUnits = 0;\r\n\r\n\tthis.alphaTest = 0;\r\n\r\n\tthis.overdraw = 0; // Overdrawn pixels (typically between 0 and 1) for fixing antialiasing gaps in CanvasRenderer\r\n\r\n\tthis.visible = true;\r\n\r\n\tthis._needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.Material.prototype = {\r\n\r\n\tconstructor: THREE.Material,\r\n\r\n\tget needsUpdate () {\r\n\r\n\t\treturn this._needsUpdate;\r\n\r\n\t},\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.update();\r\n\r\n\t\tthis._needsUpdate = value;\r\n\r\n\t},\r\n\r\n\tsetValues: function ( values ) {\r\n\r\n\t\tif ( values === undefined ) return;\r\n\r\n\t\tfor ( var key in values ) {\r\n\r\n\t\t\tvar newValue = values[ key ];\r\n\r\n\t\t\tif ( newValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar currentValue = this[ key ];\r\n\r\n\t\t\tif ( currentValue === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( currentValue instanceof THREE.Color ) {\r\n\r\n\t\t\t\tcurrentValue.set( newValue );\r\n\r\n\t\t\t} else if ( currentValue instanceof THREE.Vector3 && newValue instanceof THREE.Vector3 ) {\r\n\r\n\t\t\t\tcurrentValue.copy( newValue );\r\n\r\n\t\t\t} else if ( key === 'overdraw' ) {\r\n\r\n\t\t\t\t// ensure overdraw is backwards-compatible with legacy boolean type\r\n\t\t\t\tthis[ key ] = Number( newValue );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis[ key ] = newValue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tvar data = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Material',\r\n\t\t\t\tgenerator: 'Material.toJSON'\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// standard Material serialization\r\n\t\tdata.uuid = this.uuid;\r\n\t\tdata.type = this.type;\r\n\t\tif ( this.name !== '' ) data.name = this.name;\r\n\r\n\t\tif ( this.color instanceof THREE.Color ) data.color = this.color.getHex();\r\n\t\tif ( this.emissive instanceof THREE.Color ) data.emissive = this.emissive.getHex();\r\n\t\tif ( this.specular instanceof THREE.Color ) data.specular = this.specular.getHex();\r\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\r\n\r\n\t\tif ( this.map instanceof THREE.Texture ) data.map = this.map.toJSON( meta ).uuid;\r\n\t\tif ( this.alphaMap instanceof THREE.Texture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\r\n\t\tif ( this.lightMap instanceof THREE.Texture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\r\n\t\tif ( this.bumpMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\r\n\t\t\tdata.bumpScale = this.bumpScale;\r\n\r\n\t\t}\r\n\t\tif ( this.normalMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\r\n\t\t\tdata.normalScale = this.normalScale; // Removed for now, causes issue in editor ui.js\r\n\r\n\t\t}\r\n\t\tif ( this.displacementMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\r\n\t\t\tdata.displacementScale = this.displacementScale;\r\n\t\t\tdata.displacementBias = this.displacementBias;\r\n\r\n\t\t}\r\n\t\tif ( this.specularMap instanceof THREE.Texture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\r\n\t\tif ( this.envMap instanceof THREE.Texture ) {\r\n\r\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\r\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.size !== undefined ) data.size = this.size;\r\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\r\n\r\n\t\tif ( this.vertexColors !== undefined && this.vertexColors !== THREE.NoColors ) data.vertexColors = this.vertexColors;\r\n\t\tif ( this.shading !== undefined && this.shading !== THREE.SmoothShading ) data.shading = this.shading;\r\n\t\tif ( this.blending !== undefined && this.blending !== THREE.NormalBlending ) data.blending = this.blending;\r\n\t\tif ( this.side !== undefined && this.side !== THREE.FrontSide ) data.side = this.side;\r\n\r\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\r\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\r\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\r\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\r\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.name = source.name;\r\n\r\n\t\tthis.side = source.side;\r\n\r\n\t\tthis.opacity = source.opacity;\r\n\t\tthis.transparent = source.transparent;\r\n\r\n\t\tthis.blending = source.blending;\r\n\r\n\t\tthis.blendSrc = source.blendSrc;\r\n\t\tthis.blendDst = source.blendDst;\r\n\t\tthis.blendEquation = source.blendEquation;\r\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\r\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\r\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\r\n\r\n\t\tthis.depthFunc = source.depthFunc;\r\n\t\tthis.depthTest = source.depthTest;\r\n\t\tthis.depthWrite = source.depthWrite;\r\n\r\n\t\tthis.precision = source.precision;\r\n\r\n\t\tthis.polygonOffset = source.polygonOffset;\r\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\r\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\r\n\r\n\t\tthis.alphaTest = source.alphaTest;\r\n\r\n\t\tthis.overdraw = source.overdraw;\r\n\r\n\t\tthis.visible = source.visible;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tupdate: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'update' } );\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\t// Deprecated\r\n\r\n\tget wrapAround () {\r\n\r\n\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\r\n\t},\r\n\r\n\tset wrapAround ( boolean ) {\r\n\r\n\t\tconsole.warn( 'THREE.' + this.type + ': .wrapAround has been removed.' );\r\n\r\n\t},\r\n\r\n\tget wrapRGB () {\r\n\r\n\t\tconsole.warn( 'THREE.' + this.type + ': .wrapRGB has been removed.' );\r\n\t\treturn new THREE.Color();\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Material.prototype );\r\n\r\nTHREE.MaterialIdCount = 0;\r\n\r\n// File:src/materials/LineBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *  linecap: \"round\",\r\n *  linejoin: \"round\",\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\tthis.linecap = 'round';\r\n\tthis.linejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial;\r\n\r\nTHREE.LineBasicMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.linewidth = source.linewidth;\r\n\tthis.linecap = source.linecap;\r\n\tthis.linejoin = source.linejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/LineDashedMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  linewidth: <float>,\r\n *\r\n *  scale: <float>,\r\n *  dashSize: <float>,\r\n *  gapSize: <float>,\r\n *\r\n *  vertexColors: <bool>\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.LineDashedMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'LineDashedMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.scale = 1;\r\n\tthis.dashSize = 3;\r\n\tthis.gapSize = 1;\r\n\r\n\tthis.vertexColors = false;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.LineDashedMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial;\r\n\r\nTHREE.LineDashedMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\t\r\n\tthis.linewidth = source.linewidth;\r\n\r\n\tthis.scale = source.scale;\r\n\tthis.dashSize = source.dashSize;\r\n\tthis.gapSize = source.gapSize;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshBasicMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshBasicMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshBasicMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // emissive\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshBasicMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial;\r\n\r\nTHREE.MeshBasicMaterial.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\t\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshLambertMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  emissive: <hex>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshLambertMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshLambertMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshLambertMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial;\r\n\r\nTHREE.MeshLambertMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.emissive.copy( source.emissive );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshPhongMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  emissive: <hex>,\r\n *  specular: <hex>,\r\n *  shininess: <float>,\r\n *  opacity: <float>,\r\n *\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  lightMap: new THREE.Texture( <Image> ),\r\n *  lightMapIntensity: <float>\r\n *\r\n *  aoMap: new THREE.Texture( <Image> ),\r\n *  aoMapIntensity: <float>\r\n *\r\n *  emissiveMap: new THREE.Texture( <Image> ),\r\n *\r\n *  bumpMap: new THREE.Texture( <Image> ),\r\n *  bumpScale: <float>,\r\n *\r\n *  normalMap: new THREE.Texture( <Image> ),\r\n *  normalScale: <Vector2>,\r\n *\r\n *  displacementMap: new THREE.Texture( <Image> ),\r\n *  displacementScale: <float>,\r\n *  displacementBias: <float>,\r\n *\r\n *  specularMap: new THREE.Texture( <Image> ),\r\n *\r\n *  alphaMap: new THREE.Texture( <Image> ),\r\n *\r\n *  envMap: new THREE.TextureCube( [posx, negx, posy, negy, posz, negz] ),\r\n *  combine: THREE.Multiply,\r\n *  reflectivity: <float>,\r\n *  refractionRatio: <float>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.MeshPhongMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshPhongMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff ); // diffuse\r\n\tthis.emissive = new THREE.Color( 0x000000 );\r\n\tthis.specular = new THREE.Color( 0x111111 );\r\n\tthis.shininess = 30;\r\n\r\n\tthis.metal = false;\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.lightMap = null;\r\n\tthis.lightMapIntensity = 1.0;\r\n\r\n\tthis.aoMap = null;\r\n\tthis.aoMapIntensity = 1.0;\r\n\r\n\tthis.emissiveMap = null;\r\n\r\n\tthis.bumpMap = null;\r\n\tthis.bumpScale = 1;\r\n\r\n\tthis.normalMap = null;\r\n\tthis.normalScale = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.displacementMap = null;\r\n\tthis.displacementScale = 1;\r\n\tthis.displacementBias = 0;\r\n\r\n\tthis.specularMap = null;\r\n\r\n\tthis.alphaMap = null;\r\n\r\n\tthis.envMap = null;\r\n\tthis.combine = THREE.MultiplyOperation;\r\n\tthis.reflectivity = 1;\r\n\tthis.refractionRatio = 0.98;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\tthis.wireframeLinecap = 'round';\r\n\tthis.wireframeLinejoin = 'round';\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.skinning = false;\r\n\tthis.morphTargets = false;\r\n\tthis.morphNormals = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshPhongMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial;\r\n\r\nTHREE.MeshPhongMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.emissive.copy( source.emissive );\r\n\tthis.specular.copy( source.specular );\r\n\tthis.shininess = source.shininess;\r\n\r\n\tthis.metal = source.metal;\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.lightMap = source.lightMap;\r\n\tthis.lightMapIntensity = source.lightMapIntensity;\r\n\r\n\tthis.aoMap = source.aoMap;\r\n\tthis.aoMapIntensity = source.aoMapIntensity;\r\n\r\n\tthis.emissiveMap = source.emissiveMap;\r\n\r\n\tthis.bumpMap = source.bumpMap;\r\n\tthis.bumpScale = source.bumpScale;\r\n\r\n\tthis.normalMap = source.normalMap;\r\n\tthis.normalScale.copy( source.normalScale );\r\n\r\n\tthis.displacementMap = source.displacementMap;\r\n\tthis.displacementScale = source.displacementScale;\r\n\tthis.displacementBias = source.displacementBias;\r\n\r\n\tthis.specularMap = source.specularMap;\r\n\r\n\tthis.alphaMap = source.alphaMap;\r\n\r\n\tthis.envMap = source.envMap;\r\n\tthis.combine = source.combine;\r\n\tthis.reflectivity = source.reflectivity;\r\n\tthis.refractionRatio = source.refractionRatio;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\tthis.wireframeLinecap = source.wireframeLinecap;\r\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshDepthMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshDepthMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'MeshDepthMaterial';\r\n\r\n\tthis.morphTargets = false;\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshDepthMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial;\r\n\r\nTHREE.MeshDepthMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MeshNormalMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n *\r\n * parameters = {\r\n *  opacity: <float>,\r\n *\r\n *  shading: THREE.FlatShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>\r\n * }\r\n */\r\n\r\nTHREE.MeshNormalMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this, parameters );\r\n\r\n\tthis.type = 'MeshNormalMaterial';\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.morphTargets = false;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.MeshNormalMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial;\r\n\r\nTHREE.MeshNormalMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/materials/MultiMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.MultiMaterial = function ( materials ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.type = 'MultiMaterial';\r\n\r\n\tthis.materials = materials instanceof Array ? materials : [];\r\n\r\n\tthis.visible = true;\r\n\r\n};\r\n\r\nTHREE.MultiMaterial.prototype = {\r\n\r\n\tconstructor: THREE.MultiMaterial,\r\n\r\n\ttoJSON: function () {\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.2,\r\n\t\t\t\ttype: 'material',\r\n\t\t\t\tgenerator: 'MaterialExporter'\r\n\t\t\t},\r\n\t\t\tuuid: this.uuid,\r\n\t\t\ttype: this.type,\r\n\t\t\tmaterials: []\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, l = this.materials.length; i < l; i ++ ) {\r\n\r\n\t\t\toutput.materials.push( this.materials[ i ].toJSON() );\r\n\r\n\t\t}\r\n\r\n\t\toutput.visible = this.visible;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\tvar material = new this.constructor();\r\n\r\n\t\tfor ( var i = 0; i < this.materials.length; i ++ ) {\r\n\r\n\t\t\tmaterial.materials.push( this.materials[ i ].clone() );\r\n\r\n\t\t}\r\n\r\n\t\tmaterial.visible = this.visible;\r\n\r\n\t\treturn material;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// backwards compatibility\r\n\r\nTHREE.MeshFaceMaterial = THREE.MultiMaterial;\r\n\r\n// File:src/materials/PointsMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  size: <float>,\r\n *  sizeAttenuation: <bool>,\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  vertexColors: <bool>,\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.PointsMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'PointsMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\r\n\tthis.map = null;\r\n\r\n\tthis.size = 1;\r\n\tthis.sizeAttenuation = true;\r\n\r\n\tthis.vertexColors = THREE.NoColors;\r\n\r\n\tthis.fog = true;\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.PointsMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.PointsMaterial.prototype.constructor = THREE.PointsMaterial;\r\n\r\nTHREE.PointsMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\r\n\tthis.map = source.map;\r\n\r\n\tthis.size = source.size;\r\n\tthis.sizeAttenuation = source.sizeAttenuation;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// backwards compatibility\r\n\r\nTHREE.PointCloudMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new THREE.PointsMaterial( parameters );\r\n\r\n};\r\n\r\nTHREE.ParticleBasicMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new THREE.PointsMaterial( parameters );\r\n\r\n};\r\n\r\nTHREE.ParticleSystemMaterial = function ( parameters ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\r\n\treturn new THREE.PointsMaterial( parameters );\r\n\r\n};\r\n\r\n// File:src/materials/ShaderMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  defines: { \"label\" : \"value\" },\r\n *  uniforms: { \"parameter1\": { type: \"f\", value: 1.0 }, \"parameter2\": { type: \"i\" value2: 2 } },\r\n *\r\n *  fragmentShader: <string>,\r\n *  vertexShader: <string>,\r\n *\r\n *  shading: THREE.SmoothShading,\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *  wireframe: <boolean>,\r\n *  wireframeLinewidth: <float>,\r\n *\r\n *  lights: <bool>,\r\n *\r\n *  vertexColors: THREE.NoColors / THREE.VertexColors / THREE.FaceColors,\r\n *\r\n *  skinning: <bool>,\r\n *  morphTargets: <bool>,\r\n *  morphNormals: <bool>,\r\n *\r\n *\tfog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.ShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'ShaderMaterial';\r\n\r\n\tthis.defines = {};\r\n\tthis.uniforms = {};\r\n\r\n\tthis.vertexShader = 'void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}';\r\n\tthis.fragmentShader = 'void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}';\r\n\r\n\tthis.shading = THREE.SmoothShading;\r\n\r\n\tthis.linewidth = 1;\r\n\r\n\tthis.wireframe = false;\r\n\tthis.wireframeLinewidth = 1;\r\n\r\n\tthis.fog = false; // set to use scene fog\r\n\r\n\tthis.lights = false; // set to use scene lights\r\n\r\n\tthis.vertexColors = THREE.NoColors; // set to use \"color\" attribute stream\r\n\r\n\tthis.skinning = false; // set to use skinning attribute streams\r\n\r\n\tthis.morphTargets = false; // set to use morph targets\r\n\tthis.morphNormals = false; // set to use morph normals\r\n\r\n\tthis.derivatives = false; // set to use derivatives\r\n\r\n\t// When rendered geometry doesn't include these attributes but the material does,\r\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\r\n\tthis.defaultAttributeValues = {\r\n\t\t'color': [ 1, 1, 1 ],\r\n\t\t'uv': [ 0, 0 ],\r\n\t\t'uv2': [ 0, 0 ]\r\n\t};\r\n\r\n\tthis.index0AttributeName = undefined;\r\n\r\n\tif ( parameters !== undefined ) {\r\n\r\n\t\tif ( parameters.attributes !== undefined ) {\r\n\r\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\r\n\r\n\t\t}\r\n\r\n\t\tthis.setValues( parameters );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial;\r\n\r\nTHREE.ShaderMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.fragmentShader = source.fragmentShader;\r\n\tthis.vertexShader = source.vertexShader;\r\n\r\n\tthis.uniforms = THREE.UniformsUtils.clone( source.uniforms );\r\n\r\n\tthis.attributes = source.attributes;\r\n\tthis.defines = source.defines;\r\n\r\n\tthis.shading = source.shading;\r\n\r\n\tthis.wireframe = source.wireframe;\r\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\tthis.lights = source.lights;\r\n\r\n\tthis.vertexColors = source.vertexColors;\r\n\r\n\tthis.skinning = source.skinning;\r\n\r\n\tthis.morphTargets = source.morphTargets;\r\n\tthis.morphNormals = source.morphNormals;\r\n\r\n\tthis.derivatives = source.derivatives;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.ShaderMaterial.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Material.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.uniforms = this.uniforms;\r\n\tdata.attributes = this.attributes;\r\n\tdata.vertexShader = this.vertexShader;\r\n\tdata.fragmentShader = this.fragmentShader;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/materials/RawShaderMaterial.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.RawShaderMaterial = function ( parameters ) {\r\n\r\n\tTHREE.ShaderMaterial.call( this, parameters );\r\n\r\n\tthis.type = 'RawShaderMaterial';\r\n\r\n};\r\n\r\nTHREE.RawShaderMaterial.prototype = Object.create( THREE.ShaderMaterial.prototype );\r\nTHREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial;\r\n// File:src/materials/SpriteMaterial.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * parameters = {\r\n *  color: <hex>,\r\n *  opacity: <float>,\r\n *  map: new THREE.Texture( <Image> ),\r\n *\r\n *  blending: THREE.NormalBlending,\r\n *  depthTest: <bool>,\r\n *  depthWrite: <bool>,\r\n *\r\n *\tuvOffset: new THREE.Vector2(),\r\n *\tuvScale: new THREE.Vector2(),\r\n *\r\n *  fog: <bool>\r\n * }\r\n */\r\n\r\nTHREE.SpriteMaterial = function ( parameters ) {\r\n\r\n\tTHREE.Material.call( this );\r\n\r\n\tthis.type = 'SpriteMaterial';\r\n\r\n\tthis.color = new THREE.Color( 0xffffff );\r\n\tthis.map = null;\r\n\r\n\tthis.rotation = 0;\r\n\r\n\tthis.fog = false;\r\n\r\n\t// set parameters\r\n\r\n\tthis.setValues( parameters );\r\n\r\n};\r\n\r\nTHREE.SpriteMaterial.prototype = Object.create( THREE.Material.prototype );\r\nTHREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial;\r\n\r\nTHREE.SpriteMaterial.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Material.prototype.copy.call( this, source );\r\n\r\n\tthis.color.copy( source.color );\r\n\tthis.map = source.map;\r\n\r\n\tthis.rotation = source.rotation;\r\n\r\n\tthis.fog = source.fog;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/textures/Texture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.Texture = function ( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tObject.defineProperty( this, 'id', { value: THREE.TextureIdCount ++ } );\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.name = '';\r\n\tthis.sourceFile = '';\r\n\r\n\tthis.image = image !== undefined ? image : THREE.Texture.DEFAULT_IMAGE;\r\n\tthis.mipmaps = [];\r\n\r\n\tthis.mapping = mapping !== undefined ? mapping : THREE.Texture.DEFAULT_MAPPING;\r\n\r\n\tthis.wrapS = wrapS !== undefined ? wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = wrapT !== undefined ? wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\r\n\r\n\tthis.format = format !== undefined ? format : THREE.RGBAFormat;\r\n\tthis.type = type !== undefined ? type : THREE.UnsignedByteType;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.generateMipmaps = true;\r\n\tthis.premultiplyAlpha = false;\r\n\tthis.flipY = true;\r\n\tthis.unpackAlignment = 4; // valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\r\n\r\n\tthis.version = 0;\r\n\tthis.onUpdate = null;\r\n\r\n};\r\n\r\nTHREE.Texture.DEFAULT_IMAGE = undefined;\r\nTHREE.Texture.DEFAULT_MAPPING = THREE.UVMapping;\r\n\r\nTHREE.Texture.prototype = {\r\n\r\n\tconstructor: THREE.Texture,\r\n\r\n\tset needsUpdate ( value ) {\r\n\r\n\t\tif ( value === true ) this.version ++;\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.image = source.image;\r\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\r\n\r\n\t\tthis.mapping = source.mapping;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\r\n\t\tthis.flipY = source.flipY;\r\n\t\tthis.unpackAlignment = source.unpackAlignment;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\ttoJSON: function ( meta ) {\r\n\r\n\t\tif ( meta.textures[ this.uuid ] !== undefined ) {\r\n\r\n\t\t\treturn meta.textures[ this.uuid ];\r\n\r\n\t\t}\r\n\r\n\t\tfunction getDataURL( image ) {\r\n\r\n\t\t\tvar canvas;\r\n\r\n\t\t\tif ( image.toDataURL !== undefined ) {\r\n\r\n\t\t\t\tcanvas = image;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcanvas = document.createElement( 'canvas' );\r\n\t\t\t\tcanvas.width = image.width;\r\n\t\t\t\tcanvas.height = image.height;\r\n\r\n\t\t\t\tcanvas.getContext( '2d' ).drawImage( image, 0, 0, image.width, image.height );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn canvas.toDataURL( 'image/png' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar output = {\r\n\t\t\tmetadata: {\r\n\t\t\t\tversion: 4.4,\r\n\t\t\t\ttype: 'Texture',\r\n\t\t\t\tgenerator: 'Texture.toJSON'\r\n\t\t\t},\r\n\r\n\t\t\tuuid: this.uuid,\r\n\t\t\tname: this.name,\r\n\r\n\t\t\tmapping: this.mapping,\r\n\r\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\r\n\t\t\toffset: [ this.offset.x, this.offset.y ],\r\n\t\t\twrap: [ this.wrapS, this.wrapT ],\r\n\r\n\t\t\tminFilter: this.minFilter,\r\n\t\t\tmagFilter: this.magFilter,\r\n\t\t\tanisotropy: this.anisotropy\r\n\t\t};\r\n\r\n\t\tif ( this.image !== undefined ) {\r\n\r\n\t\t\t// TODO: Move to THREE.Image\r\n\r\n\t\t\tvar image = this.image;\r\n\r\n\t\t\tif ( image.uuid === undefined ) {\r\n\r\n\t\t\t\timage.uuid = THREE.Math.generateUUID(); // UGH\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( meta.images[ image.uuid ] === undefined ) {\r\n\r\n\t\t\t\tmeta.images[ image.uuid ] = {\r\n\t\t\t\t\tuuid: image.uuid,\r\n\t\t\t\t\turl: getDataURL( image )\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\toutput.image = image.uuid;\r\n\r\n\t\t}\r\n\r\n\t\tmeta.textures[ this.uuid ] = output;\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t},\r\n\r\n\ttransformUv: function ( uv ) {\r\n\r\n\t\tif ( this.mapping !== THREE.UVMapping )  return;\r\n\r\n\t\tuv.multiply( this.repeat );\r\n\t\tuv.add( this.offset );\r\n\r\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapS ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\r\n\r\n\t\t\tswitch ( this.wrapT ) {\r\n\r\n\t\t\t\tcase THREE.RepeatWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.ClampToEdgeWrapping:\r\n\r\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MirroredRepeatWrapping:\r\n\r\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\r\n\r\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.flipY ) {\r\n\r\n\t\t\tuv.y = 1 - uv.y;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.Texture.prototype );\r\n\r\nTHREE.TextureIdCount = 0;\r\n\r\n// File:src/textures/CanvasTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CanvasTexture = function ( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.needsUpdate = true;\r\n\r\n};\r\n\r\nTHREE.CanvasTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CanvasTexture.prototype.constructor = THREE.CanvasTexture;\r\n\r\n// File:src/textures/CubeTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CubeTexture = function ( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tmapping = mapping !== undefined ? mapping : THREE.CubeReflectionMapping;\r\n\r\n\tTHREE.Texture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.images = images;\r\n\tthis.flipY = false;\r\n\r\n};\r\n\r\nTHREE.CubeTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CubeTexture.prototype.constructor = THREE.CubeTexture;\r\n\r\nTHREE.CubeTexture.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Texture.prototype.copy.call( this, source );\r\n\t\r\n\tthis.images = source.images;\r\n\t\r\n\treturn this;\r\n\r\n};\r\n// File:src/textures/CompressedTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.CompressedTexture = function ( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { width: width, height: height };\r\n\tthis.mipmaps = mipmaps;\r\n\r\n\t// no flipping for cube textures\r\n\t// (also flipping doesn't work for compressed textures )\r\n\r\n\tthis.flipY = false;\r\n\r\n\t// can't generate mipmaps for compressed textures\r\n\t// mips must be embedded in DDS files\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n};\r\n\r\nTHREE.CompressedTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture;\r\n\r\n// File:src/textures/DataTexture.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.DataTexture = function ( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.image = { data: data, width: width, height: height };\r\n\r\n\tthis.magFilter = magFilter !== undefined ? magFilter : THREE.NearestFilter;\r\n\tthis.minFilter = minFilter !== undefined ? minFilter : THREE.NearestFilter;\r\n\t\r\n\tthis.flipY = false;\r\n\tthis.generateMipmaps  = false;\r\n\r\n};\r\n\r\nTHREE.DataTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.DataTexture.prototype.constructor = THREE.DataTexture;\r\n\r\n// File:src/textures/VideoTexture.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.VideoTexture = function ( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\r\n\r\n\tTHREE.Texture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\r\n\r\n\tthis.generateMipmaps = false;\r\n\r\n\tvar scope = this;\r\n\r\n\tvar update = function () {\r\n\r\n\t\trequestAnimationFrame( update );\r\n\r\n\t\tif ( video.readyState === video.HAVE_ENOUGH_DATA ) {\r\n\r\n\t\t\tscope.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tupdate();\r\n\r\n};\r\n\r\nTHREE.VideoTexture.prototype = Object.create( THREE.Texture.prototype );\r\nTHREE.VideoTexture.prototype.constructor = THREE.VideoTexture;\r\n\r\n// File:src/objects/Group.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Group = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Group';\r\n\r\n};\r\n\r\nTHREE.Group.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Group.prototype.constructor = THREE.Group;\r\n// File:src/objects/Points.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Points = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Points';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.PointsMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Points.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Points.prototype.constructor = THREE.Points;\r\n\r\nTHREE.Points.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar object = this;\r\n\t\tvar geometry = object.geometry;\r\n\t\tvar threshold = raycaster.params.Points.threshold;\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\r\n\t\tvar localThresholdSq = localThreshold * localThreshold;\r\n\t\tvar position = new THREE.Vector3();\r\n\r\n\t\tfunction testPoint( point, index ) {\r\n\r\n\t\t\tvar rayPointDistanceSq = ray.distanceSqToPoint( point );\r\n\r\n\t\t\tif ( rayPointDistanceSq < localThresholdSq ) {\r\n\r\n\t\t\t\tvar intersectPoint = ray.closestPointToPoint( point );\r\n\t\t\t\tintersectPoint.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\r\n\t\t\t\t\tpoint: intersectPoint.clone(),\r\n\t\t\t\t\tindex: index,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tobject: object\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\r\n\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tvar a = indices[ i ];\r\n\r\n\t\t\t\t\tposition.fromArray( positions, a * 3 );\r\n\r\n\t\t\t\t\ttestPoint( position, a );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\r\n\r\n\t\t\t\t\tposition.fromArray( positions, i * 3 );\r\n\r\n\t\t\t\t\ttestPoint( position, i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\r\n\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\r\n\r\n\t\t\t\ttestPoint( vertices[ i ], i );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Points.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\nTHREE.Points.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t// only serialize if not in meta geometries cache\r\n\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON();\r\n\r\n\t}\r\n\r\n\t// only serialize if not in meta materials cache\r\n\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\r\n\t}\r\n\r\n\tdata.object.geometry = this.geometry.uuid;\r\n\tdata.object.material = this.material.uuid;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.PointCloud = function ( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\r\n\treturn new THREE.Points( geometry, material );\r\n\r\n};\r\n\r\nTHREE.ParticleSystem = function ( geometry, material ) {\r\n\r\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\r\n\treturn new THREE.Points( geometry, material );\r\n\r\n};\r\n\r\n// File:src/objects/Line.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Line = function ( geometry, material, mode ) {\r\n\r\n\tif ( mode === 1 ) {\r\n\r\n\t\tconsole.warn( 'THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.' );\r\n\t\treturn new THREE.LineSegments( geometry, material );\r\n\r\n\t}\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Line';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.LineBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n};\r\n\r\nTHREE.Line.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Line.prototype.constructor = THREE.Line;\r\n\r\nTHREE.Line.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar precision = raycaster.linePrecision;\r\n\t\tvar precisionSq = precision * precision;\r\n\r\n\t\tvar geometry = this.geometry;\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tvar vStart = new THREE.Vector3();\r\n\t\tvar vEnd = new THREE.Vector3();\r\n\t\tvar interSegment = new THREE.Vector3();\r\n\t\tvar interRay = new THREE.Vector3();\r\n\t\tvar step = this instanceof THREE.LineSegments ? 2 : 1;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvar a = indices[ i ];\r\n\t\t\t\t\tvar b = indices[ i + 1 ];\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\r\n\r\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\r\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\r\n\r\n\t\t\t\t\tvar distSq = ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\r\n\r\n\t\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\t\tindex: i,\r\n\t\t\t\t\t\tface: null,\r\n\t\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar nbVertices = vertices.length;\r\n\r\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\r\n\r\n\t\t\t\tvar distSq = ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\r\n\r\n\t\t\t\tif ( distSq > precisionSq ) continue;\r\n\r\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\r\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\r\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\r\n\t\t\t\t\tindex: i,\r\n\t\t\t\t\tface: null,\r\n\t\t\t\t\tfaceIndex: null,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Line.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\nTHREE.Line.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t// only serialize if not in meta geometries cache\r\n\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON();\r\n\r\n\t}\r\n\r\n\t// only serialize if not in meta materials cache\r\n\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\r\n\t}\r\n\r\n\tdata.object.geometry = this.geometry.uuid;\r\n\tdata.object.material = this.material.uuid;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// DEPRECATED\r\n\r\nTHREE.LineStrip = 0;\r\nTHREE.LinePieces = 1;\r\n\r\n// File:src/objects/LineSegments.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LineSegments = function ( geometry, material ) {\r\n\r\n\tTHREE.Line.call( this, geometry, material );\r\n\r\n\tthis.type = 'LineSegments';\r\n\r\n};\r\n\r\nTHREE.LineSegments.prototype = Object.create( THREE.Line.prototype );\r\nTHREE.LineSegments.prototype.constructor = THREE.LineSegments;\r\n\r\n// File:src/objects/Mesh.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author jonobr1 / http://jonobr1.com/\r\n */\r\n\r\nTHREE.Mesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Mesh';\r\n\r\n\tthis.geometry = geometry !== undefined ? geometry : new THREE.Geometry();\r\n\tthis.material = material !== undefined ? material : new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } );\r\n\r\n\tthis.updateMorphTargets();\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Mesh.prototype.constructor = THREE.Mesh;\r\n\r\nTHREE.Mesh.prototype.updateMorphTargets = function () {\r\n\r\n\tif ( this.geometry.morphTargets !== undefined && this.geometry.morphTargets.length > 0 ) {\r\n\r\n\t\tthis.morphTargetBase = - 1;\r\n\t\tthis.morphTargetInfluences = [];\r\n\t\tthis.morphTargetDictionary = {};\r\n\r\n\t\tfor ( var m = 0, ml = this.geometry.morphTargets.length; m < ml; m ++ ) {\r\n\r\n\t\t\tthis.morphTargetInfluences.push( 0 );\r\n\t\t\tthis.morphTargetDictionary[ this.geometry.morphTargets[ m ].name ] = m;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.getMorphTargetIndexByName = function ( name ) {\r\n\r\n\tif ( this.morphTargetDictionary[ name ] !== undefined ) {\r\n\r\n\t\treturn this.morphTargetDictionary[ name ];\r\n\r\n\t}\r\n\r\n\tconsole.warn( 'THREE.Mesh.getMorphTargetIndexByName: morph target ' + name + ' does not exist. Returning 0.' );\r\n\r\n\treturn 0;\r\n\r\n};\r\n\r\n\r\nTHREE.Mesh.prototype.raycast = ( function () {\r\n\r\n\tvar inverseMatrix = new THREE.Matrix4();\r\n\tvar ray = new THREE.Ray();\r\n\tvar sphere = new THREE.Sphere();\r\n\r\n\tvar vA = new THREE.Vector3();\r\n\tvar vB = new THREE.Vector3();\r\n\tvar vC = new THREE.Vector3();\r\n\r\n\tvar tempA = new THREE.Vector3();\r\n\tvar tempB = new THREE.Vector3();\r\n\tvar tempC = new THREE.Vector3();\r\n\r\n\tvar uvA = new THREE.Vector2();\r\n\tvar uvB = new THREE.Vector2();\r\n\tvar uvC = new THREE.Vector2();\r\n\r\n\tvar barycoord = new THREE.Vector3();\r\n\r\n\tvar intersectionPoint = new THREE.Vector3();\r\n\tvar intersectionPointWorld = new THREE.Vector3();\r\n\r\n\tfunction uvIntersection( point, p1, p2, p3, uv1, uv2, uv3 ) {\r\n\r\n\t\tTHREE.Triangle.barycoordFromPoint( point, p1, p2, p3, barycoord );\r\n\r\n\t\tuv1.multiplyScalar( barycoord.x );\r\n\t\tuv2.multiplyScalar( barycoord.y );\r\n\t\tuv3.multiplyScalar( barycoord.z );\r\n\r\n\t\tuv1.add( uv2 ).add( uv3 );\r\n\r\n\t\treturn uv1.clone();\r\n\r\n\t}\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tvar geometry = this.geometry;\r\n\t\tvar material = this.material;\r\n\r\n\t\tif ( material === undefined ) return;\r\n\r\n\t\t// Checking boundingSphere distance to ray\r\n\r\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\r\n\r\n\t\tsphere.copy( geometry.boundingSphere );\r\n\t\tsphere.applyMatrix4( this.matrixWorld );\r\n\r\n\t\tif ( raycaster.ray.isIntersectionSphere( sphere ) === false ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\t// Check boundingBox before continuing\r\n\r\n\t\tinverseMatrix.getInverse( this.matrixWorld );\r\n\t\tray.copy( raycaster.ray ).applyMatrix4( inverseMatrix );\r\n\r\n\t\tif ( geometry.boundingBox !== null ) {\r\n\r\n\t\t\tif ( ray.isIntersectionBox( geometry.boundingBox ) === false ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar a, b, c;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar index = geometry.index;\r\n\t\t\tvar attributes = geometry.attributes;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tvar indices = index.array;\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = indices.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\ta = indices[ i ];\r\n\t\t\t\t\tb = indices[ i + 1 ];\r\n\t\t\t\t\tc = indices[ i + 2 ];\r\n\r\n\t\t\t\t\tvA.fromArray( positions, a * 3 );\r\n\t\t\t\t\tvB.fromArray( positions, b * 3 );\r\n\t\t\t\t\tvC.fromArray( positions, c * 3 );\r\n\r\n\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( vC, vB, vA, true, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tvar uv;\r\n\r\n\t\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar uvs = attributes.uv.array;\r\n\t\t\t\t\t\tuvA.fromArray( uvs, a * 2 );\r\n\t\t\t\t\t\tuvB.fromArray( uvs, b * 2 );\r\n\t\t\t\t\t\tuvC.fromArray( uvs, c * 2 );\r\n\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\tfaceIndex: Math.floor( i / 3 ), // triangle number in indices buffer semantics\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar positions = attributes.position.array;\r\n\r\n\t\t\t\tfor ( var i = 0, l = positions.length; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\tvA.fromArray( positions, i );\r\n\t\t\t\t\tvB.fromArray( positions, i + 3 );\r\n\t\t\t\t\tvC.fromArray( positions, i + 6 );\r\n\r\n\t\t\t\t\tif ( material.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( vC, vB, vA, true, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tif ( ray.intersectTriangle( vA, vB, vC, material.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\t\tvar uv;\r\n\r\n\t\t\t\t\tif ( attributes.uv !== undefined ) {\r\n\r\n\t\t\t\t\t\tvar uvs = attributes.uv.array;\r\n\t\t\t\t\t\tuvA.fromArray( uvs, i );\r\n\t\t\t\t\t\tuvB.fromArray( uvs, i + 2 );\r\n\t\t\t\t\t\tuvC.fromArray( uvs, i + 4 );\r\n\t\t\t\t\t\tuv = uvIntersection( intersectionPoint, vA, vB, vC, uvA, uvB, uvC );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ta = i / 3;\r\n\t\t\t\t\tb = a + 1;\r\n\t\t\t\t\tc = a + 2;\r\n\r\n\t\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\t\tuv: uv,\r\n\t\t\t\t\t\tface: new THREE.Face3( a, b, c, THREE.Triangle.normal( vA, vB, vC ) ),\r\n\t\t\t\t\t\tindex: a, // triangle number in positions buffer semantics\r\n\t\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t\t} );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar isFaceMaterial = material instanceof THREE.MeshFaceMaterial;\r\n\t\t\tvar materials = isFaceMaterial === true ? material.materials : null;\r\n\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar faces = geometry.faces;\r\n\r\n\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ f ];\r\n\t\t\t\tvar faceMaterial = isFaceMaterial === true ? materials[ face.materialIndex ] : material;\r\n\r\n\t\t\t\tif ( faceMaterial === undefined ) continue;\r\n\r\n\t\t\t\ta = vertices[ face.a ];\r\n\t\t\t\tb = vertices[ face.b ];\r\n\t\t\t\tc = vertices[ face.c ];\r\n\r\n\t\t\t\tif ( faceMaterial.morphTargets === true ) {\r\n\r\n\t\t\t\t\tvar morphTargets = geometry.morphTargets;\r\n\t\t\t\t\tvar morphInfluences = this.morphTargetInfluences;\r\n\r\n\t\t\t\t\tvA.set( 0, 0, 0 );\r\n\t\t\t\t\tvB.set( 0, 0, 0 );\r\n\t\t\t\t\tvC.set( 0, 0, 0 );\r\n\r\n\t\t\t\t\tfor ( var t = 0, tl = morphTargets.length; t < tl; t ++ ) {\r\n\r\n\t\t\t\t\t\tvar influence = morphInfluences[ t ];\r\n\r\n\t\t\t\t\t\tif ( influence === 0 ) continue;\r\n\r\n\t\t\t\t\t\tvar targets = morphTargets[ t ].vertices;\r\n\r\n\t\t\t\t\t\tvA.addScaledVector( tempA.subVectors( targets[ face.a ], a ), influence );\r\n\t\t\t\t\t\tvB.addScaledVector( tempB.subVectors( targets[ face.b ], b ), influence );\r\n\t\t\t\t\t\tvC.addScaledVector( tempC.subVectors( targets[ face.c ], c ), influence );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvA.add( a );\r\n\t\t\t\t\tvB.add( b );\r\n\t\t\t\t\tvC.add( c );\r\n\r\n\t\t\t\t\ta = vA;\r\n\t\t\t\t\tb = vB;\r\n\t\t\t\t\tc = vC;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( faceMaterial.side === THREE.BackSide ) {\r\n\r\n\t\t\t\t\tif ( ray.intersectTriangle( c, b, a, true, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( ray.intersectTriangle( a, b, c, faceMaterial.side !== THREE.DoubleSide, intersectionPoint ) === null ) continue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersectionPointWorld.copy( intersectionPoint );\r\n\t\t\t\tintersectionPointWorld.applyMatrix4( this.matrixWorld );\r\n\r\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( intersectionPointWorld );\r\n\r\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\r\n\r\n\t\t\t\tvar uv;\r\n\r\n\t\t\t\tif ( geometry.faceVertexUvs[ 0 ].length > 0 ) {\r\n\r\n\t\t\t\t\tvar uvs = geometry.faceVertexUvs[ 0 ][ f ];\r\n\t\t\t\t\tuvA.copy( uvs[ 0 ] );\r\n\t\t\t\t\tuvB.copy( uvs[ 1 ] );\r\n\t\t\t\t\tuvC.copy( uvs[ 2 ] );\r\n\t\t\t\t\tuv = uvIntersection( intersectionPoint, a, b, c, uvA, uvB, uvC );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tintersects.push( {\r\n\r\n\t\t\t\t\tdistance: distance,\r\n\t\t\t\t\tpoint: intersectionPointWorld.clone(),\r\n\t\t\t\t\tuv: uv,\r\n\t\t\t\t\tface: face,\r\n\t\t\t\t\tfaceIndex: f,\r\n\t\t\t\t\tobject: this\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Mesh.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.geometry, this.material ).copy( this );\r\n\r\n};\r\n\r\nTHREE.Mesh.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t// only serialize if not in meta geometries cache\r\n\tif ( meta.geometries[ this.geometry.uuid ] === undefined ) {\r\n\r\n\t\tmeta.geometries[ this.geometry.uuid ] = this.geometry.toJSON( meta );\r\n\r\n\t}\r\n\r\n\t// only serialize if not in meta materials cache\r\n\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON( meta );\r\n\r\n\t}\r\n\r\n\tdata.object.geometry = this.geometry.uuid;\r\n\tdata.object.material = this.material.uuid;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/objects/Bone.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Bone = function ( skin ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Bone';\r\n\r\n\tthis.skin = skin;\r\n\r\n};\r\n\r\nTHREE.Bone.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Bone.prototype.constructor = THREE.Bone;\r\n\r\nTHREE.Bone.prototype.copy = function ( source ) {\r\n\t\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\t\r\n\tthis.skin = source.skin;\r\n\t\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/objects/Skeleton.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author michael guerrero / http://realitymeltdown.com\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.Skeleton = function ( bones, boneInverses, useVertexTexture ) {\r\n\r\n\tthis.useVertexTexture = useVertexTexture !== undefined ? useVertexTexture : true;\r\n\r\n\tthis.identityMatrix = new THREE.Matrix4();\r\n\r\n\t// copy the bone array\r\n\r\n\tbones = bones || [];\r\n\r\n\tthis.bones = bones.slice( 0 );\r\n\r\n\t// create a bone texture or an array of floats\r\n\r\n\tif ( this.useVertexTexture ) {\r\n\r\n\t\t// layout (1 matrix = 4 pixels)\r\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\r\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\r\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\r\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\r\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\r\n\r\n\t\t\r\n\t\tvar size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\r\n\t\tsize = THREE.Math.nextPowerOfTwo( Math.ceil( size ) );\r\n\t\tsize = Math.max( size, 4 );\r\n\r\n\t\tthis.boneTextureWidth = size;\r\n\t\tthis.boneTextureHeight = size;\r\n\r\n\t\tthis.boneMatrices = new Float32Array( this.boneTextureWidth * this.boneTextureHeight * 4 ); // 4 floats per RGBA pixel\r\n\t\tthis.boneTexture = new THREE.DataTexture( this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType );\r\n\r\n\t} else {\r\n\r\n\t\tthis.boneMatrices = new Float32Array( 16 * this.bones.length );\r\n\r\n\t}\r\n\r\n\t// use the supplied bone inverses or calculate the inverses\r\n\r\n\tif ( boneInverses === undefined ) {\r\n\r\n\t\tthis.calculateInverses();\r\n\r\n\t} else {\r\n\r\n\t\tif ( this.bones.length === boneInverses.length ) {\r\n\r\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( 'THREE.Skeleton bonInverses is the wrong length.' );\r\n\r\n\t\t\tthis.boneInverses = [];\r\n\r\n\t\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t\tthis.boneInverses.push( new THREE.Matrix4() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.calculateInverses = function () {\r\n\r\n\tthis.boneInverses = [];\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tvar inverse = new THREE.Matrix4();\r\n\r\n\t\tif ( this.bones[ b ] ) {\r\n\r\n\t\t\tinverse.getInverse( this.bones[ b ].matrixWorld );\r\n\r\n\t\t}\r\n\r\n\t\tthis.boneInverses.push( inverse );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.pose = function () {\r\n\r\n\tvar bone;\r\n\r\n\t// recover the bind-time world matrices\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ b ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// compute the local matrices, positions, rotations and scales\r\n\r\n\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\tbone = this.bones[ b ];\r\n\r\n\t\tif ( bone ) {\r\n\r\n\t\t\tif ( bone.parent ) {\r\n\r\n\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\r\n\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbone.matrix.copy( bone.matrixWorld );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Skeleton.prototype.update = ( function () {\r\n\r\n\tvar offsetMatrix = new THREE.Matrix4();\r\n\r\n\treturn function update() {\r\n\r\n\t\t// flatten bone matrices to array\r\n\r\n\t\tfor ( var b = 0, bl = this.bones.length; b < bl; b ++ ) {\r\n\r\n\t\t\t// compute the offset between the current and the original transform\r\n\r\n\t\t\tvar matrix = this.bones[ b ] ? this.bones[ b ].matrixWorld : this.identityMatrix;\r\n\r\n\t\t\toffsetMatrix.multiplyMatrices( matrix, this.boneInverses[ b ] );\r\n\t\t\toffsetMatrix.flattenToArrayOffset( this.boneMatrices, b * 16 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.useVertexTexture ) {\r\n\r\n\t\t\tthis.boneTexture.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Skeleton.prototype.clone = function () {\r\n\r\n\treturn new THREE.Skeleton( this.bones, this.boneInverses, this.useVertexTexture );\r\n\r\n};\r\n\r\n// File:src/objects/SkinnedMesh.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkinnedMesh = function ( geometry, material, useVertexTexture ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'SkinnedMesh';\r\n\r\n\tthis.bindMode = \"attached\";\r\n\tthis.bindMatrix = new THREE.Matrix4();\r\n\tthis.bindMatrixInverse = new THREE.Matrix4();\r\n\r\n\t// init bones\r\n\r\n\t// TODO: remove bone creation as there is no reason (other than\r\n\t// convenience) for THREE.SkinnedMesh to do this.\r\n\r\n\tvar bones = [];\r\n\r\n\tif ( this.geometry && this.geometry.bones !== undefined ) {\r\n\r\n\t\tvar bone, gbone;\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tbone = new THREE.Bone( this );\r\n\t\t\tbones.push( bone );\r\n\r\n\t\t\tbone.name = gbone.name;\r\n\t\t\tbone.position.fromArray( gbone.pos );\r\n\t\t\tbone.quaternion.fromArray( gbone.rotq );\r\n\t\t\tif ( gbone.scl !== undefined ) bone.scale.fromArray( gbone.scl );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var b = 0, bl = this.geometry.bones.length; b < bl; ++ b ) {\r\n\r\n\t\t\tgbone = this.geometry.bones[ b ];\r\n\r\n\t\t\tif ( gbone.parent !== - 1 ) {\r\n\r\n\t\t\t\tbones[ gbone.parent ].add( bones[ b ] );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.add( bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.normalizeSkinWeights();\r\n\r\n\tthis.updateMatrixWorld( true );\r\n\tthis.bind( new THREE.Skeleton( bones, undefined, useVertexTexture ), this.matrixWorld );\r\n\r\n};\r\n\r\n\r\nTHREE.SkinnedMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh;\r\n\r\nTHREE.SkinnedMesh.prototype.bind = function( skeleton, bindMatrix ) {\r\n\r\n\tthis.skeleton = skeleton;\r\n\r\n\tif ( bindMatrix === undefined ) {\r\n\r\n\t\tthis.updateMatrixWorld( true );\r\n\t\t\r\n\t\tthis.skeleton.calculateInverses();\r\n\r\n\t\tbindMatrix = this.matrixWorld;\r\n\r\n\t}\r\n\r\n\tthis.bindMatrix.copy( bindMatrix );\r\n\tthis.bindMatrixInverse.getInverse( bindMatrix );\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.pose = function () {\r\n\r\n\tthis.skeleton.pose();\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.normalizeSkinWeights = function () {\r\n\r\n\tif ( this.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tfor ( var i = 0; i < this.geometry.skinIndices.length; i ++ ) {\r\n\r\n\t\t\tvar sw = this.geometry.skinWeights[ i ];\r\n\r\n\t\t\tvar scale = 1.0 / sw.lengthManhattan();\r\n\r\n\t\t\tif ( scale !== Infinity ) {\r\n\r\n\t\t\t\tsw.multiplyScalar( scale );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tsw.set( 1 ); // this will be normalized by the shader anyway\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\t// skinning weights assumed to be normalized for THREE.BufferGeometry\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.updateMatrixWorld = function( force ) {\r\n\r\n\tTHREE.Mesh.prototype.updateMatrixWorld.call( this, true );\r\n\r\n\tif ( this.bindMode === \"attached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\r\n\r\n\t} else if ( this.bindMode === \"detached\" ) {\r\n\r\n\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.SkinnedMesh unrecognized bindMode: ' + this.bindMode );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.SkinnedMesh.prototype.clone = function() {\r\n\r\n\treturn new this.constructor( this.geometry, this.material, this.useVertexTexture ).copy( this );\r\n\r\n};\r\n\r\n// File:src/objects/MorphAnimMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphAnimMesh = function ( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.type = 'MorphAnimMesh';\r\n\r\n\t// API\r\n\r\n\tthis.duration = 1000; // milliseconds\r\n\tthis.mirroredLoop = false;\r\n\tthis.time = 0;\r\n\r\n\t// internals\r\n\r\n\tthis.lastKeyframe = 0;\r\n\tthis.currentKeyframe = 0;\r\n\r\n\tthis.direction = 1;\r\n\tthis.directionBackwards = false;\r\n\r\n\tthis.setFrameRange( 0, geometry.morphTargets.length - 1 );\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphAnimMesh.prototype.constructor = THREE.MorphAnimMesh;\r\n\r\nTHREE.MorphAnimMesh.prototype.setFrameRange = function ( start, end ) {\r\n\r\n\tthis.startKeyframe = start;\r\n\tthis.endKeyframe = end;\r\n\r\n\tthis.length = this.endKeyframe - this.startKeyframe + 1;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setDirectionForward = function () {\r\n\r\n\tthis.direction = 1;\r\n\tthis.directionBackwards = false;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setDirectionBackward = function () {\r\n\r\n\tthis.direction = - 1;\r\n\tthis.directionBackwards = true;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.parseAnimations = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tif ( ! geometry.animations ) geometry.animations = {};\r\n\r\n\tvar firstAnimation, animations = geometry.animations;\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar parts = morph.name.match( pattern );\r\n\r\n\t\tif ( parts && parts.length > 1 ) {\r\n\r\n\t\t\tvar label = parts[ 1 ];\r\n\r\n\t\t\tif ( ! animations[ label ] ) animations[ label ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar animation = animations[ label ];\r\n\r\n\t\t\tif ( i < animation.start ) animation.start = i;\r\n\t\t\tif ( i > animation.end ) animation.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = label;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.setAnimationLabel = function ( label, start, end ) {\r\n\r\n\tif ( ! this.geometry.animations ) this.geometry.animations = {};\r\n\r\n\tthis.geometry.animations[ label ] = { start: start, end: end };\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.playAnimation = function ( label, fps ) {\r\n\r\n\tvar animation = this.geometry.animations[ label ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tthis.setFrameRange( animation.start, animation.end );\r\n\t\tthis.duration = 1000 * ( ( animation.end - animation.start ) / fps );\r\n\t\tthis.time = 0;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.MorphAnimMesh: animation[' + label + '] undefined in .playAnimation()' );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.updateAnimation = function ( delta ) {\r\n\r\n\tvar frameTime = this.duration / this.length;\r\n\r\n\tthis.time += this.direction * delta;\r\n\r\n\tif ( this.mirroredLoop ) {\r\n\r\n\t\tif ( this.time > this.duration || this.time < 0 ) {\r\n\r\n\t\t\tthis.direction *= - 1;\r\n\r\n\t\t\tif ( this.time > this.duration ) {\r\n\r\n\t\t\t\tthis.time = this.duration;\r\n\t\t\t\tthis.directionBackwards = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.time < 0 ) {\r\n\r\n\t\t\t\tthis.time = 0;\r\n\t\t\t\tthis.directionBackwards = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tthis.time = this.time % this.duration;\r\n\r\n\t\tif ( this.time < 0 ) this.time += this.duration;\r\n\r\n\t}\r\n\r\n\tvar keyframe = this.startKeyframe + THREE.Math.clamp( Math.floor( this.time / frameTime ), 0, this.length - 1 );\r\n\r\n\tvar influences = this.morphTargetInfluences;\r\n\r\n\tif ( keyframe !== this.currentKeyframe ) {\r\n\r\n\t\tinfluences[ this.lastKeyframe ] = 0;\r\n\t\tinfluences[ this.currentKeyframe ] = 1;\r\n\t\tinfluences[ keyframe ] = 0;\r\n\r\n\t\tthis.lastKeyframe = this.currentKeyframe;\r\n\t\tthis.currentKeyframe = keyframe;\r\n\r\n\t}\r\n\r\n\tvar mix = ( this.time % frameTime ) / frameTime;\r\n\r\n\tif ( this.directionBackwards ) {\r\n\r\n\t\tmix = 1 - mix;\r\n\r\n\t}\r\n\r\n\tinfluences[ this.currentKeyframe ] = mix;\r\n\tinfluences[ this.lastKeyframe ] = 1 - mix;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.interpolateTargets = function ( a, b, t ) {\r\n\r\n\tvar influences = this.morphTargetInfluences;\r\n\r\n\tfor ( var i = 0, l = influences.length; i < l; i ++ ) {\r\n\r\n\t\tinfluences[ i ] = 0;\r\n\r\n\t}\r\n\r\n\tif ( a > - 1 ) influences[ a ] = 1 - t;\r\n\tif ( b > - 1 ) influences[ b ] = t;\r\n\r\n};\r\n\r\nTHREE.MorphAnimMesh.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Mesh.prototype.copy.call( this, source );\r\n\r\n\tthis.duration = source.duration;\r\n\tthis.mirroredLoop = source.mirroredLoop;\r\n\tthis.time = source.time;\r\n\r\n\tthis.lastKeyframe = source.lastKeyframe;\r\n\tthis.currentKeyframe = source.currentKeyframe;\r\n\r\n\tthis.direction = source.direction;\r\n\tthis.directionBackwards = source.directionBackwards;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/objects/LOD.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.LOD = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'LOD';\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tlevels: {\r\n\t\t\tenumerable: true,\r\n\t\t\tvalue: []\r\n\t\t},\r\n\t\tobjects: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\r\n\t\t\t\treturn this.levels;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\n\r\nTHREE.LOD.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LOD.prototype.constructor = THREE.LOD;\r\n\r\nTHREE.LOD.prototype.addLevel = function ( object, distance ) {\r\n\r\n\tif ( distance === undefined ) distance = 0;\r\n\r\n\tdistance = Math.abs( distance );\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var l = 0; l < levels.length; l ++ ) {\r\n\r\n\t\tif ( distance < levels[ l ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tlevels.splice( l, 0, { distance: distance, object: object } );\r\n\r\n\tthis.add( object );\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.getObjectForDistance = function ( distance ) {\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tif ( distance < levels[ i ].distance ) {\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn levels[ i - 1 ].object;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distance = raycaster.ray.origin.distanceTo( matrixPosition );\r\n\r\n\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.LOD.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\r\n\treturn function update( camera ) {\r\n\r\n\t\tvar levels = this.levels;\r\n\r\n\t\tif ( levels.length > 1 ) {\r\n\r\n\t\t\tv1.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\tv2.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\t\tvar distance = v1.distanceTo( v2 );\r\n\r\n\t\t\tlevels[ 0 ].object.visible = true;\r\n\r\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\r\n\r\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\r\n\t\t\t\t\tlevels[ i ].object.visible = true;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( ; i < l; i ++ ) {\r\n\r\n\t\t\t\tlevels[ i ].object.visible = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}();\r\n\r\nTHREE.LOD.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source, false );\r\n\r\n\tvar levels = source.levels;\r\n\r\n\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tvar level = levels[ i ];\r\n\r\n\t\tthis.addLevel( level.object.clone(), level.distance );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.LOD.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\tdata.object.levels = [];\r\n\r\n\tvar levels = this.levels;\r\n\r\n\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\r\n\r\n\t\tvar level = levels[ i ];\r\n\r\n\t\tdata.object.levels.push( {\r\n\t\t\tobject: level.object.uuid,\r\n\t\t\tdistance: level.distance\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// File:src/objects/Sprite.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Sprite = ( function () {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 2,  0, 2, 3 ] );\r\n\tvar vertices = new Float32Array( [ - 0.5, - 0.5, 0,   0.5, - 0.5, 0,   0.5, 0.5, 0,   - 0.5, 0.5, 0 ] );\r\n\tvar uvs = new Float32Array( [ 0, 0,   1, 0,   1, 1,   0, 1 ] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\treturn function Sprite( material ) {\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tthis.type = 'Sprite';\r\n\r\n\t\tthis.geometry = geometry;\r\n\t\tthis.material = ( material !== undefined ) ? material : new THREE.SpriteMaterial();\r\n\r\n\t};\r\n\r\n} )();\r\n\r\nTHREE.Sprite.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Sprite.prototype.constructor = THREE.Sprite;\r\n\r\nTHREE.Sprite.prototype.raycast = ( function () {\r\n\r\n\tvar matrixPosition = new THREE.Vector3();\r\n\r\n\treturn function raycast( raycaster, intersects ) {\r\n\r\n\t\tmatrixPosition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tvar distanceSq = raycaster.ray.distanceSqToPoint( matrixPosition );\r\n\t\tvar guessSizeSq = this.scale.x * this.scale.y;\r\n\r\n\t\tif ( distanceSq > guessSizeSq ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tintersects.push( {\r\n\r\n\t\t\tdistance: Math.sqrt( distanceSq ),\r\n\t\t\tpoint: this.position,\r\n\t\t\tface: null,\r\n\t\t\tobject: this\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.Sprite.prototype.clone = function () {\r\n\r\n\treturn new this.constructor( this.material ).copy( this );\r\n\r\n};\r\n\r\nTHREE.Sprite.prototype.toJSON = function ( meta ) {\r\n\r\n\tvar data = THREE.Object3D.prototype.toJSON.call( this, meta );\r\n\r\n\t// only serialize if not in meta materials cache\r\n\tif ( meta.materials[ this.material.uuid ] === undefined ) {\r\n\r\n\t\tmeta.materials[ this.material.uuid ] = this.material.toJSON();\r\n\r\n\t}\r\n\r\n\tdata.object.material = this.material.uuid;\r\n\r\n\treturn data;\r\n\r\n};\r\n\r\n// Backwards compatibility\r\n\r\nTHREE.Particle = THREE.Sprite;\r\n\r\n// File:src/objects/LensFlare.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlare = function ( texture, size, distance, blending, color ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.lensFlares = [];\r\n\r\n\tthis.positionScreen = new THREE.Vector3();\r\n\tthis.customUpdateCallback = undefined;\r\n\r\n\tif ( texture !== undefined ) {\r\n\r\n\t\tthis.add( texture, size, distance, blending, color );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.LensFlare.prototype.constructor = THREE.LensFlare;\r\n\r\n\r\n/*\r\n * Add: adds another flare\r\n */\r\n\r\nTHREE.LensFlare.prototype.add = function ( texture, size, distance, blending, color, opacity ) {\r\n\r\n\tif ( size === undefined ) size = - 1;\r\n\tif ( distance === undefined ) distance = 0;\r\n\tif ( opacity === undefined ) opacity = 1;\r\n\tif ( color === undefined ) color = new THREE.Color( 0xffffff );\r\n\tif ( blending === undefined ) blending = THREE.NormalBlending;\r\n\r\n\tdistance = Math.min( distance, Math.max( 0, distance ) );\r\n\r\n\tthis.lensFlares.push( {\r\n\t\ttexture: texture,\t// THREE.Texture\r\n\t\tsize: size, \t\t// size in pixels (-1 = use texture.width)\r\n\t\tdistance: distance, \t// distance (0-1) from light source (0=at light source)\r\n\t\tx: 0, y: 0, z: 0,\t// screen position (-1 => 1) z = 0 is in front z = 1 is back\r\n\t\tscale: 1, \t\t// scale\r\n\t\trotation: 0, \t\t// rotation\r\n\t\topacity: opacity,\t// opacity\r\n\t\tcolor: color,\t\t// color\r\n\t\tblending: blending\t// blending\r\n\t} );\r\n\r\n};\r\n\r\n/*\r\n * Update lens flares update positions on all flares based on the screen position\r\n * Set myLensFlare.customUpdateCallback to alter the flares in your project specific way.\r\n */\r\n\r\nTHREE.LensFlare.prototype.updateLensFlares = function () {\r\n\r\n\tvar f, fl = this.lensFlares.length;\r\n\tvar flare;\r\n\tvar vecX = - this.positionScreen.x * 2;\r\n\tvar vecY = - this.positionScreen.y * 2;\r\n\r\n\tfor ( f = 0; f < fl; f ++ ) {\r\n\r\n\t\tflare = this.lensFlares[ f ];\r\n\r\n\t\tflare.x = this.positionScreen.x + vecX * flare.distance;\r\n\t\tflare.y = this.positionScreen.y + vecY * flare.distance;\r\n\r\n\t\tflare.wantedRotation = flare.x * Math.PI * 0.25;\r\n\t\tflare.rotation += ( flare.wantedRotation - flare.rotation ) * 0.25;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.LensFlare.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tthis.positionScreen.copy( source.positionScreen );\r\n\tthis.customUpdateCallback = source.customUpdateCallback;\r\n\r\n\tfor ( var i = 0, l = source.lensFlares.length; i < l; i ++ ) {\r\n\r\n\t\tthis.lensFlares.push( source.lensFlares[ i ] );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Scene.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Scene = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Scene';\r\n\r\n\tthis.fog = null;\r\n\tthis.overrideMaterial = null;\r\n\r\n\tthis.autoUpdate = true; // checked by the renderer\r\n\r\n};\r\n\r\nTHREE.Scene.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Scene.prototype.constructor = THREE.Scene;\r\n\r\nTHREE.Scene.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Object3D.prototype.copy.call( this, source );\r\n\r\n\tif ( source.fog !== null ) this.fog = source.fog.clone();\r\n\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\r\n\r\n\tthis.autoUpdate = source.autoUpdate;\r\n\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/scenes/Fog.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Fog = function ( color, near, far ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\r\n\tthis.near = ( near !== undefined ) ? near : 1;\r\n\tthis.far = ( far !== undefined ) ? far : 1000;\r\n\r\n};\r\n\r\nTHREE.Fog.prototype.clone = function () {\r\n\r\n\treturn new THREE.Fog( this.color.getHex(), this.near, this.far );\r\n\r\n};\r\n\r\n// File:src/scenes/FogExp2.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.FogExp2 = function ( color, density ) {\r\n\r\n\tthis.name = '';\r\n\r\n\tthis.color = new THREE.Color( color );\r\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\r\n\r\n};\r\n\r\nTHREE.FogExp2.prototype.clone = function () {\r\n\r\n\treturn new THREE.FogExp2( this.color.getHex(), this.density );\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderChunk.js\r\n\r\nTHREE.ShaderChunk = {};\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphamap_pars_fragment'] = \"#ifdef USE_ALPHAMAP\\n\\n\tuniform sampler2D alphaMap;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'alphatest_fragment'] = \"#ifdef ALPHATEST\\n\\n\tif ( diffuseColor.a < ALPHATEST ) discard;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_fragment'] = \"#ifdef USE_AOMAP\\n\\n\ttotalAmbientLight *= ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'aomap_pars_fragment'] = \"#ifdef USE_AOMAP\\n\\n\tuniform sampler2D aoMap;\\n\tuniform float aoMapIntensity;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/begin_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'begin_vertex'] = \"\\nvec3 transformed = vec3( position );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'beginnormal_vertex'] = \"\\nvec3 objectNormal = vec3( normal );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'bumpmap_pars_fragment'] = \"#ifdef USE_BUMPMAP\\n\\n\tuniform sampler2D bumpMap;\\n\tuniform float bumpScale;\\n\\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\\n\\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\\n\\n\tvec2 dHdxy_fwd() {\\n\\n\t\tvec2 dSTdx = dFdx( vUv );\\n\t\tvec2 dSTdy = dFdy( vUv );\\n\\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\n\t\treturn vec2( dBx, dBy );\\n\\n\t}\\n\\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\n\t\tvec3 vSigmaX = dFdx( surf_pos );\\n\t\tvec3 vSigmaY = dFdy( surf_pos );\\n\t\tvec3 vN = surf_norm;\t\t// normalized\\n\\n\t\tvec3 R1 = cross( vSigmaY, vN );\\n\t\tvec3 R2 = cross( vN, vSigmaX );\\n\\n\t\tfloat fDet = dot( vSigmaX, R1 );\\n\\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\n\t}\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_fragment'] = \"#ifdef USE_COLOR\\n\\n\tdiffuseColor.rgb *= vColor;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_fragment'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_pars_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvarying vec3 vColor;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/color_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'color_vertex'] = \"#ifdef USE_COLOR\\n\\n\tvColor.xyz = color.xyz;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/common.glsl\r\n\r\nTHREE.ShaderChunk[ 'common'] = \"#define PI 3.14159\\n#define PI2 6.28318\\n#define RECIPROCAL_PI2 0.15915494\\n#define LOG2 1.442695\\n#define EPSILON 1e-6\\n\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\\n\\nvec3 transformDirection( in vec3 normal, in mat4 matrix ) {\\n\\n\treturn normalize( ( matrix * vec4( normal, 0.0 ) ).xyz );\\n\\n}\\n\\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\\nvec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\\n\\n\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\\n\\n}\\n\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\n\treturn - distance * planeNormal + point;\\n\\n}\\n\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n\\n}\\n\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n\\n}\\n\\nfloat calcLightAttenuation( float lightDistance, float cutoffDistance, float decayExponent ) {\\n\\n\tif ( decayExponent > 0.0 ) {\\n\\n\t  return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\n\t}\\n\\n\treturn 1.0;\\n\\n}\\n\\nvec3 F_Schlick( in vec3 specularColor, in float dotLH ) {\\n\\n\t// Original approximation by Christophe Schlick '94\\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\\n\\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\\n\tfloat fresnel = exp2( ( -5.55437 * dotLH - 6.98316 ) * dotLH );\\n\\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n\\n}\\n\\nfloat G_BlinnPhong_Implicit( /* in float dotNL, in float dotNV */ ) {\\n\\n\t// geometry term is (nl)(nv) / 4(nl)(nv)\\n\\n\treturn 0.25;\\n\\n}\\n\\nfloat D_BlinnPhong( in float shininess, in float dotNH ) {\\n\\n\t// factor of 1/PI in distribution term omitted\\n\\n\treturn ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n\\n}\\n\\nvec3 BRDF_BlinnPhong( in vec3 specularColor, in float shininess, in vec3 normal, in vec3 lightDir, in vec3 viewDir ) {\\n\\n\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\n\t//float dotNL = saturate( dot( normal, lightDir ) );\\n\t//float dotNV = saturate( dot( normal, viewDir ) );\\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\tfloat dotLH = saturate( dot( lightDir, halfDir ) );\\n\\n\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\\n\\n\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\n\treturn F * G * D;\\n\\n}\\n\\nvec3 inputToLinear( in vec3 a ) {\\n\\n\t#ifdef GAMMA_INPUT\\n\\n\t\treturn pow( a, vec3( float( GAMMA_FACTOR ) ) );\\n\\n\t#else\\n\\n\t\treturn a;\\n\\n\t#endif\\n\\n}\\n\\nvec3 linearToOutput( in vec3 a ) {\\n\\n\t#ifdef GAMMA_OUTPUT\\n\\n\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );\\n\\n\t#else\\n\\n\t\treturn a;\\n\\n\t#endif\\n\\n}\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'defaultnormal_vertex'] = \"#ifdef FLIP_SIDED\\n\\n\tobjectNormal = -objectNormal;\\n\\n#endif\\n\\nvec3 transformedNormal = normalMatrix * objectNormal;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_vertex'] = \"#ifdef USE_DISPLACEMENTMAP\\n\\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'displacementmap_pars_vertex'] = \"#ifdef USE_DISPLACEMENTMAP\\n\\n\tuniform sampler2D displacementMap;\\n\tuniform float displacementScale;\\n\tuniform float displacementBias;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_fragment'] = \"#ifdef USE_EMISSIVEMAP\\n\\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\n\temissiveColor.rgb = inputToLinear( emissiveColor.rgb );\\n\\n\ttotalEmissiveLight *= emissiveColor.rgb;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'emissivemap_pars_fragment'] = \"#ifdef USE_EMISSIVEMAP\\n\\n\tuniform sampler2D emissiveMap;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\\n\\n\t\t// Transforming Normal Vectors with the Inverse Transformation\\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\n\t\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\\n\\n\t\t#else\\n\\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t\t#endif\\n\\n\t#else\\n\\n\t\tvec3 reflectVec = vReflect;\\n\\n\t#endif\\n\\n\t#ifdef DOUBLE_SIDED\\n\t\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\t#else\\n\t\tfloat flipNormal = 1.0;\\n\t#endif\\n\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\t\tvec2 sampleUV;\\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\n\t#elif defined( ENVMAP_TYPE_SPHERE )\\n\t\tvec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\\n\t#endif\\n\\n\tenvColor.xyz = inputToLinear( envColor.xyz );\\n\\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\n\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_fragment'] = \"#ifdef USE_ENVMAP\\n\\n\tuniform float reflectivity;\\n\t#ifdef ENVMAP_TYPE_CUBE\\n\t\tuniform samplerCube envMap;\\n\t#else\\n\t\tuniform sampler2D envMap;\\n\t#endif\\n\tuniform float flipEnvMap;\\n\\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\n\t\tuniform float refractionRatio;\\n\\n\t#else\\n\\n\t\tvarying vec3 vReflect;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_pars_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvarying vec3 vReflect;\\n\\n\tuniform float refractionRatio;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/envmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'envmap_vertex'] = \"#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\\n\\n\tvec3 worldNormal = transformDirection( objectNormal, modelMatrix );\\n\\n\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\n\t#ifdef ENVMAP_MODE_REFLECTION\\n\\n\t\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\n\t#else\\n\\n\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_fragment'] = \"#ifdef USE_FOG\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\\n\\n\t#else\\n\\n\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\\n\\n\t#endif\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * depth * depth * LOG2 ) );\\n\\n\t#else\\n\\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, depth );\\n\\n\t#endif\\n\t\\n\toutgoingLight = mix( outgoingLight, fogColor, fogFactor );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'fog_pars_fragment'] = \"#ifdef USE_FOG\\n\\n\tuniform vec3 fogColor;\\n\\n\t#ifdef FOG_EXP2\\n\\n\t\tuniform float fogDensity;\\n\\n\t#else\\n\\n\t\tuniform float fogNear;\\n\t\tuniform float fogFar;\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\ttotalAmbientLight += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lightmap_pars_fragment'] = \"#ifdef USE_LIGHTMAP\\n\\n\tuniform sampler2D lightMap;\\n\tuniform float lightMapIntensity;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_pars_vertex'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_lambert_vertex'] = \"vLightFront = vec3( 0.0 );\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack = vec3( 0.0 );\\n\\n#endif\\n\\nvec3 normal = normalize( transformedNormal );\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = pointLightColor[ i ];\\n\\n\t\tvec3 lVector = pointLightPosition[ i ] - mvPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\t// attenuation\\n\\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = spotLightColor[ i ];\\n\\n\t\tvec3 lightPosition = spotLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition - mvPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\\n\\n\t\t\t// attenuation\\n\\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\\n\\n\t\t\tattenuation *= spotEffect;\\n\\n\t\t\t// diffuse\\n\\n\t\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\t\tvLightFront += lightColor * attenuation * saturate( dotProduct );\\n\\n\t\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\t\tvLightBack += lightColor * attenuation * saturate( - dotProduct );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = directionalLightColor[ i ];\\n\\n\t\tvec3 lightDir = directionalLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tvLightFront += lightColor * saturate( dotProduct );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tvLightBack += lightColor * saturate( - dotProduct );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\t#ifdef DOUBLE_SIDED\\n\\n\t\t\tfloat hemiDiffuseWeightBack = - 0.5 * dotProduct + 0.5;\\n\\n\t\t\tvLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\\n\\n\t\t#endif\\n\\n\t}\\n\\n#endif\\n\\nvLightFront += ambientLightColor;\\n\\n#ifdef DOUBLE_SIDED\\n\\n\tvLightBack += ambientLightColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_fragment'] = \"#ifndef FLAT_SHADED\\n\\n\tvec3 normal = normalize( vNormal );\\n\\n\t#ifdef DOUBLE_SIDED\\n\\n\t\tnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\\n\\n\t#endif\\n\\n#else\\n\\n\tvec3 fdx = dFdx( vViewPosition );\\n\tvec3 fdy = dFdy( vViewPosition );\\n\tvec3 normal = normalize( cross( fdx, fdy ) );\\n\\n#endif\\n\\n#ifdef USE_NORMALMAP\\n\\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\\n\\n#elif defined( USE_BUMPMAP )\\n\\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n\\n#endif\\n\\nvec3 viewDir = normalize( vViewPosition );\\n\\nvec3 totalDiffuseLight = vec3( 0.0 );\\nvec3 totalSpecularLight = vec3( 0.0 );\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = pointLightColor[ i ];\\n\\n\t\tvec3 lightPosition = pointLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\t// attenuation\\n\\n\t\tfloat attenuation = calcLightAttenuation( length( lVector ), pointLightDistance[ i ], pointLightDecay[ i ] );\\n\\n\t\t// diffuse\\n\\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\\n\\n\t\t// specular\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\\n\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = spotLightColor[ i ];\\n\\n\t\tvec3 lightPosition = spotLightPosition[ i ];\\n\t\tvec3 lVector = lightPosition + vViewPosition.xyz;\\n\t\tvec3 lightDir = normalize( lVector );\\n\\n\t\tfloat spotEffect = dot( spotLightDirection[ i ], lightDir );\\n\\n\t\tif ( spotEffect > spotLightAngleCos[ i ] ) {\\n\\n\t\t\tspotEffect = saturate( pow( saturate( spotEffect ), spotLightExponent[ i ] ) );\\n\\n\t\t\t// attenuation\\n\\n\t\t\tfloat attenuation = calcLightAttenuation( length( lVector ), spotLightDistance[ i ], spotLightDecay[ i ] );\\n\\n\t\t\tattenuation *= spotEffect;\\n\\n\t\t\t// diffuse\\n\\n\t\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\t\ttotalDiffuseLight += lightColor * attenuation * cosineTerm;\\n\\n\t\t\t// specular\\n\\n\t\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\t\ttotalSpecularLight += brdf * specularStrength * lightColor * attenuation * cosineTerm;\\n\\n\t\t}\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightColor = directionalLightColor[ i ];\\n\\n\t\tvec3 lightDir = directionalLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat cosineTerm = saturate( dot( normal, lightDir ) );\\n\\n\t\ttotalDiffuseLight += lightColor * cosineTerm;\\n\\n\t\t// specular\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * cosineTerm;\\n\\n\t}\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tfor( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\\n\\n\t\tvec3 lightDir = hemisphereLightDirection[ i ];\\n\\n\t\t// diffuse\\n\\n\t\tfloat dotProduct = dot( normal, lightDir );\\n\\n\t\tfloat hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\\n\\n\t\tvec3 lightColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\\n\\n\t\ttotalDiffuseLight += lightColor;\\n\\n\t\t// specular (sky term only)\\n\\n\t\tvec3 brdf = BRDF_BlinnPhong( specular, shininess, normal, lightDir, viewDir );\\n\\n\t\ttotalSpecularLight += brdf * specularStrength * lightColor * max( dotProduct, 0.0 );\\n\\n\t}\\n\\n#endif\\n\\n#ifdef METAL\\n\\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) * specular + totalSpecularLight + totalEmissiveLight;\\n\\n#else\\n\\n\toutgoingLight += diffuseColor.rgb * ( totalDiffuseLight + totalAmbientLight ) + totalSpecularLight + totalEmissiveLight;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_fragment'] = \"uniform vec3 ambientLightColor;\\n\\n#if MAX_DIR_LIGHTS > 0\\n\\n\tuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\\n\tuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_HEMI_LIGHTS > 0\\n\\n\tuniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\\n\tuniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_POINT_LIGHTS > 0\\n\\n\tuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\\n\\n\tuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\\n\tuniform float pointLightDecay[ MAX_POINT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0\\n\\n\tuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\\n\tuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\\n\tuniform float spotLightDecay[ MAX_SPOT_LIGHTS ];\\n\\n#endif\\n\\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\\nvarying vec3 vViewPosition;\\n\\n#ifndef FLAT_SHADED\\n\\n\tvarying vec3 vNormal;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_pars_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvarying vec3 vWorldPosition;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/lights_phong_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'lights_phong_vertex'] = \"#if MAX_SPOT_LIGHTS > 0 || defined( USE_ENVMAP )\\n\\n\tvWorldPosition = worldPosition.xyz;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/linear_to_gamma_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'linear_to_gamma_fragment'] = \"\\n\toutgoingLight = linearToOutput( outgoingLight );\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_fragment'] = \"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\\n\\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_fragment'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tuniform float logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_pars_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvarying float vFragDepth;\\n\\n\t#endif\\n\\n\tuniform float logDepthBufFC;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'logdepthbuf_vertex'] = \"#ifdef USE_LOGDEPTHBUF\\n\\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\\n\\n\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\n\t\tvFragDepth = 1.0 + gl_Position.w;\\n\\n#else\\n\\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_fragment'] = \"#ifdef USE_MAP\\n\\n\tvec4 texelColor = texture2D( map, vUv );\\n\\n\ttexelColor.xyz = inputToLinear( texelColor.xyz );\\n\\n\tdiffuseColor *= texelColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform sampler2D map;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_fragment'] = \"#ifdef USE_MAP\\n\\n\tdiffuseColor *= texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'map_particle_pars_fragment'] = \"#ifdef USE_MAP\\n\\n\tuniform vec4 offsetRepeat;\\n\tuniform sampler2D map;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphnormal_vertex'] = \"#ifdef USE_MORPHNORMALS\\n\\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_pars_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\tuniform float morphTargetInfluences[ 8 ];\\n\\n\t#else\\n\\n\tuniform float morphTargetInfluences[ 4 ];\\n\\n\t#endif\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'morphtarget_vertex'] = \"#ifdef USE_MORPHTARGETS\\n\\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\\n\\n\t#ifndef USE_MORPHNORMALS\\n\\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'normalmap_pars_fragment'] = \"#ifdef USE_NORMALMAP\\n\\n\tuniform sampler2D normalMap;\\n\tuniform vec2 normalScale;\\n\\n\t// Per-Pixel Tangent Space Normal Mapping\\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\\n\\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\\n\\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\\n\t\tvec2 st0 = dFdx( vUv.st );\\n\t\tvec2 st1 = dFdy( vUv.st );\\n\\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\\n\t\tvec3 N = normalize( surf_norm );\\n\\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\t\tmapN.xy = normalScale * mapN.xy;\\n\t\tmat3 tsn = mat3( S, T, N );\\n\t\treturn normalize( tsn * mapN );\\n\\n\t}\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/project_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'project_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 mvPosition = modelViewMatrix * skinned;\\n\\n#else\\n\\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\\n\\n#endif\\n\\ngl_Position = projectionMatrix * mvPosition;\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\tvec3 frustumColors[3];\\n\t\tfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\\n\t\tfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\\n\t\tfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\\n\\n\t#endif\\n\\n\tfloat fDepth;\\n\tvec3 shadowColor = vec3( 1.0 );\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\\n\\n\t\t\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\\n\t\t\t\t// if ( all( something, something ) ) using this instead\\n\\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\t\tbool inFrustum = all( inFrustumVec );\\n\\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\n\t\tbool frustumTest = all( frustumTestVec );\\n\\n\t\tif ( frustumTest ) {\\n\\n\t\t\tshadowCoord.z += shadowBias[ i ];\\n\\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t/*\\n\t\t\t\t\t\t// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\\n\t\t\t\t\t\t// must enroll loop manually\\n\\n\t\t\t\tfor ( float y = -1.25; y <= 1.25; y += 1.25 )\\n\t\t\t\t\tfor ( float x = -1.25; x <= 1.25; x += 1.25 ) {\\n\\n\t\t\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\\n\\n\t\t\t\t\t\t\t\t// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\\n\t\t\t\t\t\t\t\t//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\\n\\n\t\t\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\t\t\tif ( fDepth < shadowCoord.z )\\n\t\t\t\t\t\t\tshadow += 1.0;\\n\\n\t\t\t\t}\\n\\n\t\t\t\tshadow /= 9.0;\\n\\n\t\t*/\\n\\n\t\t\t\tconst float shadowDelta = 1.0 / 9.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.25 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.25 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.25 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.25 * yPixelOffset;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\t\t\t\tif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\n\t\t\t\t\t\t// Percentage-close filtering\\n\t\t\t\t\t\t// (9 pixel kernel)\\n\t\t\t\t\t\t// http://fabiensanglard.net/shadowmappingPCF/\\n\\n\t\t\t\tfloat shadow = 0.0;\\n\\n\t\t\t\tfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\\n\t\t\t\tfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\\n\\n\t\t\t\tfloat dx0 = -1.0 * xPixelOffset;\\n\t\t\t\tfloat dy0 = -1.0 * yPixelOffset;\\n\t\t\t\tfloat dx1 = 1.0 * xPixelOffset;\\n\t\t\t\tfloat dy1 = 1.0 * yPixelOffset;\\n\\n\t\t\t\tmat3 shadowKernel;\\n\t\t\t\tmat3 depthKernel;\\n\\n\t\t\t\tdepthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\\n\t\t\t\tdepthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\\n\t\t\t\tdepthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\\n\t\t\t\tdepthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\\n\t\t\t\tdepthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\\n\t\t\t\tdepthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\\n\t\t\t\tdepthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\\n\t\t\t\tdepthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\\n\t\t\t\tdepthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\\n\\n\t\t\t\tvec3 shadowZ = vec3( shadowCoord.z );\\n\t\t\t\tshadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\\n\t\t\t\tshadowKernel[0] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\\n\t\t\t\tshadowKernel[1] *= vec3(0.25);\\n\\n\t\t\t\tshadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\\n\t\t\t\tshadowKernel[2] *= vec3(0.25);\\n\\n\t\t\t\tvec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\\n\\n\t\t\t\tshadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\\n\t\t\t\tshadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\\n\\n\t\t\t\tvec4 shadowValues;\\n\t\t\t\tshadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\\n\t\t\t\tshadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\\n\t\t\t\tshadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\\n\\n\t\t\t\tshadow = dot( shadowValues, vec4( 1.0 ) );\\n\\n\t\t\t\tshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\\n\\n\t\t\t#else\\n\\n\t\t\t\tvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\\n\t\t\t\tfloat fDepth = unpackDepth( rgbaDepth );\\n\\n\t\t\t\tif ( fDepth < shadowCoord.z )\\n\\n\t\t// spot with multiple shadows is darker\\n\\n\t\t\t\t\tshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\\n\\n\t\t// spot with multiple shadows has the same color as single shadow spot\\n\\n\t\t// \t\t\t\t\tshadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\\n\\n\t\t\t#endif\\n\\n\t\t}\\n\\n\\n\t\t#ifdef SHADOWMAP_DEBUG\\n\\n\t\t\tif ( inFrustum ) outgoingLight *= frustumColors[ i ];\\n\\n\t\t#endif\\n\\n\t}\\n\\n\toutgoingLight = outgoingLight * shadowColor;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_fragment'] = \"#ifdef USE_SHADOWMAP\\n\\n\tuniform sampler2D shadowMap[ MAX_SHADOWS ];\\n\tuniform vec2 shadowMapSize[ MAX_SHADOWS ];\\n\\n\tuniform float shadowDarkness[ MAX_SHADOWS ];\\n\tuniform float shadowBias[ MAX_SHADOWS ];\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\\n\tfloat unpackDepth( const in vec4 rgba_depth ) {\\n\\n\t\tconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\\n\t\tfloat depth = dot( rgba_depth, bit_shift );\\n\t\treturn depth;\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_pars_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tvarying vec4 vShadowCoord[ MAX_SHADOWS ];\\n\tuniform mat4 shadowMatrix[ MAX_SHADOWS ];\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'shadowmap_vertex'] = \"#ifdef USE_SHADOWMAP\\n\\n\tfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\\n\\n\t\tvShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\\n\\n\t}\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinbase_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_pars_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tuniform mat4 bindMatrix;\\n\tuniform mat4 bindMatrixInverse;\\n\\n\t#ifdef BONE_TEXTURE\\n\\n\t\tuniform sampler2D boneTexture;\\n\t\tuniform int boneTextureWidth;\\n\t\tuniform int boneTextureHeight;\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tfloat j = i * 4.0;\\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\\n\\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\\n\\n\t\t\ty = dy * ( y + 0.5 );\\n\\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#else\\n\\n\t\tuniform mat4 boneGlobalMatrices[ MAX_BONES ];\\n\\n\t\tmat4 getBoneMatrix( const in float i ) {\\n\\n\t\t\tmat4 bone = boneGlobalMatrices[ int(i) ];\\n\t\t\treturn bone;\\n\\n\t\t}\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinning_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinning_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\n\tvec4 skinned = vec4( 0.0 );\\n\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\tskinned  = bindMatrixInverse * skinned;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'skinnormal_vertex'] = \"#ifdef USE_SKINNING\\n\\n\tmat4 skinMatrix = mat4( 0.0 );\\n\tskinMatrix += skinWeight.x * boneMatX;\\n\tskinMatrix += skinWeight.y * boneMatY;\\n\tskinMatrix += skinWeight.z * boneMatZ;\\n\tskinMatrix += skinWeight.w * boneMatW;\\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_fragment'] = \"float specularStrength;\\n\\n#ifdef USE_SPECULARMAP\\n\\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\tspecularStrength = texelSpecular.r;\\n\\n#else\\n\\n\tspecularStrength = 1.0;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'specularmap_pars_fragment'] = \"#ifdef USE_SPECULARMAP\\n\\n\tuniform sampler2D specularMap;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_fragment'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_pars_vertex'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tattribute vec2 uv2;\\n\tvarying vec2 vUv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv2_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv2_vertex'] = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\n\tvUv2 = uv2;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_fragment'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvarying vec2 vUv;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_pars_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvarying vec2 vUv;\\n\tuniform vec4 offsetRepeat;\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/uv_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'uv_vertex'] = \"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP )\\n\\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\\n\\n#endif\";\r\n\r\n// File:src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl\r\n\r\nTHREE.ShaderChunk[ 'worldpos_vertex'] = \"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\\n\\n\t#ifdef USE_SKINNING\\n\\n\t\tvec4 worldPosition = modelMatrix * skinned;\\n\\n\t#else\\n\\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\\n\\n\t#endif\\n\\n#endif\\n\";\r\n\r\n// File:src/renderers/shaders/UniformsUtils.js\r\n\r\n/**\r\n * Uniform Utilities\r\n */\r\n\r\nTHREE.UniformsUtils = {\r\n\r\n\tmerge: function ( uniforms ) {\r\n\r\n\t\tvar merged = {};\r\n\r\n\t\tfor ( var u = 0; u < uniforms.length; u ++ ) {\r\n\r\n\t\t\tvar tmp = this.clone( uniforms[ u ] );\r\n\r\n\t\t\tfor ( var p in tmp ) {\r\n\r\n\t\t\t\tmerged[ p ] = tmp[ p ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn merged;\r\n\r\n\t},\r\n\r\n\tclone: function ( uniforms_src ) {\r\n\r\n\t\tvar uniforms_dst = {};\r\n\r\n\t\tfor ( var u in uniforms_src ) {\r\n\r\n\t\t\tuniforms_dst[ u ] = {};\r\n\r\n\t\t\tfor ( var p in uniforms_src[ u ] ) {\r\n\r\n\t\t\t\tvar parameter_src = uniforms_src[ u ][ p ];\r\n\r\n\t\t\t\tif ( parameter_src instanceof THREE.Color ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector2 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Vector4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix3 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Matrix4 ||\r\n\t\t\t\t\t parameter_src instanceof THREE.Texture ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.clone();\r\n\r\n\t\t\t\t} else if ( Array.isArray( parameter_src ) ) {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src.slice();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tuniforms_dst[ u ][ p ] = parameter_src;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms_dst;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/UniformsLib.js\r\n\r\n/**\r\n * Uniforms library for shared webgl shaders\r\n */\r\n\r\nTHREE.UniformsLib = {\r\n\r\n\tcommon: {\r\n\r\n\t\t\"diffuse\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\r\n\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"specularMap\" : { type: \"t\", value: null },\r\n\t\t\"alphaMap\" : { type: \"t\", value: null },\r\n\r\n\t\t\"envMap\" : { type: \"t\", value: null },\r\n\t\t\"flipEnvMap\" : { type: \"f\", value: - 1 },\r\n\t\t\"reflectivity\" : { type: \"f\", value: 1.0 },\r\n\t\t\"refractionRatio\" : { type: \"f\", value: 0.98 }\r\n\r\n\t},\r\n\r\n\taomap: {\r\n\r\n\t\t\"aoMap\" : { type: \"t\", value: null },\r\n\t\t\"aoMapIntensity\" : { type: \"f\", value: 1 },\r\n\r\n\t},\r\n\r\n\tlightmap: {\r\n\r\n\t\t\"lightMap\" : { type: \"t\", value: null },\r\n\t\t\"lightMapIntensity\" : { type: \"f\", value: 1 },\r\n\r\n\t},\r\n\r\n\temissivemap: {\r\n\r\n\t\t\"emissiveMap\" : { type: \"t\", value: null },\r\n\r\n\t},\r\n\r\n\tbumpmap: {\r\n\r\n\t\t\"bumpMap\" : { type: \"t\", value: null },\r\n\t\t\"bumpScale\" : { type: \"f\", value: 1 }\r\n\r\n\t},\r\n\r\n\tnormalmap: {\r\n\r\n\t\t\"normalMap\" : { type: \"t\", value: null },\r\n\t\t\"normalScale\" : { type: \"v2\", value: new THREE.Vector2( 1, 1 ) }\r\n\r\n\t},\r\n\r\n\tdisplacementmap: {\r\n\r\n\t\t\"displacementMap\" : { type: \"t\", value: null },\r\n\t\t\"displacementScale\" : { type: \"f\", value: 1 },\r\n\t\t\"displacementBias\" : { type: \"f\", value: 0 }\r\n\r\n\t},\r\n\r\n\tfog : {\r\n\r\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tlights: {\r\n\r\n\t\t\"ambientLightColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"directionalLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"directionalLightColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"hemisphereLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"hemisphereLightSkyColor\" : { type: \"fv\", value: [] },\r\n\t\t\"hemisphereLightGroundColor\" : { type: \"fv\", value: [] },\r\n\r\n\t\t\"pointLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\"pointLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\"pointLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\"pointLightDecay\" : { type: \"fv1\", value: [] },\r\n\r\n\t\t\"spotLightColor\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightPosition\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightDirection\" : { type: \"fv\", value: [] },\r\n\t\t\"spotLightDistance\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightAngleCos\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightExponent\" : { type: \"fv1\", value: [] },\r\n\t\t\"spotLightDecay\" : { type: \"fv1\", value: [] }\r\n\r\n\t},\r\n\r\n\tpoints: {\r\n\r\n\t\t\"psColor\" : { type: \"c\", value: new THREE.Color( 0xeeeeee ) },\r\n\t\t\"opacity\" : { type: \"f\", value: 1.0 },\r\n\t\t\"size\" : { type: \"f\", value: 1.0 },\r\n\t\t\"scale\" : { type: \"f\", value: 1.0 },\r\n\t\t\"map\" : { type: \"t\", value: null },\r\n\t\t\"offsetRepeat\" : { type: \"v4\", value: new THREE.Vector4( 0, 0, 1, 1 ) },\r\n\r\n\t\t\"fogDensity\" : { type: \"f\", value: 0.00025 },\r\n\t\t\"fogNear\" : { type: \"f\", value: 1 },\r\n\t\t\"fogFar\" : { type: \"f\", value: 2000 },\r\n\t\t\"fogColor\" : { type: \"c\", value: new THREE.Color( 0xffffff ) }\r\n\r\n\t},\r\n\r\n\tshadowmap: {\r\n\r\n\t\t\"shadowMap\": { type: \"tv\", value: [] },\r\n\t\t\"shadowMapSize\": { type: \"v2v\", value: [] },\r\n\r\n\t\t\"shadowBias\" : { type: \"fv1\", value: [] },\r\n\t\t\"shadowDarkness\": { type: \"fv1\", value: [] },\r\n\r\n\t\t\"shadowMatrix\" : { type: \"m4v\", value: [] }\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/shaders/ShaderLib.js\r\n\r\n/**\r\n * Webgl Shader Library for three.js\r\n *\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\n\r\nTHREE.ShaderLib = {\r\n\r\n\t'basic': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_ENVMAP\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\"\tvec3 totalAmbientLight = vec3( 1.0 );\", // hardwired\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\r\n\t\t\t\"\toutgoingLight = diffuseColor.rgb * totalAmbientLight;\", // simple shader\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\t\t// TODO: Shadows on an otherwise unlit surface doesn't make sense.\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'lambert': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define LAMBERT\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_lambert_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_lambert_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"varying vec3 vLightFront;\",\r\n\r\n\t\t\t\"#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\tvarying vec3 vLightBack;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\t// outgoing light does not have an alpha, the surface does\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef DOUBLE_SIDED\",\r\n\r\n\t\t\t\"\t\tif ( gl_FrontFacing )\",\r\n\t\t\t\"\t\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\",\r\n\t\t\t\"\t\telse\",\r\n\t\t\t\"\t\t\toutgoingLight += diffuseColor.rgb * vLightBack + emissive;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\toutgoingLight += diffuseColor.rgb * vLightFront + emissive;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'phong': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"aomap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lightmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"emissivemap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"bumpmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"normalmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"displacementmap\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\t\t\tTHREE.UniformsLib[ \"lights\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"emissive\" : { type: \"c\", value: new THREE.Color( 0x000000 ) },\r\n\t\t\t\t\"specular\" : { type: \"c\", value: new THREE.Color( 0x111111 ) },\r\n\t\t\t\t\"shininess\": { type: \"f\", value: 30 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"varying vec3 vViewPosition;\",\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\",\r\n\r\n\t\t\t\"\tvarying vec3 vNormal;\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"displacementmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"uv2_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"beginnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinnormal_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"defaultnormal_vertex\" ],\r\n\r\n\t\t\t\"#ifndef FLAT_SHADED\", // Normal computed with derivatives when FLAT_SHADED\r\n\r\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\r\n\r\n\t\t\t\"#endif\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"displacementmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"\tvViewPosition = - mvPosition.xyz;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"#define PHONG\",\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform vec3 emissive;\",\r\n\t\t\t\"uniform vec3 specular;\",\r\n\t\t\t\"uniform float shininess;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"uv2_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"alphamap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"aomap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lightmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"emissivemap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"envmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"lights_phong_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"bumpmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"normalmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"specularmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\t\t\t\"\tvec3 totalAmbientLight = ambientLightColor;\",\r\n\t\t\t\"\tvec3 totalEmissiveLight = emissive;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphamap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"specularmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"lightmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"aomap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"emissivemap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"lights_phong_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"envmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"linear_to_gamma_fragment\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'points': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"points\" ],\r\n\t\t\tTHREE.UniformsLib[ \"shadowmap\" ]\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float size;\",\r\n\t\t\t\"uniform float scale;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\"\t#ifdef USE_SIZEATTENUATION\",\r\n\t\t\t\"\t\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\",\r\n\t\t\t\"\t#else\",\r\n\t\t\t\"\t\tgl_PointSize = size;\",\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"worldpos_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 psColor;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"map_particle_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"shadowmap_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( psColor, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"map_particle_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"alphatest_fragment\" ],\r\n\r\n\t\t\t\"\toutgoingLight = diffuseColor.rgb;\", // simple shader\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"shadowmap_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'dashed': {\r\n\r\n\t\tuniforms: THREE.UniformsUtils.merge( [\r\n\r\n\t\t\tTHREE.UniformsLib[ \"common\" ],\r\n\t\t\tTHREE.UniformsLib[ \"fog\" ],\r\n\r\n\t\t\t{\r\n\t\t\t\t\"scale\"    : { type: \"f\", value: 1 },\r\n\t\t\t\t\"dashSize\" : { type: \"f\", value: 1 },\r\n\t\t\t\t\"totalSize\": { type: \"f\", value: 2 }\r\n\t\t\t}\r\n\r\n\t\t] ),\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"uniform float scale;\",\r\n\t\t\t\"attribute float lineDistance;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_vertex\" ],\r\n\r\n\t\t\t\"\tvLineDistance = scale * lineDistance;\",\r\n\r\n\t\t\t\"\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\",\r\n\t\t\t\"\tgl_Position = projectionMatrix * mvPosition;\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform vec3 diffuse;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\t\"uniform float dashSize;\",\r\n\t\t\t\"uniform float totalSize;\",\r\n\r\n\t\t\t\"varying float vLineDistance;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"color_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"fog_pars_fragment\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\",\r\n\r\n\t\t\t\"\t\tdiscard;\",\r\n\r\n\t\t\t\"\t}\",\r\n\r\n\t\t\t\"\tvec3 outgoingLight = vec3( 0.0 );\",\r\n\t\t\t\"\tvec4 diffuseColor = vec4( diffuse, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"color_fragment\" ],\r\n\r\n\t\t\t\"\toutgoingLight = diffuseColor.rgb;\", // simple shader\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"fog_fragment\" ],\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'depth': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"mNear\": { type: \"f\", value: 1.0 },\r\n\t\t\t\"mFar\" : { type: \"f\", value: 2000.0 },\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float mNear;\",\r\n\t\t\t\"uniform float mFar;\",\r\n\t\t\t\"uniform float opacity;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\"\tfloat color = 1.0 - smoothstep( mNear, mFar, depth );\",\r\n\t\t\t\"\tgl_FragColor = vec4( vec3( color ), opacity );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t'normal': {\r\n\r\n\t\tuniforms: {\r\n\r\n\t\t\t\"opacity\" : { type: \"f\", value: 1.0 }\r\n\r\n\t\t},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvNormal = normalize( normalMatrix * normal );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform float opacity;\",\r\n\t\t\t\"varying vec3 vNormal;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'cube': {\r\n\r\n\t\tuniforms: { \"tCube\": { type: \"t\", value: null },\r\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform samplerCube tCube;\",\r\n\t\t\t\"uniform float tFlip;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t/* -------------------------------------------------------------------------\r\n\t//\tCube map shader\r\n\t ------------------------------------------------------------------------- */\r\n\r\n\t'equirect': {\r\n\r\n\t\tuniforms: { \"tEquirect\": { type: \"t\", value: null },\r\n\t\t\t\t\t\"tFlip\": { type: \"f\", value: - 1 } },\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\"\tvWorldPosition = transformDirection( position, modelMatrix );\",\r\n\r\n\t\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\t\"uniform sampler2D tEquirect;\",\r\n\t\t\t\"uniform float tFlip;\",\r\n\r\n\t\t\t\"varying vec3 vWorldPosition;\",\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t// \"\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\",\r\n\t\t\t\t\"vec3 direction = normalize( vWorldPosition );\",\r\n\t\t\t\t\"vec2 sampleUV;\",\r\n\t\t\t\t\"sampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\",\r\n\t\t\t\t\"sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\",\r\n\t\t\t\t\"gl_FragColor = texture2D( tEquirect, sampleUV );\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t},\r\n\r\n\t/* Depth encoding into RGBA texture\r\n\t *\r\n\t * based on SpiderGL shadow map example\r\n\t * http://spidergl.org/example.php?id=6\r\n\t *\r\n\t * originally from\r\n\t * http://www.gamedev.net/topic/442138-packing-a-float-into-a-a8r8g8b8-texture-shader/page__whichpage__1%25EF%25BF%25BD\r\n\t *\r\n\t * see also\r\n\t * http://aras-p.info/blog/2009/07/30/encoding-floats-to-rgba-the-final/\r\n\t */\r\n\r\n\t'depthRGBA': {\r\n\r\n\t\tuniforms: {},\r\n\r\n\t\tvertexShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"morphtarget_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"skinning_pars_vertex\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_vertex\" ],\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinbase_vertex\" ],\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"begin_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"morphtarget_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"skinning_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"project_vertex\" ],\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_vertex\" ],\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" ),\r\n\r\n\t\tfragmentShader: [\r\n\r\n\t\t\tTHREE.ShaderChunk[ \"common\" ],\r\n\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_pars_fragment\" ],\r\n\r\n\t\t\t\"vec4 pack_depth( const in float depth ) {\",\r\n\r\n\t\t\t\"\tconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\",\r\n\t\t\t\"\tconst vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\",\r\n\t\t\t\"\tvec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );\", // \"\tvec4 res = fract( depth * bit_shift );\",\r\n\t\t\t\"\tres -= res.xxyz * bit_mask;\",\r\n\t\t\t\"\treturn res;\",\r\n\r\n\t\t\t\"}\",\r\n\r\n\t\t\t\"void main() {\",\r\n\r\n\t\t\t\tTHREE.ShaderChunk[ \"logdepthbuf_fragment\" ],\r\n\r\n\t\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );\",\r\n\r\n\t\t\t\"\t#else\",\r\n\r\n\t\t\t\"\t\tgl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\",\r\n\r\n\t\t\t\"\t#endif\",\r\n\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z / gl_FragCoord.w );\",\r\n\t\t\t\t//\"float z = ( ( gl_FragCoord.z / gl_FragCoord.w ) - 3.0 ) / ( 4000.0 - 3.0 );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = pack_depth( z );\",\r\n\t\t\t\t//\"gl_FragData[ 0 ] = vec4( z, z, z, 1.0 );\",\r\n\r\n\t\t\t\"}\"\r\n\r\n\t\t].join( \"\\n\" )\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderer.js\r\n\r\n/**\r\n * @author supereggbert / http://www.paulbrunt.co.uk/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author szimek / https://github.com/szimek/\r\n */\r\n\r\nTHREE.WebGLRenderer = function ( parameters ) {\r\n\r\n\tconsole.log( 'THREE.WebGLRenderer', THREE.REVISION );\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElement( 'canvas' ),\r\n\t_context = parameters.context !== undefined ? parameters.context : null,\r\n\r\n\t_width = _canvas.width,\r\n\t_height = _canvas.height,\r\n\r\n\tpixelRatio = 1,\r\n\r\n\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\r\n\t_depth = parameters.depth !== undefined ? parameters.depth : true,\r\n\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\r\n\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\r\n\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\r\n\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\r\n\r\n\t_clearColor = new THREE.Color( 0x000000 ),\r\n\t_clearAlpha = 0;\r\n\r\n\tvar lights = [];\r\n\r\n\tvar opaqueObjects = [];\r\n\tvar opaqueObjectsLastIndex = -1;\r\n\tvar transparentObjects = [];\r\n\tvar transparentObjectsLastIndex = -1;\r\n\r\n\tvar opaqueImmediateObjects = [];\r\n\tvar opaqueImmediateObjectsLastIndex = -1;\r\n\tvar transparentImmediateObjects = [];\r\n\tvar transparentImmediateObjectsLastIndex = -1;\r\n\r\n\tvar morphInfluences = new Float32Array( 8 );\r\n\r\n\r\n\tvar sprites = [];\r\n\tvar lensFlares = [];\r\n\r\n\t// public properties\r\n\r\n\tthis.domElement = _canvas;\r\n\tthis.context = null;\r\n\r\n\t// clearing\r\n\r\n\tthis.autoClear = true;\r\n\tthis.autoClearColor = true;\r\n\tthis.autoClearDepth = true;\r\n\tthis.autoClearStencil = true;\r\n\r\n\t// scene graph\r\n\r\n\tthis.sortObjects = true;\r\n\r\n\t// physically based shading\r\n\r\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\r\n\tthis.gammaInput = false;\r\n\tthis.gammaOutput = false;\r\n\r\n\t// morphs\r\n\r\n\tthis.maxMorphTargets = 8;\r\n\tthis.maxMorphNormals = 4;\r\n\r\n\t// flags\r\n\r\n\tthis.autoScaleCubemaps = true;\r\n\r\n\t// internal properties\r\n\r\n\tvar _this = this,\r\n\r\n\t// internal state cache\r\n\r\n\t_currentProgram = null,\r\n\t_currentFramebuffer = null,\r\n\t_currentMaterialId = - 1,\r\n\t_currentGeometryProgram = '',\r\n\t_currentCamera = null,\r\n\r\n\t_usedTextureUnits = 0,\r\n\r\n\t_viewportX = 0,\r\n\t_viewportY = 0,\r\n\t_viewportWidth = _canvas.width,\r\n\t_viewportHeight = _canvas.height,\r\n\t_currentWidth = 0,\r\n\t_currentHeight = 0,\r\n\r\n\t// frustum\r\n\r\n\t_frustum = new THREE.Frustum(),\r\n\r\n\t // camera matrices cache\r\n\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_vector3 = new THREE.Vector3(),\r\n\r\n\t// light arrays cache\r\n\r\n\t_direction = new THREE.Vector3(),\r\n\r\n\t_lightsNeedUpdate = true,\r\n\r\n\t_lights = {\r\n\r\n\t\tambient: [ 0, 0, 0 ],\r\n\t\tdirectional: { length: 0, colors: [], positions: [] },\r\n\t\tpoint: { length: 0, colors: [], positions: [], distances: [], decays: [] },\r\n\t\tspot: { length: 0, colors: [], positions: [], distances: [], directions: [], anglesCos: [], exponents: [], decays: [] },\r\n\t\themi: { length: 0, skyColors: [], groundColors: [], positions: [] }\r\n\r\n\t},\r\n\r\n\t// info\r\n\r\n\t_infoMemory = {\r\n\r\n\t\tgeometries: 0,\r\n\t\ttextures: 0\r\n\r\n\t},\r\n\r\n\t_infoRender = {\r\n\r\n\t\tcalls: 0,\r\n\t\tvertices: 0,\r\n\t\tfaces: 0,\r\n\t\tpoints: 0\r\n\r\n\t};\r\n\r\n\tthis.info = {\r\n\r\n\t\trender: _infoRender,\r\n\t\tmemory: _infoMemory,\r\n\t\tprograms: null\r\n\r\n\t};\r\n\r\n\r\n\t// initialize\r\n\r\n\tvar _gl;\r\n\r\n\ttry {\r\n\r\n\t\tvar attributes = {\r\n\t\t\talpha: _alpha,\r\n\t\t\tdepth: _depth,\r\n\t\t\tstencil: _stencil,\r\n\t\t\tantialias: _antialias,\r\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\r\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer\r\n\t\t};\r\n\r\n\t\t_gl = _context || _canvas.getContext( 'webgl', attributes ) || _canvas.getContext( 'experimental-webgl', attributes );\r\n\r\n\t\tif ( _gl === null ) {\r\n\r\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context with your selected attributes.';\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthrow 'Error creating WebGL context.';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t} catch ( error ) {\r\n\r\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error );\r\n\r\n\t}\r\n\r\n\tvar extensions = new THREE.WebGLExtensions( _gl );\r\n\r\n\textensions.get( 'OES_texture_float' );\r\n\textensions.get( 'OES_texture_float_linear' );\r\n\textensions.get( 'OES_texture_half_float' );\r\n\textensions.get( 'OES_texture_half_float_linear' );\r\n\textensions.get( 'OES_standard_derivatives' );\r\n\textensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\tif ( extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\tTHREE.BufferGeometry.MaxIndex = 4294967296;\r\n\r\n\t}\r\n\r\n\tvar capabilities = new THREE.WebGLCapabilities( _gl, extensions, parameters );\r\n\r\n\tvar state = new THREE.WebGLState( _gl, extensions, paramThreeToGL );\r\n\tvar properties = new THREE.WebGLProperties();\r\n\tvar objects = new THREE.WebGLObjects( _gl, properties, this.info );\r\n\tvar programCache = new THREE.WebGLPrograms( this, capabilities );\r\n\r\n\tthis.info.programs = programCache.programs;\r\n\r\n\tvar bufferRenderer = new THREE.WebGLBufferRenderer( _gl, extensions, _infoRender );\r\n\tvar indexedBufferRenderer = new THREE.WebGLIndexedBufferRenderer( _gl, extensions, _infoRender );\r\n\r\n\t//\r\n\r\n\tfunction glClearColor( r, g, b, a ) {\r\n\r\n\t\tif ( _premultipliedAlpha === true ) {\r\n\r\n\t\t\tr *= a; g *= a; b *= a;\r\n\r\n\t\t}\r\n\r\n\t\t_gl.clearColor( r, g, b, a );\r\n\r\n\t}\r\n\r\n\tfunction setDefaultGLState() {\r\n\r\n\t\tstate.init();\r\n\r\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t}\r\n\r\n\tfunction resetGLState() {\r\n\r\n\t\t_currentProgram = null;\r\n\t\t_currentCamera = null;\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\r\n\t\t_lightsNeedUpdate = true;\r\n\r\n\t\tstate.reset();\r\n\r\n\t}\r\n\r\n\tsetDefaultGLState();\r\n\r\n\tthis.context = _gl;\r\n\tthis.capabilities = capabilities;\r\n\tthis.extensions = extensions;\r\n\tthis.state = state;\r\n\r\n\t// shadow map\r\n\r\n\tvar shadowMap = new THREE.WebGLShadowMap( this, lights, objects );\r\n\r\n\tthis.shadowMap = shadowMap;\r\n\r\n\r\n\t// Plugins\r\n\r\n\tvar spritePlugin = new THREE.SpritePlugin( this, sprites );\r\n\tvar lensFlarePlugin = new THREE.LensFlarePlugin( this, lensFlares );\r\n\r\n\t// API\r\n\r\n\tthis.getContext = function () {\r\n\r\n\t\treturn _gl;\r\n\r\n\t};\r\n\r\n\tthis.getContextAttributes = function () {\r\n\r\n\t\treturn _gl.getContextAttributes();\r\n\r\n\t};\r\n\r\n\tthis.forceContextLoss = function () {\r\n\r\n\t\textensions.get( 'WEBGL_lose_context' ).loseContext();\r\n\r\n\t};\r\n\r\n\tthis.getMaxAnisotropy = ( function () {\r\n\r\n\t\tvar value;\r\n\r\n\t\treturn function getMaxAnisotropy() {\r\n\r\n\t\t\tif ( value !== undefined ) return value;\r\n\r\n\t\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\t\tif ( extension !== null ) {\r\n\r\n\t\t\t\tvalue = _gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvalue = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn value;\r\n\r\n\t\t}\r\n\r\n\t} )();\r\n\r\n\tthis.getPrecision = function () {\r\n\r\n\t\treturn capabilities.precision;\r\n\r\n\t};\r\n\r\n\tthis.getPixelRatio = function () {\r\n\r\n\t\treturn pixelRatio;\r\n\r\n\t};\r\n\r\n\tthis.setPixelRatio = function ( value ) {\r\n\r\n\t\tif ( value !== undefined ) pixelRatio = value;\r\n\r\n\t};\r\n\r\n\tthis.getSize = function () {\r\n\r\n\t\treturn {\r\n\t\t\twidth: _width,\r\n\t\t\theight: _height\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height, updateStyle ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_canvas.width = width * pixelRatio;\r\n\t\t_canvas.height = height * pixelRatio;\r\n\r\n\t\tif ( updateStyle !== false ) {\r\n\r\n\t\t\t_canvas.style.width = width + 'px';\r\n\t\t\t_canvas.style.height = height + 'px';\r\n\r\n\t\t}\r\n\r\n\t\tthis.setViewport( 0, 0, width, height );\r\n\r\n\t};\r\n\r\n\tthis.setViewport = function ( x, y, width, height ) {\r\n\r\n\t\t_viewportX = x * pixelRatio;\r\n\t\t_viewportY = y * pixelRatio;\r\n\r\n\t\t_viewportWidth = width * pixelRatio;\r\n\t\t_viewportHeight = height * pixelRatio;\r\n\r\n\t\t_gl.viewport( _viewportX, _viewportY, _viewportWidth, _viewportHeight );\r\n\r\n\t};\r\n\r\n\tthis.setScissor = function ( x, y, width, height ) {\r\n\r\n\t\t_gl.scissor(\r\n\t\t\tx * pixelRatio,\r\n\t\t\ty * pixelRatio,\r\n\t\t\twidth * pixelRatio,\r\n\t\t\theight * pixelRatio\r\n\t\t);\r\n\r\n\t};\r\n\r\n\tthis.enableScissorTest = function ( boolean ) {\r\n\r\n\t\tstate.setScissorTest( boolean );\r\n\r\n\t};\r\n\r\n\t// Clearing\r\n\r\n\tthis.getClearColor = function () {\r\n\r\n\t\treturn _clearColor;\r\n\r\n\t};\r\n\r\n\tthis.setClearColor = function ( color, alpha ) {\r\n\r\n\t\t_clearColor.set( color );\r\n\r\n\t\t_clearAlpha = alpha !== undefined ? alpha : 1;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.getClearAlpha = function () {\r\n\r\n\t\treturn _clearAlpha;\r\n\r\n\t};\r\n\r\n\tthis.setClearAlpha = function ( alpha ) {\r\n\r\n\t\t_clearAlpha = alpha;\r\n\r\n\t\tglClearColor( _clearColor.r, _clearColor.g, _clearColor.b, _clearAlpha );\r\n\r\n\t};\r\n\r\n\tthis.clear = function ( color, depth, stencil ) {\r\n\r\n\t\tvar bits = 0;\r\n\r\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\r\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\r\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\r\n\r\n\t\t_gl.clear( bits );\r\n\r\n\t};\r\n\r\n\tthis.clearColor = function () {\r\n\r\n\t\t_gl.clear( _gl.COLOR_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearDepth = function () {\r\n\r\n\t\t_gl.clear( _gl.DEPTH_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearStencil = function () {\r\n\r\n\t\t_gl.clear( _gl.STENCIL_BUFFER_BIT );\r\n\r\n\t};\r\n\r\n\tthis.clearTarget = function ( renderTarget, color, depth, stencil ) {\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\t\tthis.clear( color, depth, stencil );\r\n\r\n\t};\r\n\r\n\t// Reset\r\n\r\n\tthis.resetGLState = resetGLState;\r\n\r\n\tthis.dispose = function() {\r\n\r\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\r\n\r\n\t};\r\n\r\n\t// Events\r\n\r\n\tfunction onContextLost( event ) {\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tresetGLState();\r\n\t\tsetDefaultGLState();\r\n\r\n\t\tproperties.clear();\r\n\r\n\t};\r\n\r\n\tfunction onTextureDispose( event ) {\r\n\r\n\t\tvar texture = event.target;\r\n\r\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\tdeallocateTexture( texture );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\r\n\t}\r\n\r\n\tfunction onRenderTargetDispose( event ) {\r\n\r\n\t\tvar renderTarget = event.target;\r\n\r\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\tdeallocateRenderTarget( renderTarget );\r\n\r\n\t\t_infoMemory.textures --;\r\n\r\n\t}\r\n\r\n\tfunction onMaterialDispose( event ) {\r\n\r\n\t\tvar material = event.target;\r\n\r\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\tdeallocateMaterial( material );\r\n\r\n\t}\r\n\r\n\t// Buffer deallocation\r\n\r\n\tfunction deallocateTexture( texture ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image && textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t// cube texture\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__image__webglTextureCube );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// 2D texture\r\n\r\n\t\t\tif ( textureProperties.__webglInit === undefined ) return;\r\n\r\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\r\n\r\n\t\t}\r\n\r\n\t\t// remove all webgl properties\r\n\t\tproperties.delete( texture );\r\n\r\n\t}\r\n\r\n\tfunction deallocateRenderTarget( renderTarget ) {\r\n\r\n\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\tif ( ! renderTarget || renderTargetProperties.__webglTexture === undefined ) return;\r\n\r\n\t\t_gl.deleteTexture( renderTargetProperties.__webglTexture );\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\r\n\t\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglRenderbuffer[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\r\n\t\t\t_gl.deleteRenderbuffer( renderTargetProperties.__webglRenderbuffer );\r\n\r\n\t\t}\r\n\r\n\t\tproperties.delete( renderTarget );\r\n\r\n\t}\r\n\r\n\tfunction deallocateMaterial( material ) {\r\n\r\n\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\tproperties.delete( material );\r\n\r\n\t}\r\n\r\n\r\n\tfunction releaseMaterialProgramReference( material ) {\r\n\r\n\t\tvar programInfo = properties.get( material ).program;\r\n\r\n\t\tmaterial.program = undefined;\r\n\r\n\t\tif ( programInfo !== undefined ) {\r\n\r\n\t\t\tprogramCache.releaseProgram( programInfo );\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Buffer rendering\r\n\r\n\tthis.renderBufferImmediate = function ( object, program, material ) {\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar buffers = properties.get( object );\r\n\r\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\r\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\r\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\r\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( object.hasPositions ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.position );\r\n\t\t\t_gl.vertexAttribPointer( attributes.position, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasNormals ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\r\n\r\n\t\t\tif ( material.type !== 'MeshPhongMaterial' && material.shading === THREE.FlatShading ) {\r\n\r\n\t\t\t\tfor ( var i = 0, l = object.count * 3; i < l; i += 9 ) {\r\n\r\n\t\t\t\t\tvar array = object.normalArray;\r\n\r\n\t\t\t\t\tvar nx = ( array[ i + 0 ] + array[ i + 3 ] + array[ i + 6 ] ) / 3;\r\n\t\t\t\t\tvar ny = ( array[ i + 1 ] + array[ i + 4 ] + array[ i + 7 ] ) / 3;\r\n\t\t\t\t\tvar nz = ( array[ i + 2 ] + array[ i + 5 ] + array[ i + 8 ] ) / 3;\r\n\r\n\t\t\t\t\tarray[ i + 0 ] = nx;\r\n\t\t\t\t\tarray[ i + 1 ] = ny;\r\n\t\t\t\t\tarray[ i + 2 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 3 ] = nx;\r\n\t\t\t\t\tarray[ i + 4 ] = ny;\r\n\t\t\t\t\tarray[ i + 5 ] = nz;\r\n\r\n\t\t\t\t\tarray[ i + 6 ] = nx;\r\n\t\t\t\t\tarray[ i + 7 ] = ny;\r\n\t\t\t\t\tarray[ i + 8 ] = nz;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.normal );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.normal, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasUvs && material.map ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.uv );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.uv, 2, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.hasColors && material.vertexColors !== THREE.NoColors ) {\r\n\r\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\r\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\r\n\r\n\t\t\tstate.enableAttribute( attributes.color );\r\n\r\n\t\t\t_gl.vertexAttribPointer( attributes.color, 3, _gl.FLOAT, false, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\r\n\r\n\t\tobject.count = 0;\r\n\r\n\t};\r\n\r\n\tthis.renderBufferDirect = function ( camera, lights, fog, geometry, material, object, group ) {\r\n\r\n\t\tsetMaterial( material );\r\n\r\n\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\tvar updateBuffers = false;\r\n\t\tvar geometryProgram = geometry.id + '_' + program.id + '_' + material.wireframe;\r\n\r\n\t\tif ( geometryProgram !== _currentGeometryProgram ) {\r\n\r\n\t\t\t_currentGeometryProgram = geometryProgram;\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphTargetInfluences = object.morphTargetInfluences;\r\n\r\n\t\tif ( morphTargetInfluences !== undefined ) {\r\n\r\n\t\t\tvar activeInfluences = [];\r\n\r\n\t\t\tfor ( var i = 0, l = morphTargetInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = morphTargetInfluences[ i ];\r\n\t\t\t\tactiveInfluences.push( [ influence, i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tactiveInfluences.sort( numericalSort );\r\n\r\n\t\t\tif ( activeInfluences.length > 8 ) {\r\n\r\n\t\t\t\tactiveInfluences.length = 8;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\t\tfor ( var i = 0, l = activeInfluences.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar influence = activeInfluences[ i ];\r\n\t\t\t\tmorphInfluences[ i ] = influence[ 0 ];\r\n\r\n\t\t\t\tif ( influence[ 0 ] !== 0 ) {\r\n\r\n\t\t\t\t\tvar index = influence[ 1 ];\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true && morphAttributes.position ) geometry.addAttribute( 'morphTarget' + i, morphAttributes.position[ index ] );\r\n\t\t\t\t\tif ( material.morphNormals === true && morphAttributes.normal ) geometry.addAttribute( 'morphNormal' + i, morphAttributes.normal[ index ] );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( material.morphTargets === true ) geometry.removeAttribute( 'morphTarget' + i );\r\n\t\t\t\t\tif ( material.morphNormals === true ) geometry.removeAttribute( 'morphNormal' + i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar uniforms = program.getUniforms();\r\n\r\n\t\t\tif ( uniforms.morphTargetInfluences !== null ) {\r\n\r\n\t\t\t\t_gl.uniform1fv( uniforms.morphTargetInfluences, morphInfluences );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tupdateBuffers = true;\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\tindex = objects.getWireframeAttribute( geometry );\r\n\r\n\t\t}\r\n\r\n\t\tvar renderer;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\trenderer = indexedBufferRenderer;\r\n\t\t\trenderer.setIndex( index );\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer = bufferRenderer;\r\n\r\n\t\t}\r\n\r\n\t\tif ( updateBuffers ) {\r\n\r\n\t\t\tsetupVertexAttributes( material, program, geometry );\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, objects.getAttributeBuffer( index ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( group === undefined ) {\r\n\r\n\t\t\tvar count;\r\n\r\n\t\t\tif ( index !== null ) {\r\n\r\n\t\t\t\tcount = index.count;\r\n\r\n\t\t\t} else if ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\t\tcount = position.data.array.length / 3;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcount = position.count;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar drawRange = geometry.drawRange;\r\n\r\n\t\t\tgroup = {\r\n\t\t\t\tstart: drawRange.start,\r\n\t\t\t\tcount: Math.min( drawRange.count, count )\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tif ( object instanceof THREE.Mesh ) {\r\n\r\n\t\t\tif ( material.wireframe === true ) {\r\n\r\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * pixelRatio );\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( _gl.TRIANGLES );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry instanceof THREE.InstancedBufferGeometry && geometry.maxInstancedCount > 0 ) {\r\n\r\n\t\t\t\trenderer.renderInstances( geometry );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.render( group.start, group.count );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( object instanceof THREE.Line ) {\r\n\r\n\t\t\tvar lineWidth = material.linewidth;\r\n\r\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\r\n\r\n\t\t\tstate.setLineWidth( lineWidth * pixelRatio );\r\n\r\n\t\t\tif ( object instanceof THREE.LineSegments ) {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINES );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\r\n\r\n\t\t\t}\r\n\r\n\t\t\trenderer.render( group.start, group.count );\r\n\r\n\t\t} else if ( object instanceof THREE.Points ) {\r\n\r\n\t\t\trenderer.setMode( _gl.POINTS );\r\n\t\t\trenderer.render( group.start, group.count );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction setupVertexAttributes( material, program, geometry, startIndex ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( geometry instanceof THREE.InstancedBufferGeometry ) {\r\n\r\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( startIndex === undefined ) startIndex = 0;\r\n\r\n\t\tstate.initAttributes();\r\n\r\n\t\tvar geometryAttributes = geometry.attributes;\r\n\r\n\t\tvar programAttributes = program.getAttributes();\r\n\r\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\r\n\r\n\t\tfor ( var name in programAttributes ) {\r\n\r\n\t\t\tvar programAttribute = programAttributes[ name ];\r\n\r\n\t\t\tif ( programAttribute >= 0 ) {\r\n\r\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\r\n\r\n\t\t\t\tif ( geometryAttribute !== undefined ) {\r\n\r\n\t\t\t\t\tstate.enableAttribute( programAttribute );\r\n\r\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\r\n\t\t\t\t\tvar buffer = objects.getAttributeBuffer( geometryAttribute );\r\n\r\n\t\t\t\t\tif ( geometryAttribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\tvar data = geometryAttribute.data;\r\n\t\t\t\t\t\tvar stride = data.stride;\r\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, stride * data.array.BYTES_PER_ELEMENT, ( startIndex * stride + offset ) * data.array.BYTES_PER_ELEMENT );\r\n\r\n\t\t\t\t\t\tif ( data instanceof THREE.InstancedInterleavedBuffer ) {\r\n\r\n\t\t\t\t\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\textension.vertexAttribDivisorANGLE( programAttribute, data.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\r\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, _gl.FLOAT, false, 0, startIndex * size * 4 ); // 4 bytes per Float32\r\n\r\n\t\t\t\t\t\tif ( geometryAttribute instanceof THREE.InstancedBufferAttribute ) {\r\n\r\n\t\t\t\t\t\t\tif ( extension === null ) {\r\n\r\n\t\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferAttribute but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\textension.vertexAttribDivisorANGLE( programAttribute, geometryAttribute.meshPerAttribute );\r\n\r\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\r\n\r\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\r\n\r\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\r\n\r\n\t\t\t\t\tif ( value !== undefined ) {\r\n\r\n\t\t\t\t\t\tswitch ( value.length ) {\r\n\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t}\r\n\r\n\t// Sorting\r\n\r\n\tfunction numericalSort ( a, b ) {\r\n\r\n\t\treturn b[ 0 ] - a[ 0 ];\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} else if ( a.material.id !== b.material.id ) {\r\n\r\n\t\t\treturn a.material.id - b.material.id;\r\n\r\n\t\t} else if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn a.z - b.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction reversePainterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.object.renderOrder !== b.object.renderOrder ) {\r\n\r\n\t\t\treturn a.object.renderOrder - b.object.renderOrder;\r\n\r\n\t\t} if ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn a.id - b.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Rendering\r\n\r\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\r\n\r\n\t\tif ( camera instanceof THREE.Camera === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\t// reset caching for this frame\r\n\r\n\t\t_currentGeometryProgram = '';\r\n\t\t_currentMaterialId = - 1;\r\n\t\t_currentCamera = null;\r\n\t\t_lightsNeedUpdate = true;\r\n\r\n\t\t// update scene graph\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t// update camera matrices and frustum\r\n\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\r\n\r\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\r\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\tlights.length = 0;\r\n\r\n\t\topaqueObjectsLastIndex = -1;\r\n\t\ttransparentObjectsLastIndex = -1;\r\n\r\n\t\topaqueImmediateObjectsLastIndex = -1;\r\n\t\ttransparentImmediateObjectsLastIndex = -1;\r\n\r\n\t\tsprites.length = 0;\r\n\t\tlensFlares.length = 0;\r\n\r\n\t\tprojectObject( scene );\r\n\r\n\t\topaqueObjects.length = opaqueObjectsLastIndex + 1;\r\n\t\ttransparentObjects.length = transparentObjectsLastIndex + 1;\r\n\r\n\t\topaqueImmediateObjects.length = opaqueImmediateObjectsLastIndex + 1;\r\n\t\ttransparentImmediateObjects.length = transparentImmediateObjectsLastIndex + 1;\r\n\r\n\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\topaqueObjects.sort( painterSortStable );\r\n\t\t\ttransparentObjects.sort( reversePainterSortStable );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tshadowMap.render( scene, camera );\r\n\r\n\t\t//\r\n\r\n\t\t_infoRender.calls = 0;\r\n\t\t_infoRender.vertices = 0;\r\n\t\t_infoRender.faces = 0;\r\n\t\t_infoRender.points = 0;\r\n\r\n\t\tthis.setRenderTarget( renderTarget );\r\n\r\n\t\tif ( this.autoClear || forceClear ) {\r\n\r\n\t\t\tthis.clear( this.autoClearColor, this.autoClearDepth, this.autoClearStencil );\r\n\r\n\t\t}\r\n\r\n\t\t//\r\n\r\n\t\tif ( scene.overrideMaterial ) {\r\n\r\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog, overrideMaterial );\r\n\t\t\trenderObjects( transparentObjects, camera, lights, fog, overrideMaterial );\r\n\r\n\t\t\trenderObjectsImmediate( opaqueImmediateObjects, camera, lights, fog, overrideMaterial );\r\n\t\t\trenderObjectsImmediate( transparentImmediateObjects, camera, lights, fog, overrideMaterial );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// opaque pass (front-to-back order)\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\r\n\t\t\trenderObjects( opaqueObjects, camera, lights, fog );\r\n\t\t\trenderObjectsImmediate( opaqueImmediateObjects, camera, lights, fog );\r\n\r\n\t\t\t// transparent pass (back-to-front order)\r\n\r\n\t\t\trenderObjects( transparentObjects, camera, lights, fog );\r\n\t\t\trenderObjectsImmediate( transparentImmediateObjects, camera, lights, fog );\r\n\r\n\t\t}\r\n\r\n\t\t// custom render plugins (post pass)\r\n\r\n\t\tspritePlugin.render( scene, camera );\r\n\t\tlensFlarePlugin.render( scene, camera, _currentWidth, _currentHeight );\r\n\r\n\t\t// Generate mipmap if we're using any kind of mipmap filtering\r\n\r\n\t\tif ( renderTarget && renderTarget.generateMipmaps && renderTarget.minFilter !== THREE.NearestFilter && renderTarget.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\tupdateRenderTargetMipmap( renderTarget );\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\r\n\r\n\t\tstate.setDepthTest( true );\r\n\t\tstate.setDepthWrite( true );\r\n\t\tstate.setColorWrite( true );\r\n\r\n\t\t// _gl.finish();\r\n\r\n\t};\r\n\r\n\tfunction pushImmediateRenderItem( object ) {\r\n\r\n\t\tvar array, index;\r\n\r\n\t\t// allocate the next position in the appropriate array\r\n\r\n\t\tif ( object.material.transparent ) {\r\n\r\n\t\t\tarray = transparentImmediateObjects;\r\n\t\t\tindex = ++ transparentImmediateObjectsLastIndex;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray = opaqueImmediateObjects;\r\n\t\t\tindex = ++ opaqueImmediateObjectsLastIndex;\r\n\r\n\t\t}\r\n\r\n\t\t// recycle existing position or grow the array\r\n\r\n\t\tif ( index < array.length ) {\r\n\r\n\t\t\tarray[ index ] = object;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// assert( index === array.length );\r\n\t\t\tarray.push( object );\r\n\r\n\t\t}\r\n\r\n\r\n\t}\r\n\r\n\tfunction pushRenderItem( object, geometry, material, z, group ) {\r\n\r\n\t\tvar array, index;\r\n\r\n\t\t// allocate the next position in the appropriate array\r\n\r\n\t\tif ( material.transparent ) {\r\n\r\n\t\t\tarray = transparentObjects;\r\n\t\t\tindex = ++ transparentObjectsLastIndex;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tarray = opaqueObjects;\r\n\t\t\tindex = ++ opaqueObjectsLastIndex;\r\n\r\n\t\t}\r\n\r\n\t\t// recycle existing render item or grow the array\r\n\r\n\t\tvar renderItem = array[ index ];\r\n\r\n\t\tif ( renderItem !== undefined ) {\r\n\r\n\t\t\trenderItem.id = object.id;\r\n\t\t\trenderItem.object = object;\r\n\t\t\trenderItem.geometry = geometry;\r\n\t\t\trenderItem.material = material;\r\n\t\t\trenderItem.z = _vector3.z;\r\n\t\t\trenderItem.group = group;\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderItem = {\r\n\t\t\t\tid: object.id,\r\n\t\t\t\tobject: object,\r\n\t\t\t\tgeometry: geometry,\r\n\t\t\t\tmaterial: material,\r\n\t\t\t\tz: _vector3.z,\r\n\t\t\t\tgroup: group\r\n\t\t\t};\r\n\r\n\t\t\t// assert( index === array.length );\r\n\t\t\tarray.push( renderItem );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object instanceof THREE.Light ) {\r\n\r\n\t\t\tlights.push( object );\r\n\r\n\t\t} else if ( object instanceof THREE.Sprite ) {\r\n\r\n\t\t\tsprites.push( object );\r\n\r\n\t\t} else if ( object instanceof THREE.LensFlare ) {\r\n\r\n\t\t\tlensFlares.push( object );\r\n\r\n\t\t} else if ( object instanceof THREE.ImmediateRenderObject ) {\r\n\r\n\t\t\tpushImmediateRenderItem( object );\r\n\r\n\t\t} else if ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\r\n\t\t\tif ( object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tobject.skeleton.update();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) {\r\n\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\tif ( _this.sortObjects === true ) {\r\n\r\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\t\t\t\t_vector3.applyProjection( _projScreenMatrix );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar geometry = objects.update( object );\r\n\r\n\t\t\t\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\r\n\t\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar group = groups[ i ];\r\n\t\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t\tpushRenderItem( object, geometry, groupMaterial, _vector3.z, group );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tpushRenderItem( object, geometry, material, _vector3.z );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjects( renderList, camera, lights, fog, overrideMaterial ) {\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar renderItem = renderList[ i ];\r\n\r\n\t\t\tvar object = renderItem.object;\r\n\t\t\tvar geometry = renderItem.geometry;\r\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\r\n\t\t\tvar group = renderItem.group;\r\n\r\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\t\t_this.renderBufferDirect( camera, lights, fog, geometry, material, object, group );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction renderObjectsImmediate( renderList, camera, lights, fog, overrideMaterial ) {\r\n\r\n\t\tvar material = overrideMaterial;\r\n\r\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar object = renderList[ i ];\r\n\r\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\r\n\r\n\t\t\tif ( overrideMaterial === undefined ) material = object.material;\r\n\r\n\t\t\tsetMaterial( material );\r\n\r\n\t\t\tvar program = setProgram( camera, lights, fog, material, object );\r\n\r\n\t\t\t_currentGeometryProgram = '';\r\n\r\n\t\t\tobject.render( function ( object ) {\r\n\r\n\t\t\t\t_this.renderBufferImmediate( object, program, material );\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction initMaterial( material, lights, fog, object ) {\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tvar parameters = programCache.getParameters( material, lights, fog, object );\r\n\t\tvar code = programCache.getProgramCode( material, parameters );\r\n\r\n\t\tvar program = materialProperties.program;\r\n\t\tvar programChange = true;\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\t// new material\r\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\r\n\r\n\t\t} else if ( program.code !== code ) {\r\n\r\n\t\t\t// changed glsl or parameters\r\n\t\t\treleaseMaterialProgramReference( material );\r\n\r\n\t\t} else if ( parameters.shaderID !== undefined ) {\r\n\r\n\t\t\t// same glsl and uniform list\r\n\t\t\treturn;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// only rebuild uniform list\r\n\t\t\tprogramChange = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( programChange ) {\r\n\r\n\t\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\t\tvar shader = THREE.ShaderLib[ parameters.shaderID ];\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: THREE.UniformsUtils.clone( shader.uniforms ),\r\n\t\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\t\tfragmentShader: shader.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterialProperties.__webglShader = {\r\n\t\t\t\t\tname: material.type,\r\n\t\t\t\t\tuniforms: material.uniforms,\r\n\t\t\t\t\tvertexShader: material.vertexShader,\r\n\t\t\t\t\tfragmentShader: material.fragmentShader\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.__webglShader = materialProperties.__webglShader;\r\n\r\n\t\t\tprogram = programCache.acquireProgram( material, parameters, code );\r\n\r\n\t\t\tmaterialProperties.program = program;\r\n\t\t\tmaterial.program = program;\r\n\r\n\t\t}\r\n\r\n\t\tvar attributes = program.getAttributes();\r\n\r\n\t\tif ( material.morphTargets ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphTargets = 0;\r\n\r\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphTarget' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.morphNormals ) {\r\n\r\n\t\t\tmaterial.numSupportedMorphNormals = 0;\r\n\r\n\t\t\tfor ( i = 0; i < _this.maxMorphNormals; i ++ ) {\r\n\r\n\t\t\t\tif ( attributes[ 'morphNormal' + i ] >= 0 ) {\r\n\r\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tmaterialProperties.uniformsList = [];\r\n\r\n\t\tvar uniformLocations = materialProperties.program.getUniforms();\r\n\r\n\t\tfor ( var u in materialProperties.__webglShader.uniforms ) {\r\n\r\n\t\t\tvar location = uniformLocations[ u ];\r\n\r\n\t\t\tif ( location ) {\r\n\r\n\t\t\t\tmaterialProperties.uniformsList.push( [ materialProperties.__webglShader.uniforms[ u ], location ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setMaterial( material ) {\r\n\r\n\t\tsetMaterialFaces( material );\r\n\r\n\t\tif ( material.transparent === true ) {\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.setBlending( THREE.NoBlending );\r\n\r\n\t\t}\r\n\r\n\t\tstate.setDepthFunc( material.depthFunc );\r\n\t\tstate.setDepthTest( material.depthTest );\r\n\t\tstate.setDepthWrite( material.depthWrite );\r\n\t\tstate.setColorWrite( material.colorWrite );\r\n\t\tstate.setPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\r\n\r\n\t}\r\n\r\n\tfunction setMaterialFaces( material ) {\r\n\r\n\t\tmaterial.side !== THREE.DoubleSide ? state.enable( _gl.CULL_FACE ) : state.disable( _gl.CULL_FACE );\r\n\t\tstate.setFlipSided( material.side === THREE.BackSide );\r\n\r\n\t}\r\n\r\n\tfunction setProgram( camera, lights, fog, material, object ) {\r\n\r\n\t\t_usedTextureUnits = 0;\r\n\r\n\t\tvar materialProperties = properties.get( material );\r\n\r\n\t\tif ( material.needsUpdate || ! materialProperties.program ) {\r\n\r\n\t\t\tinitMaterial( material, lights, fog, object );\r\n\t\t\tmaterial.needsUpdate = false;\r\n\r\n\t\t}\r\n\r\n\t\tvar refreshProgram = false;\r\n\t\tvar refreshMaterial = false;\r\n\t\tvar refreshLights = false;\r\n\r\n\t\tvar program = materialProperties.program,\r\n\t\t\tp_uniforms = program.getUniforms(),\r\n\t\t\tm_uniforms = materialProperties.__webglShader.uniforms;\r\n\r\n\t\tif ( program.id !== _currentProgram ) {\r\n\r\n\t\t\t_gl.useProgram( program.program );\r\n\t\t\t_currentProgram = program.id;\r\n\r\n\t\t\trefreshProgram = true;\r\n\t\t\trefreshMaterial = true;\r\n\t\t\trefreshLights = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.id !== _currentMaterialId ) {\r\n\r\n\t\t\tif ( _currentMaterialId === - 1 ) refreshLights = true;\r\n\t\t\t_currentMaterialId = material.id;\r\n\r\n\t\t\trefreshMaterial = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshProgram || camera !== _currentCamera ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\r\n\r\n\t\t\t\t_gl.uniform1f( p_uniforms.logDepthBufFC, 2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif ( camera !== _currentCamera ) _currentCamera = camera;\r\n\r\n\t\t\t// load material specific uniforms\r\n\t\t\t// (shader material also gets them for the sake of genericity)\r\n\r\n\t\t\tif ( material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material.envMap ) {\r\n\r\n\t\t\t\tif ( p_uniforms.cameraPosition !== undefined ) {\r\n\r\n\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld );\r\n\t\t\t\t\t_gl.uniform3f( p_uniforms.cameraPosition, _vector3.x, _vector3.y, _vector3.z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.ShaderMaterial ||\r\n\t\t\t\t material.skinning ) {\r\n\r\n\t\t\t\tif ( p_uniforms.viewMatrix !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.viewMatrix, false, camera.matrixWorldInverse.elements );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// skinning uniforms must be set even if material didn't change\r\n\t\t// auto-setting of texture unit for bone texture must go before other textures\r\n\t\t// not sure why, but otherwise weird things happen\r\n\r\n\t\tif ( material.skinning ) {\r\n\r\n\t\t\tif ( object.bindMatrix && p_uniforms.bindMatrix !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrix, false, object.bindMatrix.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.bindMatrixInverse && p_uniforms.bindMatrixInverse !== undefined ) {\r\n\r\n\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.bindMatrixInverse, false, object.bindMatrixInverse.elements );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( capabilities.floatVertexTextures && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneTexture !== undefined ) {\r\n\r\n\t\t\t\t\tvar textureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTexture, textureUnit );\r\n\t\t\t\t\t_this.setTexture( object.skeleton.boneTexture, textureUnit );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureWidth !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureWidth, object.skeleton.boneTextureWidth );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( p_uniforms.boneTextureHeight !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniform1i( p_uniforms.boneTextureHeight, object.skeleton.boneTextureHeight );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else if ( object.skeleton && object.skeleton.boneMatrices ) {\r\n\r\n\t\t\t\tif ( p_uniforms.boneGlobalMatrices !== undefined ) {\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( p_uniforms.boneGlobalMatrices, false, object.skeleton.boneMatrices );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( refreshMaterial ) {\r\n\r\n\t\t\t// refresh uniforms common to several materials\r\n\r\n\t\t\tif ( fog && material.fog ) {\r\n\r\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshPhongMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material.lights ) {\r\n\r\n\t\t\t\tif ( _lightsNeedUpdate ) {\r\n\r\n\t\t\t\t\trefreshLights = true;\r\n\t\t\t\t\tsetupLights( lights, camera );\r\n\t\t\t\t\t_lightsNeedUpdate = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( refreshLights ) {\r\n\r\n\t\t\t\t\trefreshUniformsLights( m_uniforms, _lights );\r\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, true );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, false );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material instanceof THREE.MeshBasicMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshLambertMaterial ||\r\n\t\t\t\t material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// refresh single material specific uniforms\r\n\r\n\t\t\tif ( material instanceof THREE.LineBasicMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.LineDashedMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\r\n\t\t\t\trefreshUniformsDash( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.PointsMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsParticle( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshPhongMaterial ) {\r\n\r\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshDepthMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.mNear.value = camera.near;\r\n\t\t\t\tm_uniforms.mFar.value = camera.far;\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t} else if ( material instanceof THREE.MeshNormalMaterial ) {\r\n\r\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( object.receiveShadow && ! material._shadowPass ) {\r\n\r\n\t\t\t\trefreshUniformsShadow( m_uniforms, lights );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// load common uniforms\r\n\r\n\t\t\tloadUniformsGeneric( materialProperties.uniformsList );\r\n\r\n\t\t}\r\n\r\n\t\tloadUniformsMatrices( p_uniforms, object );\r\n\r\n\t\tif ( p_uniforms.modelMatrix !== undefined ) {\r\n\r\n\t\t\t_gl.uniformMatrix4fv( p_uniforms.modelMatrix, false, object.matrixWorld.elements );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\t// Uniforms (refresh uniforms objects)\r\n\r\n\tfunction refreshUniformsCommon ( uniforms, material ) {\r\n\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\r\n\t\tif ( material.emissive ) {\r\n\r\n\t\t\tuniforms.emissive.value = material.emissive;\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\t\tuniforms.specularMap.value = material.specularMap;\r\n\t\tuniforms.alphaMap.value = material.alphaMap;\r\n\r\n\t\tif ( material.aoMap ) {\r\n\r\n\t\t\tuniforms.aoMap.value = material.aoMap;\r\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\t// uv repeat and offset setting priorities\r\n\t\t// 1. color map\r\n\t\t// 2. specular map\r\n\t\t// 3. normal map\r\n\t\t// 4. bump map\r\n\t\t// 5. alpha map\r\n\t\t// 6. emissive map\r\n\r\n\t\tvar uvScaleMap;\r\n\r\n\t\tif ( material.map ) {\r\n\r\n\t\t\tuvScaleMap = material.map;\r\n\r\n\t\t} else if ( material.specularMap ) {\r\n\r\n\t\t\tuvScaleMap = material.specularMap;\r\n\r\n\t\t} else if ( material.displacementMap ) {\r\n\r\n\t\t\tuvScaleMap = material.displacementMap;\r\n\r\n\t\t} else if ( material.normalMap ) {\r\n\r\n\t\t\tuvScaleMap = material.normalMap;\r\n\r\n\t\t} else if ( material.bumpMap ) {\r\n\r\n\t\t\tuvScaleMap = material.bumpMap;\r\n\r\n\t\t} else if ( material.alphaMap ) {\r\n\r\n\t\t\tuvScaleMap = material.alphaMap;\r\n\r\n\t\t} else if ( material.emissiveMap ) {\r\n\r\n\t\t\tuvScaleMap = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( uvScaleMap !== undefined ) {\r\n\r\n\t\t\tvar offset = uvScaleMap.offset;\r\n\t\t\tvar repeat = uvScaleMap.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.envMap.value = material.envMap;\r\n\t\tuniforms.flipEnvMap.value = ( material.envMap instanceof THREE.WebGLRenderTargetCube ) ? 1 : - 1;\r\n\r\n\t\tuniforms.reflectivity.value = material.reflectivity;\r\n\t\tuniforms.refractionRatio.value = material.refractionRatio;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLine ( uniforms, material ) {\r\n\r\n\t\tuniforms.diffuse.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsDash ( uniforms, material ) {\r\n\r\n\t\tuniforms.dashSize.value = material.dashSize;\r\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\r\n\t\tuniforms.scale.value = material.scale;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsParticle ( uniforms, material ) {\r\n\r\n\t\tuniforms.psColor.value = material.color;\r\n\t\tuniforms.opacity.value = material.opacity;\r\n\t\tuniforms.size.value = material.size;\r\n\t\tuniforms.scale.value = _canvas.height / 2.0; // TODO: Cache this.\r\n\r\n\t\tuniforms.map.value = material.map;\r\n\r\n\t\tif ( material.map !== null ) {\r\n\r\n\t\t\tvar offset = material.map.offset;\r\n\t\t\tvar repeat = material.map.repeat;\r\n\r\n\t\t\tuniforms.offsetRepeat.value.set( offset.x, offset.y, repeat.x, repeat.y );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsFog ( uniforms, fog ) {\r\n\r\n\t\tuniforms.fogColor.value = fog.color;\r\n\r\n\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\tuniforms.fogNear.value = fog.near;\r\n\t\t\tuniforms.fogFar.value = fog.far;\r\n\r\n\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\tuniforms.fogDensity.value = fog.density;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsPhong ( uniforms, material ) {\r\n\r\n\t\tuniforms.specular.value = material.specular;\r\n\t\tuniforms.shininess.value = material.shininess;\r\n\r\n\t\tif ( material.lightMap ) {\r\n\r\n\t\t\tuniforms.lightMap.value = material.lightMap;\r\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.emissiveMap ) {\r\n\r\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.bumpMap ) {\r\n\r\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\r\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.normalMap ) {\r\n\r\n\t\t\tuniforms.normalMap.value = material.normalMap;\r\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.displacementMap ) {\r\n\r\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\r\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\r\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsLights ( uniforms, lights ) {\r\n\r\n\t\tuniforms.ambientLightColor.value = lights.ambient;\r\n\r\n\t\tuniforms.directionalLightColor.value = lights.directional.colors;\r\n\t\tuniforms.directionalLightDirection.value = lights.directional.positions;\r\n\r\n\t\tuniforms.pointLightColor.value = lights.point.colors;\r\n\t\tuniforms.pointLightPosition.value = lights.point.positions;\r\n\t\tuniforms.pointLightDistance.value = lights.point.distances;\r\n\t\tuniforms.pointLightDecay.value = lights.point.decays;\r\n\r\n\t\tuniforms.spotLightColor.value = lights.spot.colors;\r\n\t\tuniforms.spotLightPosition.value = lights.spot.positions;\r\n\t\tuniforms.spotLightDistance.value = lights.spot.distances;\r\n\t\tuniforms.spotLightDirection.value = lights.spot.directions;\r\n\t\tuniforms.spotLightAngleCos.value = lights.spot.anglesCos;\r\n\t\tuniforms.spotLightExponent.value = lights.spot.exponents;\r\n\t\tuniforms.spotLightDecay.value = lights.spot.decays;\r\n\r\n\t\tuniforms.hemisphereLightSkyColor.value = lights.hemi.skyColors;\r\n\t\tuniforms.hemisphereLightGroundColor.value = lights.hemi.groundColors;\r\n\t\tuniforms.hemisphereLightDirection.value = lights.hemi.positions;\r\n\r\n\t}\r\n\r\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\r\n\r\n\tfunction markUniformsLightsNeedsUpdate ( uniforms, value ) {\r\n\r\n\t\tuniforms.ambientLightColor.needsUpdate = value;\r\n\r\n\t\tuniforms.directionalLightColor.needsUpdate = value;\r\n\t\tuniforms.directionalLightDirection.needsUpdate = value;\r\n\r\n\t\tuniforms.pointLightColor.needsUpdate = value;\r\n\t\tuniforms.pointLightPosition.needsUpdate = value;\r\n\t\tuniforms.pointLightDistance.needsUpdate = value;\r\n\t\tuniforms.pointLightDecay.needsUpdate = value;\r\n\r\n\t\tuniforms.spotLightColor.needsUpdate = value;\r\n\t\tuniforms.spotLightPosition.needsUpdate = value;\r\n\t\tuniforms.spotLightDistance.needsUpdate = value;\r\n\t\tuniforms.spotLightDirection.needsUpdate = value;\r\n\t\tuniforms.spotLightAngleCos.needsUpdate = value;\r\n\t\tuniforms.spotLightExponent.needsUpdate = value;\r\n\t\tuniforms.spotLightDecay.needsUpdate = value;\r\n\r\n\t\tuniforms.hemisphereLightSkyColor.needsUpdate = value;\r\n\t\tuniforms.hemisphereLightGroundColor.needsUpdate = value;\r\n\t\tuniforms.hemisphereLightDirection.needsUpdate = value;\r\n\r\n\t}\r\n\r\n\tfunction refreshUniformsShadow ( uniforms, lights ) {\r\n\r\n\t\tif ( uniforms.shadowMatrix ) {\r\n\r\n\t\t\tvar j = 0;\r\n\r\n\t\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvar light = lights[ i ];\r\n\r\n\t\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight || ( light instanceof THREE.DirectionalLight ) ) {\r\n\r\n\t\t\t\t\tuniforms.shadowMap.value[ j ] = light.shadowMap;\r\n\t\t\t\t\tuniforms.shadowMapSize.value[ j ] = light.shadowMapSize;\r\n\r\n\t\t\t\t\tuniforms.shadowMatrix.value[ j ] = light.shadowMatrix;\r\n\r\n\t\t\t\t\tuniforms.shadowDarkness.value[ j ] = light.shadowDarkness;\r\n\t\t\t\t\tuniforms.shadowBias.value[ j ] = light.shadowBias;\r\n\r\n\t\t\t\t\tj ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Uniforms (load to GPU)\r\n\r\n\tfunction loadUniformsMatrices ( uniforms, object ) {\r\n\r\n\t\t_gl.uniformMatrix4fv( uniforms.modelViewMatrix, false, object.modelViewMatrix.elements );\r\n\r\n\t\tif ( uniforms.normalMatrix ) {\r\n\r\n\t\t\t_gl.uniformMatrix3fv( uniforms.normalMatrix, false, object.normalMatrix.elements );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction getTextureUnit() {\r\n\r\n\t\tvar textureUnit = _usedTextureUnits;\r\n\r\n\t\tif ( textureUnit >= capabilities.maxTextures ) {\r\n\r\n\t\t\tconsole.warn( 'WebGLRenderer: trying to use ' + textureUnit + ' texture units while this GPU supports only ' + capabilities.maxTextures );\r\n\r\n\t\t}\r\n\r\n\t\t_usedTextureUnits += 1;\r\n\r\n\t\treturn textureUnit;\r\n\r\n\t}\r\n\r\n\tfunction loadUniformsGeneric ( uniforms ) {\r\n\r\n\t\tvar texture, textureUnit;\r\n\r\n\t\tfor ( var j = 0, jl = uniforms.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar uniform = uniforms[ j ][ 0 ];\r\n\r\n\t\t\t// needsUpdate property is not added to all uniforms.\r\n\t\t\tif ( uniform.needsUpdate === false ) continue;\r\n\r\n\t\t\tvar type = uniform.type;\r\n\t\t\tvar value = uniform.value;\r\n\t\t\tvar location = uniforms[ j ][ 1 ];\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\tcase '1i':\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1f':\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2f':\r\n\t\t\t\t\t_gl.uniform2f( location, value[ 0 ], value[ 1 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3f':\r\n\t\t\t\t\t_gl.uniform3f( location, value[ 0 ], value[ 1 ], value[ 2 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4f':\r\n\t\t\t\t\t_gl.uniform4f( location, value[ 0 ], value[ 1 ], value[ 2 ], value[ 3 ] );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1iv':\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3iv':\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '1fv':\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '2fv':\r\n\t\t\t\t\t_gl.uniform2fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '3fv':\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase '4fv':\r\n\t\t\t\t\t_gl.uniform4fv( location, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix3fv':\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'Matrix4fv':\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t//\r\n\r\n\t\t\t\tcase 'i':\r\n\r\n\t\t\t\t\t// single integer\r\n\t\t\t\t\t_gl.uniform1i( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'f':\r\n\r\n\t\t\t\t\t// single float\r\n\t\t\t\t\t_gl.uniform1f( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2':\r\n\r\n\t\t\t\t\t// single THREE.Vector2\r\n\t\t\t\t\t_gl.uniform2f( location, value.x, value.y );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3':\r\n\r\n\t\t\t\t\t// single THREE.Vector3\r\n\t\t\t\t\t_gl.uniform3f( location, value.x, value.y, value.z );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4':\r\n\r\n\t\t\t\t\t// single THREE.Vector4\r\n\t\t\t\t\t_gl.uniform4f( location, value.x, value.y, value.z, value.w );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'c':\r\n\r\n\t\t\t\t\t// single THREE.Color\r\n\t\t\t\t\t_gl.uniform3f( location, value.r, value.g, value.b );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv1':\r\n\r\n\t\t\t\t\t// flat array of integers (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'iv':\r\n\r\n\t\t\t\t\t// flat array of integers with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3iv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv1':\r\n\r\n\t\t\t\t\t// flat array of floats (JS or typed array)\r\n\t\t\t\t\t_gl.uniform1fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'fv':\r\n\r\n\t\t\t\t\t// flat array of floats with 3 x N size (JS or typed array)\r\n\t\t\t\t\t_gl.uniform3fv( location, value );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v2v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector2\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 2 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, i2 = 0, il = value.length; i < il; i ++, i2 += 2 ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i2 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ i2 + 1 ] = value[ i ].y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform2fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v3v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 3 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, i3 = 0, il = value.length; i < il; i ++, i3 += 3 ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i3 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ i3 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ i3 + 2 ] = value[ i ].z;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform3fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'v4v':\r\n\r\n\t\t\t\t\t// array of THREE.Vector4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 4 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, i4 = 0, il = value.length; i < il; i ++, i4 += 4 ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i4 + 0 ] = value[ i ].x;\r\n\t\t\t\t\t\tuniform._array[ i4 + 1 ] = value[ i ].y;\r\n\t\t\t\t\t\tuniform._array[ i4 + 2 ] = value[ i ].z;\r\n\t\t\t\t\t\tuniform._array[ i4 + 3 ] = value[ i ].w;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform4fv( location, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3':\r\n\r\n\t\t\t\t\t// single THREE.Matrix3\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm3v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix3\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 9 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 9 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix3fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4':\r\n\r\n\t\t\t\t\t// single THREE.Matrix4\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, value.elements );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'm4v':\r\n\r\n\t\t\t\t\t// array of THREE.Matrix4\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = new Float32Array( 16 * value.length );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tvalue[ i ].flattenToArrayOffset( uniform._array, i * 16 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniformMatrix4fv( location, false, uniform._array );\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 't':\r\n\r\n\t\t\t\t\t// single THREE.Texture (2d or cube)\r\n\r\n\t\t\t\t\ttexture = value;\r\n\t\t\t\t\ttextureUnit = getTextureUnit();\r\n\r\n\t\t\t\t\t_gl.uniform1i( location, textureUnit );\r\n\r\n\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\tif ( texture instanceof THREE.CubeTexture ||\r\n\t\t\t\t\t\t ( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\r\n\r\n\t\t\t\t\t\t// CompressedTexture can have Array in image :/\r\n\r\n\t\t\t\t\t\tsetCubeTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t} else if ( texture instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\t\t\t\tsetCubeTextureDynamic( texture, textureUnit );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'tv':\r\n\r\n\t\t\t\t\t// array of THREE.Texture (2d)\r\n\r\n\t\t\t\t\tif ( uniform._array === undefined ) {\r\n\r\n\t\t\t\t\t\tuniform._array = [];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\tuniform._array[ i ] = getTextureUnit();\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t_gl.uniform1iv( location, uniform._array );\r\n\r\n\t\t\t\t\tfor ( var i = 0, il = uniform.value.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\t\ttexture = uniform.value[ i ];\r\n\t\t\t\t\t\ttextureUnit = uniform._array[ i ];\r\n\r\n\t\t\t\t\t\tif ( ! texture ) continue;\r\n\r\n\t\t\t\t\t\t_this.setTexture( texture, textureUnit );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unknown uniform type: ' + type );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setColorLinear( array, offset, color, intensity ) {\r\n\r\n\t\tarray[ offset + 0 ] = color.r * intensity;\r\n\t\tarray[ offset + 1 ] = color.g * intensity;\r\n\t\tarray[ offset + 2 ] = color.b * intensity;\r\n\r\n\t}\r\n\r\n\tfunction setupLights ( lights, camera ) {\r\n\r\n\t\tvar l, ll, light,\r\n\t\tr = 0, g = 0, b = 0,\r\n\t\tcolor, skyColor, groundColor,\r\n\t\tintensity,\r\n\t\tdistance,\r\n\r\n\t\tzlights = _lights,\r\n\r\n\t\tviewMatrix = camera.matrixWorldInverse,\r\n\r\n\t\tdirColors = zlights.directional.colors,\r\n\t\tdirPositions = zlights.directional.positions,\r\n\r\n\t\tpointColors = zlights.point.colors,\r\n\t\tpointPositions = zlights.point.positions,\r\n\t\tpointDistances = zlights.point.distances,\r\n\t\tpointDecays = zlights.point.decays,\r\n\r\n\t\tspotColors = zlights.spot.colors,\r\n\t\tspotPositions = zlights.spot.positions,\r\n\t\tspotDistances = zlights.spot.distances,\r\n\t\tspotDirections = zlights.spot.directions,\r\n\t\tspotAnglesCos = zlights.spot.anglesCos,\r\n\t\tspotExponents = zlights.spot.exponents,\r\n\t\tspotDecays = zlights.spot.decays,\r\n\r\n\t\themiSkyColors = zlights.hemi.skyColors,\r\n\t\themiGroundColors = zlights.hemi.groundColors,\r\n\t\themiPositions = zlights.hemi.positions,\r\n\r\n\t\tdirLength = 0,\r\n\t\tpointLength = 0,\r\n\t\tspotLength = 0,\r\n\t\themiLength = 0,\r\n\r\n\t\tdirCount = 0,\r\n\t\tpointCount = 0,\r\n\t\tspotCount = 0,\r\n\t\themiCount = 0,\r\n\r\n\t\tdirOffset = 0,\r\n\t\tpointOffset = 0,\r\n\t\tspotOffset = 0,\r\n\t\themiOffset = 0;\r\n\r\n\t\tfor ( l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tlight = lights[ l ];\r\n\r\n\t\t\tif ( light.onlyShadow ) continue;\r\n\r\n\t\t\tcolor = light.color;\r\n\t\t\tintensity = light.intensity;\r\n\t\t\tdistance = light.distance;\r\n\r\n\t\t\tif ( light instanceof THREE.AmbientLight ) {\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tr += color.r;\r\n\t\t\t\tg += color.g;\r\n\t\t\t\tb += color.b;\r\n\r\n\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\tdirCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tdirOffset = dirLength * 3;\r\n\r\n\t\t\t\tdirPositions[ dirOffset + 0 ] = _direction.x;\r\n\t\t\t\tdirPositions[ dirOffset + 1 ] = _direction.y;\r\n\t\t\t\tdirPositions[ dirOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tsetColorLinear( dirColors, dirOffset, color, intensity );\r\n\r\n\t\t\t\tdirLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.PointLight ) {\r\n\r\n\t\t\t\tpointCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tpointOffset = pointLength * 3;\r\n\r\n\t\t\t\tsetColorLinear( pointColors, pointOffset, color, intensity );\r\n\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tpointPositions[ pointOffset + 0 ] = _vector3.x;\r\n\t\t\t\tpointPositions[ pointOffset + 1 ] = _vector3.y;\r\n\t\t\t\tpointPositions[ pointOffset + 2 ] = _vector3.z;\r\n\r\n\t\t\t\t// distance is 0 if decay is 0, because there is no attenuation at all.\r\n\t\t\t\tpointDistances[ pointLength ] = distance;\r\n\t\t\t\tpointDecays[ pointLength ] = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tpointLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\tspotCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\tspotOffset = spotLength * 3;\r\n\r\n\t\t\t\tsetColorLinear( spotColors, spotOffset, color, intensity );\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_vector3.copy( _direction ).applyMatrix4( viewMatrix );\r\n\r\n\t\t\t\tspotPositions[ spotOffset + 0 ] = _vector3.x;\r\n\t\t\t\tspotPositions[ spotOffset + 1 ] = _vector3.y;\r\n\t\t\t\tspotPositions[ spotOffset + 2 ] = _vector3.z;\r\n\r\n\t\t\t\tspotDistances[ spotLength ] = distance;\r\n\r\n\t\t\t\t_vector3.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\t\t_direction.sub( _vector3 );\r\n\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\tspotDirections[ spotOffset + 0 ] = _direction.x;\r\n\t\t\t\tspotDirections[ spotOffset + 1 ] = _direction.y;\r\n\t\t\t\tspotDirections[ spotOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tspotAnglesCos[ spotLength ] = Math.cos( light.angle );\r\n\t\t\t\tspotExponents[ spotLength ] = light.exponent;\r\n\t\t\t\tspotDecays[ spotLength ] = ( light.distance === 0 ) ? 0.0 : light.decay;\r\n\r\n\t\t\t\tspotLength += 1;\r\n\r\n\t\t\t} else if ( light instanceof THREE.HemisphereLight ) {\r\n\r\n\t\t\t\themiCount += 1;\r\n\r\n\t\t\t\tif ( ! light.visible ) continue;\r\n\r\n\t\t\t\t_direction.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t\t_direction.transformDirection( viewMatrix );\r\n\r\n\t\t\t\themiOffset = hemiLength * 3;\r\n\r\n\t\t\t\themiPositions[ hemiOffset + 0 ] = _direction.x;\r\n\t\t\t\themiPositions[ hemiOffset + 1 ] = _direction.y;\r\n\t\t\t\themiPositions[ hemiOffset + 2 ] = _direction.z;\r\n\r\n\t\t\t\tskyColor = light.color;\r\n\t\t\t\tgroundColor = light.groundColor;\r\n\r\n\t\t\t\tsetColorLinear( hemiSkyColors, hemiOffset, skyColor, intensity );\r\n\t\t\t\tsetColorLinear( hemiGroundColors, hemiOffset, groundColor, intensity );\r\n\r\n\t\t\t\themiLength += 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// null eventual remains from removed lights\r\n\t\t// (this is to avoid if in shader)\r\n\r\n\t\tfor ( l = dirLength * 3, ll = Math.max( dirColors.length, dirCount * 3 ); l < ll; l ++ ) dirColors[ l ] = 0.0;\r\n\t\tfor ( l = pointLength * 3, ll = Math.max( pointColors.length, pointCount * 3 ); l < ll; l ++ ) pointColors[ l ] = 0.0;\r\n\t\tfor ( l = spotLength * 3, ll = Math.max( spotColors.length, spotCount * 3 ); l < ll; l ++ ) spotColors[ l ] = 0.0;\r\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiSkyColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiSkyColors[ l ] = 0.0;\r\n\t\tfor ( l = hemiLength * 3, ll = Math.max( hemiGroundColors.length, hemiCount * 3 ); l < ll; l ++ ) hemiGroundColors[ l ] = 0.0;\r\n\r\n\t\tzlights.directional.length = dirLength;\r\n\t\tzlights.point.length = pointLength;\r\n\t\tzlights.spot.length = spotLength;\r\n\t\tzlights.hemi.length = hemiLength;\r\n\r\n\t\tzlights.ambient[ 0 ] = r;\r\n\t\tzlights.ambient[ 1 ] = g;\r\n\t\tzlights.ambient[ 2 ] = b;\r\n\r\n\t}\r\n\r\n\t// GL state setting\r\n\r\n\tthis.setFaceCulling = function ( cullFace, frontFaceDirection ) {\r\n\r\n\t\tif ( cullFace === THREE.CullFaceNone ) {\r\n\r\n\t\t\tstate.disable( _gl.CULL_FACE );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tif ( frontFaceDirection === THREE.FrontFaceDirectionCW ) {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( cullFace === THREE.CullFaceBack ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t\t} else if ( cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_gl.cullFace( _gl.FRONT_AND_BACK );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstate.enable( _gl.CULL_FACE );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Textures\r\n\r\n\tfunction setTextureParameters ( textureType, texture, isImagePowerOfTwo ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( isImagePowerOfTwo ) {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, paramThreeToGL( texture.wrapS ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, paramThreeToGL( texture.wrapT ) );\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, paramThreeToGL( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, paramThreeToGL( texture.minFilter ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\r\n\r\n\t\t\tif ( texture.wrapS !== THREE.ClampToEdgeWrapping || texture.wrapT !== THREE.ClampToEdgeWrapping ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping. ( ' + texture.sourceFile + ' )' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\r\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\r\n\r\n\t\t\tif ( texture.minFilter !== THREE.NearestFilter && texture.minFilter !== THREE.LinearFilter ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter. ( ' + texture.sourceFile + ' )' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_texture_filter_anisotropic' );\r\n\r\n\t\tif ( extension ) {\r\n\r\n\t\t\tif ( texture.type === THREE.FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\r\n\t\t\tif ( texture.type === THREE.HalfFloatType && extensions.get( 'OES_texture_half_float_linear' ) === null ) return;\r\n\r\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\r\n\r\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, _this.getMaxAnisotropy() ) );\r\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction uploadTexture( textureProperties, texture, slot ) {\r\n\r\n\t\tif ( textureProperties.__webglInit === undefined ) {\r\n\r\n\t\t\ttextureProperties.__webglInit = true;\r\n\r\n\t\t\ttexture.__webglInit = true;\r\n\r\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\r\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\r\n\r\n\t\ttexture.image = clampToMaxSize( texture.image, capabilities.maxTextureSize );\r\n\r\n\t\tvar image = texture.image,\r\n\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\tsetTextureParameters( _gl.TEXTURE_2D, texture, isImagePowerOfTwo );\r\n\r\n\t\tvar mipmap, mipmaps = texture.mipmaps;\r\n\r\n\t\tif ( texture instanceof THREE.DataTexture ) {\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, image.width, image.height, 0, glFormat, glType, image.data );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( texture instanceof THREE.CompressedTexture ) {\r\n\r\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tmipmap = mipmaps[ i ];\r\n\r\n\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()\" );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// regular Texture (image, video, canvas)\r\n\r\n\t\t\t// use manually created mipmaps if available\r\n\t\t\t// if there are no manual mipmaps\r\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\r\n\r\n\t\t\tif ( mipmaps.length > 0 && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\r\n\r\n\t\t\t\t\tmipmap = mipmaps[ i ];\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glFormat, glFormat, glType, mipmap );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttexture.generateMipmaps = false;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, glFormat, glType, texture.image );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t}\r\n\r\n\tthis.setTexture = function ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\tvar image = texture.image;\r\n\r\n\t\t\tif ( image === undefined ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( image.complete === false ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete', texture );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuploadTexture( textureProperties, texture, slot );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\r\n\r\n\t};\r\n\r\n\tfunction clampToMaxSize ( image, maxSize ) {\r\n\r\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\r\n\r\n\t\t\t// Warning: Scaling through the canvas will only work with images that use\r\n\t\t\t// premultiplied alpha.\r\n\r\n\t\t\tvar scale = maxSize / Math.max( image.width, image.height );\r\n\r\n\t\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\t\tcanvas.width = Math.floor( image.width * scale );\r\n\t\t\tcanvas.height = Math.floor( image.height * scale );\r\n\r\n\t\t\tvar context = canvas.getContext( '2d' );\r\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height, 0, 0, canvas.width, canvas.height );\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: image is too big (' + image.width + 'x' + image.height + '). Resized to ' + canvas.width + 'x' + canvas.height, image );\r\n\r\n\t\t\treturn canvas;\r\n\r\n\t\t}\r\n\r\n\t\treturn image;\r\n\r\n\t}\r\n\r\n\tfunction setCubeTexture ( texture, slot ) {\r\n\r\n\t\tvar textureProperties = properties.get( texture );\r\n\r\n\t\tif ( texture.image.length === 6 ) {\r\n\r\n\t\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\r\n\r\n\t\t\t\tif ( ! textureProperties.__image__webglTextureCube ) {\r\n\r\n\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\r\n\r\n\t\t\t\t\ttextureProperties.__image__webglTextureCube = _gl.createTexture();\r\n\r\n\t\t\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\r\n\r\n\t\t\t\tvar isCompressed = texture instanceof THREE.CompressedTexture;\r\n\t\t\t\tvar isDataTexture = texture.image[ 0 ] instanceof THREE.DataTexture;\r\n\r\n\t\t\t\tvar cubeImage = [];\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( _this.autoScaleCubemaps && ! isCompressed && ! isDataTexture ) {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = clampToMaxSize( texture.image[ i ], capabilities.maxCubemapSize );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar image = cubeImage[ 0 ],\r\n\t\t\t\tisImagePowerOfTwo = THREE.Math.isPowerOfTwo( image.width ) && THREE.Math.isPowerOfTwo( image.height ),\r\n\t\t\t\tglFormat = paramThreeToGL( texture.format ),\r\n\t\t\t\tglType = paramThreeToGL( texture.type );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, isImagePowerOfTwo );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\tif ( ! isCompressed ) {\r\n\r\n\t\t\t\t\t\tif ( isDataTexture ) {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, glFormat, glType, cubeImage[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tvar mipmap, mipmaps = cubeImage[ i ].mipmaps;\r\n\r\n\t\t\t\t\t\tfor ( var j = 0, jl = mipmaps.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\t\t\tmipmap = mipmaps[ j ];\r\n\r\n\t\t\t\t\t\t\tif ( texture.format !== THREE.RGBAFormat && texture.format !== THREE.RGBFormat ) {\r\n\r\n\t\t\t\t\t\t\t\tif ( state.getCompressedTextureFormats().indexOf( glFormat ) > - 1 ) {\r\n\r\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tconsole.warn( \"THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setCubeTexture()\" );\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( texture.generateMipmaps && isImagePowerOfTwo ) {\r\n\r\n\t\t\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttextureProperties.__version = texture.version;\r\n\r\n\t\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__image__webglTextureCube );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction setCubeTextureDynamic ( texture, slot ) {\r\n\r\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\r\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\r\n\r\n\t}\r\n\r\n\t// Render targets\r\n\r\n\tfunction setupFrameBuffer ( framebuffer, renderTarget, textureTarget ) {\r\n\r\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureTarget, properties.get( renderTarget ).__webglTexture, 0 );\r\n\r\n\t}\r\n\r\n\tfunction setupRenderBuffer ( renderbuffer, renderTarget ) {\r\n\r\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t/* For some reason this is not working. Defaulting to RGBA4.\r\n\t\t} else if ( ! renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.STENCIL_INDEX8, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\t\t*/\r\n\r\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\r\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.RGBA4, renderTarget.width, renderTarget.height );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setRenderTarget = function ( renderTarget ) {\r\n\r\n\t\tvar isCube = ( renderTarget instanceof THREE.WebGLRenderTargetCube );\r\n\r\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\r\n\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\tif ( renderTarget.depthBuffer === undefined ) renderTarget.depthBuffer = true;\r\n\t\t\tif ( renderTarget.stencilBuffer === undefined ) renderTarget.stencilBuffer = true;\r\n\r\n\t\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\r\n\r\n\t\t\trenderTargetProperties.__webglTexture = _gl.createTexture();\r\n\r\n\t\t\t_infoMemory.textures ++;\r\n\r\n\t\t\t// Setup texture, create render and frame buffers\r\n\r\n\t\t\tvar isTargetPowerOfTwo = THREE.Math.isPowerOfTwo( renderTarget.width ) && THREE.Math.isPowerOfTwo( renderTarget.height ),\r\n\t\t\t\tglFormat = paramThreeToGL( renderTarget.format ),\r\n\t\t\t\tglType = paramThreeToGL( renderTarget.type );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer = [];\r\n\t\t\t\trenderTargetProperties.__webglRenderbuffer = [];\r\n\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, renderTargetProperties.__webglTexture );\r\n\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget, isTargetPowerOfTwo );\r\n\r\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\r\n\r\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\r\n\t\t\t\t\trenderTargetProperties.__webglRenderbuffer[ i ] = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\r\n\t\t\t\t\tsetupFrameBuffer( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\r\n\t\t\t\t\tsetupRenderBuffer( renderTargetProperties.__webglRenderbuffer[ i ], renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( renderTarget.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\r\n\r\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\r\n\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = renderTarget.shareDepthFrom.__webglRenderbuffer;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\trenderTargetProperties.__webglRenderbuffer = _gl.createRenderbuffer();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, renderTargetProperties.__webglTexture );\r\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget, isTargetPowerOfTwo );\r\n\r\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\r\n\r\n\t\t\t\tsetupFrameBuffer( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.TEXTURE_2D );\r\n\r\n\t\t\t\tif ( renderTarget.shareDepthFrom ) {\r\n\r\n\t\t\t\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderTargetProperties.__webglRenderbuffer );\r\n\r\n\t\t\t\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\r\n\r\n\t\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderTargetProperties.__webglRenderbuffer );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tsetupRenderBuffer( renderTargetProperties.__webglRenderbuffer, renderTarget );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( renderTarget.generateMipmaps && isTargetPowerOfTwo ) _gl.generateMipmap( _gl.TEXTURE_2D );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Release everything\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\r\n\r\n\t\t}\r\n\r\n\t\tvar framebuffer, width, height, vx, vy;\r\n\r\n\t\tif ( renderTarget ) {\r\n\r\n\t\t\tvar renderTargetProperties = properties.get( renderTarget );\r\n\r\n\t\t\tif ( isCube ) {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer[ renderTarget.activeCubeFace ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tframebuffer = renderTargetProperties.__webglFramebuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\twidth = renderTarget.width;\r\n\t\t\theight = renderTarget.height;\r\n\r\n\t\t\tvx = 0;\r\n\t\t\tvy = 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tframebuffer = null;\r\n\r\n\t\t\twidth = _viewportWidth;\r\n\t\t\theight = _viewportHeight;\r\n\r\n\t\t\tvx = _viewportX;\r\n\t\t\tvy = _viewportY;\r\n\r\n\t\t}\r\n\r\n\t\tif ( framebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\r\n\t\t\t_gl.viewport( vx, vy, width, height );\r\n\r\n\t\t\t_currentFramebuffer = framebuffer;\r\n\r\n\t\t}\r\n\r\n\t\t_currentWidth = width;\r\n\t\t_currentHeight = height;\r\n\r\n\t};\r\n\r\n\tthis.readRenderTargetPixels = function( renderTarget, x, y, width, height, buffer ) {\r\n\r\n\t\tif ( ! ( renderTarget instanceof THREE.WebGLRenderTarget ) ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tif ( properties.get( renderTarget ).__webglFramebuffer ) {\r\n\r\n\t\t\tif ( renderTarget.format !== THREE.RGBAFormat ) {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA format. readPixels can read only RGBA format.' );\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar restore = false;\r\n\r\n\t\t\tif ( properties.get( renderTarget ).__webglFramebuffer !== _currentFramebuffer ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, properties.get( renderTarget ).__webglFramebuffer );\r\n\r\n\t\t\t\trestore = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\r\n\r\n\t\t\t\t_gl.readPixels( x, y, width, height, _gl.RGBA, _gl.UNSIGNED_BYTE, buffer );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( restore ) {\r\n\r\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tfunction updateRenderTargetMipmap ( renderTarget ) {\r\n\r\n\t\tif ( renderTarget instanceof THREE.WebGLRenderTargetCube ) {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( renderTarget ).__webglTexture );\r\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_CUBE_MAP );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, properties.get( renderTarget ).__webglTexture );\r\n\t\t\t_gl.generateMipmap( _gl.TEXTURE_2D );\r\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Fallback filters for non-power-of-2 textures\r\n\r\n\tfunction filterFallback ( f ) {\r\n\r\n\t\tif ( f === THREE.NearestFilter || f === THREE.NearestMipMapNearestFilter || f === THREE.NearestMipMapLinearFilter ) {\r\n\r\n\t\t\treturn _gl.NEAREST;\r\n\r\n\t\t}\r\n\r\n\t\treturn _gl.LINEAR;\r\n\r\n\t}\r\n\r\n\t// Map three.js constants to WebGL constants\r\n\r\n\tfunction paramThreeToGL ( p ) {\r\n\r\n\t\tvar extension;\r\n\r\n\t\tif ( p === THREE.RepeatWrapping ) return _gl.REPEAT;\r\n\t\tif ( p === THREE.ClampToEdgeWrapping ) return _gl.CLAMP_TO_EDGE;\r\n\t\tif ( p === THREE.MirroredRepeatWrapping ) return _gl.MIRRORED_REPEAT;\r\n\r\n\t\tif ( p === THREE.NearestFilter ) return _gl.NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapNearestFilter ) return _gl.NEAREST_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.NearestMipMapLinearFilter ) return _gl.NEAREST_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.LinearFilter ) return _gl.LINEAR;\r\n\t\tif ( p === THREE.LinearMipMapNearestFilter ) return _gl.LINEAR_MIPMAP_NEAREST;\r\n\t\tif ( p === THREE.LinearMipMapLinearFilter ) return _gl.LINEAR_MIPMAP_LINEAR;\r\n\r\n\t\tif ( p === THREE.UnsignedByteType ) return _gl.UNSIGNED_BYTE;\r\n\t\tif ( p === THREE.UnsignedShort4444Type ) return _gl.UNSIGNED_SHORT_4_4_4_4;\r\n\t\tif ( p === THREE.UnsignedShort5551Type ) return _gl.UNSIGNED_SHORT_5_5_5_1;\r\n\t\tif ( p === THREE.UnsignedShort565Type ) return _gl.UNSIGNED_SHORT_5_6_5;\r\n\r\n\t\tif ( p === THREE.ByteType ) return _gl.BYTE;\r\n\t\tif ( p === THREE.ShortType ) return _gl.SHORT;\r\n\t\tif ( p === THREE.UnsignedShortType ) return _gl.UNSIGNED_SHORT;\r\n\t\tif ( p === THREE.IntType ) return _gl.INT;\r\n\t\tif ( p === THREE.UnsignedIntType ) return _gl.UNSIGNED_INT;\r\n\t\tif ( p === THREE.FloatType ) return _gl.FLOAT;\r\n\r\n\t\textension = extensions.get( 'OES_texture_half_float' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.HalfFloatType ) return extension.HALF_FLOAT_OES;\r\n\r\n\t\t}\r\n\r\n\t\tif ( p === THREE.AlphaFormat ) return _gl.ALPHA;\r\n\t\tif ( p === THREE.RGBFormat ) return _gl.RGB;\r\n\t\tif ( p === THREE.RGBAFormat ) return _gl.RGBA;\r\n\t\tif ( p === THREE.LuminanceFormat ) return _gl.LUMINANCE;\r\n\t\tif ( p === THREE.LuminanceAlphaFormat ) return _gl.LUMINANCE_ALPHA;\r\n\r\n\t\tif ( p === THREE.AddEquation ) return _gl.FUNC_ADD;\r\n\t\tif ( p === THREE.SubtractEquation ) return _gl.FUNC_SUBTRACT;\r\n\t\tif ( p === THREE.ReverseSubtractEquation ) return _gl.FUNC_REVERSE_SUBTRACT;\r\n\r\n\t\tif ( p === THREE.ZeroFactor ) return _gl.ZERO;\r\n\t\tif ( p === THREE.OneFactor ) return _gl.ONE;\r\n\t\tif ( p === THREE.SrcColorFactor ) return _gl.SRC_COLOR;\r\n\t\tif ( p === THREE.OneMinusSrcColorFactor ) return _gl.ONE_MINUS_SRC_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaFactor ) return _gl.SRC_ALPHA;\r\n\t\tif ( p === THREE.OneMinusSrcAlphaFactor ) return _gl.ONE_MINUS_SRC_ALPHA;\r\n\t\tif ( p === THREE.DstAlphaFactor ) return _gl.DST_ALPHA;\r\n\t\tif ( p === THREE.OneMinusDstAlphaFactor ) return _gl.ONE_MINUS_DST_ALPHA;\r\n\r\n\t\tif ( p === THREE.DstColorFactor ) return _gl.DST_COLOR;\r\n\t\tif ( p === THREE.OneMinusDstColorFactor ) return _gl.ONE_MINUS_DST_COLOR;\r\n\t\tif ( p === THREE.SrcAlphaSaturateFactor ) return _gl.SRC_ALPHA_SATURATE;\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\r\n\t\t\tif ( p === THREE.RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\r\n\t\t\tif ( p === THREE.RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\r\n\r\n\t\t}\r\n\r\n\t\textension = extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t\tif ( extension !== null ) {\r\n\r\n\t\t\tif ( p === THREE.MinEquation ) return extension.MIN_EXT;\r\n\t\t\tif ( p === THREE.MaxEquation ) return extension.MAX_EXT;\r\n\r\n\t\t}\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n\t// DEPRECATED\r\n\r\n\tthis.supportsFloatTextures = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\r\n\t\treturn extensions.get( 'OES_texture_float' );\r\n\r\n\t};\r\n\r\n\tthis.supportsHalfFloatTextures = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\r\n\t\treturn extensions.get( 'OES_texture_half_float' );\r\n\r\n\t};\r\n\r\n\tthis.supportsStandardDerivatives = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\r\n\t\treturn extensions.get( 'OES_standard_derivatives' );\r\n\r\n\t};\r\n\r\n\tthis.supportsCompressedTextureS3TC = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\r\n\t\treturn extensions.get( 'WEBGL_compressed_texture_s3tc' );\r\n\r\n\t};\r\n\r\n\tthis.supportsCompressedTexturePVRTC = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\r\n\t\treturn extensions.get( 'WEBGL_compressed_texture_pvrtc' );\r\n\r\n\t};\r\n\r\n\tthis.supportsBlendMinMax = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\r\n\t\treturn extensions.get( 'EXT_blend_minmax' );\r\n\r\n\t};\r\n\r\n\tthis.supportsVertexTextures = function () {\r\n\r\n\t\treturn capabilities.vertexTextures;\r\n\r\n\t};\r\n\r\n\tthis.supportsInstancedArrays = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\r\n\t\treturn extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.initMaterial = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.addPrePlugin = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.addPostPlugin = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\r\n\r\n\t};\r\n\r\n\tthis.updateShadowMap = function () {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\r\n\r\n\t};\r\n\r\n\tObject.defineProperties( this, {\r\n\t\tshadowMapEnabled: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn shadowMap.enabled;\r\n\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\r\n\t\t\t\tshadowMap.enabled = value;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tshadowMapType: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn shadowMap.type;\r\n\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\r\n\t\t\t\tshadowMap.type = value;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tshadowMapCullFace: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn shadowMap.cullFace;\r\n\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.' );\r\n\t\t\t\tshadowMap.cullFace = value;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\tshadowMapDebug: {\r\n\t\t\tget: function () {\r\n\r\n\t\t\t\treturn shadowMap.debug;\r\n\r\n\t\t\t},\r\n\t\t\tset: function ( value ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapDebug is now .shadowMap.debug.' );\r\n\t\t\t\tshadowMap.debug = value;\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t} );\r\n\r\n};\r\n\r\n// File:src/renderers/WebGLRenderTarget.js\r\n\r\n/**\r\n * @author szimek / https://github.com/szimek/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.WebGLRenderTarget = function ( width, height, options ) {\r\n\r\n\tthis.uuid = THREE.Math.generateUUID();\r\n\r\n\tthis.width = width;\r\n\tthis.height = height;\r\n\r\n\toptions = options || {};\r\n\r\n\tthis.wrapS = options.wrapS !== undefined ? options.wrapS : THREE.ClampToEdgeWrapping;\r\n\tthis.wrapT = options.wrapT !== undefined ? options.wrapT : THREE.ClampToEdgeWrapping;\r\n\r\n\tthis.magFilter = options.magFilter !== undefined ? options.magFilter : THREE.LinearFilter;\r\n\tthis.minFilter = options.minFilter !== undefined ? options.minFilter : THREE.LinearMipMapLinearFilter;\r\n\r\n\tthis.anisotropy = options.anisotropy !== undefined ? options.anisotropy : 1;\r\n\r\n\tthis.offset = new THREE.Vector2( 0, 0 );\r\n\tthis.repeat = new THREE.Vector2( 1, 1 );\r\n\r\n\tthis.format = options.format !== undefined ? options.format : THREE.RGBAFormat;\r\n\tthis.type = options.type !== undefined ? options.type : THREE.UnsignedByteType;\r\n\r\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\r\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\r\n\r\n\tthis.generateMipmaps = true;\r\n\r\n\tthis.shareDepthFrom = options.shareDepthFrom !== undefined ? options.shareDepthFrom : null;\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTarget.prototype = {\r\n\r\n\tconstructor: THREE.WebGLRenderTarget,\r\n\r\n\tsetSize: function ( width, height ) {\r\n\r\n\t\tif ( this.width !== width || this.height !== height ) {\r\n\r\n\t\t\tthis.width = width;\r\n\t\t\tthis.height = height;\r\n\r\n\t\t\tthis.dispose();\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tclone: function () {\r\n\r\n\t\treturn new this.constructor().copy( this );\r\n\r\n\t},\r\n\r\n\tcopy: function ( source ) {\r\n\r\n\t\tthis.width = source.width;\r\n\t\tthis.height = source.height;\r\n\r\n\t\tthis.wrapS = source.wrapS;\r\n\t\tthis.wrapT = source.wrapT;\r\n\r\n\t\tthis.magFilter = source.magFilter;\r\n\t\tthis.minFilter = source.minFilter;\r\n\r\n\t\tthis.anisotropy = source.anisotropy;\r\n\r\n\t\tthis.offset.copy( source.offset );\r\n\t\tthis.repeat.copy( source.repeat );\r\n\r\n\t\tthis.format = source.format;\r\n\t\tthis.type = source.type;\r\n\r\n\t\tthis.depthBuffer = source.depthBuffer;\r\n\t\tthis.stencilBuffer = source.stencilBuffer;\r\n\r\n\t\tthis.generateMipmaps = source.generateMipmaps;\r\n\r\n\t\tthis.shareDepthFrom = source.shareDepthFrom;\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tdispose: function () {\r\n\r\n\t\tthis.dispatchEvent( { type: 'dispose' } );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.EventDispatcher.prototype.apply( THREE.WebGLRenderTarget.prototype );\r\n\r\n// File:src/renderers/WebGLRenderTargetCube.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com\r\n */\r\n\r\nTHREE.WebGLRenderTargetCube = function ( width, height, options ) {\r\n\r\n\tTHREE.WebGLRenderTarget.call( this, width, height, options );\r\n\r\n\tthis.activeCubeFace = 0; // PX 0, NX 1, PY 2, NY 3, PZ 4, NZ 5\r\n\r\n};\r\n\r\nTHREE.WebGLRenderTargetCube.prototype = Object.create( THREE.WebGLRenderTarget.prototype );\r\nTHREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube;\r\n\r\n// File:src/renderers/webgl/WebGLBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawArrays( mode, start, count );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar position = geometry.attributes.position;\r\n\r\n\t\tif ( position instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, position.data.count, geometry.maxInstancedCount );\r\n\r\n\t\t} else {\r\n\r\n\t\t\textension.drawArraysInstancedANGLE( mode, 0, position.count, geometry.maxInstancedCount );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLIndexedBufferRenderer.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLIndexedBufferRenderer = function ( _gl, extensions, _infoRender ) {\r\n\r\n\tvar mode;\r\n\r\n\tfunction setMode( value ) {\r\n\r\n\t\tmode = value;\r\n\r\n\t}\r\n\r\n\tvar type, size;\r\n\r\n\tfunction setIndex( index ) {\r\n\r\n\t\tif ( index.array instanceof Uint32Array && extensions.get( 'OES_element_index_uint' ) ) {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_INT;\r\n\t\t\tsize = 4;\r\n\r\n\t\t} else {\r\n\r\n\t\t\ttype = _gl.UNSIGNED_SHORT;\r\n\t\t\tsize = 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction render( start, count ) {\r\n\r\n\t\t_gl.drawElements( mode, count, type, start * size );\r\n\r\n\t\t_infoRender.calls ++;\r\n\t\t_infoRender.vertices += count;\r\n\t\tif ( mode === _gl.TRIANGLES ) _infoRender.faces += count / 3;\r\n\r\n\t}\r\n\r\n\tfunction renderInstances( geometry ) {\r\n\r\n\t\tvar extension = extensions.get( 'ANGLE_instanced_arrays' );\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tvar index = geometry.index;\r\n\r\n\t\textension.drawElementsInstancedANGLE( mode, index.array.length, type, 0, geometry.maxInstancedCount );\r\n\r\n\t}\r\n\r\n\tthis.setMode = setMode;\r\n\tthis.setIndex = setIndex;\r\n\tthis.render = render;\r\n\tthis.renderInstances = renderInstances;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLExtensions.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLExtensions = function ( gl ) {\r\n\r\n\tvar extensions = {};\r\n\r\n\tthis.get = function ( name ) {\r\n\r\n\t\tif ( extensions[ name ] !== undefined ) {\r\n\r\n\t\t\treturn extensions[ name ];\r\n\r\n\t\t}\r\n\r\n\t\tvar extension;\r\n\r\n\t\tswitch ( name ) {\r\n\r\n\t\t\tcase 'EXT_texture_filter_anisotropic':\r\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\r\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\textension = gl.getExtension( name );\r\n\r\n\t\t}\r\n\r\n\t\tif ( extension === null ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\r\n\r\n\t\t}\r\n\r\n\t\textensions[ name ] = extension;\r\n\r\n\t\treturn extension;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLCapabilities.js\r\n\r\nTHREE.WebGLCapabilities = function ( gl, extensions, parameters ) {\r\n\r\n\tfunction getMaxPrecision( precision ) {\r\n\r\n\t\tif ( precision === 'highp' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'highp';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tprecision = 'mediump';\r\n\r\n\t\t}\r\n\r\n\t\tif ( precision === 'mediump' ) {\r\n\r\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\r\n\t\t\t     gl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\r\n\r\n\t\t\t\treturn 'mediump';\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn 'lowp';\r\n\r\n\t}\r\n\r\n\tthis.getMaxPrecision = getMaxPrecision;\r\n\r\n\tthis.precision = parameters.precision !== undefined ? parameters.precision : 'highp',\r\n\tthis.logarithmicDepthBuffer = parameters.logarithmicDepthBuffer !== undefined ? parameters.logarithmicDepthBuffer : false;\r\n\r\n\tthis.maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\r\n\tthis.maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\r\n\tthis.maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\r\n\r\n\tthis.maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\r\n\tthis.maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\r\n\tthis.maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\r\n\tthis.maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\r\n\r\n\tthis.vertexTextures = this.maxVertexTextures > 0;\r\n\tthis.floatFragmentTextures = !! extensions.get( 'OES_texture_float' );\r\n\tthis.floatVertexTextures = this.vertexTextures && this.floatFragmentTextures;\r\n\r\n\tvar _maxPrecision = getMaxPrecision( this.precision );\r\n\r\n\tif ( _maxPrecision !== this.precision ) {\r\n\r\n\t\tconsole.warn( 'THREE.WebGLRenderer:', this.precision, 'not supported, using', _maxPrecision, 'instead.' );\r\n\t\tthis.precision = _maxPrecision;\r\n\r\n\t}\r\n\r\n\tif ( this.logarithmicDepthBuffer ) {\r\n\r\n\t\tthis.logarithmicDepthBuffer = !! extensions.get( 'EXT_frag_depth' );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLGeometries.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLGeometries = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = {};\r\n\r\n\tfunction get( object ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tif ( geometries[ geometry.id ] !== undefined ) {\r\n\r\n\t\t\treturn geometries[ geometry.id ];\r\n\r\n\t\t}\r\n\r\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tvar buffergeometry;\r\n\r\n\t\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tbuffergeometry = geometry;\r\n\r\n\t\t} else if ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\r\n\r\n\t\t\t\tgeometry._bufferGeometry = new THREE.BufferGeometry().setFromObject( object );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbuffergeometry = geometry._bufferGeometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometries[ geometry.id ] = buffergeometry;\r\n\r\n\t\tinfo.memory.geometries ++;\r\n\r\n\t\treturn buffergeometry;\r\n\r\n\t}\r\n\r\n\tfunction onGeometryDispose( event ) {\r\n\r\n\t\tvar geometry = event.target;\r\n\t\tvar buffergeometry = geometries[ geometry.id ];\r\n\r\n\t\tdeleteAttributes( buffergeometry.attributes );\r\n\r\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\r\n\r\n\t\tdelete geometries[ geometry.id ];\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\t\tif ( property.wireframe ) deleteAttribute( property.wireframe );\r\n\r\n\t\tinfo.memory.geometries --;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction deleteAttribute( attribute ) {\r\n\r\n\t\tvar buffer = getAttributeBuffer( attribute );\r\n\r\n\t\tif ( buffer !== undefined ) {\r\n\r\n\t\t\tgl.deleteBuffer( buffer );\r\n\t\t\tremoveAttributeBuffer( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction deleteAttributes( attributes ) {\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tdeleteAttribute( attributes[ name ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction removeAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\tproperties.delete( attribute.data );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tproperties.delete( attribute );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.get = get;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLObjects.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLObjects = function ( gl, properties, info ) {\r\n\r\n\tvar geometries = new THREE.WebGLGeometries( gl, properties, info );\r\n\r\n\t//\r\n\r\n\tfunction update( object ) {\r\n\r\n\t\t// TODO: Avoid updating twice (when using shadowMap). Maybe add frame counter.\r\n\r\n\t\tvar geometry = geometries.get( object );\r\n\r\n\t\tif ( object.geometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tgeometry.updateFromObject( object );\r\n\r\n\t\t}\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tupdateAttribute( index, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var name in attributes ) {\r\n\r\n\t\t\tupdateAttribute( attributes[ name ], gl.ARRAY_BUFFER );\r\n\r\n\t\t}\r\n\r\n\t\t// morph targets\r\n\r\n\t\tvar morphAttributes = geometry.morphAttributes;\r\n\r\n\t\tfor ( var name in morphAttributes ) {\r\n\r\n\t\t\tvar array = morphAttributes[ name ];\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tupdateAttribute( array[ i ], gl.ARRAY_BUFFER );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn geometry;\r\n\r\n\t}\r\n\r\n\tfunction updateAttribute( attribute, bufferType ) {\r\n\r\n\t\tvar data = ( attribute instanceof THREE.InterleavedBufferAttribute ) ? attribute.data : attribute;\r\n\r\n\t\tvar attributeProperties = properties.get( data );\r\n\r\n\t\tif ( attributeProperties.__webglBuffer === undefined ) {\r\n\r\n\t\t\tcreateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t} else if ( attributeProperties.version !== data.version ) {\r\n\r\n\t\t\tupdateBuffer( attributeProperties, data, bufferType );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction createBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tattributeProperties.__webglBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tvar usage = data.dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\r\n\r\n\t\tgl.bufferData( bufferType, data.array, usage );\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction updateBuffer( attributeProperties, data, bufferType ) {\r\n\r\n\t\tgl.bindBuffer( bufferType, attributeProperties.__webglBuffer );\r\n\r\n\t\tif ( data.dynamic === false || data.updateRange.count === - 1 ) {\r\n\r\n\t\t\t// Not using update ranges\r\n\r\n\t\t\tgl.bufferSubData( bufferType, 0, data.array );\r\n\r\n\t\t} else if ( data.updateRange.count === 0 ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.' );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.bufferSubData( bufferType, data.updateRange.offset * data.array.BYTES_PER_ELEMENT,\r\n\t\t\t\t\t\t\t  data.array.subarray( data.updateRange.offset, data.updateRange.offset + data.updateRange.count ) );\r\n\r\n\t\t\tdata.updateRange.count = 0; // reset range\r\n\r\n\t\t}\r\n\r\n\t\tattributeProperties.version = data.version;\r\n\r\n\t}\r\n\r\n\tfunction getAttributeBuffer( attribute ) {\r\n\r\n\t\tif ( attribute instanceof THREE.InterleavedBufferAttribute ) {\r\n\r\n\t\t\treturn properties.get( attribute.data ).__webglBuffer;\r\n\r\n\t\t}\r\n\r\n\t\treturn properties.get( attribute ).__webglBuffer;\r\n\r\n\t}\r\n\r\n\tfunction getWireframeAttribute( geometry ) {\r\n\r\n\t\tvar property = properties.get( geometry );\r\n\r\n\t\tif ( property.wireframe !== undefined ) {\r\n\r\n\t\t\treturn property.wireframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar indices = [];\r\n\r\n\t\tvar index = geometry.index;\r\n\t\tvar attributes = geometry.attributes;\r\n\t\tvar position = attributes.position;\r\n\r\n\t\t// console.time( 'wireframe' );\r\n\r\n\t\tif ( index !== null ) {\r\n\r\n\t\t\tvar edges = {};\r\n\t\t\tvar array = index.array;\r\n\r\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = array[ i + 0 ];\r\n\t\t\t\tvar b = array[ i + 1 ];\r\n\t\t\t\tvar c = array[ i + 2 ];\r\n\r\n\t\t\t\tif ( checkEdge( edges, a, b ) ) indices.push( a, b );\r\n\t\t\t\tif ( checkEdge( edges, b, c ) ) indices.push( b, c );\r\n\t\t\t\tif ( checkEdge( edges, c, a ) ) indices.push( c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar array = attributes.position.array;\r\n\r\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\r\n\r\n\t\t\t\tvar a = i + 0;\r\n\t\t\t\tvar b = i + 1;\r\n\t\t\t\tvar c = i + 2;\r\n\r\n\t\t\t\tindices.push( a, b, b, c, c, a );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// console.timeEnd( 'wireframe' );\r\n\r\n\t\tvar TypeArray = position.count > 65535 ? Uint32Array : Uint16Array;\r\n\t\tvar attribute = new THREE.BufferAttribute( new TypeArray( indices ), 1 );\r\n\r\n\t\tupdateAttribute( attribute, gl.ELEMENT_ARRAY_BUFFER );\r\n\r\n\t\tproperty.wireframe = attribute;\r\n\r\n\t\treturn attribute;\r\n\r\n\t}\r\n\r\n\tfunction checkEdge( edges, a, b ) {\r\n\r\n\t\tif ( a > b ) {\r\n\r\n\t\t\tvar tmp = a;\r\n\t\t\ta = b;\r\n\t\t\tb = tmp;\r\n\r\n\t\t}\r\n\r\n\t\tvar list = edges[ a ];\r\n\r\n\t\tif ( list === undefined ) {\r\n\r\n\t\t\tedges[ a ] = [ b ];\r\n\t\t\treturn true;\r\n\r\n\t\t} else if ( list.indexOf( b ) === -1 ) {\r\n\r\n\t\t\tlist.push( b );\r\n\t\t\treturn true;\r\n\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n\tthis.getAttributeBuffer = getAttributeBuffer;\r\n\tthis.getWireframeAttribute = getWireframeAttribute;\r\n\r\n\tthis.update = update;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProgram.js\r\n\r\nTHREE.WebGLProgram = ( function () {\r\n\r\n\tvar programIdCount = 0;\r\n\r\n\tfunction generateDefines( defines ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tfor ( var name in defines ) {\r\n\r\n\t\t\tvar value = defines[ name ];\r\n\r\n\t\t\tif ( value === false ) continue;\r\n\r\n\t\t\tchunks.push( '#define ' + name + ' ' + value );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join( '\\n' );\r\n\r\n\t}\r\n\r\n\tfunction fetchUniformLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar uniforms = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveUniform( program, i );\r\n\t\t\tvar name = info.name;\r\n\t\t\tvar location = gl.getUniformLocation( program, name );\r\n\r\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE UNIFORM:\", name);\r\n\r\n\t\t\tvar suffixPos = name.lastIndexOf( '[0]' );\r\n\t\t\tif ( suffixPos !== - 1 && suffixPos === name.length - 3 ) {\r\n\r\n\t\t\t\tuniforms[ name.substr( 0, suffixPos ) ] = location;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tuniforms[ name ] = location;\r\n\r\n\t\t}\r\n\r\n\t\treturn uniforms;\r\n\r\n\t}\r\n\r\n\tfunction fetchAttributeLocations( gl, program, identifiers ) {\r\n\r\n\t\tvar attributes = {};\r\n\r\n\t\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\r\n\r\n\t\tfor ( var i = 0; i < n; i ++ ) {\r\n\r\n\t\t\tvar info = gl.getActiveAttrib( program, i );\r\n\t\t\tvar name = info.name;\r\n\r\n\t\t\t// console.log(\"THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:\", name, i );\r\n\r\n\t\t\tattributes[ name ] = gl.getAttribLocation( program, name );\r\n\r\n\t\t}\r\n\r\n\t\treturn attributes;\r\n\r\n\t}\r\n\r\n\tfunction filterEmptyLine( string ) {\r\n\r\n\t\treturn string !== '';\r\n\r\n\t}\r\n\r\n\treturn function WebGLProgram( renderer, code, material, parameters ) {\r\n\r\n\t\tvar gl = renderer.context;\r\n\r\n\t\tvar defines = material.defines;\r\n\r\n\t\tvar vertexShader = material.__webglShader.vertexShader;\r\n\t\tvar fragmentShader = material.__webglShader.fragmentShader;\r\n\r\n\t\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\r\n\r\n\t\tif ( parameters.shadowMapType === THREE.PCFShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\r\n\r\n\t\t} else if ( parameters.shadowMapType === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\r\n\r\n\t\t}\r\n\r\n\t\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\r\n\t\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\r\n\t\tif ( parameters.envMap ) {\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeReflectionMapping:\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.EquirectangularReflectionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.SphericalReflectionMapping:\r\n\t\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.envMap.mapping ) {\r\n\r\n\t\t\t\tcase THREE.CubeRefractionMapping:\r\n\t\t\t\tcase THREE.EquirectangularRefractionMapping:\r\n\t\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tswitch ( material.combine ) {\r\n\r\n\t\t\t\tcase THREE.MultiplyOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.MixOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase THREE.AddOperation:\r\n\t\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\r\n\r\n\t\t// console.log( 'building new program ' );\r\n\r\n\t\t//\r\n\r\n\t\tvar customDefines = generateDefines( defines );\r\n\r\n\t\t//\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar prefixVertex, prefixFragment;\r\n\r\n\t\tif ( material instanceof THREE.RawShaderMaterial ) {\r\n\r\n\t\t\tprefixVertex = '';\r\n\t\t\tprefixFragment = '';\r\n\r\n\t\t} else {\r\n\r\n\t\t\tprefixVertex = [\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\r\n\r\n\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\r\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\r\n\t\t\t\t'#define MAX_BONES ' + parameters.maxBones,\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\r\n\t\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\r\n\r\n\t\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\r\n\t\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\r\n\t\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\r\n\t\t\t\t'uniform mat4 modelMatrix;',\r\n\t\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform mat3 normalMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'attribute vec3 position;',\r\n\t\t\t\t'attribute vec3 normal;',\r\n\t\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t\t'#ifdef USE_COLOR',\r\n\r\n\t\t\t\t'\tattribute vec3 color;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_MORPHTARGETS',\r\n\r\n\t\t\t\t'\tattribute vec3 morphTarget0;',\r\n\t\t\t\t'\tattribute vec3 morphTarget1;',\r\n\t\t\t\t'\tattribute vec3 morphTarget2;',\r\n\t\t\t\t'\tattribute vec3 morphTarget3;',\r\n\r\n\t\t\t\t'\t#ifdef USE_MORPHNORMALS',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphNormal0;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal1;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal2;',\r\n\t\t\t\t'\t\tattribute vec3 morphNormal3;',\r\n\r\n\t\t\t\t'\t#else',\r\n\r\n\t\t\t\t'\t\tattribute vec3 morphTarget4;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget5;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget6;',\r\n\t\t\t\t'\t\tattribute vec3 morphTarget7;',\r\n\r\n\t\t\t\t'\t#endif',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'#ifdef USE_SKINNING',\r\n\r\n\t\t\t\t'\tattribute vec4 skinIndex;',\r\n\t\t\t\t'\tattribute vec4 skinWeight;',\r\n\r\n\t\t\t\t'#endif',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t\tprefixFragment = [\r\n\r\n\t\t\t\tparameters.bumpMap || parameters.normalMap || parameters.flatShading || material.derivatives ? '#extension GL_OES_standard_derivatives : enable' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\r\n\r\n\t\t\t\t'precision ' + parameters.precision + ' float;',\r\n\t\t\t\t'precision ' + parameters.precision + ' int;',\r\n\r\n\t\t\t\t'#define SHADER_NAME ' + material.__webglShader.name,\r\n\r\n\t\t\t\tcustomDefines,\r\n\r\n\t\t\t\t'#define MAX_DIR_LIGHTS ' + parameters.maxDirLights,\r\n\t\t\t\t'#define MAX_POINT_LIGHTS ' + parameters.maxPointLights,\r\n\t\t\t\t'#define MAX_SPOT_LIGHTS ' + parameters.maxSpotLights,\r\n\t\t\t\t'#define MAX_HEMI_LIGHTS ' + parameters.maxHemiLights,\r\n\r\n\t\t\t\t'#define MAX_SHADOWS ' + parameters.maxShadows,\r\n\r\n\t\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest : '',\r\n\r\n\t\t\t\trenderer.gammaInput ? '#define GAMMA_INPUT' : '',\r\n\t\t\t\trenderer.gammaOutput ? '#define GAMMA_OUTPUT' : '',\r\n\t\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\r\n\r\n\t\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\r\n\t\t\t\t( parameters.useFog && parameters.fogExp ) ? '#define FOG_EXP2' : '',\r\n\r\n\t\t\t\tparameters.map ? '#define USE_MAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\r\n\t\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\r\n\t\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\r\n\t\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\r\n\t\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\r\n\t\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\r\n\t\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\r\n\t\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\r\n\t\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\r\n\t\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\r\n\r\n\t\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\r\n\r\n\t\t\t\tparameters.metal ? '#define METAL' : '',\r\n\t\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\r\n\t\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\r\n\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\r\n\t\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\r\n\t\t\t\tparameters.shadowMapDebug ? '#define SHADOWMAP_DEBUG' : '',\r\n\r\n\t\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\r\n\t\t\t\tparameters.logarithmicDepthBuffer && renderer.extensions.get( 'EXT_frag_depth' ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\r\n\r\n\t\t\t\t'uniform mat4 viewMatrix;',\r\n\t\t\t\t'uniform vec3 cameraPosition;',\r\n\r\n\t\t\t\t'\\n'\r\n\r\n\t\t\t].filter( filterEmptyLine ).join( '\\n' );\r\n\r\n\t\t}\r\n\r\n\t\tvar vertexGlsl = prefixVertex + vertexShader;\r\n\t\tvar fragmentGlsl = prefixFragment + fragmentShader;\r\n\r\n\t\tvar glVertexShader = THREE.WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\r\n\t\tvar glFragmentShader = THREE.WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\r\n\r\n\t\tgl.attachShader( program, glVertexShader );\r\n\t\tgl.attachShader( program, glFragmentShader );\r\n\r\n\t\t// Force a particular attribute to index 0.\r\n\r\n\t\tif ( material.index0AttributeName !== undefined ) {\r\n\r\n\t\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\r\n\r\n\t\t} else if ( parameters.morphTargets === true ) {\r\n\r\n\t\t\t// programs with morphTargets displace position out of attribute 0\r\n\t\t\tgl.bindAttribLocation( program, 0, 'position' );\r\n\r\n\t\t}\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\tvar programLog = gl.getProgramInfoLog( program );\r\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader );\r\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader );\r\n\r\n\t\tvar runnable = true;\r\n\t\tvar haveDiagnostics = true;\r\n\r\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\r\n\r\n\t\t\trunnable = false;\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexLog, fragmentLog );\r\n\r\n\t\t} else if ( programLog !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\r\n\r\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\r\n\r\n\t\t\thaveDiagnostics = false;\r\n\r\n\t\t}\r\n\r\n\t\tif ( haveDiagnostics ) {\r\n\r\n\t\t\tthis.diagnostics = {\r\n\r\n\t\t\t\trunnable: runnable,\r\n\t\t\t\tmaterial: material,\r\n\r\n\t\t\t\tprogramLog: programLog,\r\n\r\n\t\t\t\tvertexShader: {\r\n\r\n\t\t\t\t\tlog: vertexLog,\r\n\t\t\t\t\tprefix: prefixVertex\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfragmentShader: {\r\n\r\n\t\t\t\t\tlog: fragmentLog,\r\n\t\t\t\t\tprefix: prefixFragment\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\t// clean up\r\n\r\n\t\tgl.deleteShader( glVertexShader );\r\n\t\tgl.deleteShader( glFragmentShader );\r\n\r\n\t\t// set up caching for uniform locations\r\n\r\n\t\tvar cachedUniforms;\r\n\r\n\t\tthis.getUniforms = function() {\r\n\r\n\t\t\tif ( cachedUniforms === undefined ) {\r\n\r\n\t\t\t\tcachedUniforms = fetchUniformLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedUniforms;\r\n\r\n\t\t};\r\n\r\n\t\t// set up caching for attribute locations\r\n\r\n\t\tvar cachedAttributes;\r\n\r\n\t\tthis.getAttributes = function() {\r\n\r\n\t\t\tif ( cachedAttributes === undefined ) {\r\n\r\n\t\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedAttributes;\r\n\r\n\t\t};\r\n\r\n\t\t// free resource\r\n\r\n\t\tthis.destroy = function() {\r\n\r\n\t\t\tgl.deleteProgram( program );\r\n\t\t\tthis.program = undefined;\r\n\r\n\t\t};\r\n\r\n\t\t// DEPRECATED\r\n\r\n\t\tObject.defineProperties( this, {\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .uniforms is now .getUniforms().' );\r\n\t\t\t\t\treturn this.getUniforms();\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tattributes: {\r\n\t\t\t\tget: function() {\r\n\r\n\t\t\t\t\tconsole.warn( 'THREE.WebGLProgram: .attributes is now .getAttributes().' );\r\n\t\t\t\t\treturn this.getAttributes();\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\r\n\t\t//\r\n\r\n\t\tthis.id = programIdCount ++;\r\n\t\tthis.code = code;\r\n\t\tthis.usedTimes = 1;\r\n\t\tthis.program = program;\r\n\t\tthis.vertexShader = glVertexShader;\r\n\t\tthis.fragmentShader = glFragmentShader;\r\n\r\n\t\treturn this;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLPrograms.js\r\n\r\nTHREE.WebGLPrograms = function ( renderer, capabilities ) {\r\n\r\n\tvar programs = [];\r\n\r\n\tvar shaderIDs = {\r\n\t\tMeshDepthMaterial: 'depth',\r\n\t\tMeshNormalMaterial: 'normal',\r\n\t\tMeshBasicMaterial: 'basic',\r\n\t\tMeshLambertMaterial: 'lambert',\r\n\t\tMeshPhongMaterial: 'phong',\r\n\t\tLineBasicMaterial: 'basic',\r\n\t\tLineDashedMaterial: 'dashed',\r\n\t\tPointsMaterial: 'points'\r\n\t};\r\n\r\n\tvar parameterNames = [\r\n\t\t\"precision\", \"supportsVertexTextures\", \"map\", \"envMap\", \"envMapMode\",\r\n\t\t\"lightMap\", \"aoMap\", \"emissiveMap\", \"bumpMap\", \"normalMap\", \"specularMap\",\r\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"fog\", \"useFog\", \"fogExp\",\r\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\r\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\r\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"maxDirLights\", \"maxPointLights\",\r\n\t\t\"maxSpotLights\", \"maxHemiLights\", \"maxShadows\", \"shadowMapEnabled\",\r\n\t\t\"shadowMapType\", \"shadowMapDebug\", \"alphaTest\", \"metal\", \"doubleSided\",\r\n\t\t\"flipSided\"\r\n\t];\r\n\r\n\r\n\tfunction allocateBones ( object ) {\r\n\r\n\t\tif ( capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture ) {\r\n\r\n\t\t\treturn 1024;\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// default for when object is not specified\r\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\r\n\t\t\t//\r\n\t\t\t//  - leave some extra space for other uniforms\r\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\r\n\t\t\t//    (up to 54 should be safe)\r\n\r\n\t\t\tvar nVertexUniforms = capabilities.maxVertexUniforms;\r\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\r\n\r\n\t\t\tvar maxBones = nVertexMatrices;\r\n\r\n\t\t\tif ( object !== undefined && object instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\t\tmaxBones = Math.min( object.skeleton.bones.length, maxBones );\r\n\r\n\t\t\t\tif ( maxBones < object.skeleton.bones.length ) {\r\n\r\n\t\t\t\t\tconsole.warn( 'WebGLRenderer: too many bones - ' + object.skeleton.bones.length + ', this GPU supports just ' + maxBones + ' (try OpenGL instead of ANGLE)' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn maxBones;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction allocateLights( lights ) {\r\n\r\n\t\tvar dirLights = 0;\r\n\t\tvar pointLights = 0;\r\n\t\tvar spotLights = 0;\r\n\t\tvar hemiLights = 0;\r\n\r\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tvar light = lights[ l ];\r\n\r\n\t\t\tif ( light.onlyShadow || light.visible === false ) continue;\r\n\r\n\t\t\tif ( light instanceof THREE.DirectionalLight ) dirLights ++;\r\n\t\t\tif ( light instanceof THREE.PointLight ) pointLights ++;\r\n\t\t\tif ( light instanceof THREE.SpotLight ) spotLights ++;\r\n\t\t\tif ( light instanceof THREE.HemisphereLight ) hemiLights ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn { 'directional': dirLights, 'point': pointLights, 'spot': spotLights, 'hemi': hemiLights };\r\n\r\n\t}\r\n\r\n\tfunction allocateShadows( lights ) {\r\n\r\n\t\tvar maxShadows = 0;\r\n\r\n\t\tfor ( var l = 0, ll = lights.length; l < ll; l ++ ) {\r\n\r\n\t\t\tvar light = lights[ l ];\r\n\r\n\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\tif ( light instanceof THREE.SpotLight ) maxShadows ++;\r\n\t\t\tif ( light instanceof THREE.DirectionalLight ) maxShadows ++;\r\n\r\n\t\t}\r\n\r\n\t\treturn maxShadows;\r\n\r\n\t}\r\n\r\n\tthis.getParameters = function ( material, lights, fog, object ) {\r\n\r\n\t\tvar shaderID = shaderIDs[ material.type ];\r\n\t\t// heuristics to create shader parameters according to lights in the scene\r\n\t\t// (not to blow over maxLights budget)\r\n\r\n\t\tvar maxLightCount = allocateLights( lights );\r\n\t\tvar maxShadows = allocateShadows( lights );\r\n\t\tvar maxBones = allocateBones( object );\r\n\t\tvar precision = renderer.getPrecision();\r\n\r\n\t\tif ( material.precision !== null ) {\r\n\r\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\r\n\r\n\t\t\tif ( precision !== material.precision ) {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.initMaterial:', material.precision, 'not supported, using', precision, 'instead.' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar parameters = {\r\n\r\n\t\t\tshaderID: shaderID,\r\n\r\n\t\t\tprecision: precision,\r\n\t\t\tsupportsVertexTextures: capabilities.vertexTextures,\r\n\r\n\t\t\tmap: !! material.map,\r\n\t\t\tenvMap: !! material.envMap,\r\n\t\t\tenvMapMode: material.envMap && material.envMap.mapping,\r\n\t\t\tlightMap: !! material.lightMap,\r\n\t\t\taoMap: !! material.aoMap,\r\n\t\t\temissiveMap: !! material.emissiveMap,\r\n\t\t\tbumpMap: !! material.bumpMap,\r\n\t\t\tnormalMap: !! material.normalMap,\r\n\t\t\tdisplacementMap: !! material.displacementMap,\r\n\t\t\tspecularMap: !! material.specularMap,\r\n\t\t\talphaMap: !! material.alphaMap,\r\n\r\n\t\t\tcombine: material.combine,\r\n\r\n\t\t\tvertexColors: material.vertexColors,\r\n\r\n\t\t\tfog: fog,\r\n\t\t\tuseFog: material.fog,\r\n\t\t\tfogExp: fog instanceof THREE.FogExp2,\r\n\r\n\t\t\tflatShading: material.shading === THREE.FlatShading,\r\n\r\n\t\t\tsizeAttenuation: material.sizeAttenuation,\r\n\t\t\tlogarithmicDepthBuffer: capabilities.logarithmicDepthBuffer,\r\n\r\n\t\t\tskinning: material.skinning,\r\n\t\t\tmaxBones: maxBones,\r\n\t\t\tuseVertexTexture: capabilities.floatVertexTextures && object && object.skeleton && object.skeleton.useVertexTexture,\r\n\r\n\t\t\tmorphTargets: material.morphTargets,\r\n\t\t\tmorphNormals: material.morphNormals,\r\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\r\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\r\n\r\n\t\t\tmaxDirLights: maxLightCount.directional,\r\n\t\t\tmaxPointLights: maxLightCount.point,\r\n\t\t\tmaxSpotLights: maxLightCount.spot,\r\n\t\t\tmaxHemiLights: maxLightCount.hemi,\r\n\r\n\t\t\tmaxShadows: maxShadows,\r\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && object.receiveShadow && maxShadows > 0,\r\n\t\t\tshadowMapType: renderer.shadowMap.type,\r\n\t\t\tshadowMapDebug: renderer.shadowMap.debug,\r\n\r\n\t\t\talphaTest: material.alphaTest,\r\n\t\t\tmetal: material.metal,\r\n\t\t\tdoubleSided: material.side === THREE.DoubleSide,\r\n\t\t\tflipSided: material.side === THREE.BackSide\r\n\r\n\t\t};\r\n\r\n\t\treturn parameters;\r\n\r\n\t};\r\n\r\n\tthis.getProgramCode = function ( material, parameters ) {\r\n\r\n\t\tvar chunks = [];\r\n\r\n\t\tif ( parameters.shaderID ) {\r\n\r\n\t\t\tchunks.push( parameters.shaderID );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tchunks.push( material.fragmentShader );\r\n\t\t\tchunks.push( material.vertexShader );\r\n\r\n\t\t}\r\n\r\n\t\tif ( material.defines !== undefined ) {\r\n\r\n\t\t\tfor ( var name in material.defines ) {\r\n\r\n\t\t\t\tchunks.push( name );\r\n\t\t\t\tchunks.push( material.defines[ name ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\r\n\r\n\t\t\tvar parameterName = parameterNames[ i ];\r\n\t\t\tchunks.push( parameterName );\r\n\t\t\tchunks.push( parameters[ parameterName ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks.join();\r\n\r\n\t};\r\n\r\n\tthis.acquireProgram = function ( material, parameters, code ) {\r\n\r\n\t\tvar program;\r\n\r\n\t\t// Check if code has been already compiled\r\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\r\n\r\n\t\t\tvar programInfo = programs[ p ];\r\n\r\n\t\t\tif ( programInfo.code === code ) {\r\n\r\n\t\t\t\tprogram = programInfo;\r\n\t\t\t\t++ program.usedTimes;\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tprogram = new THREE.WebGLProgram( renderer, code, material, parameters );\r\n\t\t\tprograms.push( program );\r\n\r\n\t\t}\r\n\r\n\t\treturn program;\r\n\r\n\t};\r\n\r\n\tthis.releaseProgram = function( program ) {\r\n\r\n\t\tif ( -- program.usedTimes === 0 ) {\r\n\r\n\t\t\t// Remove from unordered set\r\n\t\t\tvar i = programs.indexOf( program );\r\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\r\n\t\t\tprograms.pop();\r\n\r\n\t\t\t// Free WebGL resources\r\n\t\t\tprogram.destroy();\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// Exposed for resource monitoring & error feedback via renderer.info:\r\n\tthis.programs = programs;\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLProperties.js\r\n\r\n/**\r\n* @author fordacious / fordacious.github.io\r\n*/\r\n\r\nTHREE.WebGLProperties = function () {\r\n\r\n\tvar properties = {};\r\n\r\n\tthis.get = function ( object ) {\r\n\r\n\t\tvar uuid = object.uuid;\r\n\t\tvar map = properties[ uuid ];\r\n\r\n\t\tif ( map === undefined ) {\r\n\r\n\t\t\tmap = {};\r\n\t\t\tproperties[ uuid ] = map;\r\n\r\n\t\t}\r\n\r\n\t\treturn map;\r\n\r\n\t};\r\n\r\n\tthis.delete = function ( object ) {\r\n\r\n\t\tdelete properties[ object.uuid ];\r\n\r\n\t};\r\n\r\n\tthis.clear = function () {\r\n\r\n\t\tproperties = {};\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLShader.js\r\n\r\nTHREE.WebGLShader = ( function () {\r\n\r\n\tvar addLineNumbers = function ( string ) {\r\n\r\n\t\tvar lines = string.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0; i < lines.length; i ++ ) {\r\n\r\n\t\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\r\n\r\n\t\t}\r\n\r\n\t\treturn lines.join( '\\n' );\r\n\r\n\t};\r\n\r\n\treturn function WebGLShader( gl, type, string ) {\r\n\r\n\t\tvar shader = gl.createShader( type );\r\n\r\n\t\tgl.shaderSource( shader, string );\r\n\t\tgl.compileShader( shader );\r\n\r\n\t\tif ( gl.getShaderParameter( shader, gl.COMPILE_STATUS ) === false ) {\r\n\r\n\t\t\tconsole.error( 'THREE.WebGLShader: Shader couldn\\'t compile.' );\r\n\r\n\t\t}\r\n\r\n\t\tif ( gl.getShaderInfoLog( shader ) !== '' ) {\r\n\r\n\t\t\tconsole.warn( 'THREE.WebGLShader: gl.getShaderInfoLog()', type === gl.VERTEX_SHADER ? 'vertex' : 'fragment', gl.getShaderInfoLog( shader ), addLineNumbers( string ) );\r\n\r\n\t\t}\r\n\r\n\t\t// --enable-privileged-webgl-extension\r\n\t\t// console.log( type, gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\r\n\r\n\t\treturn shader;\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/renderers/webgl/WebGLShadowMap.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WebGLShadowMap = function ( _renderer, _lights, _objects ) {\r\n\r\n\tvar _gl = _renderer.context,\r\n\t_state = _renderer.state,\r\n\t_frustum = new THREE.Frustum(),\r\n\t_projScreenMatrix = new THREE.Matrix4(),\r\n\r\n\t_min = new THREE.Vector3(),\r\n\t_max = new THREE.Vector3(),\r\n\r\n\t_matrixPosition = new THREE.Vector3(),\r\n\r\n\t_renderList = [];\r\n\r\n\t// init\r\n\r\n\tvar depthShader = THREE.ShaderLib[ \"depthRGBA\" ];\r\n\tvar depthUniforms = THREE.UniformsUtils.clone( depthShader.uniforms );\r\n\r\n\tvar _depthMaterial = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader\r\n\t } );\r\n\r\n\tvar _depthMaterialMorph = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tmorphTargets: true\r\n\t} );\r\n\r\n\tvar _depthMaterialSkin = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tskinning: true\r\n\t} );\r\n\r\n\tvar _depthMaterialMorphSkin = new THREE.ShaderMaterial( {\r\n\t\tuniforms: depthUniforms,\r\n\t\tvertexShader: depthShader.vertexShader,\r\n\t\tfragmentShader: depthShader.fragmentShader,\r\n\t\tmorphTargets: true,\r\n\t\tskinning: true\r\n\t} );\r\n\r\n\t_depthMaterial._shadowPass = true;\r\n\t_depthMaterialMorph._shadowPass = true;\r\n\t_depthMaterialSkin._shadowPass = true;\r\n\t_depthMaterialMorphSkin._shadowPass = true;\r\n\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tthis.enabled = false;\r\n\r\n\tthis.autoUpdate = true;\r\n\tthis.needsUpdate = false;\r\n\r\n\tthis.type = THREE.PCFShadowMap;\r\n\tthis.cullFace = THREE.CullFaceFront;\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( scope.enabled === false ) return;\r\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\r\n\r\n\t\t// set GL state for depth map\r\n\r\n\t\t_gl.clearColor( 1, 1, 1, 1 );\r\n\t\t_state.disable( _gl.BLEND );\r\n\r\n\t\t_state.enable( _gl.CULL_FACE );\r\n\t\t_gl.frontFace( _gl.CCW );\r\n\r\n\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.FRONT );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\t_state.setDepthTest( true );\r\n\r\n\t\t// render depth map\r\n\r\n\t\tfor ( var i = 0, il = _lights.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar light = _lights[ i ];\r\n\r\n\t\t\tif ( ! light.castShadow ) continue;\r\n\r\n\t\t\tif ( ! light.shadowMap ) {\r\n\r\n\t\t\t\tvar shadowFilter = THREE.LinearFilter;\r\n\r\n\t\t\t\tif ( scope.type === THREE.PCFSoftShadowMap ) {\r\n\r\n\t\t\t\t\tshadowFilter = THREE.NearestFilter;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar pars = { minFilter: shadowFilter, magFilter: shadowFilter, format: THREE.RGBAFormat };\r\n\r\n\t\t\t\tlight.shadowMap = new THREE.WebGLRenderTarget( light.shadowMapWidth, light.shadowMapHeight, pars );\r\n\t\t\t\tlight.shadowMapSize = new THREE.Vector2( light.shadowMapWidth, light.shadowMapHeight );\r\n\r\n\t\t\t\tlight.shadowMatrix = new THREE.Matrix4();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! light.shadowCamera ) {\r\n\r\n\t\t\t\tif ( light instanceof THREE.SpotLight ) {\r\n\r\n\t\t\t\t\tlight.shadowCamera = new THREE.PerspectiveCamera( light.shadowCameraFov, light.shadowMapWidth / light.shadowMapHeight, light.shadowCameraNear, light.shadowCameraFar );\r\n\r\n\t\t\t\t} else if ( light instanceof THREE.DirectionalLight ) {\r\n\r\n\t\t\t\t\tlight.shadowCamera = new THREE.OrthographicCamera( light.shadowCameraLeft, light.shadowCameraRight, light.shadowCameraTop, light.shadowCameraBottom, light.shadowCameraNear, light.shadowCameraFar );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( \"THREE.ShadowMapPlugin: Unsupported light type for shadow\", light );\r\n\t\t\t\t\tcontinue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscene.add( light.shadowCamera );\r\n\r\n\t\t\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( light.shadowCameraVisible && ! light.cameraHelper ) {\r\n\r\n\t\t\t\tlight.cameraHelper = new THREE.CameraHelper( light.shadowCamera );\r\n\t\t\t\tscene.add( light.cameraHelper );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar shadowMap = light.shadowMap;\r\n\t\t\tvar shadowMatrix = light.shadowMatrix;\r\n\t\t\tvar shadowCamera = light.shadowCamera;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tshadowCamera.position.setFromMatrixPosition( light.matrixWorld );\r\n\t\t\t_matrixPosition.setFromMatrixPosition( light.target.matrixWorld );\r\n\t\t\tshadowCamera.lookAt( _matrixPosition );\r\n\t\t\tshadowCamera.updateMatrixWorld();\r\n\r\n\t\t\tshadowCamera.matrixWorldInverse.getInverse( shadowCamera.matrixWorld );\r\n\r\n\t\t\t//\r\n\r\n\t\t\tif ( light.cameraHelper ) light.cameraHelper.visible = light.shadowCameraVisible;\r\n\t\t\tif ( light.shadowCameraVisible ) light.cameraHelper.update();\r\n\r\n\t\t\t// compute shadow matrix\r\n\r\n\t\t\tshadowMatrix.set(\r\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\r\n\t\t\t\t0.0, 0.0, 0.0, 1.0\r\n\t\t\t);\r\n\r\n\t\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\r\n\t\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\r\n\r\n\t\t\t// update camera matrices and frustum\r\n\r\n\t\t\t_projScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\r\n\t\t\t_frustum.setFromMatrix( _projScreenMatrix );\r\n\r\n\t\t\t// render shadow map\r\n\r\n\t\t\t_renderer.setRenderTarget( shadowMap );\r\n\t\t\t_renderer.clear();\r\n\r\n\t\t\t// set object matrices & frustum culling\r\n\r\n\t\t\t_renderList.length = 0;\r\n\r\n\t\t\tprojectObject( scene, shadowCamera );\r\n\r\n\r\n\t\t\t// render regular objects\r\n\r\n\t\t\tfor ( var j = 0, jl = _renderList.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\tvar object = _renderList[ j ];\r\n\t\t\t\tvar geometry = _objects.update( object );\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material instanceof THREE.MeshFaceMaterial ) {\r\n\r\n\t\t\t\t\tvar groups = geometry.groups;\r\n\t\t\t\t\tvar materials = material.materials;\r\n\r\n\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\r\n\r\n\t\t\t\t\t\tvar group = groups[ k ];\r\n\t\t\t\t\t\tvar groupMaterial = materials[ group.materialIndex ];\r\n\r\n\t\t\t\t\t\tif ( groupMaterial.visible === true ) {\r\n\r\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, null, geometry, getDepthMaterial( object, groupMaterial ), object, group );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, _lights, null, geometry, getDepthMaterial( object, material ), object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore GL state\r\n\r\n\t\tvar clearColor = _renderer.getClearColor(),\r\n\t\tclearAlpha = _renderer.getClearAlpha();\r\n\r\n\t\t_renderer.setClearColor( clearColor, clearAlpha );\r\n\t\t_state.enable( _gl.BLEND );\r\n\r\n\t\tif ( scope.cullFace === THREE.CullFaceFront ) {\r\n\r\n\t\t\t_gl.cullFace( _gl.BACK );\r\n\r\n\t\t}\r\n\r\n\t\t_renderer.resetGLState();\r\n\r\n\t\tscope.needsUpdate = false;\r\n\r\n\t};\r\n\r\n\tfunction getDepthMaterial( object, material ) {\r\n\r\n\t\tvar geometry = object.geometry;\r\n\r\n\t\tvar useMorphing = geometry.morphTargets !== undefined && geometry.morphTargets.length > 0 && material.morphTargets;\r\n\t\tvar useSkinning = object instanceof THREE.SkinnedMesh && material.skinning;\r\n\r\n\t\tvar depthMaterial;\r\n\r\n\t\tif ( object.customDepthMaterial ) {\r\n\r\n\t\t\tdepthMaterial = object.customDepthMaterial;\r\n\r\n\t\t} else if ( useSkinning ) {\r\n\r\n\t\t\tdepthMaterial = useMorphing ? _depthMaterialMorphSkin : _depthMaterialSkin;\r\n\r\n\t\t} else if ( useMorphing ) {\r\n\r\n\t\t\tdepthMaterial = _depthMaterialMorph;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdepthMaterial = _depthMaterial;\r\n\r\n\t\t}\r\n\r\n\t\tdepthMaterial.visible = material.visible;\r\n\t\tdepthMaterial.wireframe = material.wireframe;\r\n\t\tdepthMaterial.wireframeLinewidth = material.wireframeLinewidth;\r\n\r\n\t\treturn depthMaterial;\r\n\r\n\t}\r\n\r\n\tfunction projectObject( object, camera ) {\r\n\r\n\t\tif ( object.visible === false ) return;\r\n\r\n\t\tif ( object instanceof THREE.Mesh || object instanceof THREE.Line || object instanceof THREE.Points ) {\r\n\r\n\t\t\tif ( object.castShadow && ( object.frustumCulled === false || _frustum.intersectsObject( object ) === true ) ) {\r\n\r\n\t\t\t\tvar material = object.material;\r\n\r\n\t\t\t\tif ( material.visible === true ) {\r\n\r\n\t\t\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\r\n\t\t\t\t\t_renderList.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar children = object.children;\r\n\r\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\r\n\r\n\t\t\tprojectObject( children[ i ], camera );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/WebGLState.js\r\n\r\n/**\r\n* @author mrdoob / http://mrdoob.com/\r\n*/\r\n\r\nTHREE.WebGLState = function ( gl, extensions, paramThreeToGL ) {\r\n\r\n\tvar _this = this;\r\n\r\n\tvar newAttributes = new Uint8Array( 16 );\r\n\tvar enabledAttributes = new Uint8Array( 16 );\r\n\r\n\tvar capabilities = {};\r\n\r\n\tvar compressedTextureFormats = null;\r\n\r\n\tvar currentBlending = null;\r\n\tvar currentBlendEquation = null;\r\n\tvar currentBlendSrc = null;\r\n\tvar currentBlendDst = null;\r\n\tvar currentBlendEquationAlpha = null;\r\n\tvar currentBlendSrcAlpha = null;\r\n\tvar currentBlendDstAlpha = null;\r\n\r\n\tvar currentDepthFunc = null;\r\n\tvar currentDepthWrite = null;\r\n\r\n\tvar currentColorWrite = null;\r\n\r\n\tvar currentFlipSided = null;\r\n\r\n\tvar currentLineWidth = null;\r\n\r\n\tvar currentPolygonOffsetFactor = null;\r\n\tvar currentPolygonOffsetUnits = null;\r\n\r\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\r\n\r\n\tvar currentTextureSlot = undefined;\r\n\tvar currentBoundTextures = {};\r\n\r\n\tthis.init = function () {\r\n\r\n\t\tgl.clearColor( 0, 0, 0, 1 );\r\n\t\tgl.clearDepth( 1 );\r\n\t\tgl.clearStencil( 0 );\r\n\r\n\t\tthis.enable( gl.DEPTH_TEST );\r\n\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\tgl.frontFace( gl.CCW );\r\n\t\tgl.cullFace( gl.BACK );\r\n\t\tthis.enable( gl.CULL_FACE );\r\n\r\n\t\tthis.enable( gl.BLEND );\r\n\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t};\r\n\r\n\tthis.initAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tnewAttributes[ i ] = 0;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enableAttribute = function ( attribute ) {\r\n\r\n\t\tnewAttributes[ attribute ] = 1;\r\n\r\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\r\n\r\n\t\t\tgl.enableVertexAttribArray( attribute );\r\n\t\t\tenabledAttributes[ attribute ] = 1;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disableUnusedAttributes = function () {\r\n\r\n\t\tfor ( var i = 0, l = enabledAttributes.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.enable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== true ) {\r\n\r\n\t\t\tgl.enable( id );\r\n\t\t\tcapabilities[ id ] = true;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.disable = function ( id ) {\r\n\r\n\t\tif ( capabilities[ id ] !== false ) {\r\n\r\n\t\t\tgl.disable( id );\r\n\t\t\tcapabilities[ id ] = false;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.getCompressedTextureFormats = function () {\r\n\r\n\t\tif ( compressedTextureFormats === null ) {\r\n\r\n\t\t\tcompressedTextureFormats = [];\r\n\r\n\t\t\tif ( extensions.get( 'WEBGL_compressed_texture_pvrtc' ) ||\r\n\t\t\t     extensions.get( 'WEBGL_compressed_texture_s3tc' ) ) {\r\n\r\n\t\t\t\tvar formats = gl.getParameter( gl.COMPRESSED_TEXTURE_FORMATS );\r\n\r\n\t\t\t\tfor ( var i = 0; i < formats.length; i ++ ) {\r\n\r\n\t\t\t\t\tcompressedTextureFormats.push( formats[ i ] );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn compressedTextureFormats;\r\n\r\n\t};\r\n\r\n\tthis.setBlending = function ( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha ) {\r\n\r\n\t\tif ( blending !== currentBlending ) {\r\n\r\n\t\t\tif ( blending === THREE.NoBlending ) {\r\n\r\n\t\t\t\tthis.disable( gl.BLEND );\r\n\r\n\t\t\t} else if ( blending === THREE.AdditiveBlending ) {\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\r\n\r\n\t\t\t} else if ( blending === THREE.SubtractiveBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\r\n\r\n\t\t\t} else if ( blending === THREE.MultiplyBlending ) {\r\n\r\n\t\t\t\t// TODO: Find blendFuncSeparate() combination\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\r\n\r\n\t\t\t} else if ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.enable( gl.BLEND );\r\n\t\t\t\tgl.blendEquationSeparate( gl.FUNC_ADD, gl.FUNC_ADD );\r\n\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentBlending = blending;\r\n\r\n\t\t}\r\n\r\n\t\tif ( blending === THREE.CustomBlending ) {\r\n\r\n\t\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\r\n\t\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\r\n\t\t\tblendDstAlpha = blendDstAlpha || blendDst;\r\n\r\n\t\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\r\n\r\n\t\t\t\tgl.blendEquationSeparate( paramThreeToGL( blendEquation ), paramThreeToGL( blendEquationAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendEquation = blendEquation;\r\n\t\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\r\n\r\n\t\t\t\tgl.blendFuncSeparate( paramThreeToGL( blendSrc ), paramThreeToGL( blendDst ), paramThreeToGL( blendSrcAlpha ), paramThreeToGL( blendDstAlpha ) );\r\n\r\n\t\t\t\tcurrentBlendSrc = blendSrc;\r\n\t\t\t\tcurrentBlendDst = blendDst;\r\n\t\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\r\n\t\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tcurrentBlendEquation = null;\r\n\t\t\tcurrentBlendSrc = null;\r\n\t\t\tcurrentBlendDst = null;\r\n\t\t\tcurrentBlendEquationAlpha = null;\r\n\t\t\tcurrentBlendSrcAlpha = null;\r\n\t\t\tcurrentBlendDstAlpha = null;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthFunc = function ( depthFunc ) {\r\n\r\n\t\tif ( currentDepthFunc !== depthFunc ) {\r\n\r\n\t\t\tif ( depthFunc ) {\r\n\r\n\t\t\t\tswitch ( depthFunc ) {\r\n\r\n\t\t\t\t\tcase THREE.NeverDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.AlwaysDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LESS );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.LessEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.EqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.GreaterDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase THREE.NotEqualDepth:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\r\n\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.depthFunc( gl.LEQUAL );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentDepthFunc = depthFunc;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthTest = function ( depthTest ) {\r\n\r\n\t\tif ( depthTest ) {\r\n\r\n\t\t\tthis.enable( gl.DEPTH_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.DEPTH_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setDepthWrite = function ( depthWrite ) {\r\n\r\n\t\tif ( currentDepthWrite !== depthWrite ) {\r\n\r\n\t\t\tgl.depthMask( depthWrite );\r\n\t\t\tcurrentDepthWrite = depthWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setColorWrite = function ( colorWrite ) {\r\n\r\n\t\tif ( currentColorWrite !== colorWrite ) {\r\n\r\n\t\t\tgl.colorMask( colorWrite, colorWrite, colorWrite, colorWrite );\r\n\t\t\tcurrentColorWrite = colorWrite;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setFlipSided = function ( flipSided ) {\r\n\r\n\t\tif ( currentFlipSided !== flipSided ) {\r\n\r\n\t\t\tif ( flipSided ) {\r\n\r\n\t\t\t\tgl.frontFace( gl.CW );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.frontFace( gl.CCW );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tcurrentFlipSided = flipSided;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setLineWidth = function ( width ) {\r\n\r\n\t\tif ( width !== currentLineWidth ) {\r\n\r\n\t\t\tgl.lineWidth( width );\r\n\r\n\t\t\tcurrentLineWidth = width;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setPolygonOffset = function ( polygonOffset, factor, units ) {\r\n\r\n\t\tif ( polygonOffset ) {\r\n\r\n\t\t\tthis.enable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.POLYGON_OFFSET_FILL );\r\n\r\n\t\t}\r\n\r\n\t\tif ( polygonOffset && ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) ) {\r\n\r\n\t\t\tgl.polygonOffset( factor, units );\r\n\r\n\t\t\tcurrentPolygonOffsetFactor = factor;\r\n\t\t\tcurrentPolygonOffsetUnits = units;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.setScissorTest = function ( scissorTest ) {\r\n\r\n\t\tif ( scissorTest ) {\r\n\r\n\t\t\tthis.enable( gl.SCISSOR_TEST );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.disable( gl.SCISSOR_TEST );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t// texture\r\n\r\n\tthis.activeTexture = function ( webglSlot ) {\r\n\r\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\r\n\r\n\t\tif ( currentTextureSlot !== webglSlot ) {\r\n\r\n\t\t\tgl.activeTexture( webglSlot );\r\n\t\t\tcurrentTextureSlot = webglSlot;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.bindTexture = function ( webglType, webglTexture ) {\r\n\r\n\t\tif ( currentTextureSlot === undefined ) {\r\n\r\n\t\t\t_this.activeTexture();\r\n\r\n\t\t}\r\n\r\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\r\n\r\n\t\tif ( boundTexture === undefined ) {\r\n\r\n\t\t\tboundTexture = { type: undefined, texture: undefined };\r\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\r\n\r\n\t\t}\r\n\r\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\r\n\r\n\t\t\tgl.bindTexture( webglType, webglTexture );\r\n\r\n\t\t\tboundTexture.type = webglType;\r\n\t\t\tboundTexture.texture = webglTexture;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.compressedTexImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.texImage2D = function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\tgl.texImage2D.apply( gl, arguments );\r\n\r\n\t\t} catch ( error ) {\r\n\r\n\t\t\tconsole.error( error );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t//\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\r\n\r\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\r\n\r\n\t\t\t\tgl.disableVertexAttribArray( i );\r\n\t\t\t\tenabledAttributes[ i ] = 0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcapabilities = {};\r\n\r\n\t\tcompressedTextureFormats = null;\r\n\r\n\t\tcurrentBlending = null;\r\n\r\n\t\tcurrentDepthWrite = null;\r\n\t\tcurrentColorWrite = null;\r\n\r\n\t\tcurrentFlipSided = null;\r\n\r\n\t};\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/LensFlarePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.LensFlarePlugin = function ( renderer, flares ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\tvar hasVertexTexture;\r\n\r\n\tvar tempTexture, occlusionTexture;\r\n\r\n\tvar init = function () {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 1, - 1,  0, 0,\r\n\t\t\t 1, - 1,  1, 0,\r\n\t\t\t 1,  1,  1, 1,\r\n\t\t\t- 1,  1,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\t// buffers\r\n\r\n\t\tvertexBuffer     = gl.createBuffer();\r\n\t\telementBuffer    = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\t// textures\r\n\r\n\t\ttempTexture      = gl.createTexture();\r\n\t\tocclusionTexture = gl.createTexture();\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGB, 16, 16, 0, gl.RGB, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\tgl.texImage2D( gl.TEXTURE_2D, 0, gl.RGBA, 16, 16, 0, gl.RGBA, gl.UNSIGNED_BYTE, null );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\r\n\t\tgl.texParameteri( gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\r\n\r\n\t\thasVertexTexture = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS ) > 0;\r\n\r\n\t\tvar shader;\r\n\r\n\t\tif ( hasVertexTexture ) {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\",\r\n\r\n\t\t\t\t\t\t\t\"vVisibility =        visibility.r / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.g / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *=       visibility.b / 9.0;\",\r\n\t\t\t\t\t\t\t\"vVisibility *= 1.0 - visibility.a / 9.0;\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\t\t\t\t\t\"varying float vVisibility;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * vVisibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t} else {\r\n\r\n\t\t\tshader = {\r\n\r\n\t\t\t\tvertexShader: [\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform vec3 screenPosition;\",\r\n\t\t\t\t\t\"uniform vec2 scale;\",\r\n\t\t\t\t\t\"uniform float rotation;\",\r\n\r\n\t\t\t\t\t\"attribute vec2 position;\",\r\n\t\t\t\t\t\"attribute vec2 uv;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t\"vUV = uv;\",\r\n\r\n\t\t\t\t\t\t\"vec2 pos = position;\",\r\n\r\n\t\t\t\t\t\t\"if( renderType == 2 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\",\r\n\t\t\t\t\t\t\t\"pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\t\"gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" ),\r\n\r\n\t\t\t\tfragmentShader: [\r\n\r\n\t\t\t\t\t\"precision mediump float;\",\r\n\r\n\t\t\t\t\t\"uniform lowp int renderType;\",\r\n\r\n\t\t\t\t\t\"uniform sampler2D map;\",\r\n\t\t\t\t\t\"uniform sampler2D occlusionMap;\",\r\n\t\t\t\t\t\"uniform float opacity;\",\r\n\t\t\t\t\t\"uniform vec3 color;\",\r\n\r\n\t\t\t\t\t\"varying vec2 vUV;\",\r\n\r\n\t\t\t\t\t\"void main() {\",\r\n\r\n\t\t\t\t\t\t// pink square\r\n\r\n\t\t\t\t\t\t\"if( renderType == 0 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );\",\r\n\r\n\t\t\t\t\t\t// restore\r\n\r\n\t\t\t\t\t\t\"} else if( renderType == 1 ) {\",\r\n\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture2D( map, vUV );\",\r\n\r\n\t\t\t\t\t\t// flare\r\n\r\n\t\t\t\t\t\t\"} else {\",\r\n\r\n\t\t\t\t\t\t\t\"float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;\",\r\n\t\t\t\t\t\t\t\"visibility = ( 1.0 - visibility / 4.0 );\",\r\n\r\n\t\t\t\t\t\t\t\"vec4 texture = texture2D( map, vUV );\",\r\n\t\t\t\t\t\t\t\"texture.a *= opacity * visibility;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor = texture;\",\r\n\t\t\t\t\t\t\t\"gl_FragColor.rgb *= color;\",\r\n\r\n\t\t\t\t\t\t\"}\",\r\n\r\n\t\t\t\t\t\"}\"\r\n\r\n\t\t\t\t].join( \"\\n\" )\r\n\r\n\t\t\t};\r\n\r\n\t\t}\r\n\r\n\t\tprogram = createProgram( shader );\r\n\r\n\t\tattributes = {\r\n\t\t\tvertex: gl.getAttribLocation ( program, \"position\" ),\r\n\t\t\tuv:     gl.getAttribLocation ( program, \"uv\" )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\trenderType:     gl.getUniformLocation( program, \"renderType\" ),\r\n\t\t\tmap:            gl.getUniformLocation( program, \"map\" ),\r\n\t\t\tocclusionMap:   gl.getUniformLocation( program, \"occlusionMap\" ),\r\n\t\t\topacity:        gl.getUniformLocation( program, \"opacity\" ),\r\n\t\t\tcolor:          gl.getUniformLocation( program, \"color\" ),\r\n\t\t\tscale:          gl.getUniformLocation( program, \"scale\" ),\r\n\t\t\trotation:       gl.getUniformLocation( program, \"rotation\" ),\r\n\t\t\tscreenPosition: gl.getUniformLocation( program, \"screenPosition\" )\r\n\t\t};\r\n\r\n\t};\r\n\r\n\t/*\r\n\t * Render lens flares\r\n\t * Method: renders 16x16 0xff00ff-colored points scattered over the light source area,\r\n\t *         reads these back and calculates occlusion.\r\n\t */\r\n\r\n\tthis.render = function ( scene, camera, viewportWidth, viewportHeight ) {\r\n\r\n\t\tif ( flares.length === 0 ) return;\r\n\r\n\t\tvar tempPosition = new THREE.Vector3();\r\n\r\n\t\tvar invAspect = viewportHeight / viewportWidth,\r\n\t\t\thalfViewportWidth = viewportWidth * 0.5,\r\n\t\t\thalfViewportHeight = viewportHeight * 0.5;\r\n\r\n\t\tvar size = 16 / viewportHeight,\r\n\t\t\tscale = new THREE.Vector2( size * invAspect, size );\r\n\r\n\t\tvar screenPosition = new THREE.Vector3( 1, 1, 0 ),\r\n\t\t\tscreenPositionPixels = new THREE.Vector2( 1, 1 );\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.vertex );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\t// loop through all lens flares to update their occlusion and positions\r\n\t\t// setup gl and common used attribs/uniforms\r\n\r\n\t\tgl.uniform1i( uniforms.occlusionMap, 0 );\r\n\t\tgl.uniform1i( uniforms.map, 1 );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.vertex, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tgl.depthMask( false );\r\n\r\n\t\tfor ( var i = 0, l = flares.length; i < l; i ++ ) {\r\n\r\n\t\t\tsize = 16 / viewportHeight;\r\n\t\t\tscale.set( size * invAspect, size );\r\n\r\n\t\t\t// calc object screen position\r\n\r\n\t\t\tvar flare = flares[ i ];\r\n\r\n\t\t\ttempPosition.set( flare.matrixWorld.elements[ 12 ], flare.matrixWorld.elements[ 13 ], flare.matrixWorld.elements[ 14 ] );\r\n\r\n\t\t\ttempPosition.applyMatrix4( camera.matrixWorldInverse );\r\n\t\t\ttempPosition.applyProjection( camera.projectionMatrix );\r\n\r\n\t\t\t// setup arrays for gl programs\r\n\r\n\t\t\tscreenPosition.copy( tempPosition );\r\n\r\n\t\t\tscreenPositionPixels.x = screenPosition.x * halfViewportWidth + halfViewportWidth;\r\n\t\t\tscreenPositionPixels.y = screenPosition.y * halfViewportHeight + halfViewportHeight;\r\n\r\n\t\t\t// screen cull\r\n\r\n\t\t\tif ( hasVertexTexture || (\r\n\t\t\t\tscreenPositionPixels.x > 0 &&\r\n\t\t\t\tscreenPositionPixels.x < viewportWidth &&\r\n\t\t\t\tscreenPositionPixels.y > 0 &&\r\n\t\t\t\tscreenPositionPixels.y < viewportHeight ) ) {\r\n\r\n\t\t\t\t// save current RGB to temp texture\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, null );\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGB, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// render pink quad\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\r\n\t\t\t\tstate.disable( gl.BLEND );\r\n\t\t\t\tstate.enable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// copy result to occlusionMap\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, occlusionTexture );\r\n\t\t\t\tgl.copyTexImage2D( gl.TEXTURE_2D, 0, gl.RGBA, screenPositionPixels.x - 8, screenPositionPixels.y - 8, 16, 16, 0 );\r\n\r\n\r\n\t\t\t\t// restore graphics\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 1 );\r\n\t\t\t\tstate.disable( gl.DEPTH_TEST );\r\n\r\n\t\t\t\tstate.activeTexture( gl.TEXTURE1 );\r\n\t\t\t\tstate.bindTexture( gl.TEXTURE_2D, tempTexture );\r\n\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\r\n\t\t\t\t// update object positions\r\n\r\n\t\t\t\tflare.positionScreen.copy( screenPosition );\r\n\r\n\t\t\t\tif ( flare.customUpdateCallback ) {\r\n\r\n\t\t\t\t\tflare.customUpdateCallback( flare );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tflare.updateLensFlares();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// render flares\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.renderType, 2 );\r\n\t\t\t\tstate.enable( gl.BLEND );\r\n\r\n\t\t\t\tfor ( var j = 0, jl = flare.lensFlares.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar sprite = flare.lensFlares[ j ];\r\n\r\n\t\t\t\t\tif ( sprite.opacity > 0.001 && sprite.scale > 0.001 ) {\r\n\r\n\t\t\t\t\t\tscreenPosition.x = sprite.x;\r\n\t\t\t\t\t\tscreenPosition.y = sprite.y;\r\n\t\t\t\t\t\tscreenPosition.z = sprite.z;\r\n\r\n\t\t\t\t\t\tsize = sprite.size * sprite.scale / viewportHeight;\r\n\r\n\t\t\t\t\t\tscale.x = size * invAspect;\r\n\t\t\t\t\t\tscale.y = size;\r\n\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.screenPosition, screenPosition.x, screenPosition.y, screenPosition.z );\r\n\t\t\t\t\t\tgl.uniform2f( uniforms.scale, scale.x, scale.y );\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.rotation, sprite.rotation );\r\n\r\n\t\t\t\t\t\tgl.uniform1f( uniforms.opacity, sprite.opacity );\r\n\t\t\t\t\t\tgl.uniform3f( uniforms.color, sprite.color.r, sprite.color.g, sprite.color.b );\r\n\r\n\t\t\t\t\t\tstate.setBlending( sprite.blending, sprite.blendEquation, sprite.blendSrc, sprite.blendDst );\r\n\t\t\t\t\t\trenderer.setTexture( sprite.texture, 1 );\r\n\r\n\t\t\t\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.DEPTH_TEST );\r\n\t\tgl.depthMask( true );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram ( shader ) {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\r\n\t\tvar prefix = \"precision \" + renderer.getPrecision() + \" float;\\n\";\r\n\r\n\t\tgl.shaderSource( fragmentShader, prefix + shader.fragmentShader );\r\n\t\tgl.shaderSource( vertexShader, prefix + shader.vertexShader );\r\n\r\n\t\tgl.compileShader( fragmentShader );\r\n\t\tgl.compileShader( vertexShader );\r\n\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\t\tgl.attachShader( program, vertexShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/renderers/webgl/plugins/SpritePlugin.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SpritePlugin = function ( renderer, sprites ) {\r\n\r\n\tvar gl = renderer.context;\r\n\tvar state = renderer.state;\r\n\r\n\tvar vertexBuffer, elementBuffer;\r\n\tvar program, attributes, uniforms;\r\n\r\n\tvar texture;\r\n\r\n\t// decompose matrixWorld\r\n\r\n\tvar spritePosition = new THREE.Vector3();\r\n\tvar spriteRotation = new THREE.Quaternion();\r\n\tvar spriteScale = new THREE.Vector3();\r\n\r\n\tvar init = function () {\r\n\r\n\t\tvar vertices = new Float32Array( [\r\n\t\t\t- 0.5, - 0.5,  0, 0,\r\n\t\t\t  0.5, - 0.5,  1, 0,\r\n\t\t\t  0.5,   0.5,  1, 1,\r\n\t\t\t- 0.5,   0.5,  0, 1\r\n\t\t] );\r\n\r\n\t\tvar faces = new Uint16Array( [\r\n\t\t\t0, 1, 2,\r\n\t\t\t0, 2, 3\r\n\t\t] );\r\n\r\n\t\tvertexBuffer  = gl.createBuffer();\r\n\t\telementBuffer = gl.createBuffer();\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.bufferData( gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\t\tgl.bufferData( gl.ELEMENT_ARRAY_BUFFER, faces, gl.STATIC_DRAW );\r\n\r\n\t\tprogram = createProgram();\r\n\r\n\t\tattributes = {\r\n\t\t\tposition:\t\t\tgl.getAttribLocation ( program, 'position' ),\r\n\t\t\tuv:\t\t\t\t\tgl.getAttribLocation ( program, 'uv' )\r\n\t\t};\r\n\r\n\t\tuniforms = {\r\n\t\t\tuvOffset:\t\t\tgl.getUniformLocation( program, 'uvOffset' ),\r\n\t\t\tuvScale:\t\t\tgl.getUniformLocation( program, 'uvScale' ),\r\n\r\n\t\t\trotation:\t\t\tgl.getUniformLocation( program, 'rotation' ),\r\n\t\t\tscale:\t\t\t\tgl.getUniformLocation( program, 'scale' ),\r\n\r\n\t\t\tcolor:\t\t\t\tgl.getUniformLocation( program, 'color' ),\r\n\t\t\tmap:\t\t\t\tgl.getUniformLocation( program, 'map' ),\r\n\t\t\topacity:\t\t\tgl.getUniformLocation( program, 'opacity' ),\r\n\r\n\t\t\tmodelViewMatrix: \tgl.getUniformLocation( program, 'modelViewMatrix' ),\r\n\t\t\tprojectionMatrix:\tgl.getUniformLocation( program, 'projectionMatrix' ),\r\n\r\n\t\t\tfogType:\t\t\tgl.getUniformLocation( program, 'fogType' ),\r\n\t\t\tfogDensity:\t\t\tgl.getUniformLocation( program, 'fogDensity' ),\r\n\t\t\tfogNear:\t\t\tgl.getUniformLocation( program, 'fogNear' ),\r\n\t\t\tfogFar:\t\t\t\tgl.getUniformLocation( program, 'fogFar' ),\r\n\t\t\tfogColor:\t\t\tgl.getUniformLocation( program, 'fogColor' ),\r\n\r\n\t\t\talphaTest:\t\t\tgl.getUniformLocation( program, 'alphaTest' )\r\n\t\t};\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = 8;\r\n\t\tcanvas.height = 8;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.fillStyle = 'white';\r\n\t\tcontext.fillRect( 0, 0, 8, 8 );\r\n\r\n\t\ttexture = new THREE.Texture( canvas );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t};\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( sprites.length === 0 ) return;\r\n\r\n\t\t// setup gl\r\n\r\n\t\tif ( program === undefined ) {\r\n\r\n\t\t\tinit();\r\n\r\n\t\t}\r\n\r\n\t\tgl.useProgram( program );\r\n\r\n\t\tstate.initAttributes();\r\n\t\tstate.enableAttribute( attributes.position );\r\n\t\tstate.enableAttribute( attributes.uv );\r\n\t\tstate.disableUnusedAttributes();\r\n\r\n\t\tstate.disable( gl.CULL_FACE );\r\n\t\tstate.enable( gl.BLEND );\r\n\r\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, vertexBuffer );\r\n\t\tgl.vertexAttribPointer( attributes.position, 2, gl.FLOAT, false, 2 * 8, 0 );\r\n\t\tgl.vertexAttribPointer( attributes.uv, 2, gl.FLOAT, false, 2 * 8, 8 );\r\n\r\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, elementBuffer );\r\n\r\n\t\tgl.uniformMatrix4fv( uniforms.projectionMatrix, false, camera.projectionMatrix.elements );\r\n\r\n\t\tstate.activeTexture( gl.TEXTURE0 );\r\n\t\tgl.uniform1i( uniforms.map, 0 );\r\n\r\n\t\tvar oldFogType = 0;\r\n\t\tvar sceneFogType = 0;\r\n\t\tvar fog = scene.fog;\r\n\r\n\t\tif ( fog ) {\r\n\r\n\t\t\tgl.uniform3f( uniforms.fogColor, fog.color.r, fog.color.g, fog.color.b );\r\n\r\n\t\t\tif ( fog instanceof THREE.Fog ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogNear, fog.near );\r\n\t\t\t\tgl.uniform1f( uniforms.fogFar, fog.far );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 1 );\r\n\t\t\t\toldFogType = 1;\r\n\t\t\t\tsceneFogType = 1;\r\n\r\n\t\t\t} else if ( fog instanceof THREE.FogExp2 ) {\r\n\r\n\t\t\t\tgl.uniform1f( uniforms.fogDensity, fog.density );\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, 2 );\r\n\t\t\t\toldFogType = 2;\r\n\t\t\t\tsceneFogType = 2;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgl.uniform1i( uniforms.fogType, 0 );\r\n\t\t\toldFogType = 0;\r\n\t\t\tsceneFogType = 0;\r\n\r\n\t\t}\r\n\r\n\r\n\t\t// update positions and sort\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\r\n\t\t\tsprite.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, sprite.matrixWorld );\r\n\t\t\tsprite.z = - sprite.modelViewMatrix.elements[ 14 ];\r\n\r\n\t\t}\r\n\r\n\t\tsprites.sort( painterSortStable );\r\n\r\n\t\t// render all sprites\r\n\r\n\t\tvar scale = [];\r\n\r\n\t\tfor ( var i = 0, l = sprites.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar sprite = sprites[ i ];\r\n\t\t\tvar material = sprite.material;\r\n\r\n\t\t\tgl.uniform1f( uniforms.alphaTest, material.alphaTest );\r\n\t\t\tgl.uniformMatrix4fv( uniforms.modelViewMatrix, false, sprite.modelViewMatrix.elements );\r\n\r\n\t\t\tsprite.matrixWorld.decompose( spritePosition, spriteRotation, spriteScale );\r\n\r\n\t\t\tscale[ 0 ] = spriteScale.x;\r\n\t\t\tscale[ 1 ] = spriteScale.y;\r\n\r\n\t\t\tvar fogType = 0;\r\n\r\n\t\t\tif ( scene.fog && material.fog ) {\r\n\r\n\t\t\t\tfogType = sceneFogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( oldFogType !== fogType ) {\r\n\r\n\t\t\t\tgl.uniform1i( uniforms.fogType, fogType );\r\n\t\t\t\toldFogType = fogType;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( material.map !== null ) {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, material.map.offset.x, material.map.offset.y );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, material.map.repeat.x, material.map.repeat.y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tgl.uniform2f( uniforms.uvOffset, 0, 0 );\r\n\t\t\t\tgl.uniform2f( uniforms.uvScale, 1, 1 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.uniform1f( uniforms.opacity, material.opacity );\r\n\t\t\tgl.uniform3f( uniforms.color, material.color.r, material.color.g, material.color.b );\r\n\r\n\t\t\tgl.uniform1f( uniforms.rotation, material.rotation );\r\n\t\t\tgl.uniform2fv( uniforms.scale, scale );\r\n\r\n\t\t\tstate.setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst );\r\n\t\t\tstate.setDepthTest( material.depthTest );\r\n\t\t\tstate.setDepthWrite( material.depthWrite );\r\n\r\n\t\t\tif ( material.map && material.map.image && material.map.image.width ) {\r\n\r\n\t\t\t\trenderer.setTexture( material.map, 0 );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\trenderer.setTexture( texture, 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgl.drawElements( gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0 );\r\n\r\n\t\t}\r\n\r\n\t\t// restore gl\r\n\r\n\t\tstate.enable( gl.CULL_FACE );\r\n\r\n\t\trenderer.resetGLState();\r\n\r\n\t};\r\n\r\n\tfunction createProgram () {\r\n\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\tvar vertexShader = gl.createShader( gl.VERTEX_SHADER );\r\n\t\tvar fragmentShader = gl.createShader( gl.FRAGMENT_SHADER );\r\n\r\n\t\tgl.shaderSource( vertexShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform mat4 modelViewMatrix;',\r\n\t\t\t'uniform mat4 projectionMatrix;',\r\n\t\t\t'uniform float rotation;',\r\n\t\t\t'uniform vec2 scale;',\r\n\t\t\t'uniform vec2 uvOffset;',\r\n\t\t\t'uniform vec2 uvScale;',\r\n\r\n\t\t\t'attribute vec2 position;',\r\n\t\t\t'attribute vec2 uv;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vUV = uvOffset + uv * uvScale;',\r\n\r\n\t\t\t\t'vec2 alignedPosition = position * scale;',\r\n\r\n\t\t\t\t'vec2 rotatedPosition;',\r\n\t\t\t\t'rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;',\r\n\t\t\t\t'rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;',\r\n\r\n\t\t\t\t'vec4 finalPosition;',\r\n\r\n\t\t\t\t'finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );',\r\n\t\t\t\t'finalPosition.xy += rotatedPosition;',\r\n\t\t\t\t'finalPosition = projectionMatrix * finalPosition;',\r\n\r\n\t\t\t\t'gl_Position = finalPosition;',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.shaderSource( fragmentShader, [\r\n\r\n\t\t\t'precision ' + renderer.getPrecision() + ' float;',\r\n\r\n\t\t\t'uniform vec3 color;',\r\n\t\t\t'uniform sampler2D map;',\r\n\t\t\t'uniform float opacity;',\r\n\r\n\t\t\t'uniform int fogType;',\r\n\t\t\t'uniform vec3 fogColor;',\r\n\t\t\t'uniform float fogDensity;',\r\n\t\t\t'uniform float fogNear;',\r\n\t\t\t'uniform float fogFar;',\r\n\t\t\t'uniform float alphaTest;',\r\n\r\n\t\t\t'varying vec2 vUV;',\r\n\r\n\t\t\t'void main() {',\r\n\r\n\t\t\t\t'vec4 texture = texture2D( map, vUV );',\r\n\r\n\t\t\t\t'if ( texture.a < alphaTest ) discard;',\r\n\r\n\t\t\t\t'gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );',\r\n\r\n\t\t\t\t'if ( fogType > 0 ) {',\r\n\r\n\t\t\t\t\t'float depth = gl_FragCoord.z / gl_FragCoord.w;',\r\n\t\t\t\t\t'float fogFactor = 0.0;',\r\n\r\n\t\t\t\t\t'if ( fogType == 1 ) {',\r\n\r\n\t\t\t\t\t\t'fogFactor = smoothstep( fogNear, fogFar, depth );',\r\n\r\n\t\t\t\t\t'} else {',\r\n\r\n\t\t\t\t\t\t'const float LOG2 = 1.442695;',\r\n\t\t\t\t\t\t'fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );',\r\n\t\t\t\t\t\t'fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );',\r\n\r\n\t\t\t\t\t'}',\r\n\r\n\t\t\t\t\t'gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );',\r\n\r\n\t\t\t\t'}',\r\n\r\n\t\t\t'}'\r\n\r\n\t\t].join( '\\n' ) );\r\n\r\n\t\tgl.compileShader( vertexShader );\r\n\t\tgl.compileShader( fragmentShader );\r\n\r\n\t\tgl.attachShader( program, vertexShader );\r\n\t\tgl.attachShader( program, fragmentShader );\r\n\r\n\t\tgl.linkProgram( program );\r\n\r\n\t\treturn program;\r\n\r\n\t}\r\n\r\n\tfunction painterSortStable ( a, b ) {\r\n\r\n\t\tif ( a.z !== b.z ) {\r\n\r\n\t\t\treturn b.z - a.z;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn b.id - a.id;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/GeometryUtils.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GeometryUtils = {\r\n\r\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\r\n\r\n\t\tvar matrix;\r\n\r\n\t\tif ( geometry2 instanceof THREE.Mesh ) {\r\n\r\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\r\n\r\n\t\t\tmatrix = geometry2.matrix;\r\n\t\t\tgeometry2 = geometry2.geometry;\r\n\r\n\t\t}\r\n\r\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\r\n\r\n\t},\r\n\r\n\tcenter: function ( geometry ) {\r\n\r\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\r\n\t\treturn geometry.center();\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/ImageUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author Daosheng Mu / https://github.com/DaoshengMu/\r\n */\r\n\r\nTHREE.ImageUtils = {\r\n\r\n\tcrossOrigin: undefined,\r\n\r\n\tloadTexture: function ( url, mapping, onLoad, onError ) {\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\t\tloader.crossOrigin = this.crossOrigin;\r\n\r\n\t\tvar texture = new THREE.Texture( undefined, mapping );\r\n\r\n\t\tloader.load( url, function ( image ) {\r\n\r\n\t\t\ttexture.image = image;\r\n\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t}, undefined, function ( event ) {\r\n\r\n\t\t\tif ( onError ) onError( event );\r\n\r\n\t\t} );\r\n\r\n\t\ttexture.sourceFile = url;\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadTextureCube: function ( array, mapping, onLoad, onError ) {\r\n\r\n\t\tvar images = [];\r\n\r\n\t\tvar loader = new THREE.ImageLoader();\r\n\t\tloader.crossOrigin = this.crossOrigin;\r\n\r\n\t\tvar texture = new THREE.CubeTexture( images, mapping );\r\n\r\n\t\tvar loaded = 0;\r\n\r\n\t\tvar loadTexture = function ( i ) {\r\n\r\n\t\t\tloader.load( array[ i ], function ( image ) {\r\n\r\n\t\t\t\ttexture.images[ i ] = image;\r\n\r\n\t\t\t\tloaded += 1;\r\n\r\n\t\t\t\tif ( loaded === 6 ) {\r\n\r\n\t\t\t\t\ttexture.needsUpdate = true;\r\n\r\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, undefined, onError );\r\n\r\n\t\t};\r\n\r\n\t\tfor ( var i = 0, il = array.length; i < il; ++ i ) {\r\n\r\n\t\t\tloadTexture( i );\r\n\r\n\t\t}\r\n\r\n\t\treturn texture;\r\n\r\n\t},\r\n\r\n\tloadCompressedTexture: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' )\r\n\r\n\t},\r\n\r\n\tloadCompressedTextureCube: function () {\r\n\r\n\t\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' )\r\n\r\n\t},\r\n\r\n\tgetNormalMap: function ( image, depth ) {\r\n\r\n\t\t// Adapted from http://www.paulbrunt.co.uk/lab/heightnormal/\r\n\r\n\t\tvar cross = function ( a, b ) {\r\n\r\n\t\t\treturn [ a[ 1 ] * b[ 2 ] - a[ 2 ] * b[ 1 ], a[ 2 ] * b[ 0 ] - a[ 0 ] * b[ 2 ], a[ 0 ] * b[ 1 ] - a[ 1 ] * b[ 0 ] ];\r\n\r\n\t\t};\r\n\r\n\t\tvar subtract = function ( a, b ) {\r\n\r\n\t\t\treturn [ a[ 0 ] - b[ 0 ], a[ 1 ] - b[ 1 ], a[ 2 ] - b[ 2 ] ];\r\n\r\n\t\t};\r\n\r\n\t\tvar normalize = function ( a ) {\r\n\r\n\t\t\tvar l = Math.sqrt( a[ 0 ] * a[ 0 ] + a[ 1 ] * a[ 1 ] + a[ 2 ] * a[ 2 ] );\r\n\t\t\treturn [ a[ 0 ] / l, a[ 1 ] / l, a[ 2 ] / l ];\r\n\r\n\t\t};\r\n\r\n\t\tdepth = depth | 1;\r\n\r\n\t\tvar width = image.width;\r\n\t\tvar height = image.height;\r\n\r\n\t\tvar canvas = document.createElement( 'canvas' );\r\n\t\tcanvas.width = width;\r\n\t\tcanvas.height = height;\r\n\r\n\t\tvar context = canvas.getContext( '2d' );\r\n\t\tcontext.drawImage( image, 0, 0 );\r\n\r\n\t\tvar data = context.getImageData( 0, 0, width, height ).data;\r\n\t\tvar imageData = context.createImageData( width, height );\r\n\t\tvar output = imageData.data;\r\n\r\n\t\tfor ( var x = 0; x < width; x ++ ) {\r\n\r\n\t\t\tfor ( var y = 0; y < height; y ++ ) {\r\n\r\n\t\t\t\tvar ly = y - 1 < 0 ? 0 : y - 1;\r\n\t\t\t\tvar uy = y + 1 > height - 1 ? height - 1 : y + 1;\r\n\t\t\t\tvar lx = x - 1 < 0 ? 0 : x - 1;\r\n\t\t\t\tvar ux = x + 1 > width - 1 ? width - 1 : x + 1;\r\n\r\n\t\t\t\tvar points = [];\r\n\t\t\t\tvar origin = [ 0, 0, data[ ( y * width + x ) * 4 ] / 255 * depth ];\r\n\t\t\t\tpoints.push( [ - 1, 0, data[ ( y * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ - 1, - 1, data[ ( ly * width + lx ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 0, - 1, data[ ( ly * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, - 1, data[ ( ly * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, 0, data[ ( y * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 1, 1, data[ ( uy * width + ux ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ 0, 1, data[ ( uy * width + x ) * 4 ] / 255 * depth ] );\r\n\t\t\t\tpoints.push( [ - 1, 1, data[ ( uy * width + lx ) * 4 ] / 255 * depth ] );\r\n\r\n\t\t\t\tvar normals = [];\r\n\t\t\t\tvar num_points = points.length;\r\n\r\n\t\t\t\tfor ( var i = 0; i < num_points; i ++ ) {\r\n\r\n\t\t\t\t\tvar v1 = points[ i ];\r\n\t\t\t\t\tvar v2 = points[ ( i + 1 ) % num_points ];\r\n\t\t\t\t\tv1 = subtract( v1, origin );\r\n\t\t\t\t\tv2 = subtract( v2, origin );\r\n\t\t\t\t\tnormals.push( normalize( cross( v1, v2 ) ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar normal = [ 0, 0, 0 ];\r\n\r\n\t\t\t\tfor ( var i = 0; i < normals.length; i ++ ) {\r\n\r\n\t\t\t\t\tnormal[ 0 ] += normals[ i ][ 0 ];\r\n\t\t\t\t\tnormal[ 1 ] += normals[ i ][ 1 ];\r\n\t\t\t\t\tnormal[ 2 ] += normals[ i ][ 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnormal[ 0 ] /= normals.length;\r\n\t\t\t\tnormal[ 1 ] /= normals.length;\r\n\t\t\t\tnormal[ 2 ] /= normals.length;\r\n\r\n\t\t\t\tvar idx = ( y * width + x ) * 4;\r\n\r\n\t\t\t\toutput[ idx ] = ( ( normal[ 0 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 1 ] = ( ( normal[ 1 ] + 1.0 ) / 2.0 * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 2 ] = ( normal[ 2 ] * 255 ) | 0;\r\n\t\t\t\toutput[ idx + 3 ] = 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tcontext.putImageData( imageData, 0, 0 );\r\n\r\n\t\treturn canvas;\r\n\r\n\t},\r\n\r\n\tgenerateDataTexture: function ( width, height, color ) {\r\n\r\n\t\tvar size = width * height;\r\n\t\tvar data = new Uint8Array( 3 * size );\r\n\r\n\t\tvar r = Math.floor( color.r * 255 );\r\n\t\tvar g = Math.floor( color.g * 255 );\r\n\t\tvar b = Math.floor( color.b * 255 );\r\n\r\n\t\tfor ( var i = 0; i < size; i ++ ) {\r\n\r\n\t\t\tdata[ i * 3 ] \t   = r;\r\n\t\t\tdata[ i * 3 + 1 ] = g;\r\n\t\t\tdata[ i * 3 + 2 ] = b;\r\n\r\n\t\t}\r\n\r\n\t\tvar texture = new THREE.DataTexture( data, width, height, THREE.RGBFormat );\r\n\t\ttexture.needsUpdate = true;\r\n\r\n\t\treturn texture;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/SceneUtils.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.SceneUtils = {\r\n\r\n\tcreateMultiMaterialObject: function ( geometry, materials ) {\r\n\r\n\t\tvar group = new THREE.Group();\r\n\r\n\t\tfor ( var i = 0, l = materials.length; i < l; i ++ ) {\r\n\r\n\t\t\tgroup.add( new THREE.Mesh( geometry, materials[ i ] ) );\r\n\r\n\t\t}\r\n\r\n\t\treturn group;\r\n\r\n\t},\r\n\r\n\tdetach: function ( child, parent, scene ) {\r\n\r\n\t\tchild.applyMatrix( parent.matrixWorld );\r\n\t\tparent.remove( child );\r\n\t\tscene.add( child );\r\n\r\n\t},\r\n\r\n\tattach: function ( child, scene, parent ) {\r\n\r\n\t\tvar matrixWorldInverse = new THREE.Matrix4();\r\n\t\tmatrixWorldInverse.getInverse( parent.matrixWorld );\r\n\t\tchild.applyMatrix( matrixWorldInverse );\r\n\r\n\t\tscene.remove( child );\r\n\t\tparent.add( child );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/FontUtils.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * For Text operations in three.js (See TextGeometry)\r\n *\r\n * It uses techniques used in:\r\n *\r\n *\tTriangulation ported from AS3\r\n *\t\tSimple Polygon Triangulation\r\n *\t\thttp://actionsnippet.com/?p=1462\r\n *\r\n * \tA Method to triangulate shapes with holes\r\n *\t\thttp://www.sakri.net/blog/2009/06/12/an-approach-to-triangulating-polygons-with-holes/\r\n *\r\n */\r\n\r\nTHREE.FontUtils = {\r\n\r\n\tfaces: {},\r\n\r\n\t// Just for now. face[weight][style]\r\n\r\n\tface: 'helvetiker',\r\n\tweight: 'normal',\r\n\tstyle: 'normal',\r\n\tsize: 150,\r\n\tdivisions: 10,\r\n\r\n\tgetFace: function () {\r\n\r\n\t\ttry {\r\n\r\n\t\t\treturn this.faces[ this.face.toLowerCase() ][ this.weight ][ this.style ];\r\n\r\n\t\t} catch ( e ) {\r\n\r\n\t\t\tthrow \"The font \" + this.face + \" with \" + this.weight + \" weight and \" + this.style + \" style is missing.\"\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tloadFace: function ( data ) {\r\n\r\n\t\tvar family = data.familyName.toLowerCase();\r\n\r\n\t\tvar ThreeFont = this;\r\n\r\n\t\tThreeFont.faces[ family ] = ThreeFont.faces[ family ] || {};\r\n\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ] = ThreeFont.faces[ family ][ data.cssFontWeight ] || {};\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\r\n\t\tThreeFont.faces[ family ][ data.cssFontWeight ][ data.cssFontStyle ] = data;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tdrawText: function ( text ) {\r\n\r\n\t\t// RenderText\r\n\r\n\t\tvar i,\r\n\t\t\tface = this.getFace(),\r\n\t\t\tscale = this.size / face.resolution,\r\n\t\t\toffset = 0,\r\n\t\t\tchars = String( text ).split( '' ),\r\n\t\t\tlength = chars.length;\r\n\r\n\t\tvar fontPaths = [];\r\n\r\n\t\tfor ( i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tvar path = new THREE.Path();\r\n\r\n\t\t\tvar ret = this.extractGlyphPoints( chars[ i ], face, scale, offset, path );\r\n\t\t\toffset += ret.offset;\r\n\r\n\t\t\tfontPaths.push( ret.path );\r\n\r\n\t\t}\r\n\r\n\t\t// get the width\r\n\r\n\t\tvar width = offset / 2;\r\n\t\t//\r\n\t\t// for ( p = 0; p < allPts.length; p++ ) {\r\n\t\t//\r\n\t\t// \tallPts[ p ].x -= width;\r\n\t\t//\r\n\t\t// }\r\n\r\n\t\t//var extract = this.extractPoints( allPts, characterPts );\r\n\t\t//extract.contour = allPts;\r\n\r\n\t\t//extract.paths = fontPaths;\r\n\t\t//extract.offset = width;\r\n\r\n\t\treturn { paths: fontPaths, offset: width };\r\n\r\n\t},\r\n\r\n\r\n\r\n\r\n\textractGlyphPoints: function ( c, face, scale, offset, path ) {\r\n\r\n\t\tvar pts = [];\r\n\r\n\t\tvar i, i2, divisions,\r\n\t\t\toutline, action, length,\r\n\t\t\tscaleX, scaleY,\r\n\t\t\tx, y, cpx, cpy, cpx0, cpy0, cpx1, cpy1, cpx2, cpy2,\r\n\t\t\tlaste,\r\n\t\t\tglyph = face.glyphs[ c ] || face.glyphs[ '?' ];\r\n\r\n\t\tif ( ! glyph ) return;\r\n\r\n\t\tif ( glyph.o ) {\r\n\r\n\t\t\toutline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\r\n\t\t\tlength = outline.length;\r\n\r\n\t\t\tscaleX = scale;\r\n\t\t\tscaleY = scale;\r\n\r\n\t\t\tfor ( i = 0; i < length; ) {\r\n\r\n\t\t\t\taction = outline[ i ++ ];\r\n\r\n\t\t\t\t//console.log( action );\r\n\r\n\t\t\t\tswitch ( action ) {\r\n\r\n\t\t\t\tcase 'm':\r\n\r\n\t\t\t\t\t// Move To\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\r\n\t\t\t\t\tpath.moveTo( x, y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'l':\r\n\r\n\t\t\t\t\t// Line To\r\n\r\n\t\t\t\t\tx = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\ty = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\tpath.lineTo( x, y );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'q':\r\n\r\n\t\t\t\t\t// QuadraticCurveTo\r\n\r\n\t\t\t\t\tcpx  = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\tcpy  = outline[ i ++ ] * scaleY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scaleX + offset;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scaleY;\r\n\r\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\r\n\r\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\tTHREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\t\t\t\tTHREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tcase 'b':\r\n\r\n\t\t\t\t\t// Cubic Bezier Curve\r\n\r\n\t\t\t\t\tcpx  = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy  = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\tcpx1 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy1 = outline[ i ++ ] *  scaleY;\r\n\t\t\t\t\tcpx2 = outline[ i ++ ] *  scaleX + offset;\r\n\t\t\t\t\tcpy2 = outline[ i ++ ] *  scaleY;\r\n\r\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\r\n\r\n\t\t\t\t\tlaste = pts[ pts.length - 1 ];\r\n\r\n\t\t\t\t\tif ( laste ) {\r\n\r\n\t\t\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t\t\t\tfor ( i2 = 1, divisions = this.divisions; i2 <= divisions; i2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tvar t = i2 / divisions;\r\n\t\t\t\t\t\t\tTHREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\t\t\t\tTHREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\treturn { offset: glyph.ha * scale, path: path };\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\nTHREE.FontUtils.generateShapes = function ( text, parameters ) {\r\n\r\n\t// Parameters\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar size = parameters.size !== undefined ? parameters.size : 100;\r\n\tvar curveSegments = parameters.curveSegments !== undefined ? parameters.curveSegments : 4;\r\n\r\n\tvar font = parameters.font !== undefined ? parameters.font : 'helvetiker';\r\n\tvar weight = parameters.weight !== undefined ? parameters.weight : 'normal';\r\n\tvar style = parameters.style !== undefined ? parameters.style : 'normal';\r\n\r\n\tTHREE.FontUtils.size = size;\r\n\tTHREE.FontUtils.divisions = curveSegments;\r\n\r\n\tTHREE.FontUtils.face = font;\r\n\tTHREE.FontUtils.weight = weight;\r\n\tTHREE.FontUtils.style = style;\r\n\r\n\t// Get a Font data json object\r\n\r\n\tvar data = THREE.FontUtils.drawText( text );\r\n\r\n\tvar paths = data.paths;\r\n\tvar shapes = [];\r\n\r\n\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\r\n\r\n\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\r\n\r\n\t}\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n\r\n/**\r\n * This code is a quick port of code written in C++ which was submitted to\r\n * flipcode.com by John W. Ratcliff  // July 22, 2000\r\n * See original code and more information here:\r\n * http://www.flipcode.com/archives/Efficient_Polygon_Triangulation.shtml\r\n *\r\n * ported to actionscript by Zevan Rosser\r\n * www.actionsnippet.com\r\n *\r\n * ported to javascript by Joshua Koo\r\n * http://www.lab4games.net/zz85/blog\r\n *\r\n */\r\n\r\n\r\n( function ( namespace ) {\r\n\r\n\tvar EPSILON = 0.0000000001;\r\n\r\n\t// takes in an contour array and returns\r\n\r\n\tvar process = function ( contour, indices ) {\r\n\r\n\t\tvar n = contour.length;\r\n\r\n\t\tif ( n < 3 ) return null;\r\n\r\n\t\tvar result = [],\r\n\t\t\tverts = [],\r\n\t\t\tvertIndices = [];\r\n\r\n\t\t/* we want a counter-clockwise polygon in verts */\r\n\r\n\t\tvar u, v, w;\r\n\r\n\t\tif ( area( contour ) > 0.0 ) {\r\n\r\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = v;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( v = 0; v < n; v ++ ) verts[ v ] = ( n - 1 ) - v;\r\n\r\n\t\t}\r\n\r\n\t\tvar nv = n;\r\n\r\n\t\t/*  remove nv - 2 vertices, creating 1 triangle every time */\r\n\r\n\t\tvar count = 2 * nv;   /* error detection */\r\n\r\n\t\tfor ( v = nv - 1; nv > 2; ) {\r\n\r\n\t\t\t/* if we loop, it is probably a non-simple polygon */\r\n\r\n\t\t\tif ( ( count -- ) <= 0 ) {\r\n\r\n\t\t\t\t//** Triangulate: ERROR - probable bad polygon!\r\n\r\n\t\t\t\t//throw ( \"Warning, unable to triangulate polygon!\" );\r\n\t\t\t\t//return null;\r\n\t\t\t\t// Sometimes warning is fine, especially polygons are triangulated in reverse.\r\n\t\t\t\tconsole.warn( 'THREE.FontUtils: Warning, unable to triangulate polygon! in Triangulate.process()' );\r\n\r\n\t\t\t\tif ( indices ) return vertIndices;\r\n\t\t\t\treturn result;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t/* three consecutive vertices in current polygon, <u,v,w> */\r\n\r\n\t\t\tu = v; \t \tif ( nv <= u ) u = 0;     /* previous */\r\n\t\t\tv = u + 1;  if ( nv <= v ) v = 0;     /* new v    */\r\n\t\t\tw = v + 1;  if ( nv <= w ) w = 0;     /* next     */\r\n\r\n\t\t\tif ( snip( contour, u, v, w, nv, verts ) ) {\r\n\r\n\t\t\t\tvar a, b, c, s, t;\r\n\r\n\t\t\t\t/* true names of the vertices */\r\n\r\n\t\t\t\ta = verts[ u ];\r\n\t\t\t\tb = verts[ v ];\r\n\t\t\t\tc = verts[ w ];\r\n\r\n\t\t\t\t/* output Triangle */\r\n\r\n\t\t\t\tresult.push( [ contour[ a ],\r\n\t\t\t\t\tcontour[ b ],\r\n\t\t\t\t\tcontour[ c ] ] );\r\n\r\n\r\n\t\t\t\tvertIndices.push( [ verts[ u ], verts[ v ], verts[ w ] ] );\r\n\r\n\t\t\t\t/* remove v from the remaining polygon */\r\n\r\n\t\t\t\tfor ( s = v, t = v + 1; t < nv; s ++, t ++ ) {\r\n\r\n\t\t\t\t\tverts[ s ] = verts[ t ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnv --;\r\n\r\n\t\t\t\t/* reset error detection counter */\r\n\r\n\t\t\t\tcount = 2 * nv;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( indices ) return vertIndices;\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\t// calculate area of the contour polygon\r\n\r\n\tvar area = function ( contour ) {\r\n\r\n\t\tvar n = contour.length;\r\n\t\tvar a = 0.0;\r\n\r\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\r\n\r\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\r\n\r\n\t\t}\r\n\r\n\t\treturn a * 0.5;\r\n\r\n\t};\r\n\r\n\tvar snip = function ( contour, u, v, w, n, verts ) {\r\n\r\n\t\tvar p;\r\n\t\tvar ax, ay, bx, by;\r\n\t\tvar cx, cy, px, py;\r\n\r\n\t\tax = contour[ verts[ u ] ].x;\r\n\t\tay = contour[ verts[ u ] ].y;\r\n\r\n\t\tbx = contour[ verts[ v ] ].x;\r\n\t\tby = contour[ verts[ v ] ].y;\r\n\r\n\t\tcx = contour[ verts[ w ] ].x;\r\n\t\tcy = contour[ verts[ w ] ].y;\r\n\r\n\t\tif ( EPSILON > ( ( ( bx - ax ) * ( cy - ay ) ) - ( ( by - ay ) * ( cx - ax ) ) ) ) return false;\r\n\r\n\t\tvar aX, aY, bX, bY, cX, cY;\r\n\t\tvar apx, apy, bpx, bpy, cpx, cpy;\r\n\t\tvar cCROSSap, bCROSScp, aCROSSbp;\r\n\r\n\t\taX = cx - bx;  aY = cy - by;\r\n\t\tbX = ax - cx;  bY = ay - cy;\r\n\t\tcX = bx - ax;  cY = by - ay;\r\n\r\n\t\tfor ( p = 0; p < n; p ++ ) {\r\n\r\n\t\t\tpx = contour[ verts[ p ] ].x;\r\n\t\t\tpy = contour[ verts[ p ] ].y;\r\n\r\n\t\t\tif ( ( ( px === ax ) && ( py === ay ) ) ||\r\n\t\t\t\t ( ( px === bx ) && ( py === by ) ) ||\r\n\t\t\t\t ( ( px === cx ) && ( py === cy ) ) )\tcontinue;\r\n\r\n\t\t\tapx = px - ax;  apy = py - ay;\r\n\t\t\tbpx = px - bx;  bpy = py - by;\r\n\t\t\tcpx = px - cx;  cpy = py - cy;\r\n\r\n\t\t\t// see if p is inside triangle abc\r\n\r\n\t\t\taCROSSbp = aX * bpy - aY * bpx;\r\n\t\t\tcCROSSap = cX * apy - cY * apx;\r\n\t\t\tbCROSScp = bX * cpy - bY * cpx;\r\n\r\n\t\t\tif ( ( aCROSSbp >= - EPSILON ) && ( bCROSScp >= - EPSILON ) && ( cCROSSap >= - EPSILON ) ) return false;\r\n\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\r\n\t};\r\n\r\n\r\n\tnamespace.Triangulate = process;\r\n\tnamespace.Triangulate.area = area;\r\n\r\n\treturn namespace;\r\n\r\n} )( THREE.FontUtils );\r\n\r\n// To use the typeface.js face files, hook up the API\r\n\r\nTHREE.typeface_js = { faces: THREE.FontUtils.faces, loadFace: THREE.FontUtils.loadFace };\r\nif ( typeof self !== 'undefined' ) self._typeface_js = THREE.typeface_js;\r\n\r\n// File:src/extras/audio/Audio.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.Audio = function ( listener ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'Audio';\r\n\r\n\tthis.context = listener.context;\r\n\tthis.source = this.context.createBufferSource();\r\n\tthis.source.onended = this.onEnded.bind( this );\r\n\r\n\tthis.gain = this.context.createGain();\r\n\tthis.gain.connect( this.context.destination );\r\n\r\n\tthis.panner = this.context.createPanner();\r\n\tthis.panner.connect( this.gain );\r\n\r\n\tthis.autoplay = false;\r\n\r\n\tthis.startTime = 0;\r\n\tthis.playbackRate = 1;\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.Audio.prototype.constructor = THREE.Audio;\r\n\r\nTHREE.Audio.prototype.load = function ( file ) {\r\n\r\n\tvar scope = this;\r\n\r\n\tvar request = new XMLHttpRequest();\r\n\trequest.open( 'GET', file, true );\r\n\trequest.responseType = 'arraybuffer';\r\n\trequest.onload = function ( e ) {\r\n\r\n\t\tscope.context.decodeAudioData( this.response, function ( buffer ) {\r\n\r\n\t\t\tscope.source.buffer = buffer;\r\n\r\n\t\t\tif ( scope.autoplay ) scope.play();\r\n\r\n\t\t} );\r\n\r\n\t};\r\n\trequest.send();\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.play = function () {\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tvar source = this.context.createBufferSource();\r\n\r\n\tsource.buffer = this.source.buffer;\r\n\tsource.loop = this.source.loop;\r\n\tsource.onended = this.source.onended;\r\n\tsource.start( 0, this.startTime );\r\n\tsource.playbackRate.value = this.playbackRate;\r\n\r\n\tthis.isPlaying = true;\r\n\r\n\tthis.source = source;\r\n\r\n\tthis.connect();\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.pause = function () {\r\n\r\n\tthis.source.stop();\r\n\tthis.startTime = this.context.currentTime;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.stop = function () {\r\n\r\n\tthis.source.stop();\r\n\tthis.startTime = 0;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.connect = function () {\r\n\r\n\tif ( this.filter !== undefined ) {\r\n\r\n\t\tthis.source.connect( this.filter );\r\n\t\tthis.filter.connect( this.panner );\r\n\r\n\t} else {\r\n\r\n\t\tthis.source.connect( this.panner );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.disconnect = function () {\r\n\r\n\tif ( this.filter !== undefined ) {\r\n\r\n\t\tthis.source.disconnect( this.filter );\r\n\t\tthis.filter.disconnect( this.panner );\r\n\r\n\t} else {\r\n\r\n\t\tthis.source.disconnect( this.panner );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setFilter = function ( value ) {\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tthis.disconnect();\r\n\t\tthis.filter = value;\r\n\t\tthis.connect();\r\n\r\n\t} else {\r\n\r\n\t\tthis.filter = value;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getFilter = function () {\r\n\r\n\treturn this.filter;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setPlaybackRate = function ( value ) {\r\n\r\n\tthis.playbackRate = value;\r\n\r\n\tif ( this.isPlaying === true ) {\r\n\r\n\t\tthis.source.playbackRate.value = this.playbackRate;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getPlaybackRate = function () {\r\n\r\n\treturn this.playbackRate;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.onEnded = function() {\r\n\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setLoop = function ( value ) {\r\n\r\n\tthis.source.loop = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getLoop = function () {\r\n\r\n\treturn this.source.loop;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setRefDistance = function ( value ) {\r\n\r\n\tthis.panner.refDistance = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getRefDistance = function () {\r\n\r\n\treturn this.panner.refDistance;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setRolloffFactor = function ( value ) {\r\n\r\n\tthis.panner.rolloffFactor = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getRolloffFactor = function () {\r\n\r\n\treturn this.panner.rolloffFactor;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.setVolume = function ( value ) {\r\n\r\n\tthis.gain.gain.value = value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.getVolume = function () {\r\n\r\n\treturn this.gain.gain.value;\r\n\r\n};\r\n\r\nTHREE.Audio.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\r\n\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tposition.setFromMatrixPosition( this.matrixWorld );\r\n\r\n\t\tthis.panner.setPosition( position.x, position.y, position.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/audio/AudioListener.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AudioListener = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.type = 'AudioListener';\r\n\r\n\tthis.context = new ( window.AudioContext || window.webkitAudioContext )();\r\n\r\n};\r\n\r\nTHREE.AudioListener.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.AudioListener.prototype.constructor = THREE.AudioListener;\r\n\r\nTHREE.AudioListener.prototype.updateMatrixWorld = ( function () {\r\n\r\n\tvar position = new THREE.Vector3();\r\n\tvar quaternion = new THREE.Quaternion();\r\n\tvar scale = new THREE.Vector3();\r\n\r\n\tvar orientation = new THREE.Vector3();\r\n\r\n\treturn function updateMatrixWorld( force ) {\r\n\r\n\t\tTHREE.Object3D.prototype.updateMatrixWorld.call( this, force );\r\n\r\n\t\tvar listener = this.context.listener;\r\n\t\tvar up = this.up;\r\n\r\n\t\tthis.matrixWorld.decompose( position, quaternion, scale );\r\n\r\n\t\torientation.set( 0, 0, - 1 ).applyQuaternion( quaternion );\r\n\r\n\t\tlistener.setPosition( position.x, position.y, position.z );\r\n\t\tlistener.setOrientation( orientation.x, orientation.y, orientation.z, up.x, up.y, up.z );\r\n\r\n\t};\r\n\r\n} )();\r\n\r\n// File:src/extras/core/Curve.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Extensible curve object\r\n *\r\n * Some common of Curve methods\r\n * .getPoint(t), getTangent(t)\r\n * .getPointAt(u), getTagentAt(u)\r\n * .getPoints(), .getSpacedPoints()\r\n * .getLength()\r\n * .updateArcLengths()\r\n *\r\n * This following classes subclasses THREE.Curve:\r\n *\r\n * -- 2d classes --\r\n * THREE.LineCurve\r\n * THREE.QuadraticBezierCurve\r\n * THREE.CubicBezierCurve\r\n * THREE.SplineCurve\r\n * THREE.ArcCurve\r\n * THREE.EllipseCurve\r\n *\r\n * -- 3d classes --\r\n * THREE.LineCurve3\r\n * THREE.QuadraticBezierCurve3\r\n * THREE.CubicBezierCurve3\r\n * THREE.SplineCurve3\r\n * THREE.ClosedSplineCurve3\r\n *\r\n * A series of curves can be represented as a THREE.CurvePath\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tAbstract Curve base class\r\n **************************************************************/\r\n\r\nTHREE.Curve = function () {\r\n\r\n};\r\n\r\n// Virtual base class method to overwrite and implement in subclasses\r\n//\t- t [0 .. 1]\r\n\r\nTHREE.Curve.prototype.getPoint = function ( t ) {\r\n\r\n\tconsole.warn( \"THREE.Curve: Warning, getPoint() not implemented!\" );\r\n\treturn null;\r\n\r\n};\r\n\r\n// Get point at relative position in curve according to arc length\r\n// - u [0 .. 1]\r\n\r\nTHREE.Curve.prototype.getPointAt = function ( u ) {\r\n\r\n\tvar t = this.getUtoTmapping( u );\r\n\treturn this.getPoint( t );\r\n\r\n};\r\n\r\n// Get sequence of points using getPoint( t )\r\n\r\nTHREE.Curve.prototype.getPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 5;\r\n\r\n\tvar d, pts = [];\r\n\r\n\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\tpts.push( this.getPoint( d / divisions ) );\r\n\r\n\t}\r\n\r\n\treturn pts;\r\n\r\n};\r\n\r\n// Get sequence of points using getPointAt( u )\r\n\r\nTHREE.Curve.prototype.getSpacedPoints = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = 5;\r\n\r\n\tvar d, pts = [];\r\n\r\n\tfor ( d = 0; d <= divisions; d ++ ) {\r\n\r\n\t\tpts.push( this.getPointAt( d / divisions ) );\r\n\r\n\t}\r\n\r\n\treturn pts;\r\n\r\n};\r\n\r\n// Get total curve arc length\r\n\r\nTHREE.Curve.prototype.getLength = function () {\r\n\r\n\tvar lengths = this.getLengths();\r\n\treturn lengths[ lengths.length - 1 ];\r\n\r\n};\r\n\r\n// Get list of cumulative segment lengths\r\n\r\nTHREE.Curve.prototype.getLengths = function ( divisions ) {\r\n\r\n\tif ( ! divisions ) divisions = ( this.__arcLengthDivisions ) ? ( this.__arcLengthDivisions ) : 200;\r\n\r\n\tif ( this.cacheArcLengths\r\n\t\t&& ( this.cacheArcLengths.length === divisions + 1 )\r\n\t\t&& ! this.needsUpdate ) {\r\n\r\n\t\t//console.log( \"cached\", this.cacheArcLengths );\r\n\t\treturn this.cacheArcLengths;\r\n\r\n\t}\r\n\r\n\tthis.needsUpdate = false;\r\n\r\n\tvar cache = [];\r\n\tvar current, last = this.getPoint( 0 );\r\n\tvar p, sum = 0;\r\n\r\n\tcache.push( 0 );\r\n\r\n\tfor ( p = 1; p <= divisions; p ++ ) {\r\n\r\n\t\tcurrent = this.getPoint ( p / divisions );\r\n\t\tsum += current.distanceTo( last );\r\n\t\tcache.push( sum );\r\n\t\tlast = current;\r\n\r\n\t}\r\n\r\n\tthis.cacheArcLengths = cache;\r\n\r\n\treturn cache; // { sums: cache, sum:sum }; Sum is in the last element.\r\n\r\n};\r\n\r\n\r\nTHREE.Curve.prototype.updateArcLengths = function() {\r\n\r\n\tthis.needsUpdate = true;\r\n\tthis.getLengths();\r\n\r\n};\r\n\r\n// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\r\n\r\nTHREE.Curve.prototype.getUtoTmapping = function ( u, distance ) {\r\n\r\n\tvar arcLengths = this.getLengths();\r\n\r\n\tvar i = 0, il = arcLengths.length;\r\n\r\n\tvar targetArcLength; // The targeted u distance value to get\r\n\r\n\tif ( distance ) {\r\n\r\n\t\ttargetArcLength = distance;\r\n\r\n\t} else {\r\n\r\n\t\ttargetArcLength = u * arcLengths[ il - 1 ];\r\n\r\n\t}\r\n\r\n\t//var time = Date.now();\r\n\r\n\t// binary search for the index with largest value smaller than target u distance\r\n\r\n\tvar low = 0, high = il - 1, comparison;\r\n\r\n\twhile ( low <= high ) {\r\n\r\n\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\r\n\r\n\t\tcomparison = arcLengths[ i ] - targetArcLength;\r\n\r\n\t\tif ( comparison < 0 ) {\r\n\r\n\t\t\tlow = i + 1;\r\n\r\n\t\t} else if ( comparison > 0 ) {\r\n\r\n\t\t\thigh = i - 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\thigh = i;\r\n\t\t\tbreak;\r\n\r\n\t\t\t// DONE\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\ti = high;\r\n\r\n\t//console.log('b' , i, low, high, Date.now()- time);\r\n\r\n\tif ( arcLengths[ i ] === targetArcLength ) {\r\n\r\n\t\tvar t = i / ( il - 1 );\r\n\t\treturn t;\r\n\r\n\t}\r\n\r\n\t// we could get finer grain at lengths, or use simple interpolation between two points\r\n\r\n\tvar lengthBefore = arcLengths[ i ];\r\n\tvar lengthAfter = arcLengths[ i + 1 ];\r\n\r\n\tvar segmentLength = lengthAfter - lengthBefore;\r\n\r\n\t// determine where we are between the 'before' and 'after' points\r\n\r\n\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\r\n\r\n\t// add that fractional amount to t\r\n\r\n\tvar t = ( i + segmentFraction ) / ( il - 1 );\r\n\r\n\treturn t;\r\n\r\n};\r\n\r\n// Returns a unit vector tangent at t\r\n// In case any sub curve does not implement its tangent derivation,\r\n// 2 points a small delta apart will be used to find its gradient\r\n// which seems to give a reasonable approximation\r\n\r\nTHREE.Curve.prototype.getTangent = function( t ) {\r\n\r\n\tvar delta = 0.0001;\r\n\tvar t1 = t - delta;\r\n\tvar t2 = t + delta;\r\n\r\n\t// Capping in case of danger\r\n\r\n\tif ( t1 < 0 ) t1 = 0;\r\n\tif ( t2 > 1 ) t2 = 1;\r\n\r\n\tvar pt1 = this.getPoint( t1 );\r\n\tvar pt2 = this.getPoint( t2 );\r\n\r\n\tvar vec = pt2.clone().sub( pt1 );\r\n\treturn vec.normalize();\r\n\r\n};\r\n\r\n\r\nTHREE.Curve.prototype.getTangentAt = function ( u ) {\r\n\r\n\tvar t = this.getUtoTmapping( u );\r\n\treturn this.getTangent( t );\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n/**************************************************************\r\n *\tUtils\r\n **************************************************************/\r\n\r\nTHREE.Curve.Utils = {\r\n\r\n\ttangentQuadraticBezier: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * ( p1 - p0 ) + 2 * t * ( p2 - p1 );\r\n\r\n\t},\r\n\r\n\t// Puay Bing, thanks for helping with this derivative!\r\n\r\n\ttangentCubicBezier: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn - 3 * p0 * ( 1 - t ) * ( 1 - t )  +\r\n\t\t\t3 * p1 * ( 1 - t ) * ( 1 - t ) - 6 * t * p1 * ( 1 - t ) +\r\n\t\t\t6 * t *  p2 * ( 1 - t ) - 3 * t * t * p2 +\r\n\t\t\t3 * t * t * p3;\r\n\r\n\t},\r\n\r\n\ttangentSpline: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\t// To check if my formulas are correct\r\n\r\n\t\tvar h00 = 6 * t * t - 6 * t; \t// derived from 2t^3  3t^2 + 1\r\n\t\tvar h10 = 3 * t * t - 4 * t + 1; // t^3  2t^2 + t\r\n\t\tvar h01 = - 6 * t * t + 6 * t; \t//  2t3 + 3t2\r\n\t\tvar h11 = 3 * t * t - 2 * t;\t// t3  t2\r\n\r\n\t\treturn h00 + h10 + h01 + h11;\r\n\r\n\t},\r\n\r\n\t// Catmull-Rom\r\n\r\n\tinterpolate: function( p0, p1, p2, p3, t ) {\r\n\r\n\t\tvar v0 = ( p2 - p0 ) * 0.5;\r\n\t\tvar v1 = ( p3 - p1 ) * 0.5;\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t * t2;\r\n\t\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// TODO: Transformation for Curves?\r\n\r\n/**************************************************************\r\n *\t3D Curves\r\n **************************************************************/\r\n\r\n// A Factory method for creating new curve subclasses\r\n\r\nTHREE.Curve.create = function ( constructor, getPointFunc ) {\r\n\r\n\tconstructor.prototype = Object.create( THREE.Curve.prototype );\r\n\tconstructor.prototype.constructor = constructor;\r\n\tconstructor.prototype.getPoint = getPointFunc;\r\n\r\n\treturn constructor;\r\n\r\n};\r\n\r\n// File:src/extras/core/CurvePath.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n **/\r\n\r\n/**************************************************************\r\n *\tCurved Path - a curve path is simply a array of connected\r\n *  curves, but retains the api of a curve\r\n **************************************************************/\r\n\r\nTHREE.CurvePath = function () {\r\n\r\n\tthis.curves = [];\r\n\tthis.bends = [];\r\n\r\n\tthis.autoClose = false; // Automatically closes the path\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CurvePath.prototype.constructor = THREE.CurvePath;\r\n\r\nTHREE.CurvePath.prototype.add = function ( curve ) {\r\n\r\n\tthis.curves.push( curve );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.checkConnection = function() {\r\n\t// TODO\r\n\t// If the ending of curve is not connected to the starting\r\n\t// or the next curve, then, this is not a real path\r\n};\r\n\r\nTHREE.CurvePath.prototype.closePath = function() {\r\n\r\n\t// TODO Test\r\n\t// and verify for vector3 (needs to implement equals)\r\n\t// Add a line curve if start and end of lines are not connected\r\n\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\r\n\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\r\n\r\n\tif ( ! startPoint.equals( endPoint ) ) {\r\n\r\n\t\tthis.curves.push( new THREE.LineCurve( endPoint, startPoint ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// To get accurate point with reference to\r\n// entire path distance at time t,\r\n// following has to be done:\r\n\r\n// 1. Length of each sub path have to be known\r\n// 2. Locate and identify type of curve\r\n// 3. Get t for the curve\r\n// 4. Return curve.getPointAt(t')\r\n\r\nTHREE.CurvePath.prototype.getPoint = function( t ) {\r\n\r\n\tvar d = t * this.getLength();\r\n\tvar curveLengths = this.getCurveLengths();\r\n\tvar i = 0, diff, curve;\r\n\r\n\t// To think about boundaries points.\r\n\r\n\twhile ( i < curveLengths.length ) {\r\n\r\n\t\tif ( curveLengths[ i ] >= d ) {\r\n\r\n\t\t\tdiff = curveLengths[ i ] - d;\r\n\t\t\tcurve = this.curves[ i ];\r\n\r\n\t\t\tvar u = 1 - diff / curve.getLength();\r\n\r\n\t\t\treturn curve.getPointAt( u );\r\n\r\n\t\t}\r\n\r\n\t\ti ++;\r\n\r\n\t}\r\n\r\n\treturn null;\r\n\r\n\t// loop where sum != 0, sum > d , sum+1 <d\r\n\r\n};\r\n\r\n/*\r\nTHREE.CurvePath.prototype.getTangent = function( t ) {\r\n};*/\r\n\r\n\r\n// We cannot use the default THREE.Curve getPoint() with getLength() because in\r\n// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\r\n// getPoint() depends on getLength\r\n\r\nTHREE.CurvePath.prototype.getLength = function() {\r\n\r\n\tvar lens = this.getCurveLengths();\r\n\treturn lens[ lens.length - 1 ];\r\n\r\n};\r\n\r\n// Compute lengths and cache them\r\n// We cannot overwrite getLengths() because UtoT mapping uses it.\r\n\r\nTHREE.CurvePath.prototype.getCurveLengths = function() {\r\n\r\n\t// We use cache values if curves and cache array are same length\r\n\r\n\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\r\n\r\n\t\treturn this.cacheLengths;\r\n\r\n\t}\r\n\r\n\t// Get length of sub-curve\r\n\t// Push sums into cached array\r\n\r\n\tvar lengths = [], sums = 0;\r\n\tvar i, il = this.curves.length;\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tsums += this.curves[ i ].getLength();\r\n\t\tlengths.push( sums );\r\n\r\n\t}\r\n\r\n\tthis.cacheLengths = lengths;\r\n\r\n\treturn lengths;\r\n\r\n};\r\n\r\n\r\n\r\n// Returns min and max coordinates\r\n\r\nTHREE.CurvePath.prototype.getBoundingBox = function () {\r\n\r\n\tvar points = this.getPoints();\r\n\r\n\tvar maxX, maxY, maxZ;\r\n\tvar minX, minY, minZ;\r\n\r\n\tmaxX = maxY = Number.NEGATIVE_INFINITY;\r\n\tminX = minY = Number.POSITIVE_INFINITY;\r\n\r\n\tvar p, i, il, sum;\r\n\r\n\tvar v3 = points[ 0 ] instanceof THREE.Vector3;\r\n\r\n\tsum = v3 ? new THREE.Vector3() : new THREE.Vector2();\r\n\r\n\tfor ( i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\tp = points[ i ];\r\n\r\n\t\tif ( p.x > maxX ) maxX = p.x;\r\n\t\telse if ( p.x < minX ) minX = p.x;\r\n\r\n\t\tif ( p.y > maxY ) maxY = p.y;\r\n\t\telse if ( p.y < minY ) minY = p.y;\r\n\r\n\t\tif ( v3 ) {\r\n\r\n\t\t\tif ( p.z > maxZ ) maxZ = p.z;\r\n\t\t\telse if ( p.z < minZ ) minZ = p.z;\r\n\r\n\t\t}\r\n\r\n\t\tsum.add( p );\r\n\r\n\t}\r\n\r\n\tvar ret = {\r\n\r\n\t\tminX: minX,\r\n\t\tminY: minY,\r\n\t\tmaxX: maxX,\r\n\t\tmaxY: maxY\r\n\r\n\t};\r\n\r\n\tif ( v3 ) {\r\n\r\n\t\tret.maxZ = maxZ;\r\n\t\tret.minZ = minZ;\r\n\r\n\t}\r\n\r\n\treturn ret;\r\n\r\n};\r\n\r\n/**************************************************************\r\n *\tCreate Geometries Helpers\r\n **************************************************************/\r\n\r\n/// Generate geometry from path points (for Line or Points objects)\r\n\r\nTHREE.CurvePath.prototype.createPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getPoints( divisions, true );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\n// Generate geometry from equidistant sampling along the path\r\n\r\nTHREE.CurvePath.prototype.createSpacedPointsGeometry = function( divisions ) {\r\n\r\n\tvar pts = this.getSpacedPoints( divisions, true );\r\n\treturn this.createGeometry( pts );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.createGeometry = function( points ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < points.length; i ++ ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3( points[ i ].x, points[ i ].y, points[ i ].z || 0 ) );\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n\r\n/**************************************************************\r\n *\tBend / Wrap Helper Methods\r\n **************************************************************/\r\n\r\n// Wrap path / Bend modifiers?\r\n\r\nTHREE.CurvePath.prototype.addWrapPath = function ( bendpath ) {\r\n\r\n\tthis.bends.push( bendpath );\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.getTransformedPoints = function( segments, bends ) {\r\n\r\n\tvar oldPts = this.getPoints( segments ); // getPoints getSpacedPoints\r\n\tvar i, il;\r\n\r\n\tif ( ! bends ) {\r\n\r\n\t\tbends = this.bends;\r\n\r\n\t}\r\n\r\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\r\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\nTHREE.CurvePath.prototype.getTransformedSpacedPoints = function( segments, bends ) {\r\n\r\n\tvar oldPts = this.getSpacedPoints( segments );\r\n\r\n\tvar i, il;\r\n\r\n\tif ( ! bends ) {\r\n\r\n\t\tbends = this.bends;\r\n\r\n\t}\r\n\r\n\tfor ( i = 0, il = bends.length; i < il; i ++ ) {\r\n\r\n\t\toldPts = this.getWrapPoints( oldPts, bends[ i ] );\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\n// This returns getPoints() bend/wrapped around the contour of a path.\r\n// Read http://www.planetclegg.com/projects/WarpingTextToSplines.html\r\n\r\nTHREE.CurvePath.prototype.getWrapPoints = function ( oldPts, path ) {\r\n\r\n\tvar bounds = this.getBoundingBox();\r\n\r\n\tvar i, il, p, oldX, oldY, xNorm;\r\n\r\n\tfor ( i = 0, il = oldPts.length; i < il; i ++ ) {\r\n\r\n\t\tp = oldPts[ i ];\r\n\r\n\t\toldX = p.x;\r\n\t\toldY = p.y;\r\n\r\n\t\txNorm = oldX / bounds.maxX;\r\n\r\n\t\t// If using actual distance, for length > path, requires line extrusions\r\n\t\t//xNorm = path.getUtoTmapping(xNorm, oldX); // 3 styles. 1) wrap stretched. 2) wrap stretch by arc length 3) warp by actual distance\r\n\r\n\t\txNorm = path.getUtoTmapping( xNorm, oldX );\r\n\r\n\t\t// check for out of bounds?\r\n\r\n\t\tvar pathPt = path.getPoint( xNorm );\r\n\t\tvar normal = path.getTangent( xNorm );\r\n\t\tnormal.set( - normal.y, normal.x ).multiplyScalar( oldY );\r\n\r\n\t\tp.x = pathPt.x + normal.x;\r\n\t\tp.y = pathPt.y + normal.y;\r\n\r\n\t}\r\n\r\n\treturn oldPts;\r\n\r\n};\r\n\r\n// File:src/extras/core/Path.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Creates free form 2d path using series of points, lines or curves.\r\n *\r\n **/\r\n\r\nTHREE.Path = function ( points ) {\r\n\r\n\tTHREE.CurvePath.call( this );\r\n\r\n\tthis.actions = [];\r\n\r\n\tif ( points ) {\r\n\r\n\t\tthis.fromPoints( points );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.Path.prototype = Object.create( THREE.CurvePath.prototype );\r\nTHREE.Path.prototype.constructor = THREE.Path;\r\n\r\nTHREE.PathActions = {\r\n\r\n\tMOVE_TO: 'moveTo',\r\n\tLINE_TO: 'lineTo',\r\n\tQUADRATIC_CURVE_TO: 'quadraticCurveTo', // Bezier quadratic curve\r\n\tBEZIER_CURVE_TO: 'bezierCurveTo', \t\t// Bezier cubic curve\r\n\tCSPLINE_THRU: 'splineThru',\t\t\t\t// Catmull-Rom spline\r\n\tARC: 'arc',\t\t\t\t\t\t\t\t// Circle\r\n\tELLIPSE: 'ellipse'\r\n};\r\n\r\n// TODO Clean up PATH API\r\n\r\n// Create path using straight lines to connect all points\r\n// - vectors: array of Vector2\r\n\r\nTHREE.Path.prototype.fromPoints = function ( vectors ) {\r\n\r\n\tthis.moveTo( vectors[ 0 ].x, vectors[ 0 ].y );\r\n\r\n\tfor ( var v = 1, vlen = vectors.length; v < vlen; v ++ ) {\r\n\r\n\t\tthis.lineTo( vectors[ v ].x, vectors[ v ].y );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// startPath() endPath()?\r\n\r\nTHREE.Path.prototype.moveTo = function ( x, y ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tthis.actions.push( { action: THREE.PathActions.MOVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.lineTo = function ( x, y ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.LineCurve( new THREE.Vector2( x0, y0 ), new THREE.Vector2( x, y ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.LINE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.quadraticCurveTo = function( aCPx, aCPy, aX, aY ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.QuadraticBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCPx, aCPy ),\r\n\t\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.QUADRATIC_CURVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.bezierCurveTo = function( aCP1x, aCP1y,\r\n\t\t\t\t\t\t\t\t\t\t\t   aCP2x, aCP2y,\r\n\t\t\t\t\t\t\t\t\t\t\t   aX, aY ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tvar curve = new THREE.CubicBezierCurve( new THREE.Vector2( x0, y0 ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP1x, aCP1y ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aCP2x, aCP2y ),\r\n\t\t\t\t\t\t\t\t\t\t\tnew THREE.Vector2( aX, aY ) );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.BEZIER_CURVE_TO, args: args } );\r\n\r\n};\r\n\r\nTHREE.Path.prototype.splineThru = function( pts /*Array of Vector*/ ) {\r\n\r\n\tvar args = Array.prototype.slice.call( arguments );\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\t//---\r\n\tvar npts = [ new THREE.Vector2( x0, y0 ) ];\r\n\tArray.prototype.push.apply( npts, pts );\r\n\r\n\tvar curve = new THREE.SplineCurve( npts );\r\n\tthis.curves.push( curve );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.CSPLINE_THRU, args: args } );\r\n\r\n};\r\n\r\n// FUTURE: Change the API or follow canvas API?\r\n\r\nTHREE.Path.prototype.arc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absarc( aX + x0, aY + y0, aRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\n THREE.Path.prototype.absarc = function ( aX, aY, aRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.ellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tvar lastargs = this.actions[ this.actions.length - 1 ].args;\r\n\tvar x0 = lastargs[ lastargs.length - 2 ];\r\n\tvar y0 = lastargs[ lastargs.length - 1 ];\r\n\r\n\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius,\r\n\t\taStartAngle, aEndAngle, aClockwise, aRotation );\r\n\r\n };\r\n\r\n\r\nTHREE.Path.prototype.absellipse = function ( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\t  aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tvar args = [\r\n\t\taX, aY,\r\n\t\txRadius, yRadius,\r\n\t\taStartAngle, aEndAngle,\r\n\t\taClockwise,\r\n\t\taRotation || 0 // aRotation is optional.\r\n\t];\r\n\tvar curve = new THREE.EllipseCurve( aX, aY, xRadius, yRadius,\r\n\t\t\t\t\t\t\t\t\taStartAngle, aEndAngle, aClockwise, aRotation );\r\n\tthis.curves.push( curve );\r\n\r\n\tvar lastPoint = curve.getPoint( 1 );\r\n\targs.push( lastPoint.x );\r\n\targs.push( lastPoint.y );\r\n\r\n\tthis.actions.push( { action: THREE.PathActions.ELLIPSE, args: args } );\r\n\r\n };\r\n\r\nTHREE.Path.prototype.getSpacedPoints = function ( divisions, closedPath ) {\r\n\r\n\tif ( ! divisions ) divisions = 40;\r\n\r\n\tvar points = [];\r\n\r\n\tfor ( var i = 0; i < divisions; i ++ ) {\r\n\r\n\t\tpoints.push( this.getPoint( i / divisions ) );\r\n\r\n\t\t//if( !this.getPoint( i / divisions ) ) throw \"DIE\";\r\n\r\n\t}\r\n\r\n\t// if ( closedPath ) {\r\n\t//\r\n\t// \tpoints.push( points[ 0 ] );\r\n\t//\r\n\t// }\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n/* Return an array of vectors based on contour of the path */\r\n\r\nTHREE.Path.prototype.getPoints = function( divisions, closedPath ) {\r\n\r\n\tif ( this.useSpacedPoints ) {\r\n\r\n\t\treturn this.getSpacedPoints( divisions, closedPath );\r\n\r\n\t}\r\n\r\n\tdivisions = divisions || 12;\r\n\r\n\tvar points = [];\r\n\r\n\tvar i, il, item, action, args;\r\n\tvar cpx, cpy, cpx2, cpy2, cpx1, cpy1, cpx0, cpy0,\r\n\t\tlaste, j,\r\n\t\tt, tx, ty;\r\n\r\n\tfor ( i = 0, il = this.actions.length; i < il; i ++ ) {\r\n\r\n\t\titem = this.actions[ i ];\r\n\r\n\t\taction = item.action;\r\n\t\targs = item.args;\r\n\r\n\t\tswitch ( action ) {\r\n\r\n\t\tcase THREE.PathActions.MOVE_TO:\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.LINE_TO:\r\n\r\n\t\t\tpoints.push( new THREE.Vector2( args[ 0 ], args[ 1 ] ) );\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.QUADRATIC_CURVE_TO:\r\n\r\n\t\t\tcpx  = args[ 2 ];\r\n\t\t\tcpy  = args[ 3 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / divisions;\r\n\r\n\t\t\t\ttx = THREE.Shape.Utils.b2( t, cpx0, cpx1, cpx );\r\n\t\t\t\tty = THREE.Shape.Utils.b2( t, cpy0, cpy1, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.BEZIER_CURVE_TO:\r\n\r\n\t\t\tcpx  = args[ 4 ];\r\n\t\t\tcpy  = args[ 5 ];\r\n\r\n\t\t\tcpx1 = args[ 0 ];\r\n\t\t\tcpy1 = args[ 1 ];\r\n\r\n\t\t\tcpx2 = args[ 2 ];\r\n\t\t\tcpy2 = args[ 3 ];\r\n\r\n\t\t\tif ( points.length > 0 ) {\r\n\r\n\t\t\t\tlaste = points[ points.length - 1 ];\r\n\r\n\t\t\t\tcpx0 = laste.x;\r\n\t\t\t\tcpy0 = laste.y;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\t\tcpx0 = laste[ laste.length - 2 ];\r\n\t\t\t\tcpy0 = laste[ laste.length - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\tfor ( j = 1; j <= divisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / divisions;\r\n\r\n\t\t\t\ttx = THREE.Shape.Utils.b3( t, cpx0, cpx1, cpx2, cpx );\r\n\t\t\t\tty = THREE.Shape.Utils.b3( t, cpy0, cpy1, cpy2, cpy );\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.CSPLINE_THRU:\r\n\r\n\t\t\tlaste = this.actions[ i - 1 ].args;\r\n\r\n\t\t\tvar last = new THREE.Vector2( laste[ laste.length - 2 ], laste[ laste.length - 1 ] );\r\n\t\t\tvar spts = [ last ];\r\n\r\n\t\t\tvar n = divisions * args[ 0 ].length;\r\n\r\n\t\t\tspts = spts.concat( args[ 0 ] );\r\n\r\n\t\t\tvar spline = new THREE.SplineCurve( spts );\r\n\r\n\t\t\tfor ( j = 1; j <= n; j ++ ) {\r\n\r\n\t\t\t\tpoints.push( spline.getPointAt( j / n ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.ARC:\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\taRadius = args[ 2 ],\r\n\t\t\t\taStartAngle = args[ 3 ], aEndAngle = args[ 4 ],\r\n\t\t\t\taClockwise = !! args[ 5 ];\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + aRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + aRadius * Math.sin( angle );\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\tcase THREE.PathActions.ELLIPSE:\r\n\r\n\t\t\tvar aX = args[ 0 ], aY = args[ 1 ],\r\n\t\t\t\txRadius = args[ 2 ],\r\n\t\t\t\tyRadius = args[ 3 ],\r\n\t\t\t\taStartAngle = args[ 4 ], aEndAngle = args[ 5 ],\r\n\t\t\t\taClockwise = !! args[ 6 ],\r\n\t\t\t\taRotation = args[ 7 ];\r\n\r\n\r\n\t\t\tvar deltaAngle = aEndAngle - aStartAngle;\r\n\t\t\tvar angle;\r\n\t\t\tvar tdivisions = divisions * 2;\r\n\r\n\t\t\tvar cos, sin;\r\n\t\t\tif ( aRotation !== 0 ) {\r\n\t\t\r\n\t\t\t\tcos = Math.cos( aRotation );\r\n\t\t\t\tsin = Math.sin( aRotation );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( j = 1; j <= tdivisions; j ++ ) {\r\n\r\n\t\t\t\tt = j / tdivisions;\r\n\r\n\t\t\t\tif ( ! aClockwise ) {\r\n\r\n\t\t\t\t\tt = 1 - t;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tangle = aStartAngle + t * deltaAngle;\r\n\r\n\t\t\t\ttx = aX + xRadius * Math.cos( angle );\r\n\t\t\t\tty = aY + yRadius * Math.sin( angle );\r\n\r\n\t\t\t\tif ( aRotation !== 0 ) {\r\n\r\n\t\t\t\t\tvar x = tx, y = ty;\r\n\r\n\t\t\t\t\t// Rotate the point about the center of the ellipse.\r\n\t\t\t\t\ttx = ( x - aX ) * cos - ( y - aY ) * sin + aX;\r\n\t\t\t\t\tty = ( x - aX ) * sin + ( y - aY ) * cos + aY;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//console.log('t', t, 'angle', angle, 'tx', tx, 'ty', ty);\r\n\r\n\t\t\t\tpoints.push( new THREE.Vector2( tx, ty ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t//console.log(points);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t} // end switch\r\n\r\n\t}\r\n\r\n\r\n\r\n\t// Normalize to remove the closing point by default.\r\n\tvar lastPoint = points[ points.length - 1 ];\r\n\tvar EPSILON = 0.0000000001;\r\n\tif ( Math.abs( lastPoint.x - points[ 0 ].x ) < EPSILON &&\r\n\t\t\t Math.abs( lastPoint.y - points[ 0 ].y ) < EPSILON )\r\n\t\tpoints.splice( points.length - 1, 1 );\r\n\tif ( closedPath ) {\r\n\r\n\t\tpoints.push( points[ 0 ] );\r\n\r\n\t}\r\n\r\n\treturn points;\r\n\r\n};\r\n\r\n//\r\n// Breaks path into shapes\r\n//\r\n//\tAssumptions (if parameter isCCW==true the opposite holds):\r\n//\t- solid shapes are defined clockwise (CW)\r\n//\t- holes are defined counterclockwise (CCW)\r\n//\r\n//\tIf parameter noHoles==true:\r\n//  - all subPaths are regarded as solid shapes\r\n//  - definition order CW/CCW has no relevance\r\n//\r\n\r\nTHREE.Path.prototype.toShapes = function( isCCW, noHoles ) {\r\n\r\n\tfunction extractSubpaths( inActions ) {\r\n\r\n\t\tvar i, il, item, action, args;\r\n\r\n\t\tvar subPaths = [], lastPath = new THREE.Path();\r\n\r\n\t\tfor ( i = 0, il = inActions.length; i < il; i ++ ) {\r\n\r\n\t\t\titem = inActions[ i ];\r\n\r\n\t\t\targs = item.args;\r\n\t\t\taction = item.action;\r\n\r\n\t\t\tif ( action === THREE.PathActions.MOVE_TO ) {\r\n\r\n\t\t\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\t\t\tsubPaths.push( lastPath );\r\n\t\t\t\t\tlastPath = new THREE.Path();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlastPath[ action ].apply( lastPath, args );\r\n\r\n\t\t}\r\n\r\n\t\tif ( lastPath.actions.length !== 0 ) {\r\n\r\n\t\t\tsubPaths.push( lastPath );\r\n\r\n\t\t}\r\n\r\n\t\t// console.log(subPaths);\r\n\r\n\t\treturn\tsubPaths;\r\n\r\n\t}\r\n\r\n\tfunction toShapesNoHoles( inSubpaths ) {\r\n\r\n\t\tvar shapes = [];\r\n\r\n\t\tfor ( var i = 0, il = inSubpaths.length; i < il; i ++ ) {\r\n\r\n\t\t\tvar tmpPath = inSubpaths[ i ];\r\n\r\n\t\t\tvar tmpShape = new THREE.Shape();\r\n\t\t\ttmpShape.actions = tmpPath.actions;\r\n\t\t\ttmpShape.curves = tmpPath.curves;\r\n\r\n\t\t\tshapes.push( tmpShape );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log(\"shape\", shapes);\r\n\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tfunction isPointInsidePolygon( inPt, inPolygon ) {\r\n\r\n\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\tvar polyLen = inPolygon.length;\r\n\r\n\t\t// inPt on polygon contour => immediate success    or\r\n\t\t// toggling of inside/outside at every single! intersection point of an edge\r\n\t\t//  with the horizontal line through inPt, left of inPt\r\n\t\t//  not counting lowerY endpoints of edges and whole edges on that line\r\n\t\tvar inside = false;\r\n\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\r\n\r\n\t\t\tvar edgeLowPt  = inPolygon[ p ];\r\n\t\t\tvar edgeHighPt = inPolygon[ q ];\r\n\r\n\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\r\n\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\r\n\r\n\t\t\tif ( Math.abs( edgeDy ) > EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\t\t\t\tif ( edgeDy < 0 ) {\r\n\r\n\t\t\t\t\tedgeLowPt  = inPolygon[ q ]; edgeDx = - edgeDx;\r\n\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\r\n\r\n\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\r\n\r\n\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\r\n\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\r\n\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\r\n\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\r\n\t\t\t\t// edge lies on the same horizontal line as inPt\r\n\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\r\n\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\r\n\t\t\t\t// continue;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tinside;\r\n\r\n\t}\r\n\r\n\r\n\tvar subPaths = extractSubpaths( this.actions );\r\n\tif ( subPaths.length === 0 ) return [];\r\n\r\n\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tvar solid, tmpPath, tmpShape, shapes = [];\r\n\r\n\tif ( subPaths.length === 1 ) {\r\n\r\n\t\ttmpPath = subPaths[ 0 ];\r\n\t\ttmpShape = new THREE.Shape();\r\n\t\ttmpShape.actions = tmpPath.actions;\r\n\t\ttmpShape.curves = tmpPath.curves;\r\n\t\tshapes.push( tmpShape );\r\n\t\treturn shapes;\r\n\r\n\t}\r\n\r\n\tvar holesFirst = ! THREE.Shape.Utils.isClockWise( subPaths[ 0 ].getPoints() );\r\n\tholesFirst = isCCW ? ! holesFirst : holesFirst;\r\n\r\n\t// console.log(\"Holes first\", holesFirst);\r\n\r\n\tvar betterShapeHoles = [];\r\n\tvar newShapes = [];\r\n\tvar newShapeHoles = [];\r\n\tvar mainIdx = 0;\r\n\tvar tmpPoints;\r\n\r\n\tnewShapes[ mainIdx ] = undefined;\r\n\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\tvar i, il;\r\n\r\n\tfor ( i = 0, il = subPaths.length; i < il; i ++ ) {\r\n\r\n\t\ttmpPath = subPaths[ i ];\r\n\t\ttmpPoints = tmpPath.getPoints();\r\n\t\tsolid = THREE.Shape.Utils.isClockWise( tmpPoints );\r\n\t\tsolid = isCCW ? ! solid : solid;\r\n\r\n\t\tif ( solid ) {\r\n\r\n\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\r\n\r\n\t\t\tnewShapes[ mainIdx ] = { s: new THREE.Shape(), p: tmpPoints };\r\n\t\t\tnewShapes[ mainIdx ].s.actions = tmpPath.actions;\r\n\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\r\n\r\n\t\t\tif ( holesFirst )\tmainIdx ++;\r\n\t\t\tnewShapeHoles[ mainIdx ] = [];\r\n\r\n\t\t\t//console.log('cw', i);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\r\n\r\n\t\t\t//console.log('ccw', i);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// only Holes? -> probably all Shapes with wrong orientation\r\n\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\r\n\r\n\r\n\tif ( newShapes.length > 1 ) {\r\n\r\n\t\tvar ambiguous = false;\r\n\t\tvar toChange = [];\r\n\r\n\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\tbetterShapeHoles[ sIdx ] = [];\r\n\r\n\t\t}\r\n\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\r\n\r\n\t\t\tvar sho = newShapeHoles[ sIdx ];\r\n\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\r\n\r\n\t\t\t\tvar ho = sho[ hIdx ];\r\n\t\t\t\tvar hole_unassigned = true;\r\n\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\r\n\r\n\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\r\n\r\n\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\r\n\t\t\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\t\t\thole_unassigned = false;\r\n\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tambiguous = true;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( hole_unassigned ) {\r\n\r\n\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t// console.log(\"ambiguous: \", ambiguous);\r\n\t\tif ( toChange.length > 0 ) {\r\n\r\n\t\t\t// console.log(\"to change: \", toChange);\r\n\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar tmpHoles, j, jl;\r\n\tfor ( i = 0, il = newShapes.length; i < il; i ++ ) {\r\n\r\n\t\ttmpShape = newShapes[ i ].s;\r\n\t\tshapes.push( tmpShape );\r\n\t\ttmpHoles = newShapeHoles[ i ];\r\n\t\tfor ( j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\r\n\r\n\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t//console.log(\"shape\", shapes);\r\n\r\n\treturn shapes;\r\n\r\n};\r\n\r\n// File:src/extras/core/Shape.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * Defines a 2d shape plane using paths.\r\n **/\r\n\r\n// STEP 1 Create a path.\r\n// STEP 2 Turn path into shape.\r\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\r\n// STEP 3a - Extract points from each shape, turn to vertices\r\n// STEP 3b - Triangulate each shape, add faces.\r\n\r\nTHREE.Shape = function () {\r\n\r\n\tTHREE.Path.apply( this, arguments );\r\n\tthis.holes = [];\r\n\r\n};\r\n\r\nTHREE.Shape.prototype = Object.create( THREE.Path.prototype );\r\nTHREE.Shape.prototype.constructor = THREE.Shape;\r\n\r\n// Convenience method to return ExtrudeGeometry\r\n\r\nTHREE.Shape.prototype.extrude = function ( options ) {\r\n\r\n\tvar extruded = new THREE.ExtrudeGeometry( this, options );\r\n\treturn extruded;\r\n\r\n};\r\n\r\n// Convenience method to return ShapeGeometry\r\n\r\nTHREE.Shape.prototype.makeGeometry = function ( options ) {\r\n\r\n\tvar geometry = new THREE.ShapeGeometry( this, options );\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// Get points of holes\r\n\r\nTHREE.Shape.prototype.getPointsHoles = function ( divisions ) {\r\n\r\n\tvar i, il = this.holes.length, holesPts = [];\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedPoints( divisions, this.bends );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n// Get points of holes (spaced by regular distance)\r\n\r\nTHREE.Shape.prototype.getSpacedPointsHoles = function ( divisions ) {\r\n\r\n\tvar i, il = this.holes.length, holesPts = [];\r\n\r\n\tfor ( i = 0; i < il; i ++ ) {\r\n\r\n\t\tholesPts[ i ] = this.holes[ i ].getTransformedSpacedPoints( divisions, this.bends );\r\n\r\n\t}\r\n\r\n\treturn holesPts;\r\n\r\n};\r\n\r\n\r\n// Get points of shape and holes (keypoints based on segments parameter)\r\n\r\nTHREE.Shape.prototype.extractAllPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getTransformedPoints( divisions ),\r\n\t\tholes: this.getPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\nTHREE.Shape.prototype.extractPoints = function ( divisions ) {\r\n\r\n\tif ( this.useSpacedPoints ) {\r\n\r\n\t\treturn this.extractAllSpacedPoints( divisions );\r\n\r\n\t}\r\n\r\n\treturn this.extractAllPoints( divisions );\r\n\r\n};\r\n\r\n//\r\n// THREE.Shape.prototype.extractAllPointsWithBend = function ( divisions, bend ) {\r\n//\r\n// \treturn {\r\n//\r\n// \t\tshape: this.transform( bend, divisions ),\r\n// \t\tholes: this.getPointsHoles( divisions, bend )\r\n//\r\n// \t};\r\n//\r\n// };\r\n\r\n// Get points of shape and holes (spaced by regular distance)\r\n\r\nTHREE.Shape.prototype.extractAllSpacedPoints = function ( divisions ) {\r\n\r\n\treturn {\r\n\r\n\t\tshape: this.getTransformedSpacedPoints( divisions ),\r\n\t\tholes: this.getSpacedPointsHoles( divisions )\r\n\r\n\t};\r\n\r\n};\r\n\r\n/**************************************************************\r\n *\tUtils\r\n **************************************************************/\r\n\r\nTHREE.Shape.Utils = {\r\n\r\n\ttriangulateShape: function ( contour, holes ) {\r\n\r\n\t\tfunction point_in_segment_2D_colin( inSegPt1, inSegPt2, inOtherPt ) {\r\n\r\n\t\t\t// inOtherPt needs to be collinear to the inSegment\r\n\t\t\tif ( inSegPt1.x !== inSegPt2.x ) {\r\n\r\n\t\t\t\tif ( inSegPt1.x < inSegPt2.x ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt2.x ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.x <= inOtherPt.x ) && ( inOtherPt.x <= inSegPt1.x ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( inSegPt1.y < inSegPt2.y ) {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt1.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt2.y ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\treturn\t( ( inSegPt2.y <= inOtherPt.y ) && ( inOtherPt.y <= inSegPt1.y ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction intersect_segments_2D( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1, inSeg2Pt2, inExcludeAdjacentSegs ) {\r\n\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t\tvar seg1dx = inSeg1Pt2.x - inSeg1Pt1.x,   seg1dy = inSeg1Pt2.y - inSeg1Pt1.y;\r\n\t\t\tvar seg2dx = inSeg2Pt2.x - inSeg2Pt1.x,   seg2dy = inSeg2Pt2.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar seg1seg2dx = inSeg1Pt1.x - inSeg2Pt1.x;\r\n\t\t\tvar seg1seg2dy = inSeg1Pt1.y - inSeg2Pt1.y;\r\n\r\n\t\t\tvar limit\t\t= seg1dy * seg2dx - seg1dx * seg2dy;\r\n\t\t\tvar perpSeg1\t= seg1dy * seg1seg2dx - seg1dx * seg1seg2dy;\r\n\r\n\t\t\tif ( Math.abs( limit ) > EPSILON ) {\r\n\r\n\t\t\t\t// not parallel\r\n\r\n\t\t\t\tvar perpSeg2;\r\n\t\t\t\tif ( limit > 0 ) {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 < 0 ) || ( perpSeg1 > limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 < 0 ) || ( perpSeg2 > limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( ( perpSeg1 > 0 ) || ( perpSeg1 < limit ) ) \t\treturn [];\r\n\t\t\t\t\tperpSeg2 = seg2dy * seg1seg2dx - seg2dx * seg1seg2dy;\r\n\t\t\t\t\tif ( ( perpSeg2 > 0 ) || ( perpSeg2 < limit ) ) \t\treturn [];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// i.e. to reduce rounding errors\r\n\t\t\t\t// intersection at endpoint of segment#1?\r\n\t\t\t\tif ( perpSeg2 === 0 ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( perpSeg2 === limit ) {\r\n\r\n\t\t\t\t\tif ( ( inExcludeAdjacentSegs ) &&\r\n\t\t\t\t\t\t ( ( perpSeg1 === 0 ) || ( perpSeg1 === limit ) ) )\t\treturn [];\r\n\t\t\t\t\treturn [ inSeg1Pt2 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// intersection at endpoint of segment#2?\r\n\t\t\t\tif ( perpSeg1 === 0 )\t\treturn [ inSeg2Pt1 ];\r\n\t\t\t\tif ( perpSeg1 === limit )\treturn [ inSeg2Pt2 ];\r\n\r\n\t\t\t\t// return real intersection point\r\n\t\t\t\tvar factorSeg1 = perpSeg2 / limit;\r\n\t\t\t\treturn\t[ { x: inSeg1Pt1.x + factorSeg1 * seg1dx,\r\n\t\t\t\t\t\t\ty: inSeg1Pt1.y + factorSeg1 * seg1dy } ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// parallel or collinear\r\n\t\t\t\tif ( ( perpSeg1 !== 0 ) ||\r\n\t\t\t\t\t ( seg2dy * seg1seg2dx !== seg2dx * seg1seg2dy ) ) \t\t\treturn [];\r\n\r\n\t\t\t\t// they are collinear or degenerate\r\n\t\t\t\tvar seg1Pt = ( ( seg1dx === 0 ) && ( seg1dy === 0 ) );\t// segment1 is just a point?\r\n\t\t\t\tvar seg2Pt = ( ( seg2dx === 0 ) && ( seg2dy === 0 ) );\t// segment2 is just a point?\r\n\t\t\t\t// both segments are points\r\n\t\t\t\tif ( seg1Pt && seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ( inSeg1Pt1.x !== inSeg2Pt1.x ) ||\r\n\t\t\t\t\t\t ( inSeg1Pt1.y !== inSeg2Pt1.y ) )\t\treturn [];\t// they are distinct  points\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];                 \t\t\t\t\t\t// they are the same point\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#1  is a single point\r\n\t\t\t\tif ( seg1Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg2Pt1, inSeg2Pt2, inSeg1Pt1 ) )\t\treturn [];\t\t// but not in segment#2\r\n\t\t\t\t\treturn [ inSeg1Pt1 ];\r\n\r\n\t\t\t\t}\r\n\t\t\t\t// segment#2  is a single point\r\n\t\t\t\tif ( seg2Pt ) {\r\n\r\n\t\t\t\t\tif ( ! point_in_segment_2D_colin( inSeg1Pt1, inSeg1Pt2, inSeg2Pt1 ) )\t\treturn [];\t\t// but not in segment#1\r\n\t\t\t\t\treturn [ inSeg2Pt1 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// they are collinear segments, which might overlap\r\n\t\t\t\tvar seg1min, seg1max, seg1minVal, seg1maxVal;\r\n\t\t\t\tvar seg2min, seg2max, seg2minVal, seg2maxVal;\r\n\t\t\t\tif ( seg1dx !== 0 ) {\r\n\r\n\t\t\t\t\t// the segments are NOT on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.x < inSeg1Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.x;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.x < inSeg2Pt2.x ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.x;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.x;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.x;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// the segments are on a vertical line\r\n\t\t\t\t\tif ( inSeg1Pt1.y < inSeg1Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt1; seg1minVal = inSeg1Pt1.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt2; seg1maxVal = inSeg1Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg1min = inSeg1Pt2; seg1minVal = inSeg1Pt2.y;\r\n\t\t\t\t\t\tseg1max = inSeg1Pt1; seg1maxVal = inSeg1Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( inSeg2Pt1.y < inSeg2Pt2.y ) {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt1; seg2minVal = inSeg2Pt1.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt2; seg2maxVal = inSeg2Pt2.y;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tseg2min = inSeg2Pt2; seg2minVal = inSeg2Pt2.y;\r\n\t\t\t\t\t\tseg2max = inSeg2Pt1; seg2maxVal = inSeg2Pt1.y;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( seg1minVal <= seg2minVal ) {\r\n\r\n\t\t\t\t\tif ( seg1maxVal <  seg2minVal )\treturn [];\r\n\t\t\t\t\tif ( seg1maxVal === seg2minVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg2min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg2min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg2min, seg2max ];\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( seg1minVal >  seg2maxVal )\treturn [];\r\n\t\t\t\t\tif ( seg1minVal === seg2maxVal )\t{\r\n\r\n\t\t\t\t\t\tif ( inExcludeAdjacentSegs )\t\treturn [];\r\n\t\t\t\t\t\treturn [ seg1min ];\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( seg1maxVal <= seg2maxVal )\treturn [ seg1min, seg1max ];\r\n\t\t\t\t\treturn\t[ seg1min, seg2max ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction isPointInsideAngle( inVertex, inLegFromPt, inLegToPt, inOtherPt ) {\r\n\r\n\t\t\t// The order of legs is important\r\n\r\n\t\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t\t// translation of all points, so that Vertex is at (0,0)\r\n\t\t\tvar legFromPtX\t= inLegFromPt.x - inVertex.x,  legFromPtY\t= inLegFromPt.y - inVertex.y;\r\n\t\t\tvar legToPtX\t= inLegToPt.x\t- inVertex.x,  legToPtY\t\t= inLegToPt.y\t- inVertex.y;\r\n\t\t\tvar otherPtX\t= inOtherPt.x\t- inVertex.x,  otherPtY\t\t= inOtherPt.y\t- inVertex.y;\r\n\r\n\t\t\t// main angle >0: < 180 deg.; 0: 180 deg.; <0: > 180 deg.\r\n\t\t\tvar from2toAngle\t= legFromPtX * legToPtY - legFromPtY * legToPtX;\r\n\t\t\tvar from2otherAngle\t= legFromPtX * otherPtY - legFromPtY * otherPtX;\r\n\r\n\t\t\tif ( Math.abs( from2toAngle ) > EPSILON ) {\r\n\r\n\t\t\t\t// angle != 180 deg.\r\n\r\n\t\t\t\tvar other2toAngle\t\t= otherPtX * legToPtY - otherPtY * legToPtX;\r\n\t\t\t\t// console.log( \"from2to: \" + from2toAngle + \", from2other: \" + from2otherAngle + \", other2to: \" + other2toAngle );\r\n\r\n\t\t\t\tif ( from2toAngle > 0 ) {\r\n\r\n\t\t\t\t\t// main angle < 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) && ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// main angle > 180 deg.\r\n\t\t\t\t\treturn\t( ( from2otherAngle >= 0 ) || ( other2toAngle >= 0 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// angle == 180 deg.\r\n\t\t\t\t// console.log( \"from2to: 180 deg., from2other: \" + from2otherAngle  );\r\n\t\t\t\treturn\t( from2otherAngle > 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfunction removeHoles( contour, holes ) {\r\n\r\n\t\t\tvar shape = contour.concat(); // work on this shape\r\n\t\t\tvar hole;\r\n\r\n\t\t\tfunction isCutLineInsideAngles( inShapeIdx, inHoleIdx ) {\r\n\r\n\t\t\t\t// Check if hole point lies within angle around shape point\r\n\t\t\t\tvar lastShapeIdx = shape.length - 1;\r\n\r\n\t\t\t\tvar prevShapeIdx = inShapeIdx - 1;\r\n\t\t\t\tif ( prevShapeIdx < 0 )\t\t\tprevShapeIdx = lastShapeIdx;\r\n\r\n\t\t\t\tvar nextShapeIdx = inShapeIdx + 1;\r\n\t\t\t\tif ( nextShapeIdx > lastShapeIdx )\tnextShapeIdx = 0;\r\n\r\n\t\t\t\tvar insideAngle = isPointInsideAngle( shape[ inShapeIdx ], shape[ prevShapeIdx ], shape[ nextShapeIdx ], hole[ inHoleIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Shape): \" + inShapeIdx + \", Point: \" + hole[inHoleIdx].x + \"/\" + hole[inHoleIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Check if shape point lies within angle around hole point\r\n\t\t\t\tvar lastHoleIdx = hole.length - 1;\r\n\r\n\t\t\t\tvar prevHoleIdx = inHoleIdx - 1;\r\n\t\t\t\tif ( prevHoleIdx < 0 )\t\t\tprevHoleIdx = lastHoleIdx;\r\n\r\n\t\t\t\tvar nextHoleIdx = inHoleIdx + 1;\r\n\t\t\t\tif ( nextHoleIdx > lastHoleIdx )\tnextHoleIdx = 0;\r\n\r\n\t\t\t\tinsideAngle = isPointInsideAngle( hole[ inHoleIdx ], hole[ prevHoleIdx ], hole[ nextHoleIdx ], shape[ inShapeIdx ] );\r\n\t\t\t\tif ( ! insideAngle ) {\r\n\r\n\t\t\t\t\t// console.log( \"Vertex (Hole): \" + inHoleIdx + \", Point: \" + shape[inShapeIdx].x + \"/\" + shape[inShapeIdx].y );\r\n\t\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\ttrue;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfunction intersectsShapeEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with shape edges\r\n\t\t\t\tvar sIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( sIdx = 0; sIdx < shape.length; sIdx ++ ) {\r\n\r\n\t\t\t\t\tnextIdx = sIdx + 1; nextIdx %= shape.length;\r\n\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, shape[ sIdx ], shape[ nextIdx ], true );\r\n\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar indepHoles = [];\r\n\r\n\t\t\tfunction intersectsHoleEdge( inShapePt, inHolePt ) {\r\n\r\n\t\t\t\t// checks for intersections with hole edges\r\n\t\t\t\tvar ihIdx, chkHole,\r\n\t\t\t\t\thIdx, nextIdx, intersection;\r\n\t\t\t\tfor ( ihIdx = 0; ihIdx < indepHoles.length; ihIdx ++ ) {\r\n\r\n\t\t\t\t\tchkHole = holes[ indepHoles[ ihIdx ]];\r\n\t\t\t\t\tfor ( hIdx = 0; hIdx < chkHole.length; hIdx ++ ) {\r\n\r\n\t\t\t\t\t\tnextIdx = hIdx + 1; nextIdx %= chkHole.length;\r\n\t\t\t\t\t\tintersection = intersect_segments_2D( inShapePt, inHolePt, chkHole[ hIdx ], chkHole[ nextIdx ], true );\r\n\t\t\t\t\t\tif ( intersection.length > 0 )\t\treturn\ttrue;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\treturn\tfalse;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar holeIndex, shapeIndex,\r\n\t\t\t\tshapePt, holePt,\r\n\t\t\t\tholeIdx, cutKey, failedCuts = [],\r\n\t\t\t\ttmpShape1, tmpShape2,\r\n\t\t\t\ttmpHole1, tmpHole2;\r\n\r\n\t\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tindepHoles.push( h );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar minShapeIndex = 0;\r\n\t\t\tvar counter = indepHoles.length * 2;\r\n\t\t\twhile ( indepHoles.length > 0 ) {\r\n\r\n\t\t\t\tcounter --;\r\n\t\t\t\tif ( counter < 0 ) {\r\n\r\n\t\t\t\t\tconsole.log( \"Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!\" );\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// search for shape-vertex and hole-vertex,\r\n\t\t\t\t// which can be connected without intersections\r\n\t\t\t\tfor ( shapeIndex = minShapeIndex; shapeIndex < shape.length; shapeIndex ++ ) {\r\n\r\n\t\t\t\t\tshapePt = shape[ shapeIndex ];\r\n\t\t\t\t\tholeIndex\t= - 1;\r\n\r\n\t\t\t\t\t// search for hole which can be reached without intersections\r\n\t\t\t\t\tfor ( var h = 0; h < indepHoles.length; h ++ ) {\r\n\r\n\t\t\t\t\t\tholeIdx = indepHoles[ h ];\r\n\r\n\t\t\t\t\t\t// prevent multiple checks\r\n\t\t\t\t\t\tcutKey = shapePt.x + \":\" + shapePt.y + \":\" + holeIdx;\r\n\t\t\t\t\t\tif ( failedCuts[ cutKey ] !== undefined )\t\t\tcontinue;\r\n\r\n\t\t\t\t\t\thole = holes[ holeIdx ];\r\n\t\t\t\t\t\tfor ( var h2 = 0; h2 < hole.length; h2 ++ ) {\r\n\r\n\t\t\t\t\t\t\tholePt = hole[ h2 ];\r\n\t\t\t\t\t\t\tif ( ! isCutLineInsideAngles( shapeIndex, h2 ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsShapeEdge( shapePt, holePt ) )\t\tcontinue;\r\n\t\t\t\t\t\t\tif ( intersectsHoleEdge( shapePt, holePt ) )\t\tcontinue;\r\n\r\n\t\t\t\t\t\t\tholeIndex = h2;\r\n\t\t\t\t\t\t\tindepHoles.splice( h, 1 );\r\n\r\n\t\t\t\t\t\t\ttmpShape1 = shape.slice( 0, shapeIndex + 1 );\r\n\t\t\t\t\t\t\ttmpShape2 = shape.slice( shapeIndex );\r\n\t\t\t\t\t\t\ttmpHole1 = hole.slice( holeIndex );\r\n\t\t\t\t\t\t\ttmpHole2 = hole.slice( 0, holeIndex + 1 );\r\n\r\n\t\t\t\t\t\t\tshape = tmpShape1.concat( tmpHole1 ).concat( tmpHole2 ).concat( tmpShape2 );\r\n\r\n\t\t\t\t\t\t\tminShapeIndex = shapeIndex;\r\n\r\n\t\t\t\t\t\t\t// Debug only, to show the selected cuts\r\n\t\t\t\t\t\t\t// glob_CutLines.push( [ shapePt, holePt ] );\r\n\r\n\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t\t\tfailedCuts[ cutKey ] = true;\t\t\t// remember failure\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( holeIndex >= 0 )\tbreak;\t\t// hole-vertex found\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn shape; \t\t\t/* shape with no holes */\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar i, il, f, face,\r\n\t\t\tkey, index,\r\n\t\t\tallPointsMap = {};\r\n\r\n\t\t// To maintain reference to old shape, one must match coordinates, or offset the indices from original arrays. It's probably easier to do the first.\r\n\r\n\t\tvar allpoints = contour.concat();\r\n\r\n\t\tfor ( var h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tArray.prototype.push.apply( allpoints, holes[ h ] );\r\n\r\n\t\t}\r\n\r\n\t\t//console.log( \"allpoints\",allpoints, allpoints.length );\r\n\r\n\t\t// prepare all points map\r\n\r\n\t\tfor ( i = 0, il = allpoints.length; i < il; i ++ ) {\r\n\r\n\t\t\tkey = allpoints[ i ].x + \":\" + allpoints[ i ].y;\r\n\r\n\t\t\tif ( allPointsMap[ key ] !== undefined ) {\r\n\r\n\t\t\t\tconsole.warn( \"THREE.Shape: Duplicate point\", key );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tallPointsMap[ key ] = i;\r\n\r\n\t\t}\r\n\r\n\t\t// remove holes by cutting paths to holes and adding them to the shape\r\n\t\tvar shapeWithoutHoles = removeHoles( contour, holes );\r\n\r\n\t\tvar triangles = THREE.FontUtils.Triangulate( shapeWithoutHoles, false ); // True returns indices for points of spooled shape\r\n\t\t//console.log( \"triangles\",triangles, triangles.length );\r\n\r\n\t\t// check all face vertices against all points map\r\n\r\n\t\tfor ( i = 0, il = triangles.length; i < il; i ++ ) {\r\n\r\n\t\t\tface = triangles[ i ];\r\n\r\n\t\t\tfor ( f = 0; f < 3; f ++ ) {\r\n\r\n\t\t\t\tkey = face[ f ].x + \":\" + face[ f ].y;\r\n\r\n\t\t\t\tindex = allPointsMap[ key ];\r\n\r\n\t\t\t\tif ( index !== undefined ) {\r\n\r\n\t\t\t\t\tface[ f ] = index;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn triangles.concat();\r\n\r\n\t},\r\n\r\n\tisClockWise: function ( pts ) {\r\n\r\n\t\treturn THREE.FontUtils.Triangulate.area( pts ) < 0;\r\n\r\n\t},\r\n\r\n\t// Bezier Curves formulas obtained from\r\n\t// http://en.wikipedia.org/wiki/B%C3%A9zier_curve\r\n\r\n\t// Quad Bezier Functions\r\n\r\n\tb2p0: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn k * k * p;\r\n\r\n\t},\r\n\r\n\tb2p1: function ( t, p ) {\r\n\r\n\t\treturn 2 * ( 1 - t ) * t * p;\r\n\r\n\t},\r\n\r\n\tb2p2: function ( t, p ) {\r\n\r\n\t\treturn t * t * p;\r\n\r\n\t},\r\n\r\n\tb2: function ( t, p0, p1, p2 ) {\r\n\r\n\t\treturn this.b2p0( t, p0 ) + this.b2p1( t, p1 ) + this.b2p2( t, p2 );\r\n\r\n\t},\r\n\r\n\t// Cubic Bezier Functions\r\n\r\n\tb3p0: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn k * k * k * p;\r\n\r\n\t},\r\n\r\n\tb3p1: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn 3 * k * k * t * p;\r\n\r\n\t},\r\n\r\n\tb3p2: function ( t, p ) {\r\n\r\n\t\tvar k = 1 - t;\r\n\t\treturn 3 * k * t * t * p;\r\n\r\n\t},\r\n\r\n\tb3p3: function ( t, p ) {\r\n\r\n\t\treturn t * t * t * p;\r\n\r\n\t},\r\n\r\n\tb3: function ( t, p0, p1, p2, p3 ) {\r\n\r\n\t\treturn this.b3p0( t, p0 ) + this.b3p1( t, p1 ) + this.b3p2( t, p2 ) +  this.b3p3( t, p3 );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/curves/LineCurve.js\r\n\r\n/**************************************************************\r\n *\tLine\r\n **************************************************************/\r\n\r\nTHREE.LineCurve = function ( v1, v2 ) {\r\n\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.LineCurve.prototype.constructor = THREE.LineCurve;\r\n\r\nTHREE.LineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar point = this.v2.clone().sub( this.v1 );\r\n\tpoint.multiplyScalar( t ).add( this.v1 );\r\n\r\n\treturn point;\r\n\r\n};\r\n\r\n// Line curve is linear, so we can overwrite default getPointAt\r\n\r\nTHREE.LineCurve.prototype.getPointAt = function ( u ) {\r\n\r\n\treturn this.getPoint( u );\r\n\r\n};\r\n\r\nTHREE.LineCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tangent = this.v2.clone().sub( this.v1 );\r\n\r\n\treturn tangent.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.QuadraticBezierCurve = function ( v0, v1, v2 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\r\n};\r\n\r\nTHREE.QuadraticBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve;\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n\r\nTHREE.QuadraticBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.x, this.v1.x, this.v2.x );\r\n\tvector.y = THREE.Curve.Utils.tangentQuadraticBezier( t, this.v0.y, this.v1.y, this.v2.y );\r\n\r\n\t// returns unit vector\r\n\r\n\treturn vector.normalize();\r\n\r\n};\r\n\r\n// File:src/extras/curves/CubicBezierCurve.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve = function ( v0, v1, v2, v3 ) {\r\n\r\n\tthis.v0 = v0;\r\n\tthis.v1 = v1;\r\n\tthis.v2 = v2;\r\n\tthis.v3 = v3;\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve;\r\n\r\nTHREE.CubicBezierCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar tx, ty;\r\n\r\n\ttx = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\tty = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\r\n\treturn new THREE.Vector2( tx, ty );\r\n\r\n};\r\n\r\nTHREE.CubicBezierCurve.prototype.getTangent = function( t ) {\r\n\r\n\tvar tx, ty;\r\n\r\n\ttx = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\tty = THREE.Curve.Utils.tangentCubicBezier( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\r\n\tvar tangent = new THREE.Vector2( tx, ty );\r\n\ttangent.normalize();\r\n\r\n\treturn tangent;\r\n\r\n};\r\n\r\n// File:src/extras/curves/SplineCurve.js\r\n\r\n/**************************************************************\r\n *\tSpline curve\r\n **************************************************************/\r\n\r\nTHREE.SplineCurve = function ( points /* array of Vector2 */ ) {\r\n\r\n\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n};\r\n\r\nTHREE.SplineCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.SplineCurve.prototype.constructor = THREE.SplineCurve;\r\n\r\nTHREE.SplineCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar points = this.points;\r\n\tvar point = ( points.length - 1 ) * t;\r\n\r\n\tvar intPoint = Math.floor( point );\r\n\tvar weight = point - intPoint;\r\n\r\n\tvar point0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\r\n\tvar point1 = points[ intPoint ];\r\n\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\tvar vector = new THREE.Vector2();\r\n\r\n\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\r\n\treturn vector;\r\n\r\n};\r\n\r\n// File:src/extras/curves/EllipseCurve.js\r\n\r\n/**************************************************************\r\n *\tEllipse curve\r\n **************************************************************/\r\n\r\nTHREE.EllipseCurve = function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\r\n\r\n\tthis.aX = aX;\r\n\tthis.aY = aY;\r\n\r\n\tthis.xRadius = xRadius;\r\n\tthis.yRadius = yRadius;\r\n\r\n\tthis.aStartAngle = aStartAngle;\r\n\tthis.aEndAngle = aEndAngle;\r\n\r\n\tthis.aClockwise = aClockwise;\r\n\t\r\n\tthis.aRotation = aRotation || 0;\r\n\r\n};\r\n\r\nTHREE.EllipseCurve.prototype = Object.create( THREE.Curve.prototype );\r\nTHREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve;\r\n\r\nTHREE.EllipseCurve.prototype.getPoint = function ( t ) {\r\n\r\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\r\n\r\n\tif ( deltaAngle < 0 ) deltaAngle += Math.PI * 2;\r\n\tif ( deltaAngle > Math.PI * 2 ) deltaAngle -= Math.PI * 2;\r\n\r\n\tvar angle;\r\n\r\n\tif ( this.aClockwise === true ) {\r\n\r\n\t\tangle = this.aEndAngle + ( 1 - t ) * ( Math.PI * 2 - deltaAngle );\r\n\r\n\t} else {\r\n\r\n\t\tangle = this.aStartAngle + t * deltaAngle;\r\n\r\n\t}\r\n\t\r\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\r\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\r\n\r\n\tif ( this.aRotation !== 0 ) {\r\n\r\n\t\tvar cos = Math.cos( this.aRotation );\r\n\t\tvar sin = Math.sin( this.aRotation );\r\n\r\n\t\tvar tx = x, ty = y;\r\n\r\n\t\t// Rotate the point about the center of the ellipse.\r\n\t\tx = ( tx - this.aX ) * cos - ( ty - this.aY ) * sin + this.aX;\r\n\t\ty = ( tx - this.aX ) * sin + ( ty - this.aY ) * cos + this.aY;\r\n\r\n\t}\r\n\r\n\treturn new THREE.Vector2( x, y );\r\n\r\n};\r\n\r\n// File:src/extras/curves/ArcCurve.js\r\n\r\n/**************************************************************\r\n *\tArc curve\r\n **************************************************************/\r\n\r\nTHREE.ArcCurve = function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\r\n\r\n\tTHREE.EllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\r\n\r\n};\r\n\r\nTHREE.ArcCurve.prototype = Object.create( THREE.EllipseCurve.prototype );\r\nTHREE.ArcCurve.prototype.constructor = THREE.ArcCurve;\r\n\r\n// File:src/extras/curves/LineCurve3.js\r\n\r\n/**************************************************************\r\n *\tLine3D\r\n **************************************************************/\r\n\r\nTHREE.LineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v1, v2 ) {\r\n\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.subVectors( this.v2, this.v1 ); // diff\r\n\t\tvector.multiplyScalar( t );\r\n\t\tvector.add( this.v1 );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/QuadraticBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tQuadratic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.QuadraticBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Shape.Utils.b2( t, this.v0.x, this.v1.x, this.v2.x );\r\n\t\tvector.y = THREE.Shape.Utils.b2( t, this.v0.y, this.v1.y, this.v2.y );\r\n\t\tvector.z = THREE.Shape.Utils.b2( t, this.v0.z, this.v1.z, this.v2.z );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CubicBezierCurve3.js\r\n\r\n/**************************************************************\r\n *\tCubic Bezier 3D curve\r\n **************************************************************/\r\n\r\nTHREE.CubicBezierCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( v0, v1, v2, v3 ) {\r\n\r\n\t\tthis.v0 = v0;\r\n\t\tthis.v1 = v1;\r\n\t\tthis.v2 = v2;\r\n\t\tthis.v3 = v3;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Shape.Utils.b3( t, this.v0.x, this.v1.x, this.v2.x, this.v3.x );\r\n\t\tvector.y = THREE.Shape.Utils.b3( t, this.v0.y, this.v1.y, this.v2.y, this.v3.y );\r\n\t\tvector.z = THREE.Shape.Utils.b3( t, this.v0.z, this.v1.z, this.v2.z, this.v3.z );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/SplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tSpline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.SplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */ ) {\r\n\r\n\t\tconsole.warn( 'THREE.SplineCurve3 will be deprecated. Please use THREE.CatmullRomCurve3' );\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 1 ) * t;\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tvar point0 = points[ intPoint == 0 ? intPoint : intPoint - 1 ];\r\n\t\tvar point1 = points[ intPoint ];\r\n\t\tvar point2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\r\n\t\tvar point3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/curves/CatmullRomCurve3.js\r\n\r\n/**\r\n * @author zz85 https://github.com/zz85\r\n *\r\n * Centripetal CatmullRom Curve - which is useful for avoiding\r\n * cusps and self-intersections in non-uniform catmull rom curves.\r\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\r\n *\r\n * curve.type accepts centripetal(default), chordal and catmullrom\r\n * curve.tension is used for catmullrom which defaults to 0.5\r\n */\r\n\r\nTHREE.CatmullRomCurve3 = ( function() {\r\n\r\n\tvar\r\n\t\ttmp = new THREE.Vector3(),\r\n\t\tpx = new CubicPoly(),\r\n\t\tpy = new CubicPoly(),\r\n\t\tpz = new CubicPoly();\r\n\r\n\t/*\r\n\tBased on an optimized c++ solution in\r\n\t - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\r\n\t - http://ideone.com/NoEbVM\r\n\r\n\tThis CubicPoly class could be used for reusing some variables and calculations,\r\n\tbut for three.js curve use, it could be possible inlined and flatten into a single function call\r\n\twhich can be placed in CurveUtils.\r\n\t*/\r\n\r\n\tfunction CubicPoly() {\r\n\r\n\t}\r\n\r\n\t/*\r\n\t * Compute coefficients for a cubic polynomial\r\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\r\n\t * such that\r\n\t *   p(0) = x0, p(1) = x1\r\n\t *  and\r\n\t *   p'(0) = t0, p'(1) = t1.\r\n\t */\r\n\tCubicPoly.prototype.init = function( x0, x1, t0, t1 ) {\r\n\r\n\t\tthis.c0 = x0;\r\n\t\tthis.c1 = t0;\r\n\t\tthis.c2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\r\n\t\tthis.c3 = 2 * x0 - 2 * x1 + t0 + t1;\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.initNonuniformCatmullRom = function( x0, x1, x2, x3, dt0, dt1, dt2 ) {\r\n\r\n\t\t// compute tangents when parameterized in [t1,t2]\r\n\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\r\n\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\r\n\r\n\t\t// rescale tangents for parametrization in [0,1]\r\n\t\tt1 *= dt1;\r\n\t\tt2 *= dt1;\r\n\r\n\t\t// initCubicPoly\r\n\t\tthis.init( x1, x2, t1, t2 );\r\n\r\n\t};\r\n\r\n\t// standard Catmull-Rom spline: interpolate between x1 and x2 with previous/following points x1/x4\r\n\tCubicPoly.prototype.initCatmullRom = function( x0, x1, x2, x3, tension ) {\r\n\r\n\t\tthis.init( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\r\n\r\n\t};\r\n\r\n\tCubicPoly.prototype.calc = function( t ) {\r\n\r\n\t\tvar t2 = t * t;\r\n\t\tvar t3 = t2 * t;\r\n\t\treturn this.c0 + this.c1 * t + this.c2 * t2 + this.c3 * t3;\r\n\r\n\t};\r\n\r\n\t// Subclass Three.js curve\r\n\treturn THREE.Curve.create(\r\n\r\n\t\tfunction ( p /* array of Vector3 */ ) {\r\n\r\n\t\t\tthis.points = p || [];\r\n\r\n\t\t},\r\n\r\n\t\tfunction ( t ) {\r\n\r\n\t\t\tvar points = this.points,\r\n\t\t\t\tpoint, intPoint, weight, l;\r\n\r\n\t\t\tl = points.length;\r\n\r\n\t\t\tif ( l < 2 ) console.log( 'duh, you need at least 2 points' );\r\n\r\n\t\t\tpoint = ( l - 1 ) * t;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\r\n\t\t\tif ( weight === 0 && intPoint === l - 1 ) {\r\n\r\n\t\t\t\tintPoint = l - 2;\r\n\t\t\t\tweight = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar p0, p1, p2, p3;\r\n\r\n\t\t\tif ( intPoint === 0 ) {\r\n\r\n\t\t\t\t// extrapolate first point\r\n\t\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\r\n\t\t\t\tp0 = tmp;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tp0 = points[ intPoint - 1 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tp1 = points[ intPoint ];\r\n\t\t\tp2 = points[ intPoint + 1 ];\r\n\r\n\t\t\tif ( intPoint + 2 < l ) {\r\n\r\n\t\t\t\tp3 = points[ intPoint + 2 ]\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// extrapolate last point\r\n\t\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 2 ] );\r\n\t\t\t\tp3 = tmp;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( this.type === undefined || this.type === 'centripetal' || this.type === 'chordal' ) {\r\n\r\n\t\t\t\t// init Centripetal / Chordal Catmull-Rom\r\n\t\t\t\tvar pow = this.type === 'chordal' ? 0.5 : 0.25;\r\n\t\t\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\r\n\t\t\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\r\n\t\t\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\r\n\r\n\t\t\t\t// safety check for repeated points\r\n\t\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\r\n\t\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\r\n\t\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\r\n\r\n\t\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\r\n\t\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\r\n\t\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\r\n\r\n\t\t\t} else if ( this.type === 'catmullrom' ) {\r\n\r\n\t\t\t\tvar tension = this.tension !== undefined ? this.tension : 0.5;\r\n\t\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, tension );\r\n\t\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, tension );\r\n\t\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, tension );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar v = new THREE.Vector3(\r\n\t\t\t\tpx.calc( weight ),\r\n\t\t\t\tpy.calc( weight ),\r\n\t\t\t\tpz.calc( weight )\r\n\t\t\t);\r\n\r\n\t\t\treturn v;\r\n\r\n\t\t}\r\n\r\n\t);\r\n\r\n} )();\r\n\r\n// File:src/extras/curves/ClosedSplineCurve3.js\r\n\r\n/**************************************************************\r\n *\tClosed Spline 3D curve\r\n **************************************************************/\r\n\r\n\r\nTHREE.ClosedSplineCurve3 = THREE.Curve.create(\r\n\r\n\tfunction ( points /* array of Vector3 */ ) {\r\n\r\n\t\tthis.points = ( points == undefined ) ? [] : points;\r\n\r\n\t},\r\n\r\n\tfunction ( t ) {\r\n\r\n\t\tvar points = this.points;\r\n\t\tvar point = ( points.length - 0 ) * t; // This needs to be from 0-length +1\r\n\r\n\t\tvar intPoint = Math.floor( point );\r\n\t\tvar weight = point - intPoint;\r\n\r\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / points.length ) + 1 ) * points.length;\r\n\r\n\t\tvar point0 = points[ ( intPoint - 1 ) % points.length ];\r\n\t\tvar point1 = points[ ( intPoint     ) % points.length ];\r\n\t\tvar point2 = points[ ( intPoint + 1 ) % points.length ];\r\n\t\tvar point3 = points[ ( intPoint + 2 ) % points.length ];\r\n\r\n\t\tvar vector = new THREE.Vector3();\r\n\r\n\t\tvector.x = THREE.Curve.Utils.interpolate( point0.x, point1.x, point2.x, point3.x, weight );\r\n\t\tvector.y = THREE.Curve.Utils.interpolate( point0.y, point1.y, point2.y, point3.y, weight );\r\n\t\tvector.z = THREE.Curve.Utils.interpolate( point0.z, point1.z, point2.z, point3.z, weight );\r\n\r\n\t\treturn vector;\r\n\r\n\t}\r\n\r\n);\r\n\r\n// File:src/extras/animation/AnimationHandler.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n */\r\n\r\nTHREE.AnimationHandler = {\r\n\r\n\tLINEAR: 0,\r\n\tCATMULLROM: 1,\r\n\tCATMULLROM_FORWARD: 2,\r\n\r\n\t//\r\n\r\n\tadd: function () {\r\n\r\n\t\tconsole.warn( 'THREE.AnimationHandler.add() has been deprecated.' );\r\n\r\n\t},\r\n\tget: function () {\r\n\r\n\t\tconsole.warn( 'THREE.AnimationHandler.get() has been deprecated.' );\r\n\r\n\t},\r\n\tremove: function () {\r\n\r\n\t\tconsole.warn( 'THREE.AnimationHandler.remove() has been deprecated.' );\r\n\r\n\t},\r\n\r\n\t//\r\n\r\n\tanimations: [],\r\n\r\n\tinit: function ( data ) {\r\n\r\n\t\tif ( data.initialized === true ) return data;\r\n\r\n\t\t// loop through all keys\r\n\r\n\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\r\n\r\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t// remove minus times\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\r\n\r\n\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// create quaternions\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\r\n\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\r\n\r\n\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// prepare morph target keys\r\n\r\n\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\r\n\r\n\t\t\t\t// get all used\r\n\r\n\t\t\t\tvar usedMorphTargets = {};\r\n\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\r\n\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\r\n\r\n\r\n\t\t\t\t// set all used on all frames\r\n\r\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\t\tvar influences = {};\r\n\r\n\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\r\n\r\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\r\n\r\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\r\n\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\r\n\r\n\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// remove all keys that are on the same time\r\n\r\n\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\r\n\r\n\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\r\n\t\t\t\t\tk --;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t\t// set index\r\n\r\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\r\n\r\n\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tdata.initialized = true;\r\n\r\n\t\treturn data;\r\n\r\n\t},\r\n\r\n\tparse: function ( root ) {\r\n\r\n\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\r\n\r\n\t\t\thierarchy.push( root );\r\n\r\n\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\r\n\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\r\n\r\n\t\t};\r\n\r\n\t\t// setup hierarchy\r\n\r\n\t\tvar hierarchy = [];\r\n\r\n\t\tif ( root instanceof THREE.SkinnedMesh ) {\r\n\r\n\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\r\n\r\n\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tparseRecurseHierarchy( root, hierarchy );\r\n\r\n\t\t}\r\n\r\n\t\treturn hierarchy;\r\n\r\n\t},\r\n\r\n\tplay: function ( animation ) {\r\n\r\n\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\r\n\r\n\t\t\tthis.animations.push( animation );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tstop: function ( animation ) {\r\n\r\n\t\tvar index = this.animations.indexOf( animation );\r\n\r\n\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\tthis.animations.splice( index, 1 );\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function ( deltaTimeMS ) {\r\n\r\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\r\n\t\t\tthis.animations[ i ].resetBlendWeights();\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\r\n\r\n\t\t\tthis.animations[ i ].update( deltaTimeMS );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/animation/Animation.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.Animation = function ( root, data ) {\r\n\r\n\tthis.root = root;\r\n\tthis.data = THREE.AnimationHandler.init( data );\r\n\tthis.hierarchy = THREE.AnimationHandler.parse( root );\r\n\r\n\tthis.currentTime = 0;\r\n\tthis.timeScale = 1;\r\n\r\n\tthis.isPlaying = false;\r\n\tthis.loop = true;\r\n\tthis.weight = 0;\r\n\r\n\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\r\n\r\n};\r\n\r\nTHREE.Animation.prototype = {\r\n\r\n\tconstructor: THREE.Animation,\r\n\r\n\tkeyTypes:  [ \"pos\", \"rot\", \"scl\" ],\r\n\r\n\tplay: function ( startTime, weight ) {\r\n\r\n\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\t\tthis.weight = weight !== undefined ? weight : 1;\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t\tthis.reset();\r\n\r\n\t\tTHREE.AnimationHandler.play( this );\r\n\r\n\t},\r\n\r\n\tstop: function() {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t\tTHREE.AnimationHandler.stop( this );\r\n\r\n\t},\r\n\r\n\treset: function () {\r\n\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\tvar object = this.hierarchy[ h ];\r\n\r\n\t\t\tif ( object.animationCache === undefined ) {\r\n\r\n\t\t\t\tobject.animationCache = {\r\n\t\t\t\t\tanimations: {},\r\n\t\t\t\t\tblending: {\r\n\t\t\t\t\t\tpositionWeight: 0.0,\r\n\t\t\t\t\t\tquaternionWeight: 0.0,\r\n\t\t\t\t\t\tscaleWeight: 0.0\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar name = this.data.name;\r\n\t\t\tvar animations = object.animationCache.animations;\r\n\t\t\tvar animationCache = animations[ name ];\r\n\r\n\t\t\tif ( animationCache === undefined ) {\r\n\r\n\t\t\t\tanimationCache = {\r\n\t\t\t\t\tprevKey: { pos: 0, rot: 0, scl: 0 },\r\n\t\t\t\t\tnextKey: { pos: 0, rot: 0, scl: 0 },\r\n\t\t\t\t\toriginalMatrix: object.matrix\r\n\t\t\t\t};\r\n\r\n\t\t\t\tanimations[ name ] = animationCache;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Get keys to match our current time\r\n\r\n\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\r\n\t\t\t\tvar type = this.keyTypes[ t ];\r\n\r\n\t\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\r\n\r\n\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tresetBlendWeights: function () {\r\n\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\tvar animationCache = object.animationCache;\r\n\r\n\t\t\tif ( animationCache !== undefined ) {\r\n\r\n\t\t\t\tvar blending = animationCache.blending;\r\n\r\n\t\t\t\tblending.positionWeight = 0.0;\r\n\t\t\t\tblending.quaternionWeight = 0.0;\r\n\t\t\t\tblending.scaleWeight = 0.0;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: ( function() {\r\n\r\n\t\tvar points = [];\r\n\t\tvar target = new THREE.Vector3();\r\n\t\tvar newVector = new THREE.Vector3();\r\n\t\tvar newQuat = new THREE.Quaternion();\r\n\r\n\t\t// Catmull-Rom spline\r\n\r\n\t\tvar interpolateCatmullRom = function ( points, scale ) {\r\n\r\n\t\t\tvar c = [], v3 = [],\r\n\t\t\tpoint, intPoint, weight, w2, w3,\r\n\t\t\tpa, pb, pc, pd;\r\n\r\n\t\t\tpoint = ( points.length - 1 ) * scale;\r\n\t\t\tintPoint = Math.floor( point );\r\n\t\t\tweight = point - intPoint;\r\n\r\n\t\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\r\n\t\t\tc[ 1 ] = intPoint;\r\n\t\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\r\n\t\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\r\n\r\n\t\t\tpa = points[ c[ 0 ] ];\r\n\t\t\tpb = points[ c[ 1 ] ];\r\n\t\t\tpc = points[ c[ 2 ] ];\r\n\t\t\tpd = points[ c[ 3 ] ];\r\n\r\n\t\t\tw2 = weight * weight;\r\n\t\t\tw3 = weight * w2;\r\n\r\n\t\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\r\n\t\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\r\n\t\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\r\n\r\n\t\t\treturn v3;\r\n\r\n\t\t};\r\n\r\n\t\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\r\n\r\n\t\t\tvar v0 = ( p2 - p0 ) * 0.5,\r\n\t\t\t\tv1 = ( p3 - p1 ) * 0.5;\r\n\r\n\t\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\r\n\r\n\t\t};\r\n\r\n\t\treturn function ( delta ) {\r\n\r\n\t\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\t\tthis.currentTime += delta * this.timeScale;\r\n\r\n\t\t\tif ( this.weight === 0 )\r\n\t\t\t\treturn;\r\n\r\n\t\t\t//\r\n\r\n\t\t\tvar duration = this.data.length;\r\n\r\n\t\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\r\n\r\n\t\t\t\tif ( this.loop ) {\r\n\r\n\t\t\t\t\tthis.currentTime %= duration;\r\n\r\n\t\t\t\t\tif ( this.currentTime < 0 )\r\n\t\t\t\t\t\tthis.currentTime += duration;\r\n\r\n\t\t\t\t\tthis.reset();\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.stop();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\t\tvar animationCache = object.animationCache.animations[ this.data.name ];\r\n\t\t\t\tvar blending = object.animationCache.blending;\r\n\r\n\t\t\t\t// loop through pos/rot/scl\r\n\r\n\t\t\t\tfor ( var t = 0; t < 3; t ++ ) {\r\n\r\n\t\t\t\t\t// get keys\r\n\r\n\t\t\t\t\tvar type    = this.keyTypes[ t ];\r\n\t\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\r\n\t\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\r\n\r\n\t\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\r\n\t\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\r\n\r\n\t\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\r\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\r\n\r\n\t\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\r\n\t\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\r\n\r\n\t\t\t\t\tvar prevXYZ = prevKey[ type ];\r\n\t\t\t\t\tvar nextXYZ = nextKey[ type ];\r\n\r\n\t\t\t\t\tif ( scale < 0 ) scale = 0;\r\n\t\t\t\t\tif ( scale > 1 ) scale = 1;\r\n\r\n\t\t\t\t\t// interpolate\r\n\r\n\t\t\t\t\tif ( type === \"pos\" ) {\r\n\r\n\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\r\n\r\n\t\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\r\n\t\t\t\t\t\t\t// blend\r\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\r\n\t\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\r\n\t\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\r\n\t\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\r\n\t\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\r\n\r\n\t\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\r\n\r\n\t\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\r\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\r\n\t\t\t\t\t\t\tblending.positionWeight += this.weight;\r\n\r\n\t\t\t\t\t\t\t// blend\r\n\r\n\t\t\t\t\t\t\tvar vector = object.position;\r\n\r\n\t\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\r\n\t\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\r\n\t\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\r\n\r\n\t\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\r\n\r\n\t\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\r\n\t\t\t\t\t\t\t\ttarget.sub( vector );\r\n\t\t\t\t\t\t\t\ttarget.y = 0;\r\n\t\t\t\t\t\t\t\ttarget.normalize();\r\n\r\n\t\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\r\n\t\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\r\n\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( type === \"rot\" ) {\r\n\r\n\t\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\r\n\r\n\t\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\r\n\t\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\r\n\r\n\t\t\t\t\t\t\tobject.quaternion.copy( newQuat );\r\n\t\t\t\t\t\t\tblending.quaternionWeight = this.weight;\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\r\n\t\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\r\n\t\t\t\t\t\t\tblending.quaternionWeight += this.weight;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else if ( type === \"scl\" ) {\r\n\r\n\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\r\n\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\r\n\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\r\n\r\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\r\n\t\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\r\n\t\t\t\t\t\tblending.scaleWeight += this.weight;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\r\n\t\t};\r\n\r\n\t} )(),\r\n\r\n\tgetNextKeyWith: function ( type, h, key ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tkey = key % keys.length;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( ; key < keys.length; key ++ ) {\r\n\r\n\t\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\r\n\t\t\t\treturn keys[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.data.hierarchy[ h ].keys[ 0 ];\r\n\r\n\t},\r\n\r\n\tgetPrevKeyWith: function ( type, h, key ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\r\n\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\r\n\r\n\t\t\tkey = key > 0 ? key : 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tkey = key >= 0 ? key : key + keys.length;\r\n\r\n\t\t}\r\n\r\n\r\n\t\tfor ( ; key >= 0; key -- ) {\r\n\r\n\t\t\tif ( keys[ key ][ type ] !== undefined ) {\r\n\r\n\t\t\t\treturn keys[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/animation/KeyFrameAnimation.js\r\n\r\n/**\r\n * @author mikael emtinger / http://gomo.se/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author khang duong\r\n * @author erik kitson\r\n */\r\n\r\nTHREE.KeyFrameAnimation = function ( data ) {\r\n\r\n\tthis.root = data.node;\r\n\tthis.data = THREE.AnimationHandler.init( data );\r\n\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\r\n\tthis.currentTime = 0;\r\n\tthis.timeScale = 0.001;\r\n\tthis.isPlaying = false;\r\n\tthis.isPaused = true;\r\n\tthis.loop = true;\r\n\r\n\t// initialize to first keyframes\r\n\r\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys,\r\n\t\t\tsids = this.data.hierarchy[ h ].sids,\r\n\t\t\tobj = this.hierarchy[ h ];\r\n\r\n\t\tif ( keys.length && sids ) {\r\n\r\n\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\r\n\r\n\t\t\t\tvar sid = sids[ s ],\r\n\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\r\n\r\n\t\t\t\tif ( next ) {\r\n\r\n\t\t\t\t\tnext.apply( sid );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobj.matrixAutoUpdate = false;\r\n\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\tobj.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.KeyFrameAnimation.prototype = {\r\n\r\n\tconstructor: THREE.KeyFrameAnimation,\r\n\r\n\tplay: function ( startTime ) {\r\n\r\n\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\r\n\r\n\t\tif ( this.isPlaying === false ) {\r\n\r\n\t\t\tthis.isPlaying = true;\r\n\r\n\t\t\t// reset key cache\r\n\r\n\t\t\tvar h, hl = this.hierarchy.length,\r\n\t\t\t\tobject,\r\n\t\t\t\tnode;\r\n\r\n\t\t\tfor ( h = 0; h < hl; h ++ ) {\r\n\r\n\t\t\t\tobject = this.hierarchy[ h ];\r\n\t\t\t\tnode = this.data.hierarchy[ h ];\r\n\r\n\t\t\t\tif ( node.animationCache === undefined ) {\r\n\r\n\t\t\t\t\tnode.animationCache = {};\r\n\t\t\t\t\tnode.animationCache.prevKey = null;\r\n\t\t\t\t\tnode.animationCache.nextKey = null;\r\n\t\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\r\n\t\t\t\tif ( keys.length ) {\r\n\r\n\t\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\r\n\t\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\r\n\r\n\t\t\t\t\tthis.startTime = Math.min( keys[ 0 ].time, this.startTime );\r\n\t\t\t\t\tthis.endTime = Math.max( keys[ keys.length - 1 ].time, this.endTime );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.update( 0 );\r\n\r\n\t\t}\r\n\r\n\t\tthis.isPaused = false;\r\n\r\n\t\tTHREE.AnimationHandler.play( this );\r\n\r\n\t},\r\n\r\n\tstop: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\t\tthis.isPaused  = false;\r\n\r\n\t\tTHREE.AnimationHandler.stop( this );\r\n\r\n\t\t// reset JIT matrix and remove cache\r\n\r\n\t\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\r\n\r\n\t\t\tvar obj = this.hierarchy[ h ];\r\n\t\t\tvar node = this.data.hierarchy[ h ];\r\n\r\n\t\t\tif ( node.animationCache !== undefined ) {\r\n\r\n\t\t\t\tvar original = node.animationCache.originalMatrix;\r\n\r\n\t\t\t\toriginal.copy( obj.matrix );\r\n\t\t\t\tobj.matrix = original;\r\n\r\n\t\t\t\tdelete node.animationCache;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tupdate: function ( delta ) {\r\n\r\n\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\tthis.currentTime += delta * this.timeScale;\r\n\r\n\t\t//\r\n\r\n\t\tvar duration = this.data.length;\r\n\r\n\t\tif ( this.loop === true && this.currentTime > duration ) {\r\n\r\n\t\t\tthis.currentTime %= duration;\r\n\r\n\t\t}\r\n\r\n\t\tthis.currentTime = Math.min( this.currentTime, duration );\r\n\r\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\r\n\r\n\t\t\tvar object = this.hierarchy[ h ];\r\n\t\t\tvar node = this.data.hierarchy[ h ];\r\n\r\n\t\t\tvar keys = node.keys,\r\n\t\t\t\tanimationCache = node.animationCache;\r\n\r\n\r\n\t\t\tif ( keys.length ) {\r\n\r\n\t\t\t\tvar prevKey = animationCache.prevKey;\r\n\t\t\t\tvar nextKey = animationCache.nextKey;\r\n\r\n\t\t\t\tif ( nextKey.time <= this.currentTime ) {\r\n\r\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\r\n\r\n\t\t\t\t\t\tprevKey = nextKey;\r\n\t\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tanimationCache.prevKey = prevKey;\r\n\t\t\t\t\tanimationCache.nextKey = nextKey;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( nextKey.time >= this.currentTime ) {\r\n\r\n\t\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\r\n\t\t\t\tobject.matrixWorldNeedsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\r\n\tgetNextKeyWith: function ( sid, h, key ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\tkey = key % keys.length;\r\n\r\n\t\tfor ( ; key < keys.length; key ++ ) {\r\n\r\n\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\r\n\t\t\t\treturn keys[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn keys[ 0 ];\r\n\r\n\t},\r\n\r\n\tgetPrevKeyWith: function ( sid, h, key ) {\r\n\r\n\t\tvar keys = this.data.hierarchy[ h ].keys;\r\n\t\tkey = key >= 0 ? key : key + keys.length;\r\n\r\n\t\tfor ( ; key >= 0; key -- ) {\r\n\r\n\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\r\n\r\n\t\t\t\treturn keys[ key ];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn keys[ keys.length - 1 ];\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/animation/MorphAnimation.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com\r\n * @author willy-vvu / http://willy-vvu.github.io\r\n */\r\n\r\nTHREE.MorphAnimation = function ( mesh ) {\r\n\r\n\tthis.mesh = mesh;\r\n\tthis.frames = mesh.morphTargetInfluences.length;\r\n\tthis.currentTime = 0;\r\n\tthis.duration = 1000;\r\n\tthis.loop = true;\r\n\tthis.lastFrame = 0;\r\n\tthis.currentFrame = 0;\r\n\r\n\tthis.isPlaying = false;\r\n\r\n};\r\n\r\nTHREE.MorphAnimation.prototype = {\r\n\r\n\tconstructor: THREE.MorphAnimation,\r\n\r\n\tplay: function () {\r\n\r\n\t\tthis.isPlaying = true;\r\n\r\n\t},\r\n\r\n\tpause: function () {\r\n\r\n\t\tthis.isPlaying = false;\r\n\r\n\t},\r\n\r\n\tupdate: function ( delta ) {\r\n\r\n\t\tif ( this.isPlaying === false ) return;\r\n\r\n\t\tthis.currentTime += delta;\r\n\r\n\t\tif ( this.loop === true && this.currentTime > this.duration ) {\r\n\r\n\t\t\tthis.currentTime %= this.duration;\r\n\r\n\t\t}\r\n\r\n\t\tthis.currentTime = Math.min( this.currentTime, this.duration );\r\n\r\n\t\tvar frameTime = this.duration / this.frames;\r\n\t\tvar frame = Math.floor( this.currentTime / frameTime );\r\n\r\n\t\tvar influences = this.mesh.morphTargetInfluences;\r\n\r\n\t\tif ( frame !== this.currentFrame ) {\r\n\r\n\t\t\tinfluences[ this.lastFrame ] = 0;\r\n\t\t\tinfluences[ this.currentFrame ] = 1;\r\n\t\t\tinfluences[ frame ] = 0;\r\n\r\n\t\t\tthis.lastFrame = this.currentFrame;\r\n\t\t\tthis.currentFrame = frame;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( this.currentTime % frameTime ) / frameTime;\r\n\r\n\t\tinfluences[ frame ] = mix;\r\n\t\tinfluences[ this.lastFrame ] = 1 - mix;\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/BoxGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Cube.as\r\n */\r\n\r\nTHREE.BoxGeometry = function ( width, height, depth, widthSegments, heightSegments, depthSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'BoxGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\tdepth: depth,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tdepthSegments: depthSegments\r\n\t};\r\n\r\n\tthis.widthSegments = widthSegments || 1;\r\n\tthis.heightSegments = heightSegments || 1;\r\n\tthis.depthSegments = depthSegments || 1;\r\n\r\n\tvar scope = this;\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\tvar depth_half = depth / 2;\r\n\r\n\tbuildPlane( 'z', 'y', - 1, - 1, depth, height, width_half, 0 ); // px\r\n\tbuildPlane( 'z', 'y',   1, - 1, depth, height, - width_half, 1 ); // nx\r\n\tbuildPlane( 'x', 'z',   1,   1, width, depth, height_half, 2 ); // py\r\n\tbuildPlane( 'x', 'z',   1, - 1, width, depth, - height_half, 3 ); // ny\r\n\tbuildPlane( 'x', 'y',   1, - 1, width, height, depth_half, 4 ); // pz\r\n\tbuildPlane( 'x', 'y', - 1, - 1, width, height, - depth_half, 5 ); // nz\r\n\r\n\tfunction buildPlane( u, v, udir, vdir, width, height, depth, materialIndex ) {\r\n\r\n\t\tvar w, ix, iy,\r\n\t\tgridX = scope.widthSegments,\r\n\t\tgridY = scope.heightSegments,\r\n\t\twidth_half = width / 2,\r\n\t\theight_half = height / 2,\r\n\t\toffset = scope.vertices.length;\r\n\r\n\t\tif ( ( u === 'x' && v === 'y' ) || ( u === 'y' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'z';\r\n\r\n\t\t} else if ( ( u === 'x' && v === 'z' ) || ( u === 'z' && v === 'x' ) ) {\r\n\r\n\t\t\tw = 'y';\r\n\t\t\tgridY = scope.depthSegments;\r\n\r\n\t\t} else if ( ( u === 'z' && v === 'y' ) || ( u === 'y' && v === 'z' ) ) {\r\n\r\n\t\t\tw = 'x';\r\n\t\t\tgridX = scope.depthSegments;\r\n\r\n\t\t}\r\n\r\n\t\tvar gridX1 = gridX + 1,\r\n\t\tgridY1 = gridY + 1,\r\n\t\tsegment_width = width / gridX,\r\n\t\tsegment_height = height / gridY,\r\n\t\tnormal = new THREE.Vector3();\r\n\r\n\t\tnormal[ w ] = depth > 0 ? 1 : - 1;\r\n\r\n\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\t\tvar vector = new THREE.Vector3();\r\n\t\t\t\tvector[ u ] = ( ix * segment_width - width_half ) * udir;\r\n\t\t\t\tvector[ v ] = ( iy * segment_height - height_half ) * vdir;\r\n\t\t\t\tvector[ w ] = depth;\r\n\r\n\t\t\t\tscope.vertices.push( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\t\tvar uva = new THREE.Vector2( ix / gridX, 1 - iy / gridY );\r\n\t\t\t\tvar uvb = new THREE.Vector2( ix / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvc = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - ( iy + 1 ) / gridY );\r\n\t\t\t\tvar uvd = new THREE.Vector2( ( ix + 1 ) / gridX, 1 - iy / gridY );\r\n\r\n\t\t\t\tvar face = new THREE.Face3( a + offset, b + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\t\tface = new THREE.Face3( b + offset, c + offset, d + offset );\r\n\t\t\t\tface.normal.copy( normal );\r\n\t\t\t\tface.vertexNormals.push( normal.clone(), normal.clone(), normal.clone() );\r\n\t\t\t\tface.materialIndex = materialIndex;\r\n\r\n\t\t\t\tscope.faces.push( face );\r\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\r\n};\r\n\r\nTHREE.BoxGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry;\r\n\r\nTHREE.BoxGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.BoxGeometry(\r\n\t\tthis.parameters.width,\r\n\t\tthis.parameters.height,\r\n\t\tthis.parameters.depth,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments,\r\n\t\tthis.parameters.depthSegments\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\nTHREE.CubeGeometry = THREE.BoxGeometry; // backwards compatibility\r\n\r\n// File:src/extras/geometries/CircleGeometry.js\r\n\r\n/**\r\n * @author hughes\r\n */\r\n\r\nTHREE.CircleGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CircleGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar i, uvs = [],\r\n\tcenter = new THREE.Vector3(), centerUV = new THREE.Vector2( 0.5, 0.5 );\r\n\r\n\tthis.vertices.push( center );\r\n\tuvs.push( centerUV );\r\n\r\n\tfor ( i = 0; i <= segments; i ++ ) {\r\n\r\n\t\tvar vertex = new THREE.Vector3();\r\n\t\tvar segment = thetaStart + i / segments * thetaLength;\r\n\r\n\t\tvertex.x = radius * Math.cos( segment );\r\n\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\tthis.vertices.push( vertex );\r\n\t\tuvs.push( new THREE.Vector2( ( vertex.x / radius + 1 ) / 2, ( vertex.y / radius + 1 ) / 2 ) );\r\n\r\n\t}\r\n\r\n\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\tfor ( i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tthis.faces.push( new THREE.Face3( i, i + 1, 0, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ i ].clone(), uvs[ i + 1 ].clone(), centerUV.clone() ] );\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry;\r\n\r\nTHREE.CircleGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.CircleGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.segments,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/CircleBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n */\r\n\r\nTHREE.CircleBufferGeometry = function ( radius, segments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'CircleBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tsegments: segments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tvar vertices = segments + 2;\r\n\r\n\tvar positions = new Float32Array( vertices * 3 );\r\n\tvar normals = new Float32Array( vertices * 3 );\r\n\tvar uvs = new Float32Array( vertices * 2 );\r\n\r\n\t// center data is already zero, but need to set a few extras\r\n\tnormals[ 3 ] = 1.0;\r\n\tuvs[ 0 ] = 0.5;\r\n\tuvs[ 1 ] = 0.5;\r\n\r\n\tfor ( var s = 0, i = 3, ii = 2 ; s <= segments; s ++, i += 3, ii += 2 ) {\r\n\r\n\t\tvar segment = thetaStart + s / segments * thetaLength;\r\n\r\n\t\tpositions[ i ] = radius * Math.cos( segment );\r\n\t\tpositions[ i + 1 ] = radius * Math.sin( segment );\r\n\r\n\t\tnormals[ i + 2 ] = 1; // normal z\r\n\r\n\t\tuvs[ ii ] = ( positions[ i ] / radius + 1 ) / 2;\r\n\t\tuvs[ ii + 1 ] = ( positions[ i + 1 ] / radius + 1 ) / 2;\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var i = 1; i <= segments; i ++ ) {\r\n\r\n\t\tindices.push( i );\r\n\t\tindices.push( i + 1 );\r\n\t\tindices.push( 0 );\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.CircleBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.CircleBufferGeometry.prototype.constructor = THREE.CircleBufferGeometry;\r\n\r\nTHREE.CircleBufferGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.CircleBufferGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.segments,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/CylinderGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.CylinderGeometry = function ( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'CylinderGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradiusTop: radiusTop,\r\n\t\tradiusBottom: radiusBottom,\r\n\t\theight: height,\r\n\t\tradialSegments: radialSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\topenEnded: openEnded,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradiusTop = radiusTop !== undefined ? radiusTop : 20;\r\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 20;\r\n\theight = height !== undefined ? height : 100;\r\n\r\n\tradialSegments = radialSegments || 8;\r\n\theightSegments = heightSegments || 1;\r\n\r\n\topenEnded = openEnded !== undefined ? openEnded : false;\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : 2 * Math.PI;\r\n\r\n\tvar heightHalf = height / 2;\r\n\r\n\tvar x, y, vertices = [], uvs = [];\r\n\r\n\tfor ( y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\t\tvar uvsRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\r\n\r\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / radialSegments;\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = radius * Math.sin( u * thetaLength + thetaStart );\r\n\t\t\tvertex.y = - v * height + heightHalf;\r\n\t\t\tvertex.z = radius * Math.cos( u * thetaLength + thetaStart );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tverticesRow.push( this.vertices.length - 1 );\r\n\t\t\tuvsRow.push( new THREE.Vector2( u, 1 - v ) );\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\t\tuvs.push( uvsRow );\r\n\r\n\t}\r\n\r\n\tvar tanTheta = ( radiusBottom - radiusTop ) / height;\r\n\tvar na, nb;\r\n\r\n\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\tif ( radiusTop !== 0 ) {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 0 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 0 ][ x + 1 ] ].clone();\r\n\r\n\t\t} else {\r\n\r\n\t\t\tna = this.vertices[ vertices[ 1 ][ x ] ].clone();\r\n\t\t\tnb = this.vertices[ vertices[ 1 ][ x + 1 ] ].clone();\r\n\r\n\t\t}\r\n\r\n\t\tna.setY( Math.sqrt( na.x * na.x + na.z * na.z ) * tanTheta ).normalize();\r\n\t\tnb.setY( Math.sqrt( nb.x * nb.x + nb.z * nb.z ) * tanTheta ).normalize();\r\n\r\n\t\tfor ( y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x ];\r\n\t\t\tvar v2 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x + 1 ];\r\n\t\t\tvar v4 = vertices[ y ][ x + 1 ];\r\n\r\n\t\t\tvar n1 = na.clone();\r\n\t\t\tvar n2 = na.clone();\r\n\t\t\tvar n3 = nb.clone();\r\n\t\t\tvar n4 = nb.clone();\r\n\r\n\t\t\tvar uv1 = uvs[ y ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ y + 1 ][ x ].clone();\r\n\t\t\tvar uv3 = uvs[ y + 1 ][ x + 1 ].clone();\r\n\t\t\tvar uv4 = uvs[ y ][ x + 1 ].clone();\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v4, [ n1, n2, n4 ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv4 ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v2, v3, v4, [ n2.clone(), n3, n4.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv2.clone(), uv3, uv4.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// top cap\r\n\r\n\tif ( openEnded === false && radiusTop > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ 0 ][ x ];\r\n\t\t\tvar v2 = vertices[ 0 ][ x + 1 ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ 0 ][ x ].clone();\r\n\t\t\tvar uv2 = uvs[ 0 ][ x + 1 ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 0 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 1 ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// bottom cap\r\n\r\n\tif ( openEnded === false && radiusBottom > 0 ) {\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( 0, - heightHalf, 0 ) );\r\n\r\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ heightSegments ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ heightSegments ][ x ];\r\n\t\t\tvar v3 = this.vertices.length - 1;\r\n\r\n\t\t\tvar n1 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n2 = new THREE.Vector3( 0, - 1, 0 );\r\n\t\t\tvar n3 = new THREE.Vector3( 0, - 1, 0 );\r\n\r\n\t\t\tvar uv1 = uvs[ heightSegments ][ x + 1 ].clone();\r\n\t\t\tvar uv2 = uvs[ heightSegments ][ x ].clone();\r\n\t\t\tvar uv3 = new THREE.Vector2( uv2.x, 1 );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n1, n2, n3 ], undefined, 2 ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uv1, uv2, uv3 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.CylinderGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry;\r\n\r\nTHREE.CylinderGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.CylinderGeometry(\r\n\t\tthis.parameters.radiusTop,\r\n\t\tthis.parameters.radiusBottom,\r\n\t\tthis.parameters.height,\r\n\t\tthis.parameters.radialSegments,\r\n\t\tthis.parameters.heightSegments,\r\n\t\tthis.parameters.openEnded,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/EdgesGeometry.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.EdgesGeometry = function ( geometry, thresholdAngle ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\r\n\r\n\tvar thresholdDot = Math.cos( THREE.Math.degToRad( thresholdAngle ) );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\tvar sortFunction = function ( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t};\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tvar geometry2;\r\n\r\n\tif ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tgeometry2 = new THREE.Geometry();\r\n\t\tgeometry2.fromBufferGeometry( geometry );\r\n\r\n\t} else {\r\n\r\n\t\tgeometry2 = geometry.clone();\r\n\r\n\t}\r\n\r\n\tgeometry2.mergeVertices();\r\n\tgeometry2.computeFaceNormals();\r\n\r\n\tvar vertices = geometry2.vertices;\r\n\tvar faces = geometry2.faces;\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tvar face = faces[ i ];\r\n\r\n\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\tvar key = edge.toString();\r\n\r\n\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\thash[ key ] = { vert1: edge[ 0 ], vert2: edge[ 1 ], face1: i, face2: undefined };\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\thash[ key ].face2 = i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar coords = [];\r\n\r\n\tfor ( var key in hash ) {\r\n\r\n\t\tvar h = hash[ key ];\r\n\r\n\t\tif ( h.face2 === undefined || faces[ h.face1 ].normal.dot( faces[ h.face2 ].normal ) <= thresholdDot ) {\r\n\r\n\t\t\tvar vertex = vertices[ h.vert1 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t\tvertex = vertices[ h.vert2 ];\r\n\t\t\tcoords.push( vertex.x );\r\n\t\t\tcoords.push( vertex.y );\r\n\t\t\tcoords.push( vertex.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( new Float32Array( coords ), 3 ) );\r\n\r\n};\r\n\r\nTHREE.EdgesGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.EdgesGeometry.prototype.constructor = THREE.EdgesGeometry;\r\n\r\n// File:src/extras/geometries/ExtrudeGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n *\r\n * Creates extruded geometry from a path shape.\r\n *\r\n * parameters = {\r\n *\r\n *  curveSegments: <int>, // number of points on the curves\r\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\r\n *  amount: <int>, // Depth to extrude the shape\r\n *\r\n *  bevelEnabled: <bool>, // turn on bevel\r\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\r\n *  bevelSize: <float>, // how far from shape outline is bevel\r\n *  bevelSegments: <int>, // number of bevel layers\r\n *\r\n *  extrudePath: <THREE.CurvePath> // 3d spline path to extrude shape along. (creates Frames if .frames aren't defined)\r\n *  frames: <THREE.TubeGeometry.FrenetFrames> // containing arrays of tangents, normals, binormals\r\n *\r\n *  uvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ExtrudeGeometry = function ( shapes, options ) {\r\n\r\n\tif ( typeof( shapes ) === \"undefined\" ) {\r\n\r\n\t\tshapes = [];\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ExtrudeGeometry';\r\n\r\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\t// can't really use automatic vertex normals\r\n\t// as then front and back sides get smoothed too\r\n\t// should do separate smoothing just for sides\r\n\r\n\t//this.computeVertexNormals();\r\n\r\n\t//console.log( \"took\", ( Date.now() - startTime ) );\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry;\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tvar sl = shapes.length;\r\n\r\n\tfor ( var s = 0; s < sl; s ++ ) {\r\n\r\n\t\tvar shape = shapes[ s ];\r\n\t\tthis.addShape( shape, options );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tvar amount = options.amount !== undefined ? options.amount : 100;\r\n\r\n\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6; // 10\r\n\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2; // 8\r\n\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\r\n\r\n\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true; // false\r\n\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar steps = options.steps !== undefined ? options.steps : 1;\r\n\r\n\tvar extrudePath = options.extrudePath;\r\n\tvar extrudePts, extrudeByPath = false;\r\n\r\n\t// Use default WorldUVGenerator if no UV generators are specified.\r\n\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;\r\n\r\n\tvar splineTube, binormal, normal, position2;\r\n\tif ( extrudePath ) {\r\n\r\n\t\textrudePts = extrudePath.getSpacedPoints( steps );\r\n\r\n\t\textrudeByPath = true;\r\n\t\tbevelEnabled = false; // bevels not supported for path extrusion\r\n\r\n\t\t// SETUP TNB variables\r\n\r\n\t\t// Reuse TNB from TubeGeomtry for now.\r\n\t\t// TODO1 - have a .isClosed in spline?\r\n\r\n\t\tsplineTube = options.frames !== undefined ? options.frames : new THREE.TubeGeometry.FrenetFrames( extrudePath, steps, false );\r\n\r\n\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\r\n\r\n\t\tbinormal = new THREE.Vector3();\r\n\t\tnormal = new THREE.Vector3();\r\n\t\tposition2 = new THREE.Vector3();\r\n\r\n\t}\r\n\r\n\t// Safeguards if bevels are not enabled\r\n\r\n\tif ( ! bevelEnabled ) {\r\n\r\n\t\tbevelSegments = 0;\r\n\t\tbevelThickness = 0;\r\n\t\tbevelSize = 0;\r\n\r\n\t}\r\n\r\n\t// Variables initialization\r\n\r\n\tvar ahole, h, hl; // looping of holes\r\n\tvar scope = this;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\r\n\t\t\tif ( THREE.Shape.Utils.isClockWise( ahole ) ) {\r\n\r\n\t\t\t\tholes[ h ] = ahole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false; // If vertices are in order now, we shouldn't need to worry about them again (hopefully)!\r\n\r\n\t}\r\n\r\n\r\n\tvar faces = THREE.Shape.Utils.triangulateShape ( vertices, holes );\r\n\r\n\t/* Vertices */\r\n\r\n\tvar contour = vertices; // vertices has all points but contour has only points of circumference\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\tvertices = vertices.concat( ahole );\r\n\r\n\t}\r\n\r\n\r\n\tfunction scalePt2 ( pt, vec, size ) {\r\n\r\n\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\r\n\r\n\t\treturn vec.clone().multiplyScalar( size ).add( pt );\r\n\r\n\t}\r\n\r\n\tvar b, bs, t, z,\r\n\t\tvert, vlen = vertices.length,\r\n\t\tface, flen = faces.length;\r\n\r\n\r\n\t// Find directions for point movement\r\n\r\n\r\n\tfunction getBevelVec( inPt, inPrev, inNext ) {\r\n\r\n\t\tvar EPSILON = 0.0000000001;\r\n\r\n\t\t// computes for inPt the corresponding point inPt' on a new contour\r\n\t\t//   shifted by 1 unit (length of normalized vector) to the left\r\n\t\t// if we walk along contour clockwise, this new contour is outside the old one\r\n\t\t//\r\n\t\t// inPt' is the intersection of the two lines parallel to the two\r\n\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\r\n\r\n\t\tvar v_trans_x, v_trans_y, shrink_by = 1;\t\t// resulting translation vector for inPt\r\n\r\n\t\t// good reading for geometry algorithms (here: line-line intersection)\r\n\t\t// http://geomalgorithms.com/a05-_intersect-1.html\r\n\r\n\t\tvar v_prev_x = inPt.x - inPrev.x, v_prev_y = inPt.y - inPrev.y;\r\n\t\tvar v_next_x = inNext.x - inPt.x, v_next_y = inNext.y - inPt.y;\r\n\r\n\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\r\n\r\n\t\t// check for collinear edges\r\n\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\tif ( Math.abs( collinear0 ) > EPSILON ) {\r\n\r\n\t\t\t// not collinear\r\n\r\n\t\t\t// length of vectors for normalizing\r\n\r\n\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\r\n\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\r\n\r\n\t\t\t// shift adjacent points by unit vectors to the left\r\n\r\n\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\r\n\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\r\n\r\n\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\r\n\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\r\n\r\n\t\t\t// scaling factor for v_prev to intersection point\r\n\r\n\t\t\tvar sf = (  ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\r\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x    ) /\r\n\t\t\t\t\t  ( v_prev_x * v_next_y - v_prev_y * v_next_x );\r\n\r\n\t\t\t// vector from inPt to intersection point\r\n\r\n\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\r\n\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\r\n\r\n\t\t\t// Don't normalize!, otherwise sharp corners become ugly\r\n\t\t\t//  but prevent crazy spikes\r\n\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\r\n\t\t\tif ( v_trans_lensq <= 2 ) {\r\n\r\n\t\t\t\treturn\tnew THREE.Vector2( v_trans_x, v_trans_y );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// handle special case of collinear edges\r\n\r\n\t\t\tvar direction_eq = false;\t\t// assumes: opposite\r\n\t\t\tif ( v_prev_x > EPSILON ) {\r\n\r\n\t\t\t\tif ( v_next_x > EPSILON ) {\r\n\r\n\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif ( v_prev_x < - EPSILON ) {\r\n\r\n\t\t\t\t\tif ( v_next_x < - EPSILON ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\r\n\r\n\t\t\t\t\t\tdirection_eq = true;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( direction_eq ) {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\r\n\t\t\t\tv_trans_x = - v_prev_y;\r\n\t\t\t\tv_trans_y =  v_prev_x;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\r\n\t\t\t\tv_trans_x = v_prev_x;\r\n\t\t\t\tv_trans_y = v_prev_y;\r\n\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn\tnew THREE.Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\r\n\r\n\t}\r\n\r\n\r\n\tvar contourMovements = [];\r\n\r\n\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\tif ( j === il ) j = 0;\r\n\t\tif ( k === il ) k = 0;\r\n\r\n\t\t//  (j)---(i)---(k)\r\n\t\t// console.log('i,j,k', i, j , k)\r\n\r\n\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\r\n\r\n\t}\r\n\r\n\tvar holesMovements = [], oneHoleMovements, verticesMovements = contourMovements.concat();\r\n\r\n\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\tahole = holes[ h ];\r\n\r\n\t\toneHoleMovements = [];\r\n\r\n\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\r\n\r\n\t\t\tif ( j === il ) j = 0;\r\n\t\t\tif ( k === il ) k = 0;\r\n\r\n\t\t\t//  (j)---(i)---(k)\r\n\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\r\n\r\n\t\t}\r\n\r\n\t\tholesMovements.push( oneHoleMovements );\r\n\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\r\n\r\n\t}\r\n\r\n\r\n\t// Loop bevelSegments, 1 for the front, 1 for the back\r\n\r\n\tfor ( b = 0; b < bevelSegments; b ++ ) {\r\n\r\n\t\t//for ( b = bevelSegments; b > 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\r\n\t\t//z = bevelThickness * t;\r\n\t\tbs = bevelSize * ( Math.sin ( t * Math.PI / 2 ) ); // curved\r\n\t\t//bs = bevelSize * t; // linear\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\r\n\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tv( vert.x, vert.y,  - z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tbs = bevelSize;\r\n\r\n\t// Back facing vertices\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\tv( vert.x, vert.y, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\r\n\r\n\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\r\n\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\r\n\r\n\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Add stepped vertices...\r\n\t// Including front facing vertices\r\n\r\n\tvar s;\r\n\r\n\tfor ( s = 1; s <= steps; s ++ ) {\r\n\r\n\t\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\r\n\r\n\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\tv( vert.x, vert.y, amount / steps * s );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\r\n\r\n\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\r\n\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\r\n\r\n\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\r\n\r\n\t\t\t\tv( position2.x, position2.y, position2.z );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Add bevel segments planes\r\n\r\n\t//for ( b = 1; b <= bevelSegments; b ++ ) {\r\n\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\r\n\r\n\t\tt = b / bevelSegments;\r\n\t\tz = bevelThickness * ( 1 - t );\r\n\t\t//bs = bevelSize * ( 1-Math.sin ( ( 1 - t ) * Math.PI/2 ) );\r\n\t\tbs = bevelSize * Math.sin ( t * Math.PI / 2 );\r\n\r\n\t\t// contract shape\r\n\r\n\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\r\n\r\n\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\r\n\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t}\r\n\r\n\t\t// expand holes\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\toneHoleMovements = holesMovements[ h ];\r\n\r\n\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\r\n\r\n\t\t\t\tif ( ! extrudeByPath ) {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y,  amount + z );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/* Faces */\r\n\r\n\t// Top and bottom faces\r\n\r\n\tbuildLidFaces();\r\n\r\n\t// Sides faces\r\n\r\n\tbuildSideFaces();\r\n\r\n\r\n\t/////  Internal functions\r\n\r\n\tfunction buildLidFaces() {\r\n\r\n\t\tif ( bevelEnabled ) {\r\n\r\n\t\t\tvar layer = 0; // steps + 1\r\n\t\t\tvar offset = vlen * layer;\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tlayer = steps + bevelSegments * 2;\r\n\t\t\toffset = vlen * layer;\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Bottom faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Top faces\r\n\r\n\t\t\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\t\t\tface = faces[ i ];\r\n\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// Create faces for the z-sides of the shape\r\n\r\n\tfunction buildSideFaces() {\r\n\r\n\t\tvar layeroffset = 0;\r\n\t\tsidewalls( contour, layeroffset );\r\n\t\tlayeroffset += contour.length;\r\n\r\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\r\n\r\n\t\t\tahole = holes[ h ];\r\n\t\t\tsidewalls( ahole, layeroffset );\r\n\r\n\t\t\t//, true\r\n\t\t\tlayeroffset += ahole.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction sidewalls( contour, layeroffset ) {\r\n\r\n\t\tvar j, k;\r\n\t\ti = contour.length;\r\n\r\n\t\twhile ( -- i >= 0 ) {\r\n\r\n\t\t\tj = i;\r\n\t\t\tk = i - 1;\r\n\t\t\tif ( k < 0 ) k = contour.length - 1;\r\n\r\n\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\r\n\r\n\t\t\tvar s = 0, sl = steps  + bevelSegments * 2;\r\n\r\n\t\t\tfor ( s = 0; s < sl; s ++ ) {\r\n\r\n\t\t\t\tvar slen1 = vlen * s;\r\n\t\t\t\tvar slen2 = vlen * ( s + 1 );\r\n\r\n\t\t\t\tvar a = layeroffset + j + slen1,\r\n\t\t\t\t\tb = layeroffset + k + slen1,\r\n\t\t\t\t\tc = layeroffset + k + slen2,\r\n\t\t\t\t\td = layeroffset + j + slen2;\r\n\r\n\t\t\t\tf4( a, b, c, d, contour, s, sl, j, k );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction v( x, y, z ) {\r\n\r\n\t\tscope.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\r\n\t}\r\n\r\n\tfunction f3( a, b, c ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, c ) );\r\n\r\n\t\tvar uvs = uvgen.generateTopUV( scope, a, b, c );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( uvs );\r\n\r\n\t}\r\n\r\n\tfunction f4( a, b, c, d, wallContour, stepIndex, stepsLength, contourIndex1, contourIndex2 ) {\r\n\r\n\t\ta += shapesOffset;\r\n\t\tb += shapesOffset;\r\n\t\tc += shapesOffset;\r\n\t\td += shapesOffset;\r\n\r\n\t\tscope.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\tscope.faces.push( new THREE.Face3( b, c, d ) );\r\n\r\n\t\tvar uvs = uvgen.generateSideWallUV( scope, a, b, c, d );\r\n\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 0 ], uvs[ 1 ], uvs[ 3 ] ] );\r\n\t\tscope.faceVertexUvs[ 0 ].push( [ uvs[ 1 ], uvs[ 2 ], uvs[ 3 ] ] );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.ExtrudeGeometry.WorldUVGenerator = {\r\n\r\n\tgenerateTopUV: function ( geometry, indexA, indexB, indexC ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\r\n\t\treturn [\r\n\t\t\tnew THREE.Vector2( a.x, a.y ),\r\n\t\t\tnew THREE.Vector2( b.x, b.y ),\r\n\t\t\tnew THREE.Vector2( c.x, c.y )\r\n\t\t];\r\n\r\n\t},\r\n\r\n\tgenerateSideWallUV: function ( geometry, indexA, indexB, indexC, indexD ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\r\n\t\tvar a = vertices[ indexA ];\r\n\t\tvar b = vertices[ indexB ];\r\n\t\tvar c = vertices[ indexC ];\r\n\t\tvar d = vertices[ indexD ];\r\n\r\n\t\tif ( Math.abs( a.y - b.y ) < 0.01 ) {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.x, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.x, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.x, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.x, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2( a.y, 1 - a.z ),\r\n\t\t\t\tnew THREE.Vector2( b.y, 1 - b.z ),\r\n\t\t\t\tnew THREE.Vector2( c.y, 1 - c.z ),\r\n\t\t\t\tnew THREE.Vector2( d.y, 1 - d.z )\r\n\t\t\t];\r\n\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\n// File:src/extras/geometries/ShapeGeometry.js\r\n\r\n/**\r\n * @author jonobr1 / http://jonobr1.com\r\n *\r\n * Creates a one-sided polygonal geometry from a path shape. Similar to\r\n * ExtrudeGeometry.\r\n *\r\n * parameters = {\r\n *\r\n *\tcurveSegments: <int>, // number of points on the curves. NOT USED AT THE MOMENT.\r\n *\r\n *\tmaterial: <int> // material index for front and back faces\r\n *\tuvGenerator: <Object> // object that provides UV generator functions\r\n *\r\n * }\r\n **/\r\n\r\nTHREE.ShapeGeometry = function ( shapes, options ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ShapeGeometry';\r\n\r\n\tif ( Array.isArray( shapes ) === false ) shapes = [ shapes ];\r\n\r\n\tthis.addShapeList( shapes, options );\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.ShapeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry;\r\n\r\n/**\r\n * Add an array of shapes to THREE.ShapeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShapeList = function ( shapes, options ) {\r\n\r\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\r\n\r\n\t\tthis.addShape( shapes[ i ], options );\r\n\r\n\t}\r\n\r\n\treturn this;\r\n\r\n};\r\n\r\n/**\r\n * Adds a shape to THREE.ShapeGeometry, based on THREE.ExtrudeGeometry.\r\n */\r\nTHREE.ShapeGeometry.prototype.addShape = function ( shape, options ) {\r\n\r\n\tif ( options === undefined ) options = {};\r\n\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\r\n\r\n\tvar material = options.material;\r\n\tvar uvgen = options.UVGenerator === undefined ? THREE.ExtrudeGeometry.WorldUVGenerator : options.UVGenerator;\r\n\r\n\t//\r\n\r\n\tvar i, l, hole;\r\n\r\n\tvar shapesOffset = this.vertices.length;\r\n\tvar shapePoints = shape.extractPoints( curveSegments );\r\n\r\n\tvar vertices = shapePoints.shape;\r\n\tvar holes = shapePoints.holes;\r\n\r\n\tvar reverse = ! THREE.Shape.Utils.isClockWise( vertices );\r\n\r\n\tif ( reverse ) {\r\n\r\n\t\tvertices = vertices.reverse();\r\n\r\n\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe...\r\n\r\n\t\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\t\thole = holes[ i ];\r\n\r\n\t\t\tif ( THREE.Shape.Utils.isClockWise( hole ) ) {\r\n\r\n\t\t\t\tholes[ i ] = hole.reverse();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treverse = false;\r\n\r\n\t}\r\n\r\n\tvar faces = THREE.Shape.Utils.triangulateShape( vertices, holes );\r\n\r\n\t// Vertices\r\n\r\n\tfor ( i = 0, l = holes.length; i < l; i ++ ) {\r\n\r\n\t\thole = holes[ i ];\r\n\t\tvertices = vertices.concat( hole );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar vert, vlen = vertices.length;\r\n\tvar face, flen = faces.length;\r\n\r\n\tfor ( i = 0; i < vlen; i ++ ) {\r\n\r\n\t\tvert = vertices[ i ];\r\n\r\n\t\tthis.vertices.push( new THREE.Vector3( vert.x, vert.y, 0 ) );\r\n\r\n\t}\r\n\r\n\tfor ( i = 0; i < flen; i ++ ) {\r\n\r\n\t\tface = faces[ i ];\r\n\r\n\t\tvar a = face[ 0 ] + shapesOffset;\r\n\t\tvar b = face[ 1 ] + shapesOffset;\r\n\t\tvar c = face[ 2 ] + shapesOffset;\r\n\r\n\t\tthis.faces.push( new THREE.Face3( a, b, c, null, null, material ) );\r\n\t\tthis.faceVertexUvs[ 0 ].push( uvgen.generateTopUV( this, a, b, c ) );\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/LatheGeometry.js\r\n\r\n/**\r\n * @author astrodud / http://astrodud.isgreat.org/\r\n * @author zz85 / https://github.com/zz85\r\n * @author bhouston / http://exocortex.com\r\n */\r\n\r\n// points - to create a closed torus, one must use a set of points \r\n//    like so: [ a, b, c, d, a ], see first is the same as last.\r\n// segments - the number of circumference segments to create\r\n// phiStart - the starting radian\r\n// phiLength - the radian (0 to 2*PI) range of the lathed section\r\n//    2*pi is a closed lathe, less than 2PI is a portion.\r\n\r\nTHREE.LatheGeometry = function ( points, segments, phiStart, phiLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'LatheGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpoints: points,\r\n\t\tsegments: segments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength\r\n\t};\r\n\r\n\tsegments = segments || 12;\r\n\tphiStart = phiStart || 0;\r\n\tphiLength = phiLength || 2 * Math.PI;\r\n\r\n\tvar inversePointLength = 1.0 / ( points.length - 1 );\r\n\tvar inverseSegments = 1.0 / segments;\r\n\r\n\tfor ( var i = 0, il = segments; i <= il; i ++ ) {\r\n\r\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\r\n\r\n\t\tvar c = Math.cos( phi ),\r\n\t\t\ts = Math.sin( phi );\r\n\r\n\t\tfor ( var j = 0, jl = points.length; j < jl; j ++ ) {\r\n\r\n\t\t\tvar pt = points[ j ];\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\r\n\t\t\tvertex.x = c * pt.x - s * pt.y;\r\n\t\t\tvertex.y = s * pt.x + c * pt.y;\r\n\t\t\tvertex.z = pt.z;\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar np = points.length;\r\n\r\n\tfor ( var i = 0, il = segments; i < il; i ++ ) {\r\n\r\n\t\tfor ( var j = 0, jl = points.length - 1; j < jl; j ++ ) {\r\n\r\n\t\t\tvar base = j + np * i;\r\n\t\t\tvar a = base;\r\n\t\t\tvar b = base + np;\r\n\t\t\tvar c = base + 1 + np;\r\n\t\t\tvar d = base + 1;\r\n\r\n\t\t\tvar u0 = i * inverseSegments;\r\n\t\t\tvar v0 = j * inversePointLength;\r\n\t\t\tvar u1 = u0 + inverseSegments;\r\n\t\t\tvar v1 = v0 + inversePointLength;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u0, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [\r\n\r\n\t\t\t\tnew THREE.Vector2( u1, v0 ),\r\n\t\t\t\tnew THREE.Vector2( u1, v1 ),\r\n\t\t\t\tnew THREE.Vector2( u0, v1 )\r\n\r\n\t\t\t] );\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.mergeVertices();\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.LatheGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry;\r\n\r\n// File:src/extras/geometries/PlaneGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PlaneGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\r\n\r\n};\r\n\r\nTHREE.PlaneGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry;\r\n\r\nTHREE.PlaneGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.PlaneGeometry(\r\n\t\tthis.parameters.width,\r\n\t\tthis.parameters.height,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/PlaneBufferGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://papervision3d.googlecode.com/svn/trunk/as3/trunk/src/org/papervision3d/objects/primitives/Plane.as\r\n */\r\n\r\nTHREE.PlaneBufferGeometry = function ( width, height, widthSegments, heightSegments ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'PlaneBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\twidth: width,\r\n\t\theight: height,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments\r\n\t};\r\n\r\n\tvar width_half = width / 2;\r\n\tvar height_half = height / 2;\r\n\r\n\tvar gridX = Math.floor( widthSegments ) || 1;\r\n\tvar gridY = Math.floor( heightSegments ) || 1;\r\n\r\n\tvar gridX1 = gridX + 1;\r\n\tvar gridY1 = gridY + 1;\r\n\r\n\tvar segment_width = width / gridX;\r\n\tvar segment_height = height / gridY;\r\n\r\n\tvar vertices = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar normals = new Float32Array( gridX1 * gridY1 * 3 );\r\n\tvar uvs = new Float32Array( gridX1 * gridY1 * 2 );\r\n\r\n\tvar offset = 0;\r\n\tvar offset2 = 0;\r\n\r\n\tfor ( var iy = 0; iy < gridY1; iy ++ ) {\r\n\r\n\t\tvar y = iy * segment_height - height_half;\r\n\r\n\t\tfor ( var ix = 0; ix < gridX1; ix ++ ) {\r\n\r\n\t\t\tvar x = ix * segment_width - width_half;\r\n\r\n\t\t\tvertices[ offset ] = x;\r\n\t\t\tvertices[ offset + 1 ] = - y;\r\n\r\n\t\t\tnormals[ offset + 2 ] = 1;\r\n\r\n\t\t\tuvs[ offset2 ] = ix / gridX;\r\n\t\t\tuvs[ offset2 + 1 ] = 1 - ( iy / gridY );\r\n\r\n\t\t\toffset += 3;\r\n\t\t\toffset2 += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\toffset = 0;\r\n\r\n\tvar indices = new ( ( vertices.length / 3 ) > 65535 ? Uint32Array : Uint16Array )( gridX * gridY * 6 );\r\n\r\n\tfor ( var iy = 0; iy < gridY; iy ++ ) {\r\n\r\n\t\tfor ( var ix = 0; ix < gridX; ix ++ ) {\r\n\r\n\t\t\tvar a = ix + gridX1 * iy;\r\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\r\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\r\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\r\n\r\n\t\t\tindices[ offset ] = a;\r\n\t\t\tindices[ offset + 1 ] = b;\r\n\t\t\tindices[ offset + 2 ] = d;\r\n\r\n\t\t\tindices[ offset + 3 ] = b;\r\n\t\t\tindices[ offset + 4 ] = c;\r\n\t\t\tindices[ offset + 5 ] = d;\r\n\r\n\t\t\toffset += 6;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tthis.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tthis.addAttribute( 'normal', new THREE.BufferAttribute( normals, 3 ) );\r\n\tthis.addAttribute( 'uv', new THREE.BufferAttribute( uvs, 2 ) );\r\n\r\n};\r\n\r\nTHREE.PlaneBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry;\r\n\r\nTHREE.PlaneBufferGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.PlaneBufferGeometry(\r\n\t\tthis.parameters.width,\r\n\t\tthis.parameters.height,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/RingGeometry.js\r\n\r\n/**\r\n * @author Kaleb Murphy\r\n */\r\n\r\nTHREE.RingGeometry = function ( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'RingGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tinnerRadius: innerRadius,\r\n\t\touterRadius: outerRadius,\r\n\t\tthetaSegments: thetaSegments,\r\n\t\tphiSegments: phiSegments,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tinnerRadius = innerRadius || 0;\r\n\touterRadius = outerRadius || 50;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\r\n\r\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\r\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 8;\r\n\r\n\tvar i, o, uvs = [], radius = innerRadius, radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\r\n\r\n\tfor ( i = 0; i < phiSegments + 1; i ++ ) {\r\n\r\n\t\t// concentric circles inside ring\r\n\r\n\t\tfor ( o = 0; o < thetaSegments + 1; o ++ ) {\r\n\r\n\t\t\t// number of segments per circle\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvar segment = thetaStart + o / thetaSegments * thetaLength;\r\n\t\t\tvertex.x = radius * Math.cos( segment );\r\n\t\t\tvertex.y = radius * Math.sin( segment );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\t\t\tuvs.push( new THREE.Vector2( ( vertex.x / outerRadius + 1 ) / 2, ( vertex.y / outerRadius + 1 ) / 2 ) );\r\n\r\n\t\t}\r\n\r\n\t\tradius += radiusStep;\r\n\r\n\t}\r\n\r\n\tvar n = new THREE.Vector3( 0, 0, 1 );\r\n\r\n\tfor ( i = 0; i < phiSegments; i ++ ) {\r\n\r\n\t\t// concentric circles inside ring\r\n\r\n\t\tvar thetaSegment = i * ( thetaSegments + 1 );\r\n\r\n\t\tfor ( o = 0; o < thetaSegments ; o ++ ) {\r\n\r\n\t\t\t// number of segments per circle\r\n\r\n\t\t\tvar segment = o + thetaSegment;\r\n\r\n\t\t\tvar v1 = segment;\r\n\t\t\tvar v2 = segment + thetaSegments + 1;\r\n\t\t\tvar v3 = segment + thetaSegments + 2;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\r\n\t\t\tv1 = segment;\r\n\t\t\tv2 = segment + thetaSegments + 2;\r\n\t\t\tv3 = segment + 1;\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( v1, v2, v3, [ n.clone(), n.clone(), n.clone() ] ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ v1 ].clone(), uvs[ v2 ].clone(), uvs[ v3 ].clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.RingGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.RingGeometry.prototype.constructor = THREE.RingGeometry;\r\n\r\nTHREE.RingGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.RingGeometry(\r\n\t\tthis.parameters.innerRadius,\r\n\t\tthis.parameters.outerRadius,\r\n\t\tthis.parameters.thetaSegments,\r\n\t\tthis.parameters.phiSegments,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/SphereGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.SphereGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'SphereGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tthis.fromBufferGeometry( new THREE.SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\r\n\r\n};\r\n\r\nTHREE.SphereGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry;\r\n\r\nTHREE.SphereGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.SphereGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments,\r\n\t\tthis.parameters.phiStart,\r\n\t\tthis.parameters.phiLength,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/SphereBufferGeometry.js\r\n\r\n/**\r\n * @author benaadams / https://twitter.com/ben_a_adams\r\n * based on THREE.SphereGeometry\r\n */\r\n\r\nTHREE.SphereBufferGeometry = function ( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tthis.type = 'SphereBufferGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\twidthSegments: widthSegments,\r\n\t\theightSegments: heightSegments,\r\n\t\tphiStart: phiStart,\r\n\t\tphiLength: phiLength,\r\n\t\tthetaStart: thetaStart,\r\n\t\tthetaLength: thetaLength\r\n\t};\r\n\r\n\tradius = radius || 50;\r\n\r\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\r\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\r\n\r\n\tphiStart = phiStart !== undefined ? phiStart : 0;\r\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\r\n\r\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\r\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\r\n\r\n\tvar thetaEnd = thetaStart + thetaLength;\r\n\r\n\tvar vertexCount = ( ( widthSegments + 1 ) * ( heightSegments + 1 ) );\r\n\r\n\tvar positions = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar normals = new THREE.BufferAttribute( new Float32Array( vertexCount * 3 ), 3 );\r\n\tvar uvs = new THREE.BufferAttribute( new Float32Array( vertexCount * 2 ), 2 );\r\n\r\n\tvar index = 0, vertices = [], normal = new THREE.Vector3();\r\n\r\n\tfor ( var y = 0; y <= heightSegments; y ++ ) {\r\n\r\n\t\tvar verticesRow = [];\r\n\r\n\t\tvar v = y / heightSegments;\r\n\r\n\t\tfor ( var x = 0; x <= widthSegments; x ++ ) {\r\n\r\n\t\t\tvar u = x / widthSegments;\r\n\r\n\t\t\tvar px = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\t\t\tvar py = radius * Math.cos( thetaStart + v * thetaLength );\r\n\t\t\tvar pz = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\r\n\r\n\t\t\tnormal.set( px, py, pz ).normalize();\r\n\r\n\t\t\tpositions.setXYZ( index, px, py, pz );\r\n\t\t\tnormals.setXYZ( index, normal.x, normal.y, normal.z );\r\n\t\t\tuvs.setXY( index, u, 1 - v );\r\n\r\n\t\t\tverticesRow.push( index );\r\n\r\n\t\t\tindex ++;\r\n\r\n\t\t}\r\n\r\n\t\tvertices.push( verticesRow );\r\n\r\n\t}\r\n\r\n\tvar indices = [];\r\n\r\n\tfor ( var y = 0; y < heightSegments; y ++ ) {\r\n\r\n\t\tfor ( var x = 0; x < widthSegments; x ++ ) {\r\n\r\n\t\t\tvar v1 = vertices[ y ][ x + 1 ];\r\n\t\t\tvar v2 = vertices[ y ][ x ];\r\n\t\t\tvar v3 = vertices[ y + 1 ][ x ];\r\n\t\t\tvar v4 = vertices[ y + 1 ][ x + 1 ];\r\n\r\n\t\t\tif ( y !== 0 || thetaStart > 0 ) indices.push( v1, v2, v4 );\r\n\t\t\tif ( y !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( v2, v3, v4 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.setIndex( new THREE.BufferAttribute( new Uint16Array( indices ), 1 ) );\r\n\tthis.addAttribute( 'position', positions );\r\n\tthis.addAttribute( 'normal', normals );\r\n\tthis.addAttribute( 'uv', uvs );\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n};\r\n\r\nTHREE.SphereBufferGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.SphereBufferGeometry.prototype.constructor = THREE.SphereBufferGeometry;\r\n\r\nTHREE.SphereBufferGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.SphereBufferGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.widthSegments,\r\n\t\tthis.parameters.heightSegments,\r\n\t\tthis.parameters.phiStart,\r\n\t\tthis.parameters.phiLength,\r\n\t\tthis.parameters.thetaStart,\r\n\t\tthis.parameters.thetaLength\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/TextGeometry.js\r\n\r\n/**\r\n * @author zz85 / http://www.lab4games.net/zz85/blog\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n * For creating 3D text geometry in three.js\r\n *\r\n * Text = 3D Text\r\n *\r\n * parameters = {\r\n *  size: \t\t\t<float>, \t// size of the text\r\n *  height: \t\t<float>, \t// thickness to extrude text\r\n *  curveSegments: \t<int>,\t\t// number of points on the curves\r\n *\r\n *  font: \t\t\t<string>,\t\t// font name\r\n *  weight: \t\t<string>,\t\t// font weight (normal, bold)\r\n *  style: \t\t\t<string>,\t\t// font style  (normal, italics)\r\n *\r\n *  bevelEnabled:\t<bool>,\t\t\t// turn on bevel\r\n *  bevelThickness: <float>, \t\t// how deep into text bevel goes\r\n *  bevelSize:\t\t<float>, \t\t// how far from text outline is bevel\r\n *  }\r\n *\r\n */\r\n\r\n/*\tUsage Examples\r\n\r\n\t// TextGeometry wrapper\r\n\r\n\tvar text3d = new TextGeometry( text, options );\r\n\r\n\t// Complete manner\r\n\r\n\tvar textShapes = THREE.FontUtils.generateShapes( text, options );\r\n\tvar text3d = new ExtrudeGeometry( textShapes, options );\r\n\r\n*/\r\n\r\n\r\nTHREE.TextGeometry = function ( text, parameters ) {\r\n\r\n\tparameters = parameters || {};\r\n\r\n\tvar textShapes = THREE.FontUtils.generateShapes( text, parameters );\r\n\r\n\t// translate parameters to ExtrudeGeometry API\r\n\r\n\tparameters.amount = parameters.height !== undefined ? parameters.height : 50;\r\n\r\n\t// defaults\r\n\r\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\r\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\r\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\r\n\r\n\tTHREE.ExtrudeGeometry.call( this, textShapes, parameters );\r\n\r\n\tthis.type = 'TextGeometry';\r\n\r\n};\r\n\r\nTHREE.TextGeometry.prototype = Object.create( THREE.ExtrudeGeometry.prototype );\r\nTHREE.TextGeometry.prototype.constructor = THREE.TextGeometry;\r\n\r\n// File:src/extras/geometries/TorusGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * @author mrdoob / http://mrdoob.com/\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3DLite/src/away3dlite/primitives/Torus.as?r=2888\r\n */\r\n\r\nTHREE.TorusGeometry = function ( radius, tube, radialSegments, tubularSegments, arc ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tarc: arc\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 8;\r\n\ttubularSegments = tubularSegments || 6;\r\n\tarc = arc || Math.PI * 2;\r\n\r\n\tvar center = new THREE.Vector3(), uvs = [], normals = [];\r\n\r\n\tfor ( var j = 0; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 0; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar u = i / tubularSegments * arc;\r\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\r\n\r\n\t\t\tcenter.x = radius * Math.cos( u );\r\n\t\t\tcenter.y = radius * Math.sin( u );\r\n\r\n\t\t\tvar vertex = new THREE.Vector3();\r\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\r\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\r\n\t\t\tvertex.z = tube * Math.sin( v );\r\n\r\n\t\t\tthis.vertices.push( vertex );\r\n\r\n\t\t\tuvs.push( new THREE.Vector2( i / tubularSegments, j / radialSegments ) );\r\n\t\t\tnormals.push( vertex.clone().sub( center ).normalize() );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var j = 1; j <= radialSegments; j ++ ) {\r\n\r\n\t\tfor ( var i = 1; i <= tubularSegments; i ++ ) {\r\n\r\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\r\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\r\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\r\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\r\n\r\n\t\t\tvar face = new THREE.Face3( a, b, d, [ normals[ a ].clone(), normals[ b ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ a ].clone(), uvs[ b ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t\tface = new THREE.Face3( b, c, d, [ normals[ b ].clone(), normals[ c ].clone(), normals[ d ].clone() ] );\r\n\t\t\tthis.faces.push( face );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvs[ b ].clone(), uvs[ c ].clone(), uvs[ d ].clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n};\r\n\r\nTHREE.TorusGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry;\r\n\r\nTHREE.TorusGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.TorusGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.tube,\r\n\t\tthis.parameters.radialSegments,\r\n\t\tthis.parameters.tubularSegments,\r\n\t\tthis.parameters.arc\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/TorusKnotGeometry.js\r\n\r\n/**\r\n * @author oosmoxiecode\r\n * based on http://code.google.com/p/away3d/source/browse/trunk/fp10/Away3D/src/away3d/primitives/TorusKnot.as?spec=svn2473&r=2473\r\n */\r\n\r\nTHREE.TorusKnotGeometry = function ( radius, tube, radialSegments, tubularSegments, p, q, heightScale ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TorusKnotGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\ttube: tube,\r\n\t\tradialSegments: radialSegments,\r\n\t\ttubularSegments: tubularSegments,\r\n\t\tp: p,\r\n\t\tq: q,\r\n\t\theightScale: heightScale\r\n\t};\r\n\r\n\tradius = radius || 100;\r\n\ttube = tube || 40;\r\n\tradialSegments = radialSegments || 64;\r\n\ttubularSegments = tubularSegments || 8;\r\n\tp = p || 2;\r\n\tq = q || 3;\r\n\theightScale = heightScale || 1;\r\n\r\n\tvar grid = new Array( radialSegments );\r\n\tvar tang = new THREE.Vector3();\r\n\tvar n = new THREE.Vector3();\r\n\tvar bitan = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tgrid[ i ] = new Array( tubularSegments );\r\n\t\tvar u = i / radialSegments * 2 * p * Math.PI;\r\n\t\tvar p1 = getPos( u, q, p, radius, heightScale );\r\n\t\tvar p2 = getPos( u + 0.01, q, p, radius, heightScale );\r\n\t\ttang.subVectors( p2, p1 );\r\n\t\tn.addVectors( p2, p1 );\r\n\r\n\t\tbitan.crossVectors( tang, n );\r\n\t\tn.crossVectors( bitan, tang );\r\n\t\tbitan.normalize();\r\n\t\tn.normalize();\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar v = j / tubularSegments * 2 * Math.PI;\r\n\t\t\tvar cx = - tube * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tvar cy = tube * Math.sin( v );\r\n\r\n\t\t\tvar pos = new THREE.Vector3();\r\n\t\t\tpos.x = p1.x + cx * n.x + cy * bitan.x;\r\n\t\t\tpos.y = p1.y + cx * n.y + cy * bitan.y;\r\n\t\t\tpos.z = p1.z + cx * n.z + cy * bitan.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = this.vertices.push( pos ) - 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < radialSegments; ++ i ) {\r\n\r\n\t\tfor ( var j = 0; j < tubularSegments; ++ j ) {\r\n\r\n\t\t\tvar ip = ( i + 1 ) % radialSegments;\r\n\t\t\tvar jp = ( j + 1 ) % tubularSegments;\r\n\r\n\t\t\tvar a = grid[ i ][ j ];\r\n\t\t\tvar b = grid[ ip ][ j ];\r\n\t\t\tvar c = grid[ ip ][ jp ];\r\n\t\t\tvar d = grid[ i ][ jp ];\r\n\r\n\t\t\tvar uva = new THREE.Vector2( i / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvb = new THREE.Vector2( ( i + 1 ) / radialSegments, j / tubularSegments );\r\n\t\t\tvar uvc = new THREE.Vector2( ( i + 1 ) / radialSegments, ( j + 1 ) / tubularSegments );\r\n\t\t\tvar uvd = new THREE.Vector2( i / radialSegments, ( j + 1 ) / tubularSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n\tfunction getPos( u, in_q, in_p, radius, heightScale ) {\r\n\r\n\t\tvar cu = Math.cos( u );\r\n\t\tvar su = Math.sin( u );\r\n\t\tvar quOverP = in_q / in_p * u;\r\n\t\tvar cs = Math.cos( quOverP );\r\n\r\n\t\tvar tx = radius * ( 2 + cs ) * 0.5 * cu;\r\n\t\tvar ty = radius * ( 2 + cs ) * su * 0.5;\r\n\t\tvar tz = heightScale * radius * Math.sin( quOverP ) * 0.5;\r\n\r\n\t\treturn new THREE.Vector3( tx, ty, tz );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.TorusKnotGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry;\r\n\r\nTHREE.TorusKnotGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.TorusKnotGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.tube,\r\n\t\tthis.parameters.radialSegments,\r\n\t\tthis.parameters.tubularSegments,\r\n\t\tthis.parameters.p,\r\n\t\tthis.parameters.q,\r\n\t\tthis.parameters.heightScale\r\n\t);\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/TubeGeometry.js\r\n\r\n/**\r\n * @author WestLangley / https://github.com/WestLangley\r\n * @author zz85 / https://github.com/zz85\r\n * @author miningold / https://github.com/miningold\r\n * @author jonobr1 / https://github.com/jonobr1\r\n *\r\n * Modified from the TorusKnotGeometry by @oosmoxiecode\r\n *\r\n * Creates a tube which extrudes along a 3d spline\r\n *\r\n * Uses parallel transport frames as described in\r\n * http://www.cs.indiana.edu/pub/techreports/TR425.pdf\r\n */\r\n\r\nTHREE.TubeGeometry = function ( path, segments, radius, radialSegments, closed, taper ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'TubeGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tpath: path,\r\n\t\tsegments: segments,\r\n\t\tradius: radius,\r\n\t\tradialSegments: radialSegments,\r\n\t\tclosed: closed\r\n\t};\r\n\r\n\tsegments = segments || 64;\r\n\tradius = radius || 1;\r\n\tradialSegments = radialSegments || 8;\r\n\tclosed = closed || false;\r\n\ttaper = taper || THREE.TubeGeometry.NoTaper;\r\n\r\n\tvar grid = [];\r\n\r\n\tvar scope = this,\r\n\r\n\t\ttangent,\r\n\t\tnormal,\r\n\t\tbinormal,\r\n\r\n\t\tnumpoints = segments + 1,\r\n\r\n\t\tu, v, r,\r\n\r\n\t\tcx, cy,\r\n\t\tpos, pos2 = new THREE.Vector3(),\r\n\t\ti, j,\r\n\t\tip, jp,\r\n\t\ta, b, c, d,\r\n\t\tuva, uvb, uvc, uvd;\r\n\r\n\tvar frames = new THREE.TubeGeometry.FrenetFrames( path, segments, closed ),\r\n\t\ttangents = frames.tangents,\r\n\t\tnormals = frames.normals,\r\n\t\tbinormals = frames.binormals;\r\n\r\n\t// proxy internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\tfunction vert( x, y, z ) {\r\n\r\n\t\treturn scope.vertices.push( new THREE.Vector3( x, y, z ) ) - 1;\r\n\r\n\t}\r\n\r\n\t// construct the grid\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tgrid[ i ] = [];\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\tpos = path.getPointAt( u );\r\n\r\n\t\ttangent = tangents[ i ];\r\n\t\tnormal = normals[ i ];\r\n\t\tbinormal = binormals[ i ];\r\n\r\n\t\tr = radius * taper( u );\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tv = j / radialSegments * 2 * Math.PI;\r\n\r\n\t\t\tcx = - r * Math.cos( v ); // TODO: Hack: Negating it so it faces outside.\r\n\t\t\tcy = r * Math.sin( v );\r\n\r\n\t\t\tpos2.copy( pos );\r\n\t\t\tpos2.x += cx * normal.x + cy * binormal.x;\r\n\t\t\tpos2.y += cx * normal.y + cy * binormal.y;\r\n\t\t\tpos2.z += cx * normal.z + cy * binormal.z;\r\n\r\n\t\t\tgrid[ i ][ j ] = vert( pos2.x, pos2.y, pos2.z );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// construct the mesh\r\n\r\n\tfor ( i = 0; i < segments; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < radialSegments; j ++ ) {\r\n\r\n\t\t\tip = ( closed ) ? ( i + 1 ) % segments : i + 1;\r\n\t\t\tjp = ( j + 1 ) % radialSegments;\r\n\r\n\t\t\ta = grid[ i ][ j ];\t\t// *** NOT NECESSARILY PLANAR ! ***\r\n\t\t\tb = grid[ ip ][ j ];\r\n\t\t\tc = grid[ ip ][ jp ];\r\n\t\t\td = grid[ i ][ jp ];\r\n\r\n\t\t\tuva = new THREE.Vector2( i / segments, j / radialSegments );\r\n\t\t\tuvb = new THREE.Vector2( ( i + 1 ) / segments, j / radialSegments );\r\n\t\t\tuvc = new THREE.Vector2( ( i + 1 ) / segments, ( j + 1 ) / radialSegments );\r\n\t\t\tuvd = new THREE.Vector2( i / segments, ( j + 1 ) / radialSegments );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tthis.faces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tthis.faceVertexUvs[ 0 ].push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry;\r\n\r\nTHREE.TubeGeometry.NoTaper = function ( u ) {\r\n\r\n\treturn 1;\r\n\r\n};\r\n\r\nTHREE.TubeGeometry.SinusoidalTaper = function ( u ) {\r\n\r\n\treturn Math.sin( Math.PI * u );\r\n\r\n};\r\n\r\n// For computing of Frenet frames, exposing the tangents, normals and binormals the spline\r\nTHREE.TubeGeometry.FrenetFrames = function ( path, segments, closed ) {\r\n\r\n\tvar\tnormal = new THREE.Vector3(),\r\n\r\n\t\ttangents = [],\r\n\t\tnormals = [],\r\n\t\tbinormals = [],\r\n\r\n\t\tvec = new THREE.Vector3(),\r\n\t\tmat = new THREE.Matrix4(),\r\n\r\n\t\tnumpoints = segments + 1,\r\n\t\ttheta,\r\n\t\tepsilon = 0.0001,\r\n\t\tsmallest,\r\n\r\n\t\ttx, ty, tz,\r\n\t\ti, u;\r\n\r\n\r\n\t// expose internals\r\n\tthis.tangents = tangents;\r\n\tthis.normals = normals;\r\n\tthis.binormals = binormals;\r\n\r\n\t// compute the tangent vectors for each segment on the path\r\n\r\n\tfor ( i = 0; i < numpoints; i ++ ) {\r\n\r\n\t\tu = i / ( numpoints - 1 );\r\n\r\n\t\ttangents[ i ] = path.getTangentAt( u );\r\n\t\ttangents[ i ].normalize();\r\n\r\n\t}\r\n\r\n\tinitialNormal3();\r\n\r\n\t/*\r\n\tfunction initialNormal1(lastBinormal) {\r\n\t\t// fixed start binormal. Has dangers of 0 vectors\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tif (lastBinormal===undefined) lastBinormal = new THREE.Vector3( 0, 0, 1 );\r\n\t\tnormals[ 0 ].crossVectors( lastBinormal, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\t}\r\n\r\n\tfunction initialNormal2() {\r\n\r\n\t\t// This uses the Frenet-Serret formula for deriving binormal\r\n\t\tvar t2 = path.getTangentAt( epsilon );\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3().subVectors( t2, tangents[ 0 ] ).normalize();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3().crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t\tnormals[ 0 ].crossVectors( binormals[ 0 ], tangents[ 0 ] ).normalize(); // last binormal x tangent\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] ).normalize();\r\n\r\n\t}\r\n\t*/\r\n\r\n\tfunction initialNormal3() {\r\n\r\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\r\n\t\t// and in the direction of the smallest tangent xyz component\r\n\r\n\t\tnormals[ 0 ] = new THREE.Vector3();\r\n\t\tbinormals[ 0 ] = new THREE.Vector3();\r\n\t\tsmallest = Number.MAX_VALUE;\r\n\t\ttx = Math.abs( tangents[ 0 ].x );\r\n\t\tty = Math.abs( tangents[ 0 ].y );\r\n\t\ttz = Math.abs( tangents[ 0 ].z );\r\n\r\n\t\tif ( tx <= smallest ) {\r\n\r\n\t\t\tsmallest = tx;\r\n\t\t\tnormal.set( 1, 0, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( ty <= smallest ) {\r\n\r\n\t\t\tsmallest = ty;\r\n\t\t\tnormal.set( 0, 1, 0 );\r\n\r\n\t\t}\r\n\r\n\t\tif ( tz <= smallest ) {\r\n\r\n\t\t\tnormal.set( 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\r\n\r\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\r\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\r\n\r\n\t}\r\n\r\n\r\n\t// compute the slowly-varying normal and binormal vectors for each segment on the path\r\n\r\n\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\tnormals[ i ] = normals[ i - 1 ].clone();\r\n\r\n\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\r\n\r\n\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\r\n\r\n\t\tif ( vec.length() > epsilon ) {\r\n\r\n\t\t\tvec.normalize();\r\n\r\n\t\t\ttheta = Math.acos( THREE.Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\r\n\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\r\n\r\n\t\t}\r\n\r\n\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t}\r\n\r\n\r\n\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\r\n\r\n\tif ( closed ) {\r\n\r\n\t\ttheta = Math.acos( THREE.Math.clamp( normals[ 0 ].dot( normals[ numpoints - 1 ] ), - 1, 1 ) );\r\n\t\ttheta /= ( numpoints - 1 );\r\n\r\n\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ numpoints - 1 ] ) ) > 0 ) {\r\n\r\n\t\t\ttheta = - theta;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( i = 1; i < numpoints; i ++ ) {\r\n\r\n\t\t\t// twist a little...\r\n\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\r\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n// File:src/extras/geometries/PolyhedronGeometry.js\r\n\r\n/**\r\n * @author clockworkgeek / https://github.com/clockworkgeek\r\n * @author timothypratley / https://github.com/timothypratley\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.PolyhedronGeometry = function ( vertices, indices, radius, detail ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'PolyhedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tvertices: vertices,\r\n\t\tindices: indices,\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n\tradius = radius || 1;\r\n\tdetail = detail || 0;\r\n\r\n\tvar that = this;\r\n\r\n\tfor ( var i = 0, l = vertices.length; i < l; i += 3 ) {\r\n\r\n\t\tprepare( new THREE.Vector3( vertices[ i ], vertices[ i + 1 ], vertices[ i + 2 ] ) );\r\n\r\n\t}\r\n\r\n\tvar p = this.vertices;\r\n\r\n\tvar faces = [];\r\n\r\n\tfor ( var i = 0, j = 0, l = indices.length; i < l; i += 3, j ++ ) {\r\n\r\n\t\tvar v1 = p[ indices[ i ] ];\r\n\t\tvar v2 = p[ indices[ i + 1 ] ];\r\n\t\tvar v3 = p[ indices[ i + 2 ] ];\r\n\r\n\t\tfaces[ j ] = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, j );\r\n\r\n\t}\r\n\r\n\tvar centroid = new THREE.Vector3();\r\n\r\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\tsubdivide( faces[ i ], detail );\r\n\r\n\t}\r\n\r\n\r\n\t// Handle case when face straddles the seam\r\n\r\n\tfor ( var i = 0, l = this.faceVertexUvs[ 0 ].length; i < l; i ++ ) {\r\n\r\n\t\tvar uvs = this.faceVertexUvs[ 0 ][ i ];\r\n\r\n\t\tvar x0 = uvs[ 0 ].x;\r\n\t\tvar x1 = uvs[ 1 ].x;\r\n\t\tvar x2 = uvs[ 2 ].x;\r\n\r\n\t\tvar max = Math.max( x0, Math.max( x1, x2 ) );\r\n\t\tvar min = Math.min( x0, Math.min( x1, x2 ) );\r\n\r\n\t\tif ( max > 0.9 && min < 0.1 ) {\r\n\r\n\t\t\t// 0.9 is somewhat arbitrary\r\n\r\n\t\t\tif ( x0 < 0.2 ) uvs[ 0 ].x += 1;\r\n\t\t\tif ( x1 < 0.2 ) uvs[ 1 ].x += 1;\r\n\t\t\tif ( x2 < 0.2 ) uvs[ 2 ].x += 1;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Apply radius\r\n\r\n\tfor ( var i = 0, l = this.vertices.length; i < l; i ++ ) {\r\n\r\n\t\tthis.vertices[ i ].multiplyScalar( radius );\r\n\r\n\t}\r\n\r\n\r\n\t// Merge vertices\r\n\r\n\tthis.mergeVertices();\r\n\r\n\tthis.computeFaceNormals();\r\n\r\n\tthis.boundingSphere = new THREE.Sphere( new THREE.Vector3(), radius );\r\n\r\n\r\n\t// Project vector onto sphere's surface\r\n\r\n\tfunction prepare( vector ) {\r\n\r\n\t\tvar vertex = vector.normalize().clone();\r\n\t\tvertex.index = that.vertices.push( vertex ) - 1;\r\n\r\n\t\t// Texture coords are equivalent to map coords, calculate angle and convert to fraction of a circle.\r\n\r\n\t\tvar u = azimuth( vector ) / 2 / Math.PI + 0.5;\r\n\t\tvar v = inclination( vector ) / Math.PI + 0.5;\r\n\t\tvertex.uv = new THREE.Vector2( u, 1 - v );\r\n\r\n\t\treturn vertex;\r\n\r\n\t}\r\n\r\n\r\n\t// Approximate a curved face with recursively sub-divided triangles.\r\n\r\n\tfunction make( v1, v2, v3, materialIndex ) {\r\n\r\n\t\tvar face = new THREE.Face3( v1.index, v2.index, v3.index, [ v1.clone(), v2.clone(), v3.clone() ], undefined, materialIndex );\r\n\t\tthat.faces.push( face );\r\n\r\n\t\tcentroid.copy( v1 ).add( v2 ).add( v3 ).divideScalar( 3 );\r\n\r\n\t\tvar azi = azimuth( centroid );\r\n\r\n\t\tthat.faceVertexUvs[ 0 ].push( [\r\n\t\t\tcorrectUV( v1.uv, v1, azi ),\r\n\t\t\tcorrectUV( v2.uv, v2, azi ),\r\n\t\t\tcorrectUV( v3.uv, v3, azi )\r\n\t\t] );\r\n\r\n\t}\r\n\r\n\r\n\t// Analytically subdivide a face to the required detail level.\r\n\r\n\tfunction subdivide( face, detail ) {\r\n\r\n\t\tvar cols = Math.pow( 2, detail );\r\n\t\tvar a = prepare( that.vertices[ face.a ] );\r\n\t\tvar b = prepare( that.vertices[ face.b ] );\r\n\t\tvar c = prepare( that.vertices[ face.c ] );\r\n\t\tvar v = [];\r\n\r\n\t\tvar materialIndex = face.materialIndex;\r\n\r\n\t\t// Construct all of the vertices for this subdivision.\r\n\r\n\t\tfor ( var i = 0 ; i <= cols; i ++ ) {\r\n\r\n\t\t\tv[ i ] = [];\r\n\r\n\t\t\tvar aj = prepare( a.clone().lerp( c, i / cols ) );\r\n\t\t\tvar bj = prepare( b.clone().lerp( c, i / cols ) );\r\n\t\t\tvar rows = cols - i;\r\n\r\n\t\t\tfor ( var j = 0; j <= rows; j ++ ) {\r\n\r\n\t\t\t\tif ( j === 0 && i === cols ) {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = aj;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tv[ i ][ j ] = prepare( aj.clone().lerp( bj, j / rows ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Construct all of the faces.\r\n\r\n\t\tfor ( var i = 0; i < cols ; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\r\n\r\n\t\t\t\tvar k = Math.floor( j / 2 );\r\n\r\n\t\t\t\tif ( j % 2 === 0 ) {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tv[ i ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tmake(\r\n\t\t\t\t\t\tv[ i ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k + 1 ],\r\n\t\t\t\t\t\tv[ i + 1 ][ k ],\r\n\t\t\t\t\t\tmaterialIndex\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\t// Angle around the Y axis, counter-clockwise when looking from above.\r\n\r\n\tfunction azimuth( vector ) {\r\n\r\n\t\treturn Math.atan2( vector.z, - vector.x );\r\n\r\n\t}\r\n\r\n\r\n\t// Angle above the XZ plane.\r\n\r\n\tfunction inclination( vector ) {\r\n\r\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\r\n\r\n\t}\r\n\r\n\r\n\t// Texture fixing helper. Spheres have some odd behaviours.\r\n\r\n\tfunction correctUV( uv, vector, azimuth ) {\r\n\r\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) uv = new THREE.Vector2( uv.x - 1, uv.y );\r\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) uv = new THREE.Vector2( azimuth / 2 / Math.PI + 0.5, uv.y );\r\n\t\treturn uv.clone();\r\n\r\n\t}\r\n\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry;\r\n\r\nTHREE.PolyhedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.PolyhedronGeometry(\r\n\t\tthis.parameters.vertices,\r\n\t\tthis.parameters.indices,\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\treturn geometry.copy( this );\r\n\r\n};\r\n\r\nTHREE.PolyhedronGeometry.prototype.copy = function ( source ) {\r\n\r\n\tTHREE.Geometry.prototype.copy.call( this, source );\r\n\treturn this;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/DodecahedronGeometry.js\r\n\r\n/**\r\n * @author Abe Pazos / https://hamoid.com\r\n */\r\n\r\nTHREE.DodecahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\tvar r = 1 / t;\r\n\r\n\tvar vertices = [\r\n\r\n\t\t// (1, 1, 1)\r\n\t\t- 1, - 1, - 1,    - 1, - 1,  1,\r\n\t\t- 1,  1, - 1,    - 1,  1,  1,\r\n\t\t 1, - 1, - 1,     1, - 1,  1,\r\n\t\t 1,  1, - 1,     1,  1,  1,\r\n\r\n\t\t// (0, 1/, )\r\n\t\t 0, - r, - t,     0, - r,  t,\r\n\t\t 0,  r, - t,     0,  r,  t,\r\n\r\n\t\t// (1/, , 0)\r\n\t\t- r, - t,  0,    - r,  t,  0,\r\n\t\t r, - t,  0,     r,  t,  0,\r\n\r\n\t\t// (, 0, 1/)\r\n\t\t- t,  0, - r,     t,  0, - r,\r\n\t\t- t,  0,  r,     t,  0,  r\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 3, 11,  7,      3,  7, 15,      3, 15, 13,\r\n\t\t 7, 19, 17,      7, 17,  6,      7,  6, 15,\r\n\t\t17,  4,  8,     17,  8, 10,     17, 10,  6,\r\n\t\t 8,  0, 16,      8, 16,  2,      8,  2, 10,\r\n\t\t 0, 12,  1,      0,  1, 18,      0, 18, 16,\r\n\t\t 6, 10,  2,      6,  2, 13,      6, 13, 15,\r\n\t\t 2, 16, 18,      2, 18,  3,      2,  3, 13,\r\n\t\t18,  1,  9,     18,  9, 11,     18, 11,  3,\r\n\t\t 4, 14, 12,      4, 12,  0,      4,  0,  8,\r\n\t\t11,  9,  5,     11,  5, 19,     11, 19,  7,\r\n\t\t19,  5, 14,     19, 14,  4,     19,  4, 17,\r\n\t\t 1, 12, 14,      1, 14,  5,      1,  5,  9\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'DodecahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.DodecahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry;\r\n\r\nTHREE.DodecahedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.DodecahedronGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/IcosahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.IcosahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\r\n\r\n\tvar vertices = [\r\n\t\t- 1,  t,  0,    1,  t,  0,   - 1, - t,  0,    1, - t,  0,\r\n\t\t 0, - 1,  t,    0,  1,  t,    0, - 1, - t,    0,  1, - t,\r\n\t\t t,  0, - 1,    t,  0,  1,   - t,  0, - 1,   - t,  0,  1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 0, 11,  5,    0,  5,  1,    0,  1,  7,    0,  7, 10,    0, 10, 11,\r\n\t\t 1,  5,  9,    5, 11,  4,   11, 10,  2,   10,  7,  6,    7,  1,  8,\r\n\t\t 3,  9,  4,    3,  4,  2,    3,  2,  6,    3,  6,  8,    3,  8,  9,\r\n\t\t 4,  9,  5,    2,  4, 11,    6,  2, 10,    8,  6,  7,    9,  8,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'IcosahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.IcosahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry;\r\n\r\nTHREE.IcosahedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.IcosahedronGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/OctahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.OctahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t1, 0, 0,   - 1, 0, 0,    0, 1, 0,    0, - 1, 0,    0, 0, 1,    0, 0, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t0, 2, 4,    0, 4, 3,    0, 3, 5,    0, 5, 2,    1, 2, 5,    1, 5, 3,    1, 3, 4,    1, 4, 2\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'OctahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.OctahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry;\r\n\r\nTHREE.OctahedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.OctahedronGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/TetrahedronGeometry.js\r\n\r\n/**\r\n * @author timothypratley / https://github.com/timothypratley\r\n */\r\n\r\nTHREE.TetrahedronGeometry = function ( radius, detail ) {\r\n\r\n\tvar vertices = [\r\n\t\t 1,  1,  1,   - 1, - 1,  1,   - 1,  1, - 1,    1, - 1, - 1\r\n\t];\r\n\r\n\tvar indices = [\r\n\t\t 2,  1,  0,    0,  3,  2,    1,  3,  0,    2,  3,  1\r\n\t];\r\n\r\n\tTHREE.PolyhedronGeometry.call( this, vertices, indices, radius, detail );\r\n\r\n\tthis.type = 'TetrahedronGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tradius: radius,\r\n\t\tdetail: detail\r\n\t};\r\n\r\n};\r\n\r\nTHREE.TetrahedronGeometry.prototype = Object.create( THREE.PolyhedronGeometry.prototype );\r\nTHREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry;\r\n\r\nTHREE.TetrahedronGeometry.prototype.clone = function () {\r\n\r\n\tvar geometry = new THREE.TetrahedronGeometry(\r\n\t\tthis.parameters.radius,\r\n\t\tthis.parameters.detail\r\n\t);\r\n\r\n\tgeometry.copy( this );\r\n\r\n\treturn geometry;\r\n\r\n};\r\n\r\n// File:src/extras/geometries/ParametricGeometry.js\r\n\r\n/**\r\n * @author zz85 / https://github.com/zz85\r\n * Parametric Surfaces Geometry\r\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\r\n *\r\n * new THREE.ParametricGeometry( parametricFunction, uSegments, ySegements );\r\n *\r\n */\r\n\r\nTHREE.ParametricGeometry = function ( func, slices, stacks ) {\r\n\r\n\tTHREE.Geometry.call( this );\r\n\r\n\tthis.type = 'ParametricGeometry';\r\n\r\n\tthis.parameters = {\r\n\t\tfunc: func,\r\n\t\tslices: slices,\r\n\t\tstacks: stacks\r\n\t};\r\n\r\n\tvar verts = this.vertices;\r\n\tvar faces = this.faces;\r\n\tvar uvs = this.faceVertexUvs[ 0 ];\r\n\r\n\tvar i, j, p;\r\n\tvar u, v;\r\n\r\n\tvar sliceCount = slices + 1;\r\n\r\n\tfor ( i = 0; i <= stacks; i ++ ) {\r\n\r\n\t\tv = i / stacks;\r\n\r\n\t\tfor ( j = 0; j <= slices; j ++ ) {\r\n\r\n\t\t\tu = j / slices;\r\n\r\n\t\t\tp = func( u, v );\r\n\t\t\tverts.push( p );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tvar a, b, c, d;\r\n\tvar uva, uvb, uvc, uvd;\r\n\r\n\tfor ( i = 0; i < stacks; i ++ ) {\r\n\r\n\t\tfor ( j = 0; j < slices; j ++ ) {\r\n\r\n\t\t\ta = i * sliceCount + j;\r\n\t\t\tb = i * sliceCount + j + 1;\r\n\t\t\tc = ( i + 1 ) * sliceCount + j + 1;\r\n\t\t\td = ( i + 1 ) * sliceCount + j;\r\n\r\n\t\t\tuva = new THREE.Vector2( j / slices, i / stacks );\r\n\t\t\tuvb = new THREE.Vector2( ( j + 1 ) / slices, i / stacks );\r\n\t\t\tuvc = new THREE.Vector2( ( j + 1 ) / slices, ( i + 1 ) / stacks );\r\n\t\t\tuvd = new THREE.Vector2( j / slices, ( i + 1 ) / stacks );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( a, b, d ) );\r\n\t\t\tuvs.push( [ uva, uvb, uvd ] );\r\n\r\n\t\t\tfaces.push( new THREE.Face3( b, c, d ) );\r\n\t\t\tuvs.push( [ uvb.clone(), uvc, uvd.clone() ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t// console.log(this);\r\n\r\n\t// magic bullet\r\n\t// var diff = this.mergeVertices();\r\n\t// console.log('removed ', diff, ' vertices by merging');\r\n\r\n\tthis.computeFaceNormals();\r\n\tthis.computeVertexNormals();\r\n\r\n};\r\n\r\nTHREE.ParametricGeometry.prototype = Object.create( THREE.Geometry.prototype );\r\nTHREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry;\r\n\r\n// File:src/extras/geometries/WireframeGeometry.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeGeometry = function ( geometry ) {\r\n\r\n\tTHREE.BufferGeometry.call( this );\r\n\r\n\tvar edge = [ 0, 0 ], hash = {};\r\n\tvar sortFunction = function ( a, b ) {\r\n\r\n\t\treturn a - b;\r\n\r\n\t};\r\n\r\n\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\tif ( geometry instanceof THREE.Geometry ) {\r\n\r\n\t\tvar vertices = geometry.vertices;\r\n\t\tvar faces = geometry.faces;\r\n\t\tvar numEdges = 0;\r\n\r\n\t\t// allocate maximal size\r\n\t\tvar edges = new Uint32Array( 6 * faces.length );\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tedge[ 0 ] = face[ keys[ j ] ];\r\n\t\t\t\tedge[ 1 ] = face[ keys[ ( j + 1 ) % 3 ] ];\r\n\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\tvar vertex = vertices[ edges [ 2 * i + j ] ];\r\n\r\n\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\tcoords[ index + 0 ] = vertex.x;\r\n\t\t\t\tcoords[ index + 1 ] = vertex.y;\r\n\t\t\t\tcoords[ index + 2 ] = vertex.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t} else if ( geometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tif ( geometry.index !== null ) {\r\n\r\n\t\t\t// Indexed BufferGeometry\r\n\r\n\t\t\tvar indices = geometry.index.array;\r\n\t\t\tvar vertices = geometry.attributes.position;\r\n\t\t\tvar drawcalls = geometry.drawcalls;\r\n\t\t\tvar numEdges = 0;\r\n\r\n\t\t\tif ( drawcalls.length === 0 ) {\r\n\r\n\t\t\t\tgeometry.addDrawCall( 0, indices.length );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// allocate maximal size\r\n\t\t\tvar edges = new Uint32Array( 2 * indices.length );\r\n\r\n\t\t\tfor ( var o = 0, ol = drawcalls.length; o < ol; ++ o ) {\r\n\r\n\t\t\t\tvar drawcall = drawcalls[ o ];\r\n\r\n\t\t\t\tvar start = drawcall.start;\r\n\t\t\t\tvar count = drawcall.count;\r\n\r\n\t\t\t\tfor ( var i = start, il = start + count; i < il; i += 3 ) {\r\n\r\n\t\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\t\tedge[ 0 ] = indices[ i + j ];\r\n\t\t\t\t\t\tedge[ 1 ] = indices[ i + ( j + 1 ) % 3 ];\r\n\t\t\t\t\t\tedge.sort( sortFunction );\r\n\r\n\t\t\t\t\t\tvar key = edge.toString();\r\n\r\n\t\t\t\t\t\tif ( hash[ key ] === undefined ) {\r\n\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges ] = edge[ 0 ];\r\n\t\t\t\t\t\t\tedges[ 2 * numEdges + 1 ] = edge[ 1 ];\r\n\t\t\t\t\t\t\thash[ key ] = true;\r\n\t\t\t\t\t\t\tnumEdges ++;\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numEdges; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 2; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 6 * i + 3 * j;\r\n\t\t\t\t\tvar index2 = edges[ 2 * i + j ];\r\n\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices.getX( index2 );\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices.getY( index2 );\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices.getZ( index2 );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// non-indexed BufferGeometry\r\n\r\n\t\t\tvar vertices = geometry.attributes.position.array;\r\n\t\t\tvar numEdges = vertices.length / 3;\r\n\t\t\tvar numTris = numEdges / 3;\r\n\r\n\t\t\tvar coords = new Float32Array( numEdges * 2 * 3 );\r\n\r\n\t\t\tfor ( var i = 0, l = numTris; i < l; i ++ ) {\r\n\r\n\t\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\t\tvar index = 18 * i + 6 * j;\r\n\r\n\t\t\t\t\tvar index1 = 9 * i + 3 * j;\r\n\t\t\t\t\tcoords[ index + 0 ] = vertices[ index1 ];\r\n\t\t\t\t\tcoords[ index + 1 ] = vertices[ index1 + 1 ];\r\n\t\t\t\t\tcoords[ index + 2 ] = vertices[ index1 + 2 ];\r\n\r\n\t\t\t\t\tvar index2 = 9 * i + 3 * ( ( j + 1 ) % 3 );\r\n\t\t\t\t\tcoords[ index + 3 ] = vertices[ index2 ];\r\n\t\t\t\t\tcoords[ index + 4 ] = vertices[ index2 + 1 ];\r\n\t\t\t\t\tcoords[ index + 5 ] = vertices[ index2 + 2 ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.addAttribute( 'position', new THREE.BufferAttribute( coords, 3 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.WireframeGeometry.prototype = Object.create( THREE.BufferGeometry.prototype );\r\nTHREE.WireframeGeometry.prototype.constructor = THREE.WireframeGeometry;\r\n\r\n// File:src/extras/helpers/AxisHelper.js\r\n\r\n/**\r\n * @author sroucheray / http://sroucheray.org/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.AxisHelper = function ( size ) {\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar vertices = new Float32Array( [\r\n\t\t0, 0, 0,  size, 0, 0,\r\n\t\t0, 0, 0,  0, size, 0,\r\n\t\t0, 0, 0,  0, 0, size\r\n\t] );\r\n\r\n\tvar colors = new Float32Array( [\r\n\t\t1, 0, 0,  1, 0.6, 0,\r\n\t\t0, 1, 0,  0.6, 1, 0,\r\n\t\t0, 0, 1,  0, 0.6, 1\r\n\t] );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( vertices, 3 ) );\r\n\tgeometry.addAttribute( 'color', new THREE.BufferAttribute( colors, 3 ) );\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.AxisHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.AxisHelper.prototype.constructor = THREE.AxisHelper;\r\n\r\n// File:src/extras/helpers/ArrowHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @author zz85 / http://github.com/zz85\r\n * @author bhouston / http://exocortex.com\r\n *\r\n * Creates an arrow for visualizing directions\r\n *\r\n * Parameters:\r\n *  dir - Vector3\r\n *  origin - Vector3\r\n *  length - Number\r\n *  color - color in hex value\r\n *  headLength - Number\r\n *  headWidth - Number\r\n */\r\n\r\nTHREE.ArrowHelper = ( function () {\r\n\r\n\tvar lineGeometry = new THREE.Geometry();\r\n\tlineGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 1, 0 ) );\r\n\r\n\tvar coneGeometry = new THREE.CylinderGeometry( 0, 0.5, 1, 5, 1 );\r\n\tconeGeometry.translate( 0, - 0.5, 0 );\r\n\r\n\treturn function ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tTHREE.Object3D.call( this );\r\n\r\n\t\tif ( color === undefined ) color = 0xffff00;\r\n\t\tif ( length === undefined ) length = 1;\r\n\t\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\t\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\t\tthis.position.copy( origin );\r\n\t\t\r\n\t\tif ( headLength < length ) {\r\n\t\t\tthis.line = new THREE.Line( lineGeometry, new THREE.LineBasicMaterial( { color: color } ) );\r\n\t\t\tthis.line.matrixAutoUpdate = false;\r\n\t\t\tthis.add( this.line );\r\n\t\t}\r\n\r\n\t\tthis.cone = new THREE.Mesh( coneGeometry, new THREE.MeshBasicMaterial( { color: color } ) );\r\n\t\tthis.cone.matrixAutoUpdate = false;\r\n\t\tthis.add( this.cone );\r\n\r\n\t\tthis.setDirection( dir );\r\n\t\tthis.setLength( length, headLength, headWidth );\r\n\r\n\t}\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper;\r\n\r\nTHREE.ArrowHelper.prototype.setDirection = ( function () {\r\n\r\n\tvar axis = new THREE.Vector3();\r\n\tvar radians;\r\n\r\n\treturn function setDirection( dir ) {\r\n\r\n\t\t// dir is assumed to be normalized\r\n\r\n\t\tif ( dir.y > 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\r\n\r\n\t\t} else if ( dir.y < - 0.99999 ) {\r\n\r\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\taxis.set( dir.z, 0, - dir.x ).normalize();\r\n\r\n\t\t\tradians = Math.acos( dir.y );\r\n\r\n\t\t\tthis.quaternion.setFromAxisAngle( axis, radians );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n}() );\r\n\r\nTHREE.ArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\r\n\r\n\tif ( headLength === undefined ) headLength = 0.2 * length;\r\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\r\n\r\n\tif ( headLength < length ){\r\n\t\tthis.line.scale.set( 1, length - headLength, 1 );\r\n\t\tthis.line.updateMatrix();\r\n\t}\r\n\r\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\r\n\tthis.cone.position.y = length;\r\n\tthis.cone.updateMatrix();\r\n\r\n};\r\n\r\nTHREE.ArrowHelper.prototype.setColor = function ( color ) {\r\n\r\n\tif ( this.line !== undefined ) this.line.material.color.set( color );\r\n\tthis.cone.material.color.set( color );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/BoxHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.BoxHelper = function ( object ) {\r\n\r\n\tvar indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\r\n\tvar positions = new Float32Array( 8 * 3 );\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\tgeometry.setIndex( new THREE.BufferAttribute( indices, 1 ) );\r\n\tgeometry.addAttribute( 'position', new THREE.BufferAttribute( positions, 3 ) );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: 0xffff00 } ) );\r\n\r\n\tif ( object !== undefined ) {\r\n\r\n\t\tthis.update( object );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.BoxHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.BoxHelper.prototype.constructor = THREE.BoxHelper;\r\n\r\nTHREE.BoxHelper.prototype.update = ( function () {\r\n\r\n\tvar box = new THREE.Box3();\r\n\r\n\treturn function ( object ) {\r\n\r\n\t\tbox.setFromObject( object );\r\n\r\n\t\tif ( box.empty() ) return;\r\n\r\n\t\tvar min = box.min;\r\n\t\tvar max = box.max;\r\n\r\n\t\t/*\r\n\t\t  5____4\r\n\t\t1/___0/|\r\n\t\t| 6__|_7\r\n\t\t2/___3/\r\n\r\n\t\t0: max.x, max.y, max.z\r\n\t\t1: min.x, max.y, max.z\r\n\t\t2: min.x, min.y, max.z\r\n\t\t3: max.x, min.y, max.z\r\n\t\t4: max.x, max.y, min.z\r\n\t\t5: min.x, max.y, min.z\r\n\t\t6: min.x, min.y, min.z\r\n\t\t7: max.x, min.y, min.z\r\n\t\t*/\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\t\tvar array = position.array;\r\n\r\n\t\tarray[  0 ] = max.x; array[  1 ] = max.y; array[  2 ] = max.z;\r\n\t\tarray[  3 ] = min.x; array[  4 ] = max.y; array[  5 ] = max.z;\r\n\t\tarray[  6 ] = min.x; array[  7 ] = min.y; array[  8 ] = max.z;\r\n\t\tarray[  9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\r\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\r\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\r\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\r\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\tthis.geometry.computeBoundingSphere();\r\n\r\n\t}\r\n\r\n} )();\r\n\r\n// File:src/extras/helpers/BoundingBoxHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\n// a helper to show the world-axis-aligned bounding box for an object\r\n\r\nTHREE.BoundingBoxHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0x888888;\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.box = new THREE.Box3();\r\n\r\n\tTHREE.Mesh.call( this, new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshBasicMaterial( { color: color, wireframe: true } ) );\r\n\r\n};\r\n\r\nTHREE.BoundingBoxHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper;\r\n\r\nTHREE.BoundingBoxHelper.prototype.update = function () {\r\n\r\n\tthis.box.setFromObject( this.object );\r\n\r\n\tthis.box.size( this.scale );\r\n\r\n\tthis.box.center( this.position );\r\n\r\n};\r\n\r\n// File:src/extras/helpers/CameraHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n *\r\n *\t- shows frustum, line of sight and up of the camera\r\n *\t- suitable for fast updates\r\n * \t- based on frustum visualization in lightgl.js shadowmap example\r\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\r\n */\r\n\r\nTHREE.CameraHelper = function ( camera ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { color: 0xffffff, vertexColors: THREE.FaceColors } );\r\n\r\n\tvar pointMap = {};\r\n\r\n\t// colors\r\n\r\n\tvar hexFrustum = 0xffaa00;\r\n\tvar hexCone = 0xff0000;\r\n\tvar hexUp = 0x00aaff;\r\n\tvar hexTarget = 0xffffff;\r\n\tvar hexCross = 0x333333;\r\n\r\n\t// near\r\n\r\n\taddLine( \"n1\", \"n2\", hexFrustum );\r\n\taddLine( \"n2\", \"n4\", hexFrustum );\r\n\taddLine( \"n4\", \"n3\", hexFrustum );\r\n\taddLine( \"n3\", \"n1\", hexFrustum );\r\n\r\n\t// far\r\n\r\n\taddLine( \"f1\", \"f2\", hexFrustum );\r\n\taddLine( \"f2\", \"f4\", hexFrustum );\r\n\taddLine( \"f4\", \"f3\", hexFrustum );\r\n\taddLine( \"f3\", \"f1\", hexFrustum );\r\n\r\n\t// sides\r\n\r\n\taddLine( \"n1\", \"f1\", hexFrustum );\r\n\taddLine( \"n2\", \"f2\", hexFrustum );\r\n\taddLine( \"n3\", \"f3\", hexFrustum );\r\n\taddLine( \"n4\", \"f4\", hexFrustum );\r\n\r\n\t// cone\r\n\r\n\taddLine( \"p\", \"n1\", hexCone );\r\n\taddLine( \"p\", \"n2\", hexCone );\r\n\taddLine( \"p\", \"n3\", hexCone );\r\n\taddLine( \"p\", \"n4\", hexCone );\r\n\r\n\t// up\r\n\r\n\taddLine( \"u1\", \"u2\", hexUp );\r\n\taddLine( \"u2\", \"u3\", hexUp );\r\n\taddLine( \"u3\", \"u1\", hexUp );\r\n\r\n\t// target\r\n\r\n\taddLine( \"c\", \"t\", hexTarget );\r\n\taddLine( \"p\", \"c\", hexCross );\r\n\r\n\t// cross\r\n\r\n\taddLine( \"cn1\", \"cn2\", hexCross );\r\n\taddLine( \"cn3\", \"cn4\", hexCross );\r\n\r\n\taddLine( \"cf1\", \"cf2\", hexCross );\r\n\taddLine( \"cf3\", \"cf4\", hexCross );\r\n\r\n\tfunction addLine( a, b, hex ) {\r\n\r\n\t\taddPoint( a, hex );\r\n\t\taddPoint( b, hex );\r\n\r\n\t}\r\n\r\n\tfunction addPoint( id, hex ) {\r\n\r\n\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\tgeometry.colors.push( new THREE.Color( hex ) );\r\n\r\n\t\tif ( pointMap[ id ] === undefined ) {\r\n\r\n\t\t\tpointMap[ id ] = [];\r\n\r\n\t\t}\r\n\r\n\t\tpointMap[ id ].push( geometry.vertices.length - 1 );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.camera = camera;\r\n\tthis.matrix = camera.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.pointMap = pointMap;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.CameraHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.CameraHelper.prototype.constructor = THREE.CameraHelper;\r\n\r\nTHREE.CameraHelper.prototype.update = function () {\r\n\r\n\tvar geometry, pointMap;\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar camera = new THREE.Camera();\r\n\r\n\tvar setPoint = function ( point, x, y, z ) {\r\n\r\n\t\tvector.set( x, y, z ).unproject( camera );\r\n\r\n\t\tvar points = pointMap[ point ];\r\n\r\n\t\tif ( points !== undefined ) {\r\n\r\n\t\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\r\n\r\n\t\t\t\tgeometry.vertices[ points[ i ] ].copy( vector );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn function () {\r\n\r\n\t\tgeometry = this.geometry;\r\n\t\tpointMap = this.pointMap;\r\n\r\n\t\tvar w = 1, h = 1;\r\n\r\n\t\t// we need just camera projection matrix\r\n\t\t// world matrix must be identity\r\n\r\n\t\tcamera.projectionMatrix.copy( this.camera.projectionMatrix );\r\n\r\n\t\t// center / target\r\n\r\n\t\tsetPoint( \"c\", 0, 0, - 1 );\r\n\t\tsetPoint( \"t\", 0, 0,  1 );\r\n\r\n\t\t// near\r\n\r\n\t\tsetPoint( \"n1\", - w, - h, - 1 );\r\n\t\tsetPoint( \"n2\",   w, - h, - 1 );\r\n\t\tsetPoint( \"n3\", - w,   h, - 1 );\r\n\t\tsetPoint( \"n4\",   w,   h, - 1 );\r\n\r\n\t\t// far\r\n\r\n\t\tsetPoint( \"f1\", - w, - h, 1 );\r\n\t\tsetPoint( \"f2\",   w, - h, 1 );\r\n\t\tsetPoint( \"f3\", - w,   h, 1 );\r\n\t\tsetPoint( \"f4\",   w,   h, 1 );\r\n\r\n\t\t// up\r\n\r\n\t\tsetPoint( \"u1\",   w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u2\", - w * 0.7, h * 1.1, - 1 );\r\n\t\tsetPoint( \"u3\",         0, h * 2,   - 1 );\r\n\r\n\t\t// cross\r\n\r\n\t\tsetPoint( \"cf1\", - w,   0, 1 );\r\n\t\tsetPoint( \"cf2\",   w,   0, 1 );\r\n\t\tsetPoint( \"cf3\",   0, - h, 1 );\r\n\t\tsetPoint( \"cf4\",   0,   h, 1 );\r\n\r\n\t\tsetPoint( \"cn1\", - w,   0, - 1 );\r\n\t\tsetPoint( \"cn2\",   w,   0, - 1 );\r\n\t\tsetPoint( \"cn3\",   0, - h, - 1 );\r\n\t\tsetPoint( \"cn4\",   0,   h, - 1 );\r\n\r\n\t\tgeometry.verticesNeedUpdate = true;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/DirectionalLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n */\r\n\r\nTHREE.DirectionalLightHelper = function ( light, size ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tsize = size || 1;\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3( - size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size,   size, 0 ),\r\n\t\tnew THREE.Vector3(   size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size, - size, 0 ),\r\n\t\tnew THREE.Vector3( - size,   size, 0 )\r\n\t);\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.lightPlane = new THREE.Line( geometry, material );\r\n\tthis.add( this.lightPlane );\r\n\r\n\tgeometry = new THREE.Geometry();\r\n\tgeometry.vertices.push(\r\n\t\tnew THREE.Vector3(),\r\n\t\tnew THREE.Vector3()\r\n\t);\r\n\r\n\tmaterial = new THREE.LineBasicMaterial( { fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tthis.targetLine = new THREE.Line( geometry, material );\r\n\tthis.add( this.targetLine );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper;\r\n\r\nTHREE.DirectionalLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightPlane.geometry.dispose();\r\n\tthis.lightPlane.material.dispose();\r\n\tthis.targetLine.geometry.dispose();\r\n\tthis.targetLine.material.dispose();\r\n\r\n};\r\n\r\nTHREE.DirectionalLightHelper.prototype.update = function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar v3 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tv1.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tv2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\t\tv3.subVectors( v2, v1 );\r\n\r\n\t\tthis.lightPlane.lookAt( v3 );\r\n\t\tthis.lightPlane.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.targetLine.geometry.vertices[ 1 ].copy( v3 );\r\n\t\tthis.targetLine.geometry.verticesNeedUpdate = true;\r\n\t\tthis.targetLine.material.color.copy( this.lightPlane.material.color );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/EdgesHelper.js\r\n\r\n/**\r\n * @author WestLangley / http://github.com/WestLangley\r\n * @param object THREE.Mesh whose geometry will be used\r\n * @param hex line color\r\n * @param thresholdAngle the minimum angle (in degrees),\r\n * between the face normals of adjacent faces,\r\n * that is required to render an edge. A value of 10 means\r\n * an edge is only rendered if the angle is at least 10 degrees.\r\n */\r\n\r\nTHREE.EdgesHelper = function ( object, hex, thresholdAngle ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.EdgesGeometry( object.geometry, thresholdAngle ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.EdgesHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper;\r\n\r\n// File:src/extras/helpers/FaceNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.FaceNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\t// FaceNormalsHelper only supports THREE.Geometry\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffff00;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( 'THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.' );\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.FaceNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper;\r\n\r\nTHREE.FaceNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\tvar faces = objGeometry.faces;\r\n\r\n\t\tvar idx = 0;\r\n\r\n\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\tvar normal = face.normal;\r\n\r\n\t\t\tv1.copy( vertices[ face.a ] )\r\n\t\t\t\t.add( vertices[ face.b ] )\r\n\t\t\t\t.add( vertices[ face.c ] )\r\n\t\t\t\t.divideScalar( 3 )\r\n\t\t\t\t.applyMatrix4( matrixWorld );\r\n\r\n\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\tidx = idx + 1;\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/GridHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.GridHelper = function ( size, step ) {\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors } );\r\n\r\n\tthis.color1 = new THREE.Color( 0x444444 );\r\n\tthis.color2 = new THREE.Color( 0x888888 );\r\n\r\n\tfor ( var i = - size; i <= size; i += step ) {\r\n\r\n\t\tgeometry.vertices.push(\r\n\t\t\tnew THREE.Vector3( - size, 0, i ), new THREE.Vector3( size, 0, i ),\r\n\t\t\tnew THREE.Vector3( i, 0, - size ), new THREE.Vector3( i, 0, size )\r\n\t\t);\r\n\r\n\t\tvar color = i === 0 ? this.color1 : this.color2;\r\n\r\n\t\tgeometry.colors.push( color, color, color, color );\r\n\r\n\t}\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n};\r\n\r\nTHREE.GridHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.GridHelper.prototype.constructor = THREE.GridHelper;\r\n\r\nTHREE.GridHelper.prototype.setColors = function( colorCenterLine, colorGrid ) {\r\n\r\n\tthis.color1.set( colorCenterLine );\r\n\tthis.color2.set( colorGrid );\r\n\r\n\tthis.geometry.colorsNeedUpdate = true;\r\n\r\n};\r\n\r\n// File:src/extras/helpers/HemisphereLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.HemisphereLightHelper = function ( light, sphereSize ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.colors = [ new THREE.Color(), new THREE.Color() ];\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tfor ( var i = 0, il = 8; i < il; i ++ ) {\r\n\r\n\t\tgeometry.faces[ i ].color = this.colors[ i < 4 ? 0 : 1 ];\r\n\r\n\t}\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { vertexColors: THREE.FaceColors, wireframe: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.lightSphere );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper;\r\n\r\nTHREE.HemisphereLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.lightSphere.geometry.dispose();\r\n\tthis.lightSphere.material.dispose();\r\n\r\n};\r\n\r\nTHREE.HemisphereLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tthis.colors[ 0 ].copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\t\tthis.colors[ 1 ].copy( this.light.groundColor ).multiplyScalar( this.light.intensity );\r\n\r\n\t\tthis.lightSphere.lookAt( vector.setFromMatrixPosition( this.light.matrixWorld ).negate() );\r\n\t\tthis.lightSphere.geometry.colorsNeedUpdate = true;\r\n\r\n\t}\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/PointLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.PointLightHelper = function ( light, sphereSize ) {\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tvar geometry = new THREE.SphereGeometry( sphereSize, 4, 2 );\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\tmaterial.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.matrix = this.light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\t/*\r\n\tvar distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\r\n\tvar distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\r\n\r\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\r\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\r\n\r\n\tvar d = light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\r\n\tthis.add( this.lightDistance );\r\n\t*/\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper;\r\n\r\nTHREE.PointLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.geometry.dispose();\r\n\tthis.material.dispose();\r\n\r\n};\r\n\r\nTHREE.PointLightHelper.prototype.update = function () {\r\n\r\n\tthis.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t/*\r\n\tvar d = this.light.distance;\r\n\r\n\tif ( d === 0.0 ) {\r\n\r\n\t\tthis.lightDistance.visible = false;\r\n\r\n\t} else {\r\n\r\n\t\tthis.lightDistance.visible = true;\r\n\t\tthis.lightDistance.scale.set( d, d, d );\r\n\r\n\t}\r\n\t*/\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SkeletonHelper.js\r\n\r\n/**\r\n * @author Sean Griffin / http://twitter.com/sgrif\r\n * @author Michael Guerrero / http://realitymeltdown.com\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author ikerr / http://verold.com\r\n */\r\n\r\nTHREE.SkeletonHelper = function ( object ) {\r\n\r\n\tthis.bones = this.getBoneList( object );\r\n\r\n\tvar geometry = new THREE.Geometry();\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.vertices.push( new THREE.Vector3() );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 0, 1 ) );\r\n\t\t\tgeometry.colors.push( new THREE.Color( 0, 1, 0 ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.dynamic = true;\r\n\r\n\tvar material = new THREE.LineBasicMaterial( { vertexColors: THREE.VertexColors, depthTest: false, depthWrite: false, transparent: true } );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, material );\r\n\r\n\tthis.root = object;\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\n\r\nTHREE.SkeletonHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper;\r\n\r\nTHREE.SkeletonHelper.prototype.getBoneList = function( object ) {\r\n\r\n\tvar boneList = [];\r\n\r\n\tif ( object instanceof THREE.Bone ) {\r\n\r\n\t\tboneList.push( object );\r\n\r\n\t}\r\n\r\n\tfor ( var i = 0; i < object.children.length; i ++ ) {\r\n\r\n\t\tboneList.push.apply( boneList, this.getBoneList( object.children[ i ] ) );\r\n\r\n\t}\r\n\r\n\treturn boneList;\r\n\r\n};\r\n\r\nTHREE.SkeletonHelper.prototype.update = function () {\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tvar matrixWorldInv = new THREE.Matrix4().getInverse( this.root.matrixWorld );\r\n\r\n\tvar boneMatrix = new THREE.Matrix4();\r\n\r\n\tvar j = 0;\r\n\r\n\tfor ( var i = 0; i < this.bones.length; i ++ ) {\r\n\r\n\t\tvar bone = this.bones[ i ];\r\n\r\n\t\tif ( bone.parent instanceof THREE.Bone ) {\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.matrixWorld );\r\n\t\t\tgeometry.vertices[ j ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tboneMatrix.multiplyMatrices( matrixWorldInv, bone.parent.matrixWorld );\r\n\t\t\tgeometry.vertices[ j + 1 ].setFromMatrixPosition( boneMatrix );\r\n\r\n\t\t\tj += 2;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tgeometry.verticesNeedUpdate = true;\r\n\r\n\tgeometry.computeBoundingSphere();\r\n\r\n};\r\n\r\n// File:src/extras/helpers/SpotLightHelper.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.SpotLightHelper = function ( light ) {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.light = light;\r\n\tthis.light.updateMatrixWorld();\r\n\r\n\tthis.matrix = light.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 1, 8, 1, true );\r\n\r\n\tgeometry.translate( 0, - 0.5, 0 );\r\n\tgeometry.rotateX( - Math.PI / 2 );\r\n\r\n\tvar material = new THREE.MeshBasicMaterial( { wireframe: true, fog: false } );\r\n\r\n\tthis.cone = new THREE.Mesh( geometry, material );\r\n\tthis.add( this.cone );\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper;\r\n\r\nTHREE.SpotLightHelper.prototype.dispose = function () {\r\n\r\n\tthis.cone.geometry.dispose();\r\n\tthis.cone.material.dispose();\r\n\r\n};\r\n\r\nTHREE.SpotLightHelper.prototype.update = function () {\r\n\r\n\tvar vector = new THREE.Vector3();\r\n\tvar vector2 = new THREE.Vector3();\r\n\r\n\treturn function () {\r\n\r\n\t\tvar coneLength = this.light.distance ? this.light.distance : 10000;\r\n\t\tvar coneWidth = coneLength * Math.tan( this.light.angle );\r\n\r\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\r\n\r\n\t\tvector.setFromMatrixPosition( this.light.matrixWorld );\r\n\t\tvector2.setFromMatrixPosition( this.light.target.matrixWorld );\r\n\r\n\t\tthis.cone.lookAt( vector2.sub( vector ) );\r\n\r\n\t\tthis.cone.material.color.copy( this.light.color ).multiplyScalar( this.light.intensity );\r\n\r\n\t};\r\n\r\n}();\r\n\r\n// File:src/extras/helpers/VertexNormalsHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n * @author WestLangley / http://github.com/WestLangley\r\n*/\r\n\r\nTHREE.VertexNormalsHelper = function ( object, size, hex, linewidth ) {\r\n\r\n\tthis.object = object;\r\n\r\n\tthis.size = ( size !== undefined ) ? size : 1;\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xff0000;\r\n\r\n\tvar width = ( linewidth !== undefined ) ? linewidth : 1;\r\n\r\n\t//\r\n\r\n\tvar nNormals = 0;\r\n\r\n\tvar objGeometry = this.object.geometry;\r\n\r\n\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\tnNormals = objGeometry.faces.length * 3;\r\n\r\n\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\tnNormals = objGeometry.attributes.normal.count\r\n\r\n\t}\r\n\r\n\t//\r\n\r\n\tvar geometry = new THREE.BufferGeometry();\r\n\r\n\tvar positions = new THREE.Float32Attribute( nNormals * 2 * 3, 3 );\r\n\r\n\tgeometry.addAttribute( 'position', positions );\r\n\r\n\tTHREE.LineSegments.call( this, geometry, new THREE.LineBasicMaterial( { color: color, linewidth: width } ) );\r\n\r\n\t//\r\n\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n\tthis.update();\r\n\r\n};\r\n\r\nTHREE.VertexNormalsHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper;\r\n\r\nTHREE.VertexNormalsHelper.prototype.update = ( function () {\r\n\r\n\tvar v1 = new THREE.Vector3();\r\n\tvar v2 = new THREE.Vector3();\r\n\tvar normalMatrix = new THREE.Matrix3();\r\n\r\n\treturn function update() {\r\n\r\n\t\tvar keys = [ 'a', 'b', 'c' ];\r\n\r\n\t\tthis.object.updateMatrixWorld( true );\r\n\r\n\t\tnormalMatrix.getNormalMatrix( this.object.matrixWorld );\r\n\r\n\t\tvar matrixWorld = this.object.matrixWorld;\r\n\r\n\t\tvar position = this.geometry.attributes.position;\r\n\r\n\t\t//\r\n\r\n\t\tvar objGeometry = this.object.geometry;\r\n\r\n\t\tif ( objGeometry instanceof THREE.Geometry ) {\r\n\r\n\t\t\tvar vertices = objGeometry.vertices;\r\n\r\n\t\t\tvar faces = objGeometry.faces;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar face = faces[ i ];\r\n\r\n\t\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\r\n\r\n\t\t\t\t\tvar vertex = vertices[ face[ keys[ j ] ] ];\r\n\r\n\t\t\t\t\tvar normal = face.vertexNormals[ j ];\r\n\r\n\t\t\t\t\tv1.copy( vertex ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\t\tv2.copy( normal ).applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( objGeometry instanceof THREE.BufferGeometry ) {\r\n\r\n\t\t\tvar objPos = objGeometry.attributes.position;\r\n\r\n\t\t\tvar objNorm = objGeometry.attributes.normal;\r\n\r\n\t\t\tvar idx = 0;\r\n\r\n\t\t\t// for simplicity, ignore index and drawcalls, and render every normal\r\n\r\n\t\t\tfor ( var j = 0, jl = objPos.count; j < jl; j ++ ) {\r\n\r\n\t\t\t\tv1.set( objPos.getX( j ), objPos.getY( j ), objPos.getZ( j ) ).applyMatrix4( matrixWorld );\r\n\r\n\t\t\t\tv2.set( objNorm.getX( j ), objNorm.getY( j ), objNorm.getZ( j ) );\r\n\r\n\t\t\t\tv2.applyMatrix3( normalMatrix ).normalize().multiplyScalar( this.size ).add( v1 );\r\n\r\n\t\t\t\tposition.setXYZ( idx, v1.x, v1.y, v1.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t\tposition.setXYZ( idx, v2.x, v2.y, v2.z );\r\n\r\n\t\t\t\tidx = idx + 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tposition.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}() );\r\n\r\n// File:src/extras/helpers/WireframeHelper.js\r\n\r\n/**\r\n * @author mrdoob / http://mrdoob.com/\r\n */\r\n\r\nTHREE.WireframeHelper = function ( object, hex ) {\r\n\r\n\tvar color = ( hex !== undefined ) ? hex : 0xffffff;\r\n\r\n\tTHREE.LineSegments.call( this, new THREE.WireframeGeometry( object.geometry ), new THREE.LineBasicMaterial( { color: color } ) );\r\n\r\n\tthis.matrix = object.matrixWorld;\r\n\tthis.matrixAutoUpdate = false;\r\n\r\n};\r\n\r\nTHREE.WireframeHelper.prototype = Object.create( THREE.LineSegments.prototype );\r\nTHREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper;\r\n\r\n// File:src/extras/objects/ImmediateRenderObject.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.ImmediateRenderObject = function () {\r\n\r\n\tTHREE.Object3D.call( this );\r\n\r\n\tthis.render = function ( renderCallback ) {};\r\n\r\n};\r\n\r\nTHREE.ImmediateRenderObject.prototype = Object.create( THREE.Object3D.prototype );\r\nTHREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject;\r\n\r\n// File:src/extras/objects/MorphBlendMesh.js\r\n\r\n/**\r\n * @author alteredq / http://alteredqualia.com/\r\n */\r\n\r\nTHREE.MorphBlendMesh = function( geometry, material ) {\r\n\r\n\tTHREE.Mesh.call( this, geometry, material );\r\n\r\n\tthis.animationsMap = {};\r\n\tthis.animationsList = [];\r\n\r\n\t// prepare default animation\r\n\t// (all frames played together in 1 second)\r\n\r\n\tvar numFrames = this.geometry.morphTargets.length;\r\n\r\n\tvar name = \"__default\";\r\n\r\n\tvar startFrame = 0;\r\n\tvar endFrame = numFrames - 1;\r\n\r\n\tvar fps = numFrames / 1;\r\n\r\n\tthis.createAnimation( name, startFrame, endFrame, fps );\r\n\tthis.setAnimationWeight( name, 1 );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype = Object.create( THREE.Mesh.prototype );\r\nTHREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh;\r\n\r\nTHREE.MorphBlendMesh.prototype.createAnimation = function ( name, start, end, fps ) {\r\n\r\n\tvar animation = {\r\n\r\n\t\tstart: start,\r\n\t\tend: end,\r\n\r\n\t\tlength: end - start + 1,\r\n\r\n\t\tfps: fps,\r\n\t\tduration: ( end - start ) / fps,\r\n\r\n\t\tlastFrame: 0,\r\n\t\tcurrentFrame: 0,\r\n\r\n\t\tactive: false,\r\n\r\n\t\ttime: 0,\r\n\t\tdirection: 1,\r\n\t\tweight: 1,\r\n\r\n\t\tdirectionBackwards: false,\r\n\t\tmirroredLoop: false\r\n\r\n\t};\r\n\r\n\tthis.animationsMap[ name ] = animation;\r\n\tthis.animationsList.push( animation );\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.autoCreateAnimations = function ( fps ) {\r\n\r\n\tvar pattern = /([a-z]+)_?(\\d+)/;\r\n\r\n\tvar firstAnimation, frameRanges = {};\r\n\r\n\tvar geometry = this.geometry;\r\n\r\n\tfor ( var i = 0, il = geometry.morphTargets.length; i < il; i ++ ) {\r\n\r\n\t\tvar morph = geometry.morphTargets[ i ];\r\n\t\tvar chunks = morph.name.match( pattern );\r\n\r\n\t\tif ( chunks && chunks.length > 1 ) {\r\n\r\n\t\t\tvar name = chunks[ 1 ];\r\n\r\n\t\t\tif ( ! frameRanges[ name ] ) frameRanges[ name ] = { start: Infinity, end: - Infinity };\r\n\r\n\t\t\tvar range = frameRanges[ name ];\r\n\r\n\t\t\tif ( i < range.start ) range.start = i;\r\n\t\t\tif ( i > range.end ) range.end = i;\r\n\r\n\t\t\tif ( ! firstAnimation ) firstAnimation = name;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfor ( var name in frameRanges ) {\r\n\r\n\t\tvar range = frameRanges[ name ];\r\n\t\tthis.createAnimation( name, range.start, range.end, fps );\r\n\r\n\t}\r\n\r\n\tthis.firstAnimation = firstAnimation;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = 1;\r\n\t\tanimation.directionBackwards = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.direction = - 1;\r\n\t\tanimation.directionBackwards = true;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationFPS = function ( name, fps ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.fps = fps;\r\n\t\tanimation.duration = ( animation.end - animation.start ) / animation.fps;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationDuration = function ( name, duration ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.duration = duration;\r\n\t\tanimation.fps = ( animation.end - animation.start ) / animation.duration;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationWeight = function ( name, weight ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.weight = weight;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.setAnimationTime = function ( name, time ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = time;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationTime = function ( name ) {\r\n\r\n\tvar time = 0;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\ttime = animation.time;\r\n\r\n\t}\r\n\r\n\treturn time;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.getAnimationDuration = function ( name ) {\r\n\r\n\tvar duration = - 1;\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tduration = animation.duration;\r\n\r\n\t}\r\n\r\n\treturn duration;\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.playAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.time = 0;\r\n\t\tanimation.active = true;\r\n\r\n\t} else {\r\n\r\n\t\tconsole.warn( \"THREE.MorphBlendMesh: animation[\" + name + \"] undefined in .playAnimation()\" );\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.stopAnimation = function ( name ) {\r\n\r\n\tvar animation = this.animationsMap[ name ];\r\n\r\n\tif ( animation ) {\r\n\r\n\t\tanimation.active = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nTHREE.MorphBlendMesh.prototype.update = function ( delta ) {\r\n\r\n\tfor ( var i = 0, il = this.animationsList.length; i < il; i ++ ) {\r\n\r\n\t\tvar animation = this.animationsList[ i ];\r\n\r\n\t\tif ( ! animation.active ) continue;\r\n\r\n\t\tvar frameTime = animation.duration / animation.length;\r\n\r\n\t\tanimation.time += animation.direction * delta;\r\n\r\n\t\tif ( animation.mirroredLoop ) {\r\n\r\n\t\t\tif ( animation.time > animation.duration || animation.time < 0 ) {\r\n\r\n\t\t\t\tanimation.direction *= - 1;\r\n\r\n\t\t\t\tif ( animation.time > animation.duration ) {\r\n\r\n\t\t\t\t\tanimation.time = animation.duration;\r\n\t\t\t\t\tanimation.directionBackwards = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( animation.time < 0 ) {\r\n\r\n\t\t\t\t\tanimation.time = 0;\r\n\t\t\t\t\tanimation.directionBackwards = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tanimation.time = animation.time % animation.duration;\r\n\r\n\t\t\tif ( animation.time < 0 ) animation.time += animation.duration;\r\n\r\n\t\t}\r\n\r\n\t\tvar keyframe = animation.start + THREE.Math.clamp( Math.floor( animation.time / frameTime ), 0, animation.length - 1 );\r\n\t\tvar weight = animation.weight;\r\n\r\n\t\tif ( keyframe !== animation.currentFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = 0;\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = 1 * weight;\r\n\r\n\t\t\tthis.morphTargetInfluences[ keyframe ] = 0;\r\n\r\n\t\t\tanimation.lastFrame = animation.currentFrame;\r\n\t\t\tanimation.currentFrame = keyframe;\r\n\r\n\t\t}\r\n\r\n\t\tvar mix = ( animation.time % frameTime ) / frameTime;\r\n\r\n\t\tif ( animation.directionBackwards ) mix = 1 - mix;\r\n\r\n\t\tif ( animation.currentFrame !== animation.lastFrame ) {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = mix * weight;\r\n\t\t\tthis.morphTargetInfluences[ animation.lastFrame ] = ( 1 - mix ) * weight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.morphTargetInfluences[ animation.currentFrame ] = weight;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n};\r\n\r\n\r\n// Export the THREE object for **Node.js**, with\r\n// backwards-compatibility for the old `require()` API. If we're in\r\n// the browser, add `_` as a global object via a string identifier,\r\n// for Closure Compiler \"advanced\" mode.\r\nif (typeof exports !== 'undefined') {\r\n  if (typeof module !== 'undefined' && module.exports) {\r\n    exports = module.exports = THREE;\r\n  }\r\n  exports.THREE = THREE;\r\n} else {\r\n  this['THREE'] = THREE;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/three/three.js\n// module id = 48\n// module chunks = 0"],"sourceRoot":""}